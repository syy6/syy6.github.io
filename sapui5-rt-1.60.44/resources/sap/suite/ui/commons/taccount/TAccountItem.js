sap.ui.define(["jquery.sap.global","sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters","sap/suite/ui/commons/taccount/TAccountPanel","sap/suite/ui/commons/taccount/TAccountGroup","sap/ui/core/format/NumberFormat","sap/ui/core/Core","sap/ui/core/library","./TAccountUtils"],function(q,l,C,P,T,a,N,b,c,d){"use strict";var e=C.extend("sap.suite.ui.commons.taccount.TAccountItem",{metadata:{library:"sap.suite.ui.commons",properties:{value:{type:"float",group:"Misc",defaultValue:0},color:{type:"sap.m.ValueCSSColor",group:"Misc",defaultValue:null},group:{type:"string",group:"Misc",defaultValue:""},ariaLabel:{type:"string",group:"Misc",defaultValue:""}},aggregations:{properties:{type:"sap.suite.ui.commons.taccount.TAccountItemProperty",multiple:true,singularName:"property"}},events:{press:{}}},renderer:function(r,i){var s=i.getColor(),u=i.getParent()&&i.getParent().getMeasureOfUnit(),v=d.formatCurrency(i.getValue(),u),t=v+" "+u;r.write("<div tabindex=\"0\"");r.addClass("sapSuiteUiCommonsAccountItem");r.writeClasses(i);r.writeControlData(i);if(i.getGroup()){r.writeAttributeEscaped("group",i.getGroup());}var A=i.getAriaLabel();if(A){r.writeAttributeEscaped("aria-label",A);}r.write(">");r.write("<div class=\"sapSuiteUiCommonsAccountColorBar\"");if(s&&c.CSSColor.isValid(s)){r.write("style=\"background-color:"+s+"\"");}else if(c.CSSColor.isValid(P.get(s))){r.write("style=\"background-color:"+P.get(s)+"\"");}r.write(">");r.write("</div>");r.write("<div id=\""+i.getId()+"-content\" class=\"sapSuiteUiCommonsAccountContent\">");r.write("<div class=\"sapSuiteUiCommonsAccountItemTitleWrapper\">");r.write("<span class=\"sapSuiteUiCommonsAccountItemTitle\">");r.writeEscaped(t);r.write("</span>");r.write("</div>");r.write("<div class=\"sapSuiteUiCommonsAccountItemProperties\">");i.getProperties().forEach(function(p){r.renderControl(p);});r.write("</div>");r.write("</div>");r.write("</div>");}});e.prototype.onBeforeRendering=function(){this._prepareProperties();};e.prototype.onAfterRendering=function(){this.$().on("click",this._click.bind(this));};e.prototype._click=function(){var E=this.fireEvent("press",{},true);if(E){this._highlightItems();}};e.prototype._highlightItems=function(){var $=this.$(),g=this.getGroup(),s=!$.is(".sapSuiteUiCommonsAccountItemSelected, .sapSuiteUiCommonsAccountItemSelectedByGroup");q(".sapSuiteUiCommonsAccountItemSelected").removeClass("sapSuiteUiCommonsAccountItemSelected");s?$.addClass("sapSuiteUiCommonsAccountItemSelected"):$.removeClass("sapSuiteUiCommonsAccountItemSelected");var p=this._findHighlightParent();if(p){q(".sapSuiteUiCommonsAccountItemSelectedByGroup").removeClass("sapSuiteUiCommonsAccountItemSelectedByGroup");if(g&&s){var G=q(".sapSuiteUiCommonsAccountItem[group="+g+"]");G.addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");G.each(function(i,f){var E=sap.ui.getCore().byId(f.id);if(E){var o=E.getParent();if(o){o.$().addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");var h=o.getParent();if(h instanceof a){h.$().addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");}}}});}}};e.prototype.onsapenter=function(){this._highlightItems();};e.prototype.onsapspace=function(){this._highlightItems();};e.prototype._findHighlightParent=function(){var p=this.getParent();p=p&&p.getParent();if(p instanceof a){var o=p.getParent();return o instanceof T||p;}return null;};e.prototype._prepareProperties=function(){this._mProperties={};this.getProperties().forEach(function(p){var k=p.getKey();if(k){this._mProperties[k]=p;}}.bind(this));};e.prototype.setValue=function(v){var o=this.getValue(),D=(this._bIsDebit?-1:1)*(v-o);this.setProperty("value",v);this.getParent()&&this.getParent()._valueChanged(D);};return e;},true);
