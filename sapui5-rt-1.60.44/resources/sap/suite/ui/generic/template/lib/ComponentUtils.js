sap.ui.define(["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var C={isPreliminary:function(){return false;}};function g(c,o){var h;var H;var a;var b;var I=false;var d=[];var e=[];function f(i){var i1;var j1=c.getModel();if(i){if(j1){i1=j1.getProperty(i);}}else{var k1=c.getBindingContext();if(k1){i1=k1.getObject();}}return!!(i1&&i1.__metadata&&i1.__metadata.created);}function j(){return c.getModel("_templPriv");}function k(){return j().getProperty("/generic/viewLevel");}function l(){return o.preprocessorsData;}function m(){return o.oParameterModel;}function n(){var i=c.getModel("i18n").getResourceBundle();return{dataLoadFailedTitle:i.getText("ST_ERROR"),dataLoadFailedText:i.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")};}function A(i,i1,j1){if(typeof j1!=="function"){throw new Error("Event handler must be a function");}e.push({template:i,event:i1,handler:j1});}function D(i1,j1,k1){for(var i=e.length;i--;){if(e[i].handler===k1&&e[i].event===j1&&e[i].template===i1){e.splice(i,1);}}}function F(i1,j1,k1){for(var i=0;i<e.length;i++){if(e[i].event===j1&&e[i].template===i1){e[i].handler(k1);}}}function p(i){return i.getMetadata().getName();}function r(){return o.oApplication.isComponentActive(c);}function s(){return o.oNavigationObserver.getProcessFinished(true);}function P(i,i1){var j1=s();j1.then(function(){if(r()){if(i1){J(true);}F(p(o.oController),"PageDataLoaded",{context:i});}});}function t(){h.then(function(i){if(i){P(i);}});}function S(){o.oHeaderLoadingObserver.startProcess();if(!b){var i=new Promise(function(i1){b=i1;});o.oApplication.getBusyHelper().setBusy(i);}}function N(){if(!H){h=new Promise(function(i){H=i;});}}N();function u(i){q.sap.log.info("Request header data",i.getSource().getPath(),"Class sap.suite.ui.generic.template.lib.ComponentUtils");I=true;N();if(!c.getComponentContainer().getElementBinding().isSuspended()){S();}}function E(){if(b){b();b=null;}o.oHeaderLoadingObserver.stopProcess();}function v(i){var i1=i.getSource().getBoundContext();if(i1){return i1;}if(c.getComponentContainer().getElementBinding().isSuspended()){i1=null;}else{i1=C;}U();return i1;}function w(){var i=n();var i1=c.getAppComponent().getNavigationController();i1.navigateToMessagePage({title:i.dataLoadFailedTitle,text:i.dataLoadFailedText,description:"",viewLevel:k()});}function x(){I=false;if(!a){return;}if(a===C){w();}else if(!c.getComponentContainer().getElementBinding().isSuspended()){(o.methods.updateBindingContext||q.noop)();if(H){H(a);}}else{return;}H=null;a=null;}function y(i){q.sap.log.info("Received header data",i.getSource().getPath(),"Class sap.suite.ui.generic.template.lib.ComponentUtils");E();if(I){a=v(i);}x();}function z(i){var i1=v(i);if(i1&&i1.isPreliminary()){return;}a=i1;x();o.oHeaderLoadingObserver.stopProcess();}function R(i){var i1={createPreliminaryContext:true};var j1=l();if(j1.rootContextExpand&&j1.rootContextExpand.length){i1.expand=j1.rootContextExpand.join(",");}o.oHeaderLoadingObserver.startProcess();if(o.methods.beforeRebind){o.methods.beforeRebind();}N();a=null;c.getComponentContainer().bindElement({path:i,events:{dataRequested:u,dataReceived:y,change:z},parameters:i1,batchGroupId:"Changes",changeSetId:"Changes"});if(o.methods.afterRebind){o.methods.afterRebind();}}function U(){N();var i=c.getComponentContainer();i.unbindElement();a=null;I=false;E();}function G(){var i1=Y();var j1=(i1.length===d.length);for(var i=0;i<i1.length&&j1;i++){j1=i1[i]===d[i];}d=i1;return!j1;}function J(i){o.reuseComponentsReady.then(function(i1){for(var j1 in i1){i1[j1].pathUnchangedCallBack(i);}});}function K(i,i1){var j1=Object.create(null);for(var k1 in i){var l1=i[k1];j1[k1]=i1(l1,k1);}return j1;}function L(){var i=j();for(var i1 in o.routeConfig.embeddedComponents){var j1=!!o.routeConfig.embeddedComponents[i1].hiddenByDefault;i.setProperty("/generic/embeddedComponents/"+i1+"/hidden",j1);}}function M(i,i1){var j1=G();if(j1&&!i1){L();}if(!i){if(o.routingSpec&&o.routingSpec.noOData){P(null,j1);}return;}var k1=c.getComponentContainer();if(!k1){return;}if(f(i)){U();var l1=k1.getModel().getContext(i);if(H){H(l1);H=null;}else{h=Promise.resolve(l1);}k1.setBindingContext(l1);Promise.all([o.oViewRenderedPromise,o.viewRegistered]).then(J.bind(null,true));}else{var m1=k1.getElementBinding();if(m1){if(m1.getPath()===i){if(m1.isSuspended()){m1.resume();x();}if(I){S();}o.oApplication.getBusyHelper().getUnbusy().then(J.bind(null,j1&&o.routingSpec.noOData));if(!i1){t();}return;}else if(!i1){U();}}var n1=c.getModel("ui");n1.setProperty("/enabled",false);n1.setProperty("/editable",false);R(i);t();}}function O(){var i=c.getComponentContainer().getElementBinding();if(i){c.getModel().invalidateEntry(i.getBoundContext());if(i.isSuspended()){U();}else{i.refresh(true);}}}function Q(i){i=i||c.getIsRefreshRequired();if(i||!q.isEmptyObject(o.mRefreshInfos)){(o.methods.refreshBinding||q.noop)(i,o.mRefreshInfos);c.setIsRefreshRequired(false);o.mRefreshInfos=Object.create(null);}J(i);}function T(){var i=c.getComponentContainer();var i1=i.getBindingContext();var j1=i1&&i1.getPath();var k1=j1&&f(j1);if(k1){i.setBindingContext();return;}var l1=i.getElementBinding();if(l1&&!l1.isSuspended()){if(o.oTemplateContract.oValidationMessageBinding.getLength()){U();}else{l1.suspend();}E();}}function V(i){o.oApplication.setBackNavigation(i);}function W(i){var i1=k();return o.oApplication.registerContext(i,i1,c.getEntitySet());}function X(){return o.oApplication.getBreadCrumbInfo(c.getEntitySet());}function Y(){return o.oApplication.getCurrentKeys(k());}function Z(i){return o.oApplication.getCommunicationObject(c,i);}function $(i,i1,j1,k1){o.oApplication.navigateRoute(i,i1,o,j1,k1);}function _(){var i=c.getEntitySet();var i1=o.oTemplateContract.mEntityTree[i];return i1.headerTitle;}function a1(){var i=c.getEntitySet();var i1=o.oTemplateContract.mEntityTree[i];return i1.isDraft;}function b1(){if(a1()){var i=o.oApplication.getHierarchySectionsFromCurrentHash();return"/"+i[0];}}function c1(){return!(o.routingSpec&&o.routingSpec.noOData);}function d1(){return h;}function e1(){return o.oTemplateContract.oPaginatorInfo[k()-1];}function f1(i,i1){var j1=k();if(!i1){j1--;}o.oTemplateContract.oPaginatorInfo[j1]=i;}function g1(i,i1){o.reuseComponentsReady.then(function(j1){var k1=i1.getComponentInstance();for(var l1 in j1){if(k1===j1[l1].component){var m1=j();m1.setProperty("/generic/embeddedComponents/"+l1+"/isInVisibleArea",i);return;}}});}function h1(i){i.oStatePreserverPromise=o.reuseComponentsReady.then(function(i1){var j1={appStateName:encodeURI("sap-iapp-state-"+o.routeConfig.entitySet),getCurrentState:function(){var l1=i.getCurrentState?i.getCurrentState():Object.create(null);var m1=function(n1,o1){if(n1.component.stGetCurrentState){var p1=n1.component.stGetCurrentState();for(var q1 in p1){l1["$embeddedComponent$"+o1.length+"$"+o1+"$"+q1]=p1[q1];}}};K(i1,m1);return l1;},applyState:function(l1,m1){var n1=Object.create(null);var o1=Object.create(null);for(var p1 in l1){if(p1.indexOf("$embeddedComponent$")===0){var q1=p1.substring(19);var r1=q1.indexOf("$");var s1=Number(q1.substring(0,r1));var t1=q1.substring(r1+1,r1+s1+1);var u1=o1[t1];if(!u1){u1=Object.create(null);o1[t1]=u1;}var v1=q1.substring(r1+s1+2);u1[v1]=l1[p1];}else{n1[p1]=l1[p1];}}(i.applyState||q.noop)(n1,m1);var w1=function(x1,y1){if(x1.component.stApplyState){x1.component.stApplyState(o1[y1]||Object.create(null),m1);}};o.oViewRenderedPromise.then(K.bind(null,i1,w1));},oComponent:c};var k1=o.oApplication.getStatePreserver(j1);o.oApplication.registerStateChanger(k1.getAsStateChanger());return k1;});o.oTemplateContract.oStatePreserversAvailablePromise=Promise.all([o.oTemplateContract.oStatePreserversAvailablePromise,i.oStatePreserverPromise]);}return{setEditableNDC:function(i){o.oApplication.setEditableNDC(i);},getEditableNDC:function(){return o.oApplication.getEditableNDC();},getBusyHelper:function(){return o.oApplication.getBusyHelper();},isNonDraftCreate:f,attach:function(i,i1,j1){A(p(i),i1,j1);},detach:function(i,i1,j1){D(p(i),i1,j1);},fire:function(i,i1,j1){F(p(i),i1,j1);},isListReportTemplate:function(){return sap.suite.ui.generic.template.js.AnnotationHelper.isListReportTemplate(o.routeConfig);},getPreprocessorsData:l,getParameterModelForTemplating:m,bindComponent:M,refreshBinding:Q,refreshBindingUnconditional:O,suspendBinding:T,setBackNavigation:V,getTemplatePrivateModel:j,registerContext:W,getViewLevel:k,getBreadCrumbInfo:X,getCurrentKeys:Y,getDraftRootPath:b1,getCommunicationObject:Z,navigateRoute:$,getTitleFromTreeNode:_,isDraftEnabled:a1,isODataBased:c1,isComponentActive:r,navigateToDataLoadedFailedPage:w,getHeaderDataAvailablePromise:d1,getPaginatorInfo:e1,setPaginatorInfo:f1,onVisibilityChangeOfReuseComponent:g1,getNavigationFinishedPromise:s,setStatePreserverPromise:h1,unbind:U};}return B.extend("sap.suite.ui.generic.template.lib.ComponentUtils",{constructor:function(c,o){q.extend(this,g(c,o));}});});
