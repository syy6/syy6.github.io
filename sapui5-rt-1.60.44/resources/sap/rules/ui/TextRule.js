/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2016 SAP SE. All rights reserved
	
 */
sap.ui.define(["jquery.sap.global","./library","sap/m/Label","sap/rules/ui/RuleBase","sap/m/Panel","sap/ui/core/Title","sap/ui/layout/form/Form","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Text","sap/m/Button","sap/ui/layout/Grid","sap/ui/layout/form/FormContainer","sap/ui/layout/form/FormElement","sap/rules/ui/ExpressionAdvanced","sap/m/Link","sap/m/FlexBox","sap/m/Dialog","sap/rules/ui/TextRuleSettings","sap/rules/ui/ast/lib/AstYamlConverter","sap/rules/ui/Constants"],function(q,l,L,R,P,T,F,a,b,c,B,G,d,f,E,g,h,D,k,A,C){"use strict";var m=R.extend("sap.rules.ui.TextRule",{metadata:{properties:{enableSettings:{type:"boolean",group:"Misc",defaultValue:false},enableElse:{type:"boolean",defaultValue:true},enableElseIf:{type:"boolean",defaultValue:true}},aggregations:{"_toolbar":{type:"sap.m.Toolbar",multiple:false,singularName:"_toolbar"},"_verticalLayout":{type:"sap.ui.core.Control",multiple:false,visibility:"visible",singularName:"_verticalLayout"}}},_addConditionBlock:function(e,t){var i=this;var o=this._getModel();var s=e.getSource();var p=s.getParent();if(t===this.typeElseIf&&!(p instanceof P)){p=s.getParent().getParent();}var v=p.getParent();var n=v.indexOfContent(p);var r=this._internalModel.getProperty("/ruleId");var j=this._internalModel.getProperty("/ruleVersion");var u=n+1;var w=false;var x;var K;var y={RuleId:r,RuleVersion:j};if(t===i.typeElse){K="/TextRuleDefaultBranches";w=true;}else{K="/TextRuleBranches";if(s.getParent()instanceof P){x=u;w=true;}else{x=u+1;}y.Sequence=x;}this._updateBusyState(true);var z={};z.properties=y;z.success=function(H){var I={};I.verticalLayout=v;I.nIndex=n;I.bfirst=w;i._addConditionSuccess(H,i,I);if(w){s.destroy();}};z.error=function(){q.sap.log.info("Error creating "+K+"entity");};o.createEntry(K,z);},_addConditionSuccess:function(n,t,e){var N;var i;var s=n.Id;var o=t._getModel();var H={RuleId:n.RuleId,Id:s,RuleVersion:n.RuleVersion};var p=o.createKey("/TextRuleConditions",H);var j=new sap.ui.model.Context(o,p);o.read(p,{urlParameters:{"$expand":"TextRuleResultExpressions"},success:function(r){var v=e.verticalLayout;t.getModel("displayModel").getProperty("/textRuleConditions").push(r);if(r.Type===t.typeElse){t.getModel("displayModel").getProperty("/textRuleConditions/Else").push(r);var u=t._createElseFormLayout(j,t.oBundle.getText("titleElse"),true);v.removeContent(e.nIndex);v.insertContent(u,e.nIndex);}else if(r.Type===t.typeElseIf){t.getModel("displayModel").getProperty("/textRuleConditions/ElseIf").push(r);if(e.bfirst){i=e.nIndex;v.removeContent(e.nIndex);}else{i=e.nIndex+1;}N=" ("+i+")";var w=t._createFormLayout(j,t.oBundle.getText("titleElseIf")+N,true);v.insertContent(w,i);t._adjustElseIfTitle(e.verticalLayout,i,true);}t._updateBusyState(false);},error:function(){q.sap.log.info("Error reading TextRuleResultExpressions");}});},_adjustElseIfTitle:function(v,n,e){var o=v.getContent();var s=this.oBundle.getText("titleElseIf");var i;if(e){i=n+1;}else{i=n;}for(;i<o.length;i++){if(o[i].getHeaderText().indexOf(s)>-1){o[i].getHeaderToolbar().getContent()[0].setText(s+" ("+i+")");}}},_addToolBar:function(){var t=new a({design:"Transparent",enabled:"{TextRuleModel>/editable}"});var o=new sap.m.Title({text:this.oBundle.getText("textRule")});var s=new B({text:"",press:this._openTextRuleSettings.bind(this),visible:{parts:[{path:"TextRuleModel>/enableSettings"},{path:"TextRuleModel>/editable"}],formatter:this._decideSettingsEnablement},enabled:{parts:[{path:"TextRuleModel>/enableSettings"},{path:"TextRuleModel>/editable"}],formatter:this._decideSettingsEnablement}}).setTooltip(this.oBundle.getText("settings"));s.setIcon("sap-icon://action-settings");t.addContent(o);t.addContent(new b({}));t.addContent(s);t.addContent(new b({width:"1em"}));this.setAggregation("_toolbar",t,true);},_addTextRuleControl:function(){this.verticalLayout=new sap.ui.layout.VerticalLayout({width:"100%"});this.setAggregation("_verticalLayout",this.verticalLayout,true);},_bindRule:function(){var t=this;var M=this._getModel();var s=[this._getBindModelName(),this.getBindingContextPath()].join("");if(s&&M){M.setDeferredGroups(["read"]);M.read(s,{groupId:"read",urlParameters:{"$expand":"TextRule"}});var e=[s,"/TextRule/TextRuleResults"].join("");M.read(e,{groupId:"read"});e=[s,"/TextRule/TextRuleConditions"].join("");M.read(e,{groupId:"read",urlParameters:{"$expand":"TextRuleResultExpressions"}});M.submitChanges({groupId:"read",success:function(i){t._handleVerticalLayoutDataReceived(i);},error:function(){q.sap.log.info("Error reading TextRule data from backend");}});}},_bindVerticalLayout:function(){var I=this._getIfPanel();this.verticalLayout.addContent(I);if(this.getEnableElseIf()===true){var e=this._getElseIfPanel();for(var i=0;i<e.length;i++){this.verticalLayout.addContent(e[i]);}}if(this.getEnableElse()===true){var o=this._getElsePanel();this.verticalLayout.addContent(o[0]);}},_createFormLayout:function(o,t,e){var i=this;var p=new P({expandable:true,expanded:e,headerText:t,height:"100%",backgroundDesign:"Translucent",content:new F({editable:true,layout:new sap.ui.layout.form.ResponsiveGridLayout({labelSpanXL:2,labelSpanL:2,labelSpanM:2,labelSpanS:12,adjustLabelSpan:false,emptySpanXL:4,emptySpanL:4,emptySpanM:4,emptySpanS:4,columnsL:1,columnsM:1}),formContainers:[i._createIfBlockFormContainer(o,t),i._createThenFormContainer(o,this.oBundle.getText("then"))]})}).addStyleClass("sapTextRulePanel");if(t===this.typeIf){p.setHeaderText(t);}else{var j=new a({design:"Transparent"});var n=new sap.m.Title({text:t});var r=new B({visible:{parts:[{path:"TextRuleModel>/enableSettings"},{path:"TextRuleModel>/editable"}],formatter:this._decideSettingsEnablement},text:this.oBundle.getText("addButton"),tooltip:this.oBundle.getText("addNewElseIf"),press:function(u){i._addConditionBlock(u,i.typeElseIf);}}).setBindingContext(o);var s=new B({text:this.oBundle.getText("deleteButton"),tooltip:this.oBundle.getText("deleteElseIf"),visible:{parts:[{path:"TextRuleModel>/enableSettings"},{path:"TextRuleModel>/editable"}],formatter:this._decideSettingsEnablement},press:function(u){i._deleteConditionBlock(u);}}).setBindingContext(o);j.addContent(n);j.addContent(new b());j.addContent(r);j.addContent(new b({width:"0.5px"}));j.addContent(s);p.setHeaderToolbar(j);}return p;},_createElseFormLayout:function(o,t,e){var i=this;var j=new a({design:"Transparent"});var n=new sap.m.Title({text:t});var p=new B({text:this.oBundle.getText("deleteButton"),tooltip:this.oBundle.getText("deleteElse"),visible:{parts:[{path:"TextRuleModel>/enableSettings"},{path:"TextRuleModel>/editable"}],formatter:this._decideSettingsEnablement},press:function(s){i._deleteConditionBlock(s);}}).setBindingContext(o);j.addContent(n);j.addContent(new b());j.addContent(p);var r=new P({expandable:true,expanded:e,height:"100%",backgroundDesign:"Translucent",content:new F({editable:true,layout:new sap.ui.layout.form.ResponsiveGridLayout({labelSpanXL:2,labelSpanL:2,labelSpanM:2,labelSpanS:12,adjustLabelSpan:false,emptySpanXL:4,emptySpanL:4,emptySpanM:4,emptySpanS:4,columnsL:1,columnsM:1}),formContainers:[this._createThenFormContainer(o,t)]})}).addStyleClass("sapTextRulePanel");r.setHeaderToolbar(j);return r;},_createIfBlockFormContainer:function(o,t){var e=o.getProperty("Expression");var i=new d({formElements:[new f({label:new L({text:""}),fields:[this._getExpressionAdvancedText(o,e)]})]});return i;},_createThenFormContainer:function(o,t){var e=new d({visible:false});if(o.getProperty("Type")!==this.typeElse){var n=new a({content:[new b({width:"2em"}),new L({text:t}).addStyleClass("sapTextRuleFontSize")]});e.setToolbar(n);}var s=o.getProperty("Id");var p=this.getModel("displayModel").getProperty("/textRuleConditions");for(var i=0;i<p.length;i++){if(s===p[i].Id){var r=p[i].TextRuleResultExpressions.results;if(r){for(var j=0;j<r.length;j++){var H={RuleId:r[j].RuleId,ConditionId:r[j].ConditionId,ResultId:r[j].ResultId,RuleVersion:r[j].RuleVersion};var u=this._getModel().createKey("/TextRuleResultExpressions",H);var v=new sap.ui.model.Context(this._getModel(),u);e.addFormElement(this._formElementsFactory(t+"result"+j,v));}}}}var w=e.getFormElements();for(var x in w){if(w[x].getVisible()){e.setVisible(true);break;}}return e;},_createTextRuleSettings:function(){var M=this._getModel();var o=this.getBindingContext();var t=new k({expressionLanguage:this.getExpressionLanguage(),newTextRule:this._internalModel.getProperty("/newTextRule")});var s=JSON.stringify(this._settingsModel.getData());var e=JSON.parse(s);var i=new sap.ui.model.json.JSONModel(e);t.setModel(i);t.setModel(this._internalModel,"TextRuleModel");t.setModel(M,"oDataModel");t.setBindingContext(o,"dummy");return t;},_decideSettingsEnablement:function(e,i){return e&&i;},_deleteConditionBlock:function(e){var t=this;var o=this._getModel();var s=e.getSource();var p=s.getParent().getParent();var v=p.getParent();var n=v.indexOfContent(p);var i=s.getBindingContext();var j=i.getProperty("Id");var r=i.getProperty("Type");var K;if(r===t.typeElse){K="/TextRuleDefaultBranches";}else if(r===t.typeElseIf){K="/TextRuleBranches";}var H={RuleId:i.getProperty("RuleId"),Id:j,RuleVersion:i.getProperty("RuleVersion")};var u=o.createKey(K,H);var _=function(){var p;v.removeContent(n);if(r===t.typeElse){t.getModel("displayModel").setProperty("/textRuleConditions/Else",[]);p=t._getElsePanel();v.insertContent(p[0],n);}else{if(n===1&&v.getContent().length<=2){t.getModel("displayModel").setProperty("/textRuleConditions/ElseIf",[]);p=t._getElseIfPanel();v.insertContent(p[0],n);}else{var w=t.getModel("displayModel").getProperty("/textRuleConditions/ElseIf");for(var x in w){if(w[x].Id===j){w.splice(x,1);t.getModel("displayModel").setProperty("/textRuleConditions/ElseIf",w);break;}}}t._adjustElseIfTitle(v,n,false);}t._updateBusyState(false);};this._updateBusyState(true);o.remove(u,{success:function(w){_();},error:function(){q.sap.log.info("Error deleting "+K+"entity");}});},_formRuleData:function(o,e){var i=this.getBindingContextPath();var r=i.split("/")[2];var j=o.getProperty("RuleId");var v=o.getProperty("Version");var n=q.extend({},this.getModel().oData);n=n[r];if(!n){n={};}if(!n.DecisionTable){n.DecisionTable={};}n.Type="DT";n.DecisionTable.metadata={};n.DecisionTable.RuleID=j;n.DecisionTable.version=v;n.DecisionTable.HitPolicy="FM";n.DecisionTable.DecisionTableColumns={};n.DecisionTable.DecisionTableColumns.results=[];n.DecisionTable.DecisionTableColumns.results.push({"metadata":{},"RuleId":j,"Id":1,"Version":v,"Sequence":1,"Type":"CONDITION","Condition":{"metadata":{},"RuleId":j,"Id":1,"Version":v,"Expression":e,"Description":null,"ValueOnly":false,"FixedOperator":null},"Result":null});n.DecisionTable.DecisionTableRows={};n.DecisionTable.DecisionTableRows.results=[];n.DecisionTable.DecisionTableColumnsCondition={};n.DecisionTable.DecisionTableColumnsCondition.results=[];n.DecisionTable.DecisionTableColumnsResult={};n.DecisionTable.DecisionTableColumnsResult.results=[];return n;},_formElementsFactory:function(i,o){var r=o.getProperty("ResultId"),e=o.getProperty("RuleId"),v=o.getProperty("RuleVersion"),V=true;var H={RuleId:e,Id:r,RuleVersion:v};var j=o.getProperty("Expression");var n=o.getModel().createKey("/TextRuleResults",H);this._internalModel.getProperty("/textRuleResultExpressions").push(o.getModel().getProperty(o.getPath()));var p=o.getModel().getProperty(n+"/BusinessDataType");var s=o.getModel().getProperty(n+"/DataObjectAttributeName");var t=o.getModel().getProperty(n+"/AccessMode");var u=o.getModel().getProperty(n+"/DataObjectAttributeId");if(t===C.EDITABLE){V=true;}else if(t===C.HIDDEN){V=false;}var w=new f({visible:V,label:new L({text:s,tooltip:s}),fields:[this._getExpressionAdvancedText(o,j,p,u)]});return w;},_getBindModelName:function(){var p="";var e=this.getModelName();if(e){p=e+">";}return p;},_getBlankContent:function(){var o=new L({text:this.oBundle.getText("startTextRule")});var s=new c();s.setText("\u00a0");var e=new g({enabled:{parts:[{path:"TextRuleModel>/enableSettings"},{path:"TextRuleModel>/editable"}],formatter:this._decideSettingsEnablement},text:" "+this.oBundle.getText("settings"),press:[this._openTextRuleSettings,this]}).addStyleClass("sapTextRuleLink");var i=new h({justifyContent:"Center",items:[o,s,e],visible:{parts:[{path:"TextRuleModel>/enableSettings"},{path:"TextRuleModel>/editable"}],formatter:this._decideSettingsEnablement}}).addStyleClass("sapUiMediumMargin");return i;},_getConvertedExpression:function(e,i,o){var j=sap.ui.getCore().byId(this.getExpressionLanguage());var r=this._formRuleData(o,e);var n;if(i){n=j.convertRuleToCodeValues(r);}else{n=j.convertRuleToDisplayValues(r);}r.Type="TextRule";return n;},_getDataLoadedPromise:function(){if(!this._dataLoaded){this._setDataLoadedPromise();}return this._dataLoaded.promise();},_getElseButton:function(){var t=this;this.oElseButton=new sap.m.Button({id:"_elseButton",text:this.oBundle.getText("addElse"),tooltip:this.oBundle.getText("addElse"),enabled:"{TextRuleModel>/editable}",press:function(e){t._addConditionBlock(e,t.typeElse);}});return this.oElseButton;},_getElseIfButton:function(){var t=this;this.oElseIfButton=new sap.m.Button({id:"_elseIfButton",text:this.oBundle.getText("addElseIf"),tooltip:this.oBundle.getText("addElseIf"),enabled:"{TextRuleModel>/editable}",press:function(e){t._addConditionBlock(e,t.typeElseIf);}});return this.oElseIfButton;},_getElseIfPanel:function(){var t=this.oBundle.getText("titleElseIf");var o=[];var e=this._displayModel.getProperty("/textRuleConditions/ElseIf");if(e.length>0){for(var i=0;i<e.length;i++){var H={RuleId:e[i].RuleId,Id:e[i].Id,RuleVersion:e[i].RuleVersion};var p=this._getModel().createKey("/TextRuleConditions",H);var j=new sap.ui.model.Context(this._getModel(),p);var n=i+1;var N=" ("+n+")";o.push(this._createFormLayout(j,t+N,false));}}else{var r=new P({headerText:t,visible:{parts:[{path:"TextRuleModel>/enableSettings"},{path:"TextRuleModel>/editable"}],formatter:this._decideSettingsEnablement},content:this._getElseIfButton()});o.push(r);}return o;},_getElsePanel:function(){var t=this.oBundle.getText("titleElse");var o=[];var e=this._displayModel.getProperty("/textRuleConditions/Else");if(e.length>0){var H={RuleId:e[0].RuleId,Id:e[0].Id,RuleVersion:e[0].RuleVersion};var p=this._getModel().createKey("/TextRuleConditions",H);var i=new sap.ui.model.Context(this._getModel(),p);o.push(this._createElseFormLayout(i,t),false);}else{var j=new P({headerText:t,visible:{parts:[{path:"TextRuleModel>/enableSettings"},{path:"TextRuleModel>/editable"}],formatter:this._decideSettingsEnablement},content:this._getElseButton()});o.push(j);}return o;},_getExpressionAdvancedText:function(o,i,j,n){var t=this;var p=sap.ui.getCore().byId(this.getExpressionLanguage());var s=j?j:sap.rules.ui.ExpressionType.BooleanEnhanced;var r=t._getConvertedExpression(i,false,o);var u=t._getExpressionFromParseResults(i,r);u=u?u:i;return new E({expressionLanguage:p,placeholder:this.oBundle.getText("expressionPlaceHolder"),validateOnLoad:true,type:s,value:u,attributeInfo:n,editable:"{TextRuleModel>/editable}",change:function(v){var S=v.getSource();o=S.getBindingContext();var w=o.getPath();r=t._getConvertedExpression(S.getValue(),true,o);var x=t._getExpressionFromParseResults(S.getValue(),r);x=x?x:S.getValue();t._updateModelExpression(w,o,x);var y=r.output.decisionTableData.DecisionTable.DecisionTableColumns.results["0"].Condition.parserResults;if(y.status!=="Error"){t._astUtils.Id=0;var z=y.converted.ASTOutput;try{var H=JSON.stringify(t._astUtils.parseConditionStatement(z));var I=o.oModel.oMetadata.mEntityTypes["/TextRuleConditions"].property;var J=0;if(I){for(var K=0;K<I.length;K++){if(I[K].name==="AST"){J=I[K].maxLength;}}if(H&&H.length<=J){t._updateModelExpressionModelAst(w,o,H);}}}catch(e){q.sap.log.error("Exception while converting ast for expression"+S.getValue()+" :"+e.message);}}}.bind(this)}).setBindingContext(o);},_getExpressionFromParseResults:function(e,r){if(r&&r.output.decisionTableData.DecisionTable.DecisionTableColumns.results[0].Condition.parserResults&&r.output.decisionTableData.DecisionTable.DecisionTableColumns.results[0].Condition.parserResults.converted){return r.output.decisionTableData.DecisionTable.DecisionTableColumns.results[0].Condition.parserResults.converted.Expression;}else{return e;}},_getIfPanel:function(){var t=this.oBundle.getText("titleIf");var i=this._displayModel.getProperty("/textRuleConditions/If");var H={RuleId:i[0].RuleId,Id:i[0].Id,RuleVersion:i[0].RuleVersion};var p=this._getModel().createKey("/TextRuleConditions",H);var o=new sap.ui.model.Context(this._getModel(),p);return this._createFormLayout(o,t,true);},_getModel:function(){var e=this.getModelName();if(e){return this.getModel(e);}return this.getModel();},_handleVerticalLayoutDataReceived:function(r){var e=r.__batchResponses[1].data;if(e&&e.results){this._internalModel.setProperty("/textRuleResults",e.results);}var i=r.__batchResponses[2].data;var j;if(!i){return;}var v=this.getAggregation("_verticalLayout");if(i.results&&i.results.length===0){j=this._getBlankContent();v.addContent(j);this._internalModel.setProperty("/newTextRule",true);this._updateBusyState(false);}else{this._segregateTextRuleData(i.results);if(this._displayModel.getProperty("/textRuleConditions/If").length===0){j=this._getBlankContent();v.addContent(j);this._internalModel.setProperty("/newTextRule",true);this._updateBusyState(false);}else{this._bindVerticalLayout();this._internalModel.setProperty("/newTextRule",false);}}},_initDisplayModel:function(){var e={};e.textRuleConditions=[];e.textRuleConditions.If=[];e.textRuleConditions.ElseIf=[];e.textRuleConditions.Else=[];this._displayModel=new sap.ui.model.json.JSONModel(e);this.setModel(this._displayModel,"displayModel");},_initInternalModel:function(){var e={};e.editable=this.getEditable();e.newTextRule=true;e.enableSettings=true;e.projectId="";e.projectVersion="";e.ruleId="";e.ruleVersion="";e.ruleBindingPath="";e.textRuleResults=[];e.textRuleResultExpressions=[];this._internalModel=new sap.ui.model.json.JSONModel(e);this.setModel(this._internalModel,"TextRuleModel");},_initSettingsModel:function(){this._settingsModel=new sap.ui.model.json.JSONModel();this.setModel(this._settingsModel,"settingModel");},_openTextRuleSettings:function(){var t=this._createTextRuleSettings();var o=new D({contentWidth:"70%",contentHeight:"315px",title:this.oBundle.getText("textRuleSettings")});o.addContent(t);var e=t.getButtons(o);for(var i=0;i<e.length;i++){o.addButton(e[i]);}o.attachBeforeClose(function(j){var n=o.getState();if(n===sap.ui.core.ValueState.Success){if(this._internalModel.getProperty("/resultChanged")){var p=sap.ui.getCore().getEventBus();p.publish("sap.ui.rules","refreshTextRuleModel");}this._resetControl();}o.destroy();},this);o.open();},_resetControl:function(){this._unbindVerticalLayout();this._initInternalModel();this._initSettingsModel();this._initDisplayModel();this._updateBusyState(true);var M=this._getModel();var e=this.getBindingContextPath();if(!e||!M){return;}this._resetContent=false;var s=e.split("'");this._internalModel.setProperty("/projectId",s[1]);this._internalModel.setProperty("/projectVersion",s[3]);this._internalModel.setProperty("/ruleId",s[5]);this._internalModel.setProperty("/ruleVersion",s[7]);this._internalModel.setProperty("/ruleBindingPath",e);var o=new sap.ui.model.Context(M,e);this.setBindingContext(o);this._bindRule();},_segregateTextRuleData:function(e){var o=[];o.If=[];o.ElseIf=[];o.Else=[];for(var i=0;i<e.length;i++){o.push(e[i]);if(e[i].Type===this.typeIf){o.If.push(e[i]);}else if(e[i].Type===this.typeElseIf){o.ElseIf.push(e[i]);}else if(e[i].Type===this.typeElse){o.Else.push(e[i]);}}this.getModel("displayModel").setProperty("/textRuleConditions",o);},_updateBusyState:function(e){if(e){sap.ui.core.BusyIndicator.show(0);}else{setTimeout(function(){sap.ui.core.BusyIndicator.hide();},1500);}},_unbindVerticalLayout:function(){var v=this.getAggregation("_verticalLayout");v.destroyContent();},_updateModelExpression:function(p,o,e){o.getModel().setProperty(p+"/Expression",e,o,true);},_updateModelExpressionModelAst:function(p,o,e){if(o.getModel().getProperty(p+"/AST")){o.getModel().setProperty(p+"/AST",e,o,true);}},init:function(){this.oBundle=sap.ui.getCore().getLibraryResourceBundle("sap.rules.ui.i18n");this.typeIf="If";this.typeElseIf="ElseIf";this.typeElse="Else";this._resetContent=true;this._initInternalModel();this._initDisplayModel();this._initSettingsModel();this._addToolBar();this._addTextRuleControl();this._astUtils=A;},onAfterRendering:function(){var v=this.getAggregation("_verticalLayout");var t=this;v.addEventDelegate({"onAfterRendering":function(){t._updateBusyState(false);}},this);},onBeforeRendering:function(){if(this._resetContent){this._resetControl();}},setEnableSettings:function(v){this.setProperty("enableSettings",v,true);this._internalModel.setProperty("/enableSettings",v);return this;},setModelName:function(v){this.setProperty("modelName",v);this._resetContent=true;return this;},setExpressionLanguage:function(v){this.setAssociation("expressionLanguage",v,true);var e=(v instanceof Object)?v:sap.ui.getCore().byId(v);if(!e){return this;}var V=this.getAggregation("_verticalLayout");if(V){var i=V.getBinding("content");if(i){i.refresh();}}return this;},setEditable:function(v){this.setProperty("editable",v,true);this._internalModel.setProperty("/editable",v);return this;},setBindingContextPath:function(v){var o=this.getBindingContextPath();if(v&&(o!==v)){this._unbindVerticalLayout();this.setProperty("bindingContextPath",v);this._resetContent=true;}return this;}});return m;},true);
