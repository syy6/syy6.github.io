// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define([],function(){"use strict";function a(g){return p(g).filter(function(P){return Object.keys(P.options).length>0;}).map(function(P){return{name:P.name,options:P.options};});}function b(g){return p(g).reduce(function(r,P){r[P.name]=P.value;return r;},{});}function p(g){if(Object.prototype.toString.apply(g)!=="[object Object]"){return[];}var P=JSON.parse(JSON.stringify(g));return Object.keys(P).map(function(e){var v=P[e];var o={};if(Object.prototype.toString.apply(v)==="[object Object]"){v=v.value;delete P[e].value;o=P[e];}return{name:e,value:v,options:o};});}function s(o){try{return JSON.parse(o);}catch(e){jQuery.sap.log.error("Cannot parse the given string to object",o,"sap.ushell.services.CrossApplicationNavigation");}return null;}function c(D){var A=sap.ushell.Container.getService("AppState");var o=A.createEmptyAppState(null);o.setData(D);o.save();return o.getKey();}function d(I,P){var e,g=null,u;if(typeof I==="string"){if(I.indexOf(P+"=")===-1){return{intent:I,data:null};}u=sap.ushell.Container.getService("URLParsing");var o=u.parseShellHash(I);if(!o){return{intent:I,data:null};}g=o.params[P];delete o.params[P];e=u.constructShellHash(o);return{intent:e,data:g};}if(Object.prototype.toString.apply(I)==="[object Object]"){var S=jQuery.sap.getObject("target.shellHash",undefined,I);if(typeof S==="string"){var r=d(S,P);I.target.shellHash=r.intent;return{intent:I,data:r.data};}var h=I.params;if(h&&h[P]){g=typeof h[P]==="string"?[h[P]]:h[P];delete h[P];}return{intent:I,data:g};}jQuery.sap.log.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:I};}function f(I,S){var v,x,A,X,e;x=d(I,S);v=x.intent;X=x.data&&x.data[0];if(!X){return;}A=s(X);if(!A){return;}e=c(A);i(v,"sap-xapp-state",e);}function i(I,P,v){if(typeof I==="string"){var u=sap.ushell.Container.getService("URLParsing");var o=u.parseShellHash(I);o.params[P]=v;return u.constructShellHash(o);}if(Object.prototype.toString.apply(I)==="[object Object]"){var S=jQuery.sap.getObject("target.shellHash",undefined,I);if(typeof S==="string"){I.target.shellHash=i(S,P,v);return I;}if(!I.params){I.params={};}I.params[P]=v;}return I;}return{extractGetLinksParameterDefinition:b,extractGetLinksParameterOptions:a,parseGetLinksParameters:p,extractParameter:d,injectParameter:i,safeParseToObject:s,createAppStateFromData:c,addXAppStateFromParameter:f};},false);
