sap.ui.define(['sap/ushell/renderers/fiori2/search/controls/SearchText','sap/ushell/renderers/fiori2/search/controls/SearchLink','sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/controls/SearchRelatedObjectsToolbar','sap/ushell/renderers/fiori2/search/SearchModel'],function(S,a,b,c,e){"use strict";var n='\u2013';return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListItem",{metadata:{properties:{itemId:"string",title:"string",titleDescription:"string",titleNavigation:"object",geoJson:"object",type:"string",imageUrl:"string",imageFormat:"string",imageNavigation:"object",attributes:{type:"object",multiple:true},navigationObjects:{type:"object",multiple:true},selected:"boolean",expanded:"boolean",parentListItem:"object",additionalParameters:"object",positionInList:"int",resultSetId:"string",layoutCache:"object",totalCountHiddenElement:"object"},aggregations:{_titleLink:{type:"sap.ushell.renderers.fiori2.search.controls.SearchLink",multiple:false,visibility:"hidden"},_titleLinkDescription:{type:"sap.ushell.renderers.fiori2.search.controls.SearchText",multiple:false,visibility:"hidden"},_typeText:{type:"sap.ushell.renderers.fiori2.search.controls.SearchText",multiple:false,visibility:"hidden"},_multiLineDescriptionText:{type:"sap.ushell.renderers.fiori2.search.controls.SearchText",multiple:false,visibility:"hidden"},_selectionCheckBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"},_expandButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_attributeLabels:{type:"sap.m.Label",multiple:true,visibility:"hidden"},_attributeValues:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},_attributeValuesWithoutWhyfoundHiddenTexts:{type:"sap.ui.core.InvisibleText",multiple:true,visibility:"hidden"},_relatedObjectActionsToolbar:{type:"sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar",multiple:false,visibility:"hidden"},_titleLabeledByText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}},init:function(){var t=this;if(sap.ui.core.Control.prototype.init){sap.ui.core.Control.prototype.init.apply(this,arguments);}t.setAggregation("_titleLink",new a({}).addStyleClass("sapUshellSearchResultListItem-Title").addStyleClass("sapUshellSearchResultListItem-MightOverflow").attachPress(function(E){var p=t._getPhoneSize();var w=$(window).width();if(w<=p){E.preventDefault();E.cancelBubble();t._performTitleNavigation();}else{t._performTitleNavigation({trackingOnly:true});}}));t.setAggregation("_titleLinkDescription",new S({}).addStyleClass("sapUshellSearchResultListItem-Category").addStyleClass("sapUshellSearchResultListItem-TitleDescription").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));t.setAggregation("_typeText",new S().addStyleClass("sapUshellSearchResultListItem-Category").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));t.setAggregation("_multiLineDescriptionText",new S({maxLines:5}).addStyleClass("sapUshellSearchResultListItem-MultiLineDescription").addStyleClass("sapUshellSearchResultListItem-MightOverflow").data("islongtext","true",true));t.setAggregation("_selectionCheckBox",new sap.m.CheckBox({select:function(E){t.setProperty("selected",E.getParameters().selected,true);}}));t.setAggregation("_expandButton",new sap.m.Button({type:sap.m.ButtonType.Transparent,press:function(E){t.toggleDetails();}}));t.setAggregation("_relatedObjectActionsToolbar",new c().addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar"));t.setAggregation("_titleLabeledByText",new sap.ui.core.InvisibleText());},renderer:function(r,C){C._renderer(r);},_renderer:function(r){this._registerItemPressHandler();this._resetPrecalculatedValues();this._renderContainer(r);this._renderAccessibilityInformation(r);},_renderContainer:function(r){var t=this;r.write('<div');r.writeControlData(t);r.addClass("sapUshellSearchResultListItem-Container");if(t.getImageUrl()){r.addClass("sapUshellSearchResultListItem-WithImage");}if(t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail"){r.addClass("sapUshellSearchResultListItem-Document");}r.writeClasses();r.write('>');t._renderContentContainer(r);t._renderExpandButtonContainer(r);r.write('</div>');},_renderContentContainer:function(r){r.write('<div class="sapUshellSearchResultListItem-Content">');this._renderTitleContainer(r);this._renderAttributesContainer(r);r.write('</div>');},_renderExpandButtonContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-ExpandButtonContainer">');r.write('<div class="sapUshellSearchResultListItem-ExpandButton">');var i,d;var f=t.getProperty("expanded");if(f){i=sap.ui.core.IconPool.getIconURI("slim-arrow-up");d=sap.ushell.resources.i18n.getText("hideDetailBtn_tooltip");}else{i=sap.ui.core.IconPool.getIconURI("slim-arrow-down");d=sap.ushell.resources.i18n.getText("showDetailBtn_tooltip");}var g=t.getAggregation("_expandButton");g.setIcon(i);g.setTooltip(d);g.onAfterRendering=function(){sap.m.Button.prototype.onAfterRendering.apply(this,arguments);t.setAriaExpandedState();};r.renderControl(g);r.write('</div>');r.write('</div>');},_renderTitleContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-TitleAndImageContainer">');r.write('<div class="sapUshellSearchResultListItem-TitleContainer">');t._renderCheckbox(r);var d="";var f;var g=t.getTitleNavigation();if(g){d=g.getHref();f=g.getTarget();}var h=t.getAggregation("_titleLink");h.setHref(d);h.setText(t.getTitle());if(f){h.setTarget(f);}if(d.length===0){h.setEnabled(false);}h.onAfterRendering=function(){if(a.prototype.onAfterRendering){a.prototype.onAfterRendering.apply(this,arguments);}t.forwardEllipsis($(this.getDomRef()));};r.renderControl(h);var i=t.getTitleDescription();if(i&&i.length>0){var j=t.getAggregation("_titleLinkDescription");j.setText(i);r.renderControl(j);}var k=t.getAggregation("_typeText");k.setText(t.getType());r.renderControl(k);r.write('</div>');t._renderImageForPhone(r);r.write('</div>');},_renderCheckbox:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-CheckboxExpandContainer">');r.write('<div class="sapUshellSearchResultListItem-CheckboxContainer">');r.write('<div class="sapUshellSearchResultListItem-CheckboxAlignmentContainer">');var d=t.getAggregation("_selectionCheckBox");var s=t.getProperty("selected");d.setSelected(s);r.renderControl(d);r.write('</div>');r.write('</div>');r.write('</div>');},_renderImageForPhone:function(r){var t=this;if(t.getImageUrl()){r.write('<div class="sapUshellSearchResultListItem-TitleImage');if(this.getImageFormat()=="round"){r.write(" sapUshellSearchResultListItem-ImageContainerRound");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');r.write('<img class="sapUshellSearchResultListItem-Image" src="');r.write(t.getImageUrl());r.write('">');r.write('</div>');}},_renderImageForDocument:function(r){var t=this;if(t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail"){var i=this.getImageNavigation();var d=i?i.getHref():"";var f,g;if(d&&d.length>0){f='<a href="'+d+'"';g='</a>';}else{f='<div';g='</div>';}r.write('<div class="sapUshellSearchResultListItem-DocumentThumbnailContainer">');r.write(f+' class="sapUshellSearchResultListItem-DocumentThumbnailBorder">');r.write('<div class="sapUshellSearchResultListItem-DocumentThumbnail-DogEar"></div>');var z=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("search"),useIconTooltip:false});z.addStyleClass("sapUshellSearchResultListItem-DocumentThumbnailZoomIcon");r.renderControl(z);var h=t.getImageUrl();if(h&&h.length>0){r.write('<img class="sapUshellSearchResultListItem-DocumentThumbnail" src="');r.write(t.getImageUrl());r.write('">');}r.write(g);r.write('</div>');}},_cutDescrAttributeOutOfAttributeList:function(){var d=this.getAttributes();for(var i=0;i<d.length;i++){var f=d[i];if(f.longtext){d.splice(i,1);this.setAttributes(d);return f;}}return undefined;},_renderMultiLineDescription:function(r){var t=this;if(t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail"){var d=this._cutDescrAttributeOutOfAttributeList();if(d&&d.value&&d.value.length>0){var f=function(v){return function(){v.prototype.onAfterRendering.apply(this,arguments);var i=$(this.getDomRef());i.attr("aria-describedby",i.attr("data-tooltippedby"));};};var g=t.getAggregation("_multiLineDescriptionText");g.setText(d.value);if(d.whyfound){g.data("ishighlighted","true",true);}else{g.data("ishighlighted","false",true);}if(d.valueWithoutWhyfound){var h=new sap.ui.core.InvisibleText({});h.setText(d.valueWithoutWhyfound);g.data("tooltippedBy",h.getId(),true);g.onAfterRendering=f(S);t.addAggregation("_attributeValuesWithoutWhyfoundHiddenTexts",h,true);r.renderControl(h);}r.renderControl(g);}}},_renderAttributesContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-AttributesExpandContainer');var d=t.getProperty("expanded");if(d){r.write(" sapUshellSearchResultListItem-AttributesExpanded");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-AttributesAndActions">');t._renderImageForDocument(r);t._renderMultiLineDescription(r);r.write('<ul class="sapUshellSearchResultListItem-Attributes">');var i=t.getAttributes();t._renderImageAttribute(r,(i.length==0));t._renderAllAttributes(r,i);r.write('<li class="sapUshellSearchResultListItem-ExpandSpacerAttribute" aria-hidden="true"></li>');r.write('</ul>');t._renderRelatedObjectsToolbar(r);r.write('</div>');r.write('</div>');},_renderAllAttributes:function(r,d){var t=this;if(d.length==0){r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-MainAttribute sapUshellSearchResultListItem-EmptyAttributePlaceholder" aria-hidden="true"></li>');return;}var f;var l;var v;var g;var h,j,m,o;var p;var q=this.getLayoutCache()||{};this.setLayoutCache(q,true);if(!q.attributes){q.attributes={};}var i=0,k,s=0;var u=4;var w=3;var x=[0,0,0];var y=[0,0,0,0];var z=2;var A=2;var B=t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail";var C=t.getImageUrl()&&!B;if(B){u=w=2;x=y=[0,0];z=A=4;}var D=u*x.length;var E=w*y.length;if(C){D--;E--;x[0]++;y[0]++;}t.destroyAggregation("_attributeLabels");t.destroyAggregation("_attributeValues");t.destroyAggregation("_attributeValuesWithoutWhyfoundHiddenTexts");var F=function(m){return function(){m.prototype.onAfterRendering.apply(this,arguments);var M=$(this.getDomRef());M.attr("aria-describedby",M.attr("data-tooltippedby"));};};for(;!(z<=0&&A<=0)&&i<d.length;i++){f=d[i];if(B&&s>=4){break;}if(f.isTitle){continue;}if(D<=0&&E<=0&&!f.whyfound){continue;}l=f.name;v=f.value;if(l===undefined||v===undefined){continue;}if(!v||v.trim().length==0){v=n;}o=f.longtext!=undefined&&f.longtext.length>0;g=f.valueWithoutWhyfound;var _=-1,G=-1,H={desktop:1,tablet:1};var I=q.attributes[f.key]||{};q.attributes[f.key]=I;r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-MainAttribute');if(o){var J=I.longTextColumnNumber||t._howManyColumnsToUseForLongTextAttribute(v);I.longTextColumnNumber=J;H=J;r.write(' sapUshellSearchResultListItem-LongtextAttribute');}if(D<=0){if(f.whyfound&&z>0){r.write(' sapUshellSearchResultListItem-WhyFoundAttribute-Desktop');z--;}else{r.write(' sapUshellSearchResultListItem-DisplayNoneAttribute-Desktop');}}if(E<=0){if(f.whyfound&&A>0){r.write(' sapUshellSearchResultListItem-WhyFoundAttribute-Tablet');A--;}else{r.write(' sapUshellSearchResultListItem-DisplayNoneAttribute-Tablet');}}if(o&&C&&x[0]==1){G=0;x[0]=u;D-=u+1;}else{for(k=0;k<x.length;k++){if(x[k]+H.desktop<=u){x[k]+=H.desktop;D-=H.desktop;G=k;break;}}}if(G<0){G=x.length;}if(o&&C&&y[0]==1){_=0;y[0]=w;E-=w+1;}else{for(k=0;k<y.length;k++){if(y[k]+H.tablet<=w){y[k]+=H.tablet;E-=H.tablet;_=k;break;}}}if(_<0){_=y.length;}r.write(' sapUshellSearchResultListItem-OrderTablet-'+_);r.write(' sapUshellSearchResultListItem-OrderDesktop-'+G);r.write('"');if(o){r.write(' data-sap-searchresultitem-attributeweight-desktop="'+H.desktop+'"');r.write(' data-sap-searchresultitem-attributeweight-tablet="'+H.tablet+'"');}r.write('>');h=new sap.m.Label({displayOnly:true});h.setText(l);h.addStyleClass("sapUshellSearchResultListItem-AttributeKey");h.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(h);r.write('<span class="sapUshellSearchResultListItem-AttributeValueContainer">');if(f.defaultNavigationTarget){j=new a();m=a;j.setHref(f.defaultNavigationTarget.getHref());j.setTarget(f.defaultNavigationTarget.getTarget());j.addStyleClass("sapUshellSearchResultListItem-AttributeLink");}else{j=new S();m=S;}j.setText(v);j.addStyleClass("sapUshellSearchResultListItem-AttributeValue");j.addStyleClass("sapUshellSearchResultListItem-MightOverflow");if(f.whyfound){j.data("ishighlighted","true",true);j.addStyleClass("sapUshellSearchResultListItem-AttributeValueHighlighted");}if(o){j.data("islongtext","true",true);}if(g){p=new sap.ui.core.InvisibleText({});p.setText(g);j.data("tooltippedBy",p.getId(),true);j.onAfterRendering=F(m);t.addAggregation("_attributeValuesWithoutWhyfoundHiddenTexts",p,true);r.renderControl(p);}r.renderControl(j);r.write('</span>');r.write('</li>');t.addAggregation("_attributeLabels",h,true);t.addAggregation("_attributeValues",j,true);s++;}if(C){var K=u-x[0];var L=w-y[0];if(K>0||L>0){r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-MainAttribute');r.write(' sapUshellSearchResultListItem-OrderTablet-0 sapUshellSearchResultListItem-OrderDesktop-0');r.write('"');r.write(' data-sap-searchresultitem-attributeweight-desktop="'+K+'"');r.write(' data-sap-searchresultitem-attributeweight-tablet="'+L+'"');r.write('></li>');}}},_howManyColumnsToUseForLongTextAttribute:function(d){if(d.length<40){return{tablet:1,desktop:1};}if(d.length<85){return{tablet:2,desktop:2};}if(d.length<135){return{tablet:3,desktop:3};}return{tablet:3,desktop:4};},_renderImageAttribute:function(r,i){var t=this;if(!t.getImageUrl()||t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail"){return;}r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-ImageAttribute');if(i){r.write(' sapUshellSearchResultListItem-LonelyImageAttribute');}r.write('">');r.write('<div class="sapUshellSearchResultListItem-ImageContainer');if(this.getImageFormat()=="round"){r.write(" sapUshellSearchResultListItem-ImageContainerRound");}r.write('">');if(t.getImageUrl()){r.write('<img class="sapUshellSearchResultListItem-Image');if(this.getImageFormat()=="round"){}r.write('" src="');r.write(t.getImageUrl());r.write('">');}if(this.getImageFormat()!="round"){r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');}r.write('</div>');r.write('</li>');},_renderRelatedObjectsToolbar:function(r){var t=this;var d=t.getNavigationObjects();if(!d||d.length===0){return;}t._showExpandButton=true;var f=t.getAggregation("_relatedObjectActionsToolbar");f.setProperty("navigationObjects",d);f.setProperty("positionInList",this.getPositionInList());r.renderControl(f);},_renderAccessibilityInformation:function(r){var t=this;var p=t.getProperty("parentListItem");if(p){t._renderAriaDescriptionElementForTitle(r,true,true);p.onAfterRendering=function(){sap.m.CustomListItem.prototype.onAfterRendering.apply(this,arguments);var d=$(this.getDomRef());t._addAriaDescriptionToParentListElement(p,true);d.on("focus",function(f){var g=$(f.relatedTarget);if(g.hasClass("sapUshellSearchResultListItem")||g.closest(".sapUshellSearchResultListItemApps").length>0&&!g.hasClass("sapUshellResultListMoreFooter")){t._renderAriaDescriptionElementForTitle(r,false,false);t._addAriaDescriptionToParentListElement(p,false);}else{t._renderAriaDescriptionElementForTitle(r,true,false);t._addAriaDescriptionToParentListElement(p,true);}});};p.addEventDelegate({onsapspace:function(E){if(E.target===E.currentTarget){t.toggleDetails();}},onsapenter:function(E){if(E.target===E.currentTarget){var d=t.getTitleNavigation();if(d){d.performNavigation();}}}});}},_renderAriaDescriptionElementForTitle:function(r,w,d){var t=this;t._searchResultListPrefix=t._searchResultListPrefix||sap.ushell.resources.i18n.getText("result_list_announcement_screenreaders");var l=t.getTitle()+", "+t.getType()+".";if(w){l=t._searchResultListPrefix+" "+l;}var f=t.getAggregation("_titleLabeledByText");f.setText(l);if(d){r.renderControl(f);}},_addAriaDescriptionToParentListElement:function(p,i){var t=this.getAggregation("_titleLabeledByText");var d=t.getId();if(i){var f=this.getTotalCountHiddenElement();if(f){d+=" "+f.getId();}}var g=$(p.getDomRef());g.attr("aria-labelledby",d);},_getExpandAreaObjectInfo:function(){var t=this;var r=$(t.getDomRef());var d=r.find(".sapUshellSearchResultListItem-AttributesExpandContainer");var f=r.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var g=false;if(f.css("display")==="none"){f.css("display","block");g=true;}var h=d.height();var i=r.find(".sapUshellSearchResultListItem-AttributesAndActions").height();if(g){f.css("display","");}var j=[];var p=0,k=false;r.find(".sapUshellSearchResultListItem-GenericAttribute").each(function(){if(!k){var q=this.getBoundingClientRect();var x=q.x;if(x==undefined){x=q.left;}if(x>p){p=x;return;}else{k=true;}}j.push(this);});var l=200;var m=l/10;var o={resultListItem:r,attributesExpandContainer:d,currentHeight:h,expandedHeight:i,elementsToFadeInOrOut:j,expandAnimationDuration:l,fadeInOrOutAnimationDuration:m,relatedObjectsToolbar:f};return o;},isShowingDetails:function(){var d=this._getExpandAreaObjectInfo();if(d.currentHeight<d.expandedHeight){return false;}return true;},showDetails:function(d){var t=this;if(t.isShowingDetails()){return;}var f=this._getExpandAreaObjectInfo();f.relatedObjectsToolbar.css("opacity",0);f.relatedObjectsToolbar.css("display","block");var r=t.getAggregation("_relatedObjectActionsToolbar");if(r){r._layoutToolbarElements();}t.forwardEllipsis($(t.getDomRef()).find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));var g,s=false;var h=f.attributesExpandContainer.animate({"height":f.expandedHeight},{"duration":f.expandAnimationDuration,"progress":function(i,p,j){if(!s&&p>0.5){g=f.relatedObjectsToolbar.animate({"opacity":1},j).promise();s=true;jQuery.when(h,g).done(function(){t.setProperty("expanded",true,true);$(this).addClass("sapUshellSearchResultListItem-AttributesExpanded");$(this).css("height","");$(f.elementsToFadeInOrOut).css("opacity","");var k=sap.ui.core.IconPool.getIconURI("slim-arrow-up");var l=t.getAggregation("_expandButton");l.setTooltip(sap.ushell.resources.i18n.getText("hideDetailBtn_tooltip"));l.setIcon(k);l.rerender();f.relatedObjectsToolbar.css("display","");f.relatedObjectsToolbar.css("opacity","");}.bind(this));}}}).promise();$(f.elementsToFadeInOrOut).animate({"opacity":1},f.fadeInOrOutAnimationDuration);},hideDetails:function(d){var t=this;var r=$(t.getDomRef());if(!t.isShowingDetails()){return;}var f=this._getExpandAreaObjectInfo();f.relatedObjectsToolbar.css("opacity",1);f.relatedObjectsToolbar.animate({"opacity":0},f.expandAnimationDuration/2);var g=r.find(".sapUshellSearchResultListItem-MainAttribute").outerHeight(true)+r.find(".sapUshellSearchResultListItem-ExpandSpacerAttribute").outerHeight(true);var s=false;var h=f.attributesExpandContainer.animate({"height":g},{"duration":f.expandAnimationDuration,"progress":function(i,p,j){if(!s&&j<=f.fadeInOrOutAnimationDuration){s=true;var k=$(f.elementsToFadeInOrOut).animate({"opacity":0},f.fadeInOrOutAnimationDuration).promise();jQuery.when(h,k).done(function(){t.setProperty("expanded",false,true);f.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(f.elementsToFadeInOrOut).css("opacity","");f.relatedObjectsToolbar.css("opacity","");var l=sap.ui.core.IconPool.getIconURI("slim-arrow-down");var m=t.getAggregation("_expandButton");m.setTooltip(sap.ushell.resources.i18n.getText("showDetailBtn_tooltip"));m.setIcon(l);m.rerender();});}}}).promise();},toggleDetails:function(d){var f;var m=sap.ushell.renderers.fiori2.search.getModelSingleton();if(this.isShowingDetails()){f=m.eventLogger.ITEM_HIDE_DETAILS;this.hideDetails(d);}else{f=m.eventLogger.ITEM_SHOW_DETAILS;this.showDetails(d);}m.eventLogger.logEvent({type:f,itemPosition:this.getPositionInList(),executionId:this.getResultSetId()});},isSelectionModeEnabled:function(){var t=this;var i=false;var s=$(t.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");if(s){i=s.css("opacity")>0;}return i;},enableSelectionMode:function(d){var t=this;var s=$(t.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-innerContainer");var f=s.find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");var g=200;var h=false;s.animate({width:"2rem"},{"duration":g,"progress":function(i,p,r){if(!h&&p>0.5){f.css("display","");f.animate({opacity:"1.0"},g/2);h=true;}}});},disableSelectionMode:function(d){var t=this;var s=$(t.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-innerContainer");var f=s.find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");var g=200;f.animate({opacity:"0.0"},g/2,function(){f.css("display","none");});s.animate({width:"0"},g);},toggleSelectionMode:function(d){if(this.isSelectionModeEnabled()){this.disableSelectionMode(d);}else{this.enableSelectionMode(d);}},onAfterRendering:function(){var t=this;var d=$(t.getDomRef());t._showOrHideExpandButton();t._setListItemStatusBasedOnWindowSize();t.forwardEllipsis(d.find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));b.attachEventHandlersForTooltip(t.getDomRef());},resizeEventHappened:function(){var t=this;var d=$(t.getDomRef());t._showOrHideExpandButton();t._setListItemStatusBasedOnWindowSize();t.getAggregation("_titleLink").rerender();t.forwardEllipsis(d.find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));},_getPhoneSize:function(){return 767;},_resetPrecalculatedValues:function(){this._visibleAttributes=undefined;this._detailsArea=undefined;this._showExpandButton=false;},_setListItemStatusBasedOnWindowSize:function(){var w=window.innerWidth;var p=this.getParentListItem();if(this.getTitleNavigation()&&w<=this._getPhoneSize()){p.setType(sap.m.ListType.Active);}else{p.setType(sap.m.ListType.Inactive);}},_showOrHideExpandButton:function(){var t=this;var d=$(t.getDomRef());var f=d.find(".sapUshellSearchResultListItem-ExpandButtonContainer");var i=f.css("visibility")!="hidden";var s=false;var g=d.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");s=g.length>0;var h=t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail";if(!h&&!s){var p=0;d.find(".sapUshellSearchResultListItem-MainAttribute,.sapUshellSearchResultListItem-WhyFoundAttribute").each(function(){var j=this.getBoundingClientRect();var x=j.x;if(x==undefined){x=j.left;}if(x>p){p=x;}else{s=true;return false;}});}if(i&&!s){f.css("visibility","hidden");f.attr("aria-hidden","true");t.setAriaExpandedState();}else if(!i&&s){f.css("visibility","");f.removeAttr("aria-hidden");t.setAriaExpandedState();}},setAriaExpandedState:function(){var t=this;var d=t.getAggregation("_expandButton");var f=$(d.getDomRef());var g=$(t.getDomRef());var h=t.getParentListItem()?$(t.getParentListItem().getDomRef()):g.closest("li");var i=g.find(".sapUshellSearchResultListItem-ExpandButtonContainer");if(i.css("visibility")=="hidden"){f.removeAttr("aria-expanded");h.removeAttr("aria-expanded");}else{var j=t.getProperty("expanded");if(j){f.attr("aria-expanded","true");h.attr("aria-expanded","true");}else{f.attr("aria-expanded","false");h.attr("aria-expanded","false");}}},_registerItemPressHandler:function(){var t=this;var p=t.getParentListItem();if(p){p.attachPress(function(d){t._performTitleNavigation();});t._registerItemPressHandler=function(){};}},_performTitleNavigation:function(p){var t=p&&p.trackingOnly||false;var d=this.getTitleNavigation();if(d){d.performNavigation({trackingOnly:t});}},forwardEllipsis:function(o){o.each(function(i,d){b.forwardEllipsis4Whyfound(d);});}});});
