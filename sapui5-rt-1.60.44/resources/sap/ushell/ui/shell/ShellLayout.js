/*!
 * Copyright (c) 2009-2017 SAP SE, All Rights Reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/Device','sap/ui/core/Control','sap/ushell/library','./ToolArea','./ShellLayoutRenderer'],function(q,D,C,S){"use strict";var a=C.extend("sap.ushell.ui.shell.ShellLayout",{metadata:{properties:{headerHiding:{type:"boolean",group:"Appearance",defaultValue:false},headerVisible:{type:"boolean",group:"Appearance",defaultValue:true},toolAreaVisible:{type:"boolean",group:"Appearance",defaultValue:false},floatingContainerVisible:{type:"boolean",group:"Appearance",defaultValue:false},backgroundColorForce:{type:"boolean",group:"Appearance",defaultValue:true},showBrandLine:{type:"boolean",group:"Appearance",defaultValue:true},showAnimation:{type:"boolean",group:"Appearance",defaultValue:true},enableCanvasShapes:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{toolArea:{type:"sap.ushell.ui.shell.ToolArea",multiple:false},rightFloatingContainer:{type:"sap.ushell.ui.shell.RightFloatingContainer",multiple:false},canvasSplitContainer:{type:"sap.ushell.ui.shell.SplitContainer",multiple:false},floatingActionsContainer:{type:"sap.ushell.ui.shell.ShellFloatingActions",multiple:false},footer:{type:"sap.ui.core.Control",multiple:false}},associations:{header:{type:"sap.ushell.ui.shell.ShellHeader",multiple:false},floatingContainer:{type:"sap.ushell.ui.shell.FloatingContainer",multiple:false}}}});a._SIDEPANE_WIDTH_PHONE=13;a._SIDEPANE_WIDTH_TABLET=13;a._SIDEPANE_WIDTH_DESKTOP=15;a.prototype.getHeader=function(){return sap.ui.getCore().byId(this.getAssociation("header"));};a.prototype.init=function(){this._rtl=sap.ui.getCore().getConfiguration().getRTL();this._showHeader=true;this._useStrongBG=false;D.media.attachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);};a.prototype.exit=function(){D.media.detachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);};a.prototype.onAfterRendering=function(){this.getCanvasSplitContainer()._applySecondaryContentSize();this._setSidePaneWidth();};a.prototype.renderFloatingContainerWrapper=function(){var f=document.getElementById("sapUshellFloatingContainerWrapper"),b=document.getElementsByTagName('body'),s=q.sap.storage?q.sap.storage(q.sap.storage.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"):undefined;if(!f){f=document.createElement("DIV");f.setAttribute("id",'sapUshellFloatingContainerWrapper');f.setAttribute("class",'sapUshellShellFloatingContainerWrapper sapUshellShellHidden');b[0].appendChild(f);}if(s&&s.get("floatingContainerStyle")){f.setAttribute("style",s.get("floatingContainerStyle"));}};a.prototype.renderFloatingContainer=function(f){this.renderFloatingContainerWrapper();if(f&&!f.getDomRef()){q('#sapUshellFloatingContainerWrapper').toggleClass("sapUshellShellHidden",true);f.placeAt("sapUshellFloatingContainerWrapper");}};a.prototype.onThemeChanged=function(){return!!this.getDomRef();};a.prototype.setToolAreaVisible=function(v){if(!this.getToolArea()){q.sap.log.debug("Tool area not created but visibility updated",null,"sap.ushell.ShellLayout");return this;}this.setProperty("toolAreaVisible",!!v,true);this.getToolArea().$().toggleClass("sapUshellShellHidden",!v);this.getCanvasSplitContainer()._applySecondaryContentSize();return this;};a.prototype.setFloatingContainer=function(c){this.setAssociation('floatingContainer',c,true);this.renderFloatingContainer(c);};a.prototype.setFloatingContainerVisible=function(v){this.setProperty("floatingContainerVisible",!!v,true);if(this.getDomRef()){var s=q.sap.storage?q.sap.storage(q.sap.storage.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"):undefined,f=document.getElementById("sapUshellFloatingContainerWrapper");if(v&&s&&!s.get("floatingContainerStyle")){var e=q(".sapUshellShellHeadItm").position()?q(".sapUshellShellHeadItm").position().left:0;var l=(q(window).width()-q("#shell-floatingContainer").width()-e)*100/q(window).width();var t=q(".sapUshellShellHeadContainer").height()*100/q(window).height();f.setAttribute("style","left:"+l+"%;"+"top:"+t+"%;position:absolute;");s.put("floatingContainerStyle",f.getAttribute("style"));}q('.sapUshellShellFloatingContainerWrapper').toggleClass("sapUshellShellHidden",!v);}return this;};a.prototype.setFloatingActionsContainer=function(c){this.setAggregation('floatingActionsContainer',c,true);};a.prototype.setHeaderVisible=function(h){this.setProperty("headerVisible",!!h,true);this.$().toggleClass("sapUshellShellNoHead",!h);return this;};a.prototype._setStrongBackground=function(u){this._useStrongBG=!!u;this.$("strgbg").toggleClass("sapUiStrongBackgroundColor",this._useStrongBG);};a.prototype._setSidePaneWidth=function(r){var s=this.getCanvasSplitContainer();if(s){if(!r){r=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;}var w=a["_SIDEPANE_WIDTH_"+r.toUpperCase()]+"rem";s.setSecondaryContentSize(w);}};a.prototype._handleMediaChange=function(p){if(!this.getDomRef()){return false;}this._setSidePaneWidth(p.name);this.getCanvasSplitContainer()._applySecondaryContentSize();};return a;},true);
