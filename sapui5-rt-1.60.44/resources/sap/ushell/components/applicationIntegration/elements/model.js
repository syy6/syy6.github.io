// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/ui/footerbar/EndUserFeedback","sap/ushell/ui/shell/ShellHeadItem"],function(E,C,u,a,b,S){"use strict";var B;var c;function d(){return{"home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn"]},"app":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"minimal":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"standalone":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded-home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"lean":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]}};}function e(){return{"blank":{"stateName":"blank","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"blank-home":{"stateName":"blank-home","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"home":{"stateName":"home","showCurtain":false,"headerVisible":true,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"headItems":['meAreaHeaderButton'],"showRecentActivity":true,"headEndItems":[],"search":"","paneContent":[],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false},"app":{"stateName":"app","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"search":"","headItems":['meAreaHeaderButton','backBtn','homeBtn'],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false},"minimal":{"stateName":"minimal","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['meAreaHeaderButton','homeBtn'],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"standalone":{"stateName":"standalone","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['meAreaHeaderButton','backBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"embedded":{"stateName":"embedded","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['meAreaHeaderButton','backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"embedded-home":{"stateName":"embedded-home","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['meAreaHeaderButton'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"headerless":{"stateName":"headerless","showCurtain":false,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"search":""},"merged":{"stateName":"merged","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"search":""},"headerless-home":{"stateName":"headerless-home","showCurtain":false,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"search":""},"merged-home":{"stateName":"merged-home","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"search":""},"lean":{"stateName":"lean","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":false,"paneContent":[],"search":"","headItems":['meAreaHeaderButton'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false},"lean-home":{"stateName":"lean-home","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":false,"paneContent":[],"search":"","headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false}};}function r(O,K){return Object.keys(O).reduce(function(o,s){if(!K[s]){o[s]=O[s];}return o;},{});}function v(i,j,s){return j!=undefined;}function n(i,j,s){return true;}function g(o,m){var p=m.split("/");var M=o;p.shift();p.forEach(function(P){if(!M){return;}M=M[P];});return M;}function f(m,V,o){var p=m.split("/");var M=o;p.shift();var P=p.pop();p.forEach(function(s){M=M[s];});M[P]=V;}function h(){var o;var s;var l;var A;var m;var I;var p;var q;var t;var T;var w;this.createDefaultTriggers=function(i){var R=function(D,F,G){if(G.sProperty=="actions"){var H=g(G.oModel,G.path);if(H&&H.length===0&&G.aIds&&G.aIds.length>0){this._renderShellState();}}}.bind(this);var j=function(H){function D(O,N){var U=sap.ushell.Container.getService("URLParsing"),G=U.getHash(O),J=U.getHash(N),K=U.parseShellHash(G).appSpecificRoute,L=U.parseShellHash(J).appSpecificRoute;return K!==L;}var F=D(H.oldURL,H.newURL);if(F){this.addHeaderItem(["backBtn"],true);}}.bind(this);this.createTriggersOnBaseStates([{sName:'onAddFirstAction',fnRegister:function(){sap.ui.getCore().getEventBus().subscribe("launchpad","updateShell",R,this);},fnUnRegister:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","updateShell",R,this);}}],["blank","blank-home"],i);var y=this;var z;this.createTriggersOnBaseStates([{sName:'onAddFirstAction',fnRegister:function(){window.addEventListener("hashchange",j);var N=0;z=E.on("AppRendered").do(function(){N++;if(N>=2){y.addHeaderItem(["backBtn"],true);}});},fnUnRegister:function(){window.removeEventListener("hashchange",j);if(z){z.off();}}}],["lean","lean-home"],i);};this.init=function(i,j){B=e();c=d();s=C.last("/core/shell/model");o={};m={};I=false;p=false;t=false;T=[];w=true;A=j;q=undefined;if(i){jQuery.sap.measure.start("FLP:ElementsModel.init","moveShellHeaderEndItems","FLP");if(i.moveEditHomePageActionToShellHeader){this._moveActionsToShellHeader("ActionModeBtn");}if(i.moveContactSupportActionToShellHeader){this._moveCustomeDataActionBtnToShellHeader("ContactSupportBtn");}if(i.moveGiveFeedbackActionToShellHeader){this._moveCustomeDataActionBtnToShellHeader("EndUserFeedbackBtn");}if(i.moveAppFinderActionToShellHeader){this._moveActionsToShellHeader("openCatalogBtn");}if(i.moveUserSettingsActionToShellHeader){this._moveActionsToShellHeader("userSettingsBtn");}jQuery.sap.measure.end("FLP:ElementsModel.init");}var y=i&&i.appState?i.appState:"home";this.createDefaultTriggers(y);this.switchState(y);};this.destroy=function(){s=undefined;o=undefined;A=undefined;m=undefined;I=undefined;p=undefined;w=undefined;t=undefined;q=undefined;B=undefined;c=undefined;};this.getModel=function(){var R=sap.ushell.Container.getRenderer("fiori2");if(!R){return undefined;}return R._oShellView.getModel();};this._moveCustomeDataActionBtnToShellHeader=function(i){for(var j in c){var y=c[j];var z=y.actions;var D=z.indexOf(i);if(D!=-1){c[j].actions.splice(D,1);D=B[j].headEndItems.indexOf(i);if(D===-1){B[j].headEndItems.push(i);}}}var F=sap.ui.getCore().byId(i);if(!F){var G;if(i==="ContactSupportBtn"){G=new a("tempContactSupportBtn",{visible:true});}else if(i==="EndUserFeedbackBtn"){G=new b("EndUserFeedbackHandlerBtn",{});}var H=G.getIcon();var J=G.getText();var K=function(){G.firePress();};var L=new S(i,{icon:H,tooltip:J,text:J,showSeparator:false});if(i==="ContactSupportBtn"){L.attachPress(K);}if(i==="EndUserFeedbackBtn"){L.setVisible(false);}L.data("isShellHeader",true);}};this._attachPressToUserSettings=function(){jQuery.sap.measure.start("FLP:ElementsModel._attachPressToUserSettings","_attachPressToUserSettings","FLP");var i=sap.ui.getCore().byId("userSettingsBtn");i.attachPress(function(){var j=sap.ui.getCore().byId('meArea');if(!j.oSettingsDialog.getModel()){j.oSettingsDialog.setModel(j.getModel());}var O=function(){j.oSettingsDialog.open();sap.ui.getCore().byId("viewPortContainer").detachAfterSwitchStateAnimationFinished(O);};var y=sap.ui.getCore().byId('viewPortContainer');if(y.getCurrentState()!="Center"){sap.ui.getCore().byId("viewPortContainer").attachAfterSwitchStateAnimationFinished(O);sap.ui.getCore().byId("viewPortContainer").switchState("Center");}else{O();}});jQuery.sap.measure.end("FLP:ElementsModel._attachPressToUserSettings");};this._moveActionsToShellHeader=function(i){var j;for(j in B){var y=B[j];if(j==="blank"||j==="blank-home"){continue;}if(i==="ActionModeBtn"&&j==="app"){continue;}if((i==="openCatalogBtn"||i==="userSettingsBtn")&&(j==="lean"||j==="lean-home")){continue;}var z=y.actions;var D=z.indexOf(i);if(D!=-1){B[j].actions.splice(D,1);}D=B[j].headEndItems.indexOf(i);if(D===-1){B[j].headEndItems.push(i);}}if(i==="userSettingsBtn"){var F="userSettingsBtn";var G=sap.ushell.resources.i18n.getText("userSettings");var H='sap-icon://action-settings';var U=sap.ui.getCore().byId(F);E.on("CoreResourcesComplementLoaded").do(this._attachPressToUserSettings.bind(this));if(!U){var J=new S(F,{icon:H,tooltip:G,text:G,showSeparator:false});J.data("isShellHeader",true);}}};this.destroyManageQueue=function(){this._destroyManageQueue(["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"]);};this.switchState=function(i){var j=u.clone(B[i]);var y=r(j,{aTriggers:true,oCheckPoints:true});C.emit("/core/shell/model/currentState",y);l=A.customShellState;q=undefined;this._renderShellState();return j;};this.setLeftPaneVisibility=function(V,i,j){this.updateStateProperty("showPane",V,i,j);};this.setHeaderHiding=function(){jQuery.sap.log.warning("Application Life Cycle model: headerHiding property is deprecated and has no effect");};this.setHeaderVisibility=function(V,i,j){this.updateStateProperty("headerVisible",V,i,j);};this.showLogo=function(i,j){this.updateStateProperty("showLogo",true,i,j,false);};this.addHeaderItem=function(i,j,y){this._addHeaderItemInCorrectOrder("headItems",i,j,y);};this._removeReservedItemId=function(R,i,j){var y=false,z=j.indexOf(R);if(z>-1){j.splice(z,1);y=true;}z=i.indexOf(R);if(z>-1){i.splice(z,1);y=true;}return y;};this._addHeaderItemInCorrectOrder=function(P,i,j,y){var z=this;function V(D,F,G){var H=3-D.length;F.forEach(function(J,K){var L=(J==='meAreaHeaderButton'||J==='backBtn'||J==='homeBtn');if(D[J]===-1&&!L){H--;}});if(H<0){jQuery.sap.log.warning("Maximum of three items has been reached, cannot add more items.");return false;}return true;}function U(D,F,G){jQuery.sap.measure.start("FLP:ElementsModel.fnUpdate","update shell head end items","FLP");var H=g(G,D),J=[],K=F.slice(0);if(z._removeReservedItemId("meAreaHeaderButton",H,K)===true){J.push("meAreaHeaderButton");}if(z._removeReservedItemId("backBtn",H,K)===true){J.push("backBtn");}if(z._removeReservedItemId("homeBtn",H,K)===true){J.push("homeBtn");}H.some(function(L){if(J.length<3){J.push(L);}else{return true;}});K.some(function(L){if(J.length<3){J.push(L);}else{return true;}});f(D,J,G);jQuery.sap.measure.end("FLP:ElementsModel.fnUpdate");}this._setShellItem(P,i,j,y,V,U);};this.removeHeaderItem=function(i,j,y){this._removeShellItem("headItems",i,j,y);};this.addHeaderEndItem=function(i,j,y,D){if(i.length){this._addUpToSixItem("headEndItems",i,j,y,D);}};this.removeHeaderEndItem=function(i,j,y){this._removeShellItem("headEndItems",i,j,y);};this.addSubHeader=function(i,j,y){if(i.length){this._addShellItem("subHeader",i,j,y);}};this.removeSubHeader=function(i,j,y){this._removeShellItem("subHeader",i,j,y);};this.addActionButton=function(i,j,y,z){if(z){this._addActionButtonAtStart("actions",i,j,y);}else{this._addActionButton("actions",i,j,y);}};this.removeActionButton=function(i,j,y){this._removeShellItem("actions",i,j,y);};this.addToolAreaItem=function(i,j,y){if(i.length){this._addToolAreaItem("toolAreaItems",i,j,y);}};this.removeToolAreaItem=function(i,j,y){this._removeShellItem("toolAreaItems",i,j,y);};this.addLeftPaneContent=function(i,j,y){if(i.length){this._addShellItem("paneContent",i,j,y);}};this.removeLeftPaneContent=function(i,j,y){this._removeShellItem("paneContent",i,j,y);};this.addRightFloatingContainerItem=function(i,j,y){if(i.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",i,j,y);}};this.removeRightFloatingContainerItem=function(i,j,y){this._removeShellItem("RightFloatingContainerItems",i,j,y);};this.showSettingsButton=function(i,j){this.addActionButton(["userSettingsBtn"],i,j,false);};this.showSignOutButton=function(i,j){this.addActionButton(["logoutBtn"],i,j,false);};this.showRightFloatingContainer=function(i){this._showRightFloatingContainer(i);};this.addFloatingActionButton=function(i,j,y){if(i.length){this._addShellItem("floatingActions",i,j,y);}};this.removeFloatingActionButton=function(i,j,y){this._removeShellItem("floatingActions",i,j,y);};this.updateStateProperty=function(P,V,i,j,D){this._setShellItem(P,V,i,j,v,f,D);};this._handleTriggers=function(N){var i,j,y=[],z={};w=false;while(T.length>0){i=T.pop();if(N[i.sName]){y.push(i);z[i.sName]=i;}else{i.fnUnRegister(this);}}for(var D in N){if(N.hasOwnProperty(D)){if(!z[D]){j=N[D];j.fnRegister(this);y.push(j);}}}T=y;w=true;};this._registerTriggers=function(i){w=false;i.forEach(function(j){j.fnRegister(this);T.push(j);});w=true;};function x(i,j){var y=[];if(!j.aTriggers){j.aTriggers=[];}i.forEach(function(z){var F={sName:z.sName,fnRegister:z.fnRegister,fnUnRegister:z.fnUnRegister};j.aTriggers.push(F);y.push(F);});return y;}this.createTriggersOnState=function(i,j){var y=x(i,B);if(!I){this._registerTriggers(y);}};this.createTriggersOnBaseStates=function(i,j,y){var z=[];j.forEach(function(F){var G=B[F];z=x(i,G);});var D=j.indexOf(y)>=0;if(D&&!I){this._registerTriggers(z);}};this.createTriggers=function(i,j,y){var z=s.currentState;if(j===true){this.createTriggersOnState(i,z);return;}this.createTriggersOnBaseStates(i,y,z.stateName);};this.createInspection=function(j,y,z,D){var F=function(M,j,y){var N,O;if(!M.oCheckPoints){M.oCheckPoints=[];}if(!M.oCheckPoints[j]){M.oCheckPoints[j]=[];}N=M.oCheckPoints[j];for(O=0;O<y.length;O++){G=y[O];N.push({fnCondition:G.fnCondition,fnCheckPoint:G.fnAction});}};if(z===true){var G,H=s.currentState;F(H,j,y);if(!t&&!I){F(l.currentState,j,y);}this._renderShellState();}else{var i,J=s.currentState.stateName;for(i=0;i<D.length;i++){var K=D[i],L=B[K];F(L,j,y);if(J===K){if(!I){this._renderShellState();}}}}};this.showShellItem=function(P,j,V){var y=this._getModelStates(j),M="/currentState"+P,z;for(var i=0;i<y.length;i++){z=B[y[i]].stateName;B[z][P.split("/")[1]]=V;}if(s.currentState.stateName===j){f(M,V,s);}};this.addCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnAdd(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.removeCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnRemove(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.createExtendedShellState=function(i,j){var y,z=this._createCustomShellState(i);if(!A){A={extendedShellStates:{},oCheckPoints:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}y=A.extendedShellStates;if(y[i]){return false;}s=z;t=true;j();if(y[i]){y[i].customState=z;}else{y[i]={managedObjects:[],customState:z};}s=C.last("/core/shell/model");t=false;return true;};this.applyExtendedShellState=function(i){q=i;this._renderShellState();};this.addEntryInShellStates=function(i,j,y,R,z){var D,F;if(!o[i]){o[i]={fnAdd:y,fnHide:R};var G=this._getStatesList();for(D=0;D<G.length;D++){F=G[D];B[F][i]=z[F];}this["remove"+j]=R;this["add"+j]=y;}else{throw new Error("State entry already exsists:"+i);}};this.addElementToManagedQueue=function(i){var j=C.last("/core/shell/model/currentState/stateName"),y,z=i.getId();if(!A){A={extendedShellStates:{},oCheckPoints:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}y=A.extendedShellStates;if(!y[j]){y[j]={managedObjects:[],customState:undefined};}y[j].managedObjects.push(z);var M=m[z];if(M){M.nRefCount++;}else{M={oItem:i,nRefCount:1};m[z]=M;}};this.updateNeededTriggersMap=function(i,j){var y;if(!j){return;}for(y=0;y<j.length;y++){i[j[y].sName]=j[y];}};this._renderShellState=function(){if(B===undefined){return;}var i=C.last("/core/shell/model/currentState/stateName"),j,y,z=u.clone(B[i]),D=A,F,N={};if(I){return;}if(D){F=D.customShellState.currentState;}var G={"currentState":u.clone(z)};s=G;I=true;if(q){if(D.extendedShellStates[q]){j=D.extendedShellStates[q].customState;y=j.currentState;this._addCustomShellStates(y);}}if(F){this._addCustomShellStates(F);}s=C.last("/core/shell/model");if(z&&z.aTriggers){this.updateNeededTriggersMap(N,z.aTriggers);}if(y&&y.aTriggers){this.updateNeededTriggersMap(N,y.aTriggers);}if(F&&F.aTriggers){this.updateNeededTriggersMap(N,F.aTriggers);}if(w){this._handleTriggers(N);}delete G.currentState.aTriggers;delete G.currentState.oCheckPoints;var H=r(G.currentState,{aTriggers:true,oCheckPoints:true});C.emit("/core/shell/model/currentState",H);I=false;};this._addCustomShellStates=function(i){this.addHeaderItem(i.headItems,true);this.addToolAreaItem(i.toolAreaItems,true);this.addHeaderEndItem(i.headEndItems,true);this.addSubHeader(i.subHeader,true);this.addRightFloatingContainerItem(i.RightFloatingContainerItems,true);this.addActionButton(i.actions,true,undefined,false);this.addLeftPaneContent(i.paneContent,true);this.addFloatingActionButton(i.floatingActions,true);this._setCurrentApplicationInformation(i.application);this.showRightFloatingContainer(i.showRightFloatingContainer);this.setHeaderVisibility(i.headerVisible,true);if(i.showLogo){this.showLogo(true);}};this._createCustomShellState=function(i){var j={"currentState":{"stateName":i,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}};var y=c[i];if(y){jQuery.extend(j.currentState,y);}return j;};this._setCurrentApplicationInformation=function(i){if(!i){i={};}i=jQuery.extend(true,{},s.currentState.application,i);this.updateStateProperty("application",i,true);};this._showRightFloatingContainer=function(i){this._setShellItem("showRightFloatingContainer",i,true,[],v,f);};this._addActionButtonAtStart=function(P,i,j,y){function U(z,D,F){var G=g(F,z),H=[],O=D.indexOf("openCatalogBtn");if(O>-1){D.splice(O,1);H.push("openCatalogBtn");}else{if(G[0]==="openCatalogBtn"){G.splice(0,1);H.push("openCatalogBtn");}}H=H.concat(D).concat(G);f(z,H,F);}this._setShellItem(P,i,j,y,n,U);};this._addActionButton=function(P,i,j,y){function U(z,D,F){var G=g(F,z);var L=G.indexOf("logoutBtn");if(L>-1){G.splice.apply(G,[L,0].concat(D));}else{G=G.concat(D);}var O=G.indexOf("openCatalogBtn"),H=[];if(O>-1){G.splice(O,1);H.push("openCatalogBtn");H=H.concat(G);}else{H=G;}f(z,H,F);}this._setShellItem(P,i,j,y,n,U);};this.setFloatingContainerContent=function(P,i,j,y){function V(z,i,D){return i.length===1;}function U(z,i,D){f(z,i,D);}this._setShellItem(P,i,j,y,V,U);};this._addUpToSixItem=function(P,i,j,y,D){function V(z,F,G){var H=0,J,K;if(F.length===1&&F[0]==="endItemsOverflowBtn"){return true;}for(J=0;J<z.length;J++){K=z[J];if(K!=="endItemsOverflowBtn"){H++;}if(H+F.length>6){jQuery.sap.log.warning("maximum of six items has reached, cannot add more items.");return false;}if(F.indexOf(K)>-1){return false;}}return true;}function U(z,F,G){var H=g(G,z),J=H.slice(0);J=J.sort();J=J.concat(F);var K=J.indexOf("NotificationsCountButton");if(K!=-1){J.splice(K,1);J.splice(J.length,0,"NotificationsCountButton");}var L=J.indexOf("copilotBtn");if(L!=-1){J.splice(L,1);if(J.indexOf("sf")!=-1){J.splice(1,0,"copilotBtn");}else{J.splice(0,0,"copilotBtn");}}var M=J.indexOf("sf");if(M!=-1){J.splice(M,1);J.splice(0,0,"sf");}f(z,J,G);}this._setShellItem(P,i,j,y,V,U,D);};this._addShellItem=function(P,i,j,y){function V(z,i,D){if(z.length>0){jQuery.sap.log.warning("You can only add one item. Replacing existing item: "+z[0]+" in state: "+D+", with the new item: "+i[0]+".");}return true;}function U(z,D,F){f(z,i.slice(0),F);}this._setShellItem(P,i,j,y,V,U);};this._addRightFloatingContainerItem=function(P,i,j,y){function U(z,D,F){var G=g(F,z);G=G.concat(D);f(z,G,F);}this._setShellItem(P,i,j,y,n,U);};this._addToolAreaItem=function(P,i,j,y){function U(F,i,G){var H=g(G,F);H.push(i);f(F,H,G);}var z,D=this._getPassStates(y);for(z=0;z<D.length;z++){this.showShellItem("/toolAreaVisible",D[z],true);}this._setShellItem(P,i,j,y,n,U);};this._removeShellItem=function(P,i,j,y){function V(z,D){var F,i,G;for(G=0;G<D.length;G++){i=D[G];F=z.indexOf(i);if(F<0){jQuery.sap.log.warning("You cannot remove Item: "+i+", the headItem does not exists.");return false;}}return true;}function U(z,D,F){var G=g(F,z),H,i,J;for(J=0;J<D.length;J++){i=D[J];H=G.indexOf(i);if(H>-1){G.splice(H,1);}}f(z,G,F);}this._setShellItem(P,i,j,y,V,U);};this._commitCheckPoints=function(i,j,y){var z;for(z=0;z<i.length;z++){if(i[z].fnCondition(j,y,this)){i[z].fnCheckPoint(j,y,this);}}};this._setShellItem=function(P,O,y,z,V,U,D){var F,G;var H=Array.isArray(O)?O.slice(0):O;if(y===true){F="/currentState/"+P;G=g(s,F);if(V(G,H,"currentState")===false){return;}if(I&&!p){var J=C.last("/core/shell/model/currentState/stateName"),K=B[J],L=A;p=true;if(K.oCheckPoints){var M=K.oCheckPoints[P];if(M&&M.length){this._commitCheckPoints(M,G,H);}}if(q){if(L.extendedShellStates[q]){var N=L.extendedShellStates[q].customState,Q=N.currentState;if(Q&&Q.oCheckPoints&&Q.oCheckPoints[P]){this._commitCheckPoints(Q.oCheckPoints[P],G,H);}}}var R=L.customShellState.currentState;if(R&&R.oCheckPoints&&R.oCheckPoints[P]){M=R.oCheckPoints[P];if(M&&M.length){this._commitCheckPoints(M,G,H);}}p=false;}if(!t&&!I){U(F,H,l);sap.ui.getCore().getEventBus().publish('launchpad','updateShell',{oModel:s,path:F,aIds:H,sProperty:P});this._renderShellState();}else{U(F,H,s);}}else{var W=D?z:this._getPassStates(z),i,X=s.currentState.stateName;for(i=0;i<W.length;i++){var Y=W[i],j;G=g(B[Y],"/"+P);if(V(G,H,Y)===false){continue;}var Z=this._getModelStates(Y,D);for(j=0;j<Z.length;j++){F="/"+Z[j]+"/"+P;U(F,H,B);if(X===Z[j]){if(!I){this._renderShellState();}}}}}};this._getPassStates=function(j){var P=[],i;j=j||[];for(i=0;i<j.length;i++){if(j[i]!==undefined){if(j[i]!=="home"&&j[i]!=="app"){throw new Error("sLaunchpadState value is invalid");}P.push(j[i]);}}if(!P.length){P=["app","home"];}return P;};this._getModelStates=function(i,D){var M=[];if(i==="app"&&!D){var j=["app","minimal","standalone","embedded","headerless","merged","blank","lean"];M=M.concat(j);}else if(i==="home"&&!D){var j=["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"];M=M.concat(j);}else{M.push(i);}return M;};this._getStatesList=function(){return Object.keys(B);};this._destroyManageQueue=function(i){var j,y,M,z,D,F;z=A.extendedShellStates;for(D in z){if(z.hasOwnProperty(D)){F=z[D].managedObjects;for(j=0;j<F.length;j++){y=F[j];M=m[y];M.nRefCount--;if(M.nRefCount===0){M.oItem.destroy();m[y]=null;}}delete z[D];}}};this._isValidStateEntry=function(N){return!!o[N];};this.getModelToUpdate=function(){return s;};this.setModelToUpdate=function(M,i){t=i;s=M;};this._getManagedElements=function(){return m;};this.extendStates=function(i){var j;for(j in i){if(i.hasOwnProperty(j)){B[j]=i[j];}}};this.getBaseStateMember=function(i,j){return B[i][j];};this.getCustomStateDeltaMember=function(i,j){return c[i][j];};this.getAllStatesInDelta=function(){return Object.keys(c);};}var k=new h();return k;},true);
