// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(['sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/homepage/ComponentKeysHandler','sap/ushell/utils','sap/m/Dialog','sap/m/Button','sap/m/Text'],function(r,U,C,u,D,B,T){"use strict";return U.extend("sap.ushell.components.shell.Search.Component",{metadata:{version:"1.53.0-SNAPSHOT",library:"sap.ushell.components.shell.search",dependencies:{libs:["sap.m","sap.ui.layout"]}},createContent:function(){var s=sap.ushell.Container.getRenderer("fiori2").getShellController(),S=s.getView(),o=(S.getViewData()?S.getViewData().config:{})||{};"use strict";var t=this;var b=(o.enableSearch!==false);if(b){var _=function(i){if(!t._searchShellHelperDeferred){t._searchShellHelperDeferred=jQuery.Deferred();sap.ui.require(['sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader'],function(){var c=sap.ui.require('sap/ushell/renderers/fiori2/search/SearchShellHelper');if(i){c.init();}t._searchShellHelperDeferred.resolve(c);});}return t._searchShellHelperDeferred;};var a=sap.ushell.Container.getRenderer("fiori2").addHeaderEndItem("sap.ushell.ui.shell.ShellHeadItem",{id:"sf",tooltip:"{i18n>searchbox_tooltip}",text:"{i18n>searchBtn}",ariaLabel:"{i18n>searchbox_tooltip}",icon:sap.ui.core.IconPool.getIconURI("search"),accessKey:"f",visible:true,showSeparator:false,press:function(e){_(false).done(function(c){c.onShellSearchButtonPressed(e);});}},true,false);if(o.openSearchAsDefault){_(true).done(function(c){c.setDefaultOpen(true);});}t.oHashChanger=sap.ui.core.routing.HashChanger.getInstance();t.oHashChanger.attachEvent("shellHashChanged",function(c){var h=c.mParameters;setTimeout(function(){sap.ui.require(['sap/ushell/renderers/fiori2/search/HashChangeHandler'],function(H){H.handle(h);});},6000);});a.addEventDelegate({onsapskipforward:function(e){e.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onsapskipback:function(e){e.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onAfterRendering:function(){jQuery("#sf").attr("aria-pressed",false);}});S.aDanglingControls.push(a);}sap.ui.getCore().getEventBus().publish("shell","searchCompLoaded",{delay:0});},exit:function(){}});});
