sap.ui.require.preload({"sap/ushell/components/appfinder/AppFinder.controller.js":function(){
// ${copyright}
sap.ui.define(['sap/ushell/ui/launchpad/AccessibilityCustomData','sap/ushell/ui5service/ShellUIService','sap/ushell/EventHub','sap/ushell/components/CatalogsManager'],function(A,S,E,C){"use strict";sap.ui.controller("sap.ushell.components.appfinder.AppFinder",{onInit:function(){sap.ushell.Container.getRenderer("fiori2").createExtendedShellState("appFinderExtendedShellState",function(){sap.ushell.Container.getRenderer("fiori2").showHeaderItem('backBtn',true);sap.ushell.Container.getRenderer("fiori2").showHeaderItem('homeBtn',true);});var v=this.getView(),m=v.getModel(),s=v.showEasyAccessMenu;var c={model:m};this.oCatalogsManager=new C("catalogsMgr",c);this.getView().setModel(this._getSubHeaderModel(),"subHeaderModel");this.oConfig=v.parentComponent.getComponentData().config;this.catalogView=sap.ui.view("catalogView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.Catalog",height:"100%",viewData:{parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel()}});this.catalogView.addStyleClass('sapUiGlobalBackgroundColor sapUiGlobalBackgroundColorForce');this._addViewCustomData(this.catalogView,"appFinderCatalogTitle");this.oRouter=this.getView().parentComponent.getRouter();this.oRouter.attachRouteMatched(this._handleAppFinderNavigation.bind(this));v.createSubHeader();if(!s){v.oPage.addContent(this.catalogView);setTimeout(function(){jQuery('#catalogSelect').focus();},0);}sap.ui.Device.resize.attachHandler(this._resizeHandler.bind(this));this.oRouter.initialize();},_resizeHandler:function(){var s=this._showOpenCloseSplitAppButton();var c=this.oSubHeaderModel.getProperty('/openCloseSplitAppButtonVisible');if(s!=c){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonVisible',s);if(s){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',false);}}this._toggleViewWithToggleButtonClass(s);},_handleAppFinderNavigation:function(e){var v=this.getView();this._preloadAppHandler();this._getPathAndHandleGroupContext(e);this._toggleViewWithToggleButtonClass(this._showOpenCloseSplitAppButton());if(v.showEasyAccessMenu){this.onShow(e);}else if(v._showSearch('catalog')){v.updateSubHeader('catalog',false);this._toggleViewWithSearchAndTagsClasses('catalog');}sap.ui.getCore().getEventBus().publish("showCatalog");E.emit("CenterViewPointContentRendered","appFinder");E.emit("showCatalog",{sId:"showCatalog",oData:Date.now()});sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");},_showOpenCloseSplitAppButton:function(){return!sap.ui.Device.orientation.landscape||sap.ui.Device.system.phone;},_resetSubHeaderModel:function(){this.oSubHeaderModel.setProperty('/activeMenu',null);this.oSubHeaderModel.setProperty('/search',{searchMode:false,searchTerm:null});this.oSubHeaderModel.setProperty('/tag',{tagMode:false,selectedTags:[]});this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonVisible',this._showOpenCloseSplitAppButton());this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',false);},_getSubHeaderModel:function(){if(this.oSubHeaderModel){return this.oSubHeaderModel;}this.oSubHeaderModel=new sap.ui.model.json.JSONModel();this._resetSubHeaderModel();return this.oSubHeaderModel;},onTagsFilter:function(e){var t=e.getSource(),s=t.getModel('subHeaderModel'),a=e.getSource().getSelectedItems(),T=a.length>0,o={tagMode:T,selectedTags:[]};a.forEach(function(b,i){o.selectedTags.push(b.getText());});s.setProperty('/activeMenu',this.getCurrentMenuName());s.setProperty('/tag',o);sap.ui.getCore().byId("catalogView").getController().onTag(o);},searchHandler:function(e){var c=sap.ushell.components.getCatalogsManager();c.loadCustomTilesKeyWords();var s=e.getSource().getValue(),a=false;if(s==null){return;}var o=this.oSubHeaderModel.getProperty('/search');var b=this.oSubHeaderModel.getProperty('/activeMenu');if(this.getCurrentMenuName()!=b){b=this.getCurrentMenuName();}if(!o.searchMode&&!e.getParameter('clearButtonPressed')){o.searchMode=true;}if(o.searchMode&&sap.ui.Device.system.phone){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}if(s!=o.searchTerm){if(this.containsOnlyWhiteSpac(s)){s='*';}o.searchTerm=s;a=true;}this.oSubHeaderModel.setProperty("/search",o);this.oSubHeaderModel.setProperty("/activeMenu",b);this.oSubHeaderModel.refresh(true);if(a){sap.ui.getCore().byId("catalogView").getController().onSearch(o);}},_preloadAppHandler:function(){setTimeout(function(){if(sap.ushell.Container){sap.ushell.Container.getRenderer("fiori2").applyExtendedShellState("appFinderExtendedShellState");}this._updateShellHeader(this.oView.oPage.getTitle());}.bind(this),0);},getCurrentMenuName:function(){return this.currentMenu;},_navigateTo:function(n,m){var g=this.oView.getModel().getProperty("/groupContext");var G=g?g.path:null;if(G){this.oRouter.navTo(n,{filters:JSON.stringify({targetGroup:encodeURIComponent(G)})},true);}else{this.oRouter.navTo(n,{},true);}},getSystemsModels:function(){var t=this;if(this.getSystemsPromise){return this.getSystemsPromise;}var g=new jQuery.Deferred();this.getSystemsPromise=g.promise();var m=["userMenu","sapMenu"].map(function(a){var s=new sap.ui.model.json.JSONModel();s.setProperty("/systemSelected",null);s.setProperty("/systemsList",[]);return t.getSystems(a).then(function(r){s.setProperty("/systemsList",r);return s;});});jQuery.when.apply(jQuery,m).then(function(u,s){g.resolve(u,s);});return this.getSystemsPromise;},onSegmentButtonClick:function(e){switch(e.getParameters().id){case"catalog":this._navigateTo("catalog");break;case"userMenu":this._navigateTo("userMenu");break;case"sapMenu":this._navigateTo("sapMenu");break;}},onShow:function(e){var p=e.getParameter("name");if(p===this.getCurrentMenuName()){return;}var v=this.getView();v._updateSearchWithPlaceHolder(p);this._updateCurrentMenuName(p);this.getSystemsModels().then(function(u,s){var a=s.getProperty("/systemsList");var b=u.getProperty("/systemsList");v.oPage.removeAllContent();var c=(this.currentMenu==='sapMenu'?a:b);if(c&&c.length){v.updateSubHeader(this.currentMenu,true);}else if(v._showSearch(this.currentMenu)){v.updateSubHeader(this.currentMenu,false);}if(this.currentMenu==='catalog'){v.oPage.addContent(this.catalogView);}else if(this.currentMenu==='userMenu'){if(!this.userMenuView){this.userMenuView=new sap.ui.view("userMenuView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.EasyAccess",height:"100%",viewData:{menuName:"USER_MENU",easyAccessSystemsModel:u,parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("userMenu")}});this._addViewCustomData(this.userMenuView,"appFinderUserMenuTitle");}v.oPage.addContent(this.userMenuView);}else if(this.currentMenu==='sapMenu'){if(!this.sapMenuView){this.sapMenuView=new sap.ui.view("sapMenuView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.EasyAccess",height:"100%",viewData:{menuName:"SAP_MENU",easyAccessSystemsModel:s,parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("sapMenu")}});this._addViewCustomData(this.sapMenuView,"appFinderSapMenuTitle");}v.oPage.addContent(this.sapMenuView);}this._setFocusToSegmentedButton(c);this.oSubHeaderModel.setProperty("/activeMenu",this.currentMenu);if(this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible")){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}this.oSubHeaderModel.refresh(true);}.bind(this));},_updateCurrentMenuName:function(m){var v=this.getView();if(!v.showEasyAccessMenu||(m==="sapMenu"&&!v.enableEasyAccessSAPMenu)||(m==="userMenu"&&!v.enableEasyAccessUserMenu)){this.currentMenu="catalog";}else{this.currentMenu=m;}this._toggleViewWithSearchAndTagsClasses(m);},_toggleViewWithSearchAndTagsClasses:function(m){var v=this.getView();if(v._showSearch(m)){v.oPage.addStyleClass('sapUshellAppFinderSearch');}else{v.oPage.removeStyleClass('sapUshellAppFinderSearch');}if(v._showSearchTag(m)){v.oPage.addStyleClass('sapUshellAppFinderTags');}else{v.oPage.removeStyleClass('sapUshellAppFinderTags');}},_toggleViewWithToggleButtonClass:function(b){var v=this.getView();if(b){v.oPage.addStyleClass('sapUshellAppFinderToggleButton');}else{v.oPage.removeStyleClass('sapUshellAppFinderToggleButton');}},_setFocusToSegmentedButton:function(s){var v=this.getView();if(s&&s.length){var b=v.segmentedButton.getSelectedButton();setTimeout(function(){jQuery("#"+b).focus();},0);}else{setTimeout(function(){jQuery('#catalogSelect').focus();},0);}},_getPathAndHandleGroupContext:function(o){var p=o.getParameter('arguments');var d=p.filters;var D;try{D=JSON.parse(d);}catch(e){D=d;}var P=(D&&decodeURIComponent(D.targetGroup))||"";P=P==='undefined'?undefined:P;this._updateModelWithGroupContext(P);},_updateModelWithGroupContext:function(p){var l=sap.ushell.Container.getService("LaunchPage"),m=this.oView.getModel(),g,G={path:p,id:"",title:""};if(p&&p!==""){var t=function(){var M=m.getProperty("/groups");if(M.length){g=m.getProperty(p);G.id=l.getGroupId(g.object);G.title=g.title||l.getGroupTitle(g.object);return;}setTimeout(t,100);};t();}m.setProperty("/groupContext",G);},getSystems:function(m){var d=new jQuery.Deferred();var c=sap.ushell.Container.getService("ClientSideTargetResolution");if(!c){d.reject("cannot get ClientSideTargetResolution service");}else{c.getEasyAccessSystems(m).done(function(s){var a=[];var b=Object.keys(s);for(var i=0;i<b.length;i++){var e=b[i];a[i]={"systemName":s[e].text,"systemId":e};}d.resolve(a);}).fail(function(e){d.reject("An error occurred while retrieving the systems: "+e);});}return d.promise();},_addViewCustomData:function(v,t){var r=sap.ushell.resources.i18n;v.addCustomData(new A({key:"role",value:"region",writeToDom:true}));v.addCustomData(new A({key:"aria-label",value:r.getText(t),writeToDom:true}));},_initializeShellUIService:function(){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});},_updateShellHeader:function(t){if(!this.oShellUIService){this._initializeShellUIService();}this.oShellUIService.setTitle(t);this.oShellUIService.setHierarchy();},containsOnlyWhiteSpac:function(t){if(!t||t==="")return false;var T=t;return(!T.replace(/\s/g,'').length);}});},false);},"sap/ushell/components/appfinder/AppFinder.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.AppFinder",{createContent:function(){this.oController=this.getController();this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.setModel(this.parentComponent.getModel());this.enableEasyAccessSAPMenu=this.getModel().getProperty("/enableEasyAccessSAPMenu");this.enableEasyAccessUserMenu=this.getModel().getProperty("/enableEasyAccessUserMenu");if((!this.enableEasyAccessSAPMenu&&!this.enableEasyAccessUserMenu)||(sap.ui.Device.system.phone||sap.ui.Device.system.tablet&&(!sap.ui.Device.system.combi))){this.showEasyAccessMenu=false;}else{this.showEasyAccessMenu=true;}var r=sap.ushell.resources.i18n;this.oPage=new sap.m.Page("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?r.getText("appFinderTitle"):r.getText("appFinder_group_context_title",t);}}});return this.oPage;},_showSearch:function(m){var M="enableCatalogSearch";if(m==="userMenu"){M="enableEasyAccessUserMenuSearch";}else if(m==="sapMenu"){M="enableEasyAccessSAPMenuSearch";}return this.getModel().getProperty("/"+M);},_showSearchTag:function(m){if(m==="userMenu"||m==="sapMenu"){return false;}return this.getModel().getProperty("/enableCatalogTagFilter");},createSubHeader:function(){this.oToolbar=new sap.m.Toolbar("appFinderSubHeader",{});this.oToolbar.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsapskipforward:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){e.preventDefault();sap.ushell.components.homepage.ComponentKeysHandler.setFocusOnCatalogTile();}},onAfterRendering:function(){jQuery("#catalog-button").attr("accesskey","a");}});this.oToolbar.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"heading",writeToDom:true}));this.oToolbar.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-level",value:"2",writeToDom:true}));this.oToolbar.addStyleClass('sapUshellAppFinderHeader');this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new sap.m.ToggleButton("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(e){this.getController().oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',e.getSource().getPressed());this.openCloseSplitAppButton.setTooltip(e.getParameter("pressed")?sap.ushell.resources.i18n.getText("ToggleButtonHide"):sap.ushell.resources.i18n.getText("ToggleButtonShow"));}.bind(this),tooltip:sap.ushell.resources.i18n.getText("ToggleButtonShow")});this.openCloseSplitAppButton.addEventDelegate({onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton);}},updateSubHeader:function(m,e){var s,a;this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(e){s=this.createSegmentedButtons(m);this.oPage.addStyleClass('sapUshellAppFinderWithEasyAccess');this.oToolbar.addContent(s);}if(this._showSearch(m)){a=this.createSearchControl(m);this.oToolbar.addContent(a);}this.getController()._updateCurrentMenuName(m);},createSegmentedButtons:function(m){var c,r,s,b,a,i;if(this.segmentedButton){this.segmentedButton.setSelectedButton(m);return this.segmentedButton;}c=this.getController();r=sap.ushell.resources.i18n;s=[];s.push(new sap.m.SegmentedButtonItem("catalog",{text:r.getText("appFinderCatalogTitle"),press:function(e){c.onSegmentButtonClick(e);}}));if(this.enableEasyAccessUserMenu){s.push(new sap.m.SegmentedButtonItem('userMenu',{text:r.getText("appFinderUserMenuTitle"),press:function(e){c.onSegmentButtonClick(e);}}));}if(this.enableEasyAccessSAPMenu){s.push(new sap.m.SegmentedButtonItem('sapMenu',{text:r.getText("appFinderSapMenuTitle"),press:function(e){c.onSegmentButtonClick(e);}}));}this.segmentedButton=new sap.m.SegmentedButton("appFinderSegmentedButtons",{items:s});this.segmentedButton.addEventDelegate({onsaptabprevious:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(!o.getVisible()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}});this.segmentedButton.setSelectedButton(m);b=this.segmentedButton.getItems();for(i=0;i<b.length;i++){a=b[i];a.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-controls",value:a.getId()+"View",writeToDom:true}));}return this.segmentedButton;},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);jQuery('#appFinderSearch input').select();},createSearchControl:function(m){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new sap.m.FlexBox("appFinderSearchContainer");}this.oAppFinderSearchContainer.removeAllItems();if(m==='catalog'&&this._showSearchTag('catalog')){this.createTagControl();this.oAppFinderSearchContainer.addItem(this.oAppFinderTagFilter);}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new sap.m.SearchField("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:'subHeaderModel>/search/searchTerm',mode:sap.ui.model.BindingMode.OneWay}}).addStyleClass('help-id-catalogSearch');this.oAppFinderSearchControl.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-controls",value:"",writeToDom:true}));this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.setFocusOnCatalogTile();}}});}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(m);return this.oAppFinderSearchContainer;},_updateSearchWithPlaceHolder:function(m){var s="";if(m==='catalog'){s="EasyAccessMenu_SearchPlaceHolder_Catalog";}else if(m==='userMenu'){s="EasyAccessMenu_SearchPlaceHolder_UserMenu";}else if(m==='sapMenu'){s="EasyAccessMenu_SearchPlaceHolder_SAPMenu";}if(s&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(sap.ushell.resources.i18n.getText(s));this.oAppFinderSearchControl.setTooltip(sap.ushell.resources.i18n.getText(s));}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter;}this.oAppFinderTagFilter=new sap.m.MultiComboBox("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",visible:{path:"/tagList",formatter:function(t){return t.length>0;}},items:{path:"/tagList",sorter:new sap.ui.model.Sorter("tag",false,false),template:new sap.ui.core.ListItem({text:"{tag}",key:"{tag}"})},selectionChange:[this.oController.onTagsFilter,this.oController]}).addStyleClass('help-id-catalogTagFilter');return this.oAppFinderTagFilter;},getControllerName:function(){return"sap.ushell.components.appfinder.AppFinder";}});},false);},"sap/ushell/components/appfinder/Catalog.controller.js":function(){sap.ui.define(["sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/utils/WindowUtils"],function(P,W){"use strict";sap.ui.controller("sap.ushell.components.appfinder.Catalog",{oPopover:null,onInit:function(){this.categoryFilter="";this.preCategoryFilter="";this.oMainModel=this.oView.getModel();this.oSubHeaderModel=this.oView.getModel("subHeaderModel");this.resetPage=false;this.bIsInProcess=false;var t=this;sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this);var r=this.getView().parentComponent.getRouter();r.attachRouteMatched(function(e){t.onShow(e);});this.timeoutId=0;document.subHeaderModel=this.oSubHeaderModel;document.mainModel=this.oMainModel;var T=this.oSubHeaderModel.bindProperty("/openCloseSplitAppButtonToggled");T.attachChange(t.handleToggleButtonModelChanged.bind(this));this.oView.oCatalogsContainer.setHandleSearchCallback(t.handleSearchModelChanged.bind(this));},onBeforeRendering:function(){sap.ui.getCore().getEventBus().publish("renderCatalog");},onAfterRendering:function(){this.wasRendered=true;var m=this.getView().getModel(),c=m.getProperty('/catalogs'),t=this;if(!c.length){}else if(c[0].title!=sap.ushell.resources.i18n.getText('catalogsLoading')){}if(!this.PagingManager){this._setPagingManager();}if(this.PagingManager.currentPageIndex===0){t.allocateNextPage();}jQuery(window).resize(function(){var w=$(window).width(),a=$(window).height();t.PagingManager.setContainerSize(w,a);});t._handleAppFinderWithDocking();sap.ui.getCore().getEventBus().subscribe("launchpad","appFinderWithDocking",t._handleAppFinderWithDocking,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appFinderAfterNavigate",t._handleAppFinderAfterNavigate,this);},_setPagingManager:function(){this.lastCatalogId=0;this.PagingManager=new P('catalogPaging',{supportedElements:{tile:{className:'sapUshellTile'}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});this.getView().getCatalogContainer().setPagingManager(this.PagingManager);},_decodeUrlFilteringParameters:function(u){var U;try{U=JSON.parse(u);}catch(e){U=u;}var h=(U&&U.tagFilter&&U.tagFilter)||[];if(h){try{this.tagFilter=JSON.parse(h);}catch(e){this.tagFilter=[];}}else{this.tagFilter=[];}this.categoryFilter=(U&&U.catalogSelector&&U.catalogSelector)||this.categoryFilter;if(this.categoryFilter){this.categoryFilter=window.decodeURIComponent(this.categoryFilter);}this.searchFilter=(U&&U.tileFilter&&U.tileFilter)||null;if(this.searchFilter){this.searchFilter=window.decodeURIComponent(this.searchFilter);}},_applyFilters:function(w){var s=false;if(this.categoryFilter){this.categoryFilter=sap.ushell.resources.i18n.getText('all')===this.categoryFilter?'':this.categoryFilter;if(this.categoryFilter!=this.preCategoryFilter){s=true;}this.oView.setCategoryFilterSelection(this.categoryFilter,s);}else{s=true;this.oView.setCategoryFilterSelection("",s);}this.preCategoryFilter=this.categoryFilter;if(this.searchFilter&&this.searchFilter.length){this.searchFilter=this.searchFilter.replace(/\*/g,'');this.searchFilter=this.searchFilter.trim();this.oSubHeaderModel.setProperty('/search',{searchMode:true,searchTerm:this.searchFilter});}else if(w){this.oSubHeaderModel.setProperty('/search',{searchMode:false,searchTerm:""});this.resetPage=true;}if(this.tagFilter&&this.tagFilter.length){this.oSubHeaderModel.setProperty('/tag',{tagMode:true,selectedTags:this.tagFilter});}else if(w){this.oSubHeaderModel.setProperty('/tag',{tagMode:false,selectedTags:[]});this.resetPage=true;}this.handleSearchModelChanged();},_handleAppFinderAfterNavigate:function(){this.clearFilters();},clearFilters:function(){var s=false;if(this.categoryFilter!=this.preCategoryFilter){s=true;}var S=this.oSubHeaderModel.getProperty('/search/searchMode'),t=this.oSubHeaderModel.getProperty('/tag/tagMode');if(S){this.oSubHeaderModel.setProperty('/search',{searchMode:true,searchTerm:""});}if(t){this.oSubHeaderModel.setProperty('/tag',{tagMode:true,selectedTags:[]});}if(this.categoryFilter&&this.categoryFilter!=""){this.selectedCategoryId=undefined;this.categoryFilter=undefined;this.getView().getModel().setProperty("/categoryFilter","");this.oView.setCategoryFilterSelection("",s);}this.preCategoryFilter=this.categoryFilter;this.handleSearchModelChanged();},onShow:function(e){var v,u=e.getParameter('arguments').filters;v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(false);}$.extend(this.getView().getViewData(),e);this._decodeUrlFilteringParameters(u);if(this.wasRendered&&!u){this.clearFilters();}else{this._applyFilters(this.wasRendered);}},allocateNextPage:function(){var c=this.getView().getCatalogContainer();if(!c.nAllocatedUnits||c.nAllocatedUnits===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();c.applyPagingCategoryFilters(this.allocateTiles,this.categoryFilter);}},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect"),i=jQuery.grep(s.getItems(),jQuery.proxy(function(I){return I.getBindingContext().getObject().title===this.categoryFilter;},this));if(!i.length&&s.getItems()[0]){i.push(s.getItems()[0]);}},setTagsFilter:function(f){var p={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:(this.searchFilter&&this.searchFilter.length)?encodeURIComponent(this.searchFilter):'',tagFilter:f.length?JSON.stringify(f):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},setCategoryFilter:function(f){var p={catalogSelector:f,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},setSearchFilter:function(f){var p={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:f?encodeURIComponent(f):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},onSearch:function(s){var a=this.oSubHeaderModel.getProperty('/activeMenu');if(this.oView.getId().indexOf(a)!==-1){var b=s.searchTerm?s.searchTerm:"";this.setSearchFilter(b);}else{this._restoreSelectedMasterItem();}},onTag:function(t){var a=this.oSubHeaderModel.getProperty('/activeMenu');if(this.oView.getId().indexOf(a)!==-1){var b=t.selectedTags?t.selectedTags:[];this.setTagsFilter(b);}else{this._restoreSelectedMasterItem();}},getGroupContext:function(){var m=this.getView().getModel(),g=m.getProperty("/groupContext/path");return g?g:"";},_isTagFilteringChanged:function(s){var S=s.length===this.tagFilter.length,i=S;if(!i){return true;}s.some(function(t,I){i=jQuery.inArray(t,this.tagFilter)!==-1;return!i;}.bind(this));return i;},_setUrlWithTagsAndSearchTerm:function(s,S){var u={tileFilter:s&&s.length?encodeURIComponent(s):'',tagFilter:S.length?JSON.stringify(S):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(u)});},handleSearchModelChanged:function(){var s=this.oSubHeaderModel.getProperty('/search/searchMode'),t=this.oSubHeaderModel.getProperty('/tag/tagMode'),p,S=this.oSubHeaderModel.getProperty('/search/searchTerm'),a=this.oSubHeaderModel.getProperty('/tag/selectedTags'),o,b,c,f=[],F;if(!this.PagingManager){this._setPagingManager();}this.PagingManager.resetCurrentPageIndex();this.nAllocatedTiles=0;this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oView.oCatalogsContainer.updateAllocatedUnits(this.allocateTiles);this.oView.oCatalogsContainer.resetCatalogPagination();var d=sap.ui.getCore().byId('catalogTilesDetailedPage');if(d){d.scrollTo(0,0);}if(s||t||this.resetPage){if(a&&a.length>0){o=new sap.ui.model.Filter('tags','EQ','v');o.fnTest=function(T){var l,m;if(a.length===0){return true;}for(l=0;l<a.length;l++){m=a[l];if(T.indexOf(m)===-1){return false;}}return true;}.bind(this);b=new sap.ui.model.Filter([o],true);}S=S?S.replace(/\*/g,''):S;if(S){var e=S.split(/[\s,]+/);var k=new sap.ui.model.Filter(jQuery.map(e,function(v){return(v&&new sap.ui.model.Filter("keywords",sap.ui.model.FilterOperator.Contains,v));}),true);var g=new sap.ui.model.Filter($.map(e,function(v){return(v&&new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v));}),true);var h=new sap.ui.model.Filter($.map(e,function(v){return(v&&new sap.ui.model.Filter("subtitle",sap.ui.model.FilterOperator.Contains,v));}),true);f.push(k);f.push(g);f.push(h);c=new sap.ui.model.Filter(f,false);}var i=this.oView.oCatalogsContainer.getCatalogs();this.oSearchResultsTotal=[];var j=this;if(b&&b.aFilters.length>0&&c){F=new sap.ui.model.Filter([c].concat([b]),true);}else if(b&&b.aFilters.length>0){F=new sap.ui.model.Filter([b],true);}else if(c&&c.aFilters.length>0){F=new sap.ui.model.Filter([c],true);}i.forEach(function(m){m.getBinding("customTilesContainer").filter(F);m.getBinding("appBoxesContainer").filter(F);});this.oView.oCatalogsContainer.bSearchResults=false;this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);this.bSearchResults=this.oView.oCatalogsContainer.bSearchResults;this.oView.splitApp.toDetail(j.getView()._calculateDetailPageId());this.resetPage=false;}else{this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);}p=this.getView()._calculateDetailPageId();this.oView.splitApp.toDetail(p);},_handleAppFinderWithDocking:function(){if(jQuery(".sapUshellContainerDocked").length>0){if(jQuery("#mainShell").width()<710){if(window.innerWidth<1024){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(sap.m.SplitAppMode.ShowHideMode);}else{this.oView.splitApp.setMode(sap.m.SplitAppMode.HideMode);this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",true);}}else{this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(sap.m.SplitAppMode.ShowHideMode);}}},_restoreSelectedMasterItem:function(){var c=this.oView.splitApp.getMasterPage('catalogSelect'),o=sap.ui.getCore().byId(this.selectedCategoryId);if(o){this.categoryFilter=o.getTitle();}c.setSelectedItem(o);},handleToggleButtonModelChanged:function(){var b=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible"),B=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonToggled");if(B!=this.bCurrentButtonToggled){if(!sap.ui.Device.system.phone){if(b){if(B&&!this.oView.splitApp.isMasterShown()){this.oView.splitApp.showMaster();}else if(this.oView.splitApp.isMasterShown()){this.oView.splitApp.hideMaster();}}}else{if(b){if(B&&!this.oView.splitApp.isMasterShown()){var c=sap.ui.getCore().byId('catalogSelect');this.oView.splitApp.backMaster(c);}else if(this.oView.splitApp.isMasterShown()){var d=sap.ui.getCore().byId(this.getView()._calculateDetailPageId());this.oView.splitApp.toDetail(d);}}}}this.bCurrentButtonToggled=B;},_handleCatalogListItemPress:function(e){this.onCategoryFilter(e);if(this.oSubHeaderModel.getProperty('/search/searchTerm')!=""){this.oSubHeaderModel.setProperty('/search/searchMode',true);}if(sap.ui.Device.system.phone||sap.ui.Device.system.tablet){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',!this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled'));}},onCategoryFilter:function(e){var m=e.getSource(),s=m.getSelectedItem(),S=s.getBindingContext(),M=S.getModel();if(M.getProperty("static",S)){M.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategoryId=undefined;this.categoryFilter=undefined;}else{M.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(window.encodeURIComponent(s.getBindingContext().getObject().title));this.categoryFilter=s.getTitle();this.selectedCategoryId=s.getId();}},onTileAfterRendering:function(e){var j=jQuery(e.oSource.getDomRef()),a=j.find(".sapMGT");a.attr("tabindex","-1");},catalogTilePress:function(c){sap.ui.getCore().getEventBus().publish("launchpad","catalogTileClick");},onAppBoxPressed:function(e){var a=e.getSource(),t=a.getBindingContext().getObject(),p;if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}p=sap.ushell.Container.getService("LaunchPage").getAppBoxPressHandler(t);if(p){p(t);}else{var u=a.getProperty("url"),r={},R=sap.ushell.Container.getRenderer("fiori2");if(u&&u.indexOf("#")===0){hasher.setHash(u);}else{r.title=a.getProperty("title");r.appType="App";r.url=u;r.appId=u;R.logRecentActivity(r);W.openURL(u,'_blank');}}},onTilePinButtonClick:function(e){var l=sap.ushell.Container.getService("LaunchPage");var d=l.getDefaultGroup();d.done(function(D){var c=e.getSource(),s=c.getBindingContext(),m=this.getView().getModel(),g=m.getProperty("/groupContext/path");if(g){this._handleTileFooterClickInGroupContext(s,g);}else{var a=m.getProperty("/groups");var l=sap.ushell.Container.getService("LaunchPage");var b=this.getCatalogTileDataFromModel(s);var t=b.tileData.associatedGroups;var G=[];var f=a.map(function(j){var r,k,T;r=l.getGroupId(j.object);k=!($.inArray(r,t)==-1);T={id:r,title:this._getGroupTitle(D,j.object),selected:k};G.push(T);return{selected:k,initiallySelected:k,oGroup:j};}.bind(this));var p=sap.ui.getCore().byId("sapUshellGroupsPopover");var h;if(!p){h=l.getCatalogTilePreviewTitle(m.getProperty(s.sPath).src);if(!h){h=l.getCatalogTileTitle(m.getProperty(s.sPath).src);}var i=new sap.ui.view("sapUshellGroupsPopover",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.GroupListPopover",viewData:{groupData:f,title:h,enableHideGroups:m.getProperty("/enableHideGroups"),enableHelp:m.getProperty("/enableHelp"),sourceContext:s,catalogModel:this.getView().getModel(),catalogController:this}});i.getController().setSelectedStart(G);i.open(c).then(this._handlePopoverResponse.bind(this,s,b));}}}.bind(this));},_getGroupTitle:function(d,g){var l=sap.ushell.Container.getService("LaunchPage"),t;if(d&&(l.getGroupId(d)===l.getGroupId(g))){t=sap.ushell.resources.i18n.getText("my_group");}else{t=l.getGroupTitle(g);}return t;},_handlePopoverResponse:function(s,c,r){if(!r.addToGroups.length&&!r.newGroups.length&&!r.removeFromGroups.length){return;}var m=this.getView().getModel();var g=m.getProperty("/groups");var p=[];r.addToGroups.forEach(function(a){var i=g.indexOf(a);var G=new sap.ui.model.Context(m,"/groups/"+i);var b=this._addTile(s,G);p.push(b);}.bind(this));r.removeFromGroups.forEach(function(a){var t=s.getModel().getProperty(s.getPath()).id;var i=g.indexOf(a);var b=this._removeTile(t,i);p.push(b);}.bind(this));r.newGroups.forEach(function(a){var n=(a.length>0)?a:sap.ushell.resources.i18n.getText("new_group_name");var b=this._createGroupAndSaveTile(s,n);p.push(b);}.bind(this));jQuery.when.apply(jQuery,p).then(function(){var a=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(c,r,a);}.bind(this));},_handlePopoverGroupsActionPromises:function(c,p,r){var e=r.filter(function(g,i,r){return!g.status;});if(e.length){var E=this.prepareErrorMessage(e,c.tileData.title);var a=sap.ushell.components.getCatalogsManager();a.resetAssociationOnFailure(E.messageId,E.parameters);return;}var t=[];var l=sap.ushell.Container.getService("LaunchPage");p.allGroups.forEach(function(g){if(g.selected){var h=l.getGroupId(g.oGroup.object);t.push(h);}});var m=this.getView().getModel();if(p.newGroups.length){var d=m.getProperty("/groups");var n=d.slice(d.length-p.newGroups.length);n.forEach(function(g){var h=l.getGroupId(g.object);t.push(h);});}m.setProperty(c.bindingContextPath+"/associatedGroups",t);var f=(p.addToGroups[0])?p.addToGroups[0].title:"";if(!f.length&&p.newGroups.length){f=p.newGroups[0];}var b=(p.removeFromGroups[0])?p.removeFromGroups[0].title:"";var D=this.prepareDetailedMessage(c.tileData.title,p.addToGroups.length+p.newGroups.length,p.removeFromGroups.length,f,b);sap.m.MessageToast.show(D,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_getCatalogTileIndexInModel:function(s){var t=s.sPath,a=t.split("/"),b=a[a.length-1];return b;},_handleTileFooterClickInGroupContext:function(s,g){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),c=this.getCatalogTileDataFromModel(s),a=c.tileData.associatedGroups,G=m.getProperty(g),b=l.getGroupId(G.object),C=$.inArray(b,a),t=c.bindingContextPath,o,A,r,T,d,e=this;if(c.isBeingProcessed){return;}m.setProperty(t+'/isBeingProcessed',true);if(C==-1){o=new sap.ui.model.Context(s.getModel(),g);A=this._addTile(s,o);A.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,true);}else{e._groupContextOperationFailed(c,G,true);}});A.always(function(){m.setProperty(t+'/isBeingProcessed',false);});}else{T=s.getModel().getProperty(s.getPath()).id;d=g.split('/')[2];r=this._removeTile(T,d);r.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,false);}else{e._groupContextOperationFailed(c,G,false);}});r.always(function(){m.setProperty(t+'/isBeingProcessed',false);});}},_groupContextOperationSucceeded:function(s,c,g,t){var l=sap.ushell.Container.getService("LaunchPage"),G=l.getGroupId(g.object),a=c.tileData.associatedGroups,d,i;if(t){a.push(G);s.getModel().setProperty(c.bindingContextPath+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,1,0,g.title,"");}else{for(i in a){if(a[i]==G){a.splice(i,1);break;}}s.getModel().setProperty(c.bindingContextPath+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,0,1,"",g.title);}sap.m.MessageToast.show(d,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_groupContextOperationFailed:function(c,g,t){var a=sap.ushell.components.getCatalogsManager(),e;if(t){e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[c.tileData.title,g.title]});}else{e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[c.tileData.title,g.title]});}a.notifyOnActionFailure(e.messageId,e.parameters);},prepareErrorMessage:function(e,t){var g,a,f,F,n=0,N=0,c=false,m;for(var i in e){g=e[i].group;a=e[i].action;if(a=='add'){n++;if(n==1){f=g.title;}}else if(a=='remove'){N++;if(N==1){F=g.title;}}else if(a=='addTileToNewGroup'){n++;if(n==1){f=g.title;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){if(n){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,F]});}}else if(N==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]});}else if(n==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}return m;},prepareDetailedMessage:function(t,n,a,f,b){var m;if(n==0){if(a==1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSingleGroup",[t,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSeveralGroups",[t,a]);}}else if(n==1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroup",[t,f]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,a]);}}else if(n>1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroups",[t,n]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,a]);}}return m;},getCatalogTileDataFromModel:function(s){var b=s.getPath(),m=s.getModel(),t=m.getProperty(b);return{tileData:t,bindingContextPath:b,isBeingProcessed:t.isBeingProcessed?true:false};},_addTile:function(t,g){var c=sap.ushell.components.getCatalogsManager(),d=jQuery.Deferred(),p=c.createTile({catalogTileContext:t,groupContext:g});p.done(function(a){d.resolve(a);});return d;},_removeTile:function(t,i){var c=sap.ushell.components.getCatalogsManager(),d=jQuery.Deferred(),p=c.deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(a){d.resolve(a);});return d;},_createGroupAndSaveTile:function(t,n){var c=sap.ushell.components.getCatalogsManager(),d=jQuery.Deferred(),p=c.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(a){d.resolve(a);});return d;},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this);}});},false);},"sap/ushell/components/appfinder/Catalog.view.js":function(){sap.ui.define(['sap/ui/core/HTML','sap/ushell/ui/appfinder/AppBox','sap/ushell/ui/appfinder/PinButton','sap/ushell/ui/launchpad/CatalogEntryContainer','sap/ushell/ui/launchpad/CatalogsContainer','sap/ushell/ui/launchpad/Panel','sap/ushell/ui/launchpad/Tile'],function(H,A,P,C,a,b,T){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.Catalog",{oController:null,createContent:function(c){var t=this;this.oViewData=this.getViewData();this.parentComponent=this.oViewData.parentComponent;var m=this.parentComponent.getModel();this.setModel(m);this.setModel(this.oViewData.subHeaderModel,"subHeaderModel");this.oController=c;function i(L){return((L!==null)&&(L==="1x2"||L==="2x2"))||false;}function d(v){return parseInt(v,10)||0;}function g(e,q,G,r,v,w){var x;if(r){var R=sap.ushell.resources.i18n,y=$.inArray(v,G);x=R.getText(y!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup",w);}else{x=G&&G.length?q:e;}return x;}var o=new P({icon:'sap-icon://pushpin-off',selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(e,q,G,r){if(G){var v=$.inArray(r,e);return v!==-1;}else{return!!q;}}},tooltip:{parts:["i18n>EasyAccessMenu_PinButton_UnToggled_Tooltip","i18n>EasyAccessMenu_PinButton_Toggled_Tooltip","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(e,q,G,r,v,w,x){return g(e,q,G,v,w,x);}},press:[c.onTilePinButtonClick,c]});var f=new P({icon:'sap-icon://pushpin-off',selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(e,q,G,r){if(G){var v=$.inArray(r,e);return v!==-1;}else{return!!q;}}},tooltip:{parts:["i18n>EasyAccessMenu_PinButton_UnToggled_Tooltip","i18n>EasyAccessMenu_PinButton_Toggled_Tooltip","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(e,q,G,r,v,w,x){return g(e,q,G,v,w,x);}},press:[c.onTilePinButtonClick,c]});this.oAppBoxesTemplate=new A({title:'{title}',icon:'{icon}',subtitle:'{subtitle}',url:'{url}',navigationMode:'{navigationMode}',pinButton:f,press:[c.onAppBoxPressed,c]});f.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));f.addStyleClass("sapUshellPinButton");o.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));o.addStyleClass("sapUshellPinButton");this.oTileTemplate=new T({tileViews:{path:"content",factory:function(I,e){return e.getObject();}},"long":{path:"size",formatter:i},index:{path:"id",formatter:d},tileCatalogId:"{id}",pinButton:o,press:[c.catalogTilePress,c],afterRendering:c.onTileAfterRendering});this.oCatalogSelect=new sap.m.List("catalogSelect",{visible:"{/enableCatalogSelection}",name:"Browse",rememberSelections:true,mode:"SingleSelectMaster",items:{path:"/masterCatalogs",template:new sap.m.StandardListItem({type:"Active",title:"{title}",tooltip:"{title}"})},showNoData:false,itemPress:[c._handleCatalogListItemPress,c]});this.getCatalogSelect=function(){return this.oCatalogSelect;};var h=this.oCatalogSelect.onAfterRendering;this.oCatalogSelect.addEventDelegate({onsaptabnext:function(q){try{q.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.setFocusOnCatalogTile();}catch(e){}},onsapskipforward:function(q){try{q.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.setFocusOnCatalogTile();}catch(e){}},onsapskipback:function(q){try{q.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var r=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(r.getVisible()){r.focus();}else{sap.ushell.components.homepage.ComponentKeysHandler.appFinderFocusMenuButtons(q);}}catch(e){}}});if(m.getProperty("/enableHelp")){this.oCatalogSelect.addStyleClass('help-id-catalogCategorySelect');}this.setCategoryFilterSelection=function(S,e){var q=t.getCatalogSelect(),r=q.getItems(),v=S,w=0;if(!v||v==""){v=sap.ushell.resources.i18n.getText('all');}r.forEach(function(L,x){if(L.getTitle()===v){w=x;q.setSelectedItem(L);}});if(r.length!=0&&e){r[w].focus();}};this.oCatalogSelect.onAfterRendering=function(){var S=t.oController.categoryFilter||sap.ushell.resources.i18n.getText('all');t.setCategoryFilterSelection(S);if(h){h.apply(this,arguments);}if(!this.getSelectedItem()){this.setSelectedItem(this.getItems()[0]);}setTimeout(function(){var e=jQuery("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(e.length){e.eq(0).focus();}else{jQuery("#catalog-button").focus();}},0);};var j=this.oCatalogSelect._onAfterRenderingPopover;this.oCatalogSelect._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false);}if(j){j.apply(this,arguments);}};var E=sap.ui.getCore().getEventBus(),D,u=function(){this.splitApp.toMaster('catalogSelect','show');if(!sap.ui.Device.system.phone){D=this._calculateDetailPageId();if(D!=this.splitApp.getCurrentDetailPage().getId()){this.splitApp.toDetail(D);}}};E.subscribe("launchpad","catalogContentLoaded",function(){setTimeout(u.bind(this),500);},this);E.subscribe("launchpad","afterCatalogSegment",u,this);var k=new H("sapUshellCatalogAccessibilityTileText",{content:"<div style='height: 0px; width: 0px; overflow: hidden; float: left;'>"+sap.ushell.resources.i18n.getText("tile")+"</div>"});var l=new C({header:'{title}',customTilesContainer:{path:"customTiles",template:this.oTileTemplate,templateShareable:true},appBoxesContainer:{path:"appBoxes",template:this.oAppBoxesTemplate,templateShareable:true}});this.oMessagePage=new sap.m.MessagePage({visible:true,showHeader:false,text:sap.ushell.resources.i18n.getText('EasyAccessMenu_NoAppsToDisplayMessagePage_Text'),description:''});this.oCatalogsContainer=new a("catalogTiles",{categoryFilter:"{/categoryFilter}",catalogs:{path:"/catalogs",templateShareable:true,template:l},busy:true});this.oCatalogsContainer.addStyleClass('sapUshellCatalogTileContainer');this.oCatalogsContainer.addEventDelegate({onsaptabprevious:function(e){var q=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader"),r=jQuery(e.srcControl.getDomRef());if(q.getVisible()&&!q.getPressed()&&!r.hasClass("sapUshellPinButton")){e.preventDefault();var v=sap.ui.getCore().byId("appFinderSearch");v.focus();}},onsapskipback:function(e){var q=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(q.getVisible()&&!q.getPressed()){e.preventDefault();q.focus();}}});this.oCatalogsContainer.onAfterRendering=function(){var e=sap.ui.getCore().byId('catalogTilesDetailedPage');if(!this.getBusy()){e.setBusy(false);jQuery.sap.measure.end("FLP:AppFinderLoadingStartToEnd");}else{e.setBusy(true);}jQuery("#catalogTilesDetailedPage-cont").scroll(function(){var q=sap.ui.getCore().byId('catalogTilesDetailedPage'),r=q.getScrollDelegate(),v=r.getScrollTop(),w=r.getMaxScrollTop();if(w-v<=30+3*t.oController.PagingManager.getTileHeight()&&t.oController.bIsInProcess===false){t.oController.bIsInProcess=true;t.oController.allocateNextPage();setTimeout(function(){t.oController.bIsInProcess=false;},0);}});};this.wrapCatalogsContainerInDetailPage=function(e,I){var q=new sap.m.Page(I,{showHeader:false,showFooter:false,showNavButton:false,content:[new b({translucent:true,content:e}).addStyleClass("sapUshellCatalogPage")]});return q;},this.getCatalogContainer=function(){return this.oCatalogsContainer;};new sap.m.Page({showHeader:false,showFooter:false,showNavButton:false,content:[new b({translucent:true,content:[k,this.getCatalogContainer()]}).addStyleClass("sapUshellCatalogPage")]});var n=this.wrapCatalogsContainerInDetailPage([k,this.getCatalogContainer()],'catalogTilesDetailedPage'),p=new sap.m.Page('catalogMessagePage',{showHeader:false,showFooter:false,showNavButton:false,content:[this.oMessagePage]});var s=new sap.m.BusyIndicator('catalogSelectBusyIndicator',{size:"1rem"});this.splitApp=new sap.m.SplitApp('catalogViewMasterDetail',{masterPages:[s,this.oCatalogSelect],detailPages:[n,p]});document.toSearch=function(){this.splitApp.toDetail('catalogTilesSearchPage');}.bind(this);document.toDetail=function(){this.splitApp.toDetail('catalogTilesDetailedPage');}.bind(this);document.toMessage=function(){this.splitApp.toDetail('catalogMessagePage');}.bind(this);return this.splitApp;},_calculateDetailPageId:function(){var s=this.getModel('subHeaderModel');var S=s.getProperty('/search/searchMode');var t=s.getProperty('/tag/tagMode');var n=this.getModel().getProperty("/catalogsNoDataText")?true:false;var i;if(S||t){i=this.getController().bSearchResults?'catalogTilesDetailedPage':'catalogMessagePage';}else if(n){i="catalogMessagePage";}else{i="catalogTilesDetailedPage";}return i;},getControllerName:function(){return"sap.ushell.components.appfinder.Catalog";}});},false);},"sap/ushell/components/appfinder/Component.js":function(){sap.ui.define(['sap/ushell/components/CatalogsManager','sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/homepage/ComponentKeysHandler','sap/m/routing/Router','sap/ushell/UserActivityLog','sap/ushell/Config','sap/ushell/bootstrap/common/common.load.model',"sap/ushell/components/SharedComponentUtils"],function(C,r,U,a,R,b,c,m,s){"use strict";return U.extend("sap.ushell.components.appfinder.Component",{metadata:{routing:{config:{viewType:"JS",controlAggregation:"detailPages",controlId:"catalogViewMasterDetail",clearAggregation:false,routerClass:R,async:true},routes:[]},version:"${version}",library:"sap.ushell.components.flp",dependencies:{libs:["sap.m"]},config:{semanticObject:'Shell',action:'home',title:r.i18n.getText("homeBtn_tooltip"),fullWidth:true,hideLightBackground:true}},parseOldCatalogParams:function(u){var p=jQuery.sap.getUriParameters(u).mParams,v,k;for(k in p){if(p.hasOwnProperty(k)){v=p[k][0];p[k]=v.indexOf('/')!==-1?encodeURIComponent(v):v;}}return p;},handleNavigationFilter:function(n){var S=sap.ushell.Container.getService("URLParsing").parseShellHash(n),p;if(S&&S.semanticObject==='shell'&&S.action==='catalog'){p=this.parseOldCatalogParams(n);setTimeout(function(){this.getRouter().navTo("catalog",{filters:JSON.stringify(p)});}.bind(this),0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}return this.oShellNavigation.NavigationFilterStatus.Continue;},createContent:function(){this.oRouter=this.getRouter();this.isEmbedded=!sap.ushell.Container.isMock;this.oModel=m.getModel();this.setModel(this.oModel);var h,S,p,o,P=c.last("/core/shell/enablePersonalization");if(P){this.oRouter.addRoute({name:"userMenu",pattern:"userMenu/:filters:"});this.oRouter.addRoute({name:"sapMenu",pattern:"sapMenu/:filters:"});this.oRouter.addRoute({name:"catalog",pattern:["catalog/:filters:","",":filters:"]});s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");}var d={model:this.oModel,router:this.oRouter};this.oCatalogsManager=new C("dashboardMgr",d);this.setModel(r.i18nModel,"i18n");s.toggleUserActivityLog();this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");h=hasher.getHash();S=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(S&&S.semanticObject==='shell'&&S.action==='catalog'){p=this.parseOldCatalogParams(h);o=this.getMetadata().getConfig();this.oShellNavigation.toExternal({target:{semanticObject:o.semanticObject,action:o.action}});this.getRouter().navTo("catalog",{filters:JSON.stringify(p)});}var A=sap.ui.view({id:"appFinderView",viewName:"sap.ushell.components.appfinder.AppFinder",type:"JS",async:true});return A;},exit:function(){this.oCatalogsManager.destroy();m.unsubscribeEventHandlers();}});});},"sap/ushell/components/appfinder/EasyAccess.controller.js":function(){sap.ui.define(["sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/datajs"],function(O,a){"use strict";sap.ui.controller("sap.ushell.components.appfinder.EasyAccess",{DEFAULT_URL:"/sap/opu/odata/UI2",DEFAULT_NUMBER_OF_LEVELS:3,SEARCH_RESULTS_PER_REQUEST:100,onInit:function(){var t=this;this.translationBundle=sap.ushell.resources.i18n;this.oView=this.getView();var e=this.oView.getModel("easyAccessSystemsModel");var s=e.bindProperty("/systemSelected");s.attachChange(t.adjustUiOnSystemChange.bind(this));this.menuName=this.oView.getViewData().menuName;this.systemId=null;this.easyAccessCache={};this.easyAccessModel=new sap.ui.model.json.JSONModel();this.oView.hierarchyFolders.setModel(this.easyAccessModel,"easyAccess");this.oView.hierarchyApps.setModel(this.easyAccessModel,"easyAccess");var S=this.oView.getModel("subHeaderModel");var T=S.bindProperty("/openCloseSplitAppButtonToggled");T.attachChange(t.handleToggleButtonModelChanged.bind(this));if(this.oView.getViewData().enableSearch){var o=S.bindProperty("/search");o.attachChange(t.handleSearchModelChanged.bind(this));}this.checkIfSystemSelectedAndLoadData();},onAfterRendering:function(){setTimeout(function(){this.oView.hierarchyApps.getController()._updateAppBoxedWithPinStatuses();}.bind(this),0);},checkIfSystemSelectedAndLoadData:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;this.loadMenuItemsFirstTime(this.oView.getViewData().menuName,s);}},navigateHierarchy:function(p,f){this.oView.hierarchyFolders.setBusy(false);var e=this.easyAccessModel.getProperty(p?p:"/");if(typeof e.folders!="undefined"){this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);return;}this.oView.hierarchyFolders.setBusy(true);this.getMenuItems(this.menuName,this.systemId,e.id,e.level).then(function(p,r){this.easyAccessModel.setProperty(p+"/folders",r.folders);this.easyAccessModel.setProperty(p+"/apps",r.apps);this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);this.oView.hierarchyFolders.setBusy(false);}.bind(this,p),function(b){this.handleGetMenuItemsError(b);}.bind(this));},handleSearch:function(s){var i=!this.hierarchyAppsSearchResults;if(i){this.hierarchyAppsSearchResults=new sap.ui.view(this.getView().getId()+"hierarchyAppsSearchResults",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.HierarchyApps",height:"100%",viewData:{easyAccessSystemsModel:this.oView.getModel("easyAccessSystemsModel"),getMoreSearchResults:this.getMoreSearchResults.bind(this)}});this.easyAccessSearchResultsModel=new sap.ui.model.json.JSONModel();this.easyAccessSearchResultsModel.setSizeLimit(10000);this.hierarchyAppsSearchResults.setModel(this.easyAccessSearchResultsModel,"easyAccess");this.hierarchyAppsSearchResults.setBusyIndicatorDelay(this.getView().BUSY_INDICATOR_DELAY);this.hierarchyAppsSearchResults.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyAppsSearchResults.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));this.hierarchyAppsSearchResults.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oView.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));}this.searchResultFrom=0;this.oView.splitApp.getCurrentDetailPage().setBusy(true);this.easyAccessSearchResultsModel.setProperty("/apps",[]);this.easyAccessSearchResultsModel.setProperty("/total",0);this._getSearchResults(s,this.searchResultFrom).then(function(r){r.results.forEach(function(e){var b=sap.ushell.Container.getService("Bookmark");b.countBookmarks(e.url).then(function(c){e.bookmarkCount=c;});});this.easyAccessSearchResultsModel.setProperty("/apps",r.results);this.easyAccessSearchResultsModel.setProperty("/total",r.count);this.searchResultFrom=r.results.length;if(i){this.oView.splitApp.addDetailPage(this.hierarchyAppsSearchResults);}this.hierarchyAppsSearchResults.updateResultSetMessage(parseInt(r.count,10),true);this.oView.splitApp.getCurrentDetailPage().setBusy(false);if(this.oView.splitApp.getCurrentDetailPage()!==this.hierarchyAppsSearchResults){this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyAppsSearchResults");}}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.splitApp.getCurrentDetailPage().setBusy(false);}.bind(this));},getMoreSearchResults:function(){if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true);}var s=this.oView.getModel("subHeaderModel");var S=s.getProperty("/search/searchTerm");this._getSearchResults(S,this.searchResultFrom).then(function(r){var c=this.easyAccessSearchResultsModel.getProperty("/apps");var n=c.slice();Array.prototype.push.apply(n,r.results);this.easyAccessSearchResultsModel.setProperty("/apps",n);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(false);}this.searchResultFrom=n.length;}.bind(this),function(e){this.handleGetMenuItemsError(e);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true);}}.bind(this));},_getSearchResults:function(s,f){var d=new jQuery.Deferred();var S=this._getODataRequestForSearchUrl(this.menuName,this.systemId,s,f);var r={requestUri:S};var c=this._callODataService(r,this.handleSuccessOnReadFilterResults);c.done(function(b){d.resolve(b);});c.fail(function(e){d.reject(e);});return d.promise();},getSystemNameOrId:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){return s.name||s.id;}return;},adjustUiOnSystemChange:function(){var c=this.easyAccessModel.getData();if(this.systemId&&c&&c.id){this.easyAccessCache[this.systemId]=c;}var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;var n=this.easyAccessCache[this.systemId];if(n){this.easyAccessModel.setData(n);this.navigateHierarchy("",false);}else{this.oView.hierarchyFolders.setBusy(true);this.oView.hierarchyApps.setBusy(true);this.loadMenuItemsFirstTime(this.menuName,s);}}},handleToggleButtonModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var b=s.getProperty("/openCloseSplitAppButtonVisible");var B=s.getProperty("/openCloseSplitAppButtonToggled");var S=this.getView().splitApp;if(b){if(B&&!S.isMasterShown()){S.showMaster();}else if(S.isMasterShown()){S.hideMaster();}}},handleSearchModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var A=s.getProperty("/activeMenu");if(this.getView().getId().indexOf(A)===-1){return;}var S=s.getProperty("/search/searchTerm");var b=s.getProperty("/search/searchMode");if(b){sap.ui.getCore().byId('appFinderSearch').getCustomData()[0].setValue(this.getView().getId()+"hierarchyAppsSearchResults");if(S){this.handleSearch(S);}}else{sap.ui.getCore().byId('appFinderSearch').getCustomData()[0].setValue('');this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyApps");}},loadMenuItemsFirstTime:function(m,s){return this.getMenuItems(m,s.systemId,"",0).then(function(r){r.text=s.systemName||s.systemId;this.easyAccessModel.setData(r);this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);this.navigateHierarchy("",false);}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.hierarchyFolders.updatePageBindings("/",false);this.oView.hierarchyApps.getController().updatePageBindings("/");}.bind(this));},handleGetMenuItemsError:function(e){var E=this.getErrorMessage(e);sap.ui.require(["sap/m/MessageBox"],function(M){M.error(E);});this.easyAccessModel.setData("");this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);},getErrorMessage:function(e){var m="";if(this.menuName=="SAP_MENU"){m=this.translationBundle.getText("easyAccessSapMenuNameParameter");}else if(this.menuName=="USER_MENU"){m=this.translationBundle.getText("easyAccessUserMenuNameParameter");}if(e){if(e.message){return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e.message]);}else{return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e]);}}else{return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgNoReason",m);}},getMenuItems:function(m,s,e,b,n){var d=new jQuery.Deferred();if(m!="SAP_MENU"&&m!="USER_MENU"){d.reject("Invalid menuType parameter");return d.promise();}if(typeof s!=="string"||s===""){d.reject("Invalid systemId parameter");return d.promise();}if(typeof e!=="string"){d.reject("Invalid entityId parameter");return d.promise();}if(typeof b!=="number"){d.reject("Invalid entityLevel parameter");return d.promise();}if(n&&typeof n!=="number"){d.reject("Invalid numberOfNextLevels parameter");return d.promise();}if(e==""){b=0;}var N;var M=this.getView().getModel();var c=M.getProperty("/easyAccessNumbersOfLevels");if(c){N=c;}else if(n){N=n;}else{N=this.DEFAULT_NUMBER_OF_LEVELS;}var l=b+N+1;var S=this._getODataRequestUrl(m,s,e,l);var r={requestUri:S};var C=this._callODataService(r,this.handleSuccessOnReadMenuItems,{systemId:s,entityId:e,iLevelFilter:l});C.done(function(f){d.resolve(f);});C.fail(function(f){d.reject(f);});return d.promise();},_callODataService:function(r,s,S){var l,i;var t=this;var d=new jQuery.Deferred();if(!S){S={};}if(sap.ushell.Container){l=sap.ushell.Container&&sap.ushell.Container.getUser().getLanguage();if((l)&&(r.requestUri.indexOf("sap-language=")==-1)){r.requestUri=r.requestUri+(r.requestUri.indexOf("?")>=0?"&":"?")+"sap-language="+l;}i=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";}sap.ui.require(["sap/ui/thirdparty/datajs"],function(){a.read({requestUri:r.requestUri,headers:{"Cache-Control":"no-cache, no-store, must-revalidate","Pragma":"no-cache","Expires":"0","Accept-Language":(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||"","sap-client":(i||""),"sap-language":(l||"")}},function(R,o){if(R&&R.results&&o&&o.statusCode===200){var b=s.bind(t,R,S)();d.resolve(b);}},function(m){d.reject(m);});});return d.promise();},handleSuccessOnReadMenuItems:function(r,p){var R=this._oDataResultFormatter(r.results,p.systemId,p.entityId,p.iLevelFilter);return R;},handleSuccessOnReadFilterResults:function(r){var u;r.results.forEach(function(R,i){u=this._appendSystemToUrl(R,this.systemId);R.url=u;}.bind(this));return{results:r.results,count:r.__count};},_appendSystemToUrl:function(d,s){if(d.url){return d.url+(d.url.indexOf('?')>0?'&':'?')+'sap-system='+s;}},_oDataResultFormatter:function(r,s,e,l){var f={};var R={};if(e==""){R={id:"root",text:"root",level:0,folders:[],apps:[]};f.root=R;}else{R={id:e,folders:[],apps:[]};f[e]=R;}var o;for(var i=0;i<r.length;i++){o=r[i];var p;if(o.level=="01"){p=f["root"];}else{p=f[o.parentId];}var m={id:o.Id,text:o.text,subtitle:o.subtitle,icon:o.icon,level:parseInt(o.level,10)};if(o.type=='FL'){m.folders=[];m.apps=[];if(o.level==l-1){m.folders=undefined;m.apps=undefined;}if(p&&p.folders){p.folders.push(m);}f[o.Id]=m;}else{m.url=this._appendSystemToUrl(o,s);if(p&&p.apps){p.apps.push(m);}}}return R;},_getODataRequestUrl:function(m,s,e,l){var S=this._getServiceUrl(m);var L;if(l<10){L="0"+l;}else{L=l.toString();}var b="";if(e){if(decodeURIComponent(e)===e){e=encodeURIComponent(e);}b="('"+e+"')/AllChildren";}S=S+";o="+s+"/MenuItems"+b+"?$filter=level lt '"+L+"'&$orderby=level,text";return S;},_getODataRequestForSearchUrl:function(m,s,t,f){var S=this._getServiceUrl(m);var n=this.SEARCH_RESULTS_PER_REQUEST;t=this._removeWildCards(t);f=!f?0:f;t=O.formatValue(t,"Edm.String");S=S+";o="+s+"/MenuItems"+"?$filter=type ne 'FL' and substringof("+t+", text) or substringof("+t+", subtitle) or substringof("+t+", url)&$orderby=text,subtitle,url&$inlinecount=allpages&$skip="+f+"&$top="+n;return S;},_getServiceUrl:function(m){var s;var M=this.getView().getModel();if(m=="SAP_MENU"){var S=M.getProperty("/sapMenuServiceUrl");if(S){s=S;}else{s=this.DEFAULT_URL+"/EASY_ACCESS_MENU";}}else if(m=="USER_MENU"){var u=M.getProperty("/userMenuServiceUrl");if(u){s=u;}else{s=this.DEFAULT_URL+"/USER_MENU";}}return s;},_removeWildCards:function(t){return t.replace(/\*/g,"");}});},false);},"sap/ushell/components/appfinder/EasyAccess.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.EasyAccess",{BUSY_INDICATOR_DELAY:1000,createContent:function(c){this.oResourceBundle=sap.ushell.resources.i18n;this.setModel(this.getViewData().easyAccessSystemsModel,"easyAccessSystemsModel");this.setModel(this.getViewData().subHeaderModel,"subHeaderModel");this.setModel(this.getViewData().parentComponent.getModel());this.hierarchyFolders=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.HierarchyFolders",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(c),easyAccessSystemsModel:this.getModel("easyAccessSystemsModel"),subHeaderModel:this.getModel("subHeaderModel")}});this.hierarchyFolders.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyFolders.addStyleClass("sapUshellHierarchyFolders");this.hierarchyFolders.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"navigation",writeToDom:true}));this.hierarchyFolders.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oResourceBundle.getText("easyAccessListNavigationContainer"),writeToDom:true}));this.hierarchyApps=new sap.ui.view(this.getId()+"hierarchyApps",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.HierarchyApps",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(c)}});this.hierarchyApps.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyApps.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyApps.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));this.hierarchyApps.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));this.splitApp=new sap.m.SplitApp({masterPages:this.hierarchyFolders,detailPages:this.hierarchyApps});this.splitApp.setInitialMaster(this.hierarchyFolders);this.splitApp.setInitialDetail(this.hierarchyApps);return this.splitApp;},getControllerName:function(){return"sap.ushell.components.appfinder.EasyAccess";}});},false);},"sap/ushell/components/appfinder/GroupListPopover.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.appfinder.GroupListPopover",{onInit:function(){var v=this.getView(),g=v.getViewData().groupData;this.oPopoverModel=new sap.ui.model.json.JSONModel({userGroupList:g});this.oPopoverModel.setSizeLimit(9999);v.oPopover.setModel(this.oPopoverModel);},okButtonHandler:function(e){e.preventDefault();e._bIsStopHandlers=true;var v=this.getView(),u=this.oPopoverModel.getProperty("/userGroupList"),r={addToGroups:[],removeFromGroups:[],newGroups:[],allGroups:u};u.forEach(function(g){if(g.selected===g.initiallySelected){return;}if(g.selected){r.addToGroups.push(g.oGroup);}else{r.removeFromGroups.push(g.oGroup);}});if(v.newGroupInput&&v.newGroupInput.getValue().length){r.newGroups.push(v.newGroupInput.getValue());}v.oPopover.close();v.deferred.resolve(r);},_closeButtonHandler:function(e){e._bIsStopHandlers=true;var v=this.getView();v.oPopover.close();v.deferred.reject();},_createGroupAndSaveTile:function(t,n){var c=sap.ushell.components.getCatalogsManager(),d=jQuery.Deferred(),p=c.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(a){d.resolve(a);});return d;},groupListItemClickHandler:function(o){o.oSource.setSelected(!o.oSource.getSelected());var i=o.oSource.getBindingContextPath(),p=o.oSource.getModel(),s=o.oSource.getSelected()?true:false;this.addRemoveTileFromGroup(i,p,s);},getGroupsBeforeChanges:function(p){var m=this.getView().getViewData().sourceContext.oModel;return m.getProperty(p+"/associatedGroups");},getGroupsAfterChanges:function(p){var g=sap.ui.getCore().byId("groupsPopover");return g.getModel().getProperty("/userGroupList");},checkboxClickHandler:function(o){var v=this.getView(),p=v.getViewData().sourceContext.sPath,g=this.getGroupsBeforeChanges(p),G=this.getGroupsAfterChanges(),l=sap.ushell.Container.getService("LaunchPage"),P=o.oSource.getModel(),s=o.getParameter("selected"),a=0,i=0,d=false,b;while(l.isGroupLocked(G[i].oGroup.object)===true){i++;}for(i;i<G.length;i++){var e=false;if(d===true){break;}for(a=0;a<g.length;a++){if(l.getGroupId(G[i].oGroup.object)===g[a]){e=true;if(G[i].selected===false){d=true;b=("/userGroupList/"+i);this.addRemoveTileFromGroup(b,P,s);break;}}}if(G[i].selected===true&&e===false){b=("/userGroupList/"+i);this.addRemoveTileFromGroup(b,P,s);break;}}},addRemoveTileFromGroup:function(i,p,t){var v=this.getView(),c=this.getView().getViewData().catalogController,a=this.getView().getViewData().catalogModel,T=this.getView().getViewData().sourceContext,g=a.getProperty("/groups"),b=g.indexOf(p.getProperty(i).oGroup),G=new sap.ui.model.Context(a,"/groups/"+b),l=sap.ushell.Container.getService("LaunchPage"),s=l.getGroupId(a.getProperty("/groups/"+b).object);if(t){var A=c._addTile(T,G);A.done(function(e){var f=v.getViewData().sourceContext,C=a.getProperty(f+"/associatedGroups");C.push(s);a.setProperty(f+"/associatedGroups",C);});}else{var d=T.getModel().getProperty(T.getPath()).id,r=c._removeTile(d,b);r.done(function(e){var f=v.getViewData().sourceContext,C=a.getProperty(f+"/associatedGroups"),h=jQuery.inArray(s,C);if(h>=0){C.splice(h,1);}a.setProperty(f+"/associatedGroups",C);});}},_switchGroupsPopoverButtonPress:function(){var g="groupsPopover-popover";if(sap.ui.Device.system.phone){g="groupsPopover-dialog";}if(sap.ui.getCore().byId(g).getContent()[0].getId()==="newGroupNameInput"){var u=this.oPopoverModel.getProperty("/userGroupList"),r={addToGroups:[],removeFromGroups:[],newGroups:[],allGroups:u};if(this.getView().newGroupInput.getValue().length){r.newGroups.push(this.getView().newGroupInput.getValue());}this.getView().oPopover.close();this.getView().deferred.resolve(r);}else{this._closeButtonHandler(this);}},_navigateToCreateNewGroupPane:function(){var v=this.getView();if(!v.headBarForNewGroup){v.headBarForNewGroup=v._createHeadBarForNewGroup();}if(!v.newGroupInput){v.newGroupInput=v._createNewGroupInput();}v.oPopover.removeAllContent();v.oPopover.addContent(v.newGroupInput);v.oPopover.setCustomHeader(v.headBarForNewGroup);v.oPopover.setContentHeight("");setTimeout(function(){v.oPopover.getBeginButton().setText(sap.ushell.resources.i18n.getText("okDialogBtn"));},0);if(v.oPopover.getEndButton()){v.oPopover.getEndButton().setVisible(true);}if(sap.ui.getCore().byId("groupsPopover-popover")&&(sap.ui.getCore().byId("groupsPopover-popover").getContent()[0].getId()==="newGroupNameInput")&&!v.oPopover.getEndButton()){v.oPopover.setEndButton(v._createCancelButton());}setTimeout(function(){v.oPopover.getEndButton().setText(sap.ushell.resources.i18n.getText("cancelBtn"));},0);if(v.getViewData().singleGroupSelection){this._setFooterVisibility(true);}setTimeout(function(){v.newGroupInput.focus();},0);},setSelectedStart:function(s){this.start=s;},_afterCloseHandler:function(){var v=this.getView(),c=this.getView().getViewData().catalogModel;if(c){var s=c.getProperty(this.getView().getViewData().sourceContext+"/associatedGroups");this.showToastMessage(s,this.start);}v.oGroupsContainer.destroy();if(v.headBarForNewGroup){v.headBarForNewGroup.destroy();}if(v.newGroupInput){v.newGroupInput.destroy();}v.oPopover.destroy();v.destroy();},showToastMessage:function(e,s){var a=0,r=0,f,b,c={};e.forEach(function(d,g){c[d]=d;});s.forEach(function(g,i){if(c[g.id]){if(g.selected===false){a++;f=g.title;}}else{if(g.selected===true){r++;b=g.title;}}});var m=this.getView().getViewData().catalogController.prepareDetailedMessage(this.getView().getViewData().title,a,r,f,b);if(m){sap.m.MessageToast.show(m,{duration:6000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}},_backButtonHandler:function(){var v=this.getView();v.oPopover.removeAllContent();if(v.getViewData().singleGroupSelection){this._setFooterVisibility(false);}if(!sap.ui.Device.system.phone){v.oPopover.setContentHeight(v.iPopoverDataSectionHeight+"px");}else{v.oPopover.setContentHeight("100%");}v.oPopover.setVerticalScrolling(true);v.oPopover.setHorizontalScrolling(false);v.oPopover.addContent(v.oGroupsContainer);v.oPopover.setTitle(sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"));v.oPopover.setCustomHeader();v.newGroupInput.setValue('');if(sap.ui.getCore().byId("groupsPopover-popover")&&(sap.ui.getCore().byId("groupsPopover-popover").getContent()[0].getId()!="newGroupNameInput")){v.oPopover.getEndButton().setVisible(false);};setTimeout(function(){v.oPopover.getBeginButton().setText(sap.ushell.resources.i18n.getText("close"));},0);},_setFooterVisibility:function(v){var f=sap.ui.getCore().byId("groupsPopover-footer");if(f){f.setVisible(v);}}});},false);},"sap/ushell/components/appfinder/GroupListPopover.view.js":function(){sap.ui.define(["sap/ushell/Config"],function(C){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.GroupListPopover",{createContent:function(c){this.oPopover=sap.ui.getCore().byId("groupsPopover");if(this.oPopover){return;}this.iPopoverDataSectionHeight=192;this.oGroupsContainer=this._createPopoverContainer(this.iPopoverDataSectionHeight);this.oLaunchPageService=sap.ushell.Container.getService("LaunchPage");this.oPopover=new sap.m.ResponsivePopover({id:"groupsPopover",placement:"Auto",title:sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:'20rem',beginButton:this._createCloseButton(),content:this.oGroupsContainer,afterClose:this.getController()._afterCloseHandler.bind(this.getController())});this.oPopover.setInitialFocus('newGroupItem');},open:function(o){if(document.body.clientHeight-o.getDomRef().getBoundingClientRect().bottom>=310){this.oPopover.setPlacement("Bottom");}this.oPopover.openBy(o);if(this.getViewData().singleGroupSelection){this.getController()._setFooterVisibility(false);}this.deferred=jQuery.Deferred();return this.deferred.promise();},_createPopoverContainer:function(p){var a=sap.ui.getCore().byId("popoverContainer");if(a){return a;}var n=this._createNewGroupUiElements(),g=this._createPopoverGroupList();a=new sap.m.ScrollContainer({id:"popoverContainer",horizontal:false,vertical:true,content:[n,g]});if(!sap.ui.Device.system.phone){a.setHeight((p-2)+"px");}else{a.setHeight("100%");}return a;},_createNewGroupUiElements:function(){var n=sap.ui.getCore().byId("newGroupItemList");if(n){return n;}var N=new sap.m.StandardListItem({id:"newGroupItem",title:sap.ushell.resources.i18n.getText("newGroup_listItemText"),type:"Navigation",press:this.getController()._navigateToCreateNewGroupPane.bind(this.getController())});n=new sap.m.List("newGroupItemList",{});if(C.last("/core/extension/enableHelp")){N.addStyleClass('help-id-newGroupItem');}n.addItem(N);n.addEventDelegate({onsapdown:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#popoverContainer .sapMListModeMultiSelect li, #popoverContainer .sapMListModeSingleSelectMaster li").first();j.focus();}catch(e){}},onsaptabnext:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#closeButton");j.focus();}catch(e){}}});return n;},_createNewGroupInput:function(){var n=sap.ui.getCore().byId("newGroupNameInput");if(n){return n;}n=new sap.m.Input({id:"newGroupNameInput",type:"Text",placeholder:sap.ushell.resources.i18n.getText("new_group_name")});n.setValueState(sap.ui.core.ValueState.None);n.setPlaceholder(sap.ushell.resources.i18n.getText("new_group_name"));n.enabled=true;n.addStyleClass("sapUshellCatalogNewGroupInput");return n;},_createHeadBarForNewGroup:function(){var h=sap.ui.getCore().byId("oHeadBar");if(h){return h;}var b=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:this.getController()._backButtonHandler.bind(this.getController()),tooltip:sap.ushell.resources.i18n.getText("newGroupGoBackBtn_tooltip")});b.addStyleClass("sapUshellCatalogNewGroupBackButton");h=new sap.m.Bar("oHeadBar",{contentLeft:[b],contentMiddle:[new sap.m.Label({text:sap.ushell.resources.i18n.getText("newGroup_popoverTitle")})]});return h;},getControllerName:function(){return"sap.ushell.components.appfinder.GroupListPopover";},_createPopoverGroupList:function(){var l=new sap.m.DisplayListItem({label:"{oGroup/title}",selected:"{selected}",tooltip:"{oGroup/title}",type:sap.m.ListType.Active,press:this.getController().groupListItemClickHandler.bind(this.getController())});var u=[];u.push(new sap.ui.model.Filter("oGroup/isGroupLocked",sap.ui.model.FilterOperator.EQ,false));if(this.getViewData().enableHideGroups){u.push(new sap.ui.model.Filter("oGroup/isGroupVisible",sap.ui.model.FilterOperator.EQ,true));}var s=this.getViewData().singleGroupSelection,L=new sap.m.List({mode:s?sap.m.ListMode.SingleSelectMaster:sap.m.ListMode.MultiSelect,items:{path:"/userGroupList",template:l,filters:u}});if(s){L.attachSelect(this.getController().okButtonHandler.bind(this.getController()));}else{L.attachSelectionChange(this.getController().checkboxClickHandler.bind(this.getController()));}L.addEventDelegate({onsapup:function(E){try{E.preventDefault();var j,c=jQuery(":focus");if(c.index()==0){j=jQuery("#newGroupItem");j.focus();E._bIsStopHandlers=true;}}catch(e){jQuery.sap.log.error("Groups popup Accessibility `up` key failed");}}});return L;},_createOkButton:function(){var o=new sap.m.Button({id:"okButton",press:this.getController().okButtonHandler.bind(this.getController()),text:sap.ushell.resources.i18n.getText("okBtn")});o.addEventDelegate({onsaptabprevious:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#newGroupItem");if(!j.length){j=jQuery("#newGroupNameInput input");}j.focus();}catch(e){jQuery.sap.log.error("Groups popup Accessibility `shift-tab` key failed");}}});return o;},_createCancelButton:function(){return new sap.m.Button({id:"cancelButton",press:this.getController()._closeButtonHandler.bind(this.getController()),text:sap.ushell.resources.i18n.getText("cancelBtn")});},_createCloseButton:function(){return sap.ui.getCore().byId("closeButton")||new sap.m.Button({id:"closeButton",press:this.getController()._switchGroupsPopoverButtonPress.bind(this.getController()),text:sap.ushell.resources.i18n.getText(sap.ushell.resources.i18n.getText("close"))});}});},false);},"sap/ushell/components/appfinder/HierarchyApps.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.appfinder.HierarchyApps",{onInit:function(){var e=this.getView().getViewData().easyAccessSystemsModel;if(e){this.getView().setModel(e,"easyAccessSystems");}},getCrumbsData:function(p,m){var a=p.split("/");a.splice(a.length-2,2);var n=[];while(a.length){var P=a.join("/");var t=m.getProperty(P+"/text");n.unshift({text:t,path:P});a.splice(a.length-2,2);}return n;},_updateAppBoxedWithPinStatuses:function(p){var v=this.getView();if(!p){p=v.layout.getBinding("items").getPath();}var e=v.getModel("easyAccess");var a=e.getProperty(p)?e.getProperty(p):[];var b=sap.ushell.Container.getService("Bookmark");var c=a.map(function(d){return b.countBookmarks(d.url).then(function(f){d.bookmarkCount=f;return d;});});jQuery.when.apply(jQuery,c).then(function(){var a=Array.prototype.slice.call(arguments);e.setProperty(p,a);});},updatePageBindings:function(p){this.getView().layout.bindAggregation("items","easyAccess>"+p+"/apps",this.getView().oItemTemplate);this._updateAppBoxedWithPinStatuses(p+"/apps");this.getView().breadcrumbs.bindProperty("currentLocationText","easyAccess>"+p+"/text");var c=this.getCrumbsData(p,this.getView().getModel("easyAccess"));this.getView().crumbsModel.setProperty("/crumbs",c);var n=this.getView().getModel("easyAccess").getProperty(p+'/apps');this.getView().updateResultSetMessage(n.length,false);},onAppBoxPressed:function(e){if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}var u=e.getSource().getProperty("url");if(u&&u.indexOf("#")===0){hasher.setHash(u);}},_handleSuccessMessage:function(a,p){var m;var n=p.addToGroups?p.addToGroups.length:0;var b=p.newGroups?p.newGroups.length:0;var t=n+b;if(t===1){var g;if(n===1){g=p.addToGroups[0].title;}else{g=p.newGroups[0];}m=sap.ushell.resources.i18n.getText("appAddedToSingleGroup",[a.text,g]);}else{m=sap.ushell.resources.i18n.getText("appAddedToSeveralGroups",[a.text,t]);}if(t>0){sap.m.MessageToast.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}return m;},_prepareErrorMessage:function(e,a){var g,A,f,n=0,c=false,m;for(var i in e){g=e[i].group;A=e[i].action;if(A=='addBookmark_ToExistingGroup'){n++;if(n==1){f=g.title;}}else if(A=='addBookmark_ToNewGroup'){n++;if(n==1){f=g;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_app_operation_add_to_group",parameters:[a,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_app_operation_add_to_several_groups",parameters:[a]});}return m;},_handleBookmarkAppPopoverResponse:function(a,p){var b=[];p.newGroups.forEach(function(g){b.push(this._createGroupAndAddBookmark(g,a));}.bind(this));p.addToGroups.forEach(function(g){b.push(this._addBookmark(g,a));}.bind(this));jQuery.when.apply(jQuery,b).then(function(){var r=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(a,p,r);}.bind(this));},_handlePopoverGroupsActionPromises:function(a,p,r){var e=r.filter(function(b,i,r){return!b.status;});if(e.length){var E=this._prepareErrorMessage(e,a.text);var c=sap.ushell.components.getCatalogsManager();c.notifyOnActionFailure(E.messageId,E.parameters);return;}this._updateAppBoxedWithPinStatuses();this._handleSuccessMessage(a,p);},_createGroupAndAddBookmark:function(n,a){var c=sap.ushell.components.getCatalogsManager();var d=jQuery.Deferred(),r={};var b=c.createGroup(n);b.done(function(e){var f=this._addBookmark(e.getObject(),a,true);f.done(function(g){d.resolve(g);}).fail(function(){r={group:n,status:0,action:'addBookmark_ToNewGroup'};d.resolve(r);});}.bind(this)).fail(function(){r={group:n,status:0,action:'addBookmark_NewGroupCreation'};d.resolve(r);});return d.promise();},_addBookmark:function(g,a,i){var b=sap.ushell.Container.getService("Bookmark");var d=jQuery.Deferred(),r={};var c=b.addBookmark({url:a.url,title:a.text,subtitle:a.subtitle,icon:a.icon},g.object);var e=i?"addBookmark_ToNewGroup":"addBookmark_ToExistingGroup";c.done(function(){r={group:g,status:1,action:e};d.resolve(r);}).fail(function(){r={group:g,status:0,action:e};d.resolve(r);});return d.promise();},showSaveAppPopover:function(e){var m=this.getView().getModel();var a=e.oSource.getParent().getBinding("title").getContext().getObject();if(!!m.getProperty("/groupContext").path){var g=m.getProperty("/groupContext").path;var G=m.getProperty(g);var c={newGroups:[],addToGroups:[G]};this._handleBookmarkAppPopoverResponse(a,c);return;}var b=m.getProperty("/groups").map(function(f){return{selected:false,initiallySelected:false,oGroup:f};});var p=new sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.GroupListPopover",viewData:{groupData:b,enableHideGroups:m.getProperty("/enableHideGroups"),enableHelp:m.getProperty("/enableHelp"),singleGroupSelection:true}});var d=p.open(e.oSource);d.then(this._handleBookmarkAppPopoverResponse.bind(this,a));},resultTextFormatter:function(s,t){var r=sap.ushell.resources.i18n;if(s){var S=s.systemName?s.systemName:s.systemId;var R="";if(t){R=r.getText('search_easy_access_results',[t,S]);}return R;}return"";},showMoreResultsVisibilityFormatter:function(a,t){if(a&&a.length<t){return true;}return false;},showMoreResultsTextFormatter:function(a,t){if(!a||!t){return"";}var c=a.length;return sap.ushell.resources.i18n.getText('EasyAccessSearchResults_ShowMoreResults',[c,t]);}});},true);},"sap/ushell/components/appfinder/HierarchyApps.view.js":function(){sap.ui.define(['sap/ushell/ui/appfinder/AppBox','sap/ushell/ui/appfinder/PinButton'],function(A,P){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.HierarchyApps",{createContent:function(c){this.oController=c;function g(G,b,s,a,d){var r=sap.ushell.resources.i18n,t;if(s){var i=jQuery.inArray(a,G);var T=i!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";t=r.getText(T,d);}else{t=b?r.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):r.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip");}return t;}var p=new P({icon:'sap-icon://pushpin-off',selected:{path:"easyAccess>bookmarkCount",formatter:function(b){return(!!b);}},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(G,b,s,a,d){return g(G,b,s,a,d);}},press:c.showSaveAppPopover.bind(c)});p.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));p.addStyleClass("sapUshellPinButton");this.oItemTemplate=new A({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:p,tabindex:{path:"easyAccess>text"},press:[c.onAppBoxPressed,c]});this.oItemTemplate.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new sap.m.FlexBox(this.getId()+'_hierarchyAppsLayout',{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:sap.m.FlexWrap.Wrap});this.layout.addDelegate({onAfterRendering:function(){var i=this.getItems();var u=function(a){if(a.getKey()==="tabindex"){a.setValue("0");}};if(i.length){i[0].getCustomData().forEach(u);i[0].getPinButton().getCustomData().forEach(u);}}.bind(this.layout)});this.oMessagePage=new sap.m.MessagePage({visible:false,showHeader:false,text:sap.ushell.resources.i18n.getText('EasyAccessMenu_NoAppsToDisplayMessagePage_Text'),description:''});var C=[];if(this.getViewData()&&this.getViewData().navigateHierarchy){this.crumbsModel=new sap.ui.model.json.JSONModel({crumbs:[]});this.linkTemplate=new sap.m.Link({text:"{crumbs>text}",press:function(e){var a=e.oSource.getBinding("text").getContext().getObject();this.getViewData().navigateHierarchy(a.path,false);}.bind(this)});this.breadcrumbs=new sap.m.Breadcrumbs({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");C.push(this.breadcrumbs);}else{this.resultText=new sap.m.Text({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:c.resultTextFormatter.bind(c)}}).addStyleClass('sapUshellEasyAccessSearchResultText');this.resultText.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"heading",writeToDom:true}));this.resultText.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-level",value:"3",writeToDom:true}));C.push(this.resultText);this.showMoreResultsLink=new sap.m.Button({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:c.showMoreResultsTextFormatter.bind(c)},press:this.getViewData().getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:c.showMoreResultsVisibilityFormatter.bind(c)},type:sap.m.ButtonType.Transparent});}C.push(this.oMessagePage);C.push(this.layout);if(this.showMoreResultsLink){C.push(this.showMoreResultsLink);}return C;},updateResultSetMessage:function(i,I){var e;if(I){e='noFilteredItems';}else{e='EasyAccessMenu_NoAppsToDisplayMessagePage_Text';}if(i){if(I){this.resultText.updateProperty('text');this.resultText.setVisible(true);}this.layout.setVisible(true);this.oMessagePage.setVisible(false);}else{if(I){this.resultText.setVisible(false);}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var E=sap.ushell.resources.i18n.getText(e);this.oMessagePage.setText(E);}},setShowMoreResultsBusy:function(b){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(b);}},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyApps";}});},true);},"sap/ushell/components/appfinder/HierarchyFolders.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.appfinder.HierarchyFolders",{onInit:function(){this.oDialog=null;this.getView().setModel(this.getView().getViewData().easyAccessSystemsModel,"easyAccessSystems");this.getView().setModel(this.getView().getViewData().subHeaderModel,"subHeaderModel");this.getSelectedSystem().then(function(s){if(s){this.setSystemSelected(s);}else{this.setSystemSelected(undefined);this.onSystemSelectionPress();}}.bind(this),function(){this.setSystemSelected(undefined);this.onSystemSelectionPress();});},onExit:function(){if(this.oDialog){this.destroyDialog();}},onAfterRendering:function(){var j=jQuery('#'+this.getView().getId());j.on("click",function(e){this.exitSearchMode();}.bind(this));},getPersonalizer:function(){if(this.oPersonalizer){return this.oPersonalizer;}var p=sap.ushell.Container.getService("Personalization");var c=sap.ui.core.Component.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:"appfinder.HierarchyFolders",item:"lastSelectedSystem"};this.oPersonalizer=p.getPersonalizer(P,s,c);return this.oPersonalizer;},getSelectedSystem:function(){var d=new jQuery.Deferred();var s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length===1){var e=s[0];this.setSystemSelectedInPersonalization(e);d.resolve(e);}else{this.getSelectedSystemInPersonalization().then(function(p){if(p){var S=false;for(var i=0;i<s.length;i++){if((s[i].systemName&&s[i].systemName===p.systemName)||(s[i].systemId===p.systemId)){S=true;d.resolve(p);}}if(!S){d.resolve();this.setSystemSelectedInPersonalization();}}else{d.resolve();}}.bind(this));}return d.promise();},setSystemSelected:function(s){this.getView().getModel("easyAccessSystems").setProperty("/systemSelected",s);this.setSystemSelectedInPersonalization(s);},getSelectedSystemInPersonalization:function(){var d=new jQuery.Deferred();this.getPersonalizer().getPersData().then(function(p){if(p){d.resolve(p);}else{d.resolve();}},function(e){jQuery.sap.log.error("Failed to get selected system from the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders");d.reject();});return d.promise();},setSystemSelectedInPersonalization:function(s){this.getPersonalizer().setPersData(s).fail(function(e){jQuery.sap.log.error("Failed to save selected system in the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders");});},onSystemSelectionPress:function(){var s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length<=1){return;}var d=this.createDialog();d.open();},createDialog:function(){var t=this;if(!this.oDialog){this.oDialog=new sap.m.SelectDialog({id:"systemSelectionDialog",title:t.getView().translationBundle.getText("easyAccessSelectSystemDialogTitle"),multiSelect:false,contentHeight:"20rem",items:{path:"/systemsList",template:new sap.m.StandardListItem({adaptTitleSize:false,title:{parts:["systemName","systemId"],formatter:t.titleFormatter},description:{parts:["systemName","systemId"],formatter:t.descriptionFormatter},selected:{parts:["systemName","systemId"],formatter:t.selectedFormatter.bind(this)}})},confirm:t.systemConfirmHandler.bind(t),search:t.systemSearchHandler.bind(t),cancel:t.destroyDialog.bind(t)});this.oDialog.setModel(this.getView().getModel("easyAccessSystems"));}return this.oDialog;},destroyDialog:function(){this.oDialog.destroyItems();this.oDialog.destroy();this.oDialog=null;},systemConfirmHandler:function(e){var i=e.getParameters().selectedItem;var s=i.getBindingContext().getObject();this.setSystemSelected(s);this.destroyDialog();},systemSearchHandler:function(e){var v=e.getParameter("value");var f=new sap.ui.model.Filter("systemName",sap.ui.model.FilterOperator.Contains,v);var F=new sap.ui.model.Filter("systemId",sap.ui.model.FilterOperator.Contains,v);var s=new sap.ui.model.Filter({filters:[F,f],and:false});var b=e.getSource().getBinding("items");b.filter(s);},titleFormatter:function(s,a){return s||a;},descriptionFormatter:function(s,a){if(s){return a;}return null;},selectedFormatter:function(s,a){var u=this.getView().getModel("easyAccessSystems").getProperty("/systemSelected");if(!u){return false;}if(s){return(u.systemName===s&&u.systemId===a);}else{return(u.systemId===a);}},systemSelectorTextFormatter:function(s){if(s){if(s.systemName){return s.systemName;}else{return s.systemId;}}else{return this.getView().translationBundle.getText("easyAccessSelectSystemTextWithoutSystem");}},exitSearchMode:function(){var s=this.getView().getModel('subHeaderModel');s.setProperty('/search/searchMode',false);s.refresh(true);}});},true);},"sap/ushell/components/appfinder/HierarchyFolders.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.HierarchyFolders",{createContent:function(c){var t=this;this.translationBundle=sap.ushell.resources.i18n;this.treePath="";this.systemSelectorText=new sap.m.Text({text:{path:"easyAccessSystemsModel>/systemSelected",formatter:c.systemSelectorTextFormatter.bind(c)}});this.oItemTemplate=new sap.m.StandardListItem({title:"{easyAccess>text}",type:"Navigation",press:function(){var p=this.getBindingContextPath();t.getViewData().navigateHierarchy(p,true);}});this.oList=new sap.m.List({showSeparators:sap.m.ListSeparators.None,items:{path:"easyAccess>"+this.treePath+"/folders",template:this.oItemTemplate},updateFinished:function(){var l=this.getItems();t.finishEasyAccessAnimation(true);l.forEach(function(L){L.onsapspace=L.onsapenter;});},noDataText:{path:"easyAccessSystemsModel>/systemSelected",formatter:function(s){if(s){return t.translationBundle.getText("easyAccessFolderWithNoItems");}}}});this.pageMenu=new sap.m.Page({showNavButton:false,enableScrolling:true,headerContent:new sap.m.Bar({contentLeft:[new sap.m.Label({text:{parts:["easyAccessSystemsModel>/systemSelected"],formatter:c.systemSelectorTextFormatter.bind(c)}})],contentRight:[new sap.m.Button({text:this.translationBundle.getText("action_change"),type:sap.m.ButtonType.Transparent,visible:{path:"easyAccessSystemsModel>/systemsList",formatter:function(s){return s.length>1;}},press:[c.onSystemSelectionPress,c]})]}).addStyleClass("sapUshellEasyAccessMasterPageHeader"),content:this.oList});this.pageMenu.attachNavButtonPress(function(){var p=this.treePath.split("/");var n=p.slice(0,p.length-2);this.getViewData().navigateHierarchy(n.join("/"),false);}.bind(this));return this.pageMenu;},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyFolders";},finishEasyAccessAnimation:function(){if(!this.jqFolderClone){return;}if(this.forwardAnimation){this.pageMenu.$().addClass("forwardToViewAnimation");this.jqFolderClone.addClass("forwardOutOfViewAnimation");}else{this.pageMenu.$().addClass("backToViewAnimation");this.jqFolderClone.addClass("backOutOfViewAnimation");}this.jqFolderClone.on("animationend",function(){this.pageMenu.$().removeClass("forwardToViewAnimation backToViewAnimation");var b=this.pageMenu.$().find(".sapMBarLeft button");if(b.length){b.focus();}else{setTimeout(function(){this.pageMenu.$().find("header + header").focus();}.bind(this));}if(this.jqFolderClone){this.jqFolderClone.remove();}}.bind(this));},prepareEasyAccessAnimation:function(f){this.forwardAnimation=f;this.jqFolderClone=this.pageMenu.$().clone().removeAttr("data-sap-ui").css("z-index","1");this.jqFolderClone.find("*").removeAttr("id");this.pageMenu.$().parent().append(this.jqFolderClone);},updatePageBindings:function(p,f){var s=p.split("/").length>2;this.treePath=p;this.pageMenu.setShowNavButton(s);this.pageMenu.setShowSubHeader(!s);this.prepareEasyAccessAnimation(f);this.oList.bindItems("easyAccess>"+p+"/folders",this.oItemTemplate);}});},true);}},"Component-preload");
