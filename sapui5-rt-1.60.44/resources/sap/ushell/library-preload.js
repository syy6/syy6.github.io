sap.ui.predefine('sap/ushell/CanvasShapesManager',function(){"use strict";var P=function(x,y){this.x=x||0;this.y=y||0;};
P.prototype.getDistance=function(p){var x=this.x-p.x;var y=this.y-p.y;return Math.floor(Math.sqrt(x*x+y*y));};
P.prototype.getSegment=function(o){if(this.x<=o.x&&this.y<=o.y){return 1;}if(this.x<=o.x&&this.y>=o.y){return 2;}if(this.x>=o.x&&this.y>=o.y){return 3;}if(this.x>=o.x&&this.y<=o.y){return 4;}};
P.prototype.offset=function(o,O){this.x=this.x+o;this.y=this.y+O;};
var R=function(x,X,y,Y){this.x={min:x,max:X};this.y={min:y,max:Y};};var c=(window.innerWidth>0)?window.innerWidth:screen.width;var a=(window.innerHeight>0)?window.innerHeight:screen.height;var b={cpr1:new R(0,c/4,0,a/4),cpr2:new R(c/2,c,0,a/4),cpr3:new R(c/4,3*c/4,a*3/4,a)};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(d){return setTimeout(d,1);};var m=function(){this.init();};m.prototype={radiusRange:{min:800,max:900},init:function(){this.Id="shell-shapes";var d={cpr1:b.cpr1,cpr2:b.cpr2,cpr3:b.cpr3},e,f,s,g,i=sap.ui.Device.system.phone;this.shapes=[];var h;for(h in d){e=Math.random(this.radiusRange.max-this.radiusRange.min)+this.radiusRange.min;f=this.getRandomPoint(d[h]);s=this._getSquarePoints(e,f);g=this._calculatebezierCurves(e,s);this.shapes.push({bezierCurves:g,centerPoint:f});}for(var j in this.shapes){var v=this._generateRandomAmorphousShapeValues();this.shapes[j]=this.makeAmorphousShape(this.shapes[j],v.edge0.edgeNum,v.edge0.xOffSet,v.edge0.yOffSet,v.edge0.xStretch);this.shapes[j]=this.makeAmorphousShape(this.shapes[j],v.edge1.edgeNum,v.edge1.xOffSet,v.edge1.yOffSet,v.edge1.xStretch);}sap.ui.Device.resize.attachHandler(this.resizeHandler,this);if(!i){sap.ui.getCore().getEventBus().subscribe("launchpad","afterSwitchState",this.startAnimation,this);}},_generateRandomAmorphousShapeValues:function(){var v={edge0:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0},edge1:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0}};var n=this._getRandomInt(0,3);for(var e in v){v[e].edgeNum=n;v[e].xOffSet=this._getRandomInt(200,400);v[e].yOffSet=this._getRandomInt(-200,-400);n+=this._getRandomInt(0,1)<0.5?-1:1;if(n===-1){n=3;}if(n===4){n=0;}}n=this._getRandomInt(0,1);if(n<0.5){n=n<0.25?0:1;v["edge"+n].xStretch=this._getRandomInt(0,200);}return v;},getPoint:function(x,y){return new P(x,y);},getRandomPoint:function(d){var x=Math.floor(Math.random()*(d.x.max-d.x.min)+d.x.min),y=Math.floor(Math.random()*(d.y.max-d.y.min)+d.y.min);return new P(x,y);},resizeHandler:function(){var d=jQuery('#'+this.Id)[0];if(d){d.width=window.innerWidth;d.height=window.innerHeight;this.drawShapes();}},enableAnimationDrawing:function(e){this._enableDrawing=e;},startAnimation:function(e,d,D){if(!this._enableDrawing){return;}var f=2500;var t,g=this.shapes[0].centerPoint.x,h=this.shapes[1].centerPoint.x,i=this.shapes[2].centerPoint.x,j,k=parseFloat(jQuery("body").css("font-size")),T=D.getParameter('to'),F=D.getParameter('from');if(!this.leftOffset||!this.rigthOffset){this.setTranslateOffset();}if(sap.ui.getCore().getConfiguration().getRTL()){if(T==="RightCenter"){T="LeftCenter";}else if(T==="LeftCenter"){T="RightCenter";}if(F==="RightCenter"){F="LeftCenter";}else if(F==="LeftCenter"){F="RightCenter";}}if(T==="RightCenter"){j=1;t=this.rigthOffset*k;}if(T==="LeftCenter"){j=-1;t=this.leftOffset*k;}if(T==="Center"){if(F==="RightCenter"){j=-1;t=this.rigthOffset*k;}if(F==="LeftCenter"){j=1;t=this.leftOffset*k;}}this.animateTranslation(g,h,i,t,f,j);},setTranslateOffset:function(){var t=sap.ui.core.theming.Parameters,l,s;if(window.matchMedia('(min-width: 1920px)').matches){l=t.get('sapUshellLeftViewPortWidthL');s=t.get('sapUshellRightViewPortWidthXXL');}else if(window.matchMedia('(min-width: 1600px)').matches){l=t.get('sapUshellLeftViewPortWidthM');s=t.get('sapUshellRightViewPortWidthXL');}else if(window.matchMedia('(min-width: 1440px)').matches){l=t.get('sapUshellLeftViewPortWidthM');s=t.get('sapUshellRightViewPortWidthL');}else if(window.matchMedia('(min-width: 1280px)').matches){l=t.get('sapUshellLeftViewPortWidthM');s=t.get('sapUshellRightViewPortWidthM');}else if(window.matchMedia('(min-width: 1024px)').matches){l=t.get('sapUshellLeftViewPortWidthXS');s=t.get('sapUshellRightViewPortWidthS');}else if(window.matchMedia('(min-width: 601px)').matches){l=t.get('sapUshellLeftViewPortWidthXS');s=t.get('sapUshellRightViewPortWidthXS');}else if(window.matchMedia('(max-width : 600px)').matches){l=(jQuery(window).width()/parseFloat(jQuery("body").css("font-size")))+"";s=(jQuery(window).width()/parseFloat(jQuery("body").css("font-size")))+"";}this.leftOffset=parseInt(l.replace("rem",""),10);this.rigthOffset=parseInt(s.replace("rem",""),10);},animateTranslation:function(d,e,f,t,g,h){var s=new Date().getTime();var i=s+g,j=t,k=t/4,l=t/2,o,n,p,q=this;var u=function(){var v=new Date().getTime(),w=1-Math.pow(1-Math.min((g-(i-v))/g,1),5);o=d+h*k*w;n=e+h*l*w;p=f+h*j*w;q.updateShapes(o,n,p);q.drawShapes();if(w<1){r(u);}};return u();},updateShapes:function(o,d,e){var t=this,f=this.shapes[0].centerPoint.x-o,g=this.shapes[1].centerPoint.x-d,h=this.shapes[2].centerPoint.x-e;this.shapes[0].centerPoint=new P(o,this.shapes[0].centerPoint.y);this.shapes[1].centerPoint=new P(d,this.shapes[1].centerPoint.y);this.shapes[2].centerPoint=new P(e,this.shapes[2].centerPoint.y);this.shapes[0].bezierCurves.forEach(function(i,I){t.shapes[0].bezierCurves[I].controlPoint1=new P(i.controlPoint1.x+f,i.controlPoint1.y);t.shapes[0].bezierCurves[I].controlPoint2=new P(i.controlPoint2.x+f,i.controlPoint2.y);t.shapes[0].bezierCurves[I].startPoint=new P(i.startPoint.x+f,i.startPoint.y);t.shapes[0].bezierCurves[I].endPoint=new P(i.endPoint.x+f,i.endPoint.y);});this.shapes[1].bezierCurves.forEach(function(i,I){t.shapes[1].bezierCurves[I].controlPoint1=new P(i.controlPoint1.x+g,i.controlPoint1.y);t.shapes[1].bezierCurves[I].controlPoint2=new P(i.controlPoint2.x+g,i.controlPoint2.y);t.shapes[1].bezierCurves[I].startPoint=new P(i.startPoint.x+g,i.startPoint.y);t.shapes[1].bezierCurves[I].endPoint=new P(i.endPoint.x+g,i.endPoint.y);});this.shapes[2].bezierCurves.forEach(function(i,I){t.shapes[2].bezierCurves[I].controlPoint1=new P(i.controlPoint1.x+h,i.controlPoint1.y);t.shapes[2].bezierCurves[I].controlPoint2=new P(i.controlPoint2.x+h,i.controlPoint2.y);t.shapes[2].bezierCurves[I].startPoint=new P(i.startPoint.x+h,i.startPoint.y);t.shapes[2].bezierCurves[I].endPoint=new P(i.endPoint.x+h,i.endPoint.y);});},makeAmorphousShape:function(s,d,x,y,e){var f,g,h;switch(d){case 0:f=s.bezierCurves[0].controlPoint1;g=s.bezierCurves[3].controlPoint2;h=this._rotatePoints(x,y,f,g);s.bezierCurves[0].controlPoint1=h[0];s.bezierCurves[3].controlPoint2=h[1];break;case 1:f=s.bezierCurves[0].controlPoint2;g=s.bezierCurves[1].controlPoint1;h=this._rotatePoints(x,y,f,g);s.bezierCurves[0].controlPoint2=h[0];s.bezierCurves[1].controlPoint1=h[1];break;case 2:f=s.bezierCurves[1].controlPoint2;g=s.bezierCurves[2].controlPoint1;h=this._rotatePoints(x,y,f,g);s.bezierCurves[1].controlPoint2=h[0];s.bezierCurves[2].controlPoint1=h[1];break;case 3:f=s.bezierCurves[2].controlPoint2;g=s.bezierCurves[3].controlPoint1;h=this._rotatePoints(x,y,f,g);s.bezierCurves[2].controlPoint2=h[0];s.bezierCurves[3].controlPoint1=h[1];break;}return s;},_rotatePoints:function(d,e,f,g){var x,y,h=[];x=f.x+d;y=f.y+e;h.push(new P(x,y));x=g.x-d;y=g.y-e;h.push(new P(x,y));return h;},_getSquarePoints:function(d,e){var s=[];s[0]=new P(e.x+d,e.y);s[1]=new P(e.x,e.y-d);s[2]=new P(e.x-d,e.y);s[3]=new P(e.x,e.y+d);return s;},_getRandomInt:function(d,e){if(d==0&&e==1){return Math.random();}return Math.floor(Math.random()*(e-d+1))+d;},_calculatebezierCurves:function(d,s){var e=[];var f;var g;var h,i;i=s[0];h=s[1];f=new P(i.x,i.y-d/2);g=new P(i.x-d/2,i.y-d);e.push({startPoint:i,endPoint:h,controlPoint1:f,controlPoint2:g});i=s[1];h=s[2];f=new P(i.x-d/2,i.y);g=new P(i.x-d,i.y+d/2);e.push({startPoint:i,endPoint:h,controlPoint1:f,controlPoint2:g});i=s[2];h=s[3];f=new P(i.x,i.y+d/2);g=new P(i.x+d/2,i.y+d);e.push({startPoint:i,endPoint:h,controlPoint1:f,controlPoint2:g});i=s[3];h=s[0];f=new P(i.x+d/2,i.y);g=new P(i.x+d,i.y-d/2);e.push({startPoint:i,endPoint:h,controlPoint1:f,controlPoint2:g});return e;},drawShapes:function(){var d=jQuery('#'+this.Id)[0],B=sap.ui.core.theming.Parameters.get("sapUshellShellBackgroundShapesColor");if(d&&d.getContext){var e=d.getContext('2d'),s,f,g,h;e.clearRect(0,0,c*2,a*2);if(B){for(var j=0;j<this.shapes.length;j++){e.beginPath();s=this.shapes[j].bezierCurves[0].startPoint;e.moveTo(s.x,s.y);for(var i=0;i<this.shapes[j].bezierCurves.length;i++){f=this.shapes[j].bezierCurves[i].endPoint;g=this.shapes[j].bezierCurves[i].controlPoint1;h=this.shapes[j].bezierCurves[i].controlPoint2;e.bezierCurveTo(Math.floor(g.x),Math.floor(g.y),Math.floor(h.x),Math.floor(h.y),Math.floor(f.x),Math.floor(f.y));}e.closePath();e.fillStyle=B;e.fill();}}}}};var C=new m();return C;},true);
sap.ui.predefine('sap/ushell/SessionHandler',['sap/ushell/resources','sap/m/Dialog','sap/m/Button','sap/m/Text','sap/ui/model/json/JSONModel'],function(r,d,b,t,J){"use strict";var S=function(){this.init=function(c){jQuery.sap.measure.start("SessionTimeoutInit","Inititialize Session Timeout","FLP_SHELL");this.config=c;this.oModel=new J();if(this.config.enableAutomaticSignout===undefined){this.config.enableAutomaticSignout=false;}if(this.config.sessionTimeoutReminderInMinutes===undefined){this.config.sessionTimeoutReminderInMinutes=0;}this.oModel.setProperty("/SessionRemainingTimeInSeconds",this.config.sessionTimeoutReminderInMinutes*60);this.counter=0;this.oKeepAliveDialog=undefined;this.oLocalStorage=jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.local.session");this.putTimestampInStorage(this._getCurrentDate());this.attachUserEvents();this.notifyServer();this.notifyUserInactivity();jQuery.sap.measure.end("SessionTimeoutInit");};this.notifyUserInactivity=function(){var a=this._getCurrentDate()-new Date(this.getTimestampFromStorage()),c=a/(1000*60),e=this.config.sessionTimeoutIntervalInMinutes-this.config.sessionTimeoutReminderInMinutes;if(c<e){setTimeout(this.notifyUserInactivity.bind(this),(e-c)*60*1000);}else{if(this.config.sessionTimeoutReminderInMinutes>0){this.detachUserEvents();this.handleSessionRemainingTime(this.config.sessionTimeoutReminderInMinutes*60,true);this.oContinueWorkingDialog=this.createContinueWorkingDialog();this.oContinueWorkingDialog.open();this.putContinueWorkingVisibilityInStorage(true);}else{this.handleSessionOver();}}};this.handleSessionOver=function(){clearTimeout(this.notifyServerTimer);sap.ui.getCore().getEventBus().publish("launchpad","sessionTimeout");if(this.config.enableAutomaticSignout===true){this.logout();}else{this.createSessionExpiredDialog().open();}};this.notifyServer=function(){var a=this._getCurrentDate()-new Date(this.getTimestampFromStorage()),c=a/(1000*60);if(c<=this.config.sessionTimeoutIntervalInMinutes){sap.ushell.Container.sessionKeepAlive();}else{}this.notifyServerTimer=setTimeout(this.notifyServer.bind(this),this.config.sessionTimeoutIntervalInMinutes*60*1000);};this.handleSessionRemainingTime=function(R){var a=this;var s=this.getContinueWorkingVisibilityFromStorage();if(s!=undefined&&s===false&&this.oContinueWorkingDialog&&this.oContinueWorkingDialog.isOpen()){this.continueWorkingButtonPressHandler();}if(R===0){if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close();}this.handleSessionOver();}else{R=R-1;this.oModel.setProperty("/SessionRemainingTimeInSeconds",R);this.remainingTimer=setTimeout(a.handleSessionRemainingTime.bind(a,R,false),1000);}};this.createContinueWorkingDialog=function(){var a=this;this.oMessageVBox=new sap.m.VBox();this.oSessionKeepAliveLabel=new t({text:{parts:["/SessionRemainingTimeInSeconds"],formatter:function(s){var i=s>60,T,c,m;T=i?r.i18n.getText("sessionTimeoutMessage_units_minutes"):r.i18n.getText("sessionTimeoutMessage_units_seconds");c=i?Math.ceil(s/60):s;if(a.config.enableAutomaticSignout){m=r.i18n.getText("sessionTimeoutMessage_kioskMode_main",[c,T]);}else{m=r.i18n.getText("sessionTimeoutMessage_main",[c,T]);}return m;}}});this.oMessageVBox.addItem(this.oSessionKeepAliveLabel);if(this.config.enableAutomaticSignout===false){this.oLostDataReminder=new t({text:r.i18n.getText("sessionTimeoutMessage_unsavedData")});this.oMessageVBox.addItem(this.oLostDataReminder);}this.oSessionKeepAliveLabel.setModel(this.oModel);this.oSessionKeepAliveDialog=new d("sapUshellKeepAliveDialog",{title:r.i18n.getText("sessionTimeoutMessage_title"),type:'Message',state:sap.ui.core.ValueState.Warning,content:this.oMessageVBox,beginButton:this.getContinueWorkingButton(),afterClose:function(){this.oSessionKeepAliveDialog.destroy();}.bind(this)});if(this.config.enableAutomaticSignout===true){this.oSignOutButton=new b({text:r.i18n.getText("logoutBtn_title"),tooltip:r.i18n.getText("logoutBtn_tooltip"),press:this.logout.bind(this)});this.oSessionKeepAliveDialog.setEndButton(this.oSignOutButton);}return this.oSessionKeepAliveDialog;};this.getContinueWorkingButton=function(){var a=this;return new b({text:r.i18n.getText("sessionTimeoutMessage_continue_button_title"),press:a.continueWorkingButtonPressHandler.bind(a)});};this.continueWorkingButtonPressHandler=function(){if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close();}clearTimeout(this.remainingTimer);this.putTimestampInStorage(this._getCurrentDate());this.notifyUserInactivity();this.attachUserEvents();this.putContinueWorkingVisibilityInStorage(false);};this.createSessionExpiredDialog=function(){this.oSessionExpiredDialog=new d("sapUshellSessioTimedOutDialog",{title:r.i18n.getText("sessionExpiredMessage_title"),type:'Message',state:sap.ui.core.ValueState.Warning,content:new t({text:r.i18n.getText("sessionExpiredMessage_main")}),beginButton:this.getReloadButton(),afterClose:function(){this.oSessionExpiredDialog.destroy();}.bind(this)});return this.oSessionExpiredDialog;};this.getReloadButton=function(){var a=this;return new b({text:r.i18n.getText("sessionExpiredMessage_reloadPage_button_title"),press:function(){a.oSessionExpiredDialog.close();location.reload();}});};this.attachUserEvents=function(){jQuery(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));jQuery(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));jQuery(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this));};this.detachUserEvents=function(){jQuery(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");jQuery(document).off("keydown.sessionTimeout");jQuery(document).off("touchstart.sessionTimeout");};this.putTimestampInStorage=function(a){jQuery.sap.measure.average("SessionTimeoutPutLocalStorage","Put timestamp in local storage Average","FLP_SHELL");this.oLocalStorage.put("lastActivityTime",a);jQuery.sap.measure.end("SessionTimeoutPutLocalStorage");};this.putContinueWorkingVisibilityInStorage=function(v){this.oLocalStorage.put("showContinueWorkingDialog",v);};this.getContinueWorkingVisibilityFromStorage=function(){return this.oLocalStorage.get("showContinueWorkingDialog");};this.getTimestampFromStorage=function(){return this.oLocalStorage.get("lastActivityTime");};this.userActivityHandler=function(e){if(this.oUserActivityTimer!==undefined){return;}var a=this;this.oUserActivityTimer=setTimeout(function(){a.putTimestampInStorage(a._getCurrentDate());a.oUserActivityTimer=undefined;},1000);};this._getCurrentDate=function(){return new Date();};this.logout=function(){var l=new sap.ushell.ui.launchpad.LoadingDialog({text:""});this.detachUserEvents();clearTimeout(this.oUserActivityTimer);clearTimeout(this.remainingTimer);clearTimeout(this.notifyServerTimer);l.openLoadingScreen();l.showAppInfo(r.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.logout();};};return S;},true);
sap.ui.predefine('sap/ushell/UIActions',function(){"use strict";var U=function(c){if(!c||!c.rootSelector||!c.containerSelector||!c.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.");}this.animationDuration=null;this.captureStart=null;this.captureMove=null;this.captureEnd=null;this.clickCallback=null;this.clickEvent=null;this.clickHandler=null;this.clone=null;this.cloneClass=null;this.container=null;this.contextMenuEvent=null;this.debug=null;this.defaultDragStartEvent=null;this.defaultMouseMoveEvent=null;this.deltaTop=0;this.disabledDraggableSelector=null;this.dragAndScrollCallback=null;this.dragAndScrollDuration=null;this.dragAndScrollTimer=null;this.draggable=null;this.placeHolderClass=null;this.draggableSelector=null;this.draggableSelectorExclude=null;this.doubleTapCallback=null;this.doubleTapDelay=null;this.element=null;this.endDragAndScrollCallback;this.endX=null;this.endY=null;this.isLayoutEngine=null;this.isTouch=null;this.isCombi=null;this.lastElement=null;this.lastTapTime=null;this.lockMode=null;this.log=null;this.mode=null;this.mouseDownEvent=null;this.mouseMoveEvent=null;this.mouseUpEvent=null;this.moveTolerance=null;this.moveX=null;this.moveY=null;this.noop=null;this.onDragStartUIHandler=null;this.onDragEndUIHandler=null;this.preventClickFlag;this.preventClickTimeoutId;this.scrollContainer=null;this.scrollContainerSelector=null;this.scrollEvent=null;this.scrollTimer=null;this.startX=null;this.startY=null;this.switchModeDelay=null;this.tapsNumber=null;this.timer=null;this.scrollHandler=null;this.touchCancelEvent=null;this.dragCallback=null;this.onBeforeCreateClone=null;this.endCallback=null;this.touchEndEvent=null;this.touchMoveEvent=null;this.startCallback=null;this.touchStartEvent=null;this.wrapper=null;this.wrapperRect=null;this.scrollCallback=null;this.draggableElement;this.offsetLeft=0;this.elementsToCapture=null;this.init=function(c){this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.noop=function(){};this.isLayoutEngine=c.isLayoutEngine||false;if(this.isLayoutEngine){this.moveDraggable=this.noop;}this.isTouch=c.isTouch?!!c.isTouch:false;this.isCombi=c.isCombi?!!c.isCombi:false;this.container=document.querySelector(c.containerSelector);this.scrollContainerSelector=c.scrollContainerSelector||c.containerSelector;this.switchModeDelay=c.switchModeDelay||1500;this.dragAndScrollDuration=c.dragAndScrollDuration||230;this.moveTolerance=c.moveTolerance===0?0:c.moveTolerance||10;this.draggableSelector=c.draggableSelector;this.draggableSelectorBlocker=c.draggableSelectorBlocker||c.rootSelector;this.draggableSelectorExclude=c.draggableSelectorExclude;this.mode='normal';this.debug=c.debug||false;this.root=document.querySelector(c.rootSelector)||document.querySelector("#canvas");this.animationDuration=c.animationDuration||330;this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.lockMode=false;this.placeHolderClass=c.placeHolderClass||"";this.cloneClass=c.cloneClass||"";this.deltaTop=c.deltaTop||0;this.wrapper=c.wrapperSelector?document.querySelector(c.wrapperSelector):this.container.parentNode;this.clickCallback=typeof c.clickCallback==='function'?c.clickCallback:this.noop;this.startCallback=typeof c.startCallback==='function'?c.startCallback:this.noop;this.doubleTapCallback=typeof c.doubleTapCallback==='function'?c.doubleTapCallback:this.noop;this.endCallback=typeof c.endCallback==='function'?c.endCallback:this.noop;this.dragCallback=typeof c.dragCallback==='function'?c.dragCallback:this.noop;this.onBeforeCreateClone=typeof c.onBeforeCreateClone==='function'?c.onBeforeCreateClone:this.noop;this.dragAndScrollCallback=typeof c.dragAndScrollCallback==='function'?c.dragAndScrollCallback:this.noop;this.endDragAndScrollCallback=typeof c.endDragAndScrollCallback==='function'?c.endDragAndScrollCallback:this.noop;this.scrollCallback=typeof c.scrollCallback==='function'?c.scrollCallback:this.noop;this.doubleTapDelay=c.doubleTapDelay||500;this.wrapperRect=this.wrapper.getBoundingClientRect();this.scrollEvent='scroll';this.touchStartEvent='touchstart';this.touchMoveEvent='touchmove';this.touchEndEvent='touchend';this.mouseDownEvent='mousedown';this.mouseMoveEvent='mousemove';this.mouseUpEvent='mouseup';this.contextMenuEvent='contextmenu';this.touchCancelEvent='touchcancel';this.defaultDragStartEvent='dragstart';this.defaultMouseMoveEvent='mousemove';this.clickEvent='click';this.isVerticalDragOnly=c.isVerticalDragOnly||false;this.draggableElement=c.draggableElement;this.offsetLeft=c.offsetLeft;this.elementsToCapture=c.elementToCapture?jQuery(c.elementToCapture):this.root;this.disabledDraggableSelector=c.disabledDraggableSelector;this.onDragStartUIHandler=typeof c.onDragStartUIHandler==='function'?c.onDragStartUIHandler:this.noop;this.onDragEndUIHandler=typeof c.onDragEndUIHandler==='function'?c.onDragEndUIHandler:this.noop;this.defaultMouseMoveHandler=c.defaultMouseMoveHandler||function(e){e.preventDefault();};};this.forEach=function(s,a){return Array.prototype.forEach.call(s,a);};this.indexOf=function(s,i){return Array.prototype.indexOf.call(s,i);};this.insertBefore=function(s,i,r){var a,b,d;d=Array.prototype.splice;a=this.indexOf(s,i);b=this.indexOf(s,r);d.call(s,b-(a<b?1:0),0,d.call(s,a,1)[0]);};this.logToConsole=function(){window.console.log.apply(console,arguments);};this.getDraggableElement=function(a){var e,i=false,I=false;this.draggable=jQuery(this.draggableSelector,this.container);while(typeof e==='undefined'&&a!==this.root&&!jQuery(a).is(this.draggableSelectorBlocker)){i=i||jQuery(a).is(this.draggableElement)||this.draggableElement===undefined;if(!(jQuery(a).not(this.draggableSelectorExclude).length>0)){I=true;}if(!I&&i&&this.indexOf(this.draggable,a)>=0){e=a;}a=a.parentNode;}return e;};this.captureStart=function(e){var a;if(e.type==='touchstart'&&e.touches.length===1){a=e.touches[0];}else if(e.type==='mousedown'){a=e;if(e.which!=1){return;}}if(a){this.element=this.getDraggableElement(a.target);this.startX=this.moveX=a.pageX;this.startY=this.moveY=a.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.lastTapTime&&this.lastElement&&this.element&&(this.lastElement===this.element)&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2;}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element;}this.log('captureStart('+this.startX+', '+this.startY+')');}};this.startHandler=function(e){this.log('startHandler');if(this.isCombi&&!(e instanceof MouseEvent)){this.isTouchEvent=true;}clearTimeout(this.timer);delete this.timer;this.captureStart(e);if(this.element){this.startCallback(e,this.element);if(this.lockMode===false){if(this.tapsNumber===2){this.mode='double-tap';return;}if(this.isTouch||this.isTouchEvent){this.timer=setTimeout(function(){if(!jQuery(this.element).hasClass(this.disabledDraggableSelector)){this.log('mode switched to drag');this.mode='drag';this.onBeforeCreateClone(e,this.element);this.createClone();this.dragCallback(e,this.element);}else{this.onDragStartUIHandler();}this.isTouchEvent=false;}.bind(this),this.switchModeDelay);}}}}.bind(this);this.captureMove=function(e){var a;if(e.type==='touchmove'&&e.touches.length===1){a=e.touches[0];}else if(e.type==='mousemove'){a=e;}if(a){this.moveX=a.pageX;this.moveY=a.pageY;this.log('captureMove('+this.moveX+', '+this.moveY+')');}};this.moveHandler=function(e){var i;this.log('moveHandler');this.captureMove(e);if(this.element&&e.type==="mousemove"&&e.buttons===0){return this.endHandler(e);}switch(this.mode){case'normal':if((Math.abs(this.startX-this.moveX)>this.moveTolerance||Math.abs(this.startY-this.moveY)>this.moveTolerance)){if(this.isTouch||this.isTouchEvent){this.log('-> normal');clearTimeout(this.timer);delete this.timer;}else if(this.element){this.onDragStartUIHandler();if(!jQuery(this.element).hasClass(this.disabledDraggableSelector)){this.log('mode switched to drag');this.mode='drag';this.onBeforeCreateClone(e,this.element);this.createClone();}else{this.preventClick();this.element=null;}}}break;case'drag':e.preventDefault();this.onDragStartUIHandler();this.log('-> drag');if(this.isVerticalDragOnly){this.mode='vertical-drag';}else{this.mode='drag-and-scroll';}window.addEventListener(this.mouseUpEvent,this.endHandler,true);this.translateClone();this.scrollContainer=document.querySelector(this.scrollContainerSelector);this.dragAndScroll();if(!this.isTouch){this.dragCallback(e,this.element);}break;case'drag-and-scroll':e.stopPropagation();e.preventDefault();this.log('-> drag-and-scroll');i=this.dragAndScroll();this.translateClone();if(!i){this.moveDraggable();}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:i,moveX:this.moveX,moveY:this.moveY});break;case'vertical-drag':e.stopPropagation();e.preventDefault();i=this.dragAndScroll();this.translateClone();if(!i){this.moveDraggableVerticalOnly(this.moveX,this.moveY);}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:i,moveX:this.moveX,moveY:this.moveY});break;default:break;}}.bind(this);this.captureEnd=function(e){var a;if((e.type==='touchend'||e.type==='touchcancel')&&(e.changedTouches.length===1)){a=e.changedTouches[0];}else if(e.type==='mouseup'){a=e;}if(a){this.endX=a.pageX;this.endY=a.pageY;this.log('captureEnd('+this.endX+', '+this.endY+')');}};this.contextMenuHandler=function(e){if(this.isTouch){e.preventDefault();}}.bind(this);this.clickHandler=function(e){if(this.preventClickFlag){this.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(this.preventClickTimeoutId);}this.clickCallback();}.bind(this);this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){this.preventClickFlag=false;}.bind(this),100);};this.endCallbackAdapter=function(e,a,o){var b=this.endCallback.apply(null,arguments);jQuery.when(b).then(function(){this.removeClone(a,o.clone);this.onDragEndUIHandler(e);}.bind(this));this.preventClick();};this.endHandler=function(e){this.log('endHandler');this.captureEnd(e);switch(this.mode){case'normal':this.onDragEndUIHandler(e);this.log('-> normal');break;case'drag':this.log('-> drag');this.endCallbackAdapter(e,this.element,{clone:this.clone});break;case'drag-and-scroll':this.log('-> drag-and-scroll');window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.endCallbackAdapter(e,this.element,{deltaX:this.moveX-this.startX,deltaY:this.moveY-this.startY,clone:this.clone});e.stopPropagation();e.preventDefault();break;case'vertical-drag':this.log('-> vertical-drag');window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.endCallbackAdapter(e,this.element,{clone:this.clone});e.stopPropagation();e.preventDefault();break;case'double-tap':this.log('-> double-tap');this.doubleTapCallback(e,this.element);break;default:break;}clearTimeout(this.timer);delete this.timer;this.lastMoveX=0;this.lastMoveY=0;this.element=null;this.clone=null;this.mode='normal';}.bind(this);this.defaultDragStartHandler=function(e){e.preventDefault();};this.scrollHandler=function(){clearTimeout(this.scrollTimer);this.lockMode=true;this.scrollTimer=setTimeout(function(){this.lockMode=false;}.bind(this),500);}.bind(this);this.createClone=function(){var s,r;this.preventClickFlag=true;if(sap.ui.getCore().byId(this.element.id)&&sap.ui.getCore().byId(this.element.id).getBoundingRects){r=sap.ui.getCore().byId(this.element.id).getBoundingRects()[0];r.top=r.offset.y;r.left=r.offset.x;r.width+=5;}else{r=this.element.getBoundingClientRect();}this.clone=this.element.cloneNode(true);this.clone.removeAttribute("id");this.clone.removeAttribute("data-sap-ui");this.clone.className+=(' '+this.cloneClass);this.element.className+=(' '+this.placeHolderClass);s=this.clone.style;s.position='fixed';s.display='block';s.top=(r.top+this.deltaTop)+'px';s.left=r.left+'px';s.width=r.width+'px';s.zIndex='100';s.webkitTransition='-webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.mozTransition='-moz-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.msTransition='-ms-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.transition='transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.webkitTransform='translate3d(0px, 0px, 0px) ';s.mozTransform='translate3d(0px, 0px, 0px) ';s.msTransform='translate3d(0px, 0px, 0px) ';s.transform='translate3d(0px, 0px, 0px) ';this.root.appendChild(this.clone);this.log('createClone');};this.removeClone=function(e,a){this.preventClick();e.className=e.className.split(' '+this.placeHolderClass).join('');a.parentElement.removeChild(a);this.log('removeClone');};this.translateClone=function(){var d,a;d=this.moveX-this.startX;a=this.moveY-this.startY;this.clone.style.webkitTransform='translate3d('+d+'px, '+a+'px, 0px)';this.clone.style.mozTransform='translate3d('+d+'px, '+a+'px, 0px)';this.clone.style.msTransform='translate('+d+'px, '+a+'px)';this.clone.style.transform='translate3d('+d+'px, '+a+'px, 0px)';this.log('translateClone ('+d+', '+a+')');};this.dragAndScroll=function(){var d,a,s,t=this;function b(){s.webkitTransition='-webkit-transform '+a+'ms linear';s.transition='transform '+a+'ms linear';s.mozTransition='-moz-transform '+a+'ms linear';s.msTransition='-ms-transform '+a+'ms linear';s.webkitTransform='translate3d(0px, '+d+'px 0px)';s.mozTransform='translate3d(0px, '+d+'px 0px)';s.msTransform='translate3d(0px, '+d+'px 0px)';s.transform='translate3d(0px, '+d+'px 0px)';}function e(){s.webkitTransition='';s.mozTransition='';s.msTransition='';s.transition='';s.webkitTransform='';s.mozTransform='';s.msTransform='';s.transform='';t.wrapper.scrollTop-=d;}function g(){var r,h;if(t.clone){r=t.clone.getBoundingClientRect();h=t.wrapperRect.top-r.top;if(h>0){return h;}h=t.wrapper.offsetTop+t.wrapper.offsetHeight-(r.top+t.clone.offsetHeight);if(h<0){return h;}}return 0;}function i(){if(t.endDragAndScrollCallback(t.moveY)){return false;}if(d<0){return t.wrapper.getBoundingClientRect().top-(t.container.getBoundingClientRect().top+t.container.offsetHeight)+t.wrapper.offsetHeight<0;}return t.container.getBoundingClientRect().top-(t.wrapper.getBoundingClientRect().top+t.container.offsetTop)<0;}function f(){b();t.dragAndScrollTimer=setTimeout(function(){e();t.dragAndScrollTimer=undefined;if((d=g())!==0&&i()){f();}t.scrollCallback();},a);}d=g();if(d!==0&&!this.dragAndScrollTimer&&i()){a=this.dragAndScrollDuration;this.scrollContainer=this.scrollContainer||document.querySelector(this.scrollContainerSelector);s=this.scrollContainer.style;f();}this.log('dragAndScroll ('+d+')');return(d!=0)&&i();};this.moveDraggableVerticalOnly=function(){var h,i,r,m=true;this.forEach(this.draggable,function(a,b){if(!h){r=a.getBoundingClientRect();i=!(r.bottom<this.moveY||r.top>this.moveY);if(i){h=a;if(r.top+r.height/2<this.moveY){m=false;}}}}.bind(this));if(h&&this.element!==h){if(m){this.insertBefore(this.draggable,this.element,h);h.parentNode.insertBefore(this.element,h);}else{this.insertBefore(this.draggable,this.element,h.nextSibling);h.parentNode.insertBefore(this.element,h.nextSibling);}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY;}this.log('moveDraggableVerticalonly');};this.moveDraggable=function(m,a){var e,h,b,i,d,r;this.forEach(this.draggable,function(f,g){if(!h){r=f.getBoundingClientRect();i=!(r.right<this.moveX||r.left>this.moveX);d=!(r.bottom<this.moveY||r.top>this.moveY);if(i&&d){h=f;b=g;}}}.bind(this));if(h&&this.element!==h){e=this.indexOf(this.draggable,this.element);if(Math.abs(this.lastMoveX-this.moveX)>=this.moveTolerance||Math.abs(this.lastMoveY-this.moveY)>=this.moveTolerance){if(b<=e){h.parentNode.insertBefore(this.element,h);this.insertBefore(this.draggable,this.element,h);}else if(b>e){h.parentNode.insertBefore(this.element,h.nextSibling);this.insertBefore(this.draggable,this.element,this.draggable[b+1]);}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY;}}this.log('moveDraggable');};this.enable=function(){this.log('enable');this.root.addEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.addEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.root.addEventListener(this.defaultDragStartEvent,this.defaultDragStartHandler,true);this.root.addEventListener(this.defaultMouseMoveEvent,this.defaultMouseMoveHandler,true);this.wrapper.addEventListener(this.scrollEvent,this.scrollHandler,false);if(this.elementsToCapture.length){var t=this;this.elementsToCapture.each(function(){this.addEventListener(t.touchStartEvent,t.startHandler,false);this.addEventListener(t.touchEndEvent,t.endHandler,false);this.addEventListener(t.touchCancelEvent,t.endHandler,false);this.addEventListener(t.mouseDownEvent,t.startHandler,false);this.addEventListener(t.mouseUpEvent,t.endHandler,false);});}else{this.elementsToCapture.addEventListener(this.touchStartEvent,this.startHandler,false);this.elementsToCapture.addEventListener(this.touchEndEvent,this.endHandler,false);this.elementsToCapture.addEventListener(this.touchCancelEvent,this.endHandler,false);this.elementsToCapture.addEventListener(this.mouseDownEvent,this.startHandler,false);this.elementsToCapture.addEventListener(this.mouseUpEvent,this.endHandler,false);}return this;};this.delete=function(){this.log('delete');this.disable();this.dragCallback=null;this.onBeforeCreateClone=null;this.endCallback=null;this.startCallback=null;this.scrollCallback=null;this.doubleTapCallback=null;this.clickCallback=null;this.dragAndScrollCallback=null;delete this;};this.disable=function(){this.log('disable');if(this.elementsToCapture.length){var t=this;this.elementsToCapture.each(function(){this.removeEventListener(t.touchStartEvent,t.startHandler,false);this.removeEventListener(t.touchEndEvent,t.endHandler,false);this.removeEventListener(t.touchCancelEvent,t.endHandler,false);this.removeEventListener(t.mouseDownEvent,t.startHandler,false);this.removeEventListener(t.mouseUpEvent,t.endHandler,false);});}else{this.elementsToCapture.removeEventListener(this.touchStartEvent,this.startHandler,false);this.elementsToCapture.removeEventListener(this.touchEndEvent,this.endHandler,false);this.elementsToCapture.removeEventListener(this.touchCancelEvent,this.endHandler,false);this.elementsToCapture.removeEventListener(this.mouseDownEvent,this.startHandler,false);this.elementsToCapture.removeEventListener(this.mouseUpEvent,this.endHandler,false);}this.root.removeEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.defaultDragStartEvent,this.defaultDragStartHandler,true);this.root.removeEventListener(this.defaultMouseMoveEvent,this.defaultMouseMoveHandler,true);this.wrapper.removeEventListener(this.scrollEvent,this.scrollHandler,false);return this;};this.init(c);this.getMove=function(){return{x:this.moveX,y:this.moveY};};};return U;},true);
sap.ui.predefine('sap/ushell/UIActionsWin8',function(){"use strict";
function n(){}
var U=function(){};U.prototype={init:function(c){this.cfg=c;this.type=this.cfg.type;this.wrapper=jQuery(c.wrapperSelector).get(0);this.container=jQuery(c.containerSelector).get(0);this.dragAndScrollCallback=c.dragAndScrollCallback||n;this.dragAndScrollDuration=100;this.dragCallback=c.dragCallback||n;this.draggableSelector=c.draggableSelector;this.endCallback=typeof c.endCallback==='function'?c.endCallback:n;this.onBeforeCreateClone=c.onBeforeCreateClone||n;this.placeHolderClass=c.placeHolderClass||"";this.cloneClass=c.cloneClass||"";this.$root=jQuery(c.rootSelector);this.startCallback=typeof c.startCallback==='function'?c.startCallback:n;this.onDragStartUIHandler=typeof c.onDragStartUIHandler==='function'?c.onDragStartUIHandler:n;this.onDragEndUIHandler=typeof c.onDragEndUIHandler==='function'?c.onDragEndUIHandler:n;this._publishAsync=typeof c._publishAsync==='function'?c._publishAsync:n;},enable:function(){if(this.enabled){return this;}this.enabled=true;this.$root.on('dragstart',this.draggableSelector,this,this.dragStartHandler).on('dragend',this.draggableSelector,this,this.dragEndHandler);return this;},disable:function disable(){this.enabled=false;this.$root.off('dragstart',this.draggableSelector).off('dragend',this.draggableSelector);return this;},dragLeaveHandler:function(e){var c=window.getComputedStyle(e.data.container).transform;e.data.container.style.transform=c;e.data.container.style.transition='';var t;var b=c.split(",");if(c.substr(0,8)=="matrix3d"){t=parseInt(b[13],10);}else if(c.substr(0,6)=="matrix"){t=parseInt(b[5],10);}if(isNaN(t)){return;}e.data.container.style.transform="none";e.data.wrapper.scrollTop+=~t+1;},dragEnterScrollHandler:function dragEnterScrollHandler(e){if(e.target==e.data.$bottomScroller.get(0)){e.data.startScroll("down");}if(e.target==e.data.$topScroller.get(0)){e.data.startScroll("up");}},startScroll:function(d){var l;if(d=="up"){l=this.wrapper.scrollTop;if(l<=0){return;}}else{l=this.wrapper.scrollHeight-this.wrapper.offsetHeight-this.wrapper.scrollTop;if(l<=0){return;}}var s=l*3;var t=(d=="up")?l:~l+1;this.container.style.transition='transform '+s+'ms linear';this.container.style.transform='translate(0px, '+t+'px) scale(1) translateZ(0px)';},initScrollRegions:function(){this.$topScroller=jQuery("<div class='UiActionsTopScroller' style='position:absolute; top: 0; height: 70px; left:0; right:0;'></div>");this.$bottomScroller=jQuery("<div class='UiActionsBottomScroller' style='position:absolute; bottom: 0; height: 70px; left:0; right:0;'></div>");jQuery(document.body).append(this.$topScroller).append(this.$bottomScroller);this.$topScroller.add(this.$bottomScroller).on('dragenter',this,this.dragEnterScrollHandler).on('dragleave',this,this.dragLeaveHandler);},removeScrollRegions:function(){jQuery('.UiActionsTopScroller, .UiActionsBottomScroller').remove();}};
function G(c){this.init(c);}
G.prototype=new U();jQuery.extend(G.prototype,{dragOverTimeout:null,dragStartHandler:function(e){var _=e.data;if(sap.ui.Device.system.phone){_.$root.find(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}else{_.$root.find(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}_.$originalElement=jQuery(e.target).closest(".sapUshellDashboardGroupsContainerItem");_.originalIndex=_.$originalElement.index();_.$element=_.$originalElement.clone().css("display","none").addClass('sapUshellDashboardGroupsContainerItem-placeholder');_.$element.insertAfter(_.$originalElement);_.$originalElement.addClass("sapUshellDashboardGroupsContainerItem-orignal");_.$root.find('.sapUshellTileContainerAfterContent').last().addClass("sapUshellTileContainerRemoveContent");_.initScrollRegions();setTimeout(function(){_.$originalElement.css("display","none");_.$element.css("display","block");},0);_.$root.on('dragover',".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",_,_.dragOverHandler);},dragEndHandler:function(e){var _=e.data;_.removeScrollRegions();_.$root.off('dragover',".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)");_.$root.find(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");_.$root.find(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");_.$element.replaceWith(_.$originalElement);var b=_.$originalElement.index();_.$originalElement.css('display','block').removeClass("sapUshellDashboardGroupsContainerItem-orignal");var B=sap.ui.getCore().getEventBus(),f=_.$originalElement.children().eq(0).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),D={group:g,groupChanged:false,focus:false};d.removeAggregation('groups',g,true);d.insertAggregation('groups',g,b,true);_._publishAsync("launchpad","moveGroup",{fromIndex:_.originalIndex,toIndex:b});window.setTimeout(jQuery.proxy(B.publish,B,"launchpad","scrollToGroup",D),1);},dragOverHandler:function dragOverHandler(e){if(e.data.dragOverTimeout){return;}e.data.dragOverTimeout=setTimeout(function(){e.data.dragOverTimeout=null;var o=e.currentTarget;if(e.data.$element.get(0)===o){return;}var b=e.data.isOverAboveMiddle(o,e.originalEvent.pageY);if(o===e.data.overElement&&b===e.data.overAboveMiddle){return;}e.data.overElement=o;e.data.overAboveMiddle=b;e.data.movePlaceholder(e.data.$element,o,b);},50);},isOverAboveMiddle:function(e,p){var m=true;var r=e.getBoundingClientRect();if(r.top+r.height/2<p){m=false;}return m;},movePlaceholder:function(p,e,i){if(i){jQuery(p).insertBefore(jQuery(e));}else{jQuery(p).insertAfter(jQuery(e));}}});
function T(c){this.init(c);}
T.prototype=new U();jQuery.extend(T.prototype,{dragOverTimeout:null,dragStartHandler:function dragStartHandler(e){var _=e.data;if(!e.target.id){e.target=jQuery(e.target).closest(".sapUshellTile")[0];}_.element=e.target;_.$root.on('dragenter',_.draggableSelector+", .sapUshellTileContainer",_,_.dragEnterTileHandler);var i=e.target.getAttribute("id");_.oTile=sap.ui.getCore().byId(i);_.oTile.addStyleClass(_.cloneClass);if(_.oTile.getParent().getIsGroupLocked()){_.onDragStartUIHandler();e.preventDefault();var m=function m(){_.onDragEndUIHandler();document.removeEventListener("mouseup",m);};document.addEventListener("mouseup",m);return false;}_.initScrollRegions();var $=jQuery(e.target).clone();$.addClass(_.placeHolderClass).css('z-index',"-1");var c=$.get(0);_.$cloned=$;jQuery(e.target).after($);_.getDomRefOriginal=_.oTile.getDomRef;_.oTile.getDomRef=function(){return c;};_.startCallback(e,_.element);_.onDragStartUIHandler();_.dragCallback(e,_.element);setTimeout(function(){jQuery(e.target).css("visibility","hidden");},0);},dragEndHandler:function dragEndHandler(e){var _=e.data;_.$root.off('dragenter',_.draggableSelector+", .sapUshellTileContainer",_.dragEnterTileHandler);_.removeScrollRegions();_.oTile.getDomRef=_.getDomRefOriginal;_.oTile.removeStyleClass(_.cloneClass);jQuery(_.element).css('visibility','visible');_.$cloned.remove();_.endCallback(e,_.element);_.onDragEndUIHandler();_.element=null;},dragEnterTileHandler:function dragEnterTileHandler(e){e.preventDefault();if(this.tileDragEnterTimeout){window.clearTimeout(this.tileDragEnterTimeout);}this.tileDragEnterTimeout=setTimeout(function(){e.data.dragOverTimeout=null;e.data.overElement=this;e.data.dragAndScrollCallback({moveX:e.originalEvent.pageX,moveY:e.originalEvent.pageY});},50);}});
function L(c){this.init(c);}
L.prototype=new U();jQuery.extend(L.prototype,{dragOverTimeout:null,dragStartHandler:function dragStartHandler(e){var _=e.data;if(!e.target.id){e.target=jQuery(e.target).closest(".sapUshellLinkTile")[0];}_.element=e.target;_.onBeforeCreateClone(e,_.element);_.$root.on('dragenter',".sapUshellTileContainer",_,_.dragEnterLinkHandler);var i=e.target.getAttribute("id");_.oTile=sap.ui.getCore().byId(i);if(_.oTile.getParent().getIsGroupLocked()&&_.oTile.getParent().getDefaultGroup()){e.preventDefault();_.onDragStartUIHandler();var m=function m(){_.onDragEndUIHandler();document.removeEventListener("mouseup",m);};document.addEventListener("mouseup",m);return false;}jQuery(e.target).addClass(_.placeHolderClass);_.initScrollRegions();_.startCallback(e,_.element);_.onDragStartUIHandler();_.dragCallback(e,_.element);},dragEndHandler:function dragEndHandler(e){var _=e.data;_.$root.off('dragenter',".sapUshellTileContainer",_.dragEnterLinkHandler);_.removeScrollRegions();jQuery(_.element).css('visibility','visible');_.endCallback(e,_.element);_.onDragEndUIHandler();_.element=null;},dragEnterLinkHandler:function dragEnterLinkHandler(e){e.preventDefault();if(this.linkDragEnterTimeout){window.clearTimeout(this.linkDragEnterTimeout);}this.linkDragEnterTimeout=setTimeout(function(){e.data.dragOverTimeout=null;e.data.overElement=this;e.data.dragAndScrollCallback({moveX:e.originalEvent.pageX,moveY:e.originalEvent.pageY});},10);}});var a={getInstance:function(c){switch(c.type){case"groups":return new G(c);case"links":return new L(c);default:return new T(c);}}};return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppConfiguration',["sap/ushell/services/AppConfiguration","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A,a){"use strict";
function b(){sap.ushell.services.AppConfiguration=this;A.constructor.call(this);this.setApplicationFullWidth=function(v){a.sendMessageToOuterShell("sap.ushell.services.AppConfiguration.setApplicationFullWidth",{"bValue":v});};}
return new b();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/NavTargetResolution',["sap/ushell/services/NavTargetResolution","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(N,A){"use strict";
function a(o,c,p,s){N.call(this,o,c,p,s);this.getDistinctSemanticObjects=function(){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.getDistinctSemanticObjects");};this.expandCompactHash=function(h){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.expandCompactHash",{"sHashFragment":h});};this.resolveHashFragment=function(h){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.resolveHashFragment",{"sHashFragment":h});};this.isNavigationSupported=function(i){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.isNavigationSupported",{"aIntents":i});};}
a.prototype=Object.create(N.prototype);a.hasNoAdapter=N.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/ShellNavigation',["sap/ushell/services/ShellNavigation","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(S,A){"use strict";
function a(c,p,s){S.call(this,c,p,s);this.toExternal=function(o,C,w){A.sendMessageToOuterShell("sap.ushell.services.ShellNavigation.toExternal",{"oArgs":o,"bWriteHistory":w});};this.toAppHash=function(b,w){A.sendMessageToOuterShell("sap.ushell.services.ShellNavigation.toExternal",{"sAppHash":b,"bWriteHistory":w});};}
a.prototype=Object.create(S.prototype);a.hasNoAdapter=S.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/ShellUIService',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","../../../ui5service/_ShellUIService/shelluiservice.class.factory","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(S,a,b,d,A){"use strict";var s=d({serviceRegistry:S,serviceFactory:a,service:b});var l;
var c=s.extend("sap.ushell.appRuntime.services.ShellUIService",{
setTitle:function(t){l=t;return A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setTitle",{"sTitle":t});},
getTitle:function(){return l;},
setHierarchy:function(h){return A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setHierarchy",{"aHierarchyLevels":h});},
setRelatedApps:function(r){return A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setRelatedApps",{"aRelatedApps":r});}
});
return c;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/adapters/EmptyAdapter',[],function(){"use strict";var E=function(){};return E;},true);
sap.ui.predefine('sap/ushell/bootstrap/appfinder/appFinder-dev',["../common/common.configure.ui5","../common/common.override.registermodulepath","../homepage/mockContainer","sap/ushell/renderers/fiori2/FlpMeasure"],function(c,o,M){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!");}
function L(){sap.ui.require(["sap/ui/core/ComponentContainer","sap/ushell/iconfonts"],function(C,I){var a=new C({height:"100%"}).placeAt("canvas",0);var b=sap.ui.component({name:"sap.ushell.components.appfinder",componentData:{config:{optimizeTileLoadingThreshold:200,enableEasyAccess:true,enableEasyAccessSAPMenu:true,enableEasyAccessSAPMenuSearch:true,enableEasyAccessUserMenu:true,enableEasyAccessUserMenuSearch:true,enableCatalogSearch:true,enableCatalogTagFilter:true,enableActionModeMenuButton:true,disableSortedLockedGroups:false,enableTileActionsIcon:false,enableHideGroups:true,enableLockedGroupsCompactLayout:false,enableTilesOpacity:false,homePageGroupDisplay:"scroll",enableHomePageSettings:true,rootIntent:"Shell-home"}}});a.setComponent(b);I.registerFiori2IconFont();});}
function f(C){C();}
c({libs:["sap.m","sap.ushell"],platform:"cdm",bootTask:f,theme:"sap_belize",onInitCallback:L});o();sap.ushell.Container=new M();});
sap.ui.predefine('sap/ushell/bootstrap/cdm/cdm-def-dev',["./cdm.constants","../common/common.configure.ui5","../common/common.configure.ushell","../common/common.override.registermodulepath","../common/common.configure.ui5.extractLibs"],function(c,C,f,o,e){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!");}var u=f({defaultUshellConfig:c.defaultConfig});C({ushellConfig:u,libs:e(u),platform:"cdm"});o();});
sap.ui.predefine('sap/ushell/bootstrap/cdm/cdm-def',["./cdm.constants","../common/common.configure.ui5","../common/common.configure.ushell","../common/common.override.registermodulepath","../common/common.load.core-min","../common/common.configure.ui5.extractLibs"],function(c,C,f,o,l,e){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!");}var u=f({defaultUshellConfig:c.defaultConfig});C({ushellConfig:u,libs:e(u),platform:"cdm"});o();l("sap.ushell.bootstrap");});
sap.ui.predefine('sap/ushell/bootstrap/cdm/cdm.constants',["../common/common.util"],function(c){"use strict";return c.deepFreeze({defaultConfig:{"defaultRenderer":"fiori2","ushell":{"home":{"tilesWrappingType":"Hyphenated"}},"renderers":{"fiori2":{"componentData":{"config":{"preventLoadingDialogAtStartup":true,"enableHideGroups":true,"enablePersonalization":true,"enableTagFiltering":false,"enableSearch":false,"enableTilesOpacity":false,"enableSetTheme":true,"enableAccessibility":true,"enableHelp":false,"enableUserDefaultParameters":true,"preloadLibrariesForRootIntent":false,"applications":{"Shell-home":{"enableActionModeMenuButton":true,"enableActionModeFloatingButton":true,"enableEasyAccess":false,"enableTileActionsIcon":false,"enableHideGroups":false,"enableLockedGroupsCompactLayout":false,"enableTilesOpacity":false}},"rootIntent":"Shell-home"}}}},"services":{"Container":{"adapter":{"config":{"userProfile":{"metadata":{"ranges":{"theme":{"sap_belize":{"displayName":"SAP Belize","themeRoot":""},"sap_belize_plus":{"displayName":"SAP Belize Plus","themeRoot":""},"sap_belize_hcb":{"displayName":"SAP Belize HCB","themeRoot":""},"sap_belize_hcw":{"displayName":"SAP Belize HCW","themeRoot":""}}}},"defaults":{"theme":"sap_belize"}}}}},"Personalization":{"adapter":{"module":"sap.ushell.adapters.local.PersonalizationAdapter"}},"AppState":{"adapter":{"module":"sap.ushell.adapters.local.AppStateAdapter"},"config":{"transient":true}},"NavTargetResolution":{"config":{"runStandaloneAppFolderWhitelist":{},"allowTestUrlComponentConfig":false,"enableClientSideTargetResolution":true},"adapter":{"module":"sap.ushell.adapters.local.NavTargetResolutionAdapter"}},"SupportTicket":{"config":{"enabled":false},"adapter":{"module":"sap.ushell.adapters.local.SupportTicketAdapter"}},"EndUserFeedback":{"adapter":{"config":{"enabled":false},"module":"sap.ushell.adapters.local.EndUserFeedbackAdapter"}},"UserInfo":{"adapter":{"module":"sap.ushell.adapters.local.UserInfoAdapter"}},"UserDefaultParameterPersistence":{"adapter":{"module":"sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter"}}},"ui5":{"libs":{"sap.ui.core":true,"sap.m":true,"sap.ushell":true}}}});});
sap.ui.predefine('sap/ushell/bootstrap/common/common.boot.path',["jquery.sap.global"],function(q){"use strict";return q.sap.getModulePath("");});
sap.ui.predefine('sap/ushell/bootstrap/common/common.boot.script',["./common.constants"],function(c){"use strict";var b=document.getElementById(c.bootScriptId);if(!b){b=document.getElementById(c.bwcBootScriptId);}return b;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.boot.task',["jquery.sap.global","./common.constants","../common/common.configure.ui5language","../common/common.configure.ui5theme","../common/common.configure.ui5datetimeformat","../common/common.configure.xhrlogon","../common/common.load.ui5theme","../common/common.load.xhrlogon","sap/ushell/services/Container","jquery.sap.script"],function(q,c,C,f,a,o,l,x,b){"use strict";return d;
function d(u,e){var g,U=window[c.ushellConfigNamespace];C(U);f(U);a(U);if(q.sap.getUriParameters().get("sap-ushell-cdm-loadFioriTheme")===true){g=q.sap.getObject('services.Container.adapter.config.userProfile.defaults.bootTheme',NaN,U);l(g);}window.sap.ushell.bootstrap(u).then(function(){o.start(sap.ushell.Container,x);}).then(e);}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5.extractLibs',["jquery.sap.global"],function(q){"use strict";return function readRequiredLibsFromConfig(u){if(!u||!u.ui5||!u.ui5.libs){return[];}if(!q.isPlainObject(u.ui5.libs)){q.sap.log.error("Invalid ushell configuration: /ui5/libs must be an object");return[];}return Object.keys(u.ui5.libs).filter(function(k){return this[k];},u.ui5.libs);};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5',["jquery.sap.global","./common.boot.task","./common.load.launchpad","./common.read.ui5theme.from.config"],function(q,b,l,g){"use strict";return c;
function c(s){if(!s||!s.libs||!Array.isArray(s.libs)){q.sap.log.error("Mandatory settings object not provided",null,"sap/ushell/bootstap/common/common.configure.ui5");return{};}var S=window["sap-ui-config"]||{},u=s&&s.platform,U=s.theme?s.theme:g(s.ushellConfig).theme;S["bindingsyntax"]="complex";S["preload"]="async";S["compatversion"]="1.16";S["libs"]=s.libs.join();S["theme"]=U;S["xx-boottask"]=s.bootTask||b.bind(null,u);S["oninit"]=s.onInitCallback||l;return S;}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5language',[],function(){"use strict";return c;
function c(u){var U=u&&u.services&&u.services.Container&&u.services.Container.adapter&&u.services.Container.adapter.config&&u.services.Container.adapter.config.userProfile;var l=U&&U.defaults&&U.defaults.languageBcp47;var s=U&&U.defaults&&U.defaults.language;if(l){sap.ui.getCore().getConfiguration().setLanguage(l,s);}}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5theme',["jquery.sap.global","./common.read.ui5theme.from.config"],function(q,g){"use strict";
function s(u){var t=q.sap.getObject('services.Container.adapter.config.userProfile.metadata.ranges.theme',NaN,u);if(!t){return;}q.sap.getObject('services.UserInfo.adapter.config.themes',0,u);u.services.UserInfo.adapter.config.themes=Object.keys(t).map(function(k){return{"id":k,"name":t[k].displayName,"root":t[k].themeRoot};});}
function c(u){var C=q.sap.getObject('services.Container.adapter.config',NaN,u),v=g(u);s(u);if(v.theme){C.userProfile.defaults.bootTheme=v;}else{var d=q.sap.getObject('userProfile.defaults.theme',NaN,C),p=q.sap.getObject('userProfilePersonalization.theme',NaN,C);q.sap.log.error("No valid boot theme could be determined: personalizedTheme = '"+p+"' default theme = '"+d+"'",null,"common.configure.ui5theme");}}
return c;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ushell',["jquery.sap.global","./common.constants","./common.debug.mode","./common.read.metatags"],function(q,c,d,m){"use strict";var S="sap/ushell/bootstrap/common/common.boot.script";return a;
function a(s){var u;var D=s&&s.defaultUshellConfig;var M=m.readMetaTags(c.configMetaPrefix);b(M,D,d,null);u=window[c.ushellConfigNamespace];f(u,"services.Container.adapter.config.userProfilePersonalization");return u;}
function f(u,s){var p;if(!u||!s){return;}p=q.sap.getObject(s,undefined,u);if(p&&p.items){q.extend(p,p.items);delete p.items;delete p.__metadata;}}
function b(M,D,d,s){var C=c.ushellConfigNamespace,g=M,u;if(!window[C]){window[C]={};}u=window[C];if(D){g=[D].concat(M);}g.forEach(function(o){e(u,o,true);});s&&s.forEach(function(o){e(u,o,true);});u["sap-ui-debug"]=d;q.sap.log.info("finally applied sap-ushell-config",JSON.stringify(u),S);}
function e(M,C,g){var A;if(!C){return;}A=g?JSON.parse(JSON.stringify(C)):C;Object.keys(A).forEach(function(k){if(typeof M[k]==="object"&&typeof A[k]==="object"){e(M[k],A[k],false);return;}M[k]=A[k];});}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.constants',[],function(){"use strict";return Object.create(null,{uiDebugKey:{value:"sap-ui-debug"},bootScriptId:{value:"sap-ui-bootstrap"},bwcBootScriptId:{value:"sap-ushell-bootstrap"},configMetaPrefix:{value:"sap.ushellConfig"},ushellConfigNamespace:{value:"sap-ushell-config"}});});
sap.ui.predefine('sap/ushell/bootstrap/common/common.debug.mode',["./common.constants"],function(c){"use strict";var s;var d=/[\?&]sap-ui-debug=(true|x|X)(&|$)/.test(window.location.search);if(!d){try{s=window.localStorage.getItem(c.uiDebugKey);d=!!s&&/^(true|x|X)$/.test(s);}catch(e){}}return d;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.core-min',["jquery.sap.global","./common.debug.mode","./common.load.script"],function(q,d,l){"use strict";return a;
function a(p){var u=q.sap.getModulePath(p),i;if(d){sap.ui.require(["sap/ui/core/Core"],function(c){c.boot();});}else{for(i=0;i<4;i++){l(u+"/core-min-"+i+".js");}}}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.script',[],function(){'use strict';return l;
function l(f,i,I,a){return new Promise(function(r,b){function c(e){e.target.removeEventListener("load",c);e.target.removeEventListener("error",c);if(e.type==='error'){b();}r();}var s=document.createElement("script");s.src=f;s.async=a?true:false;s.addEventListener("load",c);s.addEventListener("error",c);if(i){s.id=i;}if(I){s.defer=I;}document.head.appendChild(s);});}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.splashscreen',["./common.util"],function(u){"use strict";return l;
function l(b){var r="apple-touch-startup-image",p=u.ensureTrailingSlash(b);[{href:"320_x_460.png",media:"(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)"},{href:"640_x_920.png",media:"(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)"},{href:"640_x_1096.png",media:"(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)"},{href:"768_x_1004.png",media:"(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)"},{href:"1024_x_748.png",media:"(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)"},{href:"1536_x_2008.png",media:"(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)"},{href:"2048_x_1496.png",media:"(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)"}].forEach(function(s){var L=document.createElement("link");L.rel=r;L.href=p+s.href;L.media=s.media;document.head.appendChild(L);});}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.ui5theme',["jquery.sap.global","sap/ushell/bootstrap/common/common.boot.path"],function(q,b){"use strict";
function a(B){if(!B||!B.theme){q.sap.log.error("No boot theme could be applied",null,"common.load.ui5theme");return;}var S=window["sap-ui-config"]||{},A=c(B.root),t=B.theme,h=S["theme"]!==t;i(t,A||(b+"/"));if(A||h){var C=sap.ui.getCore();var e=[t,A].filter(function(s){return s;});C.applyTheme.apply(C,e);}q.sap.log.debug("Boot theme applied: theme = '"+B.theme+"' theme root = '"+B.root+"'",null,"common.load.ui5theme");}
function c(t){if(t){return t+"/UI5/";}return undefined;}
function i(t,T){var l=sap.ui.getCore().getConfiguration().getLanguage(),s=T+"sap/fiori/themes/"+t,I=d(l),f=I?"library-RTL.css":"library.css";q.sap.includeStyleSheet(s+"/"+f,"sap-ui-theme-sap.fiori");}
function d(l){var A=['ar','fa','he','iw'];l=l.toLowerCase().substring(0,2);return A.indexOf(l)>=0;}
return a;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.override.registermodulepath',["jquery.sap.global","sap/ui/thirdparty/URI"],function(q,U){"use strict";return o;
function o(){var R=q.sap.registerModulePath;q.sap.registerModulePath=function(m,u){if(typeof u==="object"){u.url=r(u.url);}else if(typeof u==="string"){u=r(u);}R(m,u);};}
function r(u){var m,s,c,a;if(typeof u!=="string"||u===""||b(u)){return u;}function b(e){var f=new U(e),p=f.path();if(f.is("absolute")){return false;}if(p&&p.charAt(0)==="/"){return false;}return true;}m=u.match(/(.*)(\/~[\w\-]+~[A-Z0-9]?)(.*)/);if(m){s=m[1];c=m[2];a=m[3];}function n(e){return new U(e).normalizePathname().toString();}function d(p){var S=new U(p).segment(),i,P=0;for(i=0;i<S.length&&P>=0;i+=1){if(S[i]===".."){P=P-1;}else{P=P+1;}}return P<0;}if(c){if(a&&d(a)){u=s+a;}}return n(u);}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.preload.module',["sap/ushell/bootstrap/common/common.load.script"],function(l){'use strict';
function p(r){l(r+"/sap/ushell/components/flp/Component-preload.js",null,null,true);}
function P(r){l(r+"/sap/fiori/flp-controls.js",null,null,true).then(function(){sap.ui.predefine("sap/fiori/flp-controls",function(){},false);});}
function f(r){P(r);p(r);}
return{fnPreloadFlpComponent:p,fnPreloadFlpControls:P,fnPreloadHomeBundle:f};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.read.metatags',[],function(){"use strict";
function r(m,p){var s="meta[name^='"+m+"']:not([name=''])";var M=document.querySelectorAll(s);var S="sap/ushell/bootstrap/common/common.read.metatags";var i=[];p=p||JSON.parse;Array.prototype.forEach.call(M,function(o){try{i.push(p(o.content));}catch(e){jQuery.sap.log.error(e.message,e.stack,S);}});return i;}
return{readMetaTags:r};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.read.ui5theme.from.config',["jquery.sap.global"],function(q){"use strict";return g;
function e(u){var c=q.sap.getObject('services.Container.adapter.config',NaN,u);return{sDefaultTheme:q.sap.getObject('userProfile.defaults.theme',NaN,c),sPersonalizedTheme:q.sap.getObject('userProfilePersonalization.theme',NaN,c),oRangeTheme:q.sap.getObject('userProfile.metadata.ranges.theme',NaN,c)};}
function g(u){var t=e(u),p=t.sPersonalizedTheme,r=t.oRangeTheme,d=t.sDefaultTheme;if(t.oRangeTheme){if(Object.keys(r).indexOf(p)>-1){var P=r[p]||{};return{theme:p,root:P.themeRoot};}else{var D=r[d]||{};return{theme:d,root:D.themeRoot};}}else{var a=p||d;return{theme:a,root:""};}}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.set.launch.icons',["sap/ui/util/Mobile","./common.boot.path"],function(M,b){"use strict";return l;
function l(){M.setIcons({"phone":b+"/sap/ushell/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png","phone@2":b+"/sap/ushell/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png","tablet":b+"/sap/ushell/themes/base/img/launchicons/72_iPad_Desktop_Launch.png","tablet@2":b+"/sap/ushell/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png","favicon":b+"/sap/ushell/themes/base/img/launchpad_favicon.ico","precomposed":true});}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.util',[],function(){"use strict";return Object.create(null,{deepFreeze:{value:d},getLocationOrigin:{value:g,writable:true},ensureTrailingSlash:{value:e}});
function d(o){Object.keys(o).filter(function(p){return typeof o[p]==="object";}).forEach(function(p){o[p]=d(o[p]);});return Object.freeze(o);}
function g(){return location.protocol+"//"+location.host;}
function e(p){if((typeof p==="string")&&p.charAt(p.length-1)!=='/'){return p+'/';}else{return p;}}
});
sap.ui.predefine('sap/ushell/bootstrap/homepage/homepage-dev',["../common/common.configure.ui5","../common/common.override.registermodulepath","./mockContainer","sap/ushell/renderers/fiori2/FlpMeasure"],function(c,o,M){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!");}
function L(){sap.ui.require(["sap/ui/core/ComponentContainer","sap/ushell/iconfonts"],function(C,I){var a=new C({height:"100%"}).placeAt("canvas",0);var b=sap.ui.component({name:"sap.ushell.components.homepage",componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}});a.setComponent(b);I.registerFiori2IconFont();});}
function f(C){C();}
c({libs:["sap.m","sap.ushell"],platform:"cdm",bootTask:f,theme:"sap_belize",onInitCallback:L});o();sap.ushell.Container=new M();});
sap.ui.predefine('sap/ushell/bootstrap/homepage/mockContainer',["sap/ui/base/Object","sap/ushell/Utils","sap/ushell/EventHub","sap/ushell/services/ClientSideTargetResolution"],function(O,u,H,C){"use strict";H.emit("CoreResourcesComplementLoaded");var p,c={services:{Personalization:{adapter:{module:"sap.ushell.adapters.local.PersonalizationAdapter"}},CommonDataModel:{adapter:{config:{allowSiteSourceFromURLParameter:true,ignoreSiteDataPersonalization:true,siteDataUrl:"../../cdmSiteData/CommonDataModelAdapterData.json"}}},AppState:{adapter:{module:"sap.ushell.adapters.local.AppStateAdapter"}}}},s=new u.Map();var S={getPlatform:function(){return"cdm";}};var a={getSystem:function(){return S;}};
function b(n,S,P,A){var o=g(n).adapter||{},e=o.module||d(S.getPlatform())+"."+n+"Adapter";function f(){return new(jQuery.sap.getObject(e))(S,P,{config:o.config||{}});}if(A){return new Promise(function(r,h){var m=e.replace(/\./g,'/');sap.ui.require([m],function(){try{r(f());}catch(i){h(i);}});});}else{jQuery.sap.require(e);return f();}}
function g(e){return(c.services&&c.services[e])||{};}
function d(P){if(p&&p[P]){return p[P];}return"sap.ushell.adapters."+P;}
return O.extend("sap.ushell.Container",{isMock:true,constructor:function(){},getServiceAsync:function(e,P){return Promise.resolve(this.getService(e,P,true));},getService:function(e,P,A){this._overrideCSTRResolution();var o={},m,k,f,h,i,j;function l(S){var D=new jQuery.Deferred();if(!S){throw new Error("Missing system");}D.resolve(b(e,S,P));sap.ushell.Container.addRemoteSystem(S);return D.promise();}if(!e){throw new Error("Missing service name");}if(e.indexOf(".")>=0){throw new Error("Unsupported service name");}i=g(e);m=i.module||"sap.ushell.services."+e;k=m+"/"+(P||"");j={config:i.config||{}};function n(r,h){o.createAdapter=l;return new r(h,o,P,j);}function q(f,A){var r;if(f.hasNoAdapter){r=new f(o,P,j);}else{h=b(e,a.getSystem(),P,A);if(A){return h.then(function(t){var r=n(f,t);s.put(k,r);return r;});}else{r=n(f,h);}}s.put(k,r);return A?Promise.resolve(r):r;}if(!s.containsKey(k)){if(A){return new Promise(function(r){sap.ui.require([m.replace(/[.]/g,"/")],function(t){r(q(t,true));});});}else{f=sap.ui.requireSync(m.replace(/[.]/g,"/"));return q(f);}}if(A){return Promise.resolve(s.get(k));}else{return s.get(k);}},_overrideCSTRResolution:function(){C.prototype.getEasyAccessSystems=function(){var D=new jQuery.Deferred();var r={"U1Y_000":{"appType":{"TR":true,"WDA":true},"text":"U1Y Client 000"},"FLPINTEGRATION2015_588":{"appType":{"URL":true},"text":"Business Objects Demo"},"GOOGLE":{"appType":{"URL":true},"text":"Google Searches"}};D.resolve(r);return D.promise();};},getUser:function(){return{getLanguage:function(){return"en";}};},getRenderer:function(){return{createExtendedShellState:function(){},applyExtendedShellState:function(){}};},getLogonSystem:function(){return false;}});},true);
sap.ui.predefine('sap/ushell/components/DestroyHelper',[],function(){'use strict';return{destroyFLPAggregationModel:a,destroyFLPAggregationModels:d,destroyTileModel:c,destroyTileModels:b};
function d(A){var i;if(A){for(i=0;i<A.length;i++){a(A[i]);}}}
function a(A){if(A){b(A.tiles);}}
function b(t){var i;if(t){for(i=0;i<t.length;i++){c(t[i]);}}}
function c(t){var i;if(t&&t.content){for(i=0;i<t.content.length;i++){t.content[i].destroy();}}}
});
sap.ui.predefine('sap/ushell/components/GroupsHelper',[],function(){'use strict';return{getIndexOfGroup:a,getModelPathOfGroup:g};
function g(G,s){var i=a(G,s);if(i<0){return null;}return"/groups/"+i;}
function a(G,s){for(var i=0;i<G.length;i++){if(G[i].groupId===s)return i;}return-1;}
});
sap.ui.predefine('sap/ushell/components/MessagingHelper',["sap/ushell/services/Message"],function(M){'use strict';return{getLocalizedText:g,showLocalizedError:a,showLocalizedErrorHelper:b,showLocalizedMessage:s};
function g(m,p){return sap.ushell.resources.i18n.getText(m,p);}
function s(m,p,t){if(sap.ushell.Container){sap.ushell.Container.getService("Message").show(t||M.Type.INFO,g(m,p),p);}}
function a(m,p){s(m,p,M.Type.ERROR);}
function b(m,p){return function(){a(m,p);};}
});
sap.ui.predefine('sap/ushell/components/factsheet/views/ThingViewer.controller',function(){"use strict";sap.ui.controller("sap.ushell.components.factsheet.views.ThingViewer",{setService:function(u){this.getView().setModel(new sap.ui.model.odata.ODataModel(u));}});},false);
sap.ui.predefine('sap/ushell/components/factsheet/views/ThingViewer.view',['sap/ushell/components/factsheet/tools/ODataUrlTemplating','sap/ushell/components/factsheet/factory/ThingInspector','sap/ui/model/odata/ODataUtils'],function(O,T,a){"use strict";sap.ui.jsview("sap.ushell.components.factsheet.views.ThingViewer",{getControllerName:function(){return"sap.ushell.components.factsheet.views.ThingViewer";},createContent:function(c){var e,A,E,t,v,s;v=this.getViewData();e=v.entity||v.service;if(!e){E=v.entityTemplateURI||v.template;if(E){if(typeof E!=="string"){E=E[0];}E=E.replace(/%25/g,"%");E=E.replace(/%28/g,"(");E=E.replace(/%29/g,")");E=E.replace(/%27/g,"'");E=E.replace(/%3D/g,"=");E=E.replace(/%7B/g,"{");E=E.replace(/%7D/g,"}");e=O.resolve(E,v);}}A=v.annotationURI||v.annotation;if(typeof e!=="string"){e=e[0];}if(typeof A!=="string"){A=A[0];}s=e.substr(0,e.lastIndexOf("/"));function b(C,s){var S;if(sap.ui.model.odata&&a&&typeof a.setOrigin==="function"){if(!(C&&C.getComponentData())){throw new Error("no component passed");}if(C&&C.getComponentData()&&C.getComponentData().startupParameters&&C.getComponentData().startupParameters["sap-system"]){S=C.getComponentData().startupParameters["sap-system"][0];s=a.setOrigin(s,{alias:S});}}return s;}s=b(sap.ui.core.Component.getOwnerComponentFor(this),s);s=s+e.substr(e.lastIndexOf("/"));t=T(s,A);t.addStyleClass("ThingInspector");return t;}});},false);
sap.ui.predefine('sap/ushell/components/homepage/FLPAnalytics',function(){"use strict";var o=["deleteTile","createGroup","actionModeActive","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],E=sap.ui.getCore().getEventBus(),t=this,l={};
function s(c){var m=sap.ushell.services.AppConfiguration.getMetadata();l[c]={};l[c].startTime=new Date();l[c].title=m.title;}
function a(c){var d=0;try{d=(new Date()-l[c].startTime)/1000;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Time in Application (sec)",d,[l[c].title]);}catch(e){jQuery.sap.log.warning("Duration in application "+c+" could not be calculated",null,"sap.ushell.components.homepage.FLPAnalytics");}}
function h(c,d,D){var A=hasher.getHash(),f;window.swa.custom1={ref:A};switch(d){case'appOpened':s(A);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Direct Launch",[l[A].title]);E.unsubscribe("sap.ushell","appOpened",h);break;case'bookmarkTileAdded':f=window.document.title;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Save as Tile",[f,D&&D.group&&D.group.title?D.group.title:"",D&&D.group&&D.group.id?D.group.id:"",D&&D.tile&&D.tile.title?D.tile.title:f]);break;case'actionModeActive':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Enter Action Mode",[D.source]);break;case'catalogTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Catalog",[]);break;case'dashboardTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Homepage",[]);break;case'dashboardTileLinkClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Tile Group Link",[]);break;default:break;}}
function b(c){var f,T,d;if(c.getParameter("from")&&c.getParameter("to")){f=c.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:f};a(f);d=c.getParameter("to");T=d.getId().replace("application-","").replace("applicationShellPage-","");s(T);window.swa.custom1={ref:T};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Fiori Navigation",[l[T].title]);}}
jQuery(window).unload(function(c){var d=window.location.hash.substr(1);a(d);});try{sap.ui.getCore().byId('viewPortContainer').attachAfterNavigate(b,t);}catch(e){jQuery.sap.log.warning("Failure when subscribing to viewPortContainer 'AfterNavigate' event",null,"sap.ushell.components.homepage.FLPAnalytics");}E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",h,t);o.forEach(function(c,i,d){E.subscribe("launchpad",c,h,t);});E.subscribe("sap.ushell","appOpened",h,t);},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/DefaultParameters.view',[],function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.DefaultParameters",{createContent:function(c){},getControllerName:function(){return"sap.ushell.components.shell.MeArea.DefaultParameters";}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/UserProfiling.controller',function(){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.UserProfiling",{onInit:function(){this.isContentLoaded=true;},onCancel:function(){var p=this.getView().getModel().getProperty("/userPreferences/profiling"),P,i;for(i=0;i<p.length;i++){P=p[i];if(P.onCancel){P.onCancel();}}},getValue:function(){var d=jQuery.Deferred();var p=this.getView().getModel().getProperty("/userPreferences/profiling");p.forEach(function(e,i){if(e.entryHelpID==="usageAnalytics"){if(!sap.ushell.Container.getService("UsageAnalytics").systemEnabled()||!sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted()){p.splice(i,1);}}},this);if(p!==undefined&&p.length>0){d.resolve({value:1,displayText:" "});}else{d.resolve({value:0,displayText:" "});}return d.promise();},onSave:function(){var r=jQuery.Deferred(),p=this.getView().getModel().getProperty("/userPreferences/profiling"),w,P=[],t=0,s=0,f=0,F=[],T,a=function(){s++;r.notify();},b=function(e){F.push({entry:"currEntryTitle",message:e});f++;r.notify();};p.forEach(function(i){T=i.onSave();T.done(a);T.fail(b);P.push(T);t++;});w=jQuery.when.apply(null,P);w.done(function(){r.resolve();});r.progress(function(){if(f>0&&(f+s===t)){r.reject("At least one save action failed");}});return r.promise();},getContent:function(){var t=this,d=jQuery.Deferred(),p=this.getView().getModel().getProperty("/userPreferences/profiling");p.forEach(function(i){var c=i.contentFunc();c.done(function(r){t.getView().profilingContent.addItem(r);});});d.resolve(t.getView());return d.promise();}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/UserProfiling.view',function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.UserProfiling",{createContent:function(c){this.profilingContent=new sap.m.VBox().addStyleClass("sapUshellUserSettingDetailContent");return this.profilingContent;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.UserProfiling";}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/UserSettings.view',["sap/ushell/resources","sap/m/Page","sap/m/Text","sap/m/SplitApp","sap/m/Bar"],function(r,P,T,S,B){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.UserSettings",{createContent:function(c){this.aDanglingControls=[];this.translationBundle=r.i18n;return this.getMainControl(c);},getMainControl:function(c){this.oMainApp=new S({id:"settingsApp",masterPages:c.createMasterPages(),defaultTransitionNameDetail:"show"});this.splitAppHeaderBar=new B({contentMiddle:new T({text:r.i18n.getText("userSettings")})});var p=new P({content:[this.oMainApp],customHeader:this.splitAppHeaderBar,showHeader:true}).addStyleClass('sapUshellSettingsPage');this.aDanglingControls.push(p);this.oMainApp._oDetailNav.setAutoFocus(false);return p;},getSplitApp:function(){return this.oMainApp;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.UserSettings";}});},false);
sap.ui.predefine('sap/ushell/components/tiles/generic',['sap/ui/core/mvc/Controller','sap/ui/model/analytics/odata4analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil','sap/ushell/components/tiles/sbtilecontent'],function(C,o,s,a){"use strict";
var g=C.extend("sap.ushell.components.tiles.generic",{
getTile:function(){return this.oKpiTileView.oGenericTile;},
_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);},
logError:function(e){this._updateTileModel({value:"",scale:"",unit:""});jQuery.sap.log.error(e);if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject();}else{this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Failed);}},
getKeyForCallCheck:function(){if(this.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){return this.oConfig.TILE_PROPERTIES.id+"left";}else{return this.oConfig.TILE_PROPERTIES.id+"right";}},
getRelativeTime:function(){var c=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();if(jQuery.type(this.cacheTime)=="date"){var t=this.cacheTime;}else{var t=new Date(parseInt(this.cacheTime.substr(6),10));}var r=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(c-t);var b;switch(r.unit){case"minutes":var d=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"minutes");c=c-d;b=new Date(c);break;case"hours":var d=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"hours");c=c-d;b=new Date(c);break;case"days":var d=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"days");c=c-d;b=new Date(c);break;}return b;},
setTimeStamp:function(d){this.updateTimeStampjobScheduled=false;var f=sap.ui.core.format.DateFormat.getDateTimeInstance({relative:true,relativeSource:"auto",style:"short"});var t=f.format(this.getRelativeTime());this.oKpiTileView.oNVConfS.setRefreshOption(true);this.oKpiTileView.oNVConfS.setTimestamp(t);this.updateTimeStampjobScheduled=false;var k=this.oConfig.TILE_PROPERTIES.id+"time";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k);if(r){clearTimeout(r);r=undefined;}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible());},
isACurrencyMeasure:function(m){var e=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;return sap.ushell.components.tiles.indicatorTileUtils.util.getFormattingMetadata(this.oRunTimeODataModel,e,m)._hasCurrency;},
isCurrencyMeasure:function(m){var t=this;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(c&&c.Data){var k=c.Data&&JSON.parse(c.Data);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){k=k.leftData;}else{k=k.rightData;}}if(t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile"||t.oConfig.TILE_PROPERTIES.tileType==="CM"){if(k&&k.data&&k.data.length){for(var i=0;i<k.data.length;i++){if(k.data[i]&&k.data[i].measure==m){if(jQuery.type(k.data[i].isCurM)=="boolean"){return k.data[i].isCurM;}else{return t.isACurrencyMeasure(m);}break;}else{return t.isACurrencyMeasure(m);}}}else{return t.isACurrencyMeasure(m);}}if(k&&jQuery.type(k.isCurM)=="boolean"){return k.isCurM;}else{return t.isACurrencyMeasure(m);}}else{return t.isACurrencyMeasure(m);}},
formSelectStatement:function(b){var t=Object.keys(b);var f="";for(var i=0;i<t.length;i++){if((b[t[i]]!==undefined)&&(b.fullyFormedMeasure)){f=f+","+b[t[i]];}}return f;},
setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(c&&c.Data&&c.Data.length){c.Data=JSON.parse(c.Data);T.trendValue=Number(c.Data.trend);T.targetValue=Number(c.Data.target);T.criticalHighValue=Number(c.Data.ch);T.warningHighValue=Number(c.Data.wh);c.Data=JSON.stringify(c.Data);}break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(c&&c.Data&&c.Data.length){c.Data=JSON.parse(c.Data);T.criticalLowValue=Number(c.Data.cl);T.warningLowValue=Number(c.Data.wl);T.trendValue=Number(c.Data.trend);T.targetValue=Number(c.Data.target);c.Data=JSON.stringify(c.Data);}break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(c&&c.Data&&c.Data.length){c.Data=JSON.parse(c.Data);T.criticalLowValue=Number(c.Data.cl);T.warningLowValue=Number(c.Data.wl);T.trendValue=Number(c.Data.trend);T.targetValue=Number(c.Data.target);T.criticalHighValue=Number(c.Data.ch);T.warningHighValue=Number(c.Data.wh);c.Data=JSON.stringify(c.Data);}break;}}else if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},
setNoData:function(){var v=this.getView().getViewData();if(v.parentController){v.parentController.setNoData();if(v.deferredObj){v.deferredObj.resolve();}}else{try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);}catch(e){}}},
getLocalCache:function(c){var l={};l.ChipId=c.ChipId;l.Data=c.Data;l.CacheMaxAge=c.CacheMaxAgeUnit;l.CacheMaxAgeUnit=c.CacheMaxAgeUnit;l.CacheType=c.CacheType;l.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return l;},
fetchKpiValue:function(c,E,r,A){var t=this;var k=0;try{var b=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var T=this.setThresholdValues();var m=T.fullyFormedMeasure;var d=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);var f=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var i=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,f,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);var h=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var j=this.getKeyForCallCheck();var l=true;if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){var l=sap.ushell.components.tiles.indicatorTileUtils.util.isCallInProgress(j);if(l==undefined){l=true;}}if(l){if((!d||(!i&&t.oTileApi.visible.isVisible())||h||(A&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh)){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(j,false);if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,b,m,null,v);if(q){this.QUERY_SERVICE_MODEL=q.model;this.queryUriForKpiValue=q.uri;this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(p){t.backEndCallMade=true;t.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(j,true);if(p&&p.results&&p.results.length&&p.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]!=null){k=p.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var w={};if(q.unit[0]){t._updateTileModel({unit:p.results[0][q.unit[0].name]});w.uom=p.results[0][q.unit[0].name];}if(t.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){w.numericValue=k;}else{w.value=k;}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=p.results[0][T.sCriticalHigh];T.criticalLowValue=p.results[0][T.sCriticalLow];T.warningHighValue=p.results[0][T.sWarningHigh];T.warningLowValue=p.results[0][T.sWarningLow];T.targetValue=p.results[0][T.sTarget];T.trendValue=p.results[0][T.sTrend];}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(p.results[0][T.sTarget]);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(p.results[0][T.sTrend]);}w.cl=T.criticalLowValue;w.ch=T.criticalHighValue;w.wl=T.warningLowValue;w.wh=T.warningHighValue;w.trend=T.trendValue;w.target=T.targetValue;w.isCurM=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var u={};u.ChipId=t.oConfig.TILE_PROPERTIES.id;u.Data=JSON.stringify(w);u.CacheMaxAge=Number(t.chipCacheTime);u.CacheMaxAgeUnit=t.chipCacheTimeUnit;u.CacheType=1;var x=t.getLocalCache(u);if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,x);var U=false;if(d){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,u,U,function(p){if(p){t.cacheTime=p&&p.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,p);t.setTimeStamp(t.cacheTime);}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){jQuery.proxy(t.setTimeStamp(t.cacheTime),t);}});}}else{var y=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(y){if(!y.CachedTime){y.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}var z=y.Data;if(z){z=JSON.parse(z);if(t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){z.leftData=w;}else{z.rightData=w;}}y.Data=JSON.stringify(z);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,y);}else{var z={};if(t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){z.leftData=w;}else{z.rightData=w;}x.Data=JSON.stringify(z);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,x);}t.cacheWriteData=w;}t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();t.updateDatajobScheduled=false;var B=t.oConfig.TILE_PROPERTIES.id+"data";var D=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(B);if(D){clearTimeout(D);D=undefined;}c.call(t,k,T);}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,{empty:"empty"});t.setNoData();}},function(p){t.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(j,true);if(p&&p.response){jQuery.sap.log.error(p.message+" : "+p.request.requestUri);E.call(t,p);}});}else{t.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(j,true);t.logError("Error Preparing Query Service URI");}}}else{if(t.DEFINITION_DATA.TILE_PROPERTIES.frameType==sap.m.FrameType.OneByOne){if(d&&d.Data){var n=d.Data&&JSON.parse(d.Data);k=n.value;if(n.uom){t._updateTileModel({unit:n.uom});}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=n.ch;T.criticalLowValue=n.cl;T.warningHighValue=n.wh;T.warningLowValue=n.wl;T.targetValue=n.target;T.trendValue=n.trend;}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(n.target);T.criticalHighValue=T.targetValue*T.ch/100;T.criticalLowValue=T.targetValue*T.cl/100;T.warningHighValue=T.targetValue*T.wh/100;T.warningLowValue=T.targetValue*T.wl/100;T.trendValue=Number(n.trend);}t.cacheTime=d.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){jQuery.proxy(t.setTimeStamp(d.CachedTime),t);}c.call(t,k,T);}else{t.setNoData();}}else{if(d&&d.Data){var n=d.Data&&JSON.parse(d.Data);if(t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){n=n.leftData;}else{n=n.rightData;}k=n.numericValue;if(n.unit){t._updateTileModel({unit:n.unit});}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=n.ch;T.criticalLowValue=n.cl;T.warningHighValue=n.wh;T.warningLowValue=n.wl;T.targetValue=n.target;T.trendValue=n.trend;}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(n.target);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(n.trend);}t.cacheTime=d.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){jQuery.proxy(t.setTimeStamp(d.CachedTime),t);}c.call(t,k,T);}else{t.setNoData();}}}}}catch(e){t.logError(e);}},
getRunTimeODataModel:function(u,S){if(window["sap-ushell-config"].cacheBusting){u=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(u);}if(!this.oRunTimeODataModel){this.oRunTimeODataModel=sap.ushell.components.tiles.indicatorTileUtils.util.getODataModelByServiceUri(u);}if(this.oRunTimeODataModel.getServiceMetadata()){S();}else{this.oRunTimeODataModel.attachMetadataLoaded(S);}},
parse_sapclient:function(){var i,S,r,f,b;S="P_SAPClient";r="$$$";f=this.oConfig.EVALUATION_FILTERS;if(f.constructor!==Array){return;}if(f.length<1){return;}for(i in f){b=f[i];if(b["NAME"]===S&&b["VALUE_1"]===r){break;}b=null;}if(b){jQuery.when(sap.ushell.components.tiles.indicatorTileUtils.util.getHanaClient()).done(function(c){b["VALUE_1"]=c;});}},
fetchEvaluation:function(c,b,r,i){var t=this;var p=this.oConfig.TILE_PROPERTIES.sb_metadata||"HANA";t.DEFINITION_DATA=c;t._updateTileModel(this.DEFINITION_DATA);var d=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);if((t.oTileApi.visible.isVisible()&&!t.firstTimeVisible)||d||i){jQuery.when(sap.ushell.components.tiles.indicatorTileUtils.util.getFrontendCache(c,t.oTileApi)).done(function(f){t.firstTimeVisible=true;f=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(f||Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){b.call();}else{try{if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)||!t.dataCallInProgress){t.dataCallInProgress=true;var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(t.oConfig.TILE_PROPERTIES.id);if(h){t.oConfig.EVALUATION_FILTERS=h.EVALUATION_FILTERS;b.call();}else if(t.evaluationFetchDeferred){t.evaluationFetchDeferred=false;sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(t.oConfig,t.oTileApi,function(j){t.evaluationFetchDeferred=true;t.oConfig.EVALUATION_FILTERS=j;if(p.toUpperCase()==="HANA"){t.parse_sapclient();}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);b.call();});}}}catch(e){t.evaluationFetchDeferred=true;t.logError("no evaluation data");}}}).fail(function(){t.firstTimeVisible=true;if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){b.call();}else{try{var f=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(t.oConfig.TILE_PROPERTIES.id);if(f){t.oConfig.EVALUATION_FILTERS=f.EVALUATION_FILTERS;b.call();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(t.oConfig,t.oTileApi,function(h){t.oConfig.EVALUATION_FILTERS=h;if(p.toUpperCase()==="HANA"){t.parse_sapclient();}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);b.call();});}}catch(e){t.logError("no evaluation data");}}});}},
refreshHandler:function(r,A){var t=this;var i=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var b=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(A);if(!t.firstTimeVisible||i||b){t.fetchEvaluation(t.oConfig,function(){if(t.oConfig.TILE_PROPERTIES.tileType=="NT"||t.oConfig.TILE_PROPERTIES.tileType=="AT"||t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"||t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatordeviation.DeviationTile"){var u=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(u,function(){if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(k,T){this.KPIVALUE=k;t.doProcess(k,T);},t.logError,r,b);}else{t.doProcess();}});}else{var u=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(u,function(){if(t.KPI_VALUE_REQUIRED){t.doProcess(t.KPIVALUE,t.setThresholdValues());}else{t.doProcess(i,b);}});}},r,b);}},
visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},
getChipConfiguration:function(c){var t=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),t.oTileApi.preview.isEnabled(),function(b){t.oConfig=b;var d=sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig);var f=sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig);if(t.oTileApi.search){t.oTileApi.search.setKeywords([d,f]);}if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}c.call();});}catch(e){t.logError(e.message);}},
onAfterTileRendering:function(){var t=this;this.firstTimeVisible=false;this.oKpiTileView=this.getView();this.updateDatajobScheduled=false;this.updateTimeStampjobScheduled=false;this.oViewData=this.oKpiTileView.getViewData();this.tilePressed=false;this.kpiValueFetchDeferred=true;this.evaluationFetchDeferred=true;this.backEndCallMade=false;if(!sap.ushell.components.tiles.utils){jQuery.sap.require("sap.ushell.components.tiles.utils");}this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();this.oTileApi=this.oViewData.chip;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loading);this.getChipConfiguration(function(){t.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t.oConfig);t.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t.oConfig);if(t.oTileApi.preview.isEnabled()){t.doDummyProcess();t.oKpiTileView.oGenericTile.attachPress(function(){sap.m.MessageToast.show(t.oResourceBundle.getText("sb.NavigationHelp"));});}else if(t.oConfig.BLANKTILE||t.oConfig.TILE_PROPERTIES.blankTile){t.doDummyProcess();var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=n;});}else{if(t.oTileApi.visible&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){t.oTileApi.visible.attachVisible(t.visibleHandler.bind(t));}var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"' style='display: block;'/>");t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=n;});if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){t.oKpiTileView.oNVConfS.attachRefresh(function(){t.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loading);jQuery.proxy(t.refreshHandler(true),t);});}t.fetchEvaluation(t.oConfig,function(){t.DEFINITION_DATA=t.oConfig;var u=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);var c=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var i=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,c,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);if(!i||t.getView().getViewData().refresh){t.getRunTimeODataModel(u,function(){if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(k,T){this.KPIVALUE=k;t.doProcess(k,T);},t.logError);}else{t.doProcess();}});}else{if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(k,T){this.KPIVALUE=k;t.doProcess(k,T);},t.logError);}else{t.doProcess();}}});}});},
onAfterRendering:function(){this.onAfterTileRendering();},
_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new sap.ui.model.json.JSONModel({}));}},
autoFormatter:function(n,i){i=i||false;if(!n){return"";}return sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(n),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,i);},
setToolTip:function(b,c,t){var d=this;var e;var T=this.setThresholdValues();var m=this.oConfig.EVALUATION.COLUMN_NAME;var i=this.isCurrencyMeasure(m);if(t=="CONT"||t=="COMP"){if(this.oKpiTileView.getContent()[0].getTileContent().length){e=d.oKpiTileView.getContent()[0].getTileContent()[0].getContent();var f,h,j,v,k,l,n,p,q;if(c&&c[0]){f=c[0].title;v=this.autoFormatter(c[0].value,i);n=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(c[0].color);}if(c&&c[1]){h=c[1].title;k=this.autoFormatter(c[1].value,i);p=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(c[1].color);}if(c&&c[2]){j=c[2].title;l=this.autoFormatter(c[2].value,i);q=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(c[2].color);}var r={};r["0"]=this.oConfig.EVALUATION.COLUMN_NAME+",asc";r["1"]=this.oConfig.EVALUATION.COLUMN_NAME+",desc";r["2"]=this.oConfig.TILE_PROPERTIES.dimension+",asc";r["3"]=this.oConfig.TILE_PROPERTIES.dimension+",desc";var u=r[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var w={measure:this.oConfig.EVALUATION.COLUMN_NAME,contributionTile:u,m1:f,v1:v,c1:n,m2:h,v2:k,c2:p,m3:j,v3:l,c3:q};sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(e,t,w);}}else{var x="";if(b=="Error"){x="sb.error";}if(b=="Neutral"){x="sb.neutral";}if(b=="Critical"){x="sb.critical";}if(b=="Good"){x="sb.good";}var w={status:x,actual:this.autoFormatter(c,i),target:this.autoFormatter(T.targetValue,i),cH:this.autoFormatter(T.criticalHighValue,i),wH:this.autoFormatter(T.warningHighValue,i),wL:this.autoFormatter(T.warningLowValue,i),cL:this.autoFormatter(T.criticalLowValue,i)};var e=d.oKpiTileView.getContent()[0].getTileContent()[0]&&d.oKpiTileView.getContent()[0].getTileContent()[0].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(e,t,w);}},
getTrendColor:function(t){var b=this,w,c,d,f;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;this.DEFINITION_DATA.EVALUATION_VALUES;var r=sap.m.ValueColor.Neutral;if(i==="MI"){if(t.criticalHighValue&&t.warningHighValue){f=Number(t.criticalHighValue);d=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<d){r=sap.m.ValueColor.Good;}else if(this.CALCULATED_KPI_VALUE<=f){r=sap.m.ValueColor.Critical;}else{r=sap.m.ValueColor.Error;}}}else if(i==="MA"){if(t.criticalLowValue&&t.warningLowValue){c=Number(t.criticalLowValue);w=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<c){r=sap.m.ValueColor.Error;}else if(this.CALCULATED_KPI_VALUE<=w){r=sap.m.ValueColor.Critical;}else{r=sap.m.ValueColor.Good;}}}else{if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){f=Number(t.criticalHighValue);d=Number(t.warningHighValue);w=Number(t.warningLowValue);c=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<c||this.CALCULATED_KPI_VALUE>f){r=sap.m.ValueColor.Error;}else if((this.CALCULATED_KPI_VALUE>=c&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=d&&this.CALCULATED_KPI_VALUE<=f)){r=sap.m.ValueColor.Critical;}else{r=sap.m.ValueColor.Good;}}}return r;}catch(e){b.logError(e);}},
getTrendIndicator:function(t){var b=this;t=Number(t);try{var c=sap.m.DeviationIndicator.None;if(t>this.CALCULATED_KPI_VALUE){c=sap.m.DeviationIndicator.Down;}else if(t<this.CALCULATED_KPI_VALUE){c=sap.m.DeviationIndicator.Up;}return c;}catch(e){b.logError(e);}},
setTextInTile:function(){var t=this;var b=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:b.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:b.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},
_getEvaluationThresholdMeasures:function(){var t=[];t.push(this.oConfig.EVALUATION.COLUMN_NAME);if(this.oConfig.EVALUATION.VALUES_SOURCE==="MEASURE"){var b=this.oConfig.EVALUATION_VALUES;if(b&&b.length){for(var i=0;i<b.length;i++){if((b[i]).COLUMN_NAME&&!((b[i]).FIXED)){t.push((b[i]).COLUMN_NAME);}}}}return t;},
onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}
});
return g;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorArea/AreaChartTile.controller',['sap/ushell/components/tiles/generic'],function(g){"use strict";
var A=g.extend("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=false;},
doProcess:function(r,i){this.onAfterFinalEvaluation(r,i);},
doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({footer:"",description:"",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);},
scheduleJob:function(d){if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}},
onAfterFinalEvaluation:function(r,d){var t=this;var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var E=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var m=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var f=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(f==undefined){this.logError();return;}var h=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var j=this.DEFINITION_DATA.EVALUATION_VALUES;var k=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(k){var l=k.Data&&JSON.parse(k.Data);}}var n=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var o=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,n,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);var p=m;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(h){case"MI":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningHigh&&t.sCriticalHigh&&t.sTarget){p+=","+t.sWarningHigh+","+t.sCriticalHigh+","+t.sTarget;}break;case"MA":t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget){p+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget;}break;case"RA":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget&&t.sWarningHigh&&t.sCriticalHigh){p+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget+","+t.sWarningHigh+","+t.sCriticalHigh;}break;}}var q=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);if((l&&!l.rightData)||!k||(!o&&t.oTileApi.visible.isVisible())||q||(d&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh){if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,E,p,f,v);if(Q){this.queryUriForTrendChart=Q.uri;var w={};try{this.trendChartODataReadRef=Q.model.read(Q.uri,null,null,true,function(a){t.kpiValueFetchDeferred=true;if(a&&a.results&&a.results.length){if(Q.unit[0]){t.unit=a.results[0][Q.unit[0].name];t.CURRENCY_CODE=t.unit;w.unit=Q.unit[0];w.unit.name=Q.unit[0].name;}t.queryUriResponseForTrendChart=a;f=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oRunTimeODataModel,E,f);a.results.splice(10);a.firstXlabel=a.results[0][f];a.lastXlabel=a.results[a.results.length-1][f];w.data=a;if(w&&w.data&&w.data.results&&w.data.results.length){for(var i=0;i<w.data.results.length;i++){delete w.data.results[i].__metadata;}}w.isCurM=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);w.dimensionName=f;_(a,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);var c={};t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();c.ChipId=t.oConfig.TILE_PROPERTIES.id;c.Data=JSON.stringify(w);c.CacheMaxAge=Number(t.chipCacheTime);c.CacheMaxAgeUnit=t.chipCacheTimeUnit;c.CacheType=1;var b=t.getLocalCache(c);if(t.DEFINITION_DATA.TILE_PROPERTIES.frameType==sap.m.FrameType.TwoByOne){var y=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(y){if(!y.CachedTime){y.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}var z=y.Data;if(z){z=JSON.parse(z);z.rightData=w;}y.Data=JSON.stringify(z);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,y);}else{var z={};z.rightData=w;b.Data=JSON.stringify(z);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,b);}t.cacheWriteData=w;t.getView().getViewData().deferredObj.resolve();}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,b);var U=false;if(k){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,c,U,function(a){if(a){t.cacheTime=a&&a.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,a);t.setTimeStamp();}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){jQuery.proxy(t.setTimeStamp(t.cacheTime),t);}});}t.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);t.updateDatajobScheduled=false;var B=t.oConfig.TILE_PROPERTIES.id+"data";var C=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(B);if(C){clearTimeout(C);C=undefined;}jQuery.proxy(t.scheduleJob(t.cacheTime),t);}}else{t.setNoData();}},function(a){t.kpiValueFetchDeferred=true;if(a&&a.response){t.logError("Data call failed");}});}catch(e){t.kpiValueFetchDeferred=true;t.logError(e);}}else{t.kpiValueFetchDeferred=true;t.logError();}}}else{if(k&&k.Data){try{var s;var x=t.oConfig&&t.oConfig.TILE_PROPERTIES&&t.oConfig.TILE_PROPERTIES.tileType;if(x.indexOf("DT-")==-1){s=k.Data&&JSON.parse(k.Data);}else{s=k.Data&&JSON.parse(k.Data);s=s.rightData;}if(s.unit){t.unit=s.data.results[0][s.unit.name];t.CURRENCY_CODE=t.unit;}t.cacheTime=k.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){jQuery.proxy(t.setTimeStamp(t.cacheTime),t);}t.queryUriResponseForTrendChart=s.data;f=s.dimensionName;_(s.data,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);if(t.oConfig.TILE_PROPERTIES.frameType==sap.m.FrameType.OneByOne){t.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);}else{t.getView().getViewData().deferredObj.resolve();}jQuery.proxy(t.scheduleJob(t.cacheTime),t);}catch(e){t.logError(e);}}else{t.setNoData();}}function _(y,z){var B=[];var C=[];var D=[];var F=[];var G=[];var H=[];var I=y.firstXlabel;var J,K,L,M,N;var O=y.lastXlabel;var P=Number(y.results[0][m]);var R=Number(y.results[y.results.length-1][m]);var i;for(i in y.results){y.results[i][f]=Number(i);y.results[i][m]=Number(y.results[i][m]);t.sWarningHigh?y.results[i][t.sWarningHigh]=Number(y.results[i][t.sWarningHigh]):"";t.sCriticalHigh?y.results[i][t.sCriticalHigh]=Number(y.results[i][t.sCriticalHigh]):"";t.sCriticalLow?y.results[i][t.sCriticalLow]=Number(y.results[i][t.sCriticalLow]):"";t.sWarningLow?y.results[i][t.sWarningLow]=Number(y.results[i][t.sWarningLow]):"";t.sTarget?y.results[i][t.sTarget]=Number(y.results[i][t.sTarget]):"";t.sWarningHigh?D.push(y.results[i][t.sWarningHigh]):"";t.sCriticalHigh?F.push(y.results[i][t.sCriticalHigh]):"";t.sCriticalLow?G.push(y.results[i][t.sCriticalLow]):"";t.sWarningLow?H.push(y.results[i][t.sWarningLow]):"";B.push(y.results[i][f]);C.push(y.results[i][m]);}try{I=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(I);O=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(O);}catch(e){t.logError(e);}var S=Number(P);if(t.oConfig.EVALUATION.SCALING==-2){S*=100;}var T=Math.min.apply(Math,C);var c=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var U=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(S,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION,c,t.CURRENCY_CODE);if(t.oConfig.EVALUATION.SCALING==-2){U+=" %";}var V=U.toString();var W=Number(R);if(t.oConfig.EVALUATION.SCALING==-2){W*=100;}var X=Math.max.apply(Math,C);c=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var Y=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(W,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION,c,t.CURRENCY_CODE);if(t.oConfig.EVALUATION.SCALING==-2){Y+=" %";}var Z=Y.toString();try{var $=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,B));var a1=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,B));}catch(e){t.logError(e);}if(z=="MEASURE"){(D.length!=0)?(t.firstwH=D[$])&&(t.lastwH=D[a1]):"";(F.length!=0)?(t.firstcH=F[$])&&(t.lastcH=F[a1]):"";(G.length!=0)?(t.firstcL=G[$])&&(t.lastcL=G[a1]):"";(H.length!=0)?(t.firstwL=H[$])&&(t.lastwL=H[a1]):"";}var b1={width:"100%",height:"100%",unit:t.unit||"",chart:{color:"Neutral",data:y.results},size:"Auto",minXValue:$,maxXValue:a1,minYValue:T,maxYValue:X,firstXLabel:{label:I+"",color:"Neutral"},lastXLabel:{label:O+"",color:"Neutral"},firstYLabel:{label:V+"",color:"Neutral"},lastYLabel:{label:Z+"",color:"Neutral"},minLabel:{},maxLabel:{}};switch(h){case"MA":for(i in j){if(j[i].TYPE=="CL"){b1.minThreshold={color:"Error"};var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);t.cl=Number(j[i].FIXED);b1.minThreshold.data=(z=="MEASURE")?y.results:[c1];J=(z=="MEASURE")?t.sCriticalLow:m;}else if(j[i].TYPE=="WL"){b1.maxThreshold={color:"Good"};var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);b1.maxThreshold.data=(z=="MEASURE")?y.results:[c1];K=(z=="MEASURE")?t.sWarningLow:m;t.wl=Number(j[i].FIXED);}else if(j[i].TYPE=="TA"){var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);b1.target={color:"Neutral"};b1.target.data=(z=="MEASURE")?y.results:[c1];N=(z=="MEASURE")?t.sTarget:m;}}b1.innerMinThreshold={data:[]};b1.innerMaxThreshold={data:[]};if(z=="FIXED"){b1.firstYLabel.color=P<t.cl?"Error":((t.cl<=P)&&(P<=t.wl))?"Critical":(P>t.wl)?"Good":"Neutral";b1.lastYLabel.color=R<t.cl?"Error":((t.cl<=R)&&(R<=t.wl))?"Critical":(R>t.wl)?"Good":"Neutral";}else if(z=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL){b1.firstYLabel.color=P<t.firstcL?"Error":((t.firstcL<=P)&&(P<=t.firstwL))?"Critical":(P>t.firstwL)?"Good":"Neutral";b1.lastYLabel.color=R<t.lastcL?"Error":((t.lastcL<=R)&&(R<=t.lastwL))?"Critical":(R>t.lastwL)?"Good":"Neutral";}break;case"MI":for(i in j){if(j[i].TYPE=="CH"){var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);t.ch=Number(j[i].FIXED);b1.maxThreshold={color:"Error"};b1.maxThreshold.data=(z=="MEASURE")?y.results:[c1];K=(z=="MEASURE")?t.sCriticalHigh:m;}else if(j[i].TYPE=="WH"){var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);t.wh=Number(j[i].FIXED);b1.minThreshold={color:"Good"};b1.minThreshold.data=(z=="MEASURE")?y.results:[c1];J=(z=="MEASURE")?t.sWarningHigh:m;}else if(j[i].TYPE=="TA"){var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);b1.target={color:"Neutral"};b1.target.data=(z=="MEASURE")?y.results:[c1];N=(z=="MEASURE")?t.sTarget:m;}}if(z=="FIXED"){b1.firstYLabel.color=P>t.ch?"Error":((t.wh<=P)&&(P<=t.ch))?"Critical":(P<t.wh)?"Good":"Neutral";b1.lastYLabel.color=R>t.ch?"Error":((t.wh<=R)&&(R<=t.ch))?"Critical":(R<t.wh)?"Good":"Neutral";}else if(z=="MEASURE"&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){b1.firstYLabel.color=P>t.firstcH?"Error":((t.firstwH<=P)&&(P<=t.firstcH))?"Critical":(P<t.firstwH)?"Good":"Neutral";b1.lastYLabel.color=R>t.lastcH?"Error":((t.lastwH<=R)&&(R<=t.lastcH))?"Critical":(R<t.lastwH)?"Good":"Neutral";}b1.innerMaxThreshold={data:[]};b1.innerMinThreshold={data:[]};break;case"RA":for(i in j){if(j[i].TYPE=="CH"){var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);t.ch=Number(j[i].FIXED);b1.maxThreshold={color:"Error"};b1.maxThreshold.data=(z=="MEASURE")?y.results:[c1];K=(z=="MEASURE")?t.sCriticalHigh:m;}else if(j[i].TYPE=="WH"){var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);t.wh=Number(j[i].FIXED);b1.innerMaxThreshold={color:"Good"};b1.innerMaxThreshold.data=(z=="MEASURE")?y.results:[c1];M=(z=="MEASURE")?t.sWarningHigh:m;}else if(j[i].TYPE=="WL"){var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);t.wl=Number(j[i].FIXED);b1.innerMinThreshold={color:"Good"};b1.innerMinThreshold.data=(z=="MEASURE")?y.results:[c1];L=(z=="MEASURE")?t.sWarningLow:m;}else if(j[i].TYPE=="CL"){var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);t.cl=Number(j[i].FIXED);b1.minThreshold={color:"Error"};b1.minThreshold.data=(z=="MEASURE")?y.results:[c1];J=(z=="MEASURE")?t.sCriticalLow:m;}else if(j[i].TYPE=="TA"){var c1={};c1[f]="";c1[m]=Number(j[i].FIXED);b1.target={color:"Neutral"};b1.target.data=(z=="MEASURE")?y.results:[c1];N=(z=="MEASURE")?t.sTarget:m;}}if(z=="FIXED"){b1.firstYLabel.color=(P>t.ch||P<t.cl)?"Error":((t.wh<=P)&&(P<=t.ch))||((t.cl<=P)&&(P<=t.wl))?"Critical":((P>=t.wl)&&(P<=t.wh))?"Good":"Neutral";b1.lastYLabel.color=(R>t.ch||R<t.cl)?"Error":((t.wh<=R)&&(R<=t.ch))||((t.cl<=R)&&(R<=t.wl))?"Critical":((R>=t.wl)&&(R<=t.wh))?"Good":"Neutral";}else if(z=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){b1.firstYLabel.color=(P>t.firstcH||P<t.firstcL)?"Error":((t.firstwH<=P)&&(P<=t.firstcH))||((t.firstcL<=P)&&(P<=t.firstwL))?"Critical":((P>=t.firstwL)&&(P<=t.firstwH))?"Good":"Neutral";b1.lastYLabel.color=(R>t.lastcH||R<t.lastcL)?"Error":((t.lastwH<=R)&&(R<=t.lastcH))||((t.lastcL<=R)&&(R<=t.lastwL))?"Critical":((R>=t.lastwL)&&(R<=t.lastwH))?"Good":"Neutral";}break;}var d1=function(f1,a,b,z){return new sap.suite.ui.microchart.AreaMicroChartItem({color:"{/"+f1+"/color}",points:{path:"/"+f1+"/data",template:new sap.suite.ui.microchart.AreaMicroChartPoint({x:"{"+a+"}",y:"{"+b+"}"})}});};var e1=t.getView().oNVConfContS;e1.setTarget(d1("target",f,N));e1.setInnerMinThreshold(d1("innerMinThreshold",f,L));e1.setInnerMaxThreshold(d1("innerMaxThreshold",f,M));e1.setMinThreshold(d1("minThreshold",f,J));e1.setMaxThreshold(d1("maxThreshold",f,K));e1.setChart(d1("chart",f,m));t.setTextInTile();if(t.getView().getViewData().parentController){t.getView().getViewData().parentController._updateTileModel(b1);}else{t._updateTileModel(b1);}}}
});
return A;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorDual/DualTile.controller',function(){"use strict";sap.ui.controller("sap.ushell.components.tiles.indicatorDual.DualTile",{getRelativeTime:function(){var c=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();this.cacheTime=(jQuery.type(this.cacheTime)=="date")?this.cacheTime:new Date(parseInt(this.cacheTime.substr(6),10));var r=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(c-this.cacheTime);var a;switch(r.unit){case"minutes":var o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"minutes");c=c-o;a=new Date(c);break;case"hours":var o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"hours");c=c-o;a=new Date(c);break;case"days":var o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"days");c=c-o;a=new Date(c);break;}return a;},getTile:function(){return this.oKpiTileView.oGenericTile;},setTimeStamp:function(){this.updateTimeStampjobScheduled=false;var f=sap.ui.core.format.DateFormat.getDateTimeInstance({relative:true,relativeSource:"auto"});var t=f.format(this.getRelativeTime());var l=this.getView().oGenericTile.getTileContent()[0];l&&l.setRefreshOption&&l.setRefreshOption(true);l&&l.setTimestamp&&l.setTimestamp(t);this.updateTimeStampjobScheduled=false;var k=this.oConfig.TILE_PROPERTIES.id+"time";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k);if(r){clearTimeout(r);r=undefined;}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible());},getLocalCache:function(c){var l={};l.ChipId=c.ChipId;l.Data=c.Data;l.CacheMaxAge=c.CacheMaxAgeUnit;l.CacheMaxAgeUnit=c.CacheMaxAgeUnit;l.CacheType=c.CacheType;l.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return l;},refreshPress:function(){this.initProcess(true);},_getView:function(v,d,r){var a=this.oKpiTileView.getViewData();var b=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:v,viewData:jQuery.extend(true,{},a,{parentController:this},{deferredObj:d},{refresh:r})});return b;},logError:function(e){this._updateTileModel({value:"",scale:"",unit:""});if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject();}},doProcess:function(r){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(this.oKpiTileView.oConfig.TILE_PROPERTIES.id+"defferedLeft",this.deferred_left);sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(this.oKpiTileView.oConfig.TILE_PROPERTIES.id+"defferedRight",this.deferred_right);var t=this;this.getView().oGenericTile.removeAllTileContent();var s=this.getView().oGenericTile;this.leftView;this.rightView;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loading);var a=t.tileType.split("-")[1];try{var v;v="sap.ushell.components.tiles.indicatornumeric.NumericTile";this.leftView=t._getView(v,this.deferred_left,r);this.leftView.getController().dataCallInProgress=false;s.addTileContent(this.leftView.oGenericTile.getTileContent()[0]);switch(a){case"CM":v="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"CT":v="sap.ushell.components.tiles.indicatorcontribution.ContributionTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"AT":v="sap.ushell.components.tiles.indicatordeviation.DeviationTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"TT":v="sap.ushell.components.tiles.indicatorArea.AreaChartTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;}this.leftView.getController().onAfterTileRendering();this.rightView.getController().onAfterTileRendering();var l=this.getView().oGenericTile.getTileContent()[0];l&&l.attachRefresh&&l.attachRefresh(jQuery.proxy(this.refreshPress,t));}catch(e){this.logError(e);}},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);},setTextInTile:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},doDummyProcess:function(){var t=this;try{t.setTextInTile();switch(t.tileType){case"DT-CM":t._updateTileModel({value:1,size:sap.m.Size.Auto,frameType:sap.m.FrameType.TwoByOne,state:sap.m.LoadState.Loading,valueColor:sap.m.ValueColor.Good,indicator:sap.m.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});break;case"DT-AT":t._updateTileModel({valueColor:"Good",value:100,frameType:sap.m.FrameType.TwoByOne,unit:"USD",actual:{value:120,color:sap.m.ValueColor.Good},targetValue:100,thresholds:[{value:0,color:sap.m.ValueColor.Error},{value:50,color:sap.m.ValueColor.Critical},{value:150,color:sap.m.ValueColor.Critical},{value:200,color:sap.m.ValueColor.Error}],showActualValue:true,showTargetValue:true});break;case"DT-CT":t._updateTileModel({value:8888,size:sap.m.Size.Auto,frameType:sap.m.FrameType.TwoByOne,state:sap.m.LoadState.Loading,valueColor:sap.m.ValueColor.Error,indicator:sap.m.DeviationIndicator.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});break;case"DT-TT":this._updateTileModel({value:8888,size:sap.m.Size.Auto,frameType:sap.m.FrameType.TwoByOne,state:sap.m.LoadState.Loading,valueColor:sap.m.ValueColor.Error,indicator:sap.m.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});break;}}catch(e){}},visibleHandler:function(i){if(!i){if(this.leftView){this.leftView.getController().firstTimeVisible=false;}if(this.rightView){this.rightView.getController().firstTimeVisible=false;}sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){if(this.leftView){this.leftView.getController().refreshHandler();}if(this.rightView){this.rightView.getController().refreshHandler();}}},initProcess:function(r){var t=this;this.oKpiTileView=this.getView();this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();this.viewData={};t.viewData=this.oKpiTileView.getViewData();this.oTileApi=this.viewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.deferred_left=new jQuery.Deferred();this.deferred_right=new jQuery.Deferred();$.when(this.deferred_left,this.deferred_right).done(function(){t.setTextInTile();t.oConfig=t.oKpiTileView.oConfig;t.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t.oConfig);t.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t.oConfig);var l=t.leftView.getController().cacheWriteData;var a=t.rightView.getController().cacheWriteData;t.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oKpiTileView.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oKpiTileView.oConfig.TILE_PROPERTIES.id,null);window.location.hash=n;});var c={};var w={};w.leftData=l;w.rightData=a;c.ChipId=t.oConfig.TILE_PROPERTIES.id;c.Data=JSON.stringify(w);c.CacheMaxAge=Number(t.chipCacheTime);c.CacheMaxAgeUnit=t.chipCacheTimeUnit;c.CacheType=1;var b=t.getLocalCache(c);if(w.leftData&&w.rightData){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,b);}var d=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(t.chipCacheTime&&w.leftData&&w.rightData){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,c,false,function(e){if(e){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,e);t.cacheTime=e.CachedTime;t.setTimeStamp.call(t);}});}if(t.chipCacheTime){if(!t.cacheTime){t.cacheTime=d.CachedTime;}t.setTimeStamp.call(t);sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(t,t.oTileApi.visible.isVisible());}}).fail(function(){t.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Failed);});t.tileType=t.oKpiTileView.oConfig.TILE_PROPERTIES.tileType;this.oTileApi=t.viewData.chip;if(this.oTileApi.preview.isEnabled()){this.doDummyProcess();t.oKpiTileView.oGenericTile.attachPress(function(){sap.m.MessageToast.show(t.oResourceBundle.getText("sb.NavigationHelp"));});}else{this.doProcess(r);}},onAfterRendering:function(){this.initProcess();},setNoData:function(){try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);}catch(e){}},getChipConfiguration:function(c){var t=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),t.oTileApi.preview.isEnabled(),function(a){t.oConfig=a;c.call();});}catch(e){t.logError(e.message);}}});return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualComparison/DualComparison.controller',["sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil"],function(u){"use strict";sap.ui.controller("tiles.indicatorDualComparison.DualComparison",{getTile:function(){return this.oDualComparisonView.oGenericTile;},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);},setTitle:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},logError:function(e){this.oDualComparisonView.oGenericTile.setState(sap.m.LoadState.Failed);this.oDualComparisonView.oGenericTile.setState(sap.m.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},getTrendColor:function(t){var a=this;var c,w,b,d;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var r=sap.m.ValueColor.Neutral;if(i==="MI"){if(t.criticalHighValue&&t.warningHighValue){c=Number(t.criticalHighValue);w=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<w){r=sap.m.ValueColor.Good;}else if(this.CALCULATED_KPI_VALUE<=c){r=sap.m.ValueColor.Critical;}else{r=sap.m.ValueColor.Error;}}}else if(i==="MA"){if(t.criticalLowValue&&t.warningLowValue){b=Number(t.criticalLowValue);d=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<b){r=sap.m.ValueColor.Error;}else if(this.CALCULATED_KPI_VALUE<=d){r=sap.m.ValueColor.Critical;}else{r=sap.m.ValueColor.Good;}}}else{if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){c=Number(t.criticalHighValue);w=Number(t.warningHighValue);d=Number(t.warningLowValue);b=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<b||this.CALCULATED_KPI_VALUE>c){r=sap.m.ValueColor.Error;}else if((this.CALCULATED_KPI_VALUE>=b&&this.CALCULATED_KPI_VALUE<=d)||(this.CALCULATED_KPI_VALUE>=w&&this.CALCULATED_KPI_VALUE<=c)){r=sap.m.ValueColor.Critical;}else{r=sap.m.ValueColor.Good;}}}return r;}catch(e){a.logError(e);}},_processDataForComparisonChart:function(d,m,a){var f=[],L={},i,t,l;var b;var T=[];var c=this;for(i=0;i<d.results.length;i++){var e=d.results[i];}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oConfig.EVALUATION.ODATA_URL,this.oConfig.EVALUATION.ODATA_ENTITYSET);for(i=0,l=T.length;i<l;i++){t=T[i];L[t.key]=t.value;}var g=c.oConfig.TILE_PROPERTIES.COLUMN_NAMES||c.oConfig.EVALUATION.COLUMN_NAMES;for(i=0;i<g.length;i++){var h={};var j=g[i];h.value=Number(e[j.COLUMN_NAME]);var k=Number(e[j.COLUMN_NAME]);if(c.oConfig.EVALUATION.SCALING==-2){k*=100;}b=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(k,c.oConfig.EVALUATION.SCALING,c.oConfig.EVALUATION.DECIMAL_PRECISION);if(c.oConfig.EVALUATION.SCALING==-2){b+=" %";}h.displayValue=b.toString();if(a[i]&&e[a[i].name]){h.displayValue+=" "+e[a[i].name];}h.color=j.semanticColor;h.title=L[j.COLUMN_NAME]||j.COLUMN_NAME;f.push(h);}return f;},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=sap.m.DeviationIndicator.None;if(t>v){b=sap.m.DeviationIndicator.Down;}else if(t<v){b=sap.m.DeviationIndicator.Up;}return b;}catch(e){a.logError(e);}},fetchKpiValue:function(s,E){var t=this;try{var U=this.oConfig.EVALUATION.ODATA_URL;var a=this.oConfig.EVALUATION.ODATA_ENTITYSET;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){var m=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{var m=this.oConfig.EVALUATION.COLUMN_NAME;var b=m;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(var j=0;j<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;j++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){b=b+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME;}}}}var d=this.oConfig.EVALUATION_VALUES;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=m+",asc";o["1"]=m+",desc";var f=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var g=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(U),a,b,null,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){g.uri+="&$orderby="+f[0]+" "+f[2];}else{g.uri+="&$orderby="+f[0]+" "+f[1];}this.writeData={};this.comparisionChartODataRef=g.model.read(g.uri,null,null,true,function(d){if(d&&d.results&&d.results.length){if(g.unit){t.writeData.unit=g.unit;}t.oConfig.TILE_PROPERTIES.FINALVALUE=d;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,b.split(",")[0],g.unit);t.writeData.data=d;var k;for(var i=0;i<t.oConfig.TILE_PROPERTIES.FINALVALUE.length;i++){if(t.oConfig.TILE_PROPERTIES.FINALVALUE[i].title==t.DEFINITION_DATA.EVALUATION.COLUMN_NAME){t.writeData.numericData=t.oConfig.TILE_PROPERTIES.FINALVALUE[i];calculatedValueforScaling=t.oConfig.TILE_PROPERTIES.FINALVALUE[i].value;t.getTrendIndicator(t.setThresholdValues().trendValue,calculatedValueforScaling);t._updateTileModel({valueColor:t.oConfig.TILE_PROPERTIES.FINALVALUE[i].color,value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(k),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString()});break;}}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(d.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=d;t.writeData.data=d;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{E.call(t,"no Response from QueryServiceUri");}},function(i){if(i&&i.response){jQuery.sap.log.error(i.message+" : "+i.request.requestUri);E.call(t,i);}});if(!t.writeData.numericData){var h=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(U),a,m,null,h);if(q){t.QUERY_SERVICE_MODEL=q.model;t.queryUriForKpiValue=q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(d){if(d&&d.results&&d.results.length){if(q.unit){t._updateTileModel({unitNumeric:d.results[0][q.unit.name]});t.writeData.unitNumeric=q.unit;t.writeData.unitNumeric.name=q.unit.name;}t.writeData.numericData=d.results[0];t.DEFINITION_DATA.value=t.writeData.numericData[t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];t.writeData.numericData.color=t.getTrendColor(t.setThresholdValues());t.DEFINITION_DATA.valueColor=t.writeData.numericData.color;var S="";var i=d.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var k=t.getTrendIndicator(t.setThresholdValues().trendValue,i);if(t.oConfig.EVALUATION.SCALING==-2){i*=100;t.getView().oNumericContent.setFormatterValue(false);}S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(i),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:S.toString(),valueColor:t.writeData.numericData.color,indicator:k});}else{E.call(t,"no Response from QueryServiceUri");}});}}}else{if(c.unit){t._updateTileModel({unit:c.data.results[0][c.unit.name]});}if(c.data&&c.data.results&&c.data.results.length){t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;t._updateTileModel({value:c.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]});t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,b,t.writeData.unit);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(d.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{E.call(t,"no Response from QueryServiceUri");}}}catch(e){E.call(t,e);}},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k){this.CALCULATED_KPI_VALUE=k;t.oDualComparisonView.oGenericTile.setFrameType("TwoByOne");t.oDualComparisonView.oGenericTile.removeAllTileContent();t.oDualComparisonView.oGenericTile.addTileContent(t.oDualComparisonView.oNumericTile);t.oDualComparisonView.oGenericTile.addTileContent(t.oDualComparisonView.oComparisonTile);var c=this.CALCULATED_KPI_VALUE;var a,b;for(var i=0;i<c.length;i++){if(c[i].title==t.DEFINITION_DATA.EVALUATION.COLUMN_NAME){b=c[i].value;a=c[i].color||"Neutral";t._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(b),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),valueColor:a});break;}}if(!a&&!b){a=t.DEFINITION_DATA.valueColor;b=t.DEFINITION_DATA.value;}this._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(b),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),data:this.CALCULATED_KPI_VALUE});var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualComparisonView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oDualComparisonView.oGenericTile.setState(sap.m.LoadState.Loaded);var s="";if(a=="Error"){s="sb.error";}if(a=="Neutral"){s="sb.neutral";}if(a=="Critical"){s="sb.critical";}if(a=="Good"){s="sb.good";}var T=t.setThresholdValues();var m,d,e,v,f,g,h,j,l;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){m=this.CALCULATED_KPI_VALUE[0].title;v=this.CALCULATED_KPI_VALUE[0].value;h=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){d=this.CALCULATED_KPI_VALUE[1].title;f=this.CALCULATED_KPI_VALUE[1].value;j=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){e=this.CALCULATED_KPI_VALUE[2].title;g=this.CALCULATED_KPI_VALUE[2].value;l=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color);}var o={status:s,actual:b,target:T.targetValue,cH:T.criticalHighValue,wH:T.warningHighValue,wL:T.warningLowValue,cL:T.criticalLowValue};var p={m1:m,v1:v,c1:h,m2:d,v2:f,c2:j,m3:e,v3:g,c3:l};var C=t.oDualComparisonView.oGenericTile.getTileContent()[0].getContent();var q=t.oDualComparisonView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",o);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(q,"COMP",p);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualComparisonView=this.getView();this.oChip=this.oDualComparisonView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oChip.url.getApplicationSystem();this.oDualComparisonView.oGenericTile.setState(sap.m.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),function(c){t.oConfig=c;if(t.oChip.preview){t.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oChip.preview.isEnabled()){t.setTitle();t._updateTileModel({value:1,size:sap.m.Size.Auto,frameType:"TwoByOne",state:sap.m.LoadState.Loading,valueColor:sap.m.ValueColor.Good,indicator:sap.m.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});t.oDualComparisonView.oGenericTile.setState(sap.m.LoadState.Loaded);}else{t.oConfig.TILE_PROPERTIES.FINALVALUE;t.setTitle();t.oDualComparisonView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}});return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualContribution/DualContribution.controller',function(){"use strict";sap.ui.controller("tiles.indicatorDualContribution.DualContribution",{getTile:function(){return this.oDualContributionView.oGenericTile;},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);this.getTile().getModel().updateBindings();},setTitle:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},logError:function(e){this.oDualContributionView.oGenericTile.setState(sap.m.LoadState.Failed);this.oDualContributionView.oGenericTile.setState(sap.m.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=sap.m.DeviationIndicator.None;if(t>v){b=sap.m.DeviationIndicator.Down;}else if(t<v){b=sap.m.DeviationIndicator.Up;}return b;}catch(e){a.logError(e);}},_processDataForComparisonChart:function(d,m,a){var s=this.oConfig.TILE_PROPERTIES.semanticMeasure;var f=[];var t;for(var i=0;i<d.results.length;i++){var b=d.results[i];var c={};try{c.title=b[a].toString();}catch(e){c.title="";}c.value=Number(b[m]);var g=Number(b[m]);if(this.oConfig.EVALUATION.SCALING==-2){g*=100;}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(g,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);c.displayValue=t.toString();if(typeof s==='undefined'){c.color="Neutral";}else{if(this.oConfig.EVALUATION.GOAL_TYPE==="MA"){if(c.value>b[s]){c.color="Good";}else{c.color="Error";}}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MI"){if(c.value<b[s]){c.color="Good";}else{c.color="Error";}}else{c.color="Neutral";}}f.push(c);}return f;},fetchKpiValue:function(s,E){var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL;var a=this.oConfig.EVALUATION.ODATA_ENTITYSET;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){var m=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{var m=this.oConfig.EVALUATION.COLUMN_NAME;}var d=this.oConfig.TILE_PROPERTIES.dimension;var b=this.oConfig.EVALUATION_VALUES;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=m+",asc";o["1"]=m+",desc";o["2"]=d+",asc";o["3"]=d+",desc";var f=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var g=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),a,m,d,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){g.uri+="&$top=3&$orderby="+f[0]+" "+f[2];}else{g.uri+="&$top=3&$orderby="+f[0]+" "+f[1];}this.comparisionChartODataRef=g.model.read(g.uri,null,null,true,function(b){if(g.unit[0]){t._updateTileModel({unitContribution:b.results[0][g.unit[0].name]});t.writeData.unitContribution=g.unit[0];t.writeData.unitContribution.name=g.unit[0].name;}if(b&&b.results&&b.results.length){d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oChip.url.addSystemToServiceUrl(u),a,d);t.writeData.dimension=d;t.oConfig.TILE_PROPERTIES.FINALVALUE=b;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,m.split(",")[0],d);t.writeData.data=b;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(b.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=b;t.writeData.data=b;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);}else{E.call(t,"no Response from QueryServiceUri");}},function(k){if(k&&k.response){jQuery.sap.log.error(k.message+" : "+k.request.requestUri);E.call(t,k);}});var h=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),a,m,null,h);if(q){t.QUERY_SERVICE_MODEL=q.model;t.queryUriForKpiValue=q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(b){if(b&&b.results&&b.results.length){if(q.unit){t._updateTileModel({unitNumeric:b.results[0][q.unit.name]});t.writeData.unitNumeric=q.unit;t.writeData.unitNumeric.name=q.unit.name;}t.writeData.numericData=b;var S="";var i=b.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var j=t.getTrendIndicator(t.setThresholdValues().trendValue,i);if(t.oConfig.EVALUATION.SCALING==-2){i*=100;t.getView().oNumericContent.setFormatterValue(false);}t.DEFINITION_DATA.value=i;S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(i),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:S.toString(),valueColor:t.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution,indicator:j});s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE,i);}else{E.call(t,"no Response from QueryServiceUri");}});}}else{var T=t.setThresholdValues();var i;if(c.unitContribution){t._updateTileModel({unitContribution:c.data.results[0][c.unitContribution.name]});}if(c.unitNumeric){t._updateTileModel({unitNumeric:c.numericData.results[0][c.unitNumeric.name]});}if(c.data&&c.data.results&&c.data.results.length){d=c.dimension;t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,m.split(",")[0],d);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(b.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;}else{E.call(t,"no Response from QueryServiceUri");}if(c.numericData&&c.numericData.results&&c.numericData.results.length){i=c.numericData.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING==-2){i*=100;t.getView().oNumericContent.setFormatterValue(false);}var S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(i),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}var j=t.getTrendIndicator(T.trendValue,i);t._updateTileModel({value:S.toString(),indicator:j,valueColor:t.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution});s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE,i);}else{E.call(t,"no Response from QueryServiceUri");}}}catch(e){E.call(t,e);}},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k,c){this.CALCULATED_KPI_VALUE=k;if(t.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){t.oDualContributionView.oGenericTile.setFrameType("TwoByOne");t.oDualContributionView.oGenericTile.removeAllTileContent();t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oNumericTile);t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oComparisonTile);}else{t.oDualContributionView.oGenericTile.setFrameType("OneByOne");t.oDualContributionView.oGenericTile.removeAllTileContent();t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oComparisonTile);}var d=this.CALCULATED_KPI_VALUE;var a=this.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution;for(var i=0;i<this.CALCULATED_KPI_VALUE.length;i++){d[i].color=a;}this._updateTileModel({data:d});var T=t.setThresholdValues();var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualContributionView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oDualContributionView.oGenericTile.setState(sap.m.LoadState.Loaded);var s="";if(a=="Error"){s="sb.error";}if(a=="Neutral"){s="sb.neutral";}if(a=="Critical"){s="sb.critical";}if(a=="Good"){s="sb.good";}var T=t.setThresholdValues();var m,b,e,v,f,g,h,j,l;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){m=this.CALCULATED_KPI_VALUE[0].title;v=this.CALCULATED_KPI_VALUE[0].value;h=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){b=this.CALCULATED_KPI_VALUE[1].title;f=this.CALCULATED_KPI_VALUE[1].value;j=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){e=this.CALCULATED_KPI_VALUE[2].title;g=this.CALCULATED_KPI_VALUE[2].value;l=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color);}var o={status:s,actual:c,target:T.targetValue,cH:T.criticalHighValue,wH:T.warningHighValue,wL:T.warningLowValue,cL:T.criticalLowValue};var p={m1:m,v1:v,c1:h,m2:b,v2:f,c2:j,m3:e,v3:g,c3:l};var C=t.oDualContributionView.oGenericTile.getTileContent()[0].getContent();var q=t.oDualContributionView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",o);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(q,"CONT",p);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},onInit:function(){var t=this;t.writeData={};this.firstTimeVisible=false;this.oDualContributionView=this.getView();this.oChip=this.oDualContributionView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oChip.url.getApplicationSystem();this.oDualContributionView.oGenericTile.setState(sap.m.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),function(c){t.oConfig=c;if(t.oChip.preview){t.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oChip.preview.isEnabled()){t.setTitle();t._updateTileModel({value:8888,size:sap.m.Size.Auto,frameType:"TwoByOne",state:sap.m.LoadState.Loading,valueColor:sap.m.ValueColor.Error,indicator:sap.m.DeviationIndicator.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});t.oDualContributionView.oGenericTile.setState(sap.m.LoadState.Loaded);}else{t.setTitle();t.oDualContributionView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.controller',function(){"use strict";sap.ui.controller("tiles.indicatorDualDeviation.DualDeviation",{logError:function(e){this.oDualDeviationView.oGenericTile.setState(sap.m.LoadState.Failed);this.oDualDeviationView.oGenericTile.setState(sap.m.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},getThresholdsObjAndColor:function(t){try{var T={};T.arrObj=[];T.returnColor=sap.m.ValueColor.Neutral;var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var w,c,a,b;if(i==="MI"){a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;if(a&&b){a=window.parseFloat(a);b=window.parseFloat(b);T.arrObj.push({value:a,color:sap.m.ValueColor.Error});T.arrObj.push({value:b,color:sap.m.ValueColor.Critical});if(this.CALCULATED_KPI_VALUE<b){T.returnColor=sap.m.ValueColor.Good;}else if(this.CALCULATED_KPI_VALUE<=a){T.returnColor=sap.m.ValueColor.Critical;}else{T.returnColor=sap.m.ValueColor.Error;}}}else if(i==="MA"){c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(c&&w){c=window.parseFloat(c);w=window.parseFloat(w);T.arrObj.push({value:c,color:sap.m.ValueColor.Error});T.arrObj.push({value:w,color:sap.m.ValueColor.Critical});if(this.CALCULATED_KPI_VALUE<c){T.returnColor=sap.m.ValueColor.Error;}else if(this.CALCULATED_KPI_VALUE<=w){T.returnColor=sap.m.ValueColor.Critical;}else{T.returnColor=sap.m.ValueColor.Good;}}}else{a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(w&&b&&c&&c){a=window.parseFloat(a);b=window.parseFloat(b);w=window.parseFloat(w);c=window.parseFloat(c);T.arrObj.push({value:a,color:sap.m.ValueColor.Error});T.arrObj.push({value:b,color:sap.m.ValueColor.Critical});T.arrObj.push({value:w,color:sap.m.ValueColor.Critical});T.arrObj.push({value:c,color:sap.m.ValueColor.Error});if(this.CALCULATED_KPI_VALUE<c||this.CALCULATED_KPI_VALUE>a){T.returnColor=sap.m.ValueColor.Error;}else if((this.CALCULATED_KPI_VALUE>=c&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=b&&this.CALCULATED_KPI_VALUE<=a)){T.returnColor=sap.m.ValueColor.Critical;}else{T.returnColor=sap.m.ValueColor.Good;}}}return T;}catch(e){this.logError(e);}},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=sap.m.DeviationIndicator.None;if(t>v){b=sap.m.DeviationIndicator.Down;}else if(t<v){b=sap.m.DeviationIndicator.Up;}return b;}catch(e){a.logError(e);}},getTile:function(){return this.oDualDeviationView.oGenericTile;},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},setThresholdValues:function(){var t=this;var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;},fetchKpiValue:function(s,E){var t=this;var k=0;try{var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var a=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var T=this.setThresholdValues();var m=T.fullyFormedMeasure;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),a,m,null,v);if(q){this.QUERY_SERVICE_MODEL=q.model;this.queryUriForKpiValue=q.uri;try{this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(f){t.writeData={};if(f&&f.results&&f.results.length){k=f.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(q.unit[0]){t._updateTileModel({unit:f.results[0][q.unit[0].name]});t.writeData.unit=q.unit[0];t.writeData.unit.name=q.unit[0].name;}t.writeData.numericData=f;var S="",d;var b=k;if(t.oConfig.EVALUATION.SCALING==-2){b*=100;t.getView().oNumericContent.setFormatterValue(false);}S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(b),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);d=t.getTrendIndicator(T.trendValue,b);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:S.toString(),indicator:d,valueColor:t.getThresholdsObjAndColor(T).returnColor});t.writeData.data=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=f.results[0][T.sCriticalHigh];T.criticalLowValue=f.results[0][T.sCriticalLow];T.warningHighValue=f.results[0][T.sWarningHigh];T.warningLowValue=f.results[0][T.sWarningLow];T.targetValue=f.results[0][T.sTarget];T.trendValue=f.results[0][T.sTrend];}s.call(t,k,T);}else{E.call(t,"no Response from QueryServiceUri");}},function(f){if(f&&f.response){E.call(t,f.message);}});}catch(e){t.logError("Error in Query Service URI");}}}else{if(c.data&&c.data.results&&c.data.results.length){var b,S,d,T;T=t.setThresholdValues();b=c.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING==-2){b*=100;t.getView().oNumericContent.setFormatterValue(true);}if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(b),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);d=t.getTrendIndicator(T.trendValue,b);if(c.unit){t._updateTileModel({unit:c.data.results[0][c.unit.name]});}t._updateTileModel({indicator:d,value:S.toString()});if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=c.data.results[0][T.sCriticalHigh];T.criticalLowValue=c.data.results[0][T.sCriticalLow];T.warningHighValue=c.data.results[0][T.sWarningHigh];T.warningLowValue=c.data.results[0][T.sWarningLow];T.targetValue=c.data.results[0][T.sTarget];T.trendValue=c.data.results[0][T.sTrend];}s.call(t,c.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME],T);}else{E.call(t,"no Response from QueryServiceUri");}}}catch(e){E.call(t,e);}},flowWithoutDesignTimeCall:function(){var t=this;var f,a;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k,b){var c=Number(k);if(this.oConfig.EVALUATION.SCALING==-2){c*=100;}f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(c),this.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);this.CALCULATED_KPI_VALUE=Number(k);var d={};var e=this.getThresholdsObjAndColor(b);var g={value:Number(k),color:e.returnColor};d.valueColor=g.color;d.actualValueLabel=f.toString();d.actual=g;var h=this.DEFINITION_DATA.EVALUATION_VALUES;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var i=Number(b.targetValue);if(this.oConfig.EVALUATION.SCALING==-2){i*=100;}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(i,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);d.targetValue=Number(b.targetValue);d.targetValueLabel=a.toString();}else{for(var j=0;j<h.length;j++){if(h[j].TYPE==="TA"){var i=Number(h[j].FIXED);if(this.oConfig.EVALUATION.SCALING==-2){i*=100;}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(i);d.targetValue=Number(h[j].FIXED);d.targetValueLabel=a.toString();}}}this._updateTileModel(d);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualDeviationView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oDualDeviationView.oGenericTile.setState(sap.m.LoadState.Loaded);var s="";if(d.valueColor=="Error"){s="sb.error";}if(d.valueColor=="Neutral"){s="sb.neutral";}if(d.valueColor=="Critical"){s="sb.critical";}if(d.valueColor=="Good"){s="sb.good";}var v={status:s,actual:c,target:b.targetValue,cH:b.criticalHighValue,wH:b.warningHighValue,wL:b.warningLowValue,cL:b.criticalLowValue};var l=v;var C=t.oDualDeviationView.oGenericTile.getTileContent()[0].getContent();var o=t.oDualDeviationView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",v);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(o,"DT",l);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);}if(i){this.refreshHandler(this);}},setTextInTile:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualDeviationView=this.getView();this.oViewData=this.oDualDeviationView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oTileApi.url.getApplicationSystem();this.oDualDeviationView.oGenericTile.setState(sap.m.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),t.oTileApi.preview.isEnabled(),function(c){t.oConfig=c;t.setTextInTile();if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oTileApi.preview.isEnabled()){t._updateTileModel({valueColor:"Good",value:100,frameType:"TwoByOne",unit:"USD",actual:{value:120,color:sap.m.ValueColor.Good},targetValue:100,thresholds:[{value:0,color:sap.m.ValueColor.Error},{value:50,color:sap.m.ValueColor.Critical},{value:150,color:sap.m.ValueColor.Critical},{value:200,color:sap.m.ValueColor.Error}],showActualValue:true,showTargetValue:true});t.oDualDeviationView.oGenericTile.setState(sap.m.LoadState.Loaded);}else{t.oDualDeviationView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new sap.ui.model.json.JSONModel({}));}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);}});return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualTrend/DualTrend.controller',function(){"use strict";sap.ui.controller("tiles.indicatorDualTrend.DualTrend",{logError:function(e){this.oDualTrendView.oGenericTile.setState(sap.m.LoadState.Failed);this.oDualTrendView.oGenericTile.setState(sap.m.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=sap.m.DeviationIndicator.None;if(t>v){b=sap.m.DeviationIndicator.Down;}else if(t<v){b=sap.m.DeviationIndicator.Up;}return b;}catch(e){a.logError(e);}},getTile:function(){return this.oDualTrendView.oGenericTile;},getTrendColor:function(t){var a=this;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var r=sap.m.ValueColor.Neutral;if(i==="MI"){if(t.criticalHighValue&&t.warningHighValue){t.criticalHighValue=Number(t.criticalHighValue);t.warningHighValue=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<t.warningHighValue){r=sap.m.ValueColor.Good;}else if(this.CALCULATED_KPI_VALUE<=t.criticalHighValue){r=sap.m.ValueColor.Critical;}else{r=sap.m.ValueColor.Error;}}}else if(i==="MA"){if(t.criticalLowValue&&t.warningLowValue){t.criticalLowValue=Number(t.criticalLowValue);t.warningLowValue=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<t.criticalLowValue){r=sap.m.ValueColor.Error;}else if(this.CALCULATED_KPI_VALUE<=t.warningLowValue){r=sap.m.ValueColor.Critical;}else{r=sap.m.ValueColor.Good;}}}else{if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){t.criticalHighValue=Number(t.criticalHighValue);t.warningHighValue=Number(t.warningHighValue);t.warningLowValue=Number(t.warningLowValue);t.criticalLowValue=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<t.criticalLowValue||this.CALCULATED_KPI_VALUE>t.criticalHighValue){r=sap.m.ValueColor.Error;}else if((this.CALCULATED_KPI_VALUE>=t.criticalLowValue&&this.CALCULATED_KPI_VALUE<=t.warningLowValue)||(this.CALCULATED_KPI_VALUE>=t.warningHighValue&&this.CALCULATED_KPI_VALUE<=t.criticalHighValue)){r=sap.m.ValueColor.Critical;}else{r=sap.m.ValueColor.Good;}}}return r;}catch(e){a.logError(e);}},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m);},onAfterFinalEvaluation:function(){var t=this;var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var E=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var m=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var d=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(d==undefined){this.logError();return;}var g=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var c=this.DEFINITION_DATA.EVALUATION_VALUES;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var f=m;switch(g){case"MI":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningHigh&&t.sCriticalHigh&&t.sTarget){f+=","+t.sWarningHigh+","+t.sCriticalHigh+","+t.sTarget;}break;case"MA":t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget){f+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget;}break;case"RA":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget&&t.sWarningHigh&&t.sCriticalHigh){f+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget+","+t.sWarningHigh+","+t.sCriticalHigh;}break;}var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,f,d,v);}else{var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,m,d,v);}var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!h){if(q){this.queryUriForTrendChart=q.uri;t.writeData={};try{this.trendChartODataReadRef=q.model.read(q.uri,null,null,true,function(a){if(a&&a.results&&a.results.length){if(q.unit[0]){t.unit=a.results[0][q.unit[0].name];t.writeData.unit=q.unit[0];t.writeData.unit.name=q.unit[0].name;}t.queryUriResponseForTrendChart=a;d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oTileApi.url.addSystemToServiceUrl(u),E,d);a.firstXlabel=a.results[0][d];a.lastXlabel=a.results[a.results.length-1][d];t.writeData.data=a;t.writeData.dimensionName=d;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualTrendView.oGenericTile.$().wrap("<a href ='"+n+"'/>");t.oDualTrendView.oGenericTile.setState(sap.m.LoadState.Loaded);_(a,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);}else{t.logError("no Response from QueryServiceUri");}},function(a){if(a&&a.response){t.logError("Data call failed");}});}catch(e){t.logError(e);}}else{t.logError();}var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,m,null,v);if(q){t.QUERY_SERVICE_MODEL=q.model;t.queryUriForKpiValue=q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(a){if(a&&a.results&&a.results.length){var s="";var j=a.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];t.writeData.numericData=a;if(t.oConfig.EVALUATION.SCALING==-2){j*=100;}s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(j),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}var k=t.getTrendIndicator(t.setThresholdValues().trendValue,j);t._updateTileModel({value:s.toString(),valueColor:t.getTrendColor(t.setThresholdValues()),indicator:k});}else{fnError.call(t,"no Response from QueryServiceUri");}});}}else{try{if(h.unit!==undefined){t.unit=h.data.results[0][h.unit.name];}t.queryUriResponseForTrendChart=h.data;d=h.dimensionName;var j=h.numericData.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var k=t.getTrendIndicator(t.setThresholdValues().trendValue,h.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]);var s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(j),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);t.oDualTrendView.oGenericTile.setState(sap.m.LoadState.Loaded);_(h.data,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);t._updateTileModel({value:s.toString(),valueColor:t.getTrendColor(t.setThresholdValues()),indicator:k});}catch(e){t.logError(e);}}function _(l,n){var o=[];var p=[];var w=[];var r=[];var x=[];var y=[];var z=l.firstXlabel;var A,B,C,D,F;var G=l.lastXlabel;var H=Number(l.results[0][m]);var I=Number(l.results[l.results.length-1][m]);var i;for(i in l.results){l.results[i][d]=Number(i);l.results[i][m]=Number(l.results[i][m]);t.sWarningHigh?l.results[i][t.sWarningHigh]=Number(l.results[i][t.sWarningHigh]):"";t.sCriticalHigh?l.results[i][t.sCriticalHigh]=Number(l.results[i][t.sCriticalHigh]):"";t.sCriticalLow?l.results[i][t.sCriticalLow]=Number(l.results[i][t.sCriticalLow]):"";t.sWarningLow?l.results[i][t.sWarningLow]=Number(l.results[i][t.sWarningLow]):"";t.sTarget?l.results[i][t.sTarget]=Number(l.results[i][t.sTarget]):"";t.sWarningHigh?w.push(l.results[i][t.sWarningHigh]):"";t.sCriticalHigh?r.push(l.results[i][t.sCriticalHigh]):"";t.sCriticalLow?x.push(l.results[i][t.sCriticalLow]):"";t.sWarningLow?y.push(l.results[i][t.sWarningLow]):"";o.push(l.results[i][d]);p.push(l.results[i][m]);}try{z=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(z);G=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(G);}catch(e){t.logError(e);}var J=Number(H);if(t.oConfig.EVALUATION.SCALING==-2){J*=100;}var K=Math.min.apply(Math,p);var L=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(J,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){L+=" %";}var M=L.toString();var N=Number(I);if(t.oConfig.EVALUATION.SCALING==-2){N*=100;}var O=Math.max.apply(Math,p);var P=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(N,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){P+=" %";}var Q=P.toString();try{var R=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,o));var S=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,o));}catch(e){t.logError(e);}if(n=="MEASURE"){(w.length!=0)?(t.firstwH=w[R])&&(t.lastwH=w[S]):"";(r.length!=0)?(t.firstcH=r[R])&&(t.lastcH=r[S]):"";(x.length!=0)?(t.firstcL=x[R])&&(t.lastcL=x[S]):"";(y.length!=0)?(t.firstwL=y[R])&&(t.lastwL=y[S]):"";}var T={width:"100%",height:"100%",unit:t.unit||"",chart:{color:"Neutral",data:l.results},size:"Auto",minXValue:R,maxXValue:S,minYValue:K,maxYValue:O,firstXLabel:{label:z+"",color:"Neutral"},lastXLabel:{label:G+"",color:"Neutral"},firstYLabel:{label:M+"",color:"Neutral"},lastYLabel:{label:Q+"",color:"Neutral"},minLabel:{},maxLabel:{}};switch(g){case"MA":for(i in c){if(c[i].TYPE=="CL"){T.minThreshold={color:"Error"};var U={};U[d]="";U[m]=Number(c[i].FIXED);t.cl=Number(c[i].FIXED);T.minThreshold.data=(n=="MEASURE")?l.results:[U];A=(n=="MEASURE")?t.sCriticalLow:m;}else if(c[i].TYPE=="WL"){T.maxThreshold={color:"Good"};var U={};U[d]="";U[m]=Number(c[i].FIXED);T.maxThreshold.data=(n=="MEASURE")?l.results:[U];B=(n=="MEASURE")?t.sWarningLow:m;t.wl=Number(c[i].FIXED);}else if(c[i].TYPE=="TA"){var U={};U[d]="";U[m]=Number(c[i].FIXED);T.target={color:"Neutral"};T.target.data=(n=="MEASURE")?l.results:[U];F=(n=="MEASURE")?t.sTarget:m;}}T.innerMinThreshold={data:[]};T.innerMaxThreshold={data:[]};if(n=="FIXED"){T.firstYLabel.color=H<t.cl?"Error":((t.cl<=H)&&(H<=t.wl))?"Critical":(H>t.wl)?"Good":"Neutral";T.lastYLabel.color=I<t.cl?"Error":((t.cl<=I)&&(I<=t.wl))?"Critical":(I>t.wl)?"Good":"Neutral";}else if(n=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL){T.firstYLabel.color=H<t.firstcL?"Error":((t.firstcL<=H)&&(H<=t.firstwL))?"Critical":(H>t.firstwL)?"Good":"Neutral";T.lastYLabel.color=I<t.lastcL?"Error":((t.lastcL<=I)&&(I<=t.lastwL))?"Critical":(I>t.lastwL)?"Good":"Neutral";}break;case"MI":for(i in c){if(c[i].TYPE=="CH"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.ch=Number(c[i].FIXED);T.maxThreshold={color:"Error"};T.maxThreshold.data=(n=="MEASURE")?l.results:[U];B=(n=="MEASURE")?t.sCriticalHigh:m;}else if(c[i].TYPE=="WH"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.wh=Number(c[i].FIXED);T.minThreshold={color:"Good"};T.minThreshold.data=(n=="MEASURE")?l.results:[U];A=(n=="MEASURE")?t.sWarningHigh:m;}else if(c[i].TYPE=="TA"){var U={};U[d]="";U[m]=Number(c[i].FIXED);T.target={color:"Neutral"};T.target.data=(n=="MEASURE")?l.results:[U];F=(n=="MEASURE")?t.sTarget:m;}}if(n=="FIXED"){T.firstYLabel.color=H>t.ch?"Error":((t.wh<=H)&&(H<=t.ch))?"Critical":(H<t.wh)?"Good":"Neutral";T.lastYLabel.color=I>t.ch?"Error":((t.wh<=I)&&(I<=t.ch))?"Critical":(I<t.wh)?"Good":"Neutral";}else if(n=="MEASURE"&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){T.firstYLabel.color=H>t.firstcH?"Error":((t.firstwH<=H)&&(H<=t.firstcH))?"Critical":(H<t.firstwH)?"Good":"Neutral";T.lastYLabel.color=I>t.lastcH?"Error":((t.lastwH<=I)&&(I<=t.lastcH))?"Critical":(I<t.lastwH)?"Good":"Neutral";}T.innerMaxThreshold={data:[]};T.innerMinThreshold={data:[]};break;case"RA":for(i in c){if(c[i].TYPE=="CH"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.ch=Number(c[i].FIXED);T.maxThreshold={color:"Error"};T.maxThreshold.data=(n=="MEASURE")?l.results:[U];B=(n=="MEASURE")?t.sCriticalHigh:m;}else if(c[i].TYPE=="WH"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.wh=Number(c[i].FIXED);T.innerMaxThreshold={color:"Good"};T.innerMaxThreshold.data=(n=="MEASURE")?l.results:[U];D=(n=="MEASURE")?t.sWarningHigh:m;}else if(c[i].TYPE=="WL"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.wl=Number(c[i].FIXED);T.innerMinThreshold={color:"Good"};T.innerMinThreshold.data=(n=="MEASURE")?l.results:[U];C=(n=="MEASURE")?t.sWarningLow:m;}else if(c[i].TYPE=="CL"){var U={};U[d]="";U[m]=Number(c[i].FIXED);t.cl=Number(c[i].FIXED);T.minThreshold={color:"Error"};T.minThreshold.data=(n=="MEASURE")?l.results:[U];A=(n=="MEASURE")?t.sCriticalLow:m;}else if(c[i].TYPE=="TA"){var U={};U[d]="";U[m]=Number(c[i].FIXED);T.target={color:"Neutral"};T.target.data=(n=="MEASURE")?l.results:[U];F=(n=="MEASURE")?t.sTarget:m;}}if(n=="FIXED"){T.firstYLabel.color=(H>t.ch||H<t.cl)?"Error":((t.wh<=H)&&(H<=t.ch))||((t.cl<=H)&&(H<=t.wl))?"Critical":((H>=t.wl)&&(H<=t.wh))?"Good":"Neutral";T.lastYLabel.color=(I>t.ch||I<t.cl)?"Error":((t.wh<=I)&&(I<=t.ch))||((t.cl<=I)&&(I<=t.wl))?"Critical":((I>=t.wl)&&(I<=t.wh))?"Good":"Neutral";}else if(n=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){T.firstYLabel.color=(H>t.firstcH||H<t.firstcL)?"Error":((t.firstwH<=H)&&(H<=t.firstcH))||((t.firstcL<=H)&&(H<=t.firstwL))?"Critical":((H>=t.firstwL)&&(H<=t.firstwH))?"Good":"Neutral";T.lastYLabel.color=(I>t.lastcH||I<t.lastcL)?"Error":((t.lastwH<=I)&&(I<=t.lastcH))||((t.lastcL<=I)&&(I<=t.lastwL))?"Critical":((I>=t.lastwL)&&(I<=t.lastwH))?"Good":"Neutral";}break;}var V=function(W,a,b,n){return new sap.suite.ui.microchart.AreaMicroChartItem({color:"{/"+W+"/color}",points:{path:"/"+W+"/data",template:new sap.suite.ui.microchart.AreaMicroChartPoint({x:"{"+a+"}",y:"{"+b+"}"})}});};t.getTile().getTileContent()[1].getContent().setTarget(V("target",d,F));t.getTile().getTileContent()[1].getContent().setInnerMinThreshold(V("innerMinThreshold",d,C));t.getTile().getTileContent()[1].getContent().setInnerMaxThreshold(V("innerMaxThreshold",d,D));t.getTile().getTileContent()[1].getContent().setMinThreshold(V("minThreshold",d,A));t.getTile().getTileContent()[1].getContent().setMaxThreshold(V("maxThreshold",d,B));t.getTile().getTileContent()[1].getContent().setChart(V("chart",d,m));t._updateTileModel(T);}},flowWithoutDesignTimeCall:function(){this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;}this.onAfterFinalEvaluation();},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);}if(i){this.refreshHandler(this);}},setTextInTile:function(){var t=this;this._updateTileModel({header:t.oTileApi.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:t.oTileApi.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualTrendView=this.getView();this.oViewData=this.oDualTrendView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oTileApi.url.getApplicationSystem();this.oDualTrendView.oGenericTile.setState(sap.m.LoadState.Loading);if(this.oTileApi.preview.isEnabled()){this.setTextInTile();this._updateTileModel({value:8888,size:sap.m.Size.Auto,frameType:"TwoByOne",state:sap.m.LoadState.Loading,valueColor:sap.m.ValueColor.Error,indicator:sap.m.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oDualTrendView.oGenericTile.setState(sap.m.LoadState.Loaded);}else{try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(c){t.oConfig=c;t.setTextInTile();t.oDualTrendView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}});}catch(e){this.logError(e);}}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new sap.ui.model.json.JSONModel({}));}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);}});return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorTileUtils/cache',[],function(){"use strict";var B={};var K={};var s="HANA_CLIENT";return{getCacheHanaClient:function(){return B[s];},setCacheHanaClient:function(d){B[s]=d;},getEvaluationByChipId:function(k){if(B[k]){return B[k];}return null;},getEvaluationById:function(k){return this.getEvaluationByChipId(k);},setEvaluationById:function(k,d){B[k]=d;},getFrontEndCacheDeferredObject:function(k){if(B[k]){return B[k];}return null;},setFrontEndCacheDefferedObject:function(k,d){B[k]=d;},getKpivalueById:function(k){if(K[k]){return K[k];}return null;},setKpivalueById:function(k,d){K[k]=d;}};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics',['sap/ui/core/Core'],function(C){"use strict";sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants={};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants["SAP_NAMESPACE"]="http://www.sap.com/Protocols/SAPData";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants["VERSION"]="0.7";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper={renderPropertyKeyValue:function(f,p){if(f.charAt(0)=="'"){throw"Illegal property value starting with a quote";}switch(p){case'Edm.String':return"'"+f+"'";case'Edm.DateTime':return"datetime'"+f+"'";case'Edm.Guid':return"guid'"+f+"'";case'Edm.Time':return"time'"+f+"'";case'Edm.DateTimeOffset':return"datetimeoffset'"+f+"'";default:return f;}},renderPropertyFilterValue:function(f,p){if(f.charAt(0)=="'"){throw"Illegal property value starting with a quote";}switch(p){case'Edm.String':return"'"+f+"'";case'Edm.DateTime':return"datetime'"+f+"'";case'Edm.Guid':return"guid'"+f+"'";case'Edm.Time':return"time'"+f+"'";case'Edm.DateTimeOffset':return"datetimeoffset'"+f+"'";default:return f;}},tokenizeNametoLabelText:function(n){var l="";l=n.replace(/([^A-Z0-9_]+)([A-Z0-9_])/g,"$1 $2");l=l.replace(/([A-Z0-9_]{2,})([A-Z0-9_])([^A-Z0-9_]+)/g,"$1 $2$3");l=l.replace(/(.*) _E$/,"$1");l=l.replace(/(.*) _(.*)/g,"$1 $2");return l;}};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model=function(m,a){this._init(m,a);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByURI=function(u){return{sServiceURI:u};};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel=function(m){return{oModel:m};};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceWithWorkaround=function(m,w){return{oModelReference:m,aWorkaroundID:w};};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.prototype={_init:function(m,a){this._oActivatedWorkarounds={};if(m&&m.aWorkaroundID){var w=m.aWorkaroundID;for(var i=0;i<w.length;i++){this._oActivatedWorkarounds[w[i]]=true;}m=m.oModelReference;}if(!m||(!m.sServiceURI&&!m.oModel)){throw"Usage with oModelReference being an instance of Model.ReferenceByURI or Model.ReferenceByModel";}if(m.oModel){this._oModel=m.oModel;}else{this._oModel=new sap.ui.model.odata.ODataModel(m.sServiceURI);}if(this._oModel.getServiceMetadata().dataServices==undefined){throw"Model could not be loaded";}this.mergeV2Annotations(a);this._oQueryResultSet={};this._oParameterizationSet={};this._oEntityTypeSet={};this._oEntitySetSet={};this._oEntityTypeNameToEntitySetMap={};var s=this._oModel.getServiceMetadata().dataServices.schema[0];for(var i=-1,c;c=s.entityContainer[++i];){if(c.isDefaultEntityContainer=="true"){this._oDefaultEntityContainer=c;break;}}var e=s.entityType;var q=[],p=[],u=[];for(var i=-1,t;t=e[++i];){var P=false;if(t.extensions!=undefined){for(var j=-1,E;E=t.extensions[++j];){if(E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE&&E.name=="semantics"){P=true;switch(E.value){case"aggregate":q.push(t);break;case"parameters":p.push(t);break;default:u.push(t);}}if(P){continue;}}if(!P){u.push(t);}}else{u.push(t);}}for(var i=-1,t;t=u[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var b=this._getEntitySetsOfType(s,o.getQName());if(b.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics";}if(b.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics";}var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;}var f={};for(var i=-1,t;t=p[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var b=this._getEntitySetsOfType(s,o.getQName());if(b.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics";}if(b.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics";}var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;var g=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization(o,d);this._oParameterizationSet[g.getName()]=g;f[o.getQName()]=g;var h=o.getQName();if(s.association!=undefined){for(var j=-1,A;A=s.association[++j];){if(A.referentialConstraint==undefined){continue;}var k=null;if(A.end[0].type==h&&A.end[0].multiplicity=="*"&&A.end[1].multiplicity=="1"){k=A.end[1].type;}else if(A.end[1].type==h&&A.end[1].multiplicity=="*"&&A.end[0].multiplicity=="1"){k=A.end[0].type;}if(!k){continue;}if(A.referentialConstraint.dependent.propertyRef.length!=1){continue;}var l=g.findParameterByName(A.referentialConstraint.dependent.propertyRef[0].name);if(l==null){continue;}var v=this._oEntityTypeSet[k];var V=this._oEntityTypeNameToEntitySetMap[k];l.setValueSetEntity(v,V);}}}for(var i=-1,t;t=q[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var Q=o.getQName();var g=null;var n=null;if(s.association!=undefined){for(var j=-1,A;A=s.association[++j];){var r=null;if(A.end[0].type==Q){r=A.end[1].type;}else if(A.end[1].type==Q){r=A.end[0].type;}else{continue;}var M=null;M=f[r];if(M!=null){if(g!=null){throw"LIMITATION: Unable to handle multiple parameter entity types of query entity "+o.name;}else{g=M;n=A;}}}}var b=this._getEntitySetsOfType(s,o.getQName());if(b.length!=1){throw"Invalid consumption model: There must be exactly one entity set for an entity type annotated with aggregating semantics";}var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;var x=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult(this,o,d,g);this._oQueryResultSet[x.getName()]=x;if(g){g.setTargetQueryResult(x,n);}}},oUI5ODataModelAnnotatableObject:{objectName:"schema",keyPropName:"namespace",extensions:true,aSubObject:[{objectName:"entityType",keyPropName:"name",extensions:true,aSubObject:[{objectName:"property",keyPropName:"name",aSubObject:[],extensions:true}]},{objectName:"entityContainer",keyPropName:"name",extensions:false,aSubObject:[{objectName:"entitySet",keyPropName:"name",extensions:true,aSubObject:[]}]}]},mergeV2Annotations:function(a){try{var A=JSON.parse(a);}catch(e){return;}var m;try{m=this._oModel.getServiceMetadata().dataServices;}catch(e){return;}for(var p in A){if(!(this.oUI5ODataModelAnnotatableObject.objectName==p)){continue;}if(!(A[p]instanceof Array)){continue;}this.mergeV2AnnotationLevel(m[this.oUI5ODataModelAnnotatableObject.objectName],A[this.oUI5ODataModelAnnotatableObject.objectName],this.oUI5ODataModelAnnotatableObject);break;}return;},mergeV2AnnotationLevel:function(M,a,u){for(var i=-1,A;A=a[++i];){for(var j=-1,o;o=M[++j];){if(!(A[u.keyPropName]==o[u.keyPropName])){continue;}if(A["extensions"]!=undefined){if(o["extensions"]==undefined){o["extensions"]=[];}for(var l=-1,b;b=A["extensions"][++l];){var f=false;for(var m=-1,c;c=o["extensions"][++m];){if(b.name==c.name&&b.namespace==c.namespace){c.value=b.value;f=true;break;}}if(!f){o["extensions"].push(b);}}}for(var k=-1,U;U=u.aSubObject[++k];){for(var p in A){if(!(U.objectName==p)){continue;}if(!(A[U.objectName]instanceof Array)){continue;}if((o[U.objectName]==undefined)||(!(o[U.objectName]instanceof Array))){continue;}this.mergeV2AnnotationLevel(o[U.objectName],A[U.objectName],U);break;}}}}return;},findQueryResultByName:function(n){var q=this._oQueryResultSet[n];if(!q&&this._oDefaultEntityContainer){var Q=this._oDefaultEntityContainer.name+"."+n;q=this._oQueryResultSet[Q];}return q;},getAllQueryResultNames:function(){if(this._aQueryResultNames){return this._aQueryResultNames;}this._aQueryResultNames=new Array(0);for(var n in this._oQueryResultSet)this._aQueryResultNames.push(this._oQueryResultSet[n].getName());return this._aQueryResultNames;},getAllQueryResults:function(){return this._oQueryResultSet;},getODataModel:function(){return this._oModel;},_getEntitySetsOfType:function(s,q){var e=[];for(var i=-1,E;E=s.entityContainer[++i];){for(var j=-1,o;o=E.entitySet[++j];){if(o.entityType==q){e.push([E,o]);}}}return e;},_oModel:null,_oDefaultEntityContainer:null,_aQueryResultNames:null,_oQueryResultSet:null,_oParameterizationSet:null,_oEntityTypeSet:null,_oEntitySetSet:null,_oEntityTypeNameToEntitySetMap:null,_oActivatedWorkarounds:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult=function(m,e,E,p){this._init(m,e,E,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult.prototype={_init:function(m,e,E,p,a){this._oModel=m;this._oEntityType=e;this._oEntitySet=E;this._oParameterization=p;this._oDimensionSet={};this._oMeasureSet={};var P=e.getTypeDescription().property;var A={};for(var i=-1,o;o=P[++i];){if(o.extensions==undefined){continue;}for(var j=-1,b;b=o.extensions[++j];){if(!b.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(b.name){case"aggregation-role":switch(b.value){case"dimension":var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension(this,o);this._oDimensionSet[d.getName()]=d;break;case"measure":var M=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure(this,o);this._oMeasureSet[M.getName()]=M;break;case"totaled-properties-list":this._oTotaledPropertyListProperty=o;break;}break;case"attribute-for":var D=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute(this,o);A[D.getKeyProperty()]=D;break;}}}for(var s in A){var D=A[s];D.getDimension().addAttribute(D);}if(m._oActivatedWorkarounds.IdentifyTextPropertiesByName){var c=[];for(var f in this._oDimensionSet){var d=this._oDimensionSet[f];if(!d.getTextProperty()){var t=null;t=e.findPropertyByName(f+"Name");if(!t){t=e.findPropertyByName(f+"Text");}if(!t){t=e.findPropertyByName(f+"Desc");}if(!t){t=e.findPropertyByName(f+"Description");}if(t){d.setTextProperty(t);c.push(t.name);}}}for(var i=-1,g;g=c[++i];){delete this._oDimensionSet[g];}}},getName:function(){return this.getEntitySet().getQName();},getParameterization:function(){return this._oParameterization;},getAllDimensionNames:function(){if(this._aDimensionNames){return this._aDimensionNames;}this._aDimensionNames=[];for(var n in this._oDimensionSet)this._aDimensionNames.push(this._oDimensionSet[n].getName());return this._aDimensionNames;},getAllDimensions:function(){return this._oDimensionSet;},getAllMeasureNames:function(){if(this._aMeasureNames){return this._aMeasureNames;}this._aMeasureNames=[];for(var n in this._oMeasureSet)this._aMeasureNames.push(this._oMeasureSet[n].getName());return this._aMeasureNames;},getAllMeasures:function(){return this._oMeasureSet;},findDimensionByName:function(n){return this._oDimensionSet[n];},getTotaledPropertiesListProperty:function(){return this._oTotaledPropertyListProperty;},findMeasureByName:function(n){return this._oMeasureSet[n];},getModel:function(){return this._oModel;},getEntityType:function(){return this._oEntityType;},getEntitySet:function(){return this._oEntitySet;},_oModel:null,_oEntityType:null,_oEntitySet:null,_oParameterization:null,_aDimensionNames:null,_oDimensionSet:null,_aMeasureNames:null,_oMeasureSet:null,_oTotaledPropertyListProperty:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization=function(e,E){this._init(e,E);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization.prototype={_init:function(e,E){this._oEntityType=e;this._oEntitySet=E;this._oParameterSet={};var p=e.getTypeDescription().property;for(var i=-1,P;P=p[++i];){if(P.extensions==undefined){continue;}for(var j=-1,o;o=P.extensions[++j];){if(!o.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(o.name){case"parameter":var a=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter(this,P);this._oParameterSet[a.getName()]=a;break;}}}},setTargetQueryResult:function(q,a){this._oQueryResult=q;var Q=this._oEntityType.getSchema().namespace+"."+a.name;var n=this._oEntityType.getTypeDescription().navigationProperty;if(!n){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type";}for(var i=-1,N;N=n[++i];){if(N.relationship==Q){this._oNavPropToQueryResult=N.name;}}if(!this._oNavPropToQueryResult){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type";}},getName:function(){return this.getEntitySet().getQName();},getAllParameterNames:function(){if(this._aParameterNames){return this._aParameterNames;}this._aParameterNames=[];for(var n in this._oParameterSet)this._aParameterNames.push(this._oParameterSet[n].getName());return this._aParameterNames;},getAllParameters:function(){return this._oParameterSet;},findParameterByName:function(n){return this._oParameterSet[n];},getNavigationPropertyToQueryResult:function(){return this._oNavPropToQueryResult;},getEntityType:function(){return this._oEntityType;},getEntitySet:function(){return this._oEntitySet;},_oEntityType:null,_oEntitySet:null,_oQueryResult:null,_oNavPropToQueryResult:null,_aParameterNames:null,_oParameterSet:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter=function(p,P){this._init(p,P);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter.prototype={_init:function(p,P){this._oParameterization=p;this._oProperty=P;var e=p.getEntityType();if(P.extensions!=undefined){for(var i=-1,E;E=P.extensions[++i];){if(!E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(E.name){case"parameter":switch(E.value){case"mandatory":this._bRequired=true;break;case"optional":this._bRequired=false;break;default:throw"Invalid annotation value for parameter property";}break;case"label":this._sLabelText=E.value;break;case"text":this._oTextProperty=e.findPropertyByName(E.value);break;case"upper-boundary":this._bIntervalBoundaryParameter=true;this._oUpperIntervalBoundaryParameterProperty=e.findPropertyByName(E.value);break;case"lower-boundary":this._bIntervalBoundaryParameter=true;this._oLowerIntervalBoundaryParameterProperty=e.findPropertyByName(E.value);break;}}}if(!this._sLabelText){this._sLabelText="";}},setValueSetEntity:function(e,E){this._oValueSetEntityType=e;this._oValueSetEntitySet=E;},getTextProperty:function(){return this._oTextProperty;},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName());}return this._sLabelText;},isOptional:function(){return(!this._bRequired);},isIntervalBoundary:function(){return this._bIntervalBoundaryParameter;},isLowerIntervalBoundary:function(){return(this._oUpperIntervalBoundaryParameterProperty?true:false);},getPeerIntervalBoundaryParameter:function(){var p=null;if(this._oLowerIntervalBoundaryParameterProperty){p=this._oLowerIntervalBoundaryParameterProperty.name;}else{p=this._oUpperIntervalBoundaryParameterProperty.name;}if(!p){throw"Parameter is not an interval boundary";}return this._oParameterization.findParameterByName(p);},isValueSetAvailable:function(){return(this._oValueSetEntityType?true:false);},getName:function(){return this._oProperty.name;},getProperty:function(){return this._oProperty;},getContainingParameterization:function(){return this._oParameterization;},getURIToValueEntitySet:function(s){var u=null;u=(s?s:"")+"/"+this._oValueSetEntitySet.getQName();return u;},_oParameterization:null,_oProperty:null,_sLabelText:null,_oTextProperty:null,_bRequired:false,_bIntervalBoundaryParameter:false,_oLowerIntervalBoundaryParameterProperty:null,_oUpperIntervalBoundaryParameterProperty:null,_oValueSetEntityType:null,_oValueSetEntitySet:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension=function(q,p){this._init(q,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;this._oAttributeSet={};if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;case"super-ordinate":this._sSuperOrdinatePropertyName=e.value;break;}}}if(!this._sLabelText){this._sLabelText="";}},getName:function(){return this._oProperty.name;},getKeyProperty:function(){return this._oProperty;},getTextProperty:function(){return this._oTextProperty;},setTextProperty:function(t){this._oTextProperty=t;},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName());}return this._sLabelText;},getSuperOrdinateDimension:function(){if(!this._sSuperOrdinatePropertyName){return null;}return this._oQueryResult.findDimensionByName(this._sSuperOrdinatePropertyName);},getHierarchy:function(){if(!this._oHierarchy){this._oHierarchy=this._oQueryResult.getEntityType().getHierarchy(this._oProperty.name);}return this._oHierarchy;},getAllAttributeNames:function(){if(this._aAttributeNames){return this._aAttributeNames;}this._aAttributeNames=[];for(var n in this._oAttributeSet)this._aAttributeNames.push(this._oAttributeSet[n].getName());return this._aAttributeNames;},getAllAttributes:function(){return this._oAttributeSet;},findAttributeByName:function(n){return this._oAttributeSet[n];},addAttribute:function(d){this._oAttributeSet[d.getName()]=d;},getContainingQueryResult:function(){return this._oQueryResult;},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sSuperOrdinatePropertyName:null,_aAttributeNames:null,_oAttributeSet:null,_oHierarchy:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute=function(q,p){this._init(q,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"attribute-for":this._sDimensionName=e.value;break;case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;}}}},getName:function(){return this._oProperty.name;},getKeyProperty:function(){return this._oProperty;},getTextProperty:function(){return this._oTextProperty;},getLabelText:function(){return this._sLabelText;},getDimension:function(){return this._oQueryResult.findDimensionByName(this._sDimensionName);},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sDimensionName:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure=function(q,p){this._init(q,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;case"unit":this._oUnitProperty=q.getEntityType().findPropertyByName(e.value);break;}}}if(!this._sLabelText){this._sLabelText="";}},getName:function(){return this._oProperty.name;},getRawValueProperty:function(){return this._oProperty;},getFormattedValueProperty:function(){return this._oTextProperty;},getUnitProperty:function(){return this._oUnitProperty;},getLabelText:function(){return this._sLabelText;},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_oUnitProperty:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet=function(m,s,c,e){this._init(m,s,c,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet.prototype={_init:function(m,s,c,e){this._oEntitySet=e;this._oContainer=c;this._oSchema=s;this._oModel=m;if(s.entityContainer.length>1){this._sQName=c.name+"."+e.name;}else{this._sQName=e.name;}},getQName:function(){return this._sQName;},getSetDescription:function(){return this._oEntitySet;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntitySet:null,_oContainer:null,_oSchema:null,_oModel:null,_sQName:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType=function(m,s,e){this._init(m,s,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._oPropertySet={};this._aFilterablePropertyNames=[];this._aSortablePropertyNames=[];this._aRequiredFilterPropertyNames=[];this._sQName=s.namespace+"."+e.name;var r={};var R=null;for(var i=-1,p;p=e.property[++i];){this._aFilterablePropertyNames.push(p.name);this._aSortablePropertyNames.push(p.name);if(p.extensions==undefined){continue;}for(var j=-1,E;E=p.extensions[++j];){if(!E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(E.name){case"filterable":if(E.value=="false"){this._aFilterablePropertyNames.pop(p.name);}break;case"sortable":if(E.value=="false"){this._aSortablePropertyNames.pop(p.name);}break;case"required-filter":if(E.value=="true"){this._aRequiredFilterPropertyNames.push(p.name);}break;case"hierarchy-node-for":if(!(R=r[p.name])){R=r[p.name]={};}R.dimensionName=E.value;break;case"hierarchy-parent-node-for":case"hierarchy-parent-nod":if(!(R=r[E.value])){R=r[E.value]={};}R.parentNodeIDProperty=p;break;case"hierarchy-level-for":if(!(R=r[E.value])){R=r[E.value]={};}R.levelProperty=p;break;case"hierarchy-drill-state-for":case"hierarchy-drill-stat":if(!(R=r[E.value])){R=r[E.value]={};}R.drillStateProperty=p;break;}}this._oPropertySet[p.name]=p;}this._oRecursiveHierarchySet={};for(var h in r){var H=r[h];var o=this._oPropertySet[h];var d=this._oPropertySet[H.dimensionName];if(d==null){d=o;}this._oRecursiveHierarchySet[d.name]=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy(e,o,H.parentNodeIDProperty,H.levelProperty,d);}},findPropertyByName:function(n){return this._oPropertySet[n];},getFilterablePropertyNames:function(){return this._aFilterablePropertyNames;},getSortablePropertyNames:function(){return this._aSortablePropertyNames;},getRequiredFilterPropertyNames:function(){return this._aRequiredFilterPropertyNames;},getAllHierarchyPropertyNames:function(){if(this._aHierarchyPropertyNames){return this._aHierarchyPropertyNames;}this._aHierarchyPropertyNames=[];for(var n in this._oRecursiveHierarchySet)this._aHierarchyPropertyNames.push(this._oRecursiveHierarchySet[n].getNodeValueProperty().name);return this._aHierarchyPropertyNames;},getHierarchy:function(n){if(this._oRecursiveHierarchySet[n]==undefined){return null;}return this._oRecursiveHierarchySet[n];},getQName:function(){return this._sQName;},getTypeDescription:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_sQName:null,_oPropertySet:null,_aFilterablePropertyNames:null,_aRequiredFilterPropertyNames:null,_aHierarchyPropertyNames:null,_oRecursiveHierarchySet:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy=function(e,n,p,N,o){this._init(e,n,p,N,o);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy.prototype={_init:function(e,n,p,N,o){this._oEntityType=e;this._oNodeIDProperty=n;this._oParentNodeIDProperty=p;this._oNodeLevelProperty=N;this._oNodeValueProperty=o;},isRecursiveHierarchy:function(){return true;},isLeveledHierarchy:function(){return false;},getNodeIDProperty:function(){return this._oNodeIDProperty;},getParentNodeIDProperty:function(){return this._oParentNodeIDProperty;},getNodeLevelProperty:function(){return this._oNodeLevelProperty;},getNodeValueProperty:function(){return this._oNodeValueProperty;},_oNodeIDProperty:null,_oParentNodeIDProperty:null,_oNodeLevelProperty:null,_oNodeValueProperty:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression=function(m,s,e){this._init(m,s,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._aFilterCondition=[];},clear:function(){this._aFilterCondition=[];},addCondition:function(p,o,v,V){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add filter condition for unknown property name "+p;}var f=this._oEntityType.getFilterablePropertyNames();if(f.indexOf(p)===-1){throw"Cannot add filter condition for not filterable property name "+p;}this._aFilterCondition.push({property:P,op:o,val1:v,val2:V});return this._aFilterablePropertyNames;},addSetCondition:function(p,v){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add filter condition for unknown property name "+p;}var f=this._oEntityType.getFilterablePropertyNames();if(f.indexOf(p)===-1){throw"Cannot add filter condition for not filterable property name "+p;}for(var i=-1,V;V=v[++i];){this._aFilterCondition.push({property:P,op:sap.ui.model.FilterOperator.EQ,val1:V});}return this._aFilterablePropertyNames;},getExpressionAsUI5FilterArray:function(){var f=[];for(var i=-1,c;c=this._aFilterCondition[++i];){f.push(new sap.ui.model.Filter(c.property.name,c.op,c.val1,c.val2));}return f;},getURIFilterOptionValue:function(){if(this._aFilterCondition.length==0){return"";}this._aFilterCondition.sort(function(a,b){if(a.property.name==b.property.name){return 0;}if(a.property.name>b.property.name){return 1;}else{return-1;}});var p=this._aFilterCondition[0].property.name;var o="";var s="";for(var i=-1,c;c=this._aFilterCondition[++i];){if(p!=c.property.name){o+=(o==""?"":" and ")+"("+s+")";s="";p=c.property.name;}switch(c.op){case sap.ui.model.FilterOperator.BT:s+=(s==""?"":" or ")+"("+c.property.name+" "+sap.ui.model.FilterOperator.GE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(c.val1,c.property.type)+" and "+c.property.name+" "+sap.ui.model.FilterOperator.LE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(c.val2,c.property.type)+")";break;default:s+=(s==""?"":" or ")+"("+c.property.name+" "+c.op.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(c.val1,c.property.type)+")";}}o+=(o==""?"":" and ")+"("+s+")";return o;},getEntityType:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_aFilterCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder={Ascending:"asc",Descending:"desc"};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression=function(m,s,e){this._init(m,s,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._aSortCondition=[];},_containsSorter:function(p){var r=null;for(var i=-1,c;c=this._aSortCondition[++i];){if(c.property.name===p){r={sorter:c,index:i};break;}}return r;},_removeFromArray:function(a,f,t){var r=a.slice((t||f)+1||a.length);a.length=f<0?a.length+f:f;return a.push.apply(a,r);},clear:function(){this._aSortCondition=[];},addSorter:function(p,s){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add sort condition for unknown property name "+p;}if(this._containsSorter(p)!=null){throw"Sort condition for this property name is already defined "+p;}var S=this._oEntityType.getSortablePropertyNames();if(S.indexOf(p)===-1){throw"Cannot add sort condition for not sortable property name "+p;}this._aSortCondition.push({property:P,order:s});return this;},removeSorter:function(p){if(!p){return;}var s=this._containsSorter(p);if(s){this._removeFromArray(this._aSortCondition,s.index);}},getExpressionsAsUI5SorterArray:function(){var s=[];for(var i=-1,c;c=this._aSortCondition[++i];){s.push(new sap.ui.model.Sorter(c.property.name,c.order==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder.Descending));}return s;},getExpressionAsUI5Sorter:function(){var s=this.getExpressionsAsUI5SorterArray();if(s.length==0){return null;}else{return s[0];}},getURIOrderByOptionValue:function(){if(this._aSortCondition.length==0){return"";}var o="";for(var i=-1,c;c=this._aSortCondition[++i];){o+=c.property.name+" "+c.order;if(i<this._aSortCondition.length-1){o+=", ";}}return o;},getEntityType:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_aSortCondition:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest=function(p){this._init(p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest.prototype={_init:function(p){if(!p){throw"No parameterization given";}this._oParameterization=p;this._oParameterValueAssignment=[];},getParameterization:function(){return this._oParameterization;},setParameterValue:function(p,v,t){var P=this._oParameterization.findParameterByName(p);if(!P){throw"Invalid parameter name "+p;}if(t!=null){if(!P.isIntervalBoundary()){throw"Range value cannot be applied to parameter "+p+" accepting only single values";}if(!P.isLowerIntervalBoundary()){throw"Range value given, but parameter "+p+" does not hold the lower boundary";}}if(!P.isIntervalBoundary()){if(v==null){delete this._oParameterValueAssignment[p];}else{this._oParameterValueAssignment[p]=v;}}else{if(v==null&&t!=null){throw"Parameter "+p+": An upper boundary cannot be given without the lower boundary";}if(v==null){delete this._oParameterValueAssignment[p];t=null;}else{this._oParameterValueAssignment[p]=v;}var u=P.getPeerIntervalBoundaryParameter();if(t==null){t=v;}if(v==null){delete this._oParameterValueAssignment[u.getName()];}else{this._oParameterValueAssignment[u.getName()]=t;}}return;},getURIToParameterizationEntitySet:function(s){return(s?s:"")+"/"+this._oParameterization.getEntitySet().getQName();},getURIToParameterizationEntry:function(s){var d=this._oParameterization.getAllParameters();for(var D in d){if(this._oParameterValueAssignment[D]==undefined){throw"Parameter "+D+" has no value assigned";}}var k="",f=true;for(var p in this._oParameterValueAssignment){k+=(f?"":",")+p+"="+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyKeyValue(this._oParameterValueAssignment[p],d[p].getProperty().type);f=false;}return(s?s:"")+"/"+this._oParameterization.getEntitySet().getQName()+"("+k+")";},_oParameterization:null,_oParameterValueAssignment:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest=function(q,p){this._init(q);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest.prototype={_init:function(q,p){this._oQueryResult=q;this._oParameterizationRequest=p;this._oAggregationLevel={};this._oMeasures={};this._bIncludeEntityKey=false;this._oFilterExpression=null;},setParameterizationRequest:function(p){this._oParameterizationRequest=p;},getQueryResult:function(){return this._oQueryResult;},setAggregationLevel:function(d){this._oAggregationLevel={};if(!d){d=this._oQueryResult.getAllDimensionNames();}this.addToAggregationLevel(d);},addToAggregationLevel:function(d){if(!d){return;}for(var i=-1,D;D=d[++i];){if(!this._oQueryResult.findDimensionByName(D)){throw D+" is not a valid dimension name";}this._oAggregationLevel[D]={key:true,text:false,attributes:null};}},removeFromAggregationLevel:function(d){if(!d){return;}for(var i=-1,D;D=d[++i];){if(!this._oQueryResult.findDimensionByName(D)){throw D+" is not a valid dimension name";}if(this._oAggregationLevel[D]!=undefined){delete this._oAggregationLevel[D];this.getSortExpression().removeSorter(D);}}},getAggregationLevel:function(){var d=[];for(var D in this._oAggregationLevel){d.push(D);}return d;},getAggregationLevelDetails:function(d){if(this._oAggregationLevel[d]==undefined){throw"Aggregation level does not include dimension "+d;}return this._oAggregationLevel[d];},setMeasures:function(m){if(!m){m=this._oQueryResult.getAllMeasureNames();}this._oMeasures={};for(var i=-1,M;M=m[++i];){if(!this._oQueryResult.findMeasureByName(M)){throw M+" is not a valid measure name";}this._oMeasures[M]={value:true,text:false,unit:false};}},getMeasureNames:function(){var m=[];for(var M in this._oMeasures){m.push(M);}return m;},includeDimensionKeyTextAttributes:function(d,I,b,a){var D=[];if(d){if(this._oAggregationLevel[d]==undefined){throw d+" is not included in the aggregation level";}D.push(d);}else{for(var n in this._oAggregationLevel){D.push(n);}a=null;}for(var i=-1,s;s=D[++i];){if(I!=null){this._oAggregationLevel[s].key=I;}if(b!=null){this._oAggregationLevel[s].text=b;}if(a!=null){this._oAggregationLevel[s].attributes=a;}}},includeMeasureRawFormattedValueUnit:function(m,I,b,a){var M=[];if(m){if(this._oMeasures[m]==undefined){throw m+" is not part of the query result";}M.push(m);}else{for(var n in this._oMeasures){M.push(n);}}for(var i=-1,s;s=M[++i];){if(I!=null){this._oMeasures[s].value=I;}if(b!=null){this._oMeasures[s].text=b;}if(a!=null){this._oMeasures[s].unit=a;}}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oQueryResult.getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},setRequestOptions:function(i,I){if(i){this._bIncludeEntityKey=i;}if(I){this._bIncludeCount=I;}},setResultPageBoundaries:function(s,e){if(s!=null&&typeof s!=="number"){throw"Start value must be null or numeric";}if(e!==null&&typeof e!=="number"){throw"End value must be null or numeric";}if(s==null){s=1;}if(s<1||s>(e==null?s:e)){throw"Invalid values for requested page boundaries";}this._iSkipRequestOption=(s>1)?s:null;this._iTopRequestOption=(e!=null)?(e-s+1):null;},getResultPageBoundaries:function(){return{start:(this._iSkipRequestOption==null)?1:this._iSkipRequestOption,end:(this._iTopRequestOption!=null)?(this._iSkipRequestOption==null)?1:this._iSkipRequestOption+this._iTopRequestOption:null};},getURIToQueryResultEntitySet:function(s){var u=null;if(this._oQueryResult.getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request";}else{u=this._oParameterizationRequest.getURIToParameterizationEntry(s)+"/"+this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult();}}else{u=(s?s:"")+"/"+this._oQueryResult.getEntitySet().getQName();}return u;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";for(var d in this._oAggregationLevel){var D=this._oQueryResult.findDimensionByName(d);var o=this._oAggregationLevel[d];if(o.key==true){s+=(s==""?"":",")+D.getKeyProperty().name;}if(o.text==true&&D.getTextProperty()){s+=(s==""?"":",")+D.getTextProperty().name;}if(o.attributes){for(var i=-1,a;a=o.attributes[++i];){s+=(s==""?"":",")+D.findAttributeByName(a).getName();}}}for(var m in this._oMeasures){var M=this._oQueryResult.findMeasureByName(m);var b=this._oMeasures[m];if(b.value==true){s+=(s==""?"":",")+M.getRawValueProperty().name;}if(b.text==true&&M.getFormattedValueProperty()){s+=(s==""?"":",")+M.getFormattedValueProperty().name;}if(b.unit==true&&M.getUnitProperty()){s+=(s==""?"":",")+M.getUnitProperty().name;}}if(this._bIncludeEntityKey){var k=this._oQueryResult.getEntityType().getTypeDescription().key.propertyRef;for(var i=-1,K;K=k[++i];){s+=(s==""?"":",")+K.name;}}Q=(s?s:null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f?f:null);break;}case"$orderby":{var S=null;if(this._oSortExpression){S=this._oSortExpression.getURIOrderByOptionValue();}Q=(S?S:null);break;}case"$top":{if(this._iTopRequestOption!==null){Q=this._iTopRequestOption;}break;}case"$skip":{Q=this._iSkipRequestOption;break;}default:break;}return Q;},getURIToQueryResultEntries:function(s){var r=this.getURIToQueryResultEntitySet(s);var S=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var a=this.getURIQueryOptionValue("$orderby");var t=this.getURIQueryOptionValue("$top");var b=this.getURIQueryOptionValue("$skip");var u=r;var q=false;if(S){u+="?$select="+S;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&a){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+a;}if(this._iTopRequestOption&&t){if(!q){u+="?";q=true;}else{u+="&";}u+="$top="+t;}if(this._iSkipRequestOption&&b){if(!q){u+="?";q=true;}else{u+="&";}u+="$skip="+b;}if(this._bIncludeCount){if(!q){u+="?";q=true;}else{u+="&";}u+="$inlinecount=allpages";}return u;},_oQueryResult:null,_oParameterizationRequest:null,_oAggregationLevel:null,_oMeasures:null,_bIncludeEntityKey:null,_bIncludeCount:null,_oFilterExpression:null,_oSortExpression:null,_iSkipRequestOption:0,_iTopRequestOption:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest=function(p){this._init(p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest.prototype={_init:function(p){this._oParameter=p;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null;},includeParameterText:function(i){if(i!=null){this._oValueSetResult.text=i;}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";s+=(s==""?"":",")+this._oParameter.getProperty().name;if(this._oValueSetResult.text==true&&this._oParameter.getTextProperty()){s+=(s==""?"":",")+this._oParameter.getTextProperty().name;}Q=(s?s:null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f?f:null);break;}case"$orderby":{var S=null;if(this._oSortExpression){S=this._oSortExpression.getURIOrderByOptionValue();}Q=(S?S:null);break;}default:break;}return Q;},getURIToParameterValueSetEntries:function(s){var r=null;r=(s?s:"")+"/"+this._oParameter.getContainingParameterization().getEntitySet().getQName();var S=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var a=this.getURIQueryOptionValue("$orderby");var u=r;var q=false;if(S){u+="?$select="+S;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&a){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+a;}return u;},_oParameter:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest=function(d,p){this._init(d,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest.prototype={_init:function(d,p){this._oDimension=d;this._oParameterizationRequest=p;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null;},setParameterizationRequest:function(p){this._oParameterizationRequest=p;},includeDimensionTextAttributes:function(i,a){if(i!=null){this._oValueSetResult.text=i;}if(a!=null){this._oValueSetResult.attributes=a;}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oDimension.getContainingQueryResult().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},hasMasterDataAvailable:function(){return false;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";s+=(s==""?"":",")+this._oDimension.getKeyProperty().name;if(this._oValueSetResult.text==true&&this._oDimension.getTextProperty()){s+=(s==""?"":",")+this._oDimension.getTextProperty().name;}if(this._oValueSetResult.attributes){for(var i=-1,a;a=this._oValueSetResult.attributes[++i];){s+=(s==""?"":",")+this._oDimension.findAttributeByName(a).getName();}}Q=(s?s:null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f?f:null);break;}case"$orderby":{var S=null;if(this._oSortExpression){S=this._oSortExpression.getURIOrderByOptionValue();}Q=(S?S:null);break;}default:break;}return Q;},getURIToDimensionMemberEntries:function(s){var r=null;if(this._oDimension.getContainingQueryResult().getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request";}else{r=this._oParameterizationRequest.getURIToParameterizationEntry(s)+"/"+this._oDimension.getContainingQueryResult().getParameterization().getNavigationPropertyToQueryResult();}}else{r=(s?s:"")+"/"+this._oDimension.getContainingQueryResult().getEntitySet().getQName();}var S=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var a=this.getURIQueryOptionValue("$orderby");var u=r;var q=false;if(S){u+="?$select="+S;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&a){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+a;}return u;},_oDimension:null,_oParameterizationRequest:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil',function(){"use strict";sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.util=sap.ushell.components.tiles.indicatorTileUtils.util||{};sap.ushell.components.tiles.indicatorTileUtils.util=(function(g,$){var c={};var t={"ANN":"years","WEE":"weeks","DAY":"days","HUR":"hours","MIN":"minutes"};var a={};var b={};return{getScheduledJob:function(k){return a[k];},setScheduledJob:function(k,d){a[k]=d;},isCallInProgress:function(k){return b[k];},setUnsetCallInProgress:function(k,v){b[k]=v;},getTimeUnitMap:function(){return t;},getHanaUser:function(){return authObject.userName;},addSystemToServiceUrl:function(u,s){jQuery.sap.log.info("Hana Adapter --> Add System to Service Url");if(sap.ushell&&sap.ushell.Container){if(s){u=sap.ushell.Container.getService("URLParsing").addSystemToServiceUrl(u,s);}else{u=sap.ushell.Container.getService("URLParsing").addSystemToServiceUrl(u);}}return u;},getODataModelByServiceUri:function(s){s=this.addSystemToServiceUrl(s);if(!c[s]){var m=new sap.ui.model.odata.ODataModel(s,{loadMetadataAsync:true,json:true});c[s]=m;}return c[s];},getEdmType:function(u,p){var d=null;if(u instanceof sap.ui.model.odata.ODataModel){d=u;}else{d=this.getODataModelByServiceUri(u);}if(d&&d.getServiceMetadata()){var s=d.getServiceMetadata();var e=s.dataServices.schema[0].entityType;if(e){for(var i=0;i<e.length;i++){var f=e[i];var h=f.property;for(var j=0;j<h.length;j++){var k=h[j];if(k.name==p){return k.type;}}}}}return null;},getMillisecond:function(d,u){var r;switch(u){case"seconds":r=d*1000;break;case"minutes":r=d*60*1000;break;case"hours":r=d*60*60*1000;break;case"days":r=d*24*60*60*1000;break;case"weeks":r=d*7*24*60*60*1000;break;case"months":r=d*4*7*24*60*60*1000;break;case"years":r=d*12*4*7*24*60*60*1000;break;}return r;},getUTCDate:function(){var n=new Date();return n;},isCacheValid:function(d,e,f,h,i){var j=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(d);if(!j){return false;}else if(!(f&&Number(f))){return true;}else{var k=this.getMillisecond(f,t[h]);if(jQuery.type(j.CachedTime)=="date"){var l=j.CachedTime&&j.CachedTime.getTime();}else{var l=j.CachedTime&&parseInt(j.CachedTime.substr(6),10);}var m=this.getUTCDate();return(l>=e&&k>=(m-l)&&!i);}},getMantissaLength:function(n){var N=n.toString();var i=0;if(n<0){i=1;}return(N.indexOf('.')===-1)?(n<0?N.length-1:N.length):N.substring(i,N.indexOf('.')).length;},getLocaleFormattedValue:function(n,s,d,i,e){jQuery.sap.require("sap.ui.core.format.NumberFormat");i=i||false;e=e||null;if(i){return sap.ui.core.format.NumberFormat.getCurrencyInstance({style:"short",showMeasure:false}).format(n,e);}var D=2;var f={style:"short"};var N;if(!(d==-1||d==null)){f.shortDecimals=Number(d);f.minFractionDigits=Number(d);f.maxFractionDigits=Number(d);}var v=sap.ui.core.format.NumberFormat.getInstance(f);if(s==-2){if(n>9999){N="????";}else if((n>-0.001&&n<0)||(n<0.001&&n>0)){N="0";}else{if(n.toString().indexOf('.')!=-1){N=Number(n).toFixed(4-n.toString().indexOf('.'));}else{N=Number(n);}N=v.format(N);}}else if(d==-1||d==null){var m=this.getMantissaLength(n);if(!(m%3)){D=1;}if(m%3===1){D=3;}if(m%3===2){D=2;}if(Math.abs(n)%Math.pow(10,m-1)==0){D=0;}else if((Math.abs(n)%Math.pow(10,m-1))<6*Math.pow(10,m-4)){D=0;}v=sap.ui.core.format.NumberFormat.getInstance({style:"short",shortDecimals:D});N=v.format(n);}else{N=v.format(n);}return N;},getPlatform:function(p){return(jQuery.sap.getUriParameters().get("sb_metadata")||p||"HANA").toUpperCase();},getTileTitleSubtitle:function(C){var d={};if(C.bag&&C.bag.getBagIds()&&C.bag.getBagIds().length){d.title=C.bag.getBag("sb_tileProperties").getText("title")||C.bag.getBag("sb_tileProperties").getProperty("title")||C.preview.getTitle();d.subTitle=C.bag.getBag("sb_tileProperties").getText("description")||C.bag.getBag("sb_tileProperties").getProperty("description")||C.preview.getDescription();}else{d.title=C.preview.getTitle();d.subTitle=C.preview.getDescription();}return d;},scheduleFetchDataJob:function(i){var d;if(this.getView().getViewName().indexOf("DualTile")!==-1){d=this.oKpiTileView.oConfig;}else{d=this.oConfig;}var k=d.TILE_PROPERTIES.id+"data";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k);if(r){clearTimeout(r);r=undefined;}var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeUnitMap();var e=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(d);var f=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(d);var h=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(e,t[f]);if(jQuery.type(this.cacheTime)=="date"){var j=this.cacheTime;}else{var j=new Date(parseInt(this.cacheTime.substr(6),10));}var l=h-(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-j);if(l<=0){l=0;}else if(l>2147483646){l=2147483646;}if(!i){l=300000;}if(this.getView().getViewName().indexOf("DualTile")!==-1){r=setTimeout(this.refreshPress.bind(this),l);}else{r=setTimeout(this.refreshHandler.bind(this,false,true),l);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(k,r);}this.updateDatajobScheduled=true;},scheduleTimeStampJob:function(i){var k=this.oConfig.TILE_PROPERTIES.id+"time";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k);if(r){clearTimeout(r);r=undefined;}if(jQuery.type(this.cacheTime)=="date"){var d=this.cacheTime;}else{var d=new Date(parseInt(this.cacheTime.substr(6),10),13);}var e=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-d);r=setTimeout(this.setTimeStamp.bind(this,this.cacheTime),e.timer);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(k,r);this.updateTimeStampjobScheduled=true;},getBoolValue:function(v){var r=false;if(typeof v=="boolean"&&v){r=true;}return r;},getSeconds:function(d){return(d/1000);},getMinutes:function(d){return(this.getSeconds(d)/60);},getHours:function(d){return(this.getMinutes(d)/60);},getDays:function(d){return(this.getHours(d)/24);},getWeeks:function(d){return(this.getDays(d)/7);},getMonths:function(d){return(this.getWeeks(d)/4);},getYears:function(d){return(this.getMonths(d)/12);},getTimeDifference:function(d){var r={};if(d){var m=this.getMinutes(d);var h=this.getHours(d);var e=this.getDays(d);if(m<5){r.time=0;r.unit="minutes";r.timer=Math.round(this.getMillisecond(5-m,"minutes"));}else if(m>=5&&m<60){if(m<10){r.time=5;}else{r.time=(m-(m%10));}r.unit="minutes";r.timer=Math.round(this.getMillisecond(10-(m%10),"minutes"));}else if(h>=1&&h<24){r.unit="hours";r.time=(h-(h%1));r.timer=Math.round(this.getMillisecond(1-(h%1),"hours"));}else if(e>=1&&e<2){r.unit="days";r.time=(e-(e%1));r.timer=Math.round(this.getMillisecond(1-(e%1),"days"));}else{r.unit="days";r.time=(e-(e%1));r.timer=this.getMillisecond(2,"days");}}else{r.timer=6000;r.unit="days";r.timer=2000;}return r;},getCachingTime:function(C){return((C.CACHINGTIME&&Number(C.CACHINGTIME))||(C.TILE_PROPERTIES.cachingTime&&Number(C.TILE_PROPERTIES.cachingTime)));},getCachingTimeUnit:function(C){return(C.CACHINGUNIT||C.TILE_PROPERTIES.cachingTimeUnit);},getFrontendCacheQuery:function(d,u,p,T){var e;try{var f=T.url.addSystemToServiceUrl('/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV');f=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(f);e=this.getODataModelByServiceUri(f);var f="/CacheParameters(P_CacheType=1)/Results";return{oModel:e,uri:f};}catch(h){jQuery.sap.log.error("FrontEnd cache Metadata failed");return null;}},isDualTile:function(C){var d=C&&C.TILE_PROPERTIES&&C.TILE_PROPERTIES.tileType;if(d.indexOf("DT-")==-1){return false;}return true;},writeFrontendCacheByChipAndUserId:function(T,d,e,u,f){var s=function(e){jQuery.sap.log.info("cache write successFully");f(e);};var h=function(){jQuery.sap.log.error("cache update failed");f(null);};try{var i=T.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV/");i=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(i);var j=this.getODataModelByServiceUri(i);var k="/CacheData";j.create(k,e,{async:true,success:s,error:h});}catch(l){jQuery.sap.log.error(l);}},getKpiChipsOnPage:function(d,e){var f=[];var l=sap.ushell.Container.getService("LaunchPage");l.getGroups().done(function(G){if(G&&G instanceof Array&&G.length){jQuery.sap.log.info("Group Chip fetch");}e(d,f);});},getFrontendCache:function(C,T){var d=this;var o=sap.ushell.components.tiles.indicatorTileUtils.cache.getFrontEndCacheDeferredObject(T.url.getApplicationSystem());var e;if(o){e=o;}else{e=jQuery.Deferred();}var f=C&&C.TILE_PROPERTIES&&C.TILE_PROPERTIES.id;var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(f);if(h){o.resolve(true);}else if(o){return o.promise();}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setFrontEndCacheDefferedObject(T.url.getApplicationSystem(),e);o=e;this.getKpiChipsOnPage(f,function(f,p){if(p){var i=d.getFrontendCacheQuery(p,sap.ushell.Container.getUser().getId(),p,T);if(i){var j=i.oModel;var k=i.uri;var l=false;var m=j.read(k,null,null,true,function(n){if(n&&n.results&&n.results instanceof Array&&n.results.length){jQuery.each(n.results,function(q,r){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(r.ChipId,r);});}if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(f)){l=true;}o.resolve(l);},function(n){if(n&&n.response){jQuery.sap.log.error(n.message+" : "+n.request.requestUri);}o.reject();});}else{o.reject();}}else{o.resolve(false);}});}return o.promise();},getModelerRuntimeServiceModel:function(){var u="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";u=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(u);return this.getODataModelByServiceUri(u);},getSapFontErrorCode:function(){return String.fromCharCode(0xe0b1);},getSapFontBusyCode:function(){return String.fromCharCode(0xe1f2);},prepareFilterStructure:function(f,d){var v=[];if(d){f=f.concat(d);}for(var i=0;i<f.length;i++){var p={};p.comparator=f[i].OPERATOR;p.filterPropertyName=f[i].NAME;if(f[i].ID){p.id=f[i].ID;}p.type=f[i].TYPE;p.value=f[i].VALUE_1;p.valueTo=f[i].VALUE_2;v.push(p);}return v;},getODataModelByServiceUriFromChipAPI:function(s,T){s=T.url.addSystemToServiceUrl(s);if(!c[s]){var m=new sap.ui.model.odata.ODataModel(s,true);c[s]=m;}return c[s];},cacheBustingMechanism:function(u){if(window["sap-ushell-config"].cacheBusting.cacheBusterToken){var d=window["sap-ushell-config"].cacheBusting&&window["sap-ushell-config"].cacheBusting.cacheBusterToken;u=u+"?_="+d;}return u;},getRunTimeUri:function(p){var u="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";var d="/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV";if(p.toUpperCase()=="HANA"){if(window["sap-ushell-config"].cacheBusting){u=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(u);}return u;}if(window["sap-ushell-config"].cacheBusting){d=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(d);}return d;},getFilterFromRunTimeService:function(C,T,s,e){var p=C.TILE_PROPERTIES.sb_metadata;var K=this.getODataModelByServiceUriFromChipAPI(this.getRunTimeUri(p),T);var f="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",C.EVALUATION.ID);var k=K.read("/EVALUATION_FILTERS",null,{"$filter":f},true,function(d){var h=[];if(d.results.length){h=d.results;}s.call(this,h);},e);return k;},_getOData4AnalyticsObject:function(u){var m=null;if(u instanceof sap.ui.model.odata.ODataModel){m=u;}else if(typeof u=="string"){m=this.getODataModelByServiceUri(u);}else{throw new Error("Invalid Input to Create ODataModel Object : "+u);}var O=new sap.ui.model.analytics.odata4analytics.Model(sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(m));return O;},findTextPropertyForDimension:function(u,d,f){try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(d);var D=q.findDimensionByName(f);if(D.getTextProperty()){return D.getTextProperty().name;}else{return f;}}catch(e){$.sap.log.error("Error Fetching Text Property for "+f+" : "+e.toString());}},getEvalValueMeasureName:function(C,d,r){var e=C.EVALUATION_VALUES;for(var i=0;i<e.length;i++){if(e[i].TYPE==d){if(r==="FIXED"){return e[i].FIXED;}else{return e[i].COLUMN_NAME;}}}},getSemanticColorName:function(d){var s="";if(d=="Error"){s="sb.error";}if(d=="Neutral"){s="sb.neutral";}if(d=="Critical"){s="sb.critical";}if(d=="Good"){s="sb.good";}return s;},setTooltipInTile:function(C,d,v){var e="";var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();if(d=="NT"||d=="DT"){if(v.status){e+=r.getText("sb.status")+": "+r.getText(v.status)+"\n";}if(v.actual){e+=r.getText("sb.actual")+": "+v.actual+"\n";}if(v.target){e+=r.getText("sb.target")+": "+v.target+"\n";}if(v.cH){e+=r.getText("sb.ch")+": "+v.cH+"\n";}if(v.wH){e+=r.getText("sb.wh")+": "+v.wH+"\n";}if(v.wL){e+=r.getText("sb.wl")+": "+v.wL+"\n";}if(v.cL){e+=r.getText("sb.cl")+": "+v.cL+"\n";}}if(d=="CONT"||d=="COMP"){if(v.measure&&d=="CONT"){if(v&&v.contributionTile.contributionTile&&v.contributionTile.contributionTile[1]==="asc"){e+=r.getText("sb.bottomn")+": "+v.contributionTile[0]+"\n";}else if(v&&v.contributionTile.contributionTile&&v.contributionTile.contributionTile.length){e+=r.getText("sb.topn")+": "+v.contributionTile[0]+"\n";}}if(v.m1&&((v.v1==undefined||v.v1==null)?false:v.v1.toString())&&v.c1){e+=v.m1+": "+v.v1+" "+r.getText(v.c1)+"\n";}if(v.m2&&((v.v2==undefined||v.v2==null)?false:v.v2.toString())&&v.c2){e+=v.m2+": "+v.v2+" "+r.getText(v.c2)+"\n";}if(v.m3&&((v.v3==undefined||v.v3==null)?false:v.v3.toString())&&v.c3){e+=v.m3+": "+v.v3+" "+r.getText(v.c3)+"\n";}}C&&C.setTooltip&&C.setTooltip(e);},_getFormattedTileProperties:function(d){d=d||{};var p=["sb_metadata","sb_navigation","sb_catalog"];var e=false;for(var i=0;!e&&i<p.length;i++){e=e||jQuery.sap.getUriParameters().get(p[i])||d[p[i]];}d.sb_metadata=(jQuery.sap.getUriParameters().get("sb_metadata")||d.sb_metadata||"HANA").toLowerCase();d.sb_navigation=(jQuery.sap.getUriParameters().get("sb_navigation")||d.sb_navigation||"abap").toLowerCase();d.sb_catalog=(jQuery.sap.getUriParameters().get("sb_catalog")||d.sb_catalog||"HANA").toLowerCase();d.isPlatformInfoPresent=e;return d;},getEvaluationDetailsFromRunTimeService:function(e,p,i,d){var K=this.getODataModelByServiceUri(this.getRunTimeUri(p));var f="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",i);var k=K.read(e,null,{"$filter":f},true,function(h){var j=[];if(h.results.length){j=h.results;}d.call(this,j);});},getParsedChip:function(C,i,d){try{var p={};var e=JSON.parse(C);var f=JSON.parse(e.TILE_PROPERTIES).evaluationId||"";if(e.TILE_PROPERTIES){var h=JSON.parse(e.TILE_PROPERTIES);if(h&&(h.instanceId||h.catalogId)){return false;}}var j=this;if(e.blankTile){p["BLANKTILE"]=e.blankTile;}if(e.cachingTime){p["CACHINGTIME"]=e.cachingTime;}if(e.cachingTimeUnit){p["CACHINGUNIT"]=e.cachingTimeUnit;}if(e.TAGS){p["TAGS"]=JSON.parse(e.TAGS);}if(e.ADDITIONAL_FILTERS){p["ADDITIONAL_FILTERS"]=JSON.parse(e.ADDITIONAL_FILTERS);}if(e.ADDITIONAL_APP_PARAMETERS){p["ADDITIONAL_APP_PARAMETERS"]=JSON.parse(e.ADDITIONAL_APP_PARAMETERS);}p.TILE_PROPERTIES=this._getFormattedTileProperties(JSON.parse(e.TILE_PROPERTIES));var P=p.TILE_PROPERTIES.sb_metadata;if(e.EVALUATION_FILTERS){p["EVALUATION_FILTERS"]=JSON.parse(e.EVALUATION_FILTERS);if(e.EVALUATION_VALUES){p["EVALUATION_VALUES"]=JSON.parse(e.EVALUATION_VALUES);if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else{if(!i){j.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,f,function(l){p.EVALUATION=l;if(d){d(p);}else{return p;}});}else{if(d){d(p);}else{return p;}}}}else{if(!i){j.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",P,f,function(l){p["EVALUATION_VALUES"]=l;if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else{j.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,f,function(l){p.EVALUATION=l;if(d){d(p);}else{return p;}});}});}else{if(d){d(p);}else{return p;}}}}else if(i){if(d){d(p);}else{return p;}}else{j.getEvaluationDetailsFromRunTimeService("/EVALUATION_FILTERS",P,f,function(l){p["EVALUATION_FILTERS"]=l;if(e.EVALUATION_VALUES){p["EVALUATION_VALUES"]=JSON.parse(e.EVALUATION_VALUES);if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else{j.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,f,function(l){p.EVALUATION=l;if(d){d(p);}else{return p;}});}}else{j.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",P,f,function(l){p["EVALUATION_VALUES"]=l;if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else{j.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,f,function(l){p.EVALUATION=l;if(d){d(p);}else{return p;}});}});}});}}catch(k){return false;}},getNavigationTarget:function(C,s){var f=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService;var o=f&&f("CrossApplicationNavigation");var e;var p={};p["evaluationId"]=C.EVALUATION.ID;p["chipId"]=C.TILE_PROPERTIES.id;if(s){p["sap-system"]=s;}p["tileType"]=C.TILE_PROPERTIES.tileType;if(C.TILE_PROPERTIES.dimension){p["dimension"]=C.TILE_PROPERTIES.dimension;}if(C.TILE_PROPERTIES.storyId){p["storyId"]=C.TILE_PROPERTIES.storyId;}if(C.TILE_PROPERTIES.apfConfId){p["sap-apf-configuration-id"]=C.TILE_PROPERTIES.apfConfId;}if(C.TILE_PROPERTIES.isPlatformInfoPresent){p["sb_metadata"]=C.TILE_PROPERTIES.sb_metadata;p["sb_navigation"]=C.TILE_PROPERTIES.sb_navigation;p["sb_catalog"]=C.TILE_PROPERTIES.sb_catalog;}if(C.ADDITIONAL_APP_PARAMETERS){for(e in C.ADDITIONAL_APP_PARAMETERS){if(C.ADDITIONAL_APP_PARAMETERS.hasOwnProperty(e)){if(C.ADDITIONAL_APP_PARAMETERS[e].constructor==Array){var d=C.ADDITIONAL_APP_PARAMETERS[e];for(var i=0;i<d.length;i++){p[e]=d[i];}}else{p[e]=C.ADDITIONAL_APP_PARAMETERS[e];}}}}var h=o&&o.hrefForExternal({target:{semanticObject:C.TILE_PROPERTIES.semanticObject,action:C.TILE_PROPERTIES.semanticAction},params:p})||"";if(C.ADDITIONAL_FILTERS){var k=C.ADDITIONAL_FILTERS;var l="&";for(var j=0;j<k.length;j++){if(k[j].OPERATOR==="EQ"){l=l+"/"+k[j].NAME+"="+k[j].VALUE_1;}}h+=l;}return h;},getChipTitle:function(C){var d="";if(C){var e=C.EVALUATION||{};d=e.INDICATOR_TITLE||"";}return d;},getstringifyTileConfig:function(C){var s={};s.EVALUATION=JSON.stringify(C.EVALUATION);s.EVALUATION_FILTERS=JSON.stringify(C.EVALUATION_FILTERS);s.EVALUATION_VALUES=JSON.stringify(C.EVALUATION_VALUES);s.TILE_PROPERTIES=JSON.stringify(C.TILE_PROPERTIES);return JSON.stringify(s);},getChipSubTitle:function(C){var T="";if(C){var d=C.EVALUATION||{};T=d.TITLE||"";}return T;},getAllMeasures:function(u,d){var m=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(d);m=q.getAllMeasureNames();}catch(e){$.sap.log.error("Error Fetching All Measures : "+e.toString());}return m;},getFormattingMetadata:function(u,e,p){var f={};f._hasCurrency=false;f._hasSapText=false;var m=null;if(u instanceof sap.ui.model.odata.ODataModel){m=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(u);}else{var d=this.getODataModelByServiceUri(u);m=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(d);}var O=new sap.ui.model.analytics.odata4analytics.Model(m);var q=O.findQueryResultByName(e);var h=q.getAllMeasures();if(h[p]){var s=(h[p]._oTextProperty&&h[p]._oTextProperty.name)?h[p]._oTextProperty.name:"";if(s!=""){f._hasSapText=true;f._sapTextColumn=s;}else if(h[p].hasOwnProperty("_oUnitProperty")){var j=h[p]._oUnitProperty.extensions;for(var i=0;i<h[p]._oUnitProperty.extensions.length;i++){if(j[i].name==="semantics"&&j[i].value==="currency-code"){f._hasCurrency=true;f._currencyColumn=h[p]._oUnitProperty.name;}}}}return f;},getAllDimensions:function(u,d){function i(j,k){var l=0,m=0;var r=[];while(l<j.length&&m<k.length){if(j[l]<k[m]){l++;}else if(j[l]>k[m]){m++;}else{r.push(j[l]);l++;m++;}}return r;}var f=[];var F=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(d);var h=q.getEntityType();F=h.getFilterablePropertyNames();f=q.getAllDimensionNames();if(F&&F.length){f=i(F.sort(),f.sort());}}catch(e){$.sap.log.error("Error Fetching All Dimesions : "+e.toString());}return f;},prepareQueryServiceUri:function(u,d,m,f,v,o,h){function _(S){return S.replace(/'/g,"''");}var n=null;var p=function(){};var q=function(){};try{var r=null;if(u instanceof sap.ui.model.odata.ODataModel){r=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(u);}else{var s=this.getODataModelByServiceUri(u);r=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(s);}var O=new sap.ui.model.analytics.odata4analytics.Model(r);var Q=O.findQueryResultByName(d);var w=new sap.ui.model.analytics.odata4analytics.QueryResultRequest(Q);if(m){w.setMeasures(m.split(","));w.includeMeasureRawFormattedValueUnit(null,true,true,true);}if(f){if(typeof f=="string"){n=f;n=n.split(",");}for(var i=0;i<n.length;i++){w.addToAggregationLevel([n[i]]);var x=Q.getAllDimensions();if(x[n[i]].getTextProperty()!=null){w.includeDimensionKeyTextAttributes([n[i]],true,true,null);}}}if(v&&v.length){var A=[];var B=[];for(var i=0,l=v.length;i<l;i++){var C=v[i];if(C.type==="PA"){B.push(C);}else if(C.type==="FI"){A.push(C);}}p=function(S){var T=S.toJSON();var U=T.charAt(T.length-1).toUpperCase();if(U.charCodeAt(0)>=65&&U.charCodeAt(0)<=90){T=T.slice(0,-1);}return T;};q=function(S){if(S){try{if(S==+S){S=window.parseInt(S);}var T=new Date(S);var U=T.getTime();if(isNaN(U)){return S;}else{return p(T);}}catch(e){}}return S;};if(A.length){var F=w.getFilterExpression();for(var i=0,l=A.length;i<l;i++){var C=A[i];if(this.getEdmType(u,C.filterPropertyName)=="Edm.DateTime"){C.value=q(C.value);C.valueTo=q(C.valueTo);}if(C.comparator==sap.ui.model.FilterOperator.BT){F.addCondition(C.filterPropertyName,C.comparator,_(C.value),C.valueTo);}else{var D=C.value.split(",");for(var j=0,k=D.length;j<k;j++){F.addCondition(C.filterPropertyName,C.comparator,_(D[j].replace(/\^\|/g,",")),null);}}}}if(B.length){if(Q.getParameterization()){var P=new sap.ui.model.analytics.odata4analytics.ParameterizationRequest(Q.getParameterization());var E=Q.getParameterization();var G,H,I,J,K;for(var y=0,z=B.length;y<z;y++){G=B[y];H=E.findParameterByName(G.filterPropertyName);if(H.isIntervalBoundary()===true&&H.isLowerIntervalBoundary()===true){K=H.getPeerIntervalBoundaryParameter();for(var i=0,l=B.length;i<l;i++){if(B[i].filterPropertyName===K.getName()){J=_(B[i].value);break;}}I=_(G.value);if(J){P.setParameterValue(G.filterPropertyName,I,J);}}else if(H.isIntervalBoundary()===true&&H.isLowerIntervalBoundary()===false){jQuery.sap.log.info("Future development");}else{P.setParameterValue(G.filterPropertyName,_(G.value));}}w.setParameterizationRequest(P);}}}var L=w.getURIToQueryResultEntries();if(o&&o.length){L=L+"&$orderby=";for(var y=0,z=o.length;y<z;y++){var M=o[y].sortOrder||"asc";if(M){L+=o[y].element+" "+M+",";}}L=L.slice(0,L.length-1);}if(h){L=L+"&$top="+h;}var N=Q.getAllMeasures();var R=[];for(var i=0;i<m.split(",").length;i++){R.push(N[m.split(",")[i]].getUnitProperty());}return{uri:L,model:O.getODataModel(),unit:R};}catch(e){$.sap.log.error("Error Preparing Query Service Uri using OData4Analytics Library : "+e.toString());if(arguments.length){$.sap.log.error("Arguments Passed to this function");$.sap.log.error(arguments[0]+","+arguments[1]+","+arguments[2]+","+arguments[3]);}else{$.sap.log.error("NO Arguments passed to this function");}return null;}},getAllEntitySet:function(u){var d=[];try{var o=this._getOData4AnalyticsObject(u);d=o.getAllQueryResultNames();}catch(e){$.sap.log.error("Error fetching Enity Set : "+e.toString());}return d;},getAllMeasuresWithLabelText:function(u,d){var m=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(d);var f=q.getAllMeasureNames();for(var i=0;i<f.length;i++){var h=f[i];g.oMeasure=q.findMeasureByName(h);m.push({key:h,value:oMeasure.getLabelText()});}}catch(e){$.sap.log.error("Error Fetching All Measures : "+e.toString());}return m;},getAllDimensionsWithLabelText:function(u,d){var f=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(d);var h=q.getAllDimensionNames();for(var i=0;i<h.length;i++){var j=h[i];var D=q.findDimensionByName(j);var k=null;if(D.getTextProperty()!=null){k=D.getTextProperty().name;}f.push({key:j,value:D.getLabelText(),textProperty:k});}}catch(e){$.sap.log.error("Error Fetching All Dimesions : "+e.toString());}return f;},getAllInputParams:function(u,d){var i=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(d);if(q.getParameterization()){var p=q.getParameterization();i=p.getAllParameterNames();}}catch(e){$.sap.log.error("Error Fetching Input Params : "+e.toString());}return i;},getAllInputParamsWithFlag:function(u,d){var f=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(d);if(q.getParameterization()){var p=q.getParameterization();var h=p.getAllParameterNames();for(var i=0;i<h.length;i++){var j=h[i];var k=p.findParameterByName(j);f.push({name:j,optional:k.isOptional()});}}}catch(e){$.sap.log.error("Error Fetching Input Params : "+e.toString());}return f;},formatOdataObjectToString:function(v){if(v&&v.constructor==Object){if(v.__edmType=="Edm.Time"){var m=v.ms;var s=Math.floor((m/1000)%60);var d=Math.floor((m/60000)%60);var h=Math.floor((m/3600000)%24);return h+"H"+d+"M"+s+"S";}}return v;},generateCombinations:function(d){function e(h,s){while(s.length<h){s='0'+s;}return s;}var m=Math.pow(2,d.length);var r=[];var f=0;while(m>1){var s=(m-1).toString(2);s=e(d.length,s);r[f]=[];for(var i=0;i<s.length;i++){if(Number(s[i])){r[f].push(d[i]);}}m--;f++;}return r;},logError:function(e,C){if(e=="no data"&&C){var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();C.setFailedText(r.getText("sb.noData"));}jQuery.sap.log.error(e.toString());},numberOfLeadingZeros:function(n){n=String(n);var d=0;var e=n.indexOf('.');if(e==-1){return 0;}if(Number(n.split('.')[0])!=0){return 0;}var i=e+1;while(n[i++]=='0'){++d;}return d;},formatValue:function(v,s,M){M=M||3;var u={3:"K",6:"M",9:"B",12:"T",0:""};u["-3"]="m";u["-6"]="u";u["-9"]="n";u["-12"]="t";u["-2"]="%";var d,p,e;d=Number(v).toPrecision(M);var z=this.numberOfLeadingZeros(d);if(z>0&&s<0){p=d*Math.pow(10,z+M);e=-(z+M);}else{p=Number(d.split("e")[0]);e=Number(d.split("e")[1])||0;}if(!v&&v!=0){return{value:"",unitPrefix:""};}if(s>=0){if(e%3!=0){if(e%3==2){if(e+1==s){e=e+1;p=p/10;}else{e=e-2;p=p*100;}}else{if(e+2==s){e=e+2;p=p/100;}else{e--;p=p*10;}}}else if(e==15){p=p*1000;e=12;}}else{if(s=="-2"){var x=this.formatValue((v*100),0);}else if(e>=0&&v<10&&s=="-3"){p=v*Math.pow(10,3);e=-3;}else if(e>=0){return this.formatValue(v,0);}else{e=Math.abs(e);s=Math.abs(s);if(s>e){p=p/(Math.pow(10,e%3));e=e-(e%3);}else{var f=e-s;p=p/(Math.pow(10,f));e=e-f;}e=0-e;}}p+="";if(s=="-2"){var h=(x.unitPrefix=="")?Number(x.value+"").toFixed(4-(x.value+"").indexOf('.')):Number(x.value+"").toFixed(3-(x.value+"").indexOf('.'));return{value:Number(h),unitPrefix:(x.unitPrefix)+u[-2]};}p=Number(p).toFixed(4-p.indexOf('.'));return{value:Number(p),unitPrefix:u[e]};},isSmartbusinessChipAndCachable:function(d){var C=this.getParsedChip(d&&d.getConfigurationParameter("tileConfiguration"));return(C&&C.TILE_PROPERTIES&&C.TILE_PROPERTIES.tileType&&this.getCachingTime(C));},getHanaClient:function(){var e;var f=function(d,s,x){e=d.sessionClient;sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(e);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e);};var h=function(d,k,l){jQuery.sap.log.error(d.responseText);jQuery.sap.log.error("session client call failed");sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(null);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.reject();};var i=sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED||jQuery.Deferred();var j=sap.ushell.components.tiles.indicatorTileUtils.cache.getCacheHanaClient();if(j!=undefined){e=j;sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e);}else if(sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED){return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise();}else{sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED=i;jQuery.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/r/sb/core/logic/GetSessionClient.xsjs",success:f,error:h});}return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise();},abortPendingODataCalls:function(d){try{if(d){d.abort();}}catch(e){this.logError(e);}}};})(window,jQuery);sap.ushell.components.tiles.indicatorTileUtils.cache=(function(){var B={};var K={};var s="HANA_CLIENT";return{getCacheHanaClient:function(){return B[s];},setCacheHanaClient:function(d){B[s]=d;},getEvaluationByChipId:function(k){if(B[k]){return B[k];}return null;},getEvaluationById:function(k){return this.getEvaluationByChipId(k);},setEvaluationById:function(k,d){B[k]=d;},getFrontEndCacheDeferredObject:function(k){if(B[k]){return B[k];}return null;},setFrontEndCacheDefferedObject:function(k,d){B[k]=d;},getKpivalueById:function(k){if(K[k]){return K[k];}return null;},setKpivalueById:function(k,d){K[k]=d;}};})();return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.controller',['sap/ushell/components/tiles/generic'],function(g){"use strict";
var C=g.extend("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=false;},
_processDataForComparisonChart:function(d,m,u){var f=[],L={},i,t,l;var a;var T=[];var b=this;var e=null;for(i=0;i<d.results.length;i++){var h=d.results[i];}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oTileApi.url.addSystemToServiceUrl(this.oConfig.EVALUATION.ODATA_URL),this.oConfig.EVALUATION.ODATA_ENTITYSET);for(i=0,l=T.length;i<l;i++){t=T[i];L[t.key]=t.value;}var j=b.oConfig.TILE_PROPERTIES.COLUMN_NAMES||b.oConfig.EVALUATION.COLUMN_NAMES;for(i=0;i<j.length;i++){var k={};var n=j[i];k.value=Number(h[n.COLUMN_NAME]);var o=Number(h[n.COLUMN_NAME]);var p=false;var s=0;var q=b._getEvaluationThresholdMeasures();var I=jQuery.inArray(n.COLUMN_NAME,q);if(I>-1){p=true;s=b.oConfig.EVALUATION.SCALING;}if(b.oConfig.EVALUATION.SCALING==-2&&p){o*=100;}var c=b.isCurrencyMeasure(n.COLUMN_NAME);if(u&&u[i]&&h[u[i].name]){e=h[u[i].name];}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(o,s,b.oConfig.EVALUATION.SCALING,b.oConfig.EVALUATION.DECIMAL_PRECISION,c,e);if(b.oConfig.EVALUATION.SCALING==-2&&p){a+=" %";}k.displayValue=a.toString();if(u){if(u[i]&&h[u[i].name]){k.displayValue+=" "+h[u[i].name];}}k.color=n.semanticColor;k.title=L[n.COLUMN_NAME]||n.COLUMN_NAME;k.measure=n.COLUMN_NAME;k.isCurM=c;f.push(k);}return f;},
fetchChartData:function(r,a,s,E){function c(w,x){var y=false;if(w&&w.results&&w.results.length){for(var i=0,l=x.length;i<l&&!y;i++){y=w.results[0][x[i].COLUMN_NAME]!==null;}}return y;}var t=this;try{var b=this.oConfig.EVALUATION.ODATA_ENTITYSET;var m=this.oConfig.EVALUATION.COLUMN_NAME;var d=m;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(var j=0;j<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;j++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){d=d+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME;}}}else{for(var j=0;j<this.oConfig.EVALUATION.COLUMN_NAMES.length;j++){if(this.oConfig.EVALUATION.COLUMN_NAMES[j].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){d=d+","+this.oConfig.EVALUATION.COLUMN_NAMES[j].COLUMN_NAME;}}}var f=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(h){var k=h.Data&&JSON.parse(h.Data);}}var n=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var o=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,n,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);if((k&&!k.rightData)||!h||(!o&&t.oTileApi.visible.isVisible())||f||(a&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh){if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var p=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,b,d,null,v,3);this.comparisionChartODataRef=p.model.read(p.uri,null,null,true,function(i){t.kpiValueFetchDeferred=true;var w={};if(p.unit){w.unit=p.unit;}if(c(i,t.oConfig.TILE_PROPERTIES.COLUMN_NAMES||t.oConfig.EVALUATION.COLUMN_NAMES)){t.oConfig.TILE_PROPERTIES.FINALVALUE=i;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,d.split(",")[0],p.unit);w.data=t.oConfig.TILE_PROPERTIES.FINALVALUE;var l={};t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();l.ChipId=t.oConfig.TILE_PROPERTIES.id;l.Data=JSON.stringify(w);l.CacheMaxAge=Number(t.chipCacheTime);l.CacheMaxAgeUnit=t.chipCacheTimeUnit;l.CacheType=1;var x=t.getLocalCache(l);t.updateDatajobScheduled=false;var y=t.oConfig.TILE_PROPERTIES.id+"data";var z=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(y);if(z){clearTimeout(z);z=undefined;}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,x);var U=false;if(h){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,l,U,function(i){if(i){t.cacheTime=i&&i.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,i);t.setTimeStamp();}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){jQuery.proxy(t.setTimeStamp(t.cacheTime),t);}});}}else{var A=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(A){if(!A.CachedTime){A.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}var B=A.Data;if(B){B=JSON.parse(B);B.rightData=w;}A.Data=JSON.stringify(B);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,A);}else{var B={};B.rightData=w;x.Data=JSON.stringify(B);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,x);}t.cacheWriteData=w;}s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(i.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=i;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){w=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);w.data=i;}else{w.data=i;}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,{empty:"empty"});t.setNoData();}},function(i){t.kpiValueFetchDeferred=true;if(i&&i.response){jQuery.sap.log.error(i.message+" : "+i.request.requestUri);E.call(t,i);}});}}else{if(h&&h.Data){var q;var u=t.oConfig&&t.oConfig.TILE_PROPERTIES&&t.oConfig.TILE_PROPERTIES.tileType;if(u.indexOf("DT-")==-1){q=h.Data&&JSON.parse(h.Data);}else{q=h.Data&&JSON.parse(h.Data);q=q.rightData;}t.cacheTime=h.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){jQuery.proxy(t.setTimeStamp(t.cacheTime),t);}if(q.data&&q.data.length){t.oConfig.TILE_PROPERTIES.FINALVALUE=q.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{t.oConfig.TILE_PROPERTIES.FINALVALUE=q.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}}else{t.setNoData();}}}catch(e){t.kpiValueFetchDeferred=true;E.call(t,e);}},
doProcess:function(r,i){var t=this;this.setTextInTile();this.fetchChartData(r,i,function(k){this.CALCULATED_KPI_VALUE=k;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==sap.m.FrameType.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(sap.m.FrameType.TwoByOne);t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());var c={};c.data=this.CALCULATED_KPI_VALUE;t.getView().getViewData().deferredObj.resolve();}else{t.oKpiTileView.oGenericTile.setFrameType(sap.m.FrameType.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"COMP");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}},this.logError);},
doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({value:8888,size:sap.m.Size.Auto,frameType:sap.m.FrameType.OneByOne,state:sap.m.LoadState.Loading,valueColor:sap.m.ValueColor.Error,indicator:sap.m.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1.2,color:"Good"},{title:"Measure 2",value:0.78,color:"Good"},{title:"Measure 3",value:1.4,color:"Error"}]});this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);}
});
return C;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorcontribution/ContributionTile.controller',['sap/ushell/components/tiles/generic'],function(g){"use strict";
var C=g.extend("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=false;},
_processDataForComparisonChart:function(d,m,a,u){var s=this.oConfig.TILE_PROPERTIES.semanticColorContribution;var f=[];var t;var b;for(var i=0;i<d.results.length;i++){var h=d.results[i];var j={};try{j.title=h[a].toString();}catch(e){j.title="";}j.value=Number(h[m]);var k=Number(h[m]);if(this.oConfig.EVALUATION.SCALING==-2){k*=100;}var c=this.isCurrencyMeasure(m);b=h[u];t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(k,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,b);j.displayValue=t.toString();if(typeof s==='undefined'){j.color="Neutral";}else{j.color=s;}if(j&&u){j[u]=b;}f.push(j);}return f;},
fetchChartData:function(r,i,s,E){var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL;var a=this.oConfig.EVALUATION.ODATA_ENTITYSET;t.setThresholdValues();if(this.oConfig.TILE_PROPERTIES.semanticMeasure){var m=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{var m=this.oConfig.EVALUATION.COLUMN_NAME;}var b=null;var d=this.oConfig.TILE_PROPERTIES.dimension;this.oConfig.EVALUATION_VALUES;var c=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var f=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(f){var h=f.Data&&JSON.parse(f.Data);}}var j=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var k=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,j,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);if((h&&!h.rightData)||!f||(!k&&t.oTileApi.visible.isVisible())||c||(i&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh){if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=m+",asc";o["1"]=m+",desc";o["2"]=d+",asc";o["3"]=d+",desc";var l=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var n=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,a,m,d,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){n.uri+="&$top=3&$orderby="+l[0]+" "+l[2];}else{n.uri+="&$top=3&$orderby="+l[0]+" "+l[1];}this.comparisionChartODataRef=n.model.read(n.uri,null,null,true,function(w){t.kpiValueFetchDeferred=true;var x={};if(w&&w.results&&w.results.length){if(n.unit[0]){t._updateTileModel({unit:w.results[0][n.unit[0].name]});b=n.unit[0].name;x.unit=n.unit[0];x.unit.name=n.unit[0].name;}d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oRunTimeODataModel,a,d);x.dimension=d;t.oConfig.TILE_PROPERTIES.FINALVALUE=w;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,m.split(",")[0],d,b);x.data=t.oConfig.TILE_PROPERTIES.FINALVALUE;x.isCurM=t.isACurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var y={};t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();y.ChipId=t.oConfig.TILE_PROPERTIES.id;y.Data=JSON.stringify(x);y.CacheMaxAge=Number(t.chipCacheTime);y.CacheMaxAgeUnit=t.chipCacheTimeUnit;y.CacheType=1;var z=t.getLocalCache(y);t.updateDatajobScheduled=false;var A=t.oConfig.TILE_PROPERTIES.id+"data";var B=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(A);if(B){clearTimeout(B);B=undefined;}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,z);var U=false;if(f){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,y,U,function(w){if(w){t.cacheTime=w&&w.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){jQuery.proxy(t.setTimeStamp(t.cacheTime),t);}});}}else{var D=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(D){if(!D.CachedTime){D.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}var F=D.Data;if(F){F=JSON.parse(F);if(t.oKpiTileView.getViewName()=="tiles.indicatornumeric.NumericTile"){F.leftData=x;}else{F.rightData=x;}}D.Data=JSON.stringify(F);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,D);}else{var F={};F.rightData=x;z.Data=JSON.stringify(F);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,z);}t.cacheWriteData=x;}s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(w.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=w;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){x=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);x.data=w;}else{x.data=w;}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,x);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,{empty:"empty"});t.setNoData();}},function(w){t.kpiValueFetchDeferred=true;if(w&&w.response){jQuery.sap.log.error(w.message+" : "+w.request.requestUri);E.call(t,w);}});}}else{if(f&&f.Data){var p;var q=t.oConfig&&t.oConfig.TILE_PROPERTIES&&t.oConfig.TILE_PROPERTIES.tileType;if(q.indexOf("DT-")==-1){p=f.Data&&JSON.parse(f.Data);}else{p=f.Data&&JSON.parse(f.Data);p=p.rightData;}t.cacheTime=f.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){jQuery.proxy(t.setTimeStamp(t.cacheTime),t);}if(p.data&&p.data.length){if(p.unit){t._updateTileModel({unit:p.data[0][p.unit.name]});}d=p.dimension;t.oConfig.TILE_PROPERTIES.FINALVALUE=p.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(p&&p.data&&p.data instanceof Array&&p.data.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=p.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{t.setNoData();}}else{t.setNoData();}}}catch(e){t.kpiValueFetchDeferred=true;E.call(t,e);}},
doProcess:function(r,i){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);this.setTextInTile();this.fetchChartData(r,i,function(k){this.CALCULATED_KPI_VALUE=k;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==sap.m.FrameType.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(sap.m.FrameType.TwoByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());t.getView().getViewData().deferredObj.resolve();}else{t.oKpiTileView.oGenericTile.setFrameType(sap.m.FrameType.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"CONT");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}},this.logError);},
doDummyProcess:function(){var t=this;t.setTextInTile();t._updateTileModel({value:8888,size:sap.m.Size.Auto,frameType:sap.m.FrameType.OneByOne,state:sap.m.LoadState.Loading,valueColor:sap.m.ValueColor.Error,indicator:sap.m.DeviationIndicator.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral"},{title:"EMEA",value:50,color:"Neutral"},{title:"APAC",value:-20,color:"Neutral"}]});this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);}
});
return C;});
sap.ui.predefine('sap/ushell/components/tiles/indicatordeviation/DeviationTile.controller',['sap/ushell/components/tiles/generic'],function(g){"use strict";
var D=g.extend("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=true;},
doProcess:function(k,t){var a=this;var f,b;f=t.targetValue;var d=Number(k);var e=this.setThresholdValues();if(this.oConfig.EVALUATION.SCALING==-2){d*=100;}var c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);b=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(d),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);this.CALCULATED_KPI_VALUE=Number(k);var h={};var i=this.getThresholdsObjAndColor(t).returnColor;var j={value:Number(k),color:i};h.actualValueLabel=b.toString();h.actual=j;h.thresholds=[];h.thresholds=this.getThresholdsObjAndColor(t).arrObj;var l=this.DEFINITION_DATA.EVALUATION_VALUES;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var m=Number(f);if(this.oConfig.EVALUATION.SCALING==-2){m*=100;}c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(m,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);h.targetValue=Number(m);h.targetValueLabel=f.toString();}else{for(var n=0;n<l.length;n++){if(l[n].TYPE==="TA"){var m=Number(f);if(this.oConfig.EVALUATION.SCALING==-2){m*=100;}c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(m,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);h.targetValue=Number(m);h.targetValueLabel=f.toString();}}}if(this.oConfig.EVALUATION.SCALING==-2){h.scale="%";}this._updateTileModel(h);if(this.DEFINITION_DATA.TILE_PROPERTIES.frameType==sap.m.FrameType.TwoByOne){a.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());a.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(a.oConfig.TILE_PROPERTIES.id+"defferedRight",false);}else{this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);}this.setToolTip(i,d,"DT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}}},
getThresholdsObjAndColor:function(t){try{var T={};T.arrObj=[];T.returnColor=sap.m.ValueColor.Neutral;var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var w,c,a,b;if(i==="MI"){a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;if(a&&b){a=window.parseFloat(a);b=window.parseFloat(b);T.arrObj.push({value:a,color:sap.m.ValueColor.Error});T.arrObj.push({value:b,color:sap.m.ValueColor.Critical});if(this.CALCULATED_KPI_VALUE<b){T.returnColor=sap.m.ValueColor.Good;}else if(this.CALCULATED_KPI_VALUE<=a){T.returnColor=sap.m.ValueColor.Critical;}else{T.returnColor=sap.m.ValueColor.Error;}}}else if(i==="MA"){c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(c&&w){c=window.parseFloat(c);w=window.parseFloat(w);T.arrObj.push({value:c,color:sap.m.ValueColor.Error});T.arrObj.push({value:w,color:sap.m.ValueColor.Critical});if(this.CALCULATED_KPI_VALUE<c){T.returnColor=sap.m.ValueColor.Error;}else if(this.CALCULATED_KPI_VALUE<=w){T.returnColor=sap.m.ValueColor.Critical;}else{T.returnColor=sap.m.ValueColor.Good;}}}else{a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(w&&b&&c&&c){a=window.parseFloat(a);b=window.parseFloat(b);w=window.parseFloat(w);c=window.parseFloat(c);T.arrObj.push({value:a,color:sap.m.ValueColor.Error});T.arrObj.push({value:b,color:sap.m.ValueColor.Critical});T.arrObj.push({value:w,color:sap.m.ValueColor.Critical});T.arrObj.push({value:c,color:sap.m.ValueColor.Error});if(this.CALCULATED_KPI_VALUE<c||this.CALCULATED_KPI_VALUE>a){T.returnColor=sap.m.ValueColor.Error;}else if((this.CALCULATED_KPI_VALUE>=c&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=b&&this.CALCULATED_KPI_VALUE<=a)){T.returnColor=sap.m.ValueColor.Critical;}else{T.returnColor=sap.m.ValueColor.Good;}}}return T;}catch(e){this.logError(e);}},
doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({actual:{value:120,color:sap.m.ValueColor.Good},targetValue:100,thresholds:[{value:0,color:sap.m.ValueColor.Error},{value:50,color:sap.m.ValueColor.Critical},{value:150,color:sap.m.ValueColor.Critical},{value:200,color:sap.m.ValueColor.Error}],showActualValue:true,showTargetValue:true});this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);}
});
return D;});
sap.ui.predefine('sap/ushell/components/tiles/indicatornumeric/NumericTile.controller',['sap/ushell/components/tiles/generic'],function(g){"use strict";
var N=g.extend("sap.ushell.components.tiles.indicatornumeric.NumericTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=true;},
doProcess:function(k,t){var a=this;this.CALCULATED_KPI_VALUE=k;this.DEFINITION_DATA.EVALUATION_VALUES;var b=this.getTrendColor(t);var d=this.getTrendIndicator(t.trendValue);var s="";var e=this.CALCULATED_KPI_VALUE;if(this.oConfig.EVALUATION.SCALING==-2){e*=100;this.getView().oNVConfContS.setFormatterValue(false);}var c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(e),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);if(this.oConfig.EVALUATION.SCALING==-2){this._updateTileModel({scale:"%"});}this._updateTileModel({value:s.toString(),valueColor:b,indicator:d});if(a.oConfig.TILE_PROPERTIES.frameType==sap.m.FrameType.OneByOne){this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);this.setToolTip(b,e,"NT");}else{a.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());a.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(a.oConfig.TILE_PROPERTIES.id+"defferedLeft",false);}this.setToolTip(b,e,"NT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(a.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,a.oTileApi.visible.isVisible());}}},
doDummyProcess:function(){var t=this;this.setTextInTile();if(!(t.oConfig.BLANKTILE||t.oConfig.TILE_PROPERTIES.blankTile)){t._updateTileModel({value:"10.34",scale:"M",valueColor:sap.m.ValueColor.Neutral,indicator:sap.m.DeviationIndicator.None});}else{this.oKpiTileView.oNVConfContS.setIcon('sap-icon://BusinessSuiteInAppSymbols/icon-multiple-charts');}this.oKpiTileView.oGenericTile.setState(sap.m.LoadState.Loaded);}
});
return N;});
sap.ui.predefine('sap/ushell/components/tiles/indicatornumeric/NumericTile.view',['sap/ui/core/mvc/JSView','sap/ui/model/analytics/odata4analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil'],function(J,o,s){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("sap.ushell.components.tiles.indicatornumeric.NumericTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatornumeric.NumericTile";},createContent:function(c){var h="Lorem ipsum";var a="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;a=t.subTitle;}var g={subheader:a,header:h,footerNum:"",footerComp:"",scale:"",unit:"",value:"",size:"Auto",frameType:"OneByOne",state:sap.m.LoadState.Loading,valueColor:sap.m.ValueColor.Neutral,indicator:sap.m.DeviationIndicator.None,title:"",footer:"",description:""};this.oNVConfContS=new sap.m.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",valueColor:"{/valueColor}",size:"{/size}",formatterValue:true,truncateValueTo:5,nullifyValue:false});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new sap.m.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var G=new sap.ui.model.json.JSONModel();G.setData(g);this.oGenericTile.setModel(G);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/plugins/BaseRTAPluginStatus',function(){"use strict";return{STATUS_STARTING:'starting',STATUS_STARTED:'started',STATUS_STOPPING:'stopping',STATUS_STOPPED:'stopped'};},true);
sap.ui.predefine('sap/ushell/plugins/PluginLifeCycleWrapper',[],function(){"use strict";jQuery.sap.log.debug("PluginLifeCycleWrapper - module loaded");});
sap.ui.predefine('sap/ushell/plugins/PluginLifeCycleWrapper/Component',["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/components/LifeCycleWrapper"],function(U,J,L){"use strict";return U.extend("sap.ushell.plugins.PluginLifeCycleWrapper.Component",{oMainView:null,oCrossApplicationNavigationDeferred:new jQuery.Deferred(),oURLParsingDeferred:new jQuery.Deferred(),metadata:{"manifest":"json"},initModel:function(){var t=this;var s=new J();},createContent:function(){this.initModel();var c=this.getComponentData().config;var x=L.createLifeCycleWrapperShell(c);},exit:function(){jQuery.sap.log.error("sap.ushell.plugins.PluginLifeCycleWrapper.Component: Component.js exit called : this.getId():"+this.getId());this.oMainView=null;}});});
sap.ui.predefine('sap/ushell/plugins/appwarmup/ShellUIService',['sap/ui/core/service/Service'],function(S){"use strict";return S.extend("sap.ushell.plugins.appwarmup.ShellUIService",{setTitle:function(){return;},setHierarchy:function(){return;},setBackNavigation:function(){return;},getTitle:function(){return;},setRelatedApps:function(){return;},getUxdVersion:function(){return 1;}});});
sap.ui.predefine('sap/ushell/plugins/ghostapp/Component',["sap/ui/generic/app/AppComponent"],function(A){"use strict";sap.ui.getCore().loadLibrary("sap.ui.generic.app");return A.extend("sap.ushell.plugins.ghostapp.Component",{metadata:{"manifest":"json"}});});
sap.ui.predefine('sap/ushell/plugins/rta-personalize/Component',["sap/ushell/plugins/BaseRTAPlugin","sap/m/MessageBox","sap/ui/fl/Utils","sap/ui/fl/EventHistory","sap/ui/core/Component"],function(B,M,F,E,C){"use strict";
var R=B.extend("sap.ushell.plugins.rta-personalize.Component",{
sType:'rta-personalize',
metadata:{manifest:"json"},
init:function(){var c={sComponentName:"sap.ushell.plugins.rta-personalize",layer:"USER",developerMode:false,id:"PERSONALIZE_Plugin_ActionButton",text:"PERSONALIZE_BUTTON_TEXT",icon:"sap-icon://edit",visible:false};B.prototype.init.call(this,c);this._aPersonalizableControls=[];this._aOriginalFooterVisibility=[];var a=function(b){if(this._aPersonalizableControls.indexOf(b)===-1){this._aPersonalizableControls.push(b);this._adaptButtonVisibility("PERSONALIZE_Plugin_ActionButton",this._checkUI5App());}}.bind(this);var r=function(b){var i=this._aPersonalizableControls.indexOf(b);this._aPersonalizableControls.splice(i,1);this._aOriginalFooterVisibility.splice(i,1);if(this._aPersonalizableControls.length===0){this._oObserver.disconnect();delete this._oObserver;this._adaptButtonVisibility("PERSONALIZE_Plugin_ActionButton",false);}}.bind(this);var o=function(s,b,v){if(F.checkControlId(v)){var d=this._getControlInstance(v);a(d);if(!this._oObserver){this._oObserver=new MutationObserver(function(m){this._aPersonalizableControls.forEach(function(d){if(!d.getDomRef()){r(d);}});}.bind(this));var c={attributes:true,childList:true,characterData:false,subtree:true,attributeFilter:["style","class"]};this._oObserver.observe(window.document,c);}}}.bind(this);sap.ui.getCore().getEventBus().subscribe("sap.ui","ControlForPersonalizationRendered",o,this);var e=E.getHistoryAndStop("ControlForPersonalizationRendered");e.forEach(function(b){o(b.channelId,b.eventId,b.parameters);});},
_getControlInstance:function(e){if(typeof e==="string"){var o=sap.ui.getCore().byId(e);return o||C.get(e);}else{return e;}},
_onStartHandler:function(e){var i=e.getParameter("editablePluginsCount");if(i!==undefined&&i<=0){M.information(this.i18n.getText("MSG_STARTUP_NO_OVERLAYS"),{onClose:function(){this._stopRta(true,true);}.bind(this)});}var v=this._getFLPViewPort();v.attachAfterSwitchState(function(d){if(this._oRTA){if(d.getParameter("to")==="LeftCenter"){this._oRTA.getToolbar().addStyleClass("sapUiRtaHideToolbar");this._oRTA.setMode("navigation");}}}.bind(this));v.attachAfterSwitchStateAnimationFinished(function(d){if(this._oRTA){if(d.getParameter("to")==="Center"){this._oRTA.getToolbar().removeStyleClass("sapUiRtaHideToolbar");this._oRTA.setMode("adaptation");}}}.bind(this));},
_loadPlugins:function(r){var p=new Promise(function(a,b){sap.ui.require(["sap/ui/rta/plugin/EasyAdd","sap/ui/rta/plugin/EasyRemove"],function(c,d){var P=r.getDefaultPlugins();var o=P["remove"];P["remove"]=new d({commandFactory:o.getCommandFactory()});var A=P["additionalElements"];P["additionalElements"]=new c({commandFactory:A.getCommandFactory(),analyzer:A.getAnalyzer(),dialog:A.getDialog()});P["contextMenu"].setOpenOnClick(false);r.setPlugins(P);a();});});return p;},
_onAdapt:function(e){if(e.getSource().getText()===this.i18n.getText("PERSONALIZE_BUTTON_TEXT")){var u=jQuery.sap.getUriParameters();var s=u.mParams["sap-ui-layer"]&&u.mParams["sap-ui-layer"][0];if(!s||s==="USER"){e.getSource().setText(this.i18n.getText("END_PERSONALIZE_BUTTON_TEXT"));this._adaptButtonVisibility("RTA_Plugin_ActionButton",false);this._aPersonalizableControls.forEach(function(c){if(c.setShowFooter){this._aOriginalFooterVisibility.push(c.getShowFooter());}else{this._aOriginalFooterVisibility.push(undefined);}}.bind(this));this._adaptFooterVisibility(false);var S=this._getFlpSearchButton();this._bOriginalSearchButtonVisibility=S&&S.getVisible();if(this._bOriginalSearchButtonVisibility){this._adaptButtonVisibility(S,false);}B.prototype._onAdapt.call(this,e);}else{M.information(this.i18n.getText("MSG_STARTUP_WRONG_LAYER"));}}else{this._stopRta(false,true);}},
_switchToDefaultMode:function(){sap.ui.getCore().byId("PERSONALIZE_Plugin_ActionButton").setText(this.i18n.getText("PERSONALIZE_BUTTON_TEXT"));this._adaptButtonVisibility("RTA_Plugin_ActionButton",true);this._adaptFooterVisibility(true);if(this._bOriginalSearchButtonVisibility!==undefined){this._adaptButtonVisibility(this._getFlpSearchButton(),this._bOriginalSearchButtonVisibility);delete this._bOriginalSearchButtonVisibility;}sap.m.MessageToast.show(this.i18n.getText("SAVE_SUCCESSFUL"),{duration:4000,offset:"0 -50"});B.prototype._switchToDefaultMode.call(this);},
_checkRestartRTA:function(){},
_adaptFooterVisibility:function(v){this._aPersonalizableControls.forEach(function(c,i){if(this._aOriginalFooterVisibility[i]){c.setShowFooter(v);}}.bind(this));},
_getFlpSearchButton:function(){return this.oRenderer.getRootControl().getOUnifiedShell().getHeader().getHeadEndItems()[0];},
_getFLPViewPort:function(){return sap.ui.getCore().byId("viewPortContainer");}
});
return R;},true);
sap.ui.predefine('sap/ushell/plugins/rta/Component',["sap/ushell/plugins/BaseRTAPlugin"],function(B){"use strict";
var R=B.extend("sap.ushell.plugins.rta.Component",{
sType:'rta',
metadata:{manifest:"json"},
init:function(){var c={sComponentName:"sap.ushell.plugins.rta",layer:"CUSTOMER",developerMode:false,id:"RTA_Plugin_ActionButton",text:"RTA_BUTTON_TEXT",icon:"sap-icon://wrench",visible:true};B.prototype.init.call(this,c);}
});
return R;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/search/HashChangeHandler',['sap/ushell/renderers/fiori2/search/SearchModel','sap/ushell/renderers/fiori2/search/SearchHelper'],function(S,a){"use strict";var m=sap.ushell.renderers.fiori2.search.HashChangeHandler={};jQuery.extend(m,{handle:function(h){if(!a.isLoggingEnabled()){return;}var t=this;t.sourceUrlArray=[];if(h.oldShellHash!==null){t.sourceUrlArray.push(h.oldShellHash);}if(h.oldAppSpecificRoute!==null){if(h.oldAppSpecificRoute.substring(0,2)==="&/"){t.sourceUrlArray.push(h.oldAppSpecificRoute.substring(2));}else{t.sourceUrlArray.push(h.oldAppSpecificRoute);}}t._createSearchModel().then(function(){var e={type:"ITEM_NAVIGATE",sourceUrlArray:this.sourceUrlArray,targetUrl:"#"+h.newShellHash,systemAndClient:this._getSID()};if(e.targetUrl.indexOf("=")!==-1){this.searchModel.sinaNext.logUserEvent(e);}}.bind(this));},_createSearchModel:function(){var t=this;if(t.initializedDeferred){return t.initializedDeferred;}t.searchModel=sap.ushell.renderers.fiori2.search.getModelSingleton();t.initializedDeferred=t.searchModel.initBusinessObjSearch();return t.initializedDeferred;},_getSID:function(){var s={"systemId":"","client":""};var u=window.location.href;var b=u.indexOf("sap-system=sid(");if(b!==-1){var c=u.substring(b).indexOf(")");if(c!==-1){var d=u.substring(b+15,b+c);if(d.split(".").length===2){s.systemId=d.split(".")[0];s.client=d.split(".")[1];}}}return s;}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchFacetDialogHelper',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchFacetDialogHelper');var m=sap.ushell.renderers.fiori2.search.SearchFacetDialogHelper={};jQuery.extend(m,{init:function(d){var t=this;t.POS_FACET_LIST=0;t.POS_TOOLBAR_SEARCHFIELD=0;t.POS_TOOLBAR_TOGGLEBUTTON=1;t.POS_SETTING_CONTAINER=0;t.POS_ATTRIBUTE_LIST_CONTAINER=1;t.POS_ICONTABBAR=0;t.POS_TABBAR_LIST=0;t.POS_TABBAR_CONDITION=1;t.POS_SORTING_SELECT=0;t.POS_SHOWONTOP_CHECKBOX=1;t.POS_ADVANCED_CHECKBOX=0;t.POS_ADVANCED_INPUT_LAYOUT=1;t.POS_ADVANCED_BUTTON=2;t.bResetFilterIsActive=false;var n={"decimals":2};t.oNumberFormat=sap.ui.core.format.NumberFormat.getFloatInstance(n);t.oDateFormatOptions={"pattern":"yyyy/MM/dd","UTC":false};t.oTimestampFormatOptions={"pattern":"yyyy-MM-dd HH:mm:ss.SSSSSSS","UTC":true};t.oDateFormat=sap.ui.core.format.DateFormat.getDateTimeInstance(t.oDateFormatOptions);t.dialog=d;},getFacetList:function(){var t=this;return t.dialog.oSplitContainer.getMasterPages()[0].getContent()[t.POS_FACET_LIST];},updateDetailPage:function(l,f,i){var t=this;var M=t.dialog.getModel();var s=t.dialog.getModel('searchModel');var b=l.getBindingContext().sPath;var S=M.getProperty(b);var d=M.getAttributeDataType(S);var a=this.getFacetList().indexOfAggregation("items",l);var D=t.dialog.oSplitContainer.getDetailPages()[a];var o,A,c;if(d==="string"||d==="text"){o=D.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];A=D.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_CONDITION].getContent()[0];c=D.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getContent()[t.POS_SETTING_CONTAINER];}else{o=D.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];A=D.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER];c=D.getContent()[t.POS_SETTING_CONTAINER];}var n=D.getId();t.dialog.oSplitContainer.toDetail(n,"show");t.dialog.resetIcons(M,b,t.dialog);o.setBusy(true);var p={sAttribute:S.dimension,sBindingPath:b,sAttributeLimit:1000,bInitialFilters:i};if(d==="number"){p.sAttributeLimit=20;}if(!M.chartQuery){M.chartQuery=M.sinaNext.createChartQuery({filter:M.getProperty("/uiFilter").clone(),dimension:S.dimension,top:1000});}t.applyChartQueryFilter(a);if(f){var e=M.sinaNext.createSimpleCondition({attribute:S.dimension,operator:M.sinaNext.ComparisonOperator.Bw,value:f});if(!t.bResetFilterIsActive){M.chartQuery.filter.autoInsertCondition(e);}}else{if(f===undefined&&(d==="string"||d==="text")){D.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getSubHeader().getContent()[t.POS_TOOLBAR_SEARCHFIELD].setValue('');}}M.chartQuery.filter.searchTerm=s.getSearchBoxTerm();M.facetDialogSingleCall(p).then(function(){var I=M.getProperty(D.getBindingContext().sPath).items;if(A.data('initial')){t.initiateAdvancedConditions(A,I,A.data('dataType'));}var C=c.getItems()[t.POS_SHOWONTOP_CHECKBOX];if(o.getSelectedContexts().length>0){C.setEnabled(true);}t.updateDetailPageListItemsSelected(o,A);t.dialog.updateDetailPageCharts(I,M);});},applyChartQueryFilter:function(e){var t=this;t.dialog.getModel().resetChartQueryFilterConditions();var d=t.dialog.oSplitContainer.getDetailPages();for(var i=0;i<d.length;i++){if(i===e||d[i].getContent().length===0){continue;}var l;if(!d[i].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER]){l=d[i].getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];}else{l=d[i].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];}for(var j=0;j<l.getItems().length;j++){var L=l.getItems()[j];var o=L.getBindingContext().getObject();var f=o.filterCondition;if(f.attribute||f.conditions){if(L.getSelected()&&!t.bResetFilterIsActive){t.dialog.getModel().chartQuery.filter.autoInsertCondition(f);}}}t.applyAdvancedCondition(d[i],t.getFacetList().getItems()[i].getBindingContext().getObject(),t.dialog.getModel());}},resetChartQueryFilters:function(){var t=this;t.dialog.getModel().resetChartQueryFilterConditions();var d=t.dialog.oSplitContainer.getDetailPages();for(var i=0;i<d.length;i++){if(d[i].getContent().length===0){continue;}var l;if(!d[i].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER]){l=d[i].getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];}else{l=d[i].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];}for(var j=0;j<l.getItems().length;j++){var L=l.getItems()[j];var o=L.getBindingContext().getObject();var f=o.filterCondition;if(f.attribute||f.conditions){if(L.getSelected()){L.setSelected(false);t.dialog.getModel().removeFilterCondition(f,false);}}}}},applyAdvancedCondition:function(d,f,a){var t=this;var b=t.dialog.getModel();var D,A,k,o,c,e,g,C;if(d.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER]){var l=d.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER];D=l.data('dataType');A=l.getContent();switch(D){case'timestamp':t.oDateFormat=sap.ui.core.format.DateFormat.getDateTimeInstance(t.oTimestampFormatOptions);case'date':for(k=1;k<A.length;k++){o=A[k];c=o.getContent()[t.POS_ADVANCED_CHECKBOX];var h=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT];if(c.getSelected()&&h.getDateValue()&&h.getSecondDateValue()){var i=t.oDateFormat.format(h.getDateValue());var s=t.oDateFormat.format(new Date(h.getSecondDateValue().getTime()+86400000-1));e=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:b.sinaNext.ComparisonOperator.Ge,value:(D==='timestamp')?h.getDateValue():i,valueLabel:i});g=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:b.sinaNext.ComparisonOperator.Le,value:(D==='timestamp')?h.getSecondDateValue():s,valueLabel:s});C=b.sinaNext.createComplexCondition({valueLabel:h.getValue(),operator:b.sinaNext.LogicalOperator.And,conditions:[e,g],userDefined:true});if(!t.bResetFilterIsActive){a.addFilterCondition(C,false);}}}break;case'number':for(k=1;k<A.length;k++){o=A[k];c=o.getContent()[t.POS_ADVANCED_CHECKBOX];var j=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[0];var n=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[2];var p=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[1];var q=t.oNumberFormat.parse(j.getValue());var r=t.oNumberFormat.parse(n.getValue());if(c.getSelected()&&q>=0&&r>=0){e=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:b.sinaNext.ComparisonOperator.Ge,value:q,valueLabel:t.oNumberFormat.format(q),userDefined:true});g=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:b.sinaNext.ComparisonOperator.Le,value:r,valueLabel:t.oNumberFormat.format(r),userDefined:true});C=b.sinaNext.createComplexCondition({valueLabel:t.oNumberFormat.format(q)+p.getText()+t.oNumberFormat.format(r),operator:b.sinaNext.LogicalOperator.And,conditions:[e,g],userDefined:true});if(!t.bResetFilterIsActive){a.addFilterCondition(C,false);}}}break;default:break;}}else{var u=d.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_CONDITION].getContent()[0];D=u.data('dataType');A=u.getContent();var v,w,x,F,O;switch(D){case'string':for(k=0;k<A.length-1;k++){o=A[k];v=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[0];w=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[1];x=w.getValue();switch(v.getSelectedKey()){case'eq':O=b.sinaNext.ComparisonOperator.Eq;break;case'ew':O=b.sinaNext.ComparisonOperator.Ew;break;case'bw':O=b.sinaNext.ComparisonOperator.Bw;break;case'co':O=b.sinaNext.ComparisonOperator.Co;break;default:O=b.sinaNext.ComparisonOperator.Eq;break;}if(w.getValue()){F=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:O,value:x,valueLabel:x,userDefined:true});if(!t.bResetFilterIsActive){a.addFilterCondition(F,false);}}}break;case'text':for(k=0;k<A.length-1;k++){o=A[k];v=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[0];w=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[1];x=w.getValue();switch(v.getSelectedKey()){case'co':O=b.sinaNext.ComparisonOperator.Co;break;default:O=b.sinaNext.ComparisonOperator.Eq;}if(w.getValue()){F=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:O,value:x,valueLabel:x,userDefined:true});if(!t.bResetFilterIsActive){a.addFilterCondition(F,false);}}}break;default:break;}}},initiateAdvancedConditions:function(a,I,t){var b=this;var c,C,o,d,e;for(var i=I.length;i>0;i--){var f=I[i-1];if(f.advanced){c=a.getContent();if(t==="string"||t==="text"){C=c[c.length-2];}else{C=c[c.length-1];}o=C.getContent()[b.POS_ADVANCED_CHECKBOX];o.setSelected(true);d=C.getContent()[b.POS_ADVANCED_INPUT_LAYOUT];switch(t){case'number':var g=d.getContent()[0];var h=d.getContent()[2];if(f.filterCondition.conditions){for(var j=0;j<f.filterCondition.conditions.length;j++){var k=f.filterCondition.conditions[j];if(k.operator==="Ge"){g.setValue(k.valueLabel||b.oNumberFormat.format(k.value));}if(k.operator==="Le"){h.setValue(k.valueLabel||b.oNumberFormat.format(k.value));}}}break;case'string':e=f.filterCondition.operator;if(e==="Co"){d.getContent()[0].setSelectedKey('co');}else if(e==="Ew"){d.getContent()[0].setSelectedKey('ew');}else if(e==="Bw"){d.getContent()[0].setSelectedKey('bw');}d.getContent()[1].setValue(f.filterCondition.valueLabel);break;case'text':e=f.filterCondition.operator;if(e==="Co"){d.getContent()[0].setSelectedKey('co');}d.getContent()[1].setValue(f.filterCondition.valueLabel);break;default:d.setValue(f.label);break;}b.insertNewAdvancedCondition(C,t);b.dialog.getModel().changeFilterAdvaced(f,true);}}a.data('initial',false);},updateDetailPageListItemsSelected:function(d,a){var t=this;var D=a.data('dataType');t.sortingAttributeList(d.getParent().getParent());d.setBusy(false);if(D==="date"||D==="number"){d.focus();}},removeAdvancedCondition:function(a,l,t){var b=this;var c=a.getContent();var C,I,d;if(t==="string"||t==="text"){for(var i=0;i<c.length-1;i++){C=c[i];I=C.getContent()[b.POS_ADVANCED_INPUT_LAYOUT].getContent()[1];if(I.getProperty('value')){var v=I.getValue();var L=l.getBindingContext().getObject();if(v===L.filterCondition.value){d=i;break;}}}}a.removeContent(d);},sortingAttributeList:function(d){var t=this;var s=d.getContent()[t.POS_SETTING_CONTAINER];var S=s.getItems()[t.POS_SORTING_SELECT].getItems()[0];var c=s.getItems()[t.POS_SHOWONTOP_CHECKBOX];var l=d.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];var D=l.data('dataType');var b=l.getBinding("items");var a=[];if(c.getSelected()){a.push(new sap.ui.model.Sorter("selected",true,false));}switch(S.getSelectedKey()){case"sortName":a.push(new sap.ui.model.Sorter("label",false,false));break;case"sortCount":a.push(new sap.ui.model.Sorter("value",true,false));if(D==="string"||D==="text"){a.push(new sap.ui.model.Sorter("label",false,false));}break;default:break;}b.sort(a);},insertNewAdvancedCondition:function(a,t){var A=a.getParent();var n=new sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition({type:t});if(t==="string"||t==="text"){var i=A.getAggregation("content").length-1;A.insertAggregation("content",n,i);}else{var b=A.indexOfAggregation("content",a);if(b===(A.getAggregation("content").length-1)){A.addContent(n);}}},deleteAdvancedCondition:function(a){var t=this;var A=a.getParent();var d=a.getParent().getParent().getParent().getParent().getParent();A.removeAggregation("content",a);t.updateCountInfo(d);},updateCountInfo:function(d){var t=this;var M=t.getFacetList();var o=M.getSelectedItem();if(!o){o=M.getItems()[0];}var a=o.getBindingContext().oModel;var s=o.getBindingContext().sPath;var D=a.getProperty(s).dimension;var f=t.dialog.getModel().aFilters;var c=0;for(var j=0;j<f.length;j++){if(!f[j].advanced&&f[j].facetAttribute===D){c++;}}var b=a.getAttributeDataType(a.getProperty(s));var A,e,i,C,g;var h=0;if(b==="string"||b==="text"){A=d.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_CONDITION].getContent()[0];e=A.getContent().length-1;for(i=0;i<e;i++){C=A.getContent()[i];g=C.getContent()[0];if(g.getSelected()){h++;}}}else{A=d.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER];e=A.getContent().length;for(i=1;i<e;i++){C=A.getContent()[i];g=C.getContent()[0];if(g.getSelected()){h++;}}}var F=a.getProperty(s).facetType;if(F==="attribute"){var k=c+h;a.setProperty(s+"/count",k);t.dialog.resetEnabledForFilterResetButton();}}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchFacetDialogHelperCharts',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchFacetDialogHelperCharts');var m=sap.ushell.renderers.fiori2.search.SearchFacetDialogHelperCharts={};jQuery.extend(m,{init:function(d){this.dialog=d;},getBarChartPlaceholder:function(){var t=this;var c;c=new sap.suite.ui.microchart.ComparisonMicroChart({height:"90%",width:"100%",colorPalette:"",tooltip:""});c.addStyleClass('largeChart1barchart');var b=new sap.ui.model.Filter("value",sap.ui.model.FilterOperator.GT,0);var B={path:"items",factory:function(i,C){var o=new sap.suite.ui.microchart.ComparisonMicroChartData({title:'{label}',value:'{value}',color:{path:'selected',formatter:function(v){var r=sap.m.ValueColor.Good;if(!v){r=sap.m.ValueColor.Neutral;}return r;}},displayValue:'{valueLabel}',press:function(e){t.dialog.onDetailPageSelectionChangeCharts(e);}});return o;},filters:[b]};c.bindAggregation("data",B);c.setBusyIndicatorDelay(0);return c;},testWhetherPieWedgeOrLabelIsDummy:function(E){var r=false;var l="";var p=0,a=0;try{l=JSON.stringify(E.getParameters().data[0].data).split("\"")[3];p=l.match(/\d+/g)[0];a=l.match(/\d+/g)[1];if(l===sap.ushell.resources.i18n.getText("facetPieChartOverflowText2",[p,a])){r=true;}else if(l===sap.ushell.resources.i18n.getText("facetPieChartOverflowText2",[a,p])){r=true;}}catch(e){}return r;},getPieChartPlaceholder2:function(){var t=this;var c;c=new sap.viz.ui5.controls.VizFrame({width:"100%",vizType:"info/pie",selectData:function(e){if(!t.testWhetherPieWedgeOrLabelIsDummy(e)){t.dialog.onDetailPageSelectionChangeCharts(e);}},deselectData:function(e){if(!t.testWhetherPieWedgeOrLabelIsDummy(e)){t.dialog.onDetailPageSelectionChangeCharts(e);}}});c.attachRenderComplete(function(e){var b=[];var I;var s=this.getBindingContext().getObject().items4pie;if(!s){return c;}for(var i=0;i<s.length;i++){I=s[i];if(I.selected===true){b.push({data:{Label:(I.label)}});}}var g={clearSelection:true};c.vizSelection(b,g);var h,k,l;var n,o,q,r;h=e.getSource().sId;n=$("#"+h+" .v-legend-marker").last();o=$("#"+h+" .v-legend-item").last();if(this.getBindingContext().getObject().items4pie[0].percentageMissingInBigPie>0){q=$("#"+h+" .v-legend-item").length-1;r=$("#"+h+" .v-datapoint-group").children();for(var j=0;j<r.length;j++){l=r[j];k=l.getAttribute("data-id");k=parseInt(k,10);if(k===q){l.remove();break;}}n.attr("fill-opacity","0");n.attr("stroke-opacity","1");n.attr("stroke","black");n.attr("stroke-width","0.5");o.unbind();o.off();}var u=$("#"+h+" .v-background-body");u.unbind();u.off();});c.setVizProperties({legendGroup:{linesOfWrap:0,layout:{maxWidth:0.5}},title:{visible:false},interaction:{selectability:{mode:"multiple"}}});c.addStyleClass('largeChart2piechart');var p=new sap.ui.model.Filter("pieReady",sap.ui.model.FilterOperator.EQ,true);var d=new sap.viz.ui5.data.FlattenedDataset({dimensions:[{name:'Label',value:"{label}"}],measures:[{name:'Value',value:'{valueLabel}'}],data:{path:"items4pie",filters:[p]}});var f=new sap.viz.ui5.controls.common.feeds.FeedItem({uid:"size",type:"Measure",values:["Value"]});var a=new sap.viz.ui5.controls.common.feeds.FeedItem({uid:"color",type:"Dimension",values:["Label"]});c.setDataset(d);c.addFeed(f);c.addFeed(a);return c;},getPieChartPlaceholder:function(){var t=this;var c;var p={};p.oSearchFacetDialog=t.dialog;c=new sap.ushell.renderers.fiori2.search.controls.SearchFacetPieChart(p);c.addStyleClass('largeChart2piechart');sap.ui.core.ResizeHandler.register(c,function(e){var s=0;var a=0;if(e.target.firstChild){s=parseInt(window.getComputedStyle(e.target.firstChild,null).getPropertyValue("transform-origin").split(" ")[0],10);a=(e.size.width/2)-s;e.target.firstChild.style.marginLeft=a+"px";}});return c;},getHeaderWithDropDown:function(t){var a=this;var c=a.getDropDownButton();var l=new sap.m.Label({text:t});var h=new sap.m.Bar({translucent:true,design:sap.m.BarDesign.Header,contentMiddle:[l,c]});h.addStyleClass("sapUshellSearchFacetDialogTabBarHeader");return h;},setDummyTabBarItems:function(c){c.tabBarItems=[new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetList"),icon:"sap-icon://list",key:'list'+arguments[0]}),new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetBarChart"),icon:"sap-icon://horizontal-bar-chart",key:'barChart'+arguments[0]}),new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetPieChart"),icon:"sap-icon://pie-chart",key:'pieChart'+arguments[0]})];c.chartOnDisplayIndex=0;},getDropDownButton:function(c){var b=[];var B;var d=new sap.m.Button({icon:c.tabBarItems[c.chartOnDisplayIndex].getIcon()});for(var i=0;i<c.tabBarItems.length;i++){B=new sap.m.Button({text:c.tabBarItems[i].getText(),icon:c.tabBarItems[i].getIcon(),press:function(E){var g,h;h=E.getSource().sId;g=document.getElementById(h).dataset.facetViewIndex;g=parseInt(g,10);c.chartOnDisplayIndex=g;if(c.chartOnDisplayIndex===0){$(".sapUshellSearchFacetDialogSettingsContainer").css('display','block');}else{$(".sapUshellSearchFacetDialogSettingsContainer").css('display','none');}c.chartOnDisplayIndexByFilterArray[c.facetOnDisplayIndex]=g;var j=c.tabBarItems[c.chartOnDisplayIndex].getIcon();d.setIcon(j);var e=c.tabBarItems[c.chartOnDisplayIndex].getText();var f=sap.ushell.resources.i18n.getText('displayAs',[e]);d.setTooltip(f);var k=$(".sapUshellSearchFacetDialogFacetList")[0];if(k){var F=sap.ui.getCore().byId(k.id);if(!F.getSelectedItem()){F.setSelectedItem(F.getItems()[0]);}F.fireSelectionChange({listItem:F.getSelectedItem()});}c.controlChartVisibility(c,g);}});B.data("facet-view-index",""+i,true);b.push(B);}var a=new sap.m.ActionSheet({showCancelButton:true,buttons:b,placement:sap.m.PlacementType.Bottom,cancelButtonPress:function(){jQuery.sap.log.info("sap.m.ActionSheet: cancelButton is pressed");}});d.addStyleClass("sapUshellSearchFacetDialogTabBarButton");var e=c.tabBarItems[c.chartOnDisplayIndex].getText();var f=sap.ushell.resources.i18n.getText('displayAs',[e]);d.setTooltip(f);d.attachPress(function(E){a.openBy(this);});return d;},getListContainersForDetailPage:function(){var t,b,p;var r=[];var a=0;var c=440;var s=$(".searchFacetLargeChartContainer");for(var i=0;i<s.length;i++){if(s[i].clientHeight>0){c=s[i].offsetParent.offsetParent.offsetParent.clientHeight;a=i;break;}}var d=$(".searchFacetLargeChartContainer")[a];if(d){var l=sap.ui.getCore().byId(d.id);var S,I,P;I=$('.sapUshellSearchFacetDialogSubheaderToolbar .sapMSF');S=$('.sapUshellSearchFacetDialogSortButton');P=d.firstChild.children;for(var j=0;j<P.length;j++){if(P[j].className){if(P[j].className.match(/sapMList/)){t=P[j];}else if(P[j].className.match(/barchart/)){b=P[j];}else if(P[j].className.match(/piechart/)){p=P[j];}}}r.push(d);r.push(l);r.push(c);r.push(t);r.push(b);r.push(p);r.push(S);r.push(I);}return r;}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchFacetsFormatter',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchFacetsFormatter');var a=sap.ushell.renderers.fiori2.search.SearchFacetsFormatter=function(){this.init.apply(this,arguments);};jQuery.sap.declare('sap.ushell.renderers.fiori2.search.Facet');var F=sap.ushell.renderers.fiori2.search.Facet=function(){this.init.apply(this,arguments);};jQuery.sap.declare('sap.ushell.renderers.fiori2.search.FacetItem');var b=sap.ushell.renderers.fiori2.search.FacetItem=function(){this.init.apply(this,arguments);};F.prototype={init:function(p){this.title=p.title;this.facetType=p.facetType;this.dimension=p.dimension;this.dataType=p.dataType;this.matchingStrategy=p.matchingStrategy;this.items=p.items||[];this.totalCount=p.totalCount;},hasFilterCondition:function(f){for(var i=0,l=this.items.length;i<l;i++){var c=this.items[i].filterCondition||this.items[i];if(c.equals&&c.equals(f)){return true;}}return false;},hasFilterConditions:function(){for(var i=0,l=this.items.length;i<l;i++){if(this.items[i].filterCondition){return true;}}return false;},removeItem:function(f){for(var i=0,l=this.items.length;i<l;i++){var c=this.items[i].filterCondition||this.items[i];if(c.equals&&f.filterCondition&&c.equals(f.filterCondition)){return this.items.splice(i,1);}}}};b.prototype={init:function(p){p=p||{};this.selected=p.selected||false;this.level=p.level||0;this.filterCondition=p.filterCondition;this.value=p.value||"";this.label=p.label||"";this.facetTitle=p.facetTitle||"";this.facetAttribute=p.facetAttribute||"";this.valueLabel=this.value;this.advanced=p.advanced||false;this.listed=p.listed||false;},equals:function(o){return(this.facetTitle===o.facetTitle&&this.label===o.label&&this.value===o.value&&this.filterCondition.equals(o.filterCondition));},clone:function(){var n=new sap.ushell.renderers.fiori2.search.FacetItem();n.facetTitle=this.facetTitle;n.selected=this.selected;n.label=this.label;n.level=this.level;n.value=this.value;n.valueLabel=this.valueLabel;n.filterCondition=this.filterCondition.clone();return n;}};a.prototype={init:function(m){this.model=m;},_getAncestorDataSources:function(s){var r=[];var A=s.dataSourceTree.findNode(s.getProperty("/uiFilter/dataSource")).getAncestors().reverse();for(var i=0;i<A.length;i++){var d=A[i].dataSource;var c=new b({label:d.labelPlural,filterCondition:d,level:0,value:A[i].count});r.push(c);}return r;},_getSiblingDataSources:function(s,l){var S=[];var c=s.getProperty("/uiFilter/dataSource");var d=s.dataSourceTree.findNode(c);var e;if(d.parent&&!d.unsureWhetherNodeisBelowRoot){e=d.parent.getChildren();}else{e=[];}if(e.length===0){e.push(d);}for(var j=0,f=e.length;j<f;j++){var g=e[j].dataSource;var h=new b({label:g.labelPlural,value:e[j].count,filterCondition:g,selected:c===g,level:l});S.push(h);if(h.selected){S.push.apply(S,this._getChildrenDataSources(s,l+1));}}return S;},_getChildrenDataSources:function(s,l){var c=[];var d=s.getProperty("/uiFilter/dataSource");var C=s.dataSourceTree.findNode(d).getChildren();for(var j=0,e=C.length;j<e;j++){var f=C[j].dataSource;var g=new b({label:f.labelPlural,value:C[j].count,filterCondition:f,selected:false,level:l});c.push(g);}return c;},getDataSourceFacetFromTree:function(s){var d=new F({facetType:"datasource",title:"Search In"});var c=s.getProperty("/uiFilter/dataSource");var A=this._getAncestorDataSources(s);d.items.push.apply(d.items,A);var S=this._getSiblingDataSources(s,s.allDataSource===c?0:1);d.items.push.apply(d.items,S);return d;},_createFacetItemsFromConditionGroup:function(r){var f=[];for(var i=0;i<r.conditions.length;i++){var c=r.conditions[i];for(var j=0;j<c.conditions.length;j++){var d=c.conditions[j];if(d.type===this.model.sinaNext.ConditionType.Simple){f.push(new b({facetAttribute:d.attribute,label:this._formatLabel(d.valueLabel,d.operator),filterCondition:d,selected:true}));}else{f.push(new b({facetAttribute:d.conditions[0].attribute,label:d.valueLabel,filterCondition:d,selected:true}));}}}return f;},_formatLabel:function(l,o){var c;switch(o){case'Bw':c=l+'*';break;case'Ew':c='*'+l;break;case'Co':c='*'+l+'*';break;default:c=l;break;}return c;},getAttributeFacetsFromPerspective:function(r,s){var S=r.facets.filter(function(D){return D.type===s.sinaNext.FacetType.Chart;});var c=[];var C={};for(var i=0,l=S.length;i<l;i++){var o=S[i];var d=new F({title:o.title,facetType:'attribute',dimension:o.query.dimension,totalCount:r.totalCount});if(o.items.length===0){continue;}for(var j=0;j<o.items.length;j++){var f=o.items[j];var e=new b({facetAttribute:o.query.dimension,label:f.dimensionValueFormatted,value:f.measureValue,filterCondition:f.filterCondition});e.facetTitle=o.title;e.serverSideItem=true;d.items.push(e);}C[o.query.dimension]=d;c.push(d);}var g={};var h=this._createFacetItemsFromConditionGroup(s.getProperty("/uiFilter/rootCondition"));for(var k=0,p=h.length;k<p;k++){var q=h[k];var t=C[q.facetAttribute];if(!t){var u=q.filterCondition.attribute?q.filterCondition.attribute:q.filterCondition.conditions[0].attribute;t=new F({dimension:u,title:r.query.filter.dataSource.getAttributeMetadata(u).label,facetType:"attribute",items:[q]});C[q.facetAttribute]=t;c.splice(0,0,t);}else{var v=c.indexOf(t);if(v>0){c.splice(v,1);c.splice(0,0,t);}var w=false;for(var m=0,x=t.items.length;m<x;m++){var y=t.items[m];if(q.filterCondition.equals(y.filterCondition)){y.selected=true;w=true;if(!s.config.multiSelect){y.value=null;y.valueLabel=null;}}}if(!w){t.items.push(q);}}g[q.facetAttribute]=t;}if(!s.config.multiSelect){for(var z in g){if(g.hasOwnProperty(z)){var A=g[z];for(var n=A.items.length-1;n>=0;n--){var B=A.items[n];if(!B.selected){A.items.splice(n,1);}}}}}return this.addDataTypeToClientSideFacets(c,s);},addDataTypeToClientSideFacets:function(c,s){var d=s.getDataSource();if(d.type===s.sinaNext.DataSourceType.Category){return $.when([]);}for(var i=0;i<c.length;i++){var f=c[i];var m=d.getAttributeMetadata(f.dimension);f.dataType=m.type;}return $.when(c);},getFacets:function(d,i,s){var f=[this.getDataSourceFacetFromTree(s)];if(d===s.appDataSource||d.type===s.sinaNext.DataSourceType.Category){return $.when(f);}if(!i){return $.when(f);}var c=this.getAttributeFacetsFromPerspective(i,s);var r=c.then(function(A){if(A.length>0){f.push.apply(f,A);}return f;});return r;},getFacetItemsWithFilterConditions:function(s){return this._createFacetItemsFromConditionGroup(s.getProperty("/uiFilter/rootCondition"));},getDialogFacetsFromMetaData:function(m,s){var S=jQuery.map(m.attributeMetadataMap,function(h){return h;});var c=[];for(var i=0,l=S.length;i<l;i++){var o=S[i];if(o.usage.AdvancedSearch){var C=new F({title:o.label,facetType:"attribute",dimension:o.id,dataType:o.type,matchingStrategy:o.matchingStrategy});var f=this._createFacetItemsFromConditionGroup(s.getProperty("/uiFilter/rootCondition"));var d=0;for(var k=0,e=f.length;k<e;k++){var g=f[k];if(g.facetAttribute===C.dimension){d++;C.items.splice(0,0,g);}}C.count=d;c.push(C);}}return c;},getDialogFacetsFromChartQuery:function(r,s,i){var c=new F({dimension:s.chartQuery.dimension});if(r){for(var j=0;j<r.items.length;j++){var f=r.items[j];var d=new b({value:f.measureValue,filterCondition:f.filterCondition,label:f.dimensionValueFormatted,facetAttribute:r.query.dimension});c.items.push(d);}var e;if(i){e=this._createFacetItemsFromConditionGroup(s.getProperty("/uiFilter/rootCondition"));}else{e=s.aFilters;}for(var k=0,l=e.length;k<l;k++){var S=e[k];if(S.facetAttribute===c.dimension){var g=false;for(var m=0,h=c.items.length;m<h;m++){var n=c.items[m];if(S.filterCondition.equals(n.filterCondition)){n.selected=true;g=true;}}if(!g){c.items.splice(c.items.length,0,S);if(S.filterCondition.userDefined){S.advanced=true;}else{S.listed=true;}}else{S.listed=true;}}}}return c;}};return a;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchHelper',['sap/ushell/utils/WindowUtils','sap/m/MessageBox','sap/ui/core/format/NumberFormat','sap/ui/core/format/FileSizeFormat','jquery.sap.storage'],function(W){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchHelper');var m=sap.ushell.renderers.fiori2.search.SearchHelper={};
m.Tester=function(){this.init.apply(this,arguments);};
m.Tester.prototype={init:function(s,h,a,d){this.alphaNumeric='[a-zA-Z0-9]';this.nonAlphaNumeric='[^a-zA-Z0-9]';this.PL='(?:[\0-@\[-`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u0560\u0588-\u05CF\u05EB-\u05EF\u05F3-\u061F\u064B-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07C9\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u089F\u08B5\u08BE-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09EF\u09F2-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B70\u0B72-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B-\u0C5F\u0C62-\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDD\u0CDF\u0CE2-\u0CF0\u0CF3-\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57-\u0D5E\u0D62-\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0EDB\u0EE0-\u0EFF\u0F01-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u1040-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16F0\u16F9-\u16FF\u170D\u1712-\u171F\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u181F\u1878-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u194F\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19FF\u1A17-\u1A1F\u1A55-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4C-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BFF\u1C24-\u1C4C\u1C50-\u1C59\u1C7E\u1C7F\u1C89-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u2182\u2185-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u3004\u3007-\u3030\u3036-\u303A\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u312E-\u3130\u318F-\u319F\u31BB-\u31EF\u3200-\u33FF\u4DB6-\u4DFF\u9FD6-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA620-\uA629\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6E6-\uA716\uA720\uA721\uA789\uA78A\uA7AF\uA7B8-\uA7F6\uA802\uA806\uA80B\uA823-\uA83F\uA874-\uA881\uA8B4-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FE-\uA909\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9D0-\uA9DF\uA9E5\uA9F0-\uA9F9\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB66-\uAB6F\uABE3-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEFF\uDF20-\uDF2F\uDF41\uDF4A-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0-\uDFFF]|\uD801[\uDC9E-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE01-\uDE0F\uDE14\uDE18\uDE34-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE5-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC82\uDCB0-\uDCCF\uDCE9-\uDD02\uDD27-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDD9\uDDDB\uDDDD-\uDDFF\uDE12\uDE2C-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE7F\uDEAB-\uDEFF\uDF1A-\uDFFF]|\uD806[\uDC00-\uDC9F\uDCE0-\uDCFE\uDD00-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC71\uDC90-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC00-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD823-\uD82B\uD82D\uD82E\uD830-\uD834\uD836-\uD839\uD83C-\uD83F\uD874-\uD87D\uD87F-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDEFF\uDF45-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE1-\uDFFF]|\uD821[\uDFED-\uDFFF]|\uD822[\uDEF3-\uDFFF]|\uD82C[\uDC02-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC-\uDFFF]|\uD83A[\uDCC5-\uDCFF\uDD44-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD869[\uDED7-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])';this.nonepL='(?:[^A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D])';this.pL='(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D])';s=s||"*";if(this.onlyAsteriskRegExp.test(s)){this.onlyAsterisk=true;}s=s.replace(/([.^=!:${}()|\+\-\[\]\/\\])/g,"\\$1");this.aSearchTerms=this.tokenizeSearchTerms(s);for(var j=0;j<this.aSearchTerms.length;++j){var b=this.aSearchTerms[j];b=b.replace(/\?/g,".");b=b.replace(/\*/g,".*?");var i=b.match(/[\u3400-\u9faf]/)!==null?true:false;if(i||a){b=new RegExp(b,'gi');}else{if(b.substr(-3)==='.*?'){b=b.substr(0,b.length-3)+this.pL+'*';}b=new RegExp('('+this.nonepL+'|^|\\s)('+b+')()','gi');}this.aSearchTerms[j]=b;}this.highlightStyle=h;if(!d){d='and';}this.bDisjunctionType=d;},onlyAsteriskRegExp:new RegExp('^[\\s*]*$'),test:function(t){var r={bMatch:false,sHighlightedText:''};if(!t){return r;}this.initializeBoldArray(t);this.globalBold=false;var R;var M;for(var j=0;j<this.aSearchTerms.length;++j){R=this.aSearchTerms[j];var l=-1;var L=false;while((M=R.exec(t))!==null){L=true;if(R.lastIndex===l){break;}l=R.lastIndex;var s=this.calStartIndex(t,M.index);if(s<0){continue;}l=this.calLastIndex(t,s,R.lastIndex);this.markBoldArray(s,l);}switch(this.bDisjunctionType){case'or':if(L){r.bMatch=true;}break;case'and':default:if(!L){return r;}break;}}r.bMatch=true;if(this.onlyAsterisk){r.sHighlightedText=t;}else{r.sHighlightedText=this.render(t);}return r;},calStartIndex:function(t,s){t=t.substring(s);var r=new RegExp(this.pL);var a=r.exec(t);if(!a){return s;}return a.index+s;},calLastIndex:function(t,s,l){t=t.substring(l,l);var r=new RegExp(this.nonepL);var a=r.exec(t);if(!a){return l;}return l-1;},tokenizeSearchTerms:function(t){var a=t.split(" ");var n=[];$.each(a,function(i,b){b=$.trim(b);if(b.length>0&&b!=='.*'){n.push(b);}});return n;},initializeBoldArray:function(t){this.bold=new Array(t.length);for(var i=0;i<this.bold.length;++i){this.bold[i]=false;}},markBoldArray:function(n,a){for(var i=n;i<a;i++){this.bold[i]=true;this.globalBold=true;}},render:function(o){if(!this.globalBold){return o;}var b=false;var r=[];var s=0;var i;for(i=0;i<o.length;++i){if((!b&&this.bold[i])||(b&&!this.bold[i])){r.push(o.substring(s,i));if(b){r.push("</b>");}else{if(this.highlightStyle){r.push('<b class="'+this.highlightStyle+'">');}else{r.push("<b>");}}b=!b;s=i;}}r.push(o.substring(s,i));if(b){r.push("</b>");}return r.join("");}};
m.delayedExecution=function(o,d){var t=null;var a=function(){var b=arguments;var c=this;if(t){window.clearTimeout(t);}t=window.setTimeout(function(){t=null;o.apply(c,b);},d);};a.abort=function(){if(t){window.clearTimeout(t);}};return a;};
m.refuseOutdatedRequests=function(o,r){var l=0;var d=function(){var a=arguments;var t=this;var b=++l;var c=new jQuery.Deferred();o.apply(t,a).done(function(){if(b!==l){return;}c.resolve.apply(c,arguments);}).fail(function(){if(b!==l){return;}c.reject.apply(c,arguments);});return c;};d.abort=function(){++l;};if(r){m.outdatedRequestAdministration.registerDecorator(r,d);}return d;};
m.abortRequests=function(r){var d=m.outdatedRequestAdministration.getDecorators(r);for(var i=0;i<d.length;++i){var a=d[i];a.abort();}};
m.outdatedRequestAdministration={decoratorMap:{},registerDecorator:function(r,d){var a=this.decoratorMap[r];if(!a){a=[];this.decoratorMap[r]=a;}a.push(d);},getDecorators:function(r){var d=this.decoratorMap[r];if(!d){d=[];}return d;}};
m.boldTagUnescaper=function(d,h){var i=d.innerHTML;var b='';var a='';if(h){b='&lt;b class="'+h+'"&gt;';a='<b class="'+h+'">';}else{b='&lt;b&gt;';a='<b>';}var c='&lt;/b&gt;';var e='</b>';while(i.indexOf(b)+i.indexOf(c)>=-1){i=i.replace(b,a);i=i.replace(c,e);}while(i.indexOf('&lt;i&gt;')+i.indexOf('&lt;/i&gt;')>=-1){i=i.replace('&lt;i&gt;','<i>');i=i.replace('&lt;/i&gt;','</i>');}while(i.indexOf('&lt;span&gt;')+i.indexOf('&lt;/span&gt;')>=-1){i=i.replace('&lt;span&gt;','<span>');i=i.replace('&lt;/span&gt;','</span>');}d.innerHTML=i;};
m.boldTagUnescaperByText=function(d){var a=$(d);var s=a.text().replace(/<b>/gi,'').replace(/<\/b>/gi,'');if(s.indexOf('<')===-1){a.html(a.text());}};
m.forwardEllipsis4Whyfound=function(d){var a=$(d);var w=d.offsetWidth;var o=d.offsetLeft;var b=d.scrollWidth;if(b>w){a.find("b").each(function(){var p=this.offsetLeft-o;var c=this.offsetWidth;var t;if(p+c>w){var i=d.innerHTML.indexOf(this.outerHTML);if(c>w){if(d.innerHTML.substring(0,i).trim().length>0){t="... "+d.innerHTML.substring(i);a.html(t);}}else{var l;var e=d.innerHTML.substring(0,i).trim();t=d.innerHTML.substring(i).trim();var f=[];while(e.length>0){l=e.match(/\S+$/);if(l.length==0){break;}f.push(t);t=l[0]+" "+t;d.innerHTML="... "+t;if(d.scrollWidth<w){e=e.substring(0,e.length-l[0].length).trim();}else{while(d.scrollWidth>w&&f.length>0){var g=f.pop();d.innerHTML="... "+g;}break;}}}}return false;});}};
m.getHashFromUrl=function(){return window.location.href.substring(window.location.href.indexOf("#"))||"#";};
m.getUrlParameter=function(n){if(typeof window!=="undefined"){var s=window.location.href;var v=(new RegExp(n+'='+'(.+?)(&|$|#)','i').exec(s)||[null])[1];if(!v){return v;}v=decodeURIComponent(v.replace(/\+/g,' '));return v;}return"";};
m.getUrlParameters=function(){var u;if(sap&&sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("URLParsing")){var U=sap.ushell.Container.getService("URLParsing");var a=U.splitHash(m.getHashFromUrl()).appSpecificRoute;u=a.substring(2);}else{u=m.getHashFromUrl();}var b=m.parseUrlParameters(u);return b;};
m.parseUrlParameters=function(u){var p={};var k=[{"name":"filter","pos":-1,"value":""},{"name":"top","pos":-1,"value":""},{"name":"datasource","pos":-1,"value":""},{"name":"searchterm","pos":-1,"value":""}];for(var i=0;i<k.length;i++){k[i].pos=u.toLowerCase().indexOf(k[i].name+"=");}k.sort(function(a,b){return a.pos-b.pos;});for(var j=0;j<k.length;j++){if(k[j].pos!==-1){if(k[j+1]&&k[j+1].pos!==-1){k[j].value=u.substring(k[j].pos,k[j+1].pos);}else{k[j].value=u.substring(k[j].pos);}k[j].value=k[j].value.substring(k[j].name.length+1);if(k[j].value.charAt(k[j].value.length-1)==="&"){k[j].value=k[j].value.substring(0,k[j].value.length-1);}k[j].value=decodeURIComponent(k[j].value);p[k[j].name]=k[j].value;}}return p;};
m.isSearchAppActive=function(){if(m.getHashFromUrl().substr(1,13)==='Action-search'){return true;}else{return false;}};
m.hasher={hash:null,setHash:function(h){if(decodeURIComponent(m.getHashFromUrl())!==decodeURIComponent(h)){try{window.location.hash=h;}catch(e){this.showUrlUpdateError(e);}}this.hash=h;},reset:function(){this.hash=null;},hasChanged:function(){if(decodeURIComponent(this.hash)!==decodeURIComponent(m.getHashFromUrl())){return true;}return false;},showUrlUpdateError:function(e){if(this.urlError){return;}this.urlError=true;var a=sap.ushell.resources.i18n.getText('searchUrlErrorMessage',e.toString());sap.m.MessageBox.alert(a,{title:sap.ushell.resources.i18n.getText('searchUrlErrorTitle'),icon:sap.m.MessageBox.Icon.ERROR});}};
m.loadResultViewType=function(){if(jQuery.sap.storage&&jQuery.sap.storage.isSupported()){var r=jQuery.sap.storage.get("resultViewType");if(!r||r!=="searchResultTable"){return"searchResultList";}else{return"searchResultTable";}}else{return"searchResultList";}};
m.saveResultViewType=function(r){if(jQuery.sap.storage.isSupported()){jQuery.sap.storage.put("resultViewType",r);}};
m.idMap={};
m.subscribeOnlyOnce=function(i,e,c,s){if(m.idMap[i]){m.idMap[i].unsubscribe();}var w=function(){c.apply(s);sap.ui.getCore().getEventBus().unsubscribe(e,w,s);};sap.ui.getCore().getEventBus().subscribe(e,w,s);m.idMap[i]={unsubscribe:function(){sap.ui.getCore().getEventBus().unsubscribe(e,w,s);}};};
m._isDisplayed=function(e){if(e&&e.nodeType){if(jQuery(e).is(':visible')){return true;}}if(e&&e.getMetadata()&&e.getMetadata().getName()){if(e.getDomRef&&e.getDomRef()){return true;}}return false;};
m.SearchFocusHandler=function(){this.init.apply(this,arguments);};
m.SearchFocusHandler.prototype={init:function(s){this.oSearchView=s;},get2BeFocusedControlDomRef:function(){if(!this.oModel){this.oModel=this.oSearchView.getModel();}var i=0;var c=null;var a=null;var b=false;var d=false;var e=false;if(this.oModel.getDataSource()!==this.oModel.appDataSource){if(this.oModel.getProperty('/boCount')>0&&this.oModel.getProperty('/appCount')>0){i=this.oModel.getProperty('/focusIndex');i=(i>0)?i+1:i;c=this.oSearchView.resultList.getItems()[i];if(c&&c.getDomRef){a=c.getDomRef();}}else if(this.oModel.getProperty('/boCount')>0&&this.oModel.getProperty('/appCount')===0){i=this.oModel.getProperty('/focusIndex');b=this.oModel.getResultToDisplay()==="searchResultList";d=this.oModel.getResultToDisplay()==="searchResultTable";e=this.oModel.getResultToDisplay()==="searchResultMap";if(b){c=this.oSearchView.resultList.getItems()[i];}else if(d){c=this.oSearchView.searchResultTable.getItems()[i];}else if(e){c=this.oSearchView.searchResultMap;}if(c&&c.getDomRef){a=c.getDomRef();}}else if(this.oModel.getProperty('/boCount')===0&&this.oModel.getProperty('/appCount')>0){c=this.oSearchView.resultList.getItems()[0];if(m._isDisplayed(c)){a=m.getFocusableTileDomRef($(c.getDomRef()));}}}else{var t=this.oSearchView.appSearchResult;if(t.getDomRef()===null){return null;}i=this.oModel.getProperty('/focusIndex');var f=jQuery(t.getDomRef()).find('.sapUshellSearchTileWrapper')[i];if(m._isDisplayed(f)){a=m.getFocusableTileDomRef(f);}}return a;},setFocus:function(){var t=this;var r=20;var d=function(){t.focusSetter=null;var c=t.get2BeFocusedControlDomRef();if(r===20){c=null;}if(!sap.ui.getCore().byId('Fiori2LoadingDialog')){if(!c||jQuery('.sapMBusyDialog').length>0){if(--r){t.focusSetter=setTimeout(d,100);}return;}}else{if(!c||sap.ui.getCore().getUIDirty()||sap.ui.getCore().byId('Fiori2LoadingDialog').isOpen()||jQuery('.sapUshellSearchTileContainerDirty').length>0||jQuery('.sapMBusyDialog').length>0){if(--r){t.focusSetter=setTimeout(d,100);}return;}}c.focus();if(t.oModel.getProperty('/focusIndex')===0){var a=sap.ui.getCore().byId(c.getAttribute('id'));if(a&&a.getContent&&a.getContent()[0]){var b=a.getContent()[0];if(b.showDetails){b.showDetails();}}}t.oSearchView.resultList.collectListItemsForNavigation();};if(this.focusSetter){clearTimeout(this.focusSetter);this.focusSetter=null;}d();}};
m.getFocusableTileDomRef=function(t){return jQuery(t).find('[tabindex], button')[0];};
m.formatInteger=function(v){if(!m._integerShortFormatter){m._integerShortFormatter=sap.ui.core.format.NumberFormat.getIntegerInstance({style:'short',precision:3,groupingEnabled:true},sap.ui.getCore().getConfiguration().getLocale());}if(!m._integerStandardFormatter){m._integerStandardFormatter=sap.ui.core.format.NumberFormat.getIntegerInstance({style:'standard',precision:3,groupingEnabled:true},sap.ui.getCore().getConfiguration().getLocale());}if(Math.abs(v)>=99950){return m._integerShortFormatter.format(v);}else{return m._integerStandardFormatter.format(v);}};
m.formatFileSize=function(v){if(!m._fileSizeFormatter){m._fileSizeFormatter=sap.ui.core.format.FileSizeFormat.getInstance({style:'short',precision:3,groupingEnabled:true,binaryFilesize:true},sap.ui.getCore().getConfiguration().getLocale());}return m._fileSizeFormatter.format(v);};
m.getUrlParameterByUi2Service=function(p){var P=sap.ui2.srvc.getParameterMap();var v=P[p];return v;};
m.attachEventHandlersForTooltip=function(e){var a=$(e);a.find('.sapUshellSearchResultListItem-MightOverflow').on('mouseenter',function(){var b=$(this);var t=b.text();var c=b.attr('title');var d;var f=b.attr("data-tooltippedby");if(f){var g=a.find("#"+f);d=g.text();}if(!b.attr('title')&&(this.offsetWidth<this.scrollWidth||this.offsetHeight<this.scrollHeight)||d&&t!==d){if(!d){d=b.text();}b.attr("title",d);}else if(c===b.text()){b.removeAttr('title');}}).on('mouseout',function(){var b=$(this);var t;var c=b.attr("data-tooltippedby");if(c){var d=a.find("#"+c);t=d.text();}if(!t){t=b.text();}var f=b.attr('title');if(f===t){b.removeAttr('title');}});};
m.convertPromiseTojQueryDeferred=function(p){var d=new jQuery.Deferred();p.then(function(){d.resolve.apply(d,arguments);},function(){d.reject.apply(d,arguments);});return d;};
m.isLoggingEnabled=function(){if(this.isLoggingEnabledFlag!==undefined){return this.isLoggingEnabledFlag;}this.isLoggingEnabledFlag=true;try{var p=this.getUrlParameter("searchLogging");if(p==="false"){this.isLoggingEnabledFlag=false;}if(p===undefined){if(window['sap-ushell-config']!==undefined){var c=window['sap-ushell-config'].renderers.fiori2.componentData.config;if(c!==undefined){if(c.enableSearchLogging===false){this.isLoggingEnabledFlag=false;}}}}}catch(e){}return this.isLoggingEnabledFlag;};
m.openURL=function(U,t){if(W&&W.openURL){return W.openURL(U,t);}return window.open(U,t,'noopener,noreferrer');};
return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchNavigationObjectForSinaNavTarget',['sap/ushell/renderers/fiori2/search/SearchNavigationObject'],function(S){"use strict";return S.extend("sap.ushell.renderers.fiori2.search.SearchNavigationObjectForSinaNavTarget",{constructor:function(s){S.prototype.constructor.apply(this,arguments);this._sinaNavigationTarget=s;this.setHref(s.targetUrl);this.setText(s.label);this.setTarget(s.target);this.sina=this._sinaNavigationTarget.sina;},performNavigation:function(p){this.trackNavigation();this._sinaNavigationTarget.performNavigation(p);},getResultSet:function(){return this.getResultSetItem().parent;},getResultSetItem:function(){var p=this._sinaNavigationTarget.parent;if(p instanceof this.sina.SearchResultSetItemAttribute){p=p.parent;}if(!(p instanceof this.sina.SearchResultSetItem)){throw'programm error';}if(p.parent instanceof this.sina.ObjectSuggestion){p=p.parent;}return p;},getResultSetId:function(){return this.getResultSet().id;},getPositionInList:function(){var r=this.getResultSet();var a=this.getResultSetItem();return r.items.indexOf(a);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchResultListFormatter',['sap/ushell/renderers/fiori2/search/SearchConfiguration','sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/SearchNavigationObject','sap/ushell/renderers/fiori2/search/SearchNavigationObjectForSinaNavTarget','sap/ushell/renderers/fiori2/search/sinaNext/sina/sinaFactory','sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeDescriptionTextArrangement','sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeType'],function(S,a,b,c,s,A,d){"use strict";var m=sap.ushell.renderers.fiori2.search.SearchResultListFormatter=function(){this.init.apply(this,arguments);};m.prototype={init:function(){},format:function(e,t,o){o=o||{};o.suppressHighlightedValues=o.suppressHighlightedValues||false;var l={};var f=[];var r=e.items;var i,z;for(i=0;i<r.length;i++){var g=r[i];var h={};var I=[];for(z=0;z<g.detailAttributes.length;z++){var k=g.detailAttributes[z];switch(k.metadata.type){case d.ImageUrl:h.imageUrl=k.value;h.imageFormat=k.metadata.format?k.metadata.format.toLowerCase():undefined;if(k.defaultNavigationTarget){h.imageNavigation=new c(k.defaultNavigationTarget);}break;case d.GeoJson:h.geoJson={value:k.value,label:g.title};break;case d.Group:var n=this._formatAttributeGroup(k,o,z);I.push(n);break;case d.Double:case d.Integer:case d.String:case d.Longtext:case d.Date:case d.Time:case d.Timestamp:var p=this._formatSingleAttribute(k,o,z);I.push(p);break;}}h.key=g.key;h.keystatus=g.keystatus;h.dataSource=g.dataSource;h.dataSourceName=g.dataSource.label;if(g.titleAttributes){var q,u,v;var w=[];for(z=0;z<g.titleAttributes.length;z++){q=g.titleAttributes[z];if(q.metadata.type==d.Group){u=this._formatAttributeGroup(q,o,z);}else{u=this._formatSingleAttribute(q,o,z,false);}v=u.value;w.push(v);}h.title=w.join(' ');}else{h.title=o.suppressHighlightedValues?g.title:g.titleHighlighted;}h.titleDescription=g.titleDescription?g.titleDescription:"";h.itemattributes=I;if(g.defaultNavigationTarget){h.titleNavigation=new c(g.defaultNavigationTarget);if(!h.title||h.title.length==0){h.title=g.defaultNavigationTarget.label;}}if(g.navigationTargets&&g.navigationTargets.length>0){h.navigationObjects=[];for(var j=0;j<g.navigationTargets.length;j++){var x=new c(g.navigationTargets[j]);x.setLoggingType('RESULT_LIST_ITEM_NAVIGATE_CONTEXT');h.navigationObjects.push(x);}}var y=l[g.dataSource.id]||{};l[g.dataSource.id]=y;h.layoutCache=y;h.selected=h.selected||false;h.expanded=h.expanded||false;var B={};this._formatResultForDocuments(g,B);this._formatResultForNotes(g,B);h.additionalParameters=B;h.positionInList=i;h.resultSetId=e.id;f.push(h);}return f;},_formatAttributeGroup:function(e,o,i){var f={};var g={};f.name=e.label;var h=false;var j=false;for(var k in e.attributes){var _=e.attributes[k];var l=this._formatSingleAttribute(_,o,i);g[_.nameInGroup]=l;h=h||l.whyfound;j=j||l.longtext!==undefined;}f.value=this._formatBasedOnGroupTemplate(e.template,g,"value");f.valueRaw=this._formatBasedOnGroupTemplate(e.template,g,"valueRaw");f.valueWithoutWhyfound=this._formatBasedOnGroupTemplate(e.template,g,"valueWithoutWhyfound");f.key=e.id;f.isTitle=false;f.isSortable=e.metadata.isSortable;f.attributeIndex=i;f.displayOrder=e.metadata.usage.Detail&&e.metadata.usage.Detail.displayOrder;f.whyfound=h;if(j){f.longtext=f.value;}return f;},_formatSingleAttribute:function(e,o,i,u){var I={};I.name=e.label;I.valueRaw=e.value;I.value=o.suppressHighlightedValues?e.valueFormatted:e.valueHighlighted;I.valueWithoutWhyfound=e.valueFormatted;if(e.unitOfMeasure){if(o.suppressHighlightedValues||!e.unitOfMeasure.valueHighlighted){I.value+=" "+e.unitOfMeasure.valueFormatted;}else{I.value+=" "+e.unitOfMeasure.valueHighlighted;}I.valueWithoutWhyfound+=" "+e.unitOfMeasure.valueFormatted;}if(e.description){if(u===undefined){u=!(e.metadata.isFirstName||e.metadata.isLastName||e.description.metadata.isFirstName||e.description.metadata.isLastName);}var f=(o.suppressHighlightedValues||!e.description.valueHighlighted)?e.description.valueFormatted:e.description.valueHighlighted;var t=e.metadata.descriptionTextArrangement;if(t==A.TextOnly&&f==e.description.valueFormatted&&I.value!=e.valueFormatted){t=A.TextFirst;}I.value=this._concatenateAttrValueAndDescriptionAccordingToArrangement(I.value,f,t,u);I.valueWithoutWhyfound=this._concatenateAttrValueAndDescriptionAccordingToArrangement(I.valueWithoutWhyfound,e.description.valueFormatted,t,u);}I.key=e.id;I.isTitle=false;I.isSortable=e.metadata.isSortable;I.attributeIndex=i;I.displayOrder=e.metadata.usage.Detail&&e.metadata.usage.Detail.displayOrder;I.whyfound=e.isHighlighted;if(e.defaultNavigationTarget){I.defaultNavigationTarget=new c(e.defaultNavigationTarget);}if(e.metadata.type===d.Longtext){I.longtext=e.value;}if(e.metadata.format&&e.metadata.format===d.Multilinetext){I.longtext=e.value;}return I;},_formatBasedOnGroupTemplate:function(t,e,v){if(!(t&&e&&v)){return"";}var f="",p=0;var g,r=/{\w+}/gi;while((g=r.exec(t))!==null){f+=t.substring(p,g.index);var h=g[0].slice(1,-1);f+=e[h]&&e[h][v]||"";p=r.lastIndex;}f+=t.substring(p);return f;},_concatenateAttrValueAndDescriptionAccordingToArrangement:function(e,f,g,u){if(e.trim().length==0&&f.trim().length==0){return"";}u=u!=undefined?u:true;switch(g){case A.TextOnly:return f;case A.TextSeparate:return e+" "+f;case A.TextFirst:if(e.trim().length==0){return f;}if(u){e="("+e+")";}return f+" "+e;case A.TextLast:default:if(f.trim().length==0){return e;}if(u){f="("+f+")";}return e+" "+f;}},_formatResultForDocuments:function(r,e){var k='';e.isDocumentConnector=false;var j,f;for(j=0;j<r.detailAttributes.length;j++){f=r.detailAttributes[j];if(f.metadata.id==='FILE_PROPERTY'){e.isDocumentConnector=true;}if(f.metadata.isKey===true){if(k.length>0){k+=';';}k=k+f.metadata.id+'='+f.value;}}if(e.isDocumentConnector===true){var g=';o=sid('+r.dataSource.system+'.'+r.dataSource.client+')';var h=r.dataSource.id;e.imageUrl="/sap/opu/odata/SAP/ESH_SEARCH_SRV"+g+"/FileLoaderFiles(ConnectorId='"+h+"',FileType='ThumbNail',SelectionParameters='"+k+"')/$value";e.titleUrl="/sap/opu/odata/SAP/ESH_SEARCH_SRV"+g+"/FileLoaderFiles(ConnectorId='"+h+"',FileType='BinaryContent',SelectionParameters='"+k+"')/$value";var i="/sap/opu/odata/SAP/ESH_SEARCH_SRV"+g+"/FileLoaderFiles(ConnectorId='"+h+"',FileType='SUVFile',SelectionParameters='"+k+"')/$value";e.suvlink='/sap/bc/ui5_ui5/ui2/ushell/resources/sap/fileviewer/viewer/web/viewer.html?file='+encodeURIComponent(i);if(!r.navigationObjects){r.navigationObjects=[];}var n=new b({text:"Show Document",href:e.suvlink,target:"_blank"});r.navigationObjects.push(n);for(j=0;j<r.detailAttributes.length;j++){f=r.detailAttributes[j];if(f.id=='PHIO_ID_THUMBNAIL'&&f.value){e.containsThumbnail=true;}if(f.id=='PHIO_ID_SUV'&&f.value){e.containsSuvFile=true;}}}},_formatResultForNotes:function(r,e){}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchShellHelper',['sap/ushell/renderers/fiori2/search/controls/SearchFieldGroup','sap/ushell/renderers/fiori2/search/SearchHelper'],function(S,a){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchShellHelper');var m=sap.ushell.renderers.fiori2.search.SearchShellHelper={};var s="sapUshellShellShowSearchOverlay";var b;
m.injectSearchModel=function(_){b=b||_;};
jQuery.extend(m,{init:function(){var t=this;sap.ushell.Container.getService("Search").prefetch();sap.ui.require('sap/ushell/renderers/fiori2/search/SearchModel');t.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();t.oShellHeader=sap.ui.getCore().byId('shell-header');t.oSearchFieldGroup=new S("searchFieldInShell");t.oSearchFieldGroup.setModel(t.oModel);t.oShellHeader.setSearch(t.oSearchFieldGroup);t.setSearchState('COL');this.setSearchStateSync=this.setSearchState;this.setSearchState=a.delayedExecution(this.setSearchState,500);t.oSearchInput=t.oSearchFieldGroup.input;t.oSearchInput.setMaxSuggestionWidth("30rem");t.oSearchInput.setValue(t.oModel.getSearchBoxTerm());t.oSearchSelect=t.oSearchFieldGroup.select;var l=new sap.ui.core.InvisibleText("selectLabel",{text:sap.ushell.resources.i18n.getText("searchIn")});if(l){t.oSearchSelect.addAriaLabelledBy("selectLabel");}t.oSearchSelect.setTooltip(sap.ushell.resources.i18n.getText("searchInTooltip"));t.oSearchSelect.addEventDelegate({onAfterRendering:function(e){jQuery('#searchFieldInShell-select-icon').attr('title',sap.ushell.resources.i18n.getText("searchIn"));}},t.oSearchSelect);t.oSearchSelect.setTooltip(sap.ushell.resources.i18n.getText("searchIn"));t.oSearchSelect.attachChange(function(e){t.focusInputField({selectContent:true});});t.oSearchButton=t.oSearchFieldGroup.button;t.oSearchButton.bindProperty("type",{parts:[{path:'/searchButtonStatus'}],formatter:function(c){if(c==='search'){return sap.m.ButtonType.Emphasized;}else{return sap.m.ButtonType.Default;}}});t.oSearchButton.attachPress(function(){t.handleClickSearchButton();});t.oSearchButton.addEventDelegate({onAfterRendering:function(){var c=jQuery("div.sapUshellShellSearchHidden").length===0;var d=t.oModel.getProperty("/searchButtonStatus")==="close";var $=jQuery(t.oSearchButton.getDomRef());if(c){if(d){$.attr("aria-pressed",true);}else{$.removeAttr("aria-pressed");}}else{$.attr("aria-pressed",false);}}});t.oSearchCancelButton=t.oSearchFieldGroup.cancelButton;t.oSearchCancelButton.attachPress(function(){t.setSearchState('COL');window.setTimeout(function(){sap.ui.getCore().byId('sf').focus();},1000);});this.oSearchFieldGroup.setCancelButtonActive(false);t.registerFocusHandler();jQuery(document).on('keydown',function(e){if(e.keyCode===27){e.preventDefault();if(a.isSearchAppActive()){return;}if(t.oSearchInput){if(t.oSearchInput.getValue()===""){t.setSearchState('COL');window.setTimeout(function(){sap.ui.getCore().byId('sf').focus();},1000);}else if(t.oSearchInput.getValue()===" "){t.oSearchInput.setValue("");}}}});sap.ui.getCore().getEventBus().subscribe("shell","searchCompLoaded",t.onSearchComponentLoaded,t);sap.ui.getCore().getEventBus().subscribe("allSearchFinished",t.onAllSearchFinished,t);sap.ui.getCore().byId('viewPortContainer').attachAfterNavigate(t.onAfterNavigate,t);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appComponentLoaded",function(){var o=sap.ui.getCore().byId('searchContainerResultsView');if(o&&o.oFocusHandler){o.oFocusHandler.setFocus();}});t.oShellHeader.attachSearchSizeChanged(this.sizeSearchFieldChanged.bind(this));},sizeSearchFieldChanged:function(e){var c=e.mParameters.remSize;var l=20;if(c<=l){this.oSearchSelect.setDisplayMode('icon');}else{this.oSearchSelect.setDisplayMode('default');}l=9;if(c<l){this.oSearchButton.setVisible(false);}else{this.oSearchButton.setVisible(true);}if(e.getParameter('isFullWidth')){this.oSearchFieldGroup.setCancelButtonActive(true);this.oSearchFieldGroup.addStyleClass('sapUshellSearchInputFullWidth');}else{this.oSearchFieldGroup.setCancelButtonActive(false);this.oSearchFieldGroup.removeStyleClass('sapUshellSearchInputFullWidth');}},sizeChanged:function(p){switch(p.name){case"Phone":this.oSearchFieldGroup.setCancelButtonActive(true);break;case"Tablet":this.oSearchFieldGroup.setCancelButtonActive(false);break;case"Desktop":this.oSearchFieldGroup.setCancelButtonActive(false);break;default:break;}},makeDelayed:function(f){return a.delayedExecution(f,0);},registerFocusHandler:function(){var r=true;if(!r){return;}var t=this;var c=t.oSearchInput.getModel();t.oSearchInput.addEventDelegate({onAfterRendering:function(){var i=jQuery(t.oSearchInput.getDomRef()).find('input')[0];var $=jQuery(i);$.on('focus',function(e){t.log('raw_in',document.activeElement);if(!t.isFocusHandlerActive){return;}t.setSearchState('EXP');});$.on('blur',t.makeDelayed(function(e){t.log('raw_out',document.activeElement);if(!t.isFocusHandlerActive){return;}if(t.isInSearchBox(document.activeElement)){return;}var p=t.oSearchSelect.getPicker();if(p){if(p.oPopup.eOpenState==="OPENING"){return;}}if(!a.isSearchAppActive()&&t.oSearchInput.getValue().length===0&&c.getDataSource()===c.getDefaultDataSource()){t.setSearchState('COL');}else{t.setSearchState('EXP_S');}}));}});t.oSearchSelect.addEventDelegate({onAfterRendering:function(){var d=t.oSearchSelect.getDomRef();d.addEventListener('focus',function(e){t.log('raw_in_select',document.activeElement);if(!t.isFocusHandlerActive){return;}if(t.oShellHeader.getSearchState()==='EXP_S'&&!t.isNoSearchResultsScreen()){t.setSearchState('EXP_S',true);return;}t.setSearchState.abort();});d.addEventListener('blur',t.makeDelayed(function(e){t.log('raw_out_select',document.activeElement);if(!t.isFocusHandlerActive){return;}if(t.isInSearchBox(document.activeElement)){return;}var p=t.oSearchSelect.getPicker();if(p){if(p.oPopup.eOpenState==="OPENING"){return;}}if(t.oSearchInput.getValue().length===0&&c.getDataSource()===c.getDefaultDataSource()){t.setSearchState('COL');}else{t.setSearchState('EXP_S');}}));}});t.oSearchButton.addEventDelegate({onAfterRendering:function(){var d=t.oSearchButton.getDomRef();d.addEventListener('focus',function(e){t.log('raw_in_button',document.activeElement);if(!t.isFocusHandlerActive){return;}t.setSearchState.abort();});d.addEventListener('blur',t.makeDelayed(function(e){t.log('raw_out_button',document.activeElement);if(!t.isFocusHandlerActive){return;}if(t.isInSearchBox(document.activeElement)){return;}if(t.oSearchInput.getValue().length===0&&c.getDataSource()===c.getDefaultDataSource()){t.setSearchState('COL');}else{t.setSearchState('EXP_S');}}));}});this.enableFocusHandler(true);},isInSearchBox:function(e){if(!e){return false;}var c=['searchFieldInShell'];var d=['sapMPopoverCont'];while(e){if(e.getAttribute){var f=e.getAttribute('id');if(f){for(var j=0;j<c.length;++j){var g=c[j];if(f.indexOf(g)>=0){return true;}}}for(var i=0;i<d.length;++i){var h=d[i];if(e.classList.contains(h)){return true;}}}e=e.parentNode;}return false;},enableFocusHandler:function(c){this.isFocusHandlerActive=c;if(!c&&this.setSearchState.abort){this.setSearchState.abort();}},isOverlayShown:function(){var c=this.oShellHeader.getShellLayoutControl();return c.hasStyleClass(s);},setSearchState:function(c,d){var e=sap.ui.getCore().byId('sf');if(!e){return;}if(typeof d==='undefined'){switch(c){case'EXP':d=true;break;case'EXP_S':d=false;break;case'COL':d=false;break;}if(this.isNoSearchResultsScreen()){d=false;}}if(sap.ui.getCore().byId('searchFieldInShell')===undefined){return;}if(this.oShellHeader.getSearchState()===c&&d===this.isOverlayShown()){return;}if(c==='COL'){this.enableFocusHandler(false);}else{this.enableFocusHandler(true);}this.log('set search state',c,document.activeElement);switch(c){case'COL':this.oModel.abortSuggestions();this.oShellHeader.setSearchState(c,35,d);this.oSearchCancelButton.setVisible(false);e.setVisible(true);break;case'EXP_S':this.oShellHeader.setSearchState(c,35,d);this.oSearchCancelButton.setVisible(true);e.setVisible(false);break;case'EXP':this.oShellHeader.setSearchState(c,35,d);this.oSearchCancelButton.setVisible(true);e.setVisible(false);this.focusInputField();break;default:break;}},isNoSearchResultsScreen:function(){return a.isSearchAppActive()&&this.oModel.getProperty("/boCount")===0&&this.oModel.getProperty("/appCount")===0;},onShellSearchButtonPressed:function(e){if(sap.ui.getCore().byId('searchFieldInShell')===undefined){this.init();}else if(!a.isSearchAppActive()){this.resetModel();}this.setSearchState('EXP');},handleClickSearchButton:function(){if(this.oSearchInput.getValue()===""&&this.oModel.getDataSource()===this.oModel.getDefaultDataSource()){this.setSearchState('COL');window.setTimeout(function(){sap.ui.getCore().byId('sf').focus();},1000);}},focusInputField:function(o){o=o||{};var t=this;if(t.focusInputFieldTimeout){window.clearTimeout(t.focusInputFieldTimeout);t.focusInputFieldTimeout=null;}var d=function(r){if(!t.oSearchInput){return;}t.focusInputFieldTimeout=null;var c=t.oSearchInput.getDomRef();if(c&&jQuery(c).is(':visible')&&!sap.ui.getCore().getUIDirty()){if(t.oSearchInput.getEnabled()){t.oSearchInput.focus();if(o.selectContent){t.oSearchInput.selectText(0,9999);}return;}}if(r>0){t.focusInputFieldTimeout=window.setTimeout(function(){if(!t.oModel.getProperty('/initializingObjSearch')){r--;}d(r);},100);}};d(10);},getDefaultOpen:function(){return this.defaultOpen;},setDefaultOpen:function(d){this.defaultOpen=d;},getSearchInput:function(){return this.oSearchFieldGroup?this.oSearchFieldGroup.input:null;},onAfterNavigate:function(e){if(e.getParameter('toId')!=='shellPage-Action-search'&&e.getParameter('toId')!=='applicationShellPage-Action-search'&&e.getParameter('toId')!=='application-Action-search'){return;}var o=sap.ui.getCore().byId('searchContainerResultsView');if(o&&o.oFocusHandler){o.oFocusHandler.setFocus();}sap.ui.getCore().getEventBus().publish("searchLayoutChanged");},onAllSearchFinished:function(){this.oSearchInput.setValue(this.oModel.getSearchBoxTerm());this.log('search finished');this.setSearchState('EXP_S');},onSearchComponentLoaded:function(){if(!a.isSearchAppActive()){return;}this.setSearchState('EXP_S');},resetModel:function(){this.oSearchInput.setValue('');this.oModel.resetQuery();},logSwitch:false,log:function(){if(!this.logSwitch){return;}var l=function(e){var f=e.getAttribute('id');if(f){return f;}else{return'unknown_id';}};var c=function(e){var r=[];for(var i=0;i<e.classList.length;++i){r.push(e.classList.item(i));}return r.join(',');};var p=['--'];for(var i=0;i<arguments.length;++i){var d=arguments[i];if(d&&d.getAttribute){p.push(l(d)+','+c(d));continue;}if(d){p.push(d);continue;}p.push('undef');}}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader',['./SearchModel','./SearchShellHelper'],function(S,a){"use strict";S.injectSearchShellHelper(a);a.injectSearchModel(S);return{SearchModel:S,SearchShellHelper:a};});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchTabStripsFormatter',[],function(){"use strict";var m={};
m.Node=function(){this.init.apply(this,arguments);};
m.Node.prototype={init:function(d,c){this.dataSource=d;this.children=[];this.parent=null;this.count=c;},equals:function(o){return this===o;},setCount:function(c){this.count=c;},getAncestors:function(){var a=[],c=this;while(c.parent){a.push(c.parent);c=c.parent;}return a;},getChildren:function(){var c=[];for(var i=0;i<this.children.length;++i){var a=this.children[i];if(a.unsureWhetherNodeisBelowRoot){continue;}c.push(a);}return c;},getChildrenSortedByCount:function(){var c=this.getChildren();c.sort(function(a,b){return b.count-a.count;});return c;},clearChildren:function(){for(var i=0;i<this.children.length;++i){var c=this.children[i];c.parent=null;}this.children=[];},appendNode:function(n){n.parent=this;this.children.push(n);},appendNodeAtIndex:function(n,i){n.parent=this;this.children.splice(i,0,n);},removeChildNode:function(n){var i=this.children.indexOf(n);if(i<0){return;}this.children.splice(i,1);n.parent=null;},hasChild:function(n){return this.children.indexOf(n)>-1;},hasSibling:function(n){if(this.equals(n)){return false;}var p=this.parent;if(!p){return false;}if(p.hasChild(n)){return true;}return false;},_findNode:function(d,r){if(this.dataSource===d){r.push(this);return;}for(var i=0;i<this.children.length;++i){var c=this.children[i];c._findNode(d,r);if(r.length>0){return;}}}};
m.Tree=function(){this.init.apply(this,arguments);};
m.Tree.prototype={init:function(r){this.rootNode=new m.Node(r,null);},reset:function(){this.rootNode=null;},invalidate:function(d){var n=this.findNode(d);if(!n){this.rootNode.children=[];this.rootNode.count=0;return;}var c=null;while(n){n.children=c?[c]:[];n.count=null;if(c){c.count=null;}c=n;n=n.parent;}},findNode:function(d){if(!this.rootNode){return null;}var r=[];this.rootNode._findNode(d,r);return r.length>0?r[0]:null;},hasChild:function(d,a){if(a.equals(this.rootNode.dataSource)){return false;}var n=this.findNode(d);if(!n){return false;}var b=this.findNode(a);if(!b){return false;}return n.hasChild(b);},hasSibling:function(d,a){if(a.equals(this.rootNode.dataSource)){return false;}var n=this.findNode(d);if(!n){return false;}var b=this.findNode(a);if(!b){return false;}return n.hasSibling(b);},updateFromPerspective:function(d,p,a){var c;if(p){c=p.totalCount;}var b=this.findNode(d);if(!b){b=new m.Node(d,c);b.unsureWhetherNodeisBelowRoot=true;this.rootNode.appendNode(b);}b.setCount(c);if(d===a.allDataSource){b.setCount(b.count+a.getProperty('/appCount'));}this.updateFromPerspectiveChildDataSources(b,p,a);this.updateAppTreeNode(d,a);},updateAppTreeNode:function(d,a){if(d!==a.allDataSource&&d!==a.appDataSource){return;}var b=this.findNode(a.appDataSource);if(b){this.rootNode.removeChildNode(b);}var c=a.getProperty('/appCount');if(c===0&&d!==a.appDataSource){return;}b=new m.Node(a.appDataSource,c);this.rootNode.appendNodeAtIndex(b,0);},updateFromPerspectiveChildDataSources:function(c,p,a){if(!p||c.dataSource===a.appDataSource){return;}var f=p.facets;if(f.length===0){return;}var d=f[0];if(d.type!==a.sinaNext.FacetType.DataSource){return;}var b=d.items;c.clearChildren();for(var i=0;i<b.length;++i){var e=b[i];var g=e.dataSource;var h=this.findNode(g);if(!h){h=new m.Node(g,e.measureValue);}if(h.unsureWhetherNodeisBelowRoot){h.unsureWhetherNodeisBelowRoot=false;this.rootNode.removeChildNode(h);}if(h.parent){h.parent.removeChildNode(h);}h.setCount(e.measureValue);c.appendNode(h);}}};
m.Formatter=function(){this.init.apply(this,arguments);};
m.Formatter.prototype={init:function(r){this.tree=new m.Tree(r);},format:function(d,p,a){this.tree.updateFromPerspective(d,p,a);var t=this.generateTabStrips(d,a);return t;},invalidate:function(d){if(this.tree){this.tree.invalidate(d);}},generateTabStrips:function(d,a){var t=9999;var i,c,b;var e={strips:[],selected:null};var n=this.tree.findNode(d);if(!n){if(d!==a.allDataSource){e.strips.push(a.allDataSource);}e.strips.push(d);e.selected=d;return e;}if(n.dataSource===a.allDataSource){e.strips.push(a.allDataSource);b=n.getChildrenSortedByCount();for(i=0;i<b.length&&e.strips.length<t;++i){c=b[i];e.strips.push(c.dataSource);}e.selected=a.allDataSource;return e;}if(n.parent===this.tree.rootNode&&!n.unsureWhetherNodeisBelowRoot){e.strips.push(a.allDataSource);var f=false;b=this.tree.rootNode.getChildrenSortedByCount();for(i=0;i<b.length;++i){c=b[i];if(f){if(e.strips.length>=t){break;}e.strips.push(c.dataSource);}else{if(e.strips.length<t-1||n===c){e.strips.push(c.dataSource);if(n===c){f=true;}}}}if(b.length===0){e.strips.push(n.dataSource);}e.selected=n.dataSource;return e;}e.strips.push(a.allDataSource);e.strips.push(n.dataSource);e.selected=n.dataSource;return e;}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchUrlParser',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/SearchUrlParserInav2'],function(S,a){"use strict";var b=function(){this.init.apply(this,arguments);};b.prototype={init:function(p){this.model=p.model;this.urlParserInav2=new a(p);},parse:function(){return this.model.initBusinessObjSearch().then(function(){if(S.getHashFromUrl().indexOf('#Action-search')!==0){return undefined;}if(!S.hasher.hasChanged()){return undefined;}var p=S.getUrlParameters();if($.isEmptyObject(p)){return undefined;}if(p.datasource||p.searchterm){return this.urlParserInav2.parseUrlParameters(p);}else{return this.parseUrlParameters(p);}}.bind(this)).then(function(){this.model.setProperty("/searchTermPlaceholder",this.model.calculatePlaceholder());this.model.calculateSearchButtonStatus();this.model._firePerspectiveQuery(true);}.bind(this));},parseUrlParameters:function(p){if(p.top){var t=parseInt(p.top,10);this.model.setTop(t,false);}var f;if(p.filter){var c=JSON.parse(p.filter);try{f=this.model.sinaNext.parseFilterFromJson(c);}catch(e){f=this.model.sinaNext.createFilter();if(c.searchTerm){f.setSearchTerm(c.searchTerm);}sap.m.MessageBox.show(sap.ushell.resources.i18n.getText('searchUrlParsingErrorLong')+'\n('+e.toString()+')',{icon:sap.m.MessageBox.Icon.ERROR,title:sap.ushell.resources.i18n.getText('searchUrlParsingError'),actions:[sap.m.MessageBox.Action.OK]});}this.model.setProperty("/uiFilter",f);this.model.setDataSource(f.dataSource,false,false);}},render:function(){return this.renderFromParameters(this.model.getTop(),this.model.getProperty('/uiFilter'),true);},renderFromParameters:function(t,f,e){var h="#Action-search";h+="&/top="+t;if(e){h+="&filter="+encodeURIComponent(JSON.stringify(f.toJson()));}else{h+="&filter="+JSON.stringify(f.toJson());}return h;}};return b;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchUrlParserInav2',['./SearchHelper'],function(S){"use strict";var a=function(){this.init.apply(this,arguments);};a.prototype={init:function(p){this.model=p.model;},parseUrlParameters:function(p){if(p.top){var t=parseInt(p.top,10);this.model.setTop(t,false);}var d=this.model.sinaNext.allDataSource;if(p.datasource){var b=JSON.parse(p.datasource);var c=b.ObjectName.value;switch(b.Type){case'Category':if(c==='$$ALL$$'){d=this.model.sinaNext.allDataSource;}else{d=this.model.sinaNext.getDataSource(c);if(!d){d=this.model.sinaNext._createDataSource({type:this.model.sinaNext.DataSourceType.Category,id:c,label:b.label,labelPlural:b.labelPlural});}}break;case'BusinessObject':d=this.model.sinaNext.getDataSource(c);if(!d){d=this.model.sinaNext.allDataSource;delete p.filter;sap.m.MessageBox.show(sap.ushell.resources.i18n.getText('searchUrlParsingErrorLong')+'\n(Unknow datasource '+c+')',{icon:sap.m.MessageBox.Icon.ERROR,title:sap.ushell.resources.i18n.getText('searchUrlParsingError'),actions:[sap.m.MessageBox.Action.OK]});}break;default:throw'unknown datasource type '+b.Type;}}return S.convertPromiseTojQueryDeferred(this.model.sinaNext.loadMetadata(d)).then(function(){var e={dataSource:d};var r;if(p.filter){var f=JSON.parse(p.filter);r=this.parseCondition(e,f);}else{r=this.model.sinaNext.createComplexCondition();}var g=this.model.sinaNext.createFilter({dataSource:d,searchTerm:p.searchterm,rootCondition:r});this.model.setProperty("/uiFilter",g);this.model.setDataSource(g.dataSource,false);}.bind(this));},parseCondition:function(c,b){if(b.conditions){return this.parseComplexCondition(c,b);}else{return this.parseSimpleCondition(c,b);}},parseComplexCondition:function(c,b){var s=[];for(var i=0;i<b.conditions.length;++i){var d=b.conditions[i];s.push(this.parseCondition(c,d));}return this.model.sinaNext.createComplexCondition({operator:b.operator,conditions:s,valueLabel:b.label});},parseSimpleCondition:function(c,b){c.attribute=b.attribute;return this.model.sinaNext.createSimpleCondition({attribute:b.attribute,attributeLabel:b.attributeLabel,value:this.parseValue(c,b.value),valueLabel:b.valueLabel||b.label,operator:this.parseOperator(c,b.operator)});},parseValue:function(c,v){var m=c.dataSource.getAttributeMetadata(c.attribute);return this.model.sinaNext.inav2TypeConverter.ina2Sina(m.type,v);},parseOperator:function(c,o){switch(o){case'=':return this.model.sinaNext.ComparisonOperator.Eq;case'>':return this.model.sinaNext.ComparisonOperator.Gt;case'>=':return this.model.sinaNext.ComparisonOperator.Ge;case'<':return this.model.sinaNext.ComparisonOperator.Lt;case'<=':return this.model.sinaNext.ComparisonOperator.Le;default:throw'Unknown operator '+o;}}};return a;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/UXLog',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.UXLog');var m=sap.ushell.renderers.fiori2.search.UXLog={};jQuery.extend(m,{logLines:[],log:function(){this._log.apply(this,arguments);},_log:function(t){this.logLines.push(t);this._save();},_save:function(){jQuery.ajax({type:'PUT',url:'/uxlog.txt',data:this.logLines.join('\n')+'\n',contentType:'text/plain'});this.logLines=[];}});m._save=S.delayedExecution(m._save,2000);return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/appsearch/AppSearch',['sap/ushell/renderers/fiori2/search/appsearch/CatalogSearch'],function(C){"use strict";var A=function(){this.init.apply(this,arguments);};A.prototype={init:function(p){this.catalogSearch=new C(p);this.searchProviders=[this.catalogSearch];},prefetch:function(){for(var i=0;i<this.searchProviders.length;i++){var s=this.searchProviders[i];s.prefetch();}},search:function(q){var a=[];for(var i=0;i<this.searchProviders.length;i++){var s=this.searchProviders[i];a.push(s.search(q));}return jQuery.when.apply(null,a).then(function(){var b=arguments;var r={totalCount:0,tiles:[]};for(var i=0;i<b.length;i++){var c=b[i];r.totalCount+=c.totalCount;r.tiles.push.apply(r.tiles,c.tiles);}return r;});}};return A;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/appsearch/CatalogSearch',['sap/ushell/renderers/fiori2/search/appsearch/JsSearch'],function(J){"use strict";var C=function(){this.init.apply(this,arguments);};C.prototype={init:function(p){this.launchPageService=sap.ushell.Container.getService("LaunchPage");this.optimizedAppSearch=p.optimizedAppSearch;this.searchEngines={};},prefetch:function(){return this._getTiles();},search:function(q){q.scope=q.scope||'allTiles';return this._getSearchEngine(q.scope).then(function(s){var a;try{a=s.search({searchFor:q.searchTerm,top:q.top,skip:q.skip});}catch(e){var b=new jQuery.Deferred();b.reject(e);return b;}var r=[];for(var i=0;i<a.results.length;++i){var c=a.results[i];var t=c.object;var h=c.highlighted.label;r.push(this._formatTile(t,h));}return{totalCount:a.totalCount,tiles:r};}.bind(this));},_getView:function(t){try{var a=t.tile.getContract('types');a.setType('tile');}catch(e){}var v=sap.ushell.Container.getService('LaunchPage').getCatalogTileView(t.tile);var b='app';if(t.tile.getTitle){b=t.tile.getTitle();}v.eventLoggingData={targetUrl:t.url,title:b};return v;},_getTiles:function(){var t=this;if(this.loadDeferred){return this.loadDeferred;}this.loadDeferred=this.launchPageService.getCatalogs().then(function(c){var a=[];for(var i=0;i<c.length;i++){a.push(this.launchPageService.getCatalogTiles(c[i]));}a.push(this._getPersonalizedGroupTiles());return jQuery.when.apply(jQuery,a).then(function(){var b=Array.prototype.slice.call(arguments);var c=b.slice(0,-1);var p=b.slice(-1);var d,f,g;try{g=[];return t._collectTilesOfCatalogs(c).then(function(r){d=[];for(var i=0;i<r.length;i++){d=d.concat(r[i]);}t._sortTiles(d);g.push.apply(g,d);g=t._removeDuplicateTiles(g);return t._collectTilesOfCatalogs(p);}).then(function(r){f=[];for(var j=0;j<r.length;j++){f=f.concat(r[j]);}t._sortTiles(f);g.push.apply(g,f);g=t._removeDuplicateTiles(g);t._sortTiles(g);return{catalogTiles:d,personalizedTiles:f,allTiles:g};});}catch(e){return jQuery.Deferred().reject(e);}}.bind(this));}.bind(this));return this.loadDeferred;},_getSearchEngine:function(s){return this._getTiles().then(function(t){var a=this.searchEngines[s];if(a){return a;}a=new J({objects:t[s],algorithm:{id:'contains-ranked',options:[50,49,40,39,5,4,51]},fields:['label','keywords']});this.searchEngines[s]=a;return a;}.bind(this));},_formatTile:function(t,h){var a=this;var r=jQuery.extend({},t);if(h){r.label=h;}r.type="catalog";r.getView=function(){return a._getView(this);};return r;},_isTileViewNeeded:function(t){if(this.optimizedAppSearch){return false;}return!this.launchPageService.getCatalogTilePreviewTitle(t);},_collectTilesOfCatalogs:function(c){var p=[];for(var i=0;i<c.length;i++){p.push(this._collectTilesOfCatalog(c[i]));}return jQuery.when.apply(null,p).then(function(){var t=[];for(var i=0;i<arguments.length;i++){if(arguments[i].length!==0){t.push(arguments[i]);}}return t;},function(e){});},_collectTilesOfCatalog:function(c){var p=[];for(var i=0;i<c.length;i++){p.push(this._getTileAsync(c[i]));}return jQuery.when.apply(null,p).then(function(){var t=[];for(var i=0;i<arguments.length;i++){if(arguments[i]!==null){t.push(arguments[i]);}}return t;},function(e){});},_getTileAsync:function(t){var p=new jQuery.Deferred();var a,b,k,c,s,d,i;try{a=null;if(this._isTileViewNeeded(t)){a=this.launchPageService.getCatalogTileView(t);}k=this.launchPageService.getCatalogTileKeywords(t);c=this.launchPageService.getCatalogTileTargetURL(t);b=this.launchPageService.getCatalogTilePreviewTitle(t)||this.launchPageService.getCatalogTileTitle(t);s=this.launchPageService.getCatalogTilePreviewSubtitle(t);d=this.launchPageService.getCatalogTileSize(t);i=this.launchPageService.getCatalogTilePreviewIcon(t)||"sap-icon://business-objects-experience";if(a){if(!a.destroy){var f=new Error('The tileview "'+b+'" with target url "'+c+'" does not implement mandatory function destroy!');f.name='Missing Impementation';throw f;}a.destroy();}if(t.getContract){var g=t.getContract("preview");if(g){g.setEnabled(false);}}if(!this._isValid(t)){p.resolve(null);}if(!c){p.resolve(null);}var l=b;if(s){l+=' - '+s;}p.resolve({tile:t,keywords:(k instanceof Array)?k.join(' '):k,url:c,label:l,title:b||'',subtitle:s||'',tooltip:b||'',icon:i,size:d});}catch(e){p.resolve(null);jQuery.sap.log.error(e);if(e.toString().indexOf('does not implement mandatory function destroy')>=0){throw e;}}return p;},_isValid:function(t){if(this.launchPageService.isTileIntentSupported){return this.launchPageService.isTileIntentSupported(t);}else{return true;}},_getPersonalizedGroupTiles:function(){return this.launchPageService.getGroups().then(function(g){var r=[];for(var j=0;j<g.length;j++){var t=this.launchPageService.getGroupTiles(g[j])||[];r.push.apply(r,t);}return r;}.bind(this));},_calcKey:function(t){return t.title+t.url+t.icon;},_removeDuplicateTiles:function(t){var a={};var r=[];for(var i=0;i<t.length;++i){var b=t[i];var k=this._calcKey(b);if(a[k]){continue;}a[k]=b;r.push(b);}return r;},_sortTiles:function(t){t.sort(function(a,b){if(a.title.toUpperCase()<b.title.toUpperCase()){return-1;}if(a.title.toUpperCase()>b.title.toUpperCase()){return 1;}return 0;});}};return C;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/appsearch/JsSearch',[],function(){"use strict";return function JsSearch(o){var d=this;if(!o){throw new Error('You must specify search options');}if(!o.algorithm||!o.algorithm.id||!Array.isArray(o.algorithm.options)||typeof o.algorithm.options[0]!=='number'||typeof o.algorithm.options[1]!=='number'||typeof o.algorithm.options[2]!=='number'||typeof o.algorithm.options[3]!=='number'||typeof o.algorithm.options[4]!=='number'||typeof o.algorithm.options[5]!=='number'||typeof o.algorithm.options[6]!=='number'){throw new Error('You must specify a supported search algorithm with all options');}var e=_(o.algorithm.id,o.algorithm.options);if(e===undefined){throw new Error('You must specify a supported search algorithm');}var h=[];if(Array.isArray(o.fields)){o.fields.forEach(function(f){if(typeof f==='string'){h.push({field:f,weight:3});}});}else if(o.fields){if(Array.isArray(o.fields.groups)){var l=parseFloat(o.fields.scale);if(isNaN(l)){l=1;}else{l=Math.max(1,l);}o.fields.groups.forEach(function(g,i){var w=((o.fields.groups.length-1)-i)/(o.fields.groups.length-1)*(l-1)+1;if(Array.isArray(g)){g.forEach(function(f){if(typeof f==='string'){h.push({field:f,weight:w});}});}else if(typeof g==='string'){h.push({field:g,weight:w});}});}}if(h.length<1){throw new Error('You must specify fields to search in');}var n;var p=[];var q;this.setObjects=function(O){if(!Array.isArray(O)){throw new Error('You must give an array of objects');}q=O;n=undefined;};if(o.objects){this.setObjects(o.objects);}function u(s,m){var t=s;t=t.replace(/\[(\^?)(\\s)?a0\]/g,'[$1$2\\p{Letter}\\p{Number}]');t=t.replace(/\[(\^?)(\\s)?a\]/g,'[$1$2\\p{Letter}]');t=t.replace(/\[(\^?)(\\s)?0\]/g,'[$1$2\\p{Number}]');t=t.replace(/\[(\^?)(\\s)?a0\]/g,'[$1$2\\p{Number}]');t=t.replace(/\[\^\\p{Letter}\]/g,'(?:[\0-@\[-`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u0560\u0588-\u05CF\u05EB-\u05EF\u05F3-\u061F\u064B-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07C9\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u089F\u08B5\u08BE-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09EF\u09F2-\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B70\u0B72-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B-\u0C5F\u0C62-\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDD\u0CDF\u0CE2-\u0CF0\u0CF3-\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57-\u0D5E\u0D62-\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0EDB\u0EE0-\u0EFF\u0F01-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u1040-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16F0\u16F9-\u16FF\u170D\u1712-\u171F\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u181F\u1878-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u194F\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19FF\u1A17-\u1A1F\u1A55-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4C-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BFF\u1C24-\u1C4C\u1C50-\u1C59\u1C7E\u1C7F\u1C89-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u2182\u2185-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u3004\u3007-\u3030\u3036-\u303A\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u312F\u3130\u318F-\u319F\u31BB-\u31EF\u3200-\u33FF\u4DB6-\u4DFF\u9FEB-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA620-\uA629\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6E6-\uA716\uA720\uA721\uA789\uA78A\uA7AF\uA7B8-\uA7F6\uA802\uA806\uA80B\uA823-\uA83F\uA874-\uA881\uA8B4-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FE-\uA909\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9D0-\uA9DF\uA9E5\uA9F0-\uA9F9\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB66-\uAB6F\uABE3-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEFF\uDF20-\uDF2C\uDF41\uDF4A-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0-\uDFFF]|\uD801[\uDC9E-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE01-\uDE0F\uDE14\uDE18\uDE34-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE5-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC82\uDCB0-\uDCCF\uDCE9-\uDD02\uDD27-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDD9\uDDDB\uDDDD-\uDDFF\uDE12\uDE2C-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE7F\uDEAB-\uDEFF\uDF1A-\uDFFF]|\uD806[\uDC00-\uDC9F\uDCE0-\uDCFE\uDD00-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE84\uDE85\uDE8A-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC00-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD823-\uD82B\uD82D\uD82E\uD830-\uD834\uD836-\uD839\uD83C-\uD83F\uD87B-\uD87D\uD87F-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDEFF\uDF45-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2-\uDFFF]|\uD821[\uDFED-\uDFFF]|\uD822[\uDEF3-\uDFFF]|\uD82C[\uDD1F-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC-\uDFFF]|\uD83A[\uDCC5-\uDCFF\uDD44-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD869[\uDED7-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])');t=t.replace(/\[\^\\p{Number}\]/g,'(?:[\0-\/:-\xB1\xB4-\xB8\xBA\xBB\xBF-\u065F\u066A-\u06EF\u06FA-\u07BF\u07CA-\u0965\u0970-\u09E5\u09F0-\u09F3\u09FA-\u0A65\u0A70-\u0AE5\u0AF0-\u0B65\u0B70\u0B71\u0B78-\u0BE5\u0BF3-\u0C65\u0C70-\u0C77\u0C7F-\u0CE5\u0CF0-\u0D57\u0D5F-\u0D65\u0D79-\u0DE5\u0DF0-\u0E4F\u0E5A-\u0ECF\u0EDA-\u0F1F\u0F34-\u103F\u104A-\u108F\u109A-\u1368\u137D-\u16ED\u16F1-\u17DF\u17EA-\u17EF\u17FA-\u180F\u181A-\u1945\u1950-\u19CF\u19DB-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1B4F\u1B5A-\u1BAF\u1BBA-\u1C3F\u1C4A-\u1C4F\u1C5A-\u206F\u2071-\u2073\u207A-\u207F\u208A-\u214F\u2183\u2184\u218A-\u245F\u249C-\u24E9\u2500-\u2775\u2794-\u2CFC\u2CFE-\u3006\u3008-\u3020\u302A-\u3037\u303B-\u3191\u3196-\u321F\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\uA61F\uA62A-\uA6E5\uA6F0-\uA82F\uA836-\uA8CF\uA8DA-\uA8FF\uA90A-\uA9CF\uA9DA-\uA9EF\uA9FA-\uAA4F\uAA5A-\uABEF\uABFA-\uD7FF\uE000-\uFF0F\uFF1A-\uFFFF]|\uD800[\uDC00-\uDD06\uDD34-\uDD3F\uDD79-\uDD89\uDD8C-\uDEE0\uDEFC-\uDF1F\uDF24-\uDF40\uDF42-\uDF49\uDF4B-\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC00-\uDC9F\uDCAA-\uDFFF]|\uD802[\uDC00-\uDC57\uDC60-\uDC78\uDC80-\uDCA6\uDCB0-\uDCFA\uDD00-\uDD15\uDD1C-\uDDBB\uDDBE\uDDBF\uDDD0\uDDD1\uDE00-\uDE3F\uDE48-\uDE7C\uDE7F-\uDE9C\uDEA0-\uDEEA\uDEF0-\uDF57\uDF60-\uDF77\uDF80-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC00-\uDCF9\uDD00-\uDE5F\uDE7F-\uDFFF]|\uD804[\uDC00-\uDC51\uDC70-\uDCEF\uDCFA-\uDD35\uDD40-\uDDCF\uDDDA-\uDDE0\uDDF5-\uDEEF\uDEFA-\uDFFF]|[\uD805\uD807][\uDC00-\uDC4F\uDC5A-\uDCCF\uDCDA-\uDE4F\uDE5A-\uDEBF\uDECA-\uDF2F\uDF3C-\uDFFF]|\uD806[\uDC00-\uDCDF\uDCF3-\uDFFF]|[\uD808\uD80A-\uD819\uD81B-\uD833\uD836-\uD839\uD83B\uD83D-\uDBFF][\uDC00-\uDFFF]|\uD809[\uDC6F-\uDFFF]|\uD81A[\uDC00-\uDE5F\uDE6A-\uDF4F\uDF5A\uDF62-\uDFFF]|\uD834[\uDC00-\uDF5F\uDF72-\uDFFF]|\uD835[\uDC00-\uDFCD]|\uD83A[\uDC00-\uDCC6\uDCD0-\uDD4F\uDD5A-\uDFFF]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])');t=t.replace(/\[\^\\p{Letter}\\p{Number}\]/g,'(?:[\0-\/:-@\[-`\{-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u0560\u0588-\u05CF\u05EB-\u05EF\u05F3-\u061F\u064B-\u065F\u066A-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07BF\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u089F\u08B5\u08BE-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0965\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09E5\u09F2\u09F3\u09FA\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A65\u0A70\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AE5\u0AF0-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B65\u0B70\u0B78-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0BE5\u0BF3-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B-\u0C5F\u0C62-\u0C65\u0C70-\u0C77\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDD\u0CDF\u0CE2-\u0CE5\u0CF0\u0CF3-\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57\u0D62-\u0D65\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DE5\u0DF0-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F1F\u0F34-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u104A-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u1368\u137D-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1712-\u171F\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u17DF\u17EA-\u17EF\u17FA-\u180F\u181A-\u181F\u1878-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A17-\u1A1F\u1A55-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4C-\u1B4F\u1B5A-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BFF\u1C24-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u206F\u2072\u2073\u207A-\u207E\u208A-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A-\u245F\u249C-\u24E9\u2500-\u2775\u2794-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFC\u2CFE\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u312F\u3130\u318F-\u3191\u3196-\u319F\u31BB-\u31EF\u3200-\u321F\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DB6-\u4DFF\u9FEB-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6F0-\uA716\uA720\uA721\uA789\uA78A\uA7AF\uA7B8-\uA7F6\uA802\uA806\uA80B\uA823-\uA82F\uA836-\uA83F\uA874-\uA881\uA8B4-\uA8CF\uA8DA-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FE\uA8FF\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9DA-\uA9DF\uA9E5\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB66-\uAB6F\uABE3-\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD06\uDD34-\uDD3F\uDD79-\uDD89\uDD8C-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEE0\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC57\uDC77\uDC78\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE01-\uDE0F\uDE14\uDE18\uDE34-\uDE3F\uDE48-\uDE5F\uDE7F\uDEA0-\uDEBF\uDEC8\uDEE5-\uDEEA\uDEF0-\uDEFF\uDF36-\uDF3F\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD00-\uDE5F\uDE7F-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC51\uDC70-\uDC82\uDCB0-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDD02\uDD27-\uDD35\uDD40-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDCF\uDDDB\uDDDD-\uDDE0\uDDF5-\uDDFF\uDE12\uDE2C-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDEEF\uDEFA-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC4F\uDC5A-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEAB-\uDEBF\uDECA-\uDEFF\uDF1A-\uDF2F\uDF3C-\uDFFF]|\uD806[\uDC00-\uDC9F\uDCF3-\uDCFE\uDD00-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE84\uDE85\uDE8A-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC4F\uDC6D-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD4F\uDD5A-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD823-\uD82B\uD82D\uD82E\uD830-\uD833\uD836-\uD839\uD83D-\uD83F\uD87B-\uD87D\uD87F-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDEFF\uDF45-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2-\uDFFF]|\uD821[\uDFED-\uDFFF]|\uD822[\uDEF3-\uDFFF]|\uD82C[\uDD1F-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD834[\uDC00-\uDF5F\uDF72-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD83A[\uDCC5\uDCC6\uDCD0-\uDCFF\uDD44-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDFFF]|\uD869[\uDED7-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])');t=t.replace(/\[\^\\s\\p{Letter}\\p{Number}\]/g,'(?:[\0-\x08\x0E-\x1F!-\/:-@\[-`\{-\x9F\xA1-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u0560\u0588-\u05CF\u05EB-\u05EF\u05F3-\u061F\u064B-\u065F\u066A-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07BF\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u089F\u08B5\u08BE-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0965\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09E5\u09F2\u09F3\u09FA\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A65\u0A70\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AE5\u0AF0-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B65\u0B70\u0B78-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0BE5\u0BF3-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B-\u0C5F\u0C62-\u0C65\u0C70-\u0C77\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDD\u0CDF\u0CE2-\u0CE5\u0CF0\u0CF3-\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57\u0D62-\u0D65\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DE5\u0DF0-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F1F\u0F34-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u104A-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u1368\u137D-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1712-\u171F\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u17DF\u17EA-\u17EF\u17FA-\u180F\u181A-\u181F\u1878-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A17-\u1A1F\u1A55-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4C-\u1B4F\u1B5A-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BFF\u1C24-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u206F\u2072\u2073\u207A-\u207E\u208A-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A-\u245F\u249C-\u24E9\u2500-\u2775\u2794-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFC\u2CFE\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u312F\u3130\u318F-\u3191\u3196-\u319F\u31BB-\u31EF\u3200-\u321F\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DB6-\u4DFF\u9FEB-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6F0-\uA716\uA720\uA721\uA789\uA78A\uA7AF\uA7B8-\uA7F6\uA802\uA806\uA80B\uA823-\uA82F\uA836-\uA83F\uA874-\uA881\uA8B4-\uA8CF\uA8DA-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FE\uA8FF\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9DA-\uA9DF\uA9E5\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB66-\uAB6F\uABE3-\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD\uFEFE\uFF00-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD06\uDD34-\uDD3F\uDD79-\uDD89\uDD8C-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEE0\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC57\uDC77\uDC78\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE01-\uDE0F\uDE14\uDE18\uDE34-\uDE3F\uDE48-\uDE5F\uDE7F\uDEA0-\uDEBF\uDEC8\uDEE5-\uDEEA\uDEF0-\uDEFF\uDF36-\uDF3F\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD00-\uDE5F\uDE7F-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC51\uDC70-\uDC82\uDCB0-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDD02\uDD27-\uDD35\uDD40-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDCF\uDDDB\uDDDD-\uDDE0\uDDF5-\uDDFF\uDE12\uDE2C-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDEEF\uDEFA-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC4F\uDC5A-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEAB-\uDEBF\uDECA-\uDEFF\uDF1A-\uDF2F\uDF3C-\uDFFF]|\uD806[\uDC00-\uDC9F\uDCF3-\uDCFE\uDD00-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE84\uDE85\uDE8A-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC4F\uDC6D-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD4F\uDD5A-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD823-\uD82B\uD82D\uD82E\uD830-\uD833\uD836-\uD839\uD83D-\uD83F\uD87B-\uD87D\uD87F-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDEFF\uDF45-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2-\uDFFF]|\uD821[\uDFED-\uDFFF]|\uD822[\uDEF3-\uDFFF]|\uD82C[\uDD1F-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD834[\uDC00-\uDF5F\uDF72-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD83A[\uDCC5\uDCC6\uDCD0-\uDCFF\uDD44-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDFFF]|\uD869[\uDED7-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])');t=t.replace(/\[\\p{Letter}\]/g,'(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])');t=t.replace(/\[\\p{Number}\]/g,'(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE47\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDE60-\uDE7E]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD834[\uDF60-\uDF71]|\uD835[\uDFCE-\uDFFF]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83C[\uDD00-\uDD0C])');t=t.replace(/\[\\p{Letter}\\p{Number}\]/g,'(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u3192-\u3195\u31A0-\u31BA\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE40-\uDE47\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDCFF\uDE60-\uDE7E]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEC0-\uDEC9\uDF00-\uDF19\uDF30-\uDF3B]|\uD806[\uDCA0-\uDCF2\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDF60-\uDF71]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])');t=t.replace(/\[\\s\\p{Letter}\\p{Number}\]/g,'(?:[\t-\r 0-9A-Za-z\xA0\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2000-\u200A\u2028\u2029\u202F\u205F\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3000\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u3192-\u3195\u31A0-\u31BA\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE40-\uDE47\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDCFF\uDE60-\uDE7E]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEC0-\uDEC9\uDF00-\uDF19\uDF30-\uDF3B]|\uD806[\uDCA0-\uDCF2\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDF60-\uDF71]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])');if(t.match(/\\p/)){throw new Error('JsSearch internal bug - Cannot convert RegExp');}else{return new RegExp(t,(m||''));}}var v={AlphaNum_atBegin:u('^[a0]'),Alpha_atBegin:u('^[a]'),Num_atBegin:u('^[0]'),AlphaNum_atEnd:u('[a0]$'),Alpha_atEnd:u('[a]$'),Num_atEnd:u('[0]$')};var A={};A.highlightChar='\u000f';A.regExpfillOneCharacterGaps=u(A.highlightChar+'(?!'+A.highlightChar+')[^a0]'+A.highlightChar,'g');A.initBitmap=function(s){return s;};A.calcBitmap=function(s,b,r){var a;var m;while(s!==a&&(m=s.match(r))&&m[0].length){a=s;s=m[1]+Array(m[2].length+1).join(A.highlightChar)+m[3];}if(a===s){throw new Error('JsSearch internal bug - Highlighting did not change');}for(var i=s.length-1;i>=0;i--){if(s[i]===A.highlightChar){b=b.substr(0,i)+A.highlightChar+b.substr(i+1);}}return b;};A.applyBitmap=function(s,b){var a=false;if(!b){return undefined;}b=b.replace(A.regExpfillOneCharacterGaps,A.highlightChar+A.highlightChar+A.highlightChar);for(var i=b.length-1;i>=0;i--){if(b[i]===A.highlightChar&&!a){s=s.substr(0,i+1)+'</b>'+s.substr(i+1);a=true;}if(b[i]!==A.highlightChar&&a){s=s.substr(0,i+1)+'<b>'+s.substr(i+1);a=false;}}if(a){s='<b>'+s;}return s;};function _(a,g){return{'contains-ranked':{compileSearchTerm:function(j){var k={original:j.normalize?j.normalize('NFC'):j,parsed:[],hasTrailingWhitespace:false};function m(w){return w.children[0].cOriginal;}function t(w){return w.children[w.children.length-1].cOriginal;}function C(c){if(c.match(v.Alpha_atEnd)){return'(|[^a].*)';}else if(c.match(v.Num_atEnd)){return'(|[^0].*)';}else{return'(.*)';}}function D(a,c,f){return a.map(function(b,i){if(b.type!==c){if(b.children){b.children=D(b.children,c,f);return b;}return b;}return f(b,i,a[i-1],a[i+1]);});}k.hasTrailingWhitespace=(k.original.substr(-1)===' ');var a=k.original.replace(/\\\"/g,"\u0010").split('"');;var b=[];for(var i=0;i<a.length;i++){a[i]=a[i].replace(/\u0010/g,'\\"');var E=a[i].split(' ').map(function(x){var c={type:'word',wOriginal:x,children:[]};return c;});E=E.filter(function(w){return w.wOriginal.length>0;});if(a[i].length){if(i%2){b.push({type:'phrase',children:E});}else{b=b.concat(E);}}}k.parsed=b;k.parsed=D(k.parsed,'word',function(w){var b=[];var c=false;var f=w.wOriginal.split('');for(var i=0;i<f.length;i++){if(c){c=false;b.push({type:'character',cOriginal:'\\'+f[i]});}else{if(f[i]==='\\'){c=true;}else{b.push({type:'character',cOriginal:f[i]});}}}w.children=b;return w;});k.parsed=D(k.parsed,'character',function(c,i,f,s){var r=c.cOriginal;if(r==='*'){r='[^\\s]*?';}else if(r==='?'){r='[^\\s]';}else if(r.match(/\\[*?"\\]/)){}else{r=r.replace(/[\[\]\/\{\}\(\)\+\.\\\^\$\|]/,"\\$&");r=r.replace(/a/i,'(?:a|ae)');r=r.replace(/o/i,'(?:o|oe)');r=r.replace(/u/i,'(?:u|ue)');r=r.replace(//i,'(?:ae|a)');r=r.replace(//i,'(?:oe|o)');r=r.replace(//i,'(?:ue|u)');r=r.replace(//i,'ss');r=r.replace(//i,'ae');r=r.replace(//i,'oe');if(r.normalize){r=r.normalize('NFKD');r=r.replace(/[\u0300-\u036f]/g,"");}}c.cRegExp=r;return c;});D(k.parsed,'word',function(w){w.containsWildcard=false;var f='';var s='';for(var i=0;i<w.children.length;i++){if(i>0&&w.children[i].cOriginal.match(v.AlphaNum_atBegin)&&w.children[i-1].cOriginal.match(v.AlphaNum_atBegin)){s+='[^a0]*';}if(i<w.children.length-1){f+=w.children[i].cRegExp;s+=w.children[i].cRegExp;}if(w.children[i].cOriginal==='*'||w.children[i].cOriginal==='?'){w.containsWildcard=true;}}var c=w.children[w.children.length-1];var x='';if(c.cOriginal==='*'){x='(?:[a]+(?=[^a]|$)|[0]+(?=[^0]|$)|[^\\s]*?|)';}else if(c.cOriginal==='?'){x='(?:[a](?=[^a]|$)|[0](?=[^0]|$)|[^\\sa0](?=[\\sa0]))';}else{x=c.cRegExp;}w.wRegExp=f+x;w.wRegExp2=s+x;return w;});var F=true;var G=k.parsed.map(function(s){var c=[];if(s.type==='phrase'){F=false;s.children=s.children.filter(function(y,i){return(i===s.children.length-1||s.children[i].wOriginal!=='*'||s.children[i+1].wOriginal!=='*')});s.children=s.children.filter(function(y,i){return((i!==0&&i!==s.children.length-1)||y.wOriginal!=='*');});if(!s.children.length){c.push({r:'^',score:g[0],applyHighlighting:false});}else{var f='';D(s.children,'word',function(w,i,x,y){if(w.wOriginal!=='*'){if(i!==0&&x.wOriginal!=='*'&&(!y||y.wOriginal!=='*')){if(!(x.wOriginal.match(v.Alpha_atEnd)&&w.wOriginal.match(v.Alpha_atBegin))&&!(x.wOriginal.match(v.Num_atEnd)&&w.wOriginal.match(v.Num_atEnd))){f+='[^a0]*';}else{f+='[^a0]+';}}f+=w.wRegExp;}else{if(t(x).match(v.Alpha_atBegin)&&m(y).match(v.Alpha_atBegin)){f+='(?:[^a]|[^a].*?[^a])';}else if(t(x).match(v.Num_atEnd)&&m(y).match(v.Num_atEnd)){f+='(?:[^0]|[^0].*?[^0])';}else if(t(x).match(v.Alpha_atBegin)&&m(y).match(v.Num_atEnd)){f+='.*?';}else if(t(x).match(v.Num_atEnd)&&m(y).match(v.Alpha_atBegin)){f+='.*?';}else if(t(x)==='*'&&y&&m(y).match(v.Alpha_atBegin)){f+='.*?';}else if(t(x)==='*'&&y&&m(y).match(v.Num_atEnd)){f+='.*?';}else{f+='(?:[^a0]|[^a0].*?[^a0])';}}});var z=s.children[s.children.length-1];c.push({r:'^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)('+f+')'+C(z.wOriginal)+'$',score:g[0],applyHighlighting:true});}}else if(s.type==='word'){if(s.wOriginal==='*'){F=false;c.push({r:'^',score:g[0],applyHighlighting:false});}else{c.push({r:'^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)('+s.wRegExp+')'+C(s.wOriginal)+'$',score:g[0],applyHighlighting:true});c.push({r:'^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)('+s.wRegExp2+')'+C(s.wOriginal)+'$',score:g[1],applyHighlighting:true});}}if(s.type==='word'&&s.containsWildcard===false){c.push({r:'^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)('+s.wRegExp+')(.*?)$',score:g[2],applyHighlighting:true});c.push({r:'^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)('+s.wRegExp2+')(.*?)$',score:g[3],applyHighlighting:true});}if(s.type==='word'&&s.containsWildcard===false){c.push({r:'^(.*)('+s.wRegExp+')(.*?)$',score:g[4],applyHighlighting:true});c.push({r:'^(.*)('+s.wRegExp2+')(.*?)$',score:g[5],applyHighlighting:true});}for(var i=0;i<c.length;i++){c[i].r=u(c[i].r,'i');}return{type:'mandatory',r:c};});if(F&&k.parsed.length>1){var r=[];k.parsed.forEach(function(s){r.push(s.wRegExp)});G.push({type:'optional',r:[{r:u('^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)'+r.join('\\s+'),'i'),score:g[6],applyHighlighting:false}]});}return G;},compileTestTerm:function(t){var b={original:'',normalizationMap:[],useNormalizationMap:false,normalized:''};b.original=t.normalize?t.normalize('NFC'):t;b.normalized=b.original.split('').map(function(r){r=r.replace(//i,'ae');r=r.replace(//i,'oe');r=r.replace(//i,'ue');r=r.replace(//i,'ss');r=r.replace(//i,'ae');r=r.replace(//i,'oe');if(r.normalize){r=r.normalize('NFKD');r=r.replace(/[\u0300-\u036f]/g,"");}b.normalizationMap.push(r.length);if(r.length!==1){b.useNormalizationMap=true;}return r;}).join('');return b;}}}[a];}function B(s,t){var a=true;var b=0;var c=0;var f=0;var g={};var m={};for(var j in t){g[j]=A.initBitmap(t[j].normalized);}for(var i=0;i<s.length;i++){var r=s[i];var w=false;var x=0;for(var j in t){var y=false;var z=false;var C=0;for(var k=0;k<r.r.length;k++){var D=r.r[k];if(t[j].normalized.match(D.r)){y=true;if(D.applyHighlighting){z=true;g[j]=A.calcBitmap(t[j].normalized,g[j],D.r);}C=Math.max(C,D.score*t[j].weight);}}x+=C;if(y){w=true;}if(z){m[j]=true;}}if(r.type==='mandatory'){f++;if(w){b+=x;}else{a=false;}}else{c+=x}}var E=b/f+c;if(!a){E=-1;}for(j in m){if(t[j].useNormalizationMap){for(var k=0;k<t[j].normalizationMap.length;k++){g[j]=g[j].substr(0,k+1)+g[j].substr(k+t[j].normalizationMap[k]);}}m[j]=A.applyBitmap(t[j].original,g[j]);}return{score:E,highlighted:m};}this.search=function(f){if(!Array.isArray(q)){throw new Error("You must specify objects to search in");}var s;if(typeof f==='string'){s=f;}if(f&&typeof f.searchFor==='string'){s=f.searchFor;}if(s===undefined){throw new Error("You must specify search terms");}var t=parseInt(f.top);var g=parseInt(f.skip);if(n!==s){var k=e.compileSearchTerm(s);p=[];for(var i=0;i<q.length;i++){var m={};var a;for(var j=0;j<h.length;j++){a=undefined;try{a=q[i][h[j].field];}finally{};if(typeof a==='string'){var c=e.compileTestTerm(a);c.weight=h[j].weight;m[h[j].field]=c;}}var b=B(k,m);if(b.score>-1){p.push({object:q[i],highlighted:b.highlighted,score:b.score});}}p=p.sort(function(a,b){return b.score-a.score;});if(!d.debug){p.forEach(function(a){delete a.score;});}n=s;}var r;if(isNaN(t)&&!isNaN(g)){r=p.slice(g);}else if(!isNaN(t)&&isNaN(g)){r=p.slice(0,t);}else if(!isNaN(t)&&!isNaN(g)){r=p.slice(g,g+t);}else{r=p;}return{totalCount:p.length,results:r};};};});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/appsearch/TransactionSearch',["sap/ushell/renderers/fiori2/search/SearchHelper"],function(S){"use strict";var T=function(){this.init.apply(this,arguments);};T.prototype={init:function(p){var t=this;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(c){t.corssAppNavigator=c;});},prefetch:function(){},search:function(q){var t=this;var r={totalCount:0,tiles:[]};t.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();var a=t.oModel.getProperty('/appSearchDataSource');if(a===null){return r;}var s=t.oModel.sinaNext.createSearchQuery();s.skip=q.skip;s.top=q.top;s.filter.searchTerm=t._normalizeSearchTerm(q.searchTerm);s.filter.dataSource=a;return S.convertPromiseTojQueryDeferred(t.oModel.sinaNext.provider.executeSearchQuery(s)).then(function(b){r.totalCount=b.totalCount;return jQuery.when.apply(null,jQuery.map(b.items,this._formatTileAsync.bind(this)));}.bind(this)).then(function(){r.tiles=[].slice.call(arguments);return r;});},_getView:function(t){var v=new sap.m.GenericTile({header:t.title,subheader:t.subtitle,tileContent:new sap.m.TileContent({content:new sap.m.ImageContent({src:t.icon}),footer:sap.ushell.resources.i18n.getText("transactionText")})});if(t.isUshellSupported===false&&t.url.length===0){v.attachPress(function(){sap.m.MessageBox.information(sap.ushell.resources.i18n.getText("NavigationUnsupported"),{actions:[sap.m.MessageBox.Action.OK]});});}else{v.attachPress(function(){S.openURL(t.url,"_target");});}v.eventLoggingData={targetUrl:t.url,title:t.title};return v;},_formatTileAsync:function(i){var t=this;var a={};var c=t._getTcode(i).value;var b=t._getTcode(i).valueHighlighted;var d=t._getTitle(i).value;var e=t._getTitle(i).valueHighlighted+" - "+b;var u=t._getUshellUrl(i);var f=t._getBackendUrl(i);a={type:"transaction",icon:"sap-icon://action",title:d,label:e,subtitle:c,isUshellSupported:false,url:"",getView:function(){return t._getView(this);}};return t.corssAppNavigator.isIntentSupported([u]).then(function(g){a.isUshellSupported=g[u].supported;if(a.isUshellSupported){a.url=u;}else{a.url=f;}return a;},function(g){a.url=f;return jQuery.resolve(a);});},_normalizeSearchTerm:function(s){if(s==="*"){return s;}var f="";s=s.replace('*',' ');var a=s.split(' ');a.forEach(function(e){e=" *"+e+"* ";f=f+e;});return f;},_getTitle:function(a){var b=a.detailAttributes;var t={value:"",valueHighlighted:""};for(var i=0;i<b.length;i++){if(b[i].id==="TTEXT"){t.value=b[i].value||sap.ushell.resources.i18n.getText("transactionText");t.valueHighlighted=b[i].valueHighlighted||t.value;break;}}return t;},_getTcode:function(a){var b=a.titleAttributes;var t={value:"",valueHighlighted:""};for(var i=0;i<b.length;i++){if(b[i].id==="TCODE"){t.value=b[i].value;t.valueHighlighted=b[i].valueHighlighted||t.value;break;}}return t;},_getUshellUrl:function(i){var t=this;var s="";var a="";if(this.oModel.sinaNext.provider.serverInfo){s="sap-system="+t.oModel.sinaNext.provider.serverInfo.SystemId;}if(t._getTcode(i)!==""){a="&sap-ui2-tcode="+t._getTcode(i).value;}return"#Shell-startGUI?"+s+a;},_getBackendUrl:function(i){var t=this;var u="";if(this.oModel.sinaNext.provider.serverInfo){var h=t.oModel.sinaNext.provider.serverInfo.URL;var p=t.oModel.sinaNext.provider.serverInfo.Port;var c=t.oModel.sinaNext.provider.serverInfo.Client;var a=t._getTcode(i).value;if(h&&p&&c&&a.length!==""){u=h+":"+p+"/sap/bc/gui/sap/its/webgui/?sap-client="+c+"&~transaction="+a;}}return u;}};return T;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/Component',['sap/ui/core/UIComponent'],function(U){"use strict";return U.extend("sap.ushell.renderers.fiori2.search.container.Component",{metadata:{version:"1.60.40",library:"sap.ushell.renderers.fiori2.search.container",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{title:sap.ushell.resources.i18n.getText("searchAppTitle"),compactContentDensity:true,cozyContentDensity:true}},createContent:function(){return sap.ui.view({id:"searchContainerApp",viewName:"sap.ushell.renderers.fiori2.search.container.App",type:sap.ui.core.mvc.ViewType.JS});}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/ComponentControl',['sap/ushell/renderers/fiori2/search/controls/SearchFieldGroup','sap/ushell/renderers/fiori2/search/controls/SearchFilterBar'],function(S,a){"use strict";var m=sap.ushell.renderers.fiori2.search.container.ComponentControl={};jQuery.extend(m,{init:function(){this.oSearchFieldGroup=new S("searchFieldInShell");this.oSearchResults=sap.ui.view({id:"searchContainerResultsView",viewName:"sap.ushell.renderers.fiori2.search.container.Search",type:sap.ui.core.mvc.ViewType.JS});this.oSearchBar=new sap.m.Bar({visible:{parts:[{path:'/count'},{path:'/facetVisibility'}],formatter:function(c,f){if(f){return c!==0;}else{return c!==0;}}},contentLeft:[this.oSearchResults.assembleFilterButton(),this.oSearchResults.assembleDataSourceTapStrips()],contentRight:this.oSearchResults.assembleSearchToolbar(true)});this.oSearchBar.addStyleClass('sapUshellSearchBar');this.oFilterBar=new sap.ushell.renderers.fiori2.search.controls.SearchFilterBar({visible:{parts:[{path:'/facetVisibility'},{path:'/uiFilter/rootCondition'}],formatter:function(f,r){if(!f&&r&&r.hasFilters()){return true;}else{return false;}}}});this.oSearchPage=new sap.m.Page({id:'searchPage',customHeader:this.oSearchBar,subHeader:this.oFilterBar,content:[this.oSearchResults],enableScrolling:true,showFooter:{parts:['/errors/length'],formatter:function(n){return n>0;}},showHeader:true,showSubHeader:{parts:[{path:'/facetVisibility'},{path:'/uiFilter/rootCondition'}],formatter:function(f,r){if(!f&&r&&r.hasFilters()){return true;}else{return false;}}}});},createFooter:function(p){var t=this;t.oModel=p.getModel();if(jQuery.device.is.phone){return;}var e=new sap.m.MessagePopover({placement:"Top"});e.setModel(t.oModel);e.bindAggregation("items","/errors",function(i,C){var b=new sap.m.MessagePopoverItem({title:"{title}",description:"{description}"});switch(C.oModel.getProperty(C.sPath).type.toLowerCase()){case"error":b.setType(sap.ui.core.MessageType.Error);break;case"warning":b.setType(sap.ui.core.MessageType.Warning);break;default:b.setType(sap.ui.core.MessageType.Information);}return b;});var E=new sap.m.Button("searchErrorButton",{icon:sap.ui.core.IconPool.getIconURI("alert"),text:{parts:[{path:'/errors/length'}],formatter:function(l){return l;}},visible:{parts:[{path:'/errors/length'}],formatter:function(l){return l>0;},mode:sap.ui.model.BindingMode.OneWay},type:sap.m.ButtonType.Emphasized,tooltip:sap.ushell.resources.i18n.getText('errorBtn'),press:function(){e.openBy(E);}});E.addDelegate({onAfterRendering:function(){if(!t.oModel.getProperty('/isErrorPopovered')){E.firePress();t.oModel.setProperty('/isErrorPopovered',true);}}});E.setLayoutData(new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow}));var c=[E];t.oBar=new sap.m.OverflowToolbar({content:c}).addStyleClass("MyBar");var f=p.getFooter();if(f&&f.destroy){f.destroy();}p.setFooter(t.oBar);}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/ComponentIndexScript',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.ComponentIndexScript');sap.ui.getCore().attachInit(function(){sap.ui.require(['sap/ushell/renderers/fiori2/search/container/ComponentService'],function(C){C.init();sap.ui.require(['sap/ushell/renderers/fiori2/search/personalization/PersonalizationStorage','sap/ushell/renderers/fiori2/search/SearchModel','sap/ushell/renderers/fiori2/search/container/ComponentControl'],function(P,S,a){P.getInstance();if(!this.oModel){this.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();}a.init();this.oSearchFieldGroup=a.oSearchFieldGroup;this.oSearchFieldGroup.setCancelButtonActive(false);this.oSearchFieldGroup.setModel(this.oModel);this.oSearchFieldGroup.addStyleClass('sapSearchFieldGroup');this.oSearchBar=new sap.ui.layout.HorizontalLayout();this.oSearchBar.addContent(this.oSearchFieldGroup);this.oSearchBar.addStyleClass('sapSearchBar');this.oSearchBar.placeAt("content","first");});});});var r=function(){if(window.location.hash.indexOf("#Action-search")===0){window.location.href=window.location.origin+window.location.pathname.slice(0,window.location.pathname.indexOf('/sap/ushell/renderers/fiori2/search/container/'))+"/sap/ushell/renderers/fiori2/search/container/Component.html"+window.location.search+window.location.hash;}};$(window).bind('hashchange',function(){r();});$(document).ready(function(){r();});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/ComponentScript',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.ComponentScript');if(!window.location.hash){window.location.hash="#Action-search&/searchterm=*";}sap.ui.getCore().attachInit(function(){sap.ui.require(['sap/ushell/renderers/fiori2/search/container/ComponentService'],function(C){C.init();sap.ui.require(['sap/ushell/renderers/fiori2/search/personalization/PersonalizationStorage','sap/ushell/renderers/fiori2/search/SearchModel','sap/ushell/renderers/fiori2/search/container/ComponentControl'],function(P,S,a){P.getInstance();if(!this.oModel){this.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();}this.oModel.searchUrlParser.parse().then(function(){a.init();this.oSearchFieldGroup=a.oSearchFieldGroup;this.oSearchFieldGroup.setCancelButtonActive(false);this.oSearchFieldGroup.setModel(this.oModel);this.oSearchFieldGroup.addStyleClass('sapSearchFieldGroup');this.oSearchFieldGroup.input.setValue(this.oModel.getSearchBoxTerm());this.oLogo=new sap.m.Image({src:'/logo.png',press:function(){window.location='index.html';}});this.oLogout=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("log"),press:function(){window.location='index.html';}}).addStyleClass('sapSearchLogout');this.oSearchBar=new sap.ui.layout.HorizontalLayout();this.oSearchBar.addContent(this.oLogo);this.oSearchBar.addContent(this.oSearchFieldGroup);this.oSearchBar.addContent(this.oLogout);this.oSearchBar.addStyleClass('sapSearchBar');this.oSearchBar.placeAt("content","first");this.oSearchPage=a.oSearchPage;this.oSearchPage.setModel(this.oModel);this.oSearchPage.setModel(sap.ushell.resources.i18nModel,"i18n");this.oSearchPage.placeAt("content","last");this.oSearchPage.addStyleClass('sapSearchPage');a.createFooter(this.oSearchPage);}.bind(this));});});});$(window).bind('hashchange',function(){if(this.oModel){this.oModel.parseURL();this.oSearchFieldGroup.input.setValue(this.oModel.getSearchBoxTerm());}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/ComponentService',["sap/ushell/renderers/fiori2/search/SearchConfiguration","jquery.sap.storage"],function(S){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.ComponentService');var m=sap.ushell.renderers.fiori2.search.container.ComponentService={};jQuery.extend(m,{init:function(){sap.ushell.Container={getService:function(n){if(n==="Search"){return{queryApplications:function(p){return jQuery.when().then(function(){return{totalResults:0,searchTerm:p.searchTerm,getElements:function(){return[];}};});}};}else if(n==="URLParsing"){return{parseParameters:function(s){s=s.substr(1);var r={};var p=s.split("&");for(var i=0;i<p.length;i++){var a=p[i].split("=");if(!a[1]){a[1]="";}r[a[0]]=[a[1]];}return r;},splitHash:function(h){var r={};r.appSpecificRoute=h.substr(14);return r;}};}},getLogonSystem:function(n){return{getName:function(){return;},getClient:function(){return;}};}};sap.ushell.resources={};sap.ushell.resources.i18nModel=new sap.ui.model.resource.ResourceModel({bundleUrl:"../../resources/resources.properties",bundleLocale:"en"});sap.ushell.resources.i18n=sap.ushell.resources.i18nModel.getResourceBundle();}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/CustomSearchResultListItem',['sap/ushell/renderers/fiori2/search/controls/SearchResultListItem','sap/ushell/renderers/fiori2/search/controls/CustomSearchResultListItemContent'],function(){"use strict";return sap.ushell.renderers.fiori2.search.controls.SearchResultListItem.extend("sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItem",{metadata:{properties:{content:{type:"sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItemContent"}}},init:function(){sap.ushell.renderers.fiori2.search.controls.SearchResultListItem.prototype.init.apply(this,arguments);},setupCustomContentControl:function(){var c=this.getContent();c.setTitle(this.getTitle());c.setTitleUrl(this.getTitleUrl());c.setType(this.getType());c.setImageUrl(this.getImageUrl());c.setAttributes(this.getAttributes());},renderer:function(r,c){c.setupCustomContentControl();sap.ushell.renderers.fiori2.search.controls.SearchResultListItemRenderer.render.apply(this,arguments);},onAfterRendering:function(){sap.ushell.renderers.fiori2.search.controls.SearchResultListItem.prototype.onAfterRendering.apply(this,arguments);this.getContent().getTitleVisibility();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/CustomSearchResultListItemContent',[],function(){"use strict";return sap.ui.base.ManagedObject.extend("sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItemContent",{metadata:{properties:{title:"string",titleUrl:"string",type:"string",imageUrl:"string",attributes:{type:"object",multiple:true},intents:{type:"object",multiple:true}}},init:function(){},getContent:function(){return undefined;},getTitleVisibility:function(){return true;}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/DivContainer',[],function(){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.DivContainer",{metadata:{properties:{"cssClass":"string"},aggregations:{"content":{singularName:"content",multiple:true}}},renderer:function(r,c){r.write('<div');r.writeControlData(c);r.addClass(c.getCssClass());r.writeClasses();r.write('>');var C=c.getContent();for(var i=0;i<C.length;i++){r.renderControl(C[i]);}r.write('</div>');}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchAdvancedCondition',['sap/ui/layout/HorizontalLayout','sap/ushell/renderers/fiori2/search/SearchFacetDialogHelper'],function(H,S){"use strict";return sap.ui.layout.HorizontalLayout.extend('sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition',{metadata:{properties:{"type":""}},constructor:function(o){var t=this;o=jQuery.extend({},{allowWrapping:true,content:t.contentFactory(o)},o);sap.ui.layout.HorizontalLayout.prototype.constructor.apply(this,[o]);t.addStyleClass('sapUshellSearchFacetDialogDetailPageCondition');},renderer:'sap.ui.layout.HorizontalLayoutRenderer',contentFactory:function(o){var t=this;var a=new sap.m.CheckBox({select:function(e){if(o.type==="string"||o.type==="text"){S.updateCountInfo(e.getSource().getParent().getParent().getParent().getParent().getParent().getParent());}else{S.updateCountInfo(e.getSource().getParent().getParent().getParent());}}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionCheckBox');var A=sap.ui.getCore().byId("advancedCheckBoxLabel");if(A){A=new sap.ui.core.InvisibleText("advancedCheckBoxLabel",{text:sap.ushell.resources.i18n.getText("checkBox")});}a.addAriaLabelledBy("advancedCheckBoxLabel");var O=sap.ui.getCore().byId("operatorLabel");if(!O){O=new sap.ui.core.InvisibleText("operatorLabel",{text:sap.ushell.resources.i18n.getText("operator")});}var i,b,I,s;switch(o.type){case'timestamp':case'date':i=new sap.m.DateRangeSelection({width:'86%',change:function(e){t.onDateRangeSelectionChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');i.onAfterRendering=function(){var e=$(this.getDomRef());$('input',e).attr('readonly','readonly');};break;case'string':a.setVisible(false);I=new sap.m.Input({width:'57%',placeholder:sap.ushell.resources.i18n.getText("filterCondition"),liveChange:function(e){t.onAdvancedInputChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');s=new sap.m.Select({width:'40%',tooltip:sap.ushell.resources.i18n.getText("operator"),items:[new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("equals"),key:'eq'}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("beginsWith"),key:'bw'}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("endsWith"),key:'ew'}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("contains"),key:'co'})]}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionSelect');s.addAriaLabelledBy("operatorLabel");i=new sap.ui.layout.HorizontalLayout({allowWrapping:true,content:[s,I]});b=new sap.m.Button({icon:"sap-icon://sys-cancel",type:sap.m.ButtonType.Transparent,tooltip:sap.ushell.resources.i18n.getText("removeButton"),press:function(e){t.onDeleteButtonPress(e);}});break;case'text':a.setVisible(false);I=new sap.m.Input({width:'57%',placeholder:sap.ushell.resources.i18n.getText("filterCondition"),liveChange:function(e){t.onAdvancedInputChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');s=new sap.m.Select({width:'40%',tooltip:sap.ushell.resources.i18n.getText("operator"),items:[new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("containsWords"),key:'co'})]}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionSelect');s.addAriaLabelledBy("operatorLabel");i=new sap.ui.layout.HorizontalLayout({allowWrapping:true,content:[s,I]});b=new sap.m.Button({icon:"sap-icon://sys-cancel",type:sap.m.ButtonType.Transparent,tooltip:sap.ushell.resources.i18n.getText("removeButton"),press:function(e){t.onDeleteButtonPress(e);}});break;case'number':var c=new sap.m.Input({width:'46.5%',placeholder:sap.ushell.resources.i18n.getText("fromPlaceholder"),liveChange:function(e){t.onAdvancedNumberInputChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');var d=new sap.m.Input({width:'46.5%',placeholder:sap.ushell.resources.i18n.getText("toPlaceholder"),liveChange:function(e){t.onAdvancedNumberInputChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');var l=new sap.m.Label({text:'...'}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionLabel');i=new sap.ui.layout.HorizontalLayout({allowWrapping:true,content:[c,l,d]});i.addEventDelegate({onAfterRendering:function(e){var f=e.srcControl.getParent().getParent().getContent().length;var g=e.srcControl.getParent().getParent().indexOfAggregation("content",e.srcControl.getParent());if(g===f-2){var v=e.srcControl.getContent()[2].getValue();e.srcControl.getContent()[2].setValue();e.srcControl.getContent()[2].setValue(v);}}});break;default:break;}return[a,i,b];},onDateRangeSelectionChange:function(e){var d=e.getSource();var a=d.getParent();var A=a.getContent()[0];if(d.getDateValue()&&d.getSecondDateValue()){A.setSelected(true);S.insertNewAdvancedCondition(a,"date");S.updateCountInfo(a.getParent().getParent());}else{A.setSelected(false);}},onAdvancedInputChange:function(e){var i=e.getSource();var a=i.getParent().getParent();var A=a.getContent()[0];if(i.getValue()){A.setSelected(true);S.updateCountInfo(a.getParent().getParent().getParent().getParent().getParent());}else{A.setSelected(false);}},onDeleteButtonPress:function(e){var a=e.getSource().getParent();S.deleteAdvancedCondition(a);},onAdvancedNumberInputChange:function(e){var i=e.getSource();var a=i.getParent().getParent();var A=a.getContent()[0];if(i.getParent().getContent()[0].getValue()&&i.getParent().getContent()[2].getValue()){A.setSelected(true);S.insertNewAdvancedCondition(a,"number");S.updateCountInfo(a.getParent().getParent());}else{A.setSelected(false);}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchButton',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/m/Button'],function(S){"use strict";
sap.m.Button.extend('sap.ushell.renderers.fiori2.search.controls.SearchButton',{
constructor:function(i,o){o=jQuery.extend({},{icon:sap.ui.core.IconPool.getIconURI("search"),tooltip:sap.ushell.resources.i18n.getText("search"),enabled:{parts:[{path:"/initializingObjSearch"}],formatter:function(a){return!S.isSearchAppActive()||!a;}}},o);sap.m.Button.prototype.constructor.apply(this,[i,o]);this.addStyleClass('searchBtn');},
renderer:'sap.m.ButtonRenderer'
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacet',['sap/ushell/renderers/fiori2/search/controls/SearchFacetItem','sap/m/List'],function(){"use strict";
sap.m.List.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacet',{
metadata:{properties:{eshRole:{type:"string",defaultValue:"datasource"}}},
init:function(){this.data("sap-ui-fastnavgroup","false",true);},
constructor:function(i,o){o=jQuery.extend({},{mode:sap.m.ListMode.SingleSelectMaster,showSeparators:sap.m.ListSeparators.None,includeItemInSelection:true,selectionChange:function(e){if(this.getEshRole()==="attribute"){this.handleItemPress(e);}},itemPress:function(e){if(this.getModel().config.searchScopeWithoutAll){return;}if(this.getEshRole()==="datasource"){this.handleItemPress(e);}}},o);sap.m.List.prototype.constructor.apply(this,[i,o]);this.addStyleClass('sapUshellSearchFacet');},
handleItemPress:function(e){var l=e.mParameters.listItem;var s=l.getBindingContext().getObject();if(l.getSelected()){this.getModel().addFilterCondition(s.filterCondition);this.getModel().eventLogger.logEvent({type:this.getModel().eventLogger.FACET_FILTER_ADD,referencedAttribute:s.facetAttribute,clickedValue:s.value,clickedPosition:l.getList().getItems().indexOf(l)});}else{this.getModel().removeFilterCondition(s.filterCondition);this.getModel().eventLogger.logEvent({type:this.getModel().eventLogger.FACET_FILTER_DEL,referencedAttribute:s.facetAttribute,clickedValue:s.value,clickedPosition:l.getList().getItems().indexOf(l)});}},
renderer:'sap.m.ListRenderer',
onAfterRendering:function(){var i=jQuery(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];if(i){var I=sap.ui.getCore().byId(i.id);I.setVisible(false);}},
setEshRole:function(r){var t=this;var i={path:"items",template:new sap.ushell.renderers.fiori2.search.controls.SearchFacetItem(),groupHeaderFactory:function(g){var a=new sap.m.GroupHeaderListItem({title:g.key,upperCase:false});if(t.getModel().config.charts){a.setVisible(false);}return a;}};switch(r.toLowerCase()){default:case"datasource":this.setMode(sap.m.ListMode.SingleSelectMaster);this.setHeaderText(sap.ushell.resources.i18n.getText("searchIn"));break;case"attribute":this.setMode(sap.m.ListMode.MultiSelect);this.setHeaderText("");break;}this.bindAggregation("items",i);this.setProperty("eshRole",r);return this;},
setModel:function(){return sap.m.List.prototype.setModel.apply(this,arguments);}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetBarChart',['sap/suite/ui/microchart/ComparisonMicroChart'],function(H){"use strict";
sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetBarChart',{
metadata:{properties:{lastUpdated:{type:"string"},aItems:{type:"object"}},aggregations:{'items':{type:'sap.suite.ui.microchart.ComparisonMicroChartData',multiple:true}}},
constructor:function(o){var t=this;t.options=o;sap.ui.core.Control.prototype.constructor.apply(this);this.bindAggregation('items','items',function(){var c=new sap.suite.ui.microchart.ComparisonMicroChartData({title:'{label}',value:'{value}',color:{path:'selected',formatter:function(v){var r=sap.m.ValueColor.Good;if(!v){r=sap.m.ValueColor.Neutral;}return r;}},displayValue:'{valueLabel}',press:function(e){var a=e.getSource().getBindingContext();var m=a.getModel();var d=a.getObject();var i=d.selected;var f=d.filterCondition;if(i){if(t.options.oSearchFacetDialog){t.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(e);}else{m.removeFilterCondition(f,true);}}else if(t.options.oSearchFacetDialog){t.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(e);}else{m.addFilterCondition(f,true);}}});return c;});},
renderer:function(r,c){r.write('<div');r.writeControlData(c);r.writeClasses();r.write('>');var C=new sap.suite.ui.microchart.ComparisonMicroChart({width:"90%",colorPalette:"",press:function(e){},tooltip:"",shrinkable:true});if(c.options.oSearchFacetDialog){C.setWidth("95%");C.addStyleClass("sapUshellSearchFacetBarChartLarge");}else{C.addStyleClass("sapUshellSearchFacetBarChart");}C.addEventDelegate({onAfterRendering:function(e){$('#'+this.sId).has('.Good').addClass("sapUshellSearchFacetBarChartSelected");}});var a=c.getItems();var b=c.getAItems();if(a.length===0&&b){a=b;}var m=0;for(var i=0;i<a.length;++i){var d=a[i];if(!c.options.oSearchFacetDialog){if(d.mProperties&&d.mProperties.value){C.addData(d);}else if(d.mProperties&&!d.mProperties.value){m++;}}else{C.addData(d);}}c.iMissingCnt=m;r.renderControl(C);r.write('</div>');},
onAfterRendering:function(){var t=this;var a=$(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];var I=sap.ui.getCore().byId(a.id);if(t.iMissingCnt>0){I.setVisible(true);var m=sap.ushell.resources.i18n.getText("infoZeileNumberMoreSelected",[t.iMissingCnt]);I.setText(m);}else{I.setVisible(false);}var A=$(".sapSuiteUiMicroChartPointer");for(var i=0;i<A.length;i++){var b=A[i];var s=b.title;if(s&&s.indexOf(":")===-1){b.title=s.replace(/( \d+) *$/,':$1');}}},
setEshRole:function(){}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetDialog',['sap/ushell/renderers/fiori2/search/SearchFacetDialogHelper','sap/ushell/renderers/fiori2/search/SearchFacetDialogHelperCharts','sap/ushell/renderers/fiori2/search/controls/SearchAdvancedCondition','sap/m/Dialog'],function(s,a){"use strict";
sap.m.Dialog.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog',{
constructor:function(o){var t=this;t.bShowCharts=true;t.bOldPieChart=true;if(jQuery.sap.getUriParameters().mParams.newpie&&jQuery.sap.getUriParameters().get("newpie")!=="false"){t.bOldPieChart=false;}t.chartOnDisplayIndex=o.selectedTabBarIndex;t.facetOnDisplayIndex=0;t.chartOnDisplayIndexByFilterArray=[];t.aItemsForBarChart=[];t.tabBarItems=o.tabBarItems;t.searchFacetDialogHelperCharts=a;if(!t.tabBarItems){a.setDummyTabBarItems(t);}o=jQuery.extend({},{showHeader:false,horizontalScrolling:false,verticalScrolling:false,contentHeight:'35rem',beginButton:new sap.m.Button({text:sap.ushell.resources.i18n.getText("okDialogBtn"),press:function(e){t.onOkClick(e);t.close();t.destroy();}}),endButton:new sap.m.Button({text:sap.ushell.resources.i18n.getText("cancelDialogBtn"),press:function(e){t.onCancelClick(e);t.close();t.destroy();}}),content:[t.createContainer()]},o);t.selectedAttribute=o.selectedAttribute?o.selectedAttribute:"";delete o.selectedAttribute;delete o.selectedTabBarIndex;delete o.tabBarItems;sap.m.Dialog.prototype.constructor.apply(this,[o]);s.init(t);a.init(t);t.addStyleClass('sapUshellSearchFacetDialog');},
renderer:'sap.m.DialogRenderer',
createContainer:function(){var t=this;t.oSplitContainer=new sap.m.SplitContainer({masterPages:t.createMasterPages()});t.oSplitContainer.bindAggregation("detailPages","/facetDialog",function(i,c){return t.createDetailPages(i,c);});t.oSplitContainer.addStyleClass('sapUshellSearchFacetDialogContainer');return t.oSplitContainer;},
createMasterPages:function(){var t=this;var f=new sap.m.List({mode:sap.m.ListMode.SingleSelectMaster,selectionChange:function(e){t.onMasterPageSelectionChange(e);}});f.addStyleClass('sapUshellSearchFacetDialogFacetList');f.bindAggregation("items","/facetDialog",function(i,c){var l=new sap.m.StandardListItem({title:"{title}",counter:"{count}"});return l;});var r=new sap.m.Button({icon:"sap-icon://clear-filter",tooltip:sap.ushell.resources.i18n.getText("resetFilterButton_tooltip"),type:'Transparent',enabled:false,press:function(e){t.resetAllFilters(e);}});r.addStyleClass("sapUshellSearchFacetDialogFilterResetButton");var m=new sap.m.Page({title:sap.ushell.resources.i18n.getText("filters"),headerContent:r,content:[f]}).addStyleClass('sapUshellSearchFacetDialogMasterContainer');m.addEventDelegate({onAfterRendering:function(e){if(t.selectedAttribute){for(var i=0;i<f.getItems().length;i++){var l=f.getItems()[i];var b=l.getBindingContext().getObject();if(t.selectedAttribute===b.dimension){f.setSelectedItem(l);t.facetOnDisplayIndex=i;t.chartOnDisplayIndexByFilterArray.push(t.chartOnDisplayIndex);}else{var n=0;var c=l.getBindingContext().getModel().oData.facets;for(var j=0;j<c.length;j++){if(c[j].chartIndex&&c[j].dimension===b.dimension&&!isNaN(c[j].chartIndex)){n=c[j].chartIndex;}}t.chartOnDisplayIndexByFilterArray.push(n);}}}if(!f.getSelectedItem()){f.setSelectedItem(f.getItems()[0]);}var S=f.getSelectedItem();s.updateDetailPage(S,null,true);t.resetEnabledForFilterResetButton();}});var M=[m];return M;},
resetAllFilters:function(e){var b=$(".sapUshellSearchFacetDialogSettingsContainer").find(".sapMCbBg.sapMCbHoverable.sapMCbMark");if(b.length===1){var i=b[0].parentNode.id;var c=sap.ui.getCore().byId(i);c.setSelected(false);c.setEnabled(false);}var m=this.getModel();m.aFilters=[];s.bResetFilterIsActive=true;var M=s.getFacetList();var f=M.getItems();for(var j=0;j<f.length;j++){f[j].setCounter(0);}this.resetAdvancedConditionFilters();s.resetChartQueryFilters();s.updateDetailPage(M.getSelectedItem());this.resetEnabledForFilterResetButton();s.bResetFilterIsActive=false;},
resetAdvancedConditionFilters:function(){var t=this;var A,c,n,b,p,C,j;var d=t.oSplitContainer.getDetailPages();for(var i=0;i<d.length;i++){var D=d[i];n=s.POS_ATTRIBUTE_LIST_CONTAINER;A=D.getContent()[n];if(A){for(j=A.getContent().length-2;j>0;j--){c=A.getContent()[j];p=c.getParent();C=c;p.removeContent(C);}}else{n=s.POS_ICONTABBAR;b=s.POS_TABBAR_CONDITION;A=D.getContent()[n].getItems()[b].getContent()[0];if(A){for(j=A.getContent().length-1;j>-1;j--){c=A.getContent()[j];if(c.getContent&&c.getContent()[1]){var e=c.getContent()[1].getContent()[1];var f=e.getValue();if(f&&(""+f).length>0){p=c.getParent();C=c;p.removeContent(C);}}}}}}},
resetEnabledForFilterResetButton:function(f){var F=false;var o=0;var m=s.getFacetList();var b=m.getItems();for(var i=0;i<b.length;i++){o+=b[i].getCounter();}var M=this.getModel();if(M.aFilters&&M.aFilters.length>0||f||o>0){F=true;}var c=$('.sapUshellSearchFacetDialogFilterResetButton')[0].id;var r=sap.ui.getCore().byId(c);r.setEnabled(F);},
onMasterPageSelectionChange:function(e){var t=this;var l=e.mParameters.listItem;t.facetOnDisplayIndex=l.getParent().indexOfItem(l.getParent().getSelectedItem());t.setChartOnDisplayIndexForFacetListItem(t.facetOnDisplayIndex);var m=l.getParent().getModel();var b=l.getBindingContext().sPath;t.resetIcons(m,b,t);s.updateDetailPage(l);if(t.oSplitContainer.getMode()==="ShowHideMode"){t.oSplitContainer.hideMaster();}t.controlChartVisibility(t,t.chartOnDisplayIndex);},
createDetailPages:function(i,c){var t=this;var f=c.oModel.getProperty(c.sPath).facetType;var d=c.oModel.getAttributeDataType(c.oModel.getProperty(c.sPath));var S=new sap.m.Select({items:[new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("notSorted"),key:"notSorted"}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("sortByCount"),key:"sortCount"}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("sortByName"),key:"sortName"})],selectedKey:(d==="string"||d==="text")?"sortCount":"notSorted",change:function(E){t.onSelectChange(E);}}).addStyleClass('sapUshellSearchFacetDialogSettingsSelect');var h=new sap.m.HBox({alignItems:sap.m.FlexAlignItems.End,justifyContent:sap.m.FlexJustifyContent.End,items:[S]});var C=new sap.m.CheckBox({text:sap.ushell.resources.i18n.getText("showSelectedOnTop"),enabled:false,select:function(E){t.onCheckBoxSelect(E);}});var o=new sap.m.VBox({items:[h,C]}).addStyleClass('sapUshellSearchFacetDialogSettingsContainer');o.setVisible(false);var l=new sap.m.List({backgroundDesign:sap.m.BackgroundDesign.Transparent,includeItemInSelection:true,showNoData:false,showSeparators:sap.m.ListSeparators.None,selectionChange:function(E){t.onDetailPageSelectionChange(E);}});l.addStyleClass('sapUshellSearchFacetDialogDetailPageList');l.addStyleClass('largeChart0');if(f==="attribute"){l.setMode(sap.m.ListMode.MultiSelect);}var b={path:"items",factory:function(i,c){var B=c.oModel.getProperty(c.sPath);var q=new sap.m.StandardListItem({title:"{label}",tooltip:sap.ushell.resources.i18n.getText("facetListTooltip",["{label}","{value}"]),info:"{valueLabel}",selected:"{selected}"});if(B.selected){c.oModel.addFilter(B);}return q;}};if(d==="number"){S.removeItem(2);}b.filters=new sap.ui.model.Filter("advanced",sap.ui.model.FilterOperator.NE,true);l.bindAggregation("items",b);l.setBusyIndicatorDelay(0);l.data('dataType',d);if(t.bShowCharts){l.addEventDelegate({onAfterRendering:function(E){t.hideSelectively(E,t,0);}});}var L,e,g;e=a.getBarChartPlaceholder();e.addEventDelegate({onAfterRendering:function(E){t.hideSelectively(E,t,1);}});e.data('dataType',d);if(t.bOldPieChart){g=a.getPieChartPlaceholder();}else{g={};}g.addEventDelegate({onAfterRendering:function(E){t.hideSelectively(E,t,2);}});if(t.bShowCharts&&(d==="string"||d==="text")){L=new sap.m.ScrollContainer({height:'67.2%',horizontal:false,vertical:true,content:[l,e,g]});}else{L=new sap.m.ScrollContainer({height:'calc(100% - 0.25rem)',horizontal:false,vertical:true,content:[l]});}L.addStyleClass('sapUshellSearchFacetDialogDetailPageListContainer');L.addStyleClass('searchFacetLargeChartContainer');var A=new sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition({type:d});var p;if(d==="string"||d==="text"){var j=new sap.m.ScrollContainer({horizontal:false,vertical:true,content:[A]});j.addStyleClass('sapUshellSearchFacetDialogDetailPageAdvancedContainer');var P=new sap.m.Button({icon:"sap-icon://add",type:sap.m.ButtonType.Transparent,press:function(E){t.onPlusButtonPress(E,d);}});j.addContent(P);j.data('dataType',d);j.data('initial',true);L.setHeight('calc(100% - 0.25rem)');j.setHeight('100%');var k=a.getDropDownButton(t);var m=new sap.m.Toolbar({content:[new sap.m.SearchField({placeholder:sap.ushell.resources.i18n.getText("filterPlaceholder"),liveChange:function(E){t.onSearchFieldLiveChange(E);}}),new sap.m.ToggleButton({icon:"sap-icon://sort",press:function(E){t.onSettingButtonPress(E);}}).addStyleClass('sapUshellSearchFacetDialogSortButton')]}).addStyleClass('sapUshellSearchFacetDialogSubheaderToolbar');m.addEventDelegate({onAfterRendering:function(E){$('.sapUshellSearchFacetDialogSubheaderToolbar').removeClass("sapContrastPlus");}});if(t.bShowCharts){m.addContent(k);}var T=new sap.m.Page({showHeader:false,subHeader:m,content:[o,L]}).addStyleClass('sapUshellSearchFacetDialogDetailPage');var I=new sap.m.IconTabBar({expandable:false,stretchContentHeight:true,backgroundDesign:sap.m.BackgroundDesign.Transparent,applyContentPadding:false,select:function(E){t.controlChartVisibility(t,t.chartOnDisplayIndex);},items:[new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("selectFromList"),content:[T]}),new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("defineCondition"),content:[j]})]});I.addStyleClass('sapUshellSearchFacetDialogIconTabBar');p=new sap.m.Page({showHeader:true,title:c.oModel.getProperty(c.sPath).title,content:[I]});p.addStyleClass('sapUshellSearchFacetDialogDetailPageString');}else{L.addContent(A);L.data('dataType',d);L.data('initial',true);if(t.bShowCharts){var n=c.oModel.getProperty(c.sPath).title;p=new sap.m.Page({title:n,showHeader:true,content:[o,L]});}else{p=new sap.m.Page({showHeader:true,title:c.oModel.getProperty(c.sPath).title,content:[o,L]});}p.addStyleClass('sapUshellSearchFacetDialogDetailPage');}p.addEventDelegate({onAfterRendering:function(E){t.controlChartVisibility(t,t.chartOnDisplayIndex);}});return p;},
onDetailPageSelectionChange:function(e){var t=this;var S=e.mParameters.listItem;var b=S.getBindingContext().getObject();if(S.getSelected()){b.listed=true;t.getModel().addFilter(b);}else{b.listed=false;t.getModel().removeFilter(b);}var l=e.oSource;var d;if(l.data('dataType')==="string"||l.data('dataType')==="text"){d=l.getParent().getParent().getParent().getParent().getParent().getParent();}else{d=l.getParent().getParent();}s.updateCountInfo(d);var o=l.getParent().getParent().getContent()[s.POS_SETTING_CONTAINER];var c=o.getItems()[s.POS_SHOWONTOP_CHECKBOX];var f=o.getItems()[s.POS_SORTING_SELECT].getItems()[0];if(c.getSelected()){c.setSelected(false);f.setSelectedKey("notSorted");}if(l.getSelectedContexts().length>0){c.setEnabled(true);}else{c.setEnabled(false);}},
onSearchFieldLiveChange:function(e){var f=e.getSource().getValue();var S=s.getFacetList().getSelectedItem();s.updateDetailPage(S,f);},
onSettingButtonPress:function(e){var p=e.oSource.getPressed();var S=e.oSource.getParent().getParent().getContent()[s.POS_SETTING_CONTAINER];var l=e.oSource.getParent().getParent().getContent()[s.POS_ATTRIBUTE_LIST_CONTAINER];if(p){S.setVisible(true);l.setHeight('calc(100% - 4.25rem)');}else{S.setVisible(false);l.setHeight('calc(100% - 0.25rem)');}},
onSelectChange:function(e){s.sortingAttributeList(e.oSource.getParent().getParent().getParent());},
onCheckBoxSelect:function(e){s.sortingAttributeList(e.oSource.getParent().getParent());},
onPlusButtonPress:function(e,t){var A=e.getSource().getParent();var n=new sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition({type:t});var i=A.getAggregation("content").length-1;A.insertAggregation("content",n,i);},
onOkClick:function(e){var t=this;var M=t.getModel();var S=t.getModel('searchModel');S.resetFilterConditions(false);var d=t.oSplitContainer.getDetailPages();for(var m=0;m<M.aFilters.length;m++){var b=M.aFilters[m];if(!b.advanced||b.listed){S.addFilterCondition(b.filterCondition,false);}}for(var i=0;i<d.length;i++){if(s.getFacetList().getItems()[i]){s.applyAdvancedCondition(d[i],s.getFacetList().getItems()[i].getBindingContext().getObject(),S);}}S.filterChanged=true;S._firePerspectiveQuery();S.eventLogger.logEvent({type:S.eventLogger.FACET_SHOW_MORE_CLOSE});},
onCancelClick:function(e){var S=this.getModel('searchModel');S.eventLogger.logEvent({type:S.eventLogger.FACET_SHOW_MORE_CLOSE});},
setChartOnDisplayIndexForFacetListItem:function(f){var t=this;var r=0;try{r=t.chartOnDisplayIndexByFilterArray[f];}catch(e){r=0;}if(r===undefined){r=0;}t.chartOnDisplayIndex=r;},
resetIcons:function(m,p,c){var t=this;var b=false;var d=m.getAttributeDataType(m.getProperty(p));if(t.bShowCharts&&(d==="string"||d==="text")){b=true;}var e=$('.sapUshellSearchFacetDialogTabBarButton');if(b){e.css("display","block");for(var i=0;i<e.length;i++){var f=e[i].id;var D=sap.ui.getCore().byId(f);var g=c.tabBarItems[c.chartOnDisplayIndex].getIcon();D.setIcon(g);var h=c.tabBarItems[c.chartOnDisplayIndex].getText();var j=sap.ushell.resources.i18n.getText('displayAs',[h]);D.setTooltip(j);}}else{e.css("display","none");}},
onDetailPageSelectionChangeCharts:function(e){var t=this;var c=0;var b,m,d,f,g,S,h,B,p,M;var k,j,l,n,i,o;if(e.getSource&&e.sId==="press"){b=e.getSource().getBindingContext();m=b.getModel();d=b.getObject();f=d.selected;g=f?false:true;S=e.getSource();h=S.getBindingContext().sPath+"/selected";m.setProperty(h,g);B=S.getBindingContext().getObject();if(g){m.addFilter(B);}else{m.removeFilter(B);}p=h.replace(/\/items.+/,'');p+="/items";l=m.getProperty(p);c=0;for(i=0;i<l.length;i++){n=l[i];if(n.selected===true){c++;}}}else if(e.getSource&&(e.sId==="selectData"||e.sId==="deselectData")){b=e.getSource().getBindingContext();m=b.getModel();d=b.getObject();g=(e.sId==="selectData")?true:false;S=e.getSource();h=S.getBindingContext().sPath+"/items/";for(j=0;j<e.getParameters().data.length;j++){k=e.getParameters().data[j].data._context_row_number;h+=k+"/selected";m.setProperty(h,g);B=S.getBindingContext().getObject().items[k];if(g){m.addFilter(B);}else{m.removeFilter(B);}}p=h.replace(/\/items.+/,'');p+="/items";l=m.getProperty(p);c=0;for(i=0;i<l.length;i++){if(l[i].selected===true){c++;}}var q=e.mParameters.data.length;if(!g&&q>1){c=0;for(i=0;i<l.length;i++){l[i].selected=false;}}}else{d=e.dataObject;f=d.selected;g=f?false:true;c=e.cnt;m=e.model;B=new sap.ushell.renderers.fiori2.search.FacetItem();B.facetAttribute=d.dimension;B.filterCondition=d.filterCondition;B.label=d.label;B.selected=d.selected;B.listed=d.selected;B.value=d.value;B.valueLabel=d.valueLabel;for(j=0;j<t.aItemsForBarChart.length;j++){var r=t.aItemsForBarChart[j];if(r.label===d.label){r.selected=d.selected;}}if(f){t.getModel().addFilter(B);}else{t.getModel().removeFilter(B);}}M=s.getFacetList();o=M.getSelectedItem();if(!o){o=M.getItems()[0];}o.setCounter(c);this.resetEnabledForFilterResetButton();},
updateDetailPageCharts:function(i,m){var t=this;if(t.bShowCharts===false){return;}t.aItemsForBarChart=i;var l=a.getListContainersForDetailPage();var L=l[1];var c=L.getContent();if(c&&t.chartOnDisplayIndex===2){var p=c[2];var e=l[5];var r=l[2];r=0.9*r;if(p.directUpdate){var b={};b.relevantContainerHeight=r;b.oSearchFacetDialog=t;var M=new sap.ui.model.json.JSONModel();M.setData(i);$("#"+e.id).empty();p.directUpdate(i,e,M,b);}}var d,f;if(c&&t.chartOnDisplayIndex===1){d=c[2].getDomRef();if(d){f=$("#"+d.id);f.css("display","none");}}if(c&&t.chartOnDisplayIndex===2){d=c[1].getDomRef();if(d){f=$("#"+d.id);f.css("display","none");}}},
controlChartVisibility:function(c,b,f){var t=this;var e,d,g,h;if(t.bShowCharts===false){return;}var l=c.searchFacetDialogHelperCharts.getListContainersForDetailPage();var L=l[1];if(!L||!L.getContent){return;}var j=L.getContent();for(var i=0;i<j.length;i++){e=j[i].getDomRef();if(!e){return;}g=e.className;h=false;if(g.indexOf("largeChart")>-1){h=true;}d=$("#"+e.id);if(h&&i!==b){d.css("display","none");}else{d.css("display","block");}}if(c.bOldPieChart){if(h&&b===2&&f){var I=t.aItemsForBarChart;var m=t.getModel();t.updateDetailPageCharts(I,m);}if(h&&b===2){L.setVertical(false);}else{L.setVertical(true);}}var S=l[6];var o=l[7];if(S){if(b===0){S.css("display","block");o.css('visibility','visible');}else{S.css("display","none");o.css('visibility','hidden');}}},
hideSelectively:function(e,c,b){var d=$("#"+e.srcControl.sId);var f=c.chartOnDisplayIndex;var l=c.searchFacetDialogHelperCharts.getListContainersForDetailPage();var L=l[1];if(l[0].firstChild.children.length!=3){return;}if(f!==undefined){if(c.chartOnDisplayIndex!==b){d.css("display","none");}else{d.css("display","block");}}else{d.css("display","block");}if(f===2){if(!l[0].firstChild.children[2]||!l[0].firstChild.children[2].firstChild){c.controlChartVisibility(c,c.chartOnDisplayIndex,true);}if(c.bOldPieChart){L.setVertical(false);}}else{L.setVertical(true);}var S=l[6];if(S){var g=$("#"+S.sId);if(f===0){g.css("display","block");}else{g.css("display","none");}}}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetFilter',["sap/ushell/renderers/fiori2/search/controls/SearchFacet","sap/ushell/renderers/fiori2/search/controls/SearchFacetTabBar","sap/ushell/renderers/fiori2/search/controls/SearchFacetBarChart","sap/ushell/renderers/fiori2/search/controls/SearchFacetPieChart","sap/ushell/renderers/fiori2/search/controls/SearchFacetDialog","sap/ushell/renderers/fiori2/search/SearchFacetDialogModel"],function(){"use strict";
sap.ushell.renderers.fiori2.search.controls.SearchFacetTabBar.extend('my.IconTabBar',{
renderer:'sap.ushell.renderers.fiori2.search.controls.SearchFacetTabBarRenderer',
setEshRole:function(){var a=this.getItems();for(var i=0;i<a.length;++i){var b=a[i];var f=b.getContent()[0];f.setEshRole.apply(f,arguments);}},
getEshRole:function(){var i=this.getItems();var a=i[0];var f=a.getContent()[0];return f.getEshRole.apply(f,arguments);},
attachSelectionChange:function(){}
});
return sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter',{metadata:{properties:{title:"string"},aggregations:{"facets":{multiple:true}}},init:function(){this.data("sap-ui-fastnavgroup","true",true);},constructor:function(o){var t=this;o=jQuery.extend({},{},o);sap.ui.core.Control.prototype.constructor.apply(this,[o]);this.bindAggregation('facets','/facets',function(){if(t.getModel().config.charts){if(arguments[1].sPath!=="/facets/0"){var b={};b.id='barChart'+arguments[0];var i=new my.IconTabBar({items:[new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetList"),icon:"sap-icon://list",key:'list'+arguments[0],content:new sap.ushell.renderers.fiori2.search.controls.SearchFacet('list'+arguments[0])}),new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetBarChart"),icon:"sap-icon://horizontal-bar-chart",key:'barChart'+arguments[0],content:new sap.ushell.renderers.fiori2.search.controls.SearchFacetBarChart(b)}),new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetPieChart"),icon:"sap-icon://pie-chart",key:'pieChart'+arguments[0],content:new sap.ushell.renderers.fiori2.search.controls.SearchFacetPieChart('pieChart'+arguments[0])})]});i.addStyleClass("sapUshellSearchFacetIconTabBar");return i;}else{return new sap.ushell.renderers.fiori2.search.controls.SearchFacet(arguments[0]);}}else{return new sap.ushell.renderers.fiori2.search.controls.SearchFacet(arguments[0]);}});},fireReset:function(){this.getModel().resetFilterConditions(false);this.getModel().setDataSource(this.getModel().allDataSource,true);},renderer:function(r,c){var a=function(d){return function(e){var f=sap.ui.getCore().byId($($(this.getDomRef()).closest(".sapUshellSearchFacet")[0]).attr("id"));var F=new sap.ushell.renderers.fiori2.search.SearchFacetDialogModel(c.getModel());F.initBusinessObjSearch().then(function(){F.setData(c.getModel().getData());F.sinaNext=c.getModel().sinaNext;F.prepareFacetList();var d=null;if(f&&f.getBindingContext()&&f.getBindingContext().getObject()&&f.getBindingContext().getObject().dimension){d=f.getBindingContext().getObject().dimension;}var D=new sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog({selectedAttribute:d});D.setModel(F);D.setModel(c.getModel(),'searchModel');D.open();var p=c.getParent().getParent().getParent().getParent();p.oFacetDialog=D;c.getModel().eventLogger.logEvent({type:c.getModel().eventLogger.FACET_SHOW_MORE});});};};r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchFacetFilter");r.writeClasses();r.write('>');for(var i=0,l=c.getFacets().length;i<l;i++){var f=c.getFacets()[i];if(i===0){f.setEshRole("datasource");}else{f.setEshRole("attribute");f.attachSelectionChange(null,function(){jQuery(c.showAllBtn.getDomRef()).hide();});if(i===1){f.setHeaderText(sap.ushell.resources.i18n.getText("filterBy"));}var s=new sap.m.Link({text:"{i18n>showMore}",press:a(),visible:{parts:[{path:'/uiFilter/dataSource'}],formatter:function(d){return d.type!==this.getModel().sinaNext.DataSourceType.Category;}}});s.setModel(c.getModel());if(!c.getModel().config.charts){var b=new sap.m.CustomListItem({content:s});b.addStyleClass('sapUshellSearchFacetShowMoreLink');b.addEventDelegate({onAfterRendering:function(e){var d=jQuery(jQuery(e.srcControl.getDomRef()).find(".sapMLIBSelectM:first"));d.remove();}});f.addItem(b);}}r.renderControl(f);}if(c.getFacets().length>1||(c.getModel().getDataSource()&&c.getModel().getDataSource().type==='BusinessObject')){r.write("<div>");c.showAllBtn=new sap.m.Button({text:"{showAllFilters}",press:a(),visible:false});c.showAllBtn.setModel(c.getModel("i18n"));c.showAllBtn.addStyleClass("sapUshellSearchFacetFilterShowAllFilterBtn");r.renderControl(c.showAllBtn);r.write("</div>");}r.write("</div>");},onAfterRendering:function(){if(this.getModel().getProperty('/count')>0){if((this.showAllBtn&&this.getFacets().length>1)&&!this.getModel().isOtherCategory()&&!this.getModel().isAllCategory()&&!this.getModel().isAppCategory()){this.showAllBtn.setVisible(true);this.showAllBtn.rerender();}}var a=$('.searchFacetFilter .searchFacet').first().find('ul');var b=a.find('li');a.attr('role','tree');b.attr('role','treeitem');}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetItem',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ui/core/format/NumberFormat','sap/m/StandardListItem'],function(S){"use strict";return sap.m.StandardListItem.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetItem',{constructor:function(i,o){var t=this;t.options=jQuery.extend({},{type:sap.m.ListType.Active,title:"{label}",tooltip:"{label}"+": "+"{valueLabel}",info:{parts:[{path:'value'}],formatter:function(v){return typeof v==="number"?S.formatInteger(v):"";}},selected:"{selected}"},o);sap.m.StandardListItem.prototype.constructor.apply(this,[i,t.options]);this.addStyleClass('sapUshellSearchFacetItem');this.addEventDelegate({onAfterRendering:function(){if(t.getBindingContext()&&t.getBindingContext().getObject()){var l=t.getBindingContext().getObject().level;if(jQuery("html").attr("dir")==='rtl'){jQuery(t.getDomRef()).children(".sapMLIBContent").css("padding-right",l+"rem");}else{jQuery(t.getDomRef()).children(".sapMLIBContent").css("padding-left",l+"rem");}}}});},renderer:'sap.m.StandardListItemRenderer'});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetPieChart',['sap/ui/thirdparty/d3'],function(){"use strict";
sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetPieChart',{
setEshRole:function(r){},
metadata:{properties:{oSearchFacetDialog:{}},aggregations:{items:{type:"sap.ushell.renderers.fiori2.search.FacetItem",multiple:true}}},
renderer:function(R,C){R.write("<div");R.writeControlData(C);R.writeClasses();R.write('>');var f=function(){if(navigator.appName==='Microsoft Internet Explorer'){return true;}return false;};var P=function(){this.init.apply(this,arguments);};P.Labelposition=(function(){var a=function(){this.init.apply(this,arguments);};a.prototype={init:function(b,c,s,e,r,d,g,h,t,i){this.backgroundWidth=b;this.backgroundHeight=c;this.startAngle=s;this.endAngle=e;this.r=r;this.labelPaddingX=3;this.labelPaddingY=3;this.radiusPadding=4.24;this.labelWidth=d+2*this.labelPaddingX;this.labelHeight=g;this.outsetMin=0.3;this.outsetMax=1.2;this.outsetStep=0.025;this.apexAngle=e-s;this.startLabelWidth=this.labelWidth;this.d3centroid=h;this.text=t;this.svgBackground=i;this.debug=false;this.labelHeight=this.labelHeight+2*this.labelPaddingY;var x=Math.round(this.backgroundWidth/2);var y=Math.round(this.backgroundHeight/2);this.translateStr="translate("+x+","+y+")";},update:function(){var o=Math.max(this.outsetMin,Math.sin(this.apexAngle/2)/(this.apexAngle/2)*2/3);var p=true;var i=Math.max(100,this.labelWidth*2,1/this.outsetStep);var b=0;var c;do{p=true;c=this.calc(o,this.labelWidth,this.labelHeight);if(o>this.outsetMax||o<this.outsetMin){break;}if(this.labelWidth<0){break;}var d,e,g,h;if(b===0){d=this.calc(o+this.outsetStep,this.labelWidth,this.labelHeight);e=this.calc(o-this.outsetStep,this.labelWidth,this.labelHeight);g=this.value(d,c);h=this.value(e,c);if(g<h&&h>0.5){b=-1;o+=this.outsetStep*b;p=false;}else if(g>0.5||c.labelWidth<=0){b=1;o+=this.outsetStep*b;p=false;}}else{d=this.calc(o+this.outsetStep*b,this.labelWidth,this.labelHeight);g=this.value(d,c);if(g>0.5||c.labelWidth<=0){o+=this.outsetStep*b;p=false;}}i--;}while(!p&&i>0&&!isNaN(o));c=this.calc(o,this.labelWidth,this.labelHeight);this.labelWidth=c.labelWidth;var x=c.x;var y=c.y;this.svgBackground.select("circle.centroid").remove();if(this.debug){this.svgBackground.append("svg:circle").attr("class","centroid").attr("cx",c.centroidX).attr("cy",c.centroidY).attr("r",2).style("fill","blue");}this.svgBackground.selectAll("line.helper").remove();if(this.debug){this.svgBackground.append("svg:line").attr("class","helper helper2").attr("x1",-this.backgroundWidth/2).attr("x2",this.backgroundWidth/2).attr("y1",y-this.labelHeight/2).attr("y2",y-this.labelHeight/2);this.svgBackground.append("svg:line").attr("class","helper helper2").attr("x1",-this.backgroundWidth/2).attr("x2",this.backgroundWidth/2).attr("y1",y+this.labelHeight/2).attr("y2",y+this.labelHeight/2);this.svgBackground.append("svg:line").attr("class","helper").attr("x1",0).attr("y1",0).attr("x2",Math.sin(this.startAngle)*(this.r+this.radiusPadding)).attr("y2",-Math.cos(this.startAngle)*(this.r+this.radiusPadding));this.svgBackground.append("svg:line").attr("class","helper").attr("x1",0).attr("y1",0).attr("x2",Math.sin(this.endAngle)*(this.r+this.radiusPadding)).attr("y2",-Math.cos(this.endAngle)*(this.r+this.radiusPadding));this.svgBackground.append("svg:line").attr("class","helper").attr("x1",Math.sin(this.startAngle)*(this.r+this.radiusPadding)).attr("y1",-Math.cos(this.startAngle)*(this.r+this.radiusPadding)).attr("x2",this.isStartAngleOnRight()?this.backgroundWidth/2:-this.backgroundWidth/2).attr("y2",-Math.cos(this.startAngle)*(this.r+this.radiusPadding));this.svgBackground.append("svg:line").attr("class","helper").attr("x1",Math.sin(this.endAngle)*(this.r+this.radiusPadding)).attr("y1",-Math.cos(this.endAngle)*(this.r+this.radiusPadding)).attr("x2",this.isEndAngleOnRight()?this.backgroundWidth/2:-this.backgroundWidth/2).attr("y2",-Math.cos(this.endAngle)*(this.r+this.radiusPadding));}if(this.labelWidth<2*this.labelPaddingX){this.labelWidth=0;}else if(this.labelWidth<this.startLabelWidth){this.labelWidth=this.labelWidth-2*this.labelPaddingX;}this.x=(isNaN(x))?0:(x);this.y=(isNaN(x))?0:(y);},calc:function(o,b,c){var d,e,g,r,p,h;if(this.startAngle-this.endAngle+2*Math.PI<1e-9){d=0;e=0;r=this.backgroundWidth/2;g=-this.backgroundWidth/2;h=-this.r;p=this.r;}else{d=Math.sin(this.apexAngle/2)*this.r*o;e=Math.cos(this.apexAngle/2)*-this.r*o;var t=d*Math.cos(this.startAngle)-e*Math.sin(this.startAngle);e=d*Math.sin(this.startAngle)+e*Math.cos(this.startAngle);d=t;var u=e-this.labelHeight/2;var i=e+this.labelHeight/2;g=Math.max(this.calcLeftBorder(d,u),this.calcLeftBorder(d,i),-this.backgroundWidth/2);if(Math.abs(this.startAngle-this.endAngle%(2*Math.PI))>1e-9&&d>0&&u<=0&&i>=0){g=Math.max(g,0);}if(!this.doesFitHeight(g,u,i,(d<0),true)){g=this.backgroundWidth/2;}r=Math.min(this.calcRightBorder(d,u),this.calcRightBorder(d,i),this.backgroundWidth/2);if(Math.abs(this.startAngle-this.endAngle%(2*Math.PI))>1e-9&&d<0&&u<=0&&i>=0){r=Math.min(r,0);}if(!this.doesFitHeight(r,u,i,(d<0),false)){r=-this.backgroundWidth/2;}var j=this.calcPerimeterBorder(1,e-this.labelHeight/2);if(j<d){j=this.backgroundWidth/2;}var k=this.calcPerimeterBorder(1,e+this.labelHeight/2);if(k<d){k=this.backgroundWidth/2;}p=Math.min(j,k,r);var m=this.calcPerimeterBorder(-1,e-this.labelHeight/2);if(m>d){m=-this.backgroundWidth/2;}var n=this.calcPerimeterBorder(-1,e+this.labelHeight/2);if(n>d){n=-this.backgroundWidth/2;}h=Math.max(m,n,g);if(isNaN(p)){p=r;}if(isNaN(h)){h=g;}}this.svgBackground.select("line.left").remove();this.svgBackground.select("line.right").remove();this.svgBackground.select("line.perimeterLeft").remove();this.svgBackground.select("line.perimeterRight").remove();if(this.debug){this.svgBackground.append("svg:line").attr("class","left").attr("y1",-this.backgroundHeight/2).attr("y2",this.backgroundHeight/2).attr("x1",g).attr("x2",g);this.svgBackground.append("svg:line").attr("class","right").attr("y1",-this.backgroundHeight/2).attr("y2",this.backgroundHeight/2).attr("x1",r).attr("x2",r);this.svgBackground.append("svg:line").attr("class","perimeterLeft").attr("y1",-this.backgroundHeight/2).attr("y2",this.backgroundHeight/2).attr("x1",h).attr("x2",h);this.svgBackground.append("svg:line").attr("class","perimeterRight").attr("y1",-this.backgroundHeight/2).attr("y2",this.backgroundHeight/2).attr("x1",p).attr("x2",p);}var q=b;b=Math.min(b,Math.floor(r-g));var x=d;x=Math.max(x,h+b/2);x=Math.min(x,p-b/2);if(x-b/2<h-1e-9||x+b/2>p+1e-9){x=(h+p)/2;}if(d>=0){x=Math.max(x,g+b/2);x=Math.min(x,r-b/2);}else{x=Math.min(x,r-b/2);x=Math.max(x,g-b/2);}var y=e;return{x:x,y:y,labelWidth:b,labelShortened:(b!==q),xSpace:r-g,centroidX:d,centroidY:e,asymmetry:Math.abs(x-d)};},value:function(c,b){if(c.labelWidth<0){return-10000;}if(c.labelWidth<b.labelWidth){return-100;}if(c.labelWidth>b.labelWidth){return(c.labelWidth-b.labelWidth)*1000;}if(b.labelShortened&&c.labelWidth===b.labelWidth){return(c.xSpace-b.xSpace)*100;}return 0;},doesFitHeight:function(b,u,c,i,d){var y=-Math.cos(this.startAngle)*(this.r+this.radiusPadding);var e=-Math.cos(this.endAngle)*(this.r+this.radiusPadding);if(Math.abs(this.startAngle-this.endAngle%(2*Math.PI))<1e-9){y=-this.backgroundHeight/2;e=this.backgroundHeight/2;}else if(b===0){y=-this.backgroundHeight/2;e=this.backgroundHeight/2;}else if(b>0){if(!this.isStartAngleOnRight()){y=-this.backgroundHeight/2;}else if(b<=Math.sin(this.startAngle)*(this.r+this.radiusPadding)){y=b/-Math.tan(this.startAngle);}if(!this.isEndAngleOnRight()){e=this.backgroundHeight/2;}else if(b<=Math.sin(this.endAngle)*(this.r+this.radiusPadding)){e=b/-Math.tan(this.endAngle);}if(i&&!d&&y>=c){y=-this.backgroundHeight/2;}if(i&&!d&&e<=u){e=this.backgroundHeight/2;}}else{if(this.isStartAngleOnRight()){y=this.backgroundHeight/2;}else if(b>Math.sin(this.startAngle)*(this.r+this.radiusPadding)){y=b/-Math.tan(this.startAngle);}if(this.isEndAngleOnRight()){e=-this.backgroundHeight/2;}else if(b>Math.sin(this.endAngle)*(this.r+this.radiusPadding)){e=b/-Math.tan(this.endAngle);}if(!i&&d&&e>=c){e=-this.backgroundHeight/2;}if(!i&&d&&y<=u){y=this.backgroundHeight/2;}}if(!d){this.svgBackground.selectAll(".rightBorder").remove();if(this.debug){this.svgBackground.append("svg:rect").attr("class","rightBorder").attr("x",b-3).attr("y",y-3).attr("width",6).attr("height",6).style("fill","green");this.svgBackground.append("svg:circle").attr("class","rightBorder").attr("cx",b).attr("cy",e).attr("this.r",3).style("fill","green");}}else{this.svgBackground.selectAll(".leftBorder").remove();if(this.debug){this.svgBackground.append("svg:rect").attr("class","leftBorder").attr("x",b-3).attr("y",y-3).attr("width",6).attr("height",6).style("fill","red");this.svgBackground.append("svg:circle").attr("class","leftBorder").attr("cx",b).attr("cy",e).attr("this.r",3).style("fill","red");}}return(u>=Math.min(y,e)-1e-9&&c<=Math.max(y,e)+1e-9);},calcLeftBorder:function(x,y){var b=-this.backgroundWidth/2;if(Math.abs(this.startAngle-this.endAngle%(2*Math.PI))<1e-9){return b;}if(y<=0){if(y>-Math.cos(this.startAngle)*(this.r+this.radiusPadding)){b=Math.tan(this.startAngle)*-y;}}else if(y<-Math.cos(this.endAngle)*(this.r+this.radiusPadding)){b=Math.tan(this.endAngle)*-y;}return b;},calcRightBorder:function(x,y){var b=this.backgroundWidth/2;if(Math.abs(this.startAngle-this.endAngle%(2*Math.PI))<1e-9){return b;}if(y>=0){if(-y>Math.cos(this.startAngle)*(this.r+this.radiusPadding)){b=Math.tan(this.startAngle)*-y;}}else if(-y<Math.cos(this.endAngle)*(this.r+this.radiusPadding)){b=Math.tan(this.endAngle)*-y;}return b;},calcPerimeterBorder:function(x,y){var b=(x>0)?this.backgroundWidth/2:-this.backgroundWidth/2;b=Math.sqrt(this.r*this.r-y*y);if(x<0){b*=-1;}return b;},isStartAngleOnRight:function(){return this.startAngle>0&&this.startAngle<=2*Math.PI/360*180;},isEndAngleOnRight:function(){return this.endAngle%(2*Math.PI)<2*Math.PI/360*180;}};return a;})();P.Tweens=(function(){var T={};T.tweenGenSimple=function(d,i,a,b,o,s){var c={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:b,outerRadius:o};var e={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:b,outerRadius:o};var j=d3.interpolate(c,e);return function(t){return s(j(t));};};T.tweenGenSimpleText=function(d,i,a,b,o,c,e){var g=" ";if((d.labelElement.childNodes[1])&&(d.labelElement.childNodes[1].childNodes[0])&&(d.labelElement.childNodes[1].childNodes[0].data)){g=d.labelElement.childNodes[1].childNodes[0].data;}var h=new P.Labelposition(c.options.width,c.options.height,d.oldArc.startAngle,d.oldArc.endAngle,c.options.outerRadius,d.labelElement.childNodes[1].getBBox().width,d.labelElement.childNodes[1].getBBox().height,c.svgArcGen(d).centroid(d),g,c.svg);h.update();var k=[h.x,h.y];var m=new P.Labelposition(c.options.width,c.options.height,d.startAngle,d.endAngle,c.options.outerRadius,d.labelElement.childNodes[1].getBBox().width,d.labelElement.childNodes[1].getBBox().height,c.svgArcGen(d).centroid(d),g,c.svg);m.update();if(m.labelWidth<d.labelElement.childNodes[1].getBBox().width){c.adjustLabelWidth(d.labelElement,m.labelWidth);}var n=[m.x,m.y];var j=d3.interpolateArray(k,n);var p=function(q){var t;if(e){t=T.translateStr4Padding(d.startAngle,d.endAngle,c.options.padding4click,q[0],q[1]);}else{t="translate("+q+")";}return t;};return function(t){return p(j(t));};};T.translateStr4Padding=function(s,e,p,x,y){var a=e-s;var b=p*Math.sin(a/2);var c=-(p*Math.cos(a/2));var t=b*Math.cos(s)-c*Math.sin(s);c=b*Math.sin(s)+c*Math.cos(s);b=t;var d="translate("+(x+b)+", "+(y+c)+")";return d;};T.tweenGenEcstasy=function(d,i,a,b,o,s){var c=Math.round((b+o)/2);var e;var g;if(i%2){e=o;g=c;}else{e=c;g=b;}var h={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:b,outerRadius:o};var j={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:g,outerRadius:e};var k=d3.interpolate(h,j);h={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:g,outerRadius:e};j={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:g,outerRadius:e};var r=d3.interpolate(h,j);h={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:g,outerRadius:e};j={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:b,outerRadius:o};var u=d3.interpolate(h,j);return function(t){if(t<=0.25){return s(k(t*4));}if(t<=0.75){return s(r((t-0.25)*2));}return s(u((t-0.75)*4));};};T.tweenGenLSD=function(d,i,a,b,o,s){var c=Math.round((b+o)/2);var e;var g;if(i%2){e=o;g=c;}else{e=c;g=b;}var h={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:b,outerRadius:o};var j={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:g,outerRadius:e};var k=d3.interpolate(h,j);h={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:g,outerRadius:e};j={startAngle:d.startAngle,endAngle:d.startAngle+(d.oldArc.endAngle-d.oldArc.startAngle),innerRadius:g,outerRadius:e};var m=d3.interpolate(h,j);h={startAngle:d.startAngle,endAngle:d.startAngle+(d.oldArc.endAngle-d.oldArc.startAngle),innerRadius:g,outerRadius:e};j={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:g,outerRadius:e};var r=d3.interpolate(h,j);h={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:g,outerRadius:e};j={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:b,outerRadius:o};var u=d3.interpolate(h,j);return function(t){if(t<=0.25){return s(k(t*4));}if(t<=0.5){return s(m((t-0.25)*4));}if(t<=0.75){return s(r((t-0.5)*4));}return s(u((t-0.75)*4));};};return T;})();var l={};l.debug=function(t){};P.prototype={init:function(p,o,a,m){this.application=a;this.parent=p;this.model=m;this.chartElements=[];var b=d3.select(p);var s=$(p).innerHeight();var c=$(p).innerWidth();if(o.height>s){s=o.height;}var r=(Math.min(c,s)/2);this.options={"dimension-pie":"YEAR",backgroundWidth:c,backgroundHeight:s,width:c,height:s,innerRadius:0,outerRadius:r*0.8,tweenGen:P.Tweens.tweenGenSimple,tweenGenText:P.Tweens.tweenGenSimpleText,arcCalculator:P.generateHistoricalArcCalculator(),animationduration:1500,labelHideThreshold:0.05,easing:"linear",pieChartClass:"sap-piechart",pieChartParentClass:"sapUshellSearchFacetPieChart",color:"blue",strokewidth:1,strokewidthHover:3,padding4click:7,multipleselectable:true,oSearchFacetDialog:null};if(o){for(var d in o){this.options[d]=o[d];}}this.createAttributeService(P,"innerRadius",function(){this.init();});this.createAttributeService(P,"outerRadius",function(){this.init();});this.createAttributeService(P,"tweenGen",function(){this.init();});this.createAttributeService(P,"tweenGenText",function(){this.init();});this.createAttributeService(P,"width",function(){this.init();});this.createAttributeService(P,"height",function(){this.init();});this.createAttributeService(P,"animationduration");this.createAttributeService(P,"labelHideThreshold");this.createAttributeService(P,"arcCalculator");var x=Math.round(this.options.width/2);var y=Math.round(this.options.height/2);this.svg=b.append("svg:svg").attr("width",c).attr("height",s).attr("id",p.id+"_svg").append("svg:g").attr("transform","translate("+x+","+y+")");this.svgArcs=this.svg.append("svg:g");this.svgLabels=this.svg.append("svg:g");this.svg.attr("class",this.options.pieChartClass);this.inittween();this.oldArcs=[];this.clickedSegment={};this.firstUpdate=true;},getParent:function(){return this.parent;},createAttributeService:function(c,a,i){c.prototype[a]=function(v){if(v===null){return this.options[a];}else{this.options[a]=v;if(i){i.call(this);}return this;}};},inittween:function(){var t=this;t.xOrigin=Math.round(t.options.width/2);t.yOrigin=Math.round(t.options.height/2);t.svg.attr("width",this.options.width).attr("height",this.options.height);this.tweenGenArc=function(d,i,a){return t.options.tweenGen(d,i,a,t.options.innerRadius,t.options.outerRadius,t.svgArcGen(d));};this.tweenGenText=function(d,i,a,b){return t.options.tweenGenText(d,i,a,t.options.innerRadius,t.options.outerRadius,t,b);};},update:function(d){this.notAnimatedUpdate(d);},notAnimatedUpdate:function(a){var t=this;var b=[];if(!a){return;}this.chartElements=a;t.svgArcs.selectAll("path").remove();t.svgLabels.selectAll("g").remove();var c=0;for(var i=0;i<a.length;++i){c+=a[i].value;}for(var j=0;j<a.length;++j){a[j].percentage=a[j].value/c;}b=this.options.arcCalculator.calculateNewArcsOnly(a);var s=this.svgArcs.selectAll("path").data(b,P.getIdOfArc);if(!s.exit().empty()){s.exit().remove();}if(!s.empty()){s.attr("d",function(d){var p=t.svgArcGen(d);return p(d);}).attr("transform",function(d){var e;if(d.data.selected){e=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,0,0);}else{e="translate(0,0)";}return e;}).style("stroke",function(d){var e;if(d.data.stroke==="none"){e=d.data.stroke;}else if(d.data.selected||d.data.hovered){e="#dadada";}else{e="white";}return e;}).style("stroke-width",function(d){var e;if(d.data.selected||d.data.hovered){e=t.options.strokewidthHover;}else{e=t.options.strokewidth;}return e;}).style("opacity",function(d){var o;if(d.data.selected||d.data.hovered){o="1";}else if(d.data.initial){o="0.75";}else{o="0.5";}return o;}).each(function(d,i){while(this.hasChildNodes()){this.removeChild(this.lastChild);}d3.select(this).append("svg:title").text(""+d.data.tooltip);});}s.enter().append("svg:path").attr("transform",function(d){var e;if(d.data.selected){t.clickedSegment[d.data.id]=this;e=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,0,0);}return e;}).attr("shape-rendering","geometricPrecision").attr("tabindex","0").style("stroke",function(d){var e;if(d.data.stroke==="none"){e=d.data.stroke;}else if(d.data.selected||d.data.hovered){e="#dadada";}else{e="white";}return e;}).style("stroke-width",function(d){var e;if(d.data.selected||d.data.hovered){e=t.options.strokewidthHover;}else{e=t.options.strokewidth;}return e;}).style("opacity",function(d){var o;if(d.data.selected||d.data.hovered){o="1";}else if(d.data.initial){o="0.75";}else{o="0.5";}return o;}).attr("fill",function(d,i){return d.data.fill;}).on("keydown",function(d,i){var e=d3.event;var h=e.keyCode||e.which;if(h==32){e.target.__onclick();}}).on("click",function(d,i){var e;if((d.data.click)&&(d.data.pieupdateuionly===false)){var r=d.data.click(d,i);if((!t.options.multipleselectable)&&(!r)){return;}}var h,k;var m;var n=t.getLabelElementtbyLabel(d.data.label);if(n){var o=" ";if((n.childNodes[1])&&(n.childNodes[1].childNodes[0])&&(n.childNodes[1].childNodes[0].data)){o=n.childNodes[1].childNodes[0].data;}m=new P.Labelposition(t.options.width,t.options.height,d.startAngle,d.endAngle,t.options.outerRadius,n.childNodes[1].getBoundingClientRect().width,n.childNodes[1].getBoundingClientRect().height,t.svgArcGen(d).centroid(d),o,t.svg);m.update();if(m.labelWidth<n.childNodes[1].getBoundingClientRect().width){t.adjustLabelWidth(n,m.labelWidth);}}if(d.data.selected){if((!t.options.multipleselectable)&&(Object.keys(t.clickedSegment).length>0)){delete t.clickedSegment[d.data.id];}h="translate(0,0)";if(n){k="translate("+m.x+","+m.y+")";}d.data.selected=false;if(t.options.oSearchFacetDialog){e={};e.cnt=t.getNumberOfClickedSegments();e.dataObject=d.data;t.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(e);}else{t.model.removeFilterCondition(d.data.filterCondition,true);}}else{if(!t.options.multipleselectable){if(Object.keys(t.clickedSegment).length>0){for(var p in t.clickedSegment){var q=t.clickedSegment[p];if(typeof q.__onclick==="function"){q.__data__.data.pieupdateuionly=true;q.__onclick.apply(q);}delete t.clickedSegment[p];}}if(Object.keys(t.clickedSegment).length<1){t.clickedSegment[d.data.id]=(this);}}h=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,0,0);if(n){k=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,m.x,m.y);}d.data.selected=true;if(d.data.filterCondition){if(t.options.oSearchFacetDialog){e={};e.cnt=t.getNumberOfClickedSegments();e.dataObject=d.data;t.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(e);}else{t.model.addFilterCondition(d.data.filterCondition,true);}}}d3.select(this).transition().duration(1000).ease(d3.ease("elastic")).attr("transform",h).style("stroke",function(d){var v;if(d.data.stroke==="none"){v=d.data.stroke;}else if(d.data.selected){v="#dadada";}else{v="white";}return v;}).style("stroke-width",function(d){var v;if(d.data.selected){v=t.options.strokewidthHover;}else{v=t.options.strokewidth;}return v;}).style("opacity",function(d){var v;if(d.data.selected||d.data.hovered){v="1";}else if(d.data.initial){v="0.75";}else{v="0.5";}return v;});var u=t.getLabelElementtbyLabel(d.data.label);if(u){d3.select(u).transition().duration(1000).ease(d3.ease("elastic")).attr("transform",k);}}).on("mouseover",function(d,i){if((!t.options.multipleselectable)&&(Object.keys(t.clickedSegment).length>0)){return;}if(d.data.selected||d.data.hovered){return;}if(d.data.mouseover){var r=d.data.mouseover(d,i);if((!t.options.multipleselectable)&&(!r)){return;}}}).on("mouseout",function(d,i){if(d.data.selected){d3.select(this).style("opacity",1);}if((!t.options.multipleselectable)&&(Object.keys(t.clickedSegment).length>0)){return;}if(d.data.selected){return;}if(d.data.mouseout){var r=d.data.mouseout(d,i);if((!t.options.multipleselectable)&&(!r)){return;}}}).attr("d",function(d){var p=t.svgArcGen(d);return p(d);}).append("svg:title").text(function(d){return""+d.data.tooltip;});s=t.svgLabels.selectAll("g").data(b,P.getIdOfArc);if(!s.exit().empty()){s.exit().remove();}if(!s.empty()){s.style("opacity",function(d){if(d.removed||d.data.percentage<t.options.labelHideThreshold){return 0;}else{return 1;}}).attr("transform",function(d){var e;var h;if((this.childNodes[1])&&(this.childNodes[1].childNodes[0])){h=new P.Labelposition(t.options.width,t.options.height,d.startAngle,d.endAngle,t.options.outerRadius,this.getBoundingClientRect().width,this.getBoundingClientRect().height,t.svgArcGen(d).centroid(d),d.data.label,t.svg);}else{h=new P.Labelposition(t.options.width,t.options.height,d.startAngle,d.endAngle,t.options.outerRadius,this.getBoundingClientRect().width,this.getBoundingClientRect().height,t.svgArcGen(d).centroid(d)," ",t.svg);}h.update();if(h.labelWidth<this.childNodes[1].getBoundingClientRect().width){t.adjustLabelWidth(this,h.labelWidth);}if(d.data.selected){e=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,h.x,h.y);}else{e="translate("+h.x+","+h.y+")";}return e;});}if(!s.enter().empty()){var g=s.enter().append("svg:g").style("opacity",0);g.append("svg:text").attr("class","labelshadow").attr("text-anchor","middle").text(function(d){return""+d.data.label;}).style("pointer-events","none");g.append("svg:text").attr("class","label").attr("text-anchor","middle").text(function(d){return""+d.data.label;}).style("pointer-events","none");g.style("opacity",function(d){if(d.removed||d.data.percentage<t.options.labelHideThreshold){return 0;}else{return 1;}}).attr("transform",function(d){var e;var h=new P.Labelposition(t.options.width,t.options.height,d.startAngle,d.endAngle,t.options.outerRadius,this.getBoundingClientRect().width,this.getBoundingClientRect().height,t.svgArcGen(d).centroid(d),d.data.label,t.svg);h.update();if(h.labelWidth<this.childNodes[1].getBoundingClientRect().width){t.adjustLabelWidth(this,h.labelWidth);}if(d.data.selected){e=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,h.x,h.y);}else{e="translate("+h.x+","+h.y+")";}return e;});}t.oldArcs=P.removeDeletedArcs(b);},getNumberOfClickedSegments:function(){var c=0;var a=this.chartElements;for(var i=0;i<a.length;i++){if(a[i].selected===true){c++;}}return c;},adjustLabelWidth:function(e,t){var s=e.childNodes[0];var a=e.childNodes[1];if(t<=0){s.childNodes[0].data='';a.childNodes[0].data='';return;}var b=s.childNodes[0].data.length;s.childNodes[0].data+="...";var c="";while(s.getBBox().width>t){c=s.childNodes[0].data;c=c.substr(0,b-1)+c.substr(b,3);s.childNodes[0].data=c;b--;if(b<=0){s.childNodes[0].data='';break;}}a.childNodes[0].data=s.childNodes[0].data;},getArcsWithLabel:function(a){var t=this;var b=[];for(var i=0;i<a.length;++i){var c=a[i];if(c.data.percentage>t.options.labelHideThreshold){b.push(c);}}return b;},svgArcGen:function(d){var t=this;var a=d3.svg.arc().innerRadius(function(d){return t.options.innerRadius;}).outerRadius(function(d){return t.options.outerRadius;}).startAngle(function(d){return d.startAngle;}).endAngle(function(d){return d.endAngle;});return a;},getArcElementtbyLabel:function(a){var t=this;t.svgArcs.selectAll("g").each(function(d,i){if(d.data.label===a){t=this;}return;});return t;},getLabelElementtbyLabel:function(a){var t=this;t.svgLabels.selectAll("g").each(function(d,i){if(d.data.label===a){t=this;}});return t;}};P.removeDeletedArcs=function(a){var t=[];for(var i=0;i<a.length;++i){var b=a[i];if(!b.removed){t.push(b);}}return t;};P.createZeroArc=function(a,e){return{startAngle:a,endAngle:a,data:e,removed:true};};P.insertAfter=function(a,i,b){var n;if(i>=0){var c=a[i];n=P.createZeroArc(c.endAngle,b.data);}else{n=P.createZeroArc(0,b.data);}n.oldArc=b;a.splice(i+1,0,n);};P.getIdOfArc=function(a){return a.data.id;};P.arcsGen=d3.layout.pie().value(function(d){return d.value;}).sort(null);P.getIndexById=function(a,b){for(var i=0;i<a.length;++i){var c=a[i];if(P.getIdOfArc(c)===b){return i;}}return null;};P.add2arcSequence=function(d,a){if(f()){var b=function(x){a.getIndex(x.id);};d.forEach(b);}return d;};P.translateStr4Padding=function(s,e,p,x,y){var a=e-s;var b=p*Math.sin(a/2);var c=-(p*Math.cos(a/2));var t=b*Math.cos(s)-c*Math.sin(s);c=b*Math.sin(s)+c*Math.cos(s);b=t;var d="translate("+(x+b)+", "+(y+c)+")";return d;};P.Sequence=function(){this.init.apply(this,arguments);};P.Sequence.prototype={init:function(){this.maxIndex=0;this.objectMap={};},getIndex:function(o){var i=this.objectMap[o];if(typeof i!=='undefined'){return i;}i=this.maxIndex;this.maxIndex++;this.objectMap[o]=i;return i;}};P.generateDefaultArcCalculator=function(){return new P.DefaultArcCalculator();};P.DefaultArcCalculator=function(){this.init.apply(this,arguments);};P.DefaultArcCalculator.prototype={init:function(){this.arcSequence=new P.Sequence();},calculateNewArcsOnly:function(d){var t=this;d=d.slice();P.add2arcSequence(d,t.arcSequence);d.sort(function(a,b){return t.arcSequence.getIndex(a.id)-t.arcSequence.getIndex(b.id);});var n=P.arcsGen(d);return n;},calculateArcs:function(o,d){var n=P.arcsGen(d);this.insertMissingArcs(o,n,true);this.insertMissingArcs(n,o,false);return n;},insertMissingArcs:function(a,b,i){var c=-1;for(var d=0;d<b.length;++d){var e=b[d];var g=P.getIndexById(a,e.data.id);var h;if(g!==null){h=a[g];h.oldArc=e;c=g;continue;}else{if(i){c=this.determineInsertIndex(a,c,b,d);}var n;if(c>=0){var j=a[c];n=P.createZeroArc(j.endAngle,e.data);}else{n=P.createZeroArc(0,e.data);}n.oldArc=e;a.splice(c+1,0,n);c++;}}},determineInsertIndex:function(a,b,c,d){var e=c[d];var s=this.arcSequence.getIndex(e.data.id);var i;for(i=b+1;i<a.length;++i){var g=this.arcSequence.getIndex(a[i].data.id);if(g>s){break;}if(P.getIndexById(c,a[i].data.id)!==null){break;}}return i-1;}};P.generateHistoricalArcCalculator=function(){return new this.HistoricalArcCalculator();};P.HistoricalArcCalculator=function(){this.init.apply(this,arguments);};P.HistoricalArcCalculator.prototype={init:function(){this.arcSequence=new P.Sequence();},calculateNewArcsOnly:function(d){var t=this;d=d.slice();P.add2arcSequence(d,t.arcSequence);d.sort(function(a,b){return t.arcSequence.getIndex(a.id)-t.arcSequence.getIndex(b.id);});var n=P.arcsGen(d);return n;},calculateArcs:function(o,d){var t=this;d=d.slice();P.add2arcSequence(d,t.arcSequence);d.sort(function(a,b){return t.arcSequence.getIndex(a.id)-t.arcSequence.getIndex(b.id);});var n=P.arcsGen(d);this.insertMissingArcs(o,n);this.insertMissingArcs(n,o);return n;},insertMissingArcs:function(a,b){var t=this;var c=0;for(var d=0;d<b.length;++d){var e=b[d];var g=t.arcSequence.getIndex(e.data.id);var h;var i=false;for(;c<a.length;++c){h=a[c];var j=t.arcSequence.getIndex(h.data.id);if(j===g){i=true;break;}if(j>g){break;}}if(i){h.oldArc=e;}else{var n;if(c-1>=0&&c-1<a.length){var k=a[c-1];n=P.createZeroArc(k.endAngle,e.data);}else{n=P.createZeroArc(0,e.data);}a.splice(c,0,n);n.oldArc=e;}c++;}}};R.write("</div>");C.PieChart=P;},
getFacetIndexById:function(c){var a=-1;var t=$("#"+c).parent().parent().parent().parent().parent()[0];var b=t.id;var d=$(".sapUshellSearchFacetIconTabBar");for(var i=0;i<d.length;i++){var e=d[i].id;if(e===b){a=i;break;}}return a;},
getFacetIndexByIdForLargePieChart:function(c){var a=-1;var t=$("#"+c).parent().parent()[0];var b=t.id;var d=$(".searchFacetLargeChartContainer");for(var i=0;i<d.length;i++){var e=d[i].id;if(e===b){a=i;break;}}return a;},
getPieChartIndexByFacetIndex:function(f){var s;var a=-1;var p=0;for(var i=0;i<f;i++){s=$($(".sapUshellSearchFacetIconTabBar")[i]).find(".sapMLIBContent")[1].firstChild.id;if(s.match(/pieChart/)!==null){p++;}}a=p;return a;},
getSumSelected:function(d){var a;var b=0;if(d){for(var i=0;i<d.length;i++){if(d[i].facetType==="attribute"){for(var j=0;j<d[i].items.length;j++){a=d[i].items[j].value;if(a&&d[i].items[j].selected){b+=a;}}}}}return b;},
getDataForPieChart:function(d,m,f){var r=[];var g=[];var a={};var b=0;var c=-1;var e="";var s=m.oData.count;var o=s;var p=0;this.iMissingCnt=0;for(var i=0;i<d.length;i++){if(d[i].facetType==="attribute"){c++;if(d[i].totalCount){o=d[i].totalCount;}g=[];p=0;for(var j=0;j<d[i].items.length;j++){a={};b=d[i].items[j].value;if(b){e=""+b;p+=b;a.filterCondition=d[i].items[j].filterCondition;a.dimension=d[i].items[j].facetTitle;a.label=d[i].items[j].label;a.selected=d[i].items[j].selected;a.filterLabel=d[i].items[j].label;a.id=d[i].items[j].label;a.value=b;a.valueLabel=d[i].items[j].valueLabel;if(e){a.tooltip=d[i].items[j].label+": "+b;}else{a.tooltip=d[i].items[j].label;}a.filtered=false;a.removed=false;a.fill="#007CAA";a.maxLabelLength=30;g.push(a);}else if(c===f){this.iMissingCnt++;}}var h=Math.round((p/o)*100);var k=(100-h);if(k>0){if(k===100){k=99;}var l=(18*p)/350;var n=""+k;a={};a.filterCondition=null;a.dimension="";a.label=n;a.id="perc_missing";a.value=l;a.valueLabel=n;a.tooltip=sap.ushell.resources.i18n.getText("facetPieChartOverflowText",[n]);a.filtered=false;a.removed=false;a.fill="transparent";a.stroke="none";a.maxLabelLength=30;g.push(a);}r.push(g);}}return r;},
getDataForPieChartLarge:function(d,m){var g=[];var i={};var a=0;var p=0;g=[];p=0;for(var j=0;j<d.length;j++){a=d[j].value;if(a){i={};p+=a;i.filterCondition=d[j].filterCondition;i.dimension=d[j].facetAttribute;i.label=d[j].label;i.selected=d[j].selected;i.filterLabel=d[j].label;i.id=d[j].label;i.value=a;i.valueLabel=d[j].valueLabel;i.tooltip=d[j].label+"\t: "+a;i.filtered=false;i.removed=false;i.fill="#007CAA";i.maxLabelLength=30;g.push(i);}}return g;},
directUpdate:function(d,p,m,o){var c,a,b;var f=[];var e=20;a=null;b=this.getModel();if(!b){b=this.oParent.getModel();}o.pieChartParentClass="sapUshellSearchFacetPieChartLarge";o.height=o.relevantContainerHeight;o.labelHideThreshold=0.000001;$(p).parent().parent().height(o.height);o.width=$(p).parent().parent().width();this.chartElements=this.getDataForPieChartLarge(d,m);c=new this.PieChart(p,o,a,b);for(var i=0;i<e;i++){if(this.chartElements[i]){f.push(this.chartElements[i]);}}c.update(f);},
onAfterRendering:function(){var t=this;var d,c,a,m,b,p,f;var o={};if(typeof SVGElement.prototype.blur=='undefined'){SVGElement.prototype.blur=function(){};}b=null;m=this.getModel();if(!m){m=this.oParent.oModels.facets;}if(m){p=$("#"+this.sId)[0];if($(p).parent()[0].className==="sapMLIBContent"){o.pieChartParentClass="sapUshellSearchFacetPieChart";f=this.getFacetIndexById(this.sId);p.className=o.pieChartParentClass;d=this.getDataForPieChart(m.oData.facets,m,f);c=d[f];a=new this.PieChart(p,o,b,m);a.update(c);var i=$(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];var I=sap.ui.getCore().byId(i.id);if(t.iMissingCnt>0){I.setVisible(true);var e=sap.ushell.resources.i18n.getText("infoZeileNumberMoreSelected",[t.iMissingCnt]);I.setText(e);}else{I.setVisible(false);}}else if($(p)[0].className==="largeChart2piechart"){$(p).attr("tabindex","0");}}}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetTabBar',['sap/ushell/renderers/fiori2/search/SearchFacetDialogModel','sap/ushell/renderers/fiori2/search/controls/SearchFacetDialog','sap/m/GroupHeaderListItemRenderer','sap/m/ButtonRenderer'],function(){"use strict";
sap.m.Button.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetDisplayModeDropDown',{renderer:'sap.ushell.renderers.fiori2.search.controls.SearchFacetDisplayModeDropDownRenderer'});
sap.ushell.renderers.fiori2.search.controls.SearchFacetDisplayModeDropDownRenderer=jQuery.extend(true,{},sap.m.ButtonRenderer);
sap.m.GroupHeaderListItemRenderer.extend('sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItemRenderer');
sap.m.GroupHeaderListItem.extend('sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItem',{
renderer:'sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItemRenderer',
metadata:{properties:{upperCase:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{button:{type:'sap.ushell.renderers.fiori2.search.controls.SearchFacetDisplayModeDropDown',multiple:false}}}
});
sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItemRenderer.renderCounter=function(r,l){var b=l.getButton();if(typeof b==='object'){this.renderCounterContent(r,l,b);}};
sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItemRenderer.renderCounterContent=function(r,l,b){r.write('<div>');r.renderControl(b);r.write('</div>');};
sap.m.SegmentedButtonItem.extend('my.SegmentedButtonItem',{aggregations:{"content1":{type:"sap.ui.core.Control",multiple:false}}});
sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetTabBar',{
metadata:{properties:{"eshRole":"string","headerText":"string","selectedButtonParameters":{type:"object",defaultValue:null}},aggregations:{items:{type:"sap.m.IconTabFilter",multiple:true}}},
getSearchFacetTabBarAndDimensionById:function(b){var r={};r.index=0;var a=document.getElementById(b);var v=a.dataset.facetView;var c=a.dataset.facetViewIndex;var d=$("#"+b).parent()[0];var e=d.dataset.facetDimension;var f=$(".sapUshellSearchFacetTabBar");for(var i=0;i<f.length;i++){var g=$(".sapUshellSearchFacetTabBar .sapUshellSearchFacetTabBarHeader")[i];var h=g.dataset.facetDimension;if(h===e){r.index=i;r.control=sap.ui.getCore().byId(f[i].id);r.view=v;r.buttonIndex=c;r.dimension=e;break;}}return r;},
storeClickedTabInformation:function(e){var s,a,b,d,c;var t=e.getSource().sId;var f=this.getSearchFacetTabBarAndDimensionById(t);var p=f.control.getModel().getPersonalizationStorageInstance().getItem("search-facet-panel-chart-state");s=f.dimension;a=f.control;b=f.view;c=f.buttonIndex;d=a.getBindingContext().getObject().dimension;var g=e.getParameters().id;var h=[];var o={};o.tabId=t;o.searchFacetTabBarIndex=f.searchFacetTabBarIndex;o.buttonId=g;o.buttonIndex=c;o.dimension=d;o.view=b;h.push(o);if(p&&Object.prototype.toString.call(p)==='[object Array]'){for(var i=0;i<p.length;i++){var j=p[i];if(j.dimension!==s){h.push(j);}}}f.control.getModel().getPersonalizationStorageInstance().setItem("search-facet-panel-chart-state",h);a.getBindingContext().getObject().chartIndex=c;},
renderer:function(r,c){var a=function(x,T){return function(y){var d;var z=$(this.getDomRef()).closest(".sapUshellSearchFacetTabBar")[0];var E=sap.ui.getCore().byId($(z).attr("id"));var J=new sap.ushell.renderers.fiori2.search.SearchFacetDialogModel(c.getModel());J.initBusinessObjSearch().then(function(){J.setData(c.getModel().getData());J.sinaNext=c.getModel().sinaNext;J.prepareFacetList();if(E&&E.getBindingContext()&&E.getBindingContext().getObject()&&E.getBindingContext().getObject().dimension){d=E.getBindingContext().getObject().dimension;}var K=new sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog({selectedAttribute:d,selectedTabBarIndex:x,tabBarItems:T});K.setModel(J);K.setModel(c.getModel(),'searchModel');K.open();var P=c.getParent().getParent().getParent().getParent();P.oFacetDialog=K;c.getModel().eventLogger.logEvent({type:c.getModel().eventLogger.FACET_SHOW_MORE,referencedAttribute:d});});};};r.write('<div tabindex="0"');r.writeControlData(c);r.addClass("sapUshellSearchFacetTabBar");r.writeClasses();r.write('>');var d=c.getBindingContext().getObject().dimension;var b=c.getBindingContext().getObject().dataType;var t=c.getBindingContext().getObject().title;var e;var s;e=c.getModel().getPersonalizationStorageInstance().getItem("search-facet-panel-chart-state");if(e&&Object.prototype.toString.call(e)==='[object Array]'){for(var k=0;k<e.length;k++){if(e[k].dimension===d){s=e[k];break;}}}var f=[];var g=[];var C=null;var B=null;var h=0;if(s&&s.buttonIndex){h=s.buttonIndex;h=parseInt(h,10);}if(b!=c.getModel().sinaNext.AttributeType.String){h=0;}c.getBindingContext().getObject().chartIndex=h;var j=c.getItems();var D=new sap.ushell.renderers.fiori2.search.controls.SearchFacetDisplayModeDropDown({icon:j[h].getIcon(),type:'Transparent'});for(var i=0;i<j.length;i++){C=j[i].getContent()[0];B=new sap.m.Button({text:j[i].getText(),icon:j[i].getIcon(),press:function(E){c.storeClickedTabInformation(E);c.setSelectedButtonParameters(E.getParameters());}});B.data("facet-view",j[i].getText(),true);B.data("facet-view-index",""+i,true);B.data("dimension",d,true);f.push(B);g.push(C);}var A=new sap.m.ActionSheet({showCancelButton:false,buttons:f,placement:sap.m.PlacementType.Bottom,cancelButtonPress:function(x){jQuery.sap.log.info("sap.m.ActionSheet: cancelButton is pressed");},afterClose:function(x){var y=this;window.setTimeout(function(){var d=y.getFocusDomRef().getAttribute('data-facet-dimension');var z=$(".sapUshellSearchFacetTabBarButton");for(var i=0;i<z.length;i++){var E=z[i];var J=E.parentNode.parentNode.getAttribute('data-facet-dimension');if(J===d){E.focus();break;}}},100);jQuery.sap.log.info("=====================");jQuery.sap.log.info("sap.m.ActionSheet: closed");}});A.data("facet-dimension",d,true);D.addStyleClass("sapUshellSearchFacetTabBarButton");var l=j[h].getText();var m=sap.ushell.resources.i18n.getText('displayAs',[l]);D.setTooltip(m);D.attachPress(function(E){A.openBy(this);});D.onAfterRendering=function(){$(this.getDomRef()).attr("aria-label",sap.ushell.resources.i18n.getText('dropDown'));};if(c.getHeaderText()){var H=new sap.m.List({});H.setShowNoData(false);H.setShowSeparators(sap.m.ListSeparators.None);H.data("sap-ui-fastnavgroup","false",true);var F=false;var n=c.getModel().getProperty("/uiFilter/rootCondition");if(n.hasFilters()){F=true;}else{F=false;}var R=new sap.m.Button({icon:"sap-icon://clear-filter",tooltip:sap.ushell.resources.i18n.getText("resetFilterButton_tooltip"),type:'Transparent',enabled:F,press:function(E){var x=c.getModel();x.eventLogger.logEvent({type:x.eventLogger.CLEAR_ALL_FILTERS});x.resetFilterConditions(true);}});R.addStyleClass("sapUshellSearchFilterByResetButton");R.onAfterRendering=function(){$(this.getDomRef()).attr("aria-label",sap.ushell.resources.i18n.getText('resetFilterButton_tooltip'));};var L=new sap.m.Title({text:c.getHeaderText()});L.addStyleClass("sapUshellSearchFilterByResetButtonLabel");var S=new sap.m.ToolbarSpacer();var o=new sap.m.Toolbar({content:[L,S,R]});o.data("sap-ui-fastnavgroup","false",true);H.setHeaderToolbar(o);H.addStyleClass('sapUshellSearchFilterByHeaderList');H.onAfterRendering=function(){$(".sapUshellSearchFilterByHeaderList").find("ul").attr("tabindex","-1");};r.renderControl(H);}var p=new sap.m.CustomListItem({content:g[h]});p.setModel(c.getModel(),'facets');p.addStyleClass("sapUshellSearchFacetList");var G;if(b===c.getModel().sinaNext.AttributeType.String){G=new sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItem({title:t,button:D});}else{G=new sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItem({title:t});}G.data("facet-dimension",d,true);G.addStyleClass("sapUshellSearchFacetTabBarHeader");var q=new sap.m.Link({text:sap.ushell.resources.i18n.getText("showMore"),press:a(h,j)});q.setModel(c.getModel("i18n"));q.addStyleClass('sapUshellSearchFacetShowMoreLink');var I=new sap.m.Label({text:""});I.addStyleClass('sapUshellSearchFacetInfoZeile');var u=new sap.m.VBox({items:[I,q]});var v=new sap.m.CustomListItem({content:u,visible:{parts:[{path:'/uiFilter/dataSource'}],formatter:function(x){return x.type!==this.getModel().sinaNext.DataSourceType.Category;}}});v.addStyleClass('sapUshellSearchFacetShowMoreItem');var w=new sap.m.List({showSeparators:sap.m.ListSeparators.None,items:[G,p,v]});w.data("sap-ui-fastnavgroup","false",true);w.setModel(c.getModel());r.renderControl(w);c.getItems()[h].addContent(g[h]);r.write("</div>");},
onAfterRendering:function(){jQuery(this.getDomRef()).removeAttr("tabindex");}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFieldGroup',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/controls/SearchSelect','sap/ushell/renderers/fiori2/search/controls/SearchInput','sap/ushell/renderers/fiori2/search/controls/SearchButton'],function(){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup",{metadata:{properties:{"selectActive":{defaultValue:true,type:"boolean"},"inputActive":{defaultValue:true,type:"boolean"},"buttonActive":{defaultValue:true,type:"boolean"},"cancelButtonActive":{defaultValue:true,type:"boolean"}},aggregations:{"_flexBox":{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"}}},constructor:function(){sap.ui.core.Control.prototype.constructor.apply(this,arguments);var t=this;t.initSelect();t.initInput();t.initButton();t.initCancelButton();t.initFlexBox();},setCancelButtonActive:function(a){if(a===this.getProperty('cancelButtonActive')){return;}this.setProperty('cancelButtonActive',a);this.initFlexBox();},initFlexBox:function(){if(!this.select){return;}var a=[];if(this.getSelectActive()){this.select.setLayoutData(new sap.m.FlexItemData({growFactor:0}));a.push(this.select);}if(this.getInputActive()){this.input.setLayoutData(new sap.m.FlexItemData({growFactor:1}));a.push(this.input);}if(this.getButtonActive()){this.button.setLayoutData(new sap.m.FlexItemData({growFactor:0}));a.push(this.button);}if(this.getCancelButtonActive()){this.cancelButton.setLayoutData(new sap.m.FlexItemData({growFactor:0}));a.push(this.cancelButton);}var f=this.getAggregation('_flexBox');if(!f){f=new sap.m.FlexBox({alignItems:sap.m.FlexAlignItems.Start,items:a});this.setAggregation('_flexBox',f);}else{f.removeAllAggregation('items');for(var i=0;i<a.length;++i){f.addItem(a[i]);}}},initSelect:function(){var t=this;t.select=new sap.ushell.renderers.fiori2.search.controls.SearchSelect(t.getId()+'-select',{});t.select.attachChange(function(){if(t.getAggregation("input")){var i=t.getAggregation("input");i.destroySuggestionRows();}});},initInput:function(){var t=this;t.input=new sap.ushell.renderers.fiori2.search.controls.SearchInput(t.getId()+'-input',{});},initButton:function(){var t=this;t.button=new sap.ushell.renderers.fiori2.search.controls.SearchButton(t.getId()+'-button',{tooltip:"{i18n>searchbox_tooltip}",ariaLabel:"{i18n>searchbox_tooltip}",press:function(e){var m=t.button.getModel();if(!m.config.odataProvider&&m.config.isLaunchpad()){if(t.input.getValue()===""&&m.getDataSource()===m.getDefaultDataSource()){return;}}m.invalidateQuery();t.input.destroySuggestionRows();t.input.triggerSearch(e);}});},initCancelButton:function(){this.cancelButton=new sap.m.Button({text:'{i18n>cancelBtn}'});this.cancelButton.addStyleClass("sapUshellSearchCancelButton");},setModel:function(m){this.select.setModel(m);this.input.setModel(m);this.button.setModel(m);this.cancelButton.setModel(m);},renderer:function(r,c){r.write('<div');r.writeControlData(c);r.addClass("SearchFieldGroup");r.writeClasses();r.write('>');r.renderControl(c.getAggregation('_flexBox'));r.write('</div>');}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFilterBar',['sap/m/Toolbar'],function(){"use strict";return sap.m.Toolbar.extend("sap.ushell.renderers.fiori2.search.controls.SearchFilterBar",{constructor:function(o){var t=this;o=jQuery.extend({},{design:sap.m.ToolbarDesign.Info},o);sap.m.Toolbar.prototype.constructor.apply(t,[o]);t.addStyleClass('sapUshellSearchFilterContextualBar');t.filterFormatter=t.filterFormatter.bind(t);t.filterText=new sap.m.Text({text:{parts:[{path:"/uiFilter/rootCondition"},{path:"/facets"}],formatter:t.filterFormatter},tooltip:{parts:[{path:"/uiFilter/rootCondition"},{path:"/facets"}],formatter:t.filterFormatter}}).addStyleClass("sapUshellSearchFilterText");t.filterText.setMaxLines(1);t.filterText.clampText();t.addContent(t.filterText);t.addContent(new sap.m.ToolbarSpacer());t.resetButton=new sap.ui.core.Icon({src:"sap-icon://clear-filter",tooltip:sap.ushell.resources.i18n.getText("resetFilterButton_tooltip")}).addStyleClass("sapUshellSearchFilterResetButton");t.addContent(t.resetButton);},filterFormatter:function(r,f){if(!r||!r.hasFilters()){return'';}r=this.sortConditions(r,f);var l=[];for(var i=0;i<r.conditions.length;++i){var c=r.conditions[i];for(var j=0;j<c.conditions.length;++j){var a=c.conditions[j];l.push(this._formatLabel(a.valueLabel,a.operator));}}return sap.ushell.resources.i18n.getText("filtered_by",l.join(', '));},_formatLabel:function(l,o){var a;switch(o){case'Bw':a=l+'*';break;case'Ew':a='*'+l;break;case'Co':a='*'+l+'*';break;default:a=l;break;}return a;},sortConditions:function(r,f){if(f.length===0){return r;}var g=function(c){var b=c.conditions[0];if(b.attribute){return b.attribute;}else{return b.conditions[0].attribute;}};var a=function(l,b,v){for(var i=0;i<l.length;++i){var e=l[i];if(e[b]===v){return i;}}};r=r.clone();r.conditions.sort(function(b,d){var e=g(b);var h=a(f,'dimension',e);var j=g(d);var k=a(f,'dimension',j);return h-k;});var s=function(c){var b=g(c);var d=a(f,'dimension',b);if(!d)return;var e=f[d];var v=function(h,j){return a(e.items,'label',h.valueLabel)-a(e.items,'label',j.valueLabel);};c.conditions.sort(v);};for(var i=0;i<r.conditions.length;++i){var c=r.conditions[i];s(c);}return r;},renderer:'sap.m.ToolbarRenderer',onAfterRendering:function(){var t=this;t.resetButton.attachPress(function(){var m=t.getModel();m.eventLogger.logEvent({type:m.eventLogger.CLEAR_ALL_FILTERS});m.resetFilterConditions(true);});var $=jQuery('.sapUshellSearchFilterText');$.attr('aria-label',sap.ushell.resources.i18n.getText("filtered_by_aria_label"));}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchInput',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/SearchConfiguration','sap/m/Input','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType','sap/ui/layout/HorizontalLayout','sap/ui/layout/VerticalLayout'],function(S,a,I,b,H,V){"use strict";
sap.m.Input.extend('sap.ushell.renderers.fiori2.search.controls.SearchInput',{
constructor:function(i,o){var t=this;o=jQuery.extend({},{width:'100%',showValueStateMessage:false,showTableSuggestionValueHelp:false,enableSuggestionsHighlighting:false,showSuggestion:true,filterSuggests:false,suggestionColumns:[new sap.m.Column({})],placeholder:{path:'/searchTermPlaceholder',mode:sap.ui.model.BindingMode.OneWay},liveChange:this.handleLiveChange.bind(this),suggestionItemSelected:this.handleSuggestionItemSelected.bind(this),enabled:{parts:[{path:"/initializingObjSearch"}],formatter:function(c){return!c;}}},o);var p=sap.ui.Device.system.phone;sap.ui.Device.system.phone=false;sap.m.Input.prototype.constructor.apply(this,[i,o]);sap.ui.Device.system.phone=p;this.bindAggregation("suggestionRows","/suggestions",function(i,c){return t.suggestionItemFactory(i,c);});this.addStyleClass('searchInput');this._bUseDialog=false;this._bFullScreen=false;this._ariaDescriptionIdNoResults=i+"-No-Results-Description";},
renderer:'sap.m.InputRenderer',
onsapenter:function(e){if(!(this._oSuggestionPopup&&this._oSuggestionPopup.isOpen()&&this._iPopupListSelectedIndex>=0)){this.getModel().invalidateQuery();this.triggerSearch(e);}sap.m.Input.prototype.onsapenter.apply(this,arguments);},
triggerSearch:function(e){var t=this;S.subscribeOnlyOnce('triggerSearch','allSearchFinished',function(){t.getModel().autoStartApp();},t);var s=t.getValue();if(s.trim()===''){s='*';}t.getModel().setSearchBoxTerm(s,false);t.navigateToSearchApp();t.destroySuggestionRows();t.getModel().abortSuggestions();},
handleLiveChange:function(e){var s=this.getValue();var m=this.getModel();m.setSearchBoxTerm(s,false);if(m.getSearchBoxTerm().length>0){m.doSuggestion();}else{this.destroySuggestionRows();m.abortSuggestions();}},
handleSuggestionItemSelected:function(e){var m=this.getModel();var s=m.getSearchBoxTerm();var c=e.getParameter('selectedRow').getBindingContext().getObject();var d=c.searchTerm||'';var f=c.dataSource||m.getDataSource();var t=c.url;var g=c.uiSuggestionType;m.eventLogger.logEvent({type:m.eventLogger.SUGGESTION_SELECT,suggestionType:g,suggestionTerm:d,searchTerm:s,targetUrl:t,dataSourceKey:f?f.id:''});this.selectText(0,0);switch(g){case b.App:this.destroySuggestionRows();m.abortSuggestions();this.logRecentActivity(c);if(t[0]==='#'){if(t.indexOf('#Action-search')===0&&t===decodeURIComponent(S.getHashFromUrl())){m.setSearchBoxTerm(m.getLastSearchTerm(),false);sap.ui.getCore().getEventBus().publish("allSearchFinished");return;}if(window.hasher){window.hasher.setHash(t);}else{window.location.href=t;}}else{S.openURL(t,"_blank");m.setSearchBoxTerm('',false);this.setValue('');}if(t.indexOf('#Action-search')!==0){sap.ui.require("sap/ushell/renderers/fiori2/search/SearchShellHelper").setSearchState('COL');}else{this.focus();}break;case b.DataSource:m.setDataSource(f,false);m.setSearchBoxTerm('',false);this.setValue('');this.focus();break;case b.SearchTermData:m.setDataSource(f,false);m.setSearchBoxTerm(d,false);this.getModel().invalidateQuery();this.navigateToSearchApp();this.setValue(d);break;case b.SearchTermHistory:m.setDataSource(f,false);m.setSearchBoxTerm(d,false);this.getModel().invalidateQuery();this.navigateToSearchApp();this.setValue(d);break;case b.Object:if(c.titleNavigation){c.titleNavigation.performNavigation();}break;default:break;}},
logRecentActivity:function(s){try{var r={title:s.title,appType:'App',url:s.url,appId:s.url};var c=sap.ushell.Container.getRenderer('fiori2');c.logRecentActivity(r);}catch(e){jQuery.sap.log.warning('user recent activity logging failed:'+e);}},
suggestionItemFactory:function(i,c){var s=c.getObject();switch(s.uiSuggestionType){case b.Object:return this.objectSuggestionItemFactory(i,c);default:return this.regularSuggestionItemFactory(i,c);}},
objectSuggestionItemFactory:function(i,c){var d=new sap.m.Image({src:"{imageUrl}"});d.addStyleClass('sapUshellSearchObjectSuggestion-Image');var l=new sap.m.Label({text:"{label1}"});l.addEventDelegate({onAfterRendering:function(){S.boldTagUnescaper(this.getDomRef());}},l);l.addStyleClass('sapUshellSearchObjectSuggestion-Label1');var e=new sap.m.Label({text:"{label2}"});e.addEventDelegate({onAfterRendering:function(){S.boldTagUnescaper(this.getDomRef());}},e);e.addStyleClass('sapUshellSearchObjectSuggestion-Label2');var f=new V({content:[l,e]});var g=new H({content:[d,f]});g.getText=function(){return this.getValue();}.bind(this);var h=new sap.m.ColumnListItem({cells:[g],type:"Active"});h.addStyleClass('searchSuggestion');h.addStyleClass('searchObjectSuggestion');return h;},
regularSuggestionItemFactory:function(i,c){var t=this;var d=new sap.m.Label({text:{path:"icon",formatter:function(v){if(v){return"<i>"+sap.ushell.resources.i18n.getText("label_app")+"</i>";}return"";}}}).addStyleClass('suggestText').addStyleClass('suggestNavItem').addStyleClass('suggestListItemCell');d.addEventDelegate({onAfterRendering:function(){S.boldTagUnescaper(this.getDomRef());}},d);var f=new sap.ui.core.Icon({src:"{icon}"}).addStyleClass('suggestIcon').addStyleClass('sapUshellSearchSuggestAppIcon').addStyleClass('suggestListItemCell');var l=new sap.m.Text({text:"{label}",layoutData:new sap.m.FlexItemData({shrinkFactor:1,minWidth:"4rem"}),wrapping:false}).addStyleClass('suggestText').addStyleClass('suggestNavItem').addStyleClass('suggestListItemCell');l.addEventDelegate({onAfterRendering:function(){S.boldTagUnescaper(this.getDomRef());}},l);var g=new sap.m.CustomListItem({type:sap.m.ListType.Active,content:new sap.m.FlexBox({items:[d,f,l]})});var s=c.oModel.getProperty(c.sPath);g.getText=function(){return(typeof s.labelRaw)==='string'?s.labelRaw:t.getValue();};var h=new sap.m.ColumnListItem({cells:[g],type:"Active"});if(s.uiSuggestionType===b.App){if(s.title&&s.title.indexOf("combinedAppSuggestion")>=0){h.addStyleClass('searchCombinedAppSuggestion');}else{h.addStyleClass('searchAppSuggestion');}}if(s.uiSuggestionType===b.DataSource){h.addStyleClass('searchDataSourceSuggestion');}if(s.uiSuggestionType===b.SearchTermData){h.addStyleClass('searchBOSuggestion');}if(s.uiSuggestionType===b.SearchTermHistory){h.addStyleClass('searchHistorySuggestion');}h.addStyleClass('searchSuggestion');h.addEventDelegate({onAfterRendering:function(e){var j=h.$().find('.suggestListItemCell');var k=0;j.each(function(m){k+=$(this).outerWidth(true);});if(k>h.$().find('li').get(0).scrollWidth){h.setTooltip($(j[0]).text()+" "+$(j[2]).text());}}});return h;},
navigateToSearchApp:function(){if(S.isSearchAppActive()){this.getModel()._firePerspectiveQuery();}else{var h=this.getModel().renderSearchURL();window.location.hash=h;}},
getAriaDescriptionIdForNoResults:function(){return this._ariaDescriptionIdNoResults;},
onAfterRendering:function(e){var c=$(this.getDomRef()).find("#searchFieldInShell-input-inner");$(this.getDomRef()).find('input').attr('autocomplete','off');$(this.getDomRef()).find('input').attr('autocorrect','off');$(this.getDomRef()).find('input').attr('type','search');$(this.getDomRef()).find('input').attr('name','search');var d=jQuery('<form action=""></form>').on("submit",function(){return false;});$(this.getDomRef()).children('input').parent().append(d);$(this.getDomRef()).children('input').detach().appendTo(d);c.attr("aria-describedby",c.attr("aria-describedby")+" "+this._ariaDescriptionIdNoResults);},
onValueRevertedByEscape:function(v){if(S.isSearchAppActive()){return;}this.setValue(" ");}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchLabel',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";return sap.m.Label.extend('sap.ushell.renderers.fiori2.search.controls.SearchLabel',{renderer:'sap.m.LabelRenderer',onAfterRendering:function(){var d=this.getDomRef();S.boldTagUnescaper(d);S.forwardEllipsis4Whyfound(d);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchLayout',[],function(){"use strict";return sap.ui.layout.FixFlex.extend("sap.ushell.renderers.fiori2.search.controls.SearchLayout",{metadata:{properties:{isBusy:{type:"boolean",defaultValue:false},showFacets:{type:"boolean",defaultValue:false}},aggregations:{"resultListContainer":{type:"sap.ui.core.Control",multiple:false},"facets":{type:"sap.ui.core.Control",multiple:false},"busyIndicator":{type:"sap.ui.core.Control",multiple:false}}},init:function(){var t=this;sap.ui.layout.FixFlex.prototype.init.apply(this);var r=new sap.m.ScrollContainer("ushell-search-result-container",{height:'100%',vertical:true});t.setFlexContent(r);},constructor:function(o,i){var t=this;sap.ui.layout.FixFlex.prototype.constructor.apply(this,[o],i);t.setVertical(false);this.addEventDelegate({onAfterRendering:function(){var $=jQuery(".sapUiFixFlexFixed");if(t.getShowFacets()&&!sap.ui.Device.system.phone){$.addClass('sapUshellSearchFacetPanelOpen');}else{$.removeClass('sapUshellSearchFacetPanelOpen');}}});},getFacets:function(){return this.getFixContent();},setFacets:function(c){this.addFixContent(c);},getResultListContainer:function(){var r=this.getFlexContent();var c=r.getContent();if(c.length>0){return c[0];}return undefined;},setResultListContainer:function(c){var r=this.getFlexContent();r.destroyContent();r.addContent(c);},setIsBusy:function(i){if(i){this.getBusyIndicator().open();this.busyFlag=true;}else if(this.busyFlag){this.getBusyIndicator().close();this.busyFlag=false;}this.setProperty("isBusy",i,true);},setShowFacets:function(a){var $=jQuery(".sapUiFixFlexFixed");var b=jQuery(".sapUshellSearchResultListsContainer");if(!a){b.removeClass("sapUshellSearchFacetPanelOpen");$.removeClass("sapUshellSearchFacetPanelOpen");$.attr("aria-hidden","true");}else{b.addClass("sapUshellSearchFacetPanelOpen");$.addClass("sapUshellSearchFacetPanelOpen");$.attr("aria-hidden","false");}var h=function(e){sap.ui.getCore().getEventBus().publish("searchLayoutChanged");};$.one("transitionend",h);this.setProperty("showFacets",a,true);return this;},renderer:"sap.ui.layout.FixFlexRenderer"});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchLink',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";return sap.m.Link.extend('sap.ushell.renderers.fiori2.search.controls.SearchLink',{renderer:'sap.m.LinkRenderer',onAfterRendering:function(){var d=this.getDomRef();S.boldTagUnescaper(d);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchMultiSelectionControl',[],function(){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchMultiSelectionControl",{metadata:{properties:{resultList:"object"},aggregations:{actions:"object"}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchResultList-MultiSelectionControl");r.writeClasses();r.write(">");c._renderer(r);r.write("</div>");},_renderer:function(r){var t=this;var e=new sap.m.ToggleButton({icon:"sap-icon://multi-select",tooltip:sap.ushell.resources.i18n.getText("toggleSelectionModeBtn"),press:function(){if(this.getPressed()){t.getResultList.enableSelectionMode();t.getModel().setProperty("/multiSelectionEnabled",true);}else{t.getResultList.disableSelectionMode();t.getModel().setProperty("/multiSelectionEnabled",false);}},visible:false,pressed:{parts:[{path:'/multiSelectionEnabled'}],formatter:function(l){return l>0;},mode:sap.ui.model.BindingMode.OneWay}});e.setModel(t.getModel());e.addStyleClass("sapUshellSearchResultList-toggleMultiSelectionButton");r.renderControl(e);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchNoResultScreen',['sap/ushell/renderers/fiori2/search/SearchShellHelper','sap/ushell/renderers/fiori2/search/SearchConfiguration'],function(S,a){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchNoResultScreen",{metadata:{properties:{searchBoxTerm:"string"}},renderer:function(r,c){var s=S.getSearchInput();var b;if(s){b=s.getAriaDescriptionIdForNoResults();}var e=$('<div>').text(c.getSearchBoxTerm()).html();r.write('<div class="sapUshellSearch-no-result"');r.writeControlData(c);r.write('>');r.write('<div class="sapUshellSearch-no-result-icon">');r.writeIcon(sap.ui.core.IconPool.getIconURI("travel-request"));r.write('</div><div class="sapUshellSearch-no-result-text" role="alert">');r.write('<div ');if(b){r.write('id="'+b+'" ');}r.write('class="sapUshellSearch-no-result-info">'+sap.ushell.resources.i18n.getText("no_results_info",e).replace('<b>"&1"</b>','<b>"'+e+'"</b>'));r.write('</div>');c.renderAppFinderLink(r,c);r.write('<div class="sapUshellSearch-no-result-tips">'+sap.ushell.resources.i18n.getText("no_results_tips")+'</div> ');r.write('</div></div>');},renderAppFinderLink:function(r,c){if(!a.getInstance().isLaunchpad()){return;}var m=c.getModel();if(m.getDataSource()!==m.appDataSource){return;}var l=sap.ushell.resources.i18n.getText('no_results_link_appfinder','xxxx');var i=l.indexOf('xxxx');var p=l.slice(0,i);var s=l.slice(i+4);r.write('<div class="sapUshellSearch-no-result-info">');r.write(p);var b=new sap.m.Link({text:sap.ushell.resources.i18n.getText('appFinderTitle'),press:function(){var C=sap.ushell&&sap.ushell.Container&&(sap.ushell.Container.getService("SmartNavigation")||sap.ushell.Container.getService("CrossApplicationNavigation"));C.toExternal({target:{shellHash:'#Shell-home&/appFinder/catalog'}});}});r.renderControl(b);r.write(s);r.write('</div>');}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchRelatedObjectsToolbar',['sap/ushell/renderers/fiori2/search/SearchModel'],function(S){"use strict";
var m=sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar",{
metadata:{properties:{itemId:"string",navigationObjects:{type:"object",multiple:true},positionInList:"int"},aggregations:{_relatedObjectActionsToolbar:{type:"sap.m.Toolbar",multiple:false,visibility:"hidden"}}},
init:function(){var t=this;if(sap.ui.core.Control.prototype.init){sap.ui.core.Control.prototype.init.apply(t,arguments);}sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar._allOfMyCurrentInstances.push(t);t.setAggregation("_relatedObjectActionsToolbar",new sap.m.Toolbar({design:sap.m.ToolbarDesign.Solid}).data("sap-ui-fastnavgroup","false",true).addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Toolbar"));if(typeof sap!=='undefined'&&sap.ui&&sap.ui.getCore){sap.ui.getCore().getEventBus().subscribe("searchLayoutChanged",t._layoutToolbarElements,t);}},
exit:function(){var t=this;if(sap.ui.core.Control.prototype.exit){sap.ui.core.Control.prototype.exit.apply(t,arguments);}var a=sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar._allOfMyCurrentInstances;for(var i=0;i<a.length;i++){if(a[i]==t){a.splice(i,1);break;}}if(typeof sap!=='undefined'&&sap.ui&&sap.ui.getCore){sap.ui.getCore().getEventBus().unsubscribe("searchLayoutChanged",t._layoutToolbarElements,t);}},
renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchResultListItem-RelatedObjectsToolbar");r.writeClasses();r.write(">");c._renderToolbar(r);r.write("</div>");},
_renderToolbar:function(r){var t=this;var i;var _=t.getAggregation("_relatedObjectActionsToolbar");_.destroyContent();var c=function(b){return function(){t._performNavigation(b,{trackingOnly:true});};};var n=t.getNavigationObjects();if(n.length>0){var a=[];for(i=0;i<n.length;i++){var b=n[i];var l=new sap.m.Link({text:b.getText(),href:b.getHref(),layoutData:new sap.m.ToolbarLayoutData({shrinkable:false}),press:c(b)});var d=b.getTarget();if(d){l.setTarget(d);}l.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Element");a.push(l);}var e=new sap.m.ToolbarSpacer();e.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Spacer");_.addContent(e);for(i=0;i<a.length;i++){_.addContent(a[i]);}t._overFlowButton=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("overflow")});t._overFlowButton.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-OverFlowButton");_.addContent(t._overFlowButton);t._overFlowSheet=new sap.m.ActionSheet({placement:sap.m.PlacementType.Top});t._overFlowButton.attachPress(function(){t._overFlowSheet.openBy(t._overFlowButton);});r.renderControl(_);}},
onAfterRendering:function(){var t=this;t._layoutToolbarElements();},
_layoutToolbarElements:function(){var t=this;var _=t.getAggregation("_relatedObjectActionsToolbar");if(!(t.getDomRef()&&_.getDomRef())){return;}var a=$(_.getDomRef());var b=a.innerWidth();if($(t.getDomRef()).css("display")==="none"||a.css("display")==="none"){return;}t.toolbarWidth=b;var c=$(t._overFlowButton.getDomRef());c.css("display","none");var d=0;var p=function(k,l){t._performNavigation(l);};var e=a.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar-Element");for(var i=0;i<e.length;i++){var f=$(e[i]);f.css("display","");var g=d+f.outerWidth(true);if(g>b){if(i<e.length){c.css("display","");var o=c.outerWidth(true);for(;i>=0;i--){f=$(e[i]);g-=f.outerWidth(true);if(g+o<=b){break;}}}var n=t.getNavigationObjects();t._overFlowSheet.destroyButtons();i=(i>=0)?i:0;for(;i<e.length;i++){f=$(e[i]);f.css("display","none");var h=n[i];var j=new sap.m.Button({text:h.getText()});j.attachPress(h,p);t._overFlowSheet.addButton(j);}break;}d=g;}t._setupItemNavigation();},
_setupItemNavigation:function(){var t=this;if(!t.theItemNavigation){t.theItemNavigation=new sap.ui.core.delegate.ItemNavigation();t.addDelegate(t.theItemNavigation);}t.theItemNavigation.setCycling(false);t.theItemNavigation.setRootDomRef(t.getDomRef());var a=[];var _=t.getAggregation("_relatedObjectActionsToolbar");var c=_.getContent();for(var i=0;i<c.length;i++){if(!c[i].hasStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Element")){continue;}if(!$(c[i].getDomRef()).attr("tabindex")){var b="-1";if(c[i].getPressed&&c[i].getPressed()){b="0";}$(c[i].getDomRef()).attr("tabindex",b);}a.push(c[i].getDomRef());}var d=t._overFlowButton.getDomRef();a.push(d);$(d).attr("tabindex","-1");t.theItemNavigation.setItemDomRefs(a);},
_performNavigation:function(n,p){var t=p&&p.trackingOnly||false;n.performNavigation({trackingOnly:t});}
});
m._allOfMyCurrentInstances=[];$(window).on("resize",function(){for(var i=0;i<this._allOfMyCurrentInstances.length;i++){this._allOfMyCurrentInstances[i]._layoutToolbarElements();}}.bind(m));return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultList',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";return sap.m.List.extend('sap.ushell.renderers.fiori2.search.controls.SearchResultList',{init:function(){if(sap.m.List.prototype.init){sap.m.List.prototype.init.apply(this,arguments);}this.addStyleClass("searchResultList");},renderer:'sap.m.ListRenderer',onAfterRendering:function(){var t=this;sap.m.List.prototype.onAfterRendering.apply(t,arguments);var m=sap.ushell.renderers.fiori2.search.getModelSingleton();var a=m.getProperty("/multiSelectionEnabled");if(a){t.enableSelectionMode(false);}t._prepareResizeHandler();t.collectListItemsForNavigation();},collectListItemsForNavigation:function(){var t=this;var m=t.getItems();if(m.length===0){return;}var d=function(){t._doCollectListItemsForNavigation();};for(var i=0;i<m.length;i++){var M=m[i];if(M.hasStyleClass("sapUshellSearchResultListItemApps")){var c=M.getContent();if(c.length>0){c[0].addEventDelegate({onAfterRendering:d});}}}t._doCollectListItemsForNavigation();},_doCollectListItemsForNavigation:function(){var t=this;var i,j;var f=t.getDomRef();if(!f){return;}var I=t.getItemNavigation();if(!I){t._startItemNavigation();I=t.getItemNavigation();}if(!I){return;}t._bItemNavigationInvalidated=false;var r=f.getElementsByTagName("li");var d=[];var T=[];for(i=0;i<r.length;i++){var R=r[i];if($(R).hasClass("sapUshellSearchResultListItemApps")){var a=R.getElementsByClassName("sapUshellSearchTileWrapper");for(j=0;j<a.length;j++){var b=S.getFocusableTileDomRef(a[j]);if(!b||$(b).is(":hidden")){continue;}d.push(b);T.push(b);}$(R).removeAttr("tabindex");$(R).removeAttr("role");$(R).attr("aria-hidden","true");}else if($(R).hasClass("sapUshellSearchResultListFooter")){var s=R.getElementsByClassName("sapUshellResultListMoreFooter");for(j=0;j<s.length;j++){d.push(s[j]);T.push(s[j]);}}else if($(R).hasClass("sapUshellSearchResultListItem")){d.push(R);T.push(R);}}if(d.length>0){var c=$(d[0]).closest("ul");var e=c.length>0?c[0]:d[0].parentElement;I.setRootDomRef(e);}I.setItemDomRefs(d);I.setCycling(false);I.setPageSize(10);if(T.length>0){var g=$(T[0]).attr("id");for(i=1;i<T.length;i++){g+=" "+$(T[i]).attr("id");}$(t.getDomRef()).children("[role='listbox']").attr("aria-owns",g);}},_prepareResizeHandler:function(){var t=this;var r=[768,1151];var w=function(){var b=window.innerWidth;if(b<r[0]){return 0;}for(var i=0;i<r.length-1;i++){if(b>=r[i]&&b<r[i+1]){return i+1;}}return r.length;};var l=w();var a=function(e){var c=w();if(c!=l){l=c;var m=t.getItems();for(var i=0;i<m.length;i++){var M=m[i];if(M.getContent()&&M.getContent().length>0&&M.getContent()[0].resizeEventHappened){M.getContent()[0].resizeEventHappened();}}}};$(window).on("resize",a);},enableSelectionMode:function(a){var t=this;var d=jQuery.Deferred();a=a===undefined?true:a;var s=$(t.getDomRef());if(!a){s.addClass("sapUshellSearchResultList-ShowMultiSelection");d.resolve();return d.promise();}var b=200;var c=s.find(".sapUshellSearchResultListItem-CheckboxExpandContainer");var e=s.find(".sapUshellSearchResultListItem-Attributes");var f=parseFloat(e.css("padding-left"));var g=c.find(".sapUshellSearchResultListItem-CheckboxContainer");var h=g.width();if(!s.hasClass("sapUshellSearchResultList-ShowMultiSelection")){c.css("width","0");c.css("opacity","0");e.css("padding-left",f);s.addClass("sapUshellSearchResultList-ShowMultiSelection");var n=f+h;var i=c.animate({"width":h,"opacity":1},b,function(){$(this).css("width","");$(this).css("opacity","");});var j=e.animate({"padding-left":n},b,function(){$(this).css("padding-left","");});jQuery.when(i,j).done(function(){d.resolve();});}else{d.resolve();}return d.promise();},disableSelectionMode:function(a){var t=this;var d=jQuery.Deferred();a=a===undefined?true:a;var s=$(t.getDomRef());if(!a){s.removeClass("sapUshellSearchResultList-ShowMultiSelection");d.resolve();return d.promise();}var b=200;var c=s.find(".sapUshellSearchResultListItem-CheckboxExpandContainer");var e=s.find(".sapUshellSearchResultListItem-Attributes");var f=parseFloat(e.css("padding-left"));var g=c.find(".sapUshellSearchResultListItem-CheckboxContainer");var h=g.width();if(s.hasClass("sapUshellSearchResultList-ShowMultiSelection")){var n=f-h;var i=c.animate({"width":0,"opacity":0},b).promise();var j=e.animate({"padding-left":n},b).promise();jQuery.when(i,j).done(function(){s.removeClass("sapUshellSearchResultList-ShowMultiSelection");c.css("width","");c.css("opacity","");e.css("padding-left","");d.resolve();});}else{d.resolve();}return d.promise();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListContainer',[],function(){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListContainer",{init:function(){this.data("sap-ui-fastnavgroup","true",true);},metadata:{aggregations:{"filterBar":{type:"sap.ui.core.Control",multiple:false},"centerArea":{singularName:"content"},"totalCountBar":{type:"sap.ui.core.Control",multiple:false},"didYouMeanBar":{type:"sap.ui.core.Control",multiple:false},"noResultScreen":{type:"sap.ui.core.Control",multiple:false},"totalCountHiddenElement":{type:"sap.ui.core.InvisibleText",multiple:false}}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchResultListsContainer");r.addClass("sapUiResponsiveMargin");if(c.getModel()&&c.getModel().getFacetVisibility()===true){r.addClass("sapUshellSearchFacetPanelOpen");}r.writeClasses();r.write('>');r.renderControl(c.getNoResultScreen());r.renderControl(c.getDidYouMeanBar());r.write('<div class="sapUshellSearchTotalCountBar">');r.renderControl(c.getTotalCountBar());r.write("</div>");for(var i=0;i<c.getCenterArea().length;i++){r.renderControl(c.getCenterArea()[i]);}r.renderControl(c.getTotalCountHiddenElement());r.write("</div>");}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListItem',['sap/ushell/renderers/fiori2/search/controls/SearchText','sap/ushell/renderers/fiori2/search/controls/SearchLink','sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/controls/SearchRelatedObjectsToolbar','sap/ushell/renderers/fiori2/search/SearchModel'],function(S,a,b,c,e){"use strict";var n='\u2013';return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListItem",{metadata:{properties:{itemId:"string",title:"string",titleDescription:"string",titleNavigation:"object",geoJson:"object",type:"string",imageUrl:"string",imageFormat:"string",imageNavigation:"object",attributes:{type:"object",multiple:true},navigationObjects:{type:"object",multiple:true},selected:"boolean",expanded:"boolean",parentListItem:"object",additionalParameters:"object",positionInList:"int",resultSetId:"string",layoutCache:"object",totalCountHiddenElement:"object"},aggregations:{_titleLink:{type:"sap.ushell.renderers.fiori2.search.controls.SearchLink",multiple:false,visibility:"hidden"},_titleLinkDescription:{type:"sap.ushell.renderers.fiori2.search.controls.SearchText",multiple:false,visibility:"hidden"},_typeText:{type:"sap.ushell.renderers.fiori2.search.controls.SearchText",multiple:false,visibility:"hidden"},_multiLineDescriptionText:{type:"sap.ushell.renderers.fiori2.search.controls.SearchText",multiple:false,visibility:"hidden"},_selectionCheckBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"},_expandButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_attributeLabels:{type:"sap.m.Label",multiple:true,visibility:"hidden"},_attributeValues:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},_attributeValuesWithoutWhyfoundHiddenTexts:{type:"sap.ui.core.InvisibleText",multiple:true,visibility:"hidden"},_relatedObjectActionsToolbar:{type:"sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar",multiple:false,visibility:"hidden"},_titleLabeledByText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}},init:function(){var t=this;if(sap.ui.core.Control.prototype.init){sap.ui.core.Control.prototype.init.apply(this,arguments);}t.setAggregation("_titleLink",new a({}).addStyleClass("sapUshellSearchResultListItem-Title").addStyleClass("sapUshellSearchResultListItem-MightOverflow").attachPress(function(E){var p=t._getPhoneSize();var w=$(window).width();if(w<=p){E.preventDefault();E.cancelBubble();t._performTitleNavigation();}else{t._performTitleNavigation({trackingOnly:true});}}));t.setAggregation("_titleLinkDescription",new S({}).addStyleClass("sapUshellSearchResultListItem-Category").addStyleClass("sapUshellSearchResultListItem-TitleDescription").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));t.setAggregation("_typeText",new S().addStyleClass("sapUshellSearchResultListItem-Category").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));t.setAggregation("_multiLineDescriptionText",new S({maxLines:5}).addStyleClass("sapUshellSearchResultListItem-MultiLineDescription").addStyleClass("sapUshellSearchResultListItem-MightOverflow").data("islongtext","true",true));t.setAggregation("_selectionCheckBox",new sap.m.CheckBox({select:function(E){t.setProperty("selected",E.getParameters().selected,true);}}));t.setAggregation("_expandButton",new sap.m.Button({type:sap.m.ButtonType.Transparent,press:function(E){t.toggleDetails();}}));t.setAggregation("_relatedObjectActionsToolbar",new c().addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar"));t.setAggregation("_titleLabeledByText",new sap.ui.core.InvisibleText());},renderer:function(r,C){C._renderer(r);},_renderer:function(r){this._registerItemPressHandler();this._resetPrecalculatedValues();this._renderContainer(r);this._renderAccessibilityInformation(r);},_renderContainer:function(r){var t=this;r.write('<div');r.writeControlData(t);r.addClass("sapUshellSearchResultListItem-Container");if(t.getImageUrl()){r.addClass("sapUshellSearchResultListItem-WithImage");}if(t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail"){r.addClass("sapUshellSearchResultListItem-Document");}r.writeClasses();r.write('>');t._renderContentContainer(r);t._renderExpandButtonContainer(r);r.write('</div>');},_renderContentContainer:function(r){r.write('<div class="sapUshellSearchResultListItem-Content">');this._renderTitleContainer(r);this._renderAttributesContainer(r);r.write('</div>');},_renderExpandButtonContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-ExpandButtonContainer">');r.write('<div class="sapUshellSearchResultListItem-ExpandButton">');var i,d;var f=t.getProperty("expanded");if(f){i=sap.ui.core.IconPool.getIconURI("slim-arrow-up");d=sap.ushell.resources.i18n.getText("hideDetailBtn_tooltip");}else{i=sap.ui.core.IconPool.getIconURI("slim-arrow-down");d=sap.ushell.resources.i18n.getText("showDetailBtn_tooltip");}var g=t.getAggregation("_expandButton");g.setIcon(i);g.setTooltip(d);g.onAfterRendering=function(){sap.m.Button.prototype.onAfterRendering.apply(this,arguments);t.setAriaExpandedState();};r.renderControl(g);r.write('</div>');r.write('</div>');},_renderTitleContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-TitleAndImageContainer">');r.write('<div class="sapUshellSearchResultListItem-TitleContainer">');t._renderCheckbox(r);var d="";var f;var g=t.getTitleNavigation();if(g){d=g.getHref();f=g.getTarget();}var h=t.getAggregation("_titleLink");h.setHref(d);h.setText(t.getTitle());if(f){h.setTarget(f);}if(d.length===0){h.setEnabled(false);}h.onAfterRendering=function(){if(a.prototype.onAfterRendering){a.prototype.onAfterRendering.apply(this,arguments);}t.forwardEllipsis($(this.getDomRef()));};r.renderControl(h);var i=t.getTitleDescription();if(i&&i.length>0){var j=t.getAggregation("_titleLinkDescription");j.setText(i);r.renderControl(j);}var k=t.getAggregation("_typeText");k.setText(t.getType());r.renderControl(k);r.write('</div>');t._renderImageForPhone(r);r.write('</div>');},_renderCheckbox:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-CheckboxExpandContainer">');r.write('<div class="sapUshellSearchResultListItem-CheckboxContainer">');r.write('<div class="sapUshellSearchResultListItem-CheckboxAlignmentContainer">');var d=t.getAggregation("_selectionCheckBox");var s=t.getProperty("selected");d.setSelected(s);r.renderControl(d);r.write('</div>');r.write('</div>');r.write('</div>');},_renderImageForPhone:function(r){var t=this;if(t.getImageUrl()){r.write('<div class="sapUshellSearchResultListItem-TitleImage');if(this.getImageFormat()=="round"){r.write(" sapUshellSearchResultListItem-ImageContainerRound");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');r.write('<img class="sapUshellSearchResultListItem-Image" src="');r.write(t.getImageUrl());r.write('">');r.write('</div>');}},_renderImageForDocument:function(r){var t=this;if(t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail"){var i=this.getImageNavigation();var d=i?i.getHref():"";var f,g;if(d&&d.length>0){f='<a href="'+d+'"';g='</a>';}else{f='<div';g='</div>';}r.write('<div class="sapUshellSearchResultListItem-DocumentThumbnailContainer">');r.write(f+' class="sapUshellSearchResultListItem-DocumentThumbnailBorder">');r.write('<div class="sapUshellSearchResultListItem-DocumentThumbnail-DogEar"></div>');var z=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("search"),useIconTooltip:false});z.addStyleClass("sapUshellSearchResultListItem-DocumentThumbnailZoomIcon");r.renderControl(z);var h=t.getImageUrl();if(h&&h.length>0){r.write('<img class="sapUshellSearchResultListItem-DocumentThumbnail" src="');r.write(t.getImageUrl());r.write('">');}r.write(g);r.write('</div>');}},_cutDescrAttributeOutOfAttributeList:function(){var d=this.getAttributes();for(var i=0;i<d.length;i++){var f=d[i];if(f.longtext){d.splice(i,1);this.setAttributes(d);return f;}}return undefined;},_renderMultiLineDescription:function(r){var t=this;if(t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail"){var d=this._cutDescrAttributeOutOfAttributeList();if(d&&d.value&&d.value.length>0){var f=function(v){return function(){v.prototype.onAfterRendering.apply(this,arguments);var i=$(this.getDomRef());i.attr("aria-describedby",i.attr("data-tooltippedby"));};};var g=t.getAggregation("_multiLineDescriptionText");g.setText(d.value);if(d.whyfound){g.data("ishighlighted","true",true);}else{g.data("ishighlighted","false",true);}if(d.valueWithoutWhyfound){var h=new sap.ui.core.InvisibleText({});h.setText(d.valueWithoutWhyfound);g.data("tooltippedBy",h.getId(),true);g.onAfterRendering=f(S);t.addAggregation("_attributeValuesWithoutWhyfoundHiddenTexts",h,true);r.renderControl(h);}r.renderControl(g);}}},_renderAttributesContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-AttributesExpandContainer');var d=t.getProperty("expanded");if(d){r.write(" sapUshellSearchResultListItem-AttributesExpanded");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-AttributesAndActions">');t._renderImageForDocument(r);t._renderMultiLineDescription(r);r.write('<ul class="sapUshellSearchResultListItem-Attributes">');var i=t.getAttributes();t._renderImageAttribute(r,(i.length==0));t._renderAllAttributes(r,i);r.write('<li class="sapUshellSearchResultListItem-ExpandSpacerAttribute" aria-hidden="true"></li>');r.write('</ul>');t._renderRelatedObjectsToolbar(r);r.write('</div>');r.write('</div>');},_renderAllAttributes:function(r,d){var t=this;if(d.length==0){r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-MainAttribute sapUshellSearchResultListItem-EmptyAttributePlaceholder" aria-hidden="true"></li>');return;}var f;var l;var v;var g;var h,j,m,o;var p;var q=this.getLayoutCache()||{};this.setLayoutCache(q,true);if(!q.attributes){q.attributes={};}var i=0,k,s=0;var u=4;var w=3;var x=[0,0,0];var y=[0,0,0,0];var z=2;var A=2;var B=t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail";var C=t.getImageUrl()&&!B;if(B){u=w=2;x=y=[0,0];z=A=4;}var D=u*x.length;var E=w*y.length;if(C){D--;E--;x[0]++;y[0]++;}t.destroyAggregation("_attributeLabels");t.destroyAggregation("_attributeValues");t.destroyAggregation("_attributeValuesWithoutWhyfoundHiddenTexts");var F=function(m){return function(){m.prototype.onAfterRendering.apply(this,arguments);var M=$(this.getDomRef());M.attr("aria-describedby",M.attr("data-tooltippedby"));};};for(;!(z<=0&&A<=0)&&i<d.length;i++){f=d[i];if(B&&s>=4){break;}if(f.isTitle){continue;}if(D<=0&&E<=0&&!f.whyfound){continue;}l=f.name;v=f.value;if(l===undefined||v===undefined){continue;}if(!v||v.trim().length==0){v=n;}o=f.longtext!=undefined&&f.longtext.length>0;g=f.valueWithoutWhyfound;var _=-1,G=-1,H={desktop:1,tablet:1};var I=q.attributes[f.key]||{};q.attributes[f.key]=I;r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-MainAttribute');if(o){var J=I.longTextColumnNumber||t._howManyColumnsToUseForLongTextAttribute(v);I.longTextColumnNumber=J;H=J;r.write(' sapUshellSearchResultListItem-LongtextAttribute');}if(D<=0){if(f.whyfound&&z>0){r.write(' sapUshellSearchResultListItem-WhyFoundAttribute-Desktop');z--;}else{r.write(' sapUshellSearchResultListItem-DisplayNoneAttribute-Desktop');}}if(E<=0){if(f.whyfound&&A>0){r.write(' sapUshellSearchResultListItem-WhyFoundAttribute-Tablet');A--;}else{r.write(' sapUshellSearchResultListItem-DisplayNoneAttribute-Tablet');}}if(o&&C&&x[0]==1){G=0;x[0]=u;D-=u+1;}else{for(k=0;k<x.length;k++){if(x[k]+H.desktop<=u){x[k]+=H.desktop;D-=H.desktop;G=k;break;}}}if(G<0){G=x.length;}if(o&&C&&y[0]==1){_=0;y[0]=w;E-=w+1;}else{for(k=0;k<y.length;k++){if(y[k]+H.tablet<=w){y[k]+=H.tablet;E-=H.tablet;_=k;break;}}}if(_<0){_=y.length;}r.write(' sapUshellSearchResultListItem-OrderTablet-'+_);r.write(' sapUshellSearchResultListItem-OrderDesktop-'+G);r.write('"');if(o){r.write(' data-sap-searchresultitem-attributeweight-desktop="'+H.desktop+'"');r.write(' data-sap-searchresultitem-attributeweight-tablet="'+H.tablet+'"');}r.write('>');h=new sap.m.Label({displayOnly:true});h.setText(l);h.addStyleClass("sapUshellSearchResultListItem-AttributeKey");h.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(h);r.write('<span class="sapUshellSearchResultListItem-AttributeValueContainer">');if(f.defaultNavigationTarget){j=new a();m=a;j.setHref(f.defaultNavigationTarget.getHref());j.setTarget(f.defaultNavigationTarget.getTarget());j.addStyleClass("sapUshellSearchResultListItem-AttributeLink");}else{j=new S();m=S;}j.setText(v);j.addStyleClass("sapUshellSearchResultListItem-AttributeValue");j.addStyleClass("sapUshellSearchResultListItem-MightOverflow");if(f.whyfound){j.data("ishighlighted","true",true);j.addStyleClass("sapUshellSearchResultListItem-AttributeValueHighlighted");}if(o){j.data("islongtext","true",true);}if(g){p=new sap.ui.core.InvisibleText({});p.setText(g);j.data("tooltippedBy",p.getId(),true);j.onAfterRendering=F(m);t.addAggregation("_attributeValuesWithoutWhyfoundHiddenTexts",p,true);r.renderControl(p);}r.renderControl(j);r.write('</span>');r.write('</li>');t.addAggregation("_attributeLabels",h,true);t.addAggregation("_attributeValues",j,true);s++;}if(C){var K=u-x[0];var L=w-y[0];if(K>0||L>0){r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-MainAttribute');r.write(' sapUshellSearchResultListItem-OrderTablet-0 sapUshellSearchResultListItem-OrderDesktop-0');r.write('"');r.write(' data-sap-searchresultitem-attributeweight-desktop="'+K+'"');r.write(' data-sap-searchresultitem-attributeweight-tablet="'+L+'"');r.write('></li>');}}},_howManyColumnsToUseForLongTextAttribute:function(d){if(d.length<40){return{tablet:1,desktop:1};}if(d.length<85){return{tablet:2,desktop:2};}if(d.length<135){return{tablet:3,desktop:3};}return{tablet:3,desktop:4};},_renderImageAttribute:function(r,i){var t=this;if(!t.getImageUrl()||t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail"){return;}r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-ImageAttribute');if(i){r.write(' sapUshellSearchResultListItem-LonelyImageAttribute');}r.write('">');r.write('<div class="sapUshellSearchResultListItem-ImageContainer');if(this.getImageFormat()=="round"){r.write(" sapUshellSearchResultListItem-ImageContainerRound");}r.write('">');if(t.getImageUrl()){r.write('<img class="sapUshellSearchResultListItem-Image');if(this.getImageFormat()=="round"){}r.write('" src="');r.write(t.getImageUrl());r.write('">');}if(this.getImageFormat()!="round"){r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');}r.write('</div>');r.write('</li>');},_renderRelatedObjectsToolbar:function(r){var t=this;var d=t.getNavigationObjects();if(!d||d.length===0){return;}t._showExpandButton=true;var f=t.getAggregation("_relatedObjectActionsToolbar");f.setProperty("navigationObjects",d);f.setProperty("positionInList",this.getPositionInList());r.renderControl(f);},_renderAccessibilityInformation:function(r){var t=this;var p=t.getProperty("parentListItem");if(p){t._renderAriaDescriptionElementForTitle(r,true,true);p.onAfterRendering=function(){sap.m.CustomListItem.prototype.onAfterRendering.apply(this,arguments);var d=$(this.getDomRef());t._addAriaDescriptionToParentListElement(p,true);d.on("focus",function(f){var g=$(f.relatedTarget);if(g.hasClass("sapUshellSearchResultListItem")||g.closest(".sapUshellSearchResultListItemApps").length>0&&!g.hasClass("sapUshellResultListMoreFooter")){t._renderAriaDescriptionElementForTitle(r,false,false);t._addAriaDescriptionToParentListElement(p,false);}else{t._renderAriaDescriptionElementForTitle(r,true,false);t._addAriaDescriptionToParentListElement(p,true);}});};p.addEventDelegate({onsapspace:function(E){if(E.target===E.currentTarget){t.toggleDetails();}},onsapenter:function(E){if(E.target===E.currentTarget){var d=t.getTitleNavigation();if(d){d.performNavigation();}}}});}},_renderAriaDescriptionElementForTitle:function(r,w,d){var t=this;t._searchResultListPrefix=t._searchResultListPrefix||sap.ushell.resources.i18n.getText("result_list_announcement_screenreaders");var l=t.getTitle()+", "+t.getType()+".";if(w){l=t._searchResultListPrefix+" "+l;}var f=t.getAggregation("_titleLabeledByText");f.setText(l);if(d){r.renderControl(f);}},_addAriaDescriptionToParentListElement:function(p,i){var t=this.getAggregation("_titleLabeledByText");var d=t.getId();if(i){var f=this.getTotalCountHiddenElement();if(f){d+=" "+f.getId();}}var g=$(p.getDomRef());g.attr("aria-labelledby",d);},_getExpandAreaObjectInfo:function(){var t=this;var r=$(t.getDomRef());var d=r.find(".sapUshellSearchResultListItem-AttributesExpandContainer");var f=r.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var g=false;if(f.css("display")==="none"){f.css("display","block");g=true;}var h=d.height();var i=r.find(".sapUshellSearchResultListItem-AttributesAndActions").height();if(g){f.css("display","");}var j=[];var p=0,k=false;r.find(".sapUshellSearchResultListItem-GenericAttribute").each(function(){if(!k){var q=this.getBoundingClientRect();var x=q.x;if(x==undefined){x=q.left;}if(x>p){p=x;return;}else{k=true;}}j.push(this);});var l=200;var m=l/10;var o={resultListItem:r,attributesExpandContainer:d,currentHeight:h,expandedHeight:i,elementsToFadeInOrOut:j,expandAnimationDuration:l,fadeInOrOutAnimationDuration:m,relatedObjectsToolbar:f};return o;},isShowingDetails:function(){var d=this._getExpandAreaObjectInfo();if(d.currentHeight<d.expandedHeight){return false;}return true;},showDetails:function(d){var t=this;if(t.isShowingDetails()){return;}var f=this._getExpandAreaObjectInfo();f.relatedObjectsToolbar.css("opacity",0);f.relatedObjectsToolbar.css("display","block");var r=t.getAggregation("_relatedObjectActionsToolbar");if(r){r._layoutToolbarElements();}t.forwardEllipsis($(t.getDomRef()).find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));var g,s=false;var h=f.attributesExpandContainer.animate({"height":f.expandedHeight},{"duration":f.expandAnimationDuration,"progress":function(i,p,j){if(!s&&p>0.5){g=f.relatedObjectsToolbar.animate({"opacity":1},j).promise();s=true;jQuery.when(h,g).done(function(){t.setProperty("expanded",true,true);$(this).addClass("sapUshellSearchResultListItem-AttributesExpanded");$(this).css("height","");$(f.elementsToFadeInOrOut).css("opacity","");var k=sap.ui.core.IconPool.getIconURI("slim-arrow-up");var l=t.getAggregation("_expandButton");l.setTooltip(sap.ushell.resources.i18n.getText("hideDetailBtn_tooltip"));l.setIcon(k);l.rerender();f.relatedObjectsToolbar.css("display","");f.relatedObjectsToolbar.css("opacity","");}.bind(this));}}}).promise();$(f.elementsToFadeInOrOut).animate({"opacity":1},f.fadeInOrOutAnimationDuration);},hideDetails:function(d){var t=this;var r=$(t.getDomRef());if(!t.isShowingDetails()){return;}var f=this._getExpandAreaObjectInfo();f.relatedObjectsToolbar.css("opacity",1);f.relatedObjectsToolbar.animate({"opacity":0},f.expandAnimationDuration/2);var g=r.find(".sapUshellSearchResultListItem-MainAttribute").outerHeight(true)+r.find(".sapUshellSearchResultListItem-ExpandSpacerAttribute").outerHeight(true);var s=false;var h=f.attributesExpandContainer.animate({"height":g},{"duration":f.expandAnimationDuration,"progress":function(i,p,j){if(!s&&j<=f.fadeInOrOutAnimationDuration){s=true;var k=$(f.elementsToFadeInOrOut).animate({"opacity":0},f.fadeInOrOutAnimationDuration).promise();jQuery.when(h,k).done(function(){t.setProperty("expanded",false,true);f.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(f.elementsToFadeInOrOut).css("opacity","");f.relatedObjectsToolbar.css("opacity","");var l=sap.ui.core.IconPool.getIconURI("slim-arrow-down");var m=t.getAggregation("_expandButton");m.setTooltip(sap.ushell.resources.i18n.getText("showDetailBtn_tooltip"));m.setIcon(l);m.rerender();});}}}).promise();},toggleDetails:function(d){var f;var m=sap.ushell.renderers.fiori2.search.getModelSingleton();if(this.isShowingDetails()){f=m.eventLogger.ITEM_HIDE_DETAILS;this.hideDetails(d);}else{f=m.eventLogger.ITEM_SHOW_DETAILS;this.showDetails(d);}m.eventLogger.logEvent({type:f,itemPosition:this.getPositionInList(),executionId:this.getResultSetId()});},isSelectionModeEnabled:function(){var t=this;var i=false;var s=$(t.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");if(s){i=s.css("opacity")>0;}return i;},enableSelectionMode:function(d){var t=this;var s=$(t.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-innerContainer");var f=s.find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");var g=200;var h=false;s.animate({width:"2rem"},{"duration":g,"progress":function(i,p,r){if(!h&&p>0.5){f.css("display","");f.animate({opacity:"1.0"},g/2);h=true;}}});},disableSelectionMode:function(d){var t=this;var s=$(t.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-innerContainer");var f=s.find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");var g=200;f.animate({opacity:"0.0"},g/2,function(){f.css("display","none");});s.animate({width:"0"},g);},toggleSelectionMode:function(d){if(this.isSelectionModeEnabled()){this.disableSelectionMode(d);}else{this.enableSelectionMode(d);}},onAfterRendering:function(){var t=this;var d=$(t.getDomRef());t._showOrHideExpandButton();t._setListItemStatusBasedOnWindowSize();t.forwardEllipsis(d.find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));b.attachEventHandlersForTooltip(t.getDomRef());},resizeEventHappened:function(){var t=this;var d=$(t.getDomRef());t._showOrHideExpandButton();t._setListItemStatusBasedOnWindowSize();t.getAggregation("_titleLink").rerender();t.forwardEllipsis(d.find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));},_getPhoneSize:function(){return 767;},_resetPrecalculatedValues:function(){this._visibleAttributes=undefined;this._detailsArea=undefined;this._showExpandButton=false;},_setListItemStatusBasedOnWindowSize:function(){var w=window.innerWidth;var p=this.getParentListItem();if(this.getTitleNavigation()&&w<=this._getPhoneSize()){p.setType(sap.m.ListType.Active);}else{p.setType(sap.m.ListType.Inactive);}},_showOrHideExpandButton:function(){var t=this;var d=$(t.getDomRef());var f=d.find(".sapUshellSearchResultListItem-ExpandButtonContainer");var i=f.css("visibility")!="hidden";var s=false;var g=d.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");s=g.length>0;var h=t.getImageFormat()&&t.getImageFormat().toLowerCase()=="documentthumbnail";if(!h&&!s){var p=0;d.find(".sapUshellSearchResultListItem-MainAttribute,.sapUshellSearchResultListItem-WhyFoundAttribute").each(function(){var j=this.getBoundingClientRect();var x=j.x;if(x==undefined){x=j.left;}if(x>p){p=x;}else{s=true;return false;}});}if(i&&!s){f.css("visibility","hidden");f.attr("aria-hidden","true");t.setAriaExpandedState();}else if(!i&&s){f.css("visibility","");f.removeAttr("aria-hidden");t.setAriaExpandedState();}},setAriaExpandedState:function(){var t=this;var d=t.getAggregation("_expandButton");var f=$(d.getDomRef());var g=$(t.getDomRef());var h=t.getParentListItem()?$(t.getParentListItem().getDomRef()):g.closest("li");var i=g.find(".sapUshellSearchResultListItem-ExpandButtonContainer");if(i.css("visibility")=="hidden"){f.removeAttr("aria-expanded");h.removeAttr("aria-expanded");}else{var j=t.getProperty("expanded");if(j){f.attr("aria-expanded","true");h.attr("aria-expanded","true");}else{f.attr("aria-expanded","false");h.attr("aria-expanded","false");}}},_registerItemPressHandler:function(){var t=this;var p=t.getParentListItem();if(p){p.attachPress(function(d){t._performTitleNavigation();});t._registerItemPressHandler=function(){};}},_performTitleNavigation:function(p){var t=p&&p.trackingOnly||false;var d=this.getTitleNavigation();if(d){d.performNavigation({trackingOnly:t});}},forwardEllipsis:function(o){o.each(function(i,d){b.forwardEllipsis4Whyfound(d);});}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListItemDocument',['sap/ushell/renderers/fiori2/search/controls/SearchResultListItem','sap/ushell/renderers/fiori2/search/controls/SearchText','sap/ushell/renderers/fiori2/search/SearchHelper'],function(S,a,b){"use strict";var n='\u2013';return S.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListItemDocument",{renderer:function(r,c){c._renderer(r);},_renderContentContainer:function(r){r.write('<div class="sapUshellSearchResultListItem-Content">');this._renderTitleContainer(r);this._renderAttributesContainer(r);r.write('</div>');},_renderTitleContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-TitleAndImageContainer">');r.write('<div class="sapUshellSearchResultListItem-TitleContainer">');t._renderCheckbox(r);var c=t.getAdditionalParameters().titleUrl;var d=t.getAggregation("_titleLink");d.setHref(c);d.setText(t.getTitle());if(c.length===0){d.setEnabled(false);}r.renderControl(d);var e=t.getAggregation("_typeText");e.setText(t.getType());r.renderControl(e);r.write('</div>');t._renderImageForPhone(r);r.write('</div>');},_renderAttributesContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItemDoc-AttributesExpandContainer');var e=t.getProperty("expanded");if(e){r.write(" sapUshellSearchResultListItem-AttributesExpanded");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-AttributesAndActions">');r.write('<ul class="sapUshellSearchResultListItem-Attributes">');this._renderThumbnailSnippetContainer(r);this._renderDocAttributesContainer(r);r.write('<div class="sapUshellSearchResultListItem-ExpandSpacerAttribute" aria-hidden="true"></div>');r.write('</ul>');t._renderRelatedObjectsToolbar(r);r.write('</div>');r.write('</div>');},_renderThumbnailContainer:function(r){var t=this;if(!t.getImageUrl()){return;}if(t.getContainsThumbnail()===true){r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailContainer">');r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailContainerInner">');var z=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("search"),useIconTooltip:false});if(t.getContainsSuvFile()===true){var p=function(){b.openURL(t.getSuvlink(),'_blank');};z.attachPress(p);}z.addStyleClass("sapUshellSearchResultListItemDoc-ThumbnailZoomIcon");r.renderControl(z);if(t.getContainsSuvFile()===true){r.write('<a target="_blank" href="'+t.getSuvlink()+'">');}else{r.write('<a target="_blank" >');}r.write('<img class="sapUshellSearchResultListItemDoc-Thumbnail" src="');r.write(t.getImageUrl());r.write('</a>');r.write('</div>');r.write('</div>');}else{r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailContainer-hidden">');r.write('</div>');}},_renderImageForPhone:function(r){var t=this;if(t.getImageUrl()&&t.getContainsThumbnail()===true){r.write('<div class="sapUshellSearchResultListItem-TitleImage">');r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');r.write('<img class="sapUshellSearchResultListItem-Image" src="');r.write(t.getImageUrl());r.write('">');r.write('</div>');}},_renderDocAttributesContainer:function(r){r.write('<div class="sapUshellSearchResultListItemDoc-AttributesContainer">');var i=this.getAttributes();this._renderAllAttributes(r,i);r.write('</div>');},_renderThumbnailSnippetContainer:function(r){r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailSnippetContainer">');this._renderThumbnailContainer(r);this._renderSnippetContainer(r);r.write('</div>');},_renderSnippetContainer:function(r){var c=this.getAttributes();for(var i=0;i<c.length;i++){var d=c[i];if(d.longtext){var v=new a();v.setText(d.value);v.addStyleClass("sapUshellSearchResultListItemDoc-Snippet");r.renderControl(v);}}},_renderAllAttributes:function(r,c){var t=this;var d;var l;var v;var e;var p;var i=0,j=0,k=0;var f=8;if(t.getImageUrl()){f--;}var g=function(h){var m;for(var i=0;i<h.length;i++){m=h[i];if(m.key==='FILE_PROPERTY'&&m.value){return true;}}return false;};var C=g(c);t.destroyAggregation("_attributeValues");for(;j<f&&i<c.length;i++){d=c[i];if(d.isTitle||d.longtext){continue;}if(C===true&&d.key!=='FILE_PROPERTY'){continue;}if(!d.value){continue;}if(C===true){var F=JSON.parse(d.value);for(;k<F.length&&k<10;k++){p=F[k];switch(p.type){case"date-time":var D=new Date(p.value);var o=sap.ui.core.format.DateFormat.getDateTimeInstance({style:"medium"},sap.ui.getCore().getConfiguration().getLocale());v=o.format(D);break;case"byte":v=b.formatFileSize(Number(p.value));break;case"integer":v=b.formatInteger(Number(p.value));break;default:v=p.value;}l=p.category+': '+p.name;if(v===undefined){continue;}if(!v||v===""){v=n;}e=new a();e.setText(v);e.addStyleClass("sapUshellSearchResultListItemDoc-AttributeValue");e.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(e);t.addAggregation("_attributeValues",e,true);}}else{l=d.name;v=d.value;if(l===undefined||v===undefined){continue;}if(!v||v===""){v=n;}e=new a();e.setText(v);e.addStyleClass("sapUshellSearchResultListItemDoc-AttributeValue");e.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(e);t.addAggregation("_attributeValues",e,true);}j++;}},_getExpandAreaObjectInfo:function(){var t=this;var r=$(t.getDomRef());var c=r.find(".sapUshellSearchResultListItemDoc-AttributesExpandContainer");var d=r.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var e=false;if(d.css("display")==="none"){d.css("display","block");e=true;}var f=c.height();var g=r.find(".sapUshellSearchResultListItem-AttributesAndActions").height();if(e){d.css("display","");}var h=[];r.find(".sapUshellSearchResultListItem-GenericAttribute").each(function(){var l=$(this);if(l.css("order")>2){h.push(this);}});var i=200;var j=i/10;var k={resultListItem:r,attributesExpandContainer:c,currentHeight:f,expandedHeight:g,elementsToFadeInOrOut:h,expandAnimationDuration:i,fadeInOrOutAnimationDuration:j,relatedObjectsToolbar:d};return k;},hideDetails:function(c){var t=this;var r=$(t.getDomRef());if(!t.isShowingDetails()){return;}var e=this._getExpandAreaObjectInfo();var d=r.find(".sapUshellSearchResultListItem-Attributes").outerHeight(true);var s=false;var f=e.attributesExpandContainer.animate({"height":d},{"duration":e.expandAnimationDuration,"progress":function(g,p,h){if(!s&&h<=e.fadeInOrOutAnimationDuration){s=true;var i=$(e.elementsToFadeInOrOut).animate({"opacity":0},e.fadeInOrOutAnimationDuration).promise();jQuery.when(f,i).done(function(){t.setProperty("expanded",false,true);e.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(e.elementsToFadeInOrOut).css("opacity","");var j=sap.ui.core.IconPool.getIconURI("slim-arrow-down");var k=t.getAggregation("_expandButton");k.setTooltip(sap.ushell.resources.i18n.getText("showDetailBtn_tooltip"));k.setIcon(j);k.rerender();});}}}).promise();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListItemNote',['sap/ushell/renderers/fiori2/search/controls/SearchResultListItem','sap/ushell/renderers/fiori2/search/controls/SearchText','sap/ushell/renderers/fiori2/search/SearchHelper'],function(S,a,b){"use strict";var n='\u2013';return S.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListItemNote",{renderer:function(r,c){c._renderer(r);},_renderContentContainer:function(r){r.write('<div class="sapUshellSearchResultListItem-Content">');this._renderTitleContainer(r);this._renderAttributesContainer(r);r.write('</div>');},_renderTitleContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-TitleAndImageContainer">');r.write('<div class="sapUshellSearchResultListItem-TitleContainer">');t._renderCheckbox(r);var c=t.getTitleUrl();var d=t.getAggregation("_titleLink");d.setHref(c);d.setText(t.getTitle());if(c.length===0){d.setEnabled(false);}r.renderControl(d);var e=t.getAggregation("_typeText");e.setText(t.getType());r.renderControl(e);r.write('</div>');t._renderImageForPhone(r);r.write('</div>');},_renderAttributesContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItemDoc-AttributesExpandContainer');var e=t.getProperty("expanded");if(e){r.write(" sapUshellSearchResultListItem-AttributesExpanded");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-AttributesAndActions">');r.write('<ul class="sapUshellSearchResultListItem-Attributes">');this._renderThumbnailSnippetContainer(r);this._renderDocAttributesContainer(r);r.write('<div class="sapUshellSearchResultListItem-ExpandSpacerAttribute" aria-hidden="true"></div>');r.write('</ul>');t._renderRelatedObjectsToolbar(r);r.write('</div>');r.write('</div>');},_renderImageForPhone:function(r){var t=this;if(t.getImageUrl()&&t.getContainsThumbnail()===true){r.write('<div class="sapUshellSearchResultListItem-TitleImage">');r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');r.write('<img class="sapUshellSearchResultListItem-Image" src="');r.write(t.getImageUrl());r.write('">');r.write('</div>');}},_renderDocAttributesContainer:function(r){r.write('<div class="sapUshellSearchResultListItemNote-AttributesContainer">');var i=this.getAttributes();this._renderAllAttributes(r,i);r.write('</div>');},_renderThumbnailSnippetContainer:function(r){r.write('<div class="sapUshellSearchResultListItemNote-ThumbnailSnippetContainer">');this._renderSnippetContainer(r);r.write('</div>');},_renderSnippetContainer:function(r){var c=this.getAttributes();for(var i=0;i<c.length;i++){var d=c[i];if(d.longtext){var v=new a();v.setText(d.value);v.addStyleClass("sapUshellSearchResultListItemDoc-Snippet");r.renderControl(v);}}},_renderAllAttributes:function(r,c){var t=this;var d;var l;var v;var e;var i=0,j=0;var f=4;if(t.getImageUrl()){f--;}t.destroyAggregation("_attributeValues");for(;j<f&&i<c.length;i++){d=c[i];if(d.isTitle||d.longtext){continue;}if(!d.value){continue;}l=d.name;v=d.value;if(l===undefined||v===undefined){continue;}if(!v||v===""){v=n;}e=new a();e.setText(v);e.addStyleClass("sapUshellSearchResultListItemNote-AttributeValue");e.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(e);t.addAggregation("_attributeValues",e,true);j++;}},_getExpandAreaObjectInfo:function(){var t=this;var r=$(t.getDomRef());var c=r.find(".sapUshellSearchResultListItemDoc-AttributesExpandContainer");var d=r.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var e=false;if(d.css("display")==="none"){d.css("display","block");e=true;}var f=c.height();var g=r.find(".sapUshellSearchResultListItem-AttributesAndActions").height();if(e){d.css("display","");}var h=[];r.find(".sapUshellSearchResultListItem-GenericAttribute").each(function(){var l=$(this);if(l.css("order")>2){h.push(this);}});var i=200;var j=i/10;var k={resultListItem:r,attributesExpandContainer:c,currentHeight:f,expandedHeight:g,elementsToFadeInOrOut:h,expandAnimationDuration:i,fadeInOrOutAnimationDuration:j,relatedObjectsToolbar:d};return k;},hideDetails:function(c){var t=this;var r=$(t.getDomRef());if(!t.isShowingDetails()){return;}var e=this._getExpandAreaObjectInfo();var d=r.find(".sapUshellSearchResultListItem-Attributes").outerHeight(true);var s=false;var f=e.attributesExpandContainer.animate({"height":d},{"duration":e.expandAnimationDuration,"progress":function(g,p,h){if(!s&&h<=e.fadeInOrOutAnimationDuration){s=true;var i=$(e.elementsToFadeInOrOut).animate({"opacity":0},e.fadeInOrOutAnimationDuration).promise();jQuery.when(f,i).done(function(){t.setProperty("expanded",false,true);e.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(e.elementsToFadeInOrOut).css("opacity","");var j=sap.ui.core.IconPool.getIconURI("slim-arrow-down");var k=t.getAggregation("_expandButton");k.setTooltip(sap.ushell.resources.i18n.getText("showDetailBtn_tooltip"));k.setIcon(j);k.rerender();});}}}).promise();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListSelectionHandler',['sap/ui/base/Object'],function(){"use strict";return sap.ui.base.Object.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListSelectionHandler",{isMultiSelectionAvailable:function(d){return false;},actionsForDataSource:function(d){return[];}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListSelectionHandlerNote',['./SearchResultListSelectionHandler'],function(S){"use strict";return S.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListSelectionHandlerNote",{isMultiSelectionAvailable:function(d){return true;},actionsForDataSource:function(d){var a=[{text:"Show Selected Items",action:function(s){var m="No Items were selected!";if(s.length>0){m="Following Items were selected:";for(var i=0;i<s.length;i++){m+="\n"+s[i].title;}}sap.m.MessageBox.show(m,{icon:sap.m.MessageBox.Icon.INFORMATION,title:"I'm a Custom Action for testing Multi-Selection",actions:[sap.m.MessageBox.Action.OK]});}}];return a;}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultMap',['sap/ushell/renderers/fiori2/search/SearchConfiguration'],function(S){"use strict";var b=true;var f=function(u){var i=false;$.ajax({url:u,type:"get",async:false,success:function(){i=true;return i;},error:function(){i=false;return i;}});return i;};var m=function(){var i=false;i=f("/sap/hana/spatial/mapClient/map.xsjs?col=32&row=32&level=6");return i;};var g=m();var k=function(u){var a=null;var U=[];try{U=sap.ushell.renderers.fiori2.search.getModelSingleton().config.mapTileLocation.URLPairs;}catch(e){}if(g){a="/sap/hana/spatial/mapClient/map.xsjs?col={X}&row={Y}&level={LOD}";}else if(U.length>0){if(u===0){a=U[0][0];}else{a=U[0][1];}}else{b=false;}if(typeof a!=="string"||a.length<0){b=false;}return a;};return sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchResultMap',{teststring:'',ContainerContent:null,MapContainer:null,minLat:0,minLon:0,maxLat:0,maxLon:0,centerLat:0,centerLon:0,iNrLocations:0,myMap:null,myMapContainer:null,metadata:{aggregations:{"_map":{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}}},init:function(){var t=this;var M={"MapProvider":[{"name":"HEREMAPS","type":"terrain","description":"","tileX":"256","tileY":"256","maxLOD":"20","copyright":"Tiles Courtesy of HERE Maps","Source":[{"id":"s1","url":k(0)},{"id":"s2","url":k(1)}]}],"MapLayerStacks":[{"name":"DEFAULT","MapLayer":{"name":"layer1","refMapProvider":"HEREMAPS","opacity":"0.9","colBkgnd":"RGB(255,255,255)"}}]};try{jQuery.sap.require("sap.ui.vk.MapContainer","sap.ui.vk.ContainerContent");t.MapContainer=sap.ui.vk.MapContainer;t.ContainerContent=sap.ui.vk.ContainerContent;}catch(e){}var a=new sap.ui.vbm.GeoMap({legendVisible:false,scaleVisible:false,refMapLayerStack:'DEFAULT',mapConfiguration:M,width:'100%',height:'100%',zoomlevel:6,zoomChanged:this.zoomChanged.bind(this),centerChanged:this.centerChanged.bind(this)});if(this.MapContainer){var c=new t.ContainerContent({content:a});this.MapContainer.prototype._onNavbarHome=function(){t.resizeMap();t.centerMap();t.setZoomLevelAfterRendering();};this.myMapContainer=new t.MapContainer({content:[c],showRectangularZoom:true,showHome:true,showFullScreen:false,showSettings:false,showSelection:false});t.myMap=t.myMapContainer.getContent()[0].getAggregation('content');t.setAggregation('_map',this.myMapContainer);}else{t.setAggregation('_map',a);t.myMap=t.getAggregation('_map');}},renderer:function(r,c){c.loadObjects(c);r.write('<div ');r.writeControlData(c);r.addClass('sapUshellSearchResultMap');r.writeClasses();r.write('>');var e;if(!b){e=new sap.m.Label({text:sap.ushell.resources.i18n.getText("mapsNoTiles")});r.renderControl(e);}else if(c.iNrLocations===0){e=new sap.m.Label({text:sap.ushell.resources.i18n.getText("mapsNoCoordinates")});r.renderControl(e);}else{if(c.MapContainer){r.renderControl(c.myMapContainer);}else{r.renderControl(c.myMap);}}r.write('</div>');},splitCoordinates:function(c){var a=c.split(';');return[parseFloat(a[0]),parseFloat(a[1])];},deg2rad:function(d){return Math.PI*d/180;},rad2deg:function(r){return 180*r/Math.PI;},getDistanceFromLatLonInKm:function(l,e,h,i){var R=6371;var L=this.deg2rad(h-l);var j=this.deg2rad(i-e);var a=Math.sin(L/2)*Math.sin(L/2)+Math.cos(this.deg2rad(l))*Math.cos(this.deg2rad(h))*Math.sin(j/2)*Math.sin(j/2);var c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));var d=R*c;return d;},getLatLonDiff:function(v){var a,c,l,d,e,h,i,j;var n,o,p,q;a=v.upperLeft.split(";");c=v.lowerRight.split(";");l=parseFloat(a[1],10);d=parseFloat(c[1],10);j=(l+d)/2;n=l-d;p=n*111;p=Math.floor(p);e=parseFloat(a[0],10);h=parseFloat(c[0],10);if((e<0&&h>0)|(e>0&&h<0)){o=Math.abs(e)+Math.abs(h);}else{o=Math.abs(h-e);}q=this.getDistanceFromLatLonInKm(j,e,j,h);q=Math.floor(q);i="lat= "+n+" ("+p+" km); lon= "+o+" ("+q+" km)";return i;},calculateZoomLevel:function(s,K){if(K===0){K=1;}var e=40075004;var w=s;var a=e/256;var z=0;while((a*w)>(K*1000)&&(z<20)){a=a/2.5;z=z+1;}jQuery.sap.log.debug('zoomLevel calc: '+z);return z;},getSpotList:function(){var t=this;var s=new sap.ui.vbm.Containers();var r=t.getModel().oData.boResults;var n=0;var R,l,T,c,a,d,e,h,o,p,q,i;for(i=0;i<r.length;i++){R=r[i];l=null;if(!R.geoJson){continue;}l=JSON.parse(R.geoJson.value);T=R.geoJson.label;if(T==="LOC_4326"){for(var j=0;j<R.itemattributes.length;j++){if(R.itemattributes[j].isTitle===true){T=R.itemattributes[j].value;break;}}}T=T.replace(/<[^>]*>/g,"");c=l.coordinates;if(!c||c.length===0){continue;}a=c[0];d=c[1];if(isNaN(d)||isNaN(a)){continue;}n++;if(n===1){h=a;o=a;p=d;q=d;}else{if(a<h){h=a;}if(a>o){o=a;}if(d<p){p=d;}if(d>q){q=d;}}t.minLon=h;t.maxLon=o;t.minLat=p;t.maxLat=q;var u=new sap.m.Button({text:T});var B=new sap.m.Button({icon:"sap-icon://map",type:sap.m.ButtonType.Emphasized});var v=new sap.ui.layout.HorizontalLayout({content:[B,u]});e=new sap.ui.vbm.Container({position:a+';'+d+';0',item:v,alignment:6});s.addItem(e);}t.iNrLocations=n;if(n===0){s=t.getSpotList2();}return s;},getSpotList2:function(c){var t=this;var r=t.getModel().oData.origBoResults.elements;var R,l,T,C,a,d,s;var h=new sap.ui.vbm.Containers();var n=0;var i,o,p,q;var u=0;for(var v in r){if(!r.hasOwnProperty(v))continue;R=r[v];if(!R.LOC_4326)continue;l=R.LOC_4326;for(var w in R){if(!R.hasOwnProperty(w))continue;var A=R[w];T="";var x=false;if(A.$$MetaData$$){var y=A.$$MetaData$$.presentationUsage;if(y&&typeof y.length!=="undefined"){for(var j=0;j<y.length;j++){if(y[j]=="Title"){T=A.value;T=T.replace(/<[^>]*>/g,"");x=true;break;}}}}if(x){break;}}C=null;try{C=JSON.parse(l.value).coordinates;}catch(e){}if(!C||C.length===0){continue;}n++;a=C[0];d=C[1];if(isNaN(d)||isNaN(a)){continue;}u++;if(u===1){i=a;o=a;p=d;q=d;}else{if(a<i){i=a;}if(a>o){o=a;}if(d<p){p=d;}if(d>q){q=d;}}t.minLon=i;t.maxLon=o;t.minLat=p;t.maxLat=q;var z=new sap.m.Button({text:T});var B=new sap.m.Button({icon:"sap-icon://map",type:sap.m.ButtonType.Emphasized});var D=new sap.ui.layout.HorizontalLayout({content:[B,z]});s=new sap.ui.vbm.Container({position:a+';'+d+';0',item:D,alignment:6});h.addItem(s);}t.iNrLocations=n;return h;},loadObjects:function(c){var t=this;var s=t.getSpotList();jQuery.sap.log.debug("++++++");jQuery.sap.log.debug("number of locations: "+t.iNrLocations);t.myMap.removeAllVos();t.myMap.addVo(s);t.centerMap();var p=S.prototype.parseUrlParameters();for(var a in p){if(a==='box'&&p[a]!=="false"){t.showBoundariesAndCenter();}}},centerMap:function(){var t=this;t.centerLon=t.minLon+(t.maxLon-t.minLon)/2;t.centerLat=t.minLat+(t.maxLat-t.minLat)/2;jQuery.sap.log.debug("centerMap() returns: centerLat, centerLon: "+t.centerLat+";"+t.centerLon);t.myMap.setCenterPosition(t.centerLon+";"+t.centerLat);},setVisualFrame:function(){var t=this;var v={};v.minLon=t.minLon*0.5;v.maxLon=t.maxLon*1.2;v.minLat=t.minLat*0.8;v.maxLat=t.maxLat*1.2;t.myMap.setVisualFrame(v);},showBoundariesAndCenter:function(){var t=this;var c=new sap.ui.vbm.Spots({items:[new sap.ui.vbm.Spot({type:"Error",text:"center",position:(t.centerLon+" ;  "+t.centerLat+";0")}),new sap.ui.vbm.Spot({type:"Error",text:"TLeft",position:(t.minLon+" ;  "+t.maxLat+";0")}),new sap.ui.vbm.Spot({type:"Error",text:"TRight",position:(t.maxLon+" ;  "+t.maxLat+";0")}),new sap.ui.vbm.Spot({type:"Error",text:"BLeft",position:(t.minLon+" ;  "+t.minLat+";0")}),new sap.ui.vbm.Spot({type:"Error",text:"BRight",position:(t.maxLon+" ;  "+t.minLat+";0")})]});t.myMap.addVo(c);},zoomChanged:function(e){var v=e.getParameter('viewportBB');var z=e.getParameter('zoomLevel');jQuery.sap.log.debug('zoomLevel ',z,'LatLonDiff:',this.getLatLonDiff(v));},centerChanged:function(e){var c=e.getParameter('centerPoint');jQuery.sap.log.debug('centerPoint: '+c);},setZoomLevelAfterRendering:function(){var t=this;var i=$(".sapUshellSearchResultMap")[0].id;var s=$("#"+i).width();s=s*0.8;var K=this.getDistanceFromLatLonInKm(this.minLat,this.minLon,this.maxLat,this.maxLon);jQuery.sap.log.debug('iScreenWidth for zoomLevel calc: '+s);var z=this.calculateZoomLevel(s,K);z=z-1;if(K>599&&K<701){z=6;}if(this.iNrLocations===1||K<2){z=9;}window.setTimeout(function(){t.myMap.setZoomlevel(z);},200);},setZoomLevelAfterRenderingOld:function(s){var t=this;var K=this.getDistanceFromLatLonInKm(this.minLat,this.minLon,this.maxLat,this.maxLon);K=Math.floor(K);jQuery.sap.log.debug("BOX minLat, minLon, maxLat, maxLon: ",this.minLat,this.minLon,this.maxLat,this.maxLon);jQuery.sap.log.debug('iKm for zoomLevel calc: '+K);jQuery.sap.log.debug('iScreenWidth for zoomLevel calc: '+s);var z=this.calculateZoomLevel(s,K);if(z>7){}if(this.iNrLocations===1){this.getAggregation('_map').setZoomlevel(9);}else{window.setTimeout(function(){t.myMap.setZoomlevel(z);},200);}},resizeMap:function(e){var h=$(".sapUshellSearchResultMap").parent().parent().parent().css("height");h=parseInt(h,10);h=0.85*h;h=""+h+"px";$(".sapUshellSearchResultMap").css("height",h);$(".sapUshellSearchResultMap").css("vertical-align","middle");},onAfterRendering:function(e){var t=this;t.resizeMap();t.centerMap();window.onresize=t.resizeMap;t.setZoomLevelAfterRendering();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultTable',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";return sap.m.Table.extend('sap.ushell.renderers.fiori2.search.controls.SearchResultTable',{renderer:'sap.m.TableRenderer',onAfterRendering:function(){S.attachEventHandlersForTooltip(this.getDomRef());}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchSelect',['sap/m/Select'],function(){"use strict";return sap.m.Select.extend('sap.ushell.renderers.fiori2.search.controls.SearchSelect',{constructor:function(i,o){o=jQuery.extend({},{visible:"{/businessObjSearchEnabled}",autoAdjustWidth:true,items:{path:"/dataSources",template:new sap.ui.core.Item({key:"{id}",text:"{labelPlural}"})},selectedKey:{path:'/uiFilter/dataSource/id',mode:sap.ui.model.BindingMode.OneWay},change:function(e){var a=this.getSelectedItem();var c=a.getBindingContext();var d=c.getObject();this.getModel().setDataSource(d,false);this.getModel().abortSuggestions();this.getModel().eventLogger.logEvent({type:this.getModel().eventLogger.DROPDOWN_SELECT_DS,dataSourceId:d.id});},enabled:{parts:[{path:"/initializingObjSearch"}],formatter:function(a){return!a;}}},o);sap.m.Select.prototype.constructor.apply(this,[i,o]);this.addStyleClass('searchSelect');},renderer:'sap.m.SelectRenderer',setDisplayMode:function(m){switch(m){case'icon':this.setType(sap.m.SelectType.IconOnly);this.setIcon('sap-icon://slim-arrow-down');break;case'default':this.setType(sap.m.SelectType.Default);break;default:break;}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchSpreadsheet',["sap/ui/core/mvc/Controller",'sap/ushell/renderers/fiori2/search/SearchResultListFormatter',"sap/ui/export/Spreadsheet"],function(C,S,c){"use strict";return C.extend("sap.ui.export.sample.table.Spreadsheet",{onExport:function(){var t=this;t.exportData={columns:[],rows:[]};if(t.table===undefined){t.table=sap.ui.getCore().byId('ushell-search-result-table');t.model=t.table.getModel();}sap.ui.getCore().byId('dataExportButton').setEnabled(false);var e=t.model.query.clone();e.setCalculateFacets(false);e.setTop(1000);var s=function(b){t._parseColumns(b.items[0]);var f=new S();var d=f.format(b,e.filter.searchTerm,{suppressHighlightedValues:true});for(var i=0;i<d.length;i++){b.items[i].title=d[i].title;b.items[i].titleDescription=d[i].titleDescription;}t._parseRows(b.items);t._doExport();};var a=function(b){t.model.normalSearchErrorHandling(b);sap.ui.getCore().byId('dataExportButton').setEnabled(true);};if(t.model.getProperty("/boCount")>1000){sap.m.MessageBox.information(sap.ushell.resources.i18n.getText("exportDataInfo"),{actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],onClose:function(A){if(A==sap.m.MessageBox.Action.OK){e.getResultSetAsync().then(s,a);}if(A==sap.m.MessageBox.Action.CANCEL){sap.ui.getCore().byId('dataExportButton').setEnabled(true);}}});}else{e.getResultSetAsync().then(s,a);}},_parseColumns:function(f){var t=this;var e=[];e.push({label:f.dataSource.labelPlural,property:'title_export_column',type:'string'});e.push({label:sap.ushell.resources.i18n.getText("titleDescription"),property:'title_description_export_column',type:'string'});var d=f.detailAttributes;if(t.model.getProperty("/resultToDisplay")==="searchResultList"){var l=0;for(var i=0;i<d.length&&l<12;i++){e=e.concat(t._getRelatedColumns(d[i]));l++;}}else{var v=[];t.table.getColumns().forEach(function(a){if(a.getVisible()){v.push(a);}});v.sort(function(a,b){if(a.getOrder()<b.getOrder())return-1;if(a.getOrder()>b.getOrder())return 1;return 0;});v.forEach(function(a){var b=a.getBindingContext().getObject().attributeId;for(var i=0;i<d.length;i++){if(d[i].id===b){e=e.concat(t._getRelatedColumns(d[i]));}}});}t.exportData.columns=e;},_getRelatedColumns:function(a){var t=this;var b=[];if(a.value){b.push(t._getColumn(a));if(a.unitOfMeasure){b.push(t._getColumn(a.unitOfMeasure));}if(a.description){b.push(t._getColumn(a.description));}}if(a.attributes){Object.values(a.attributes).forEach(function(s){b.push(t._getColumn(s));});}return b;},_getColumn:function(a){var t=this;var b={label:a.label,property:a.id};if(a.metadata.type===undefined){b.type='string';return b;}switch(a.metadata.type){case t.model.sinaNext.AttributeType.Double:b.type='number';b.scale=2;break;case t.model.sinaNext.AttributeType.Integer:b.type='number';b.scale=0;break;default:b.type='string';}return b;},_parseRows:function(s){var t=this;var e=[];s.forEach(function(r){var a=r.detailAttributes;var b={};b["title_export_column"]=r.title;b["title_description_export_column"]=r.titleDescription;for(var i=0;i<a.length;i++){b=t._getRelatedValues(b,a[i]);}e.push(b);});t.exportData.rows=e;},_getRelatedValues:function(r,a){if(a.value){r[a.id]=a.value;if(a.unitOfMeasure){r[a.unitOfMeasure.id]=a.unitOfMeasure.value;}if(a.description){r[a.description.id]=a.description.value;}}if(a.attributes){Object.values(a.attributes).forEach(function(s){r[s.id]=s.value;});}return r;},_doExport:function(){var t=this;var s={workbook:{columns:t.exportData.columns},dataSource:t.exportData.rows};new c(s).build().then(function(){sap.ui.getCore().byId('dataExportButton').setEnabled(true);},function(){sap.ui.getCore().byId('dataExportButton').setEnabled(true);});}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchText',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";return sap.m.Text.extend('sap.ushell.renderers.fiori2.search.controls.SearchText',{renderer:'sap.m.TextRenderer',onAfterRendering:function(){var d=this.getDomRef();S.boldTagUnescaper(d);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchTileHighlighter',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(H){"use strict";var T=H.Tester;var a=sap.ushell.renderers.fiori2.search.controls.SearchTileHighlighter=function(){this.init.apply(this,arguments);};a.prototype={init:function(){},setHighlightTerms:function(h){this.tester=new T(h,'sapUshellSearchHighlight',true,'or');},highlight:function(t){var n=t.getDomRef();if(!n){return;}this.doHighlight(n);},doHighlight:function(n){if(n.nodeType===window.Node.TEXT_NODE){this.highlightTextNode(n);return;}for(var i=0;i<n.childNodes.length;++i){var c=n.childNodes[i];this.doHighlight(c);}},highlightTextNode:function(n){var t=this.tester.test(n.textContent);if(!t.bMatch){return;}var s=document.createElement('span');s.innerHTML=jQuery.sap.encodeHTML(t.sHighlightedText);H.boldTagUnescaper(s,'sapUshellSearchHighlight');n.parentNode.insertBefore(s,n);n.parentNode.removeChild(n);}};return a;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchTilesContainer',['sap/ushell/renderers/fiori2/search/controls/SearchTilesContainerKeyHandler','sap/ushell/renderers/fiori2/search/controls/SearchTileHighlighter','sap/ushell/renderers/fiori2/search/controls/SearchResultList','sap/m/Button'],function(K,T,S){"use strict";
sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer',{
metadata:{properties:{'totalLength':{type:'int',defaultValue:0},'maxRows':{type:'int',defaultValue:1},'highlightTerms':{type:'string',defaultValue:''},'enableKeyHandler':{type:'boolean',defaultValue:true},'resultList':{type:'sap.ushell.renderers.fiori2.search.controls.SearchResultList'},'addAccInformation':{type:'boolean',defaultValue:false}},aggregations:{'tiles':{type:'sap.ui.core.Control',multiple:true}},events:{showMore:{}}},
PHONE_SIZE_STYLE:'sapMTileSmallPhone',
constructor:function(){sap.ui.core.Control.prototype.constructor.apply(this,arguments);if(this.getEnableKeyHandler()){this.addEventDelegate(new K(this));}this.tileHighlighter=new T();this._previousTabHandler={onsaptabprevious:function(e){var t;if(jQuery(this.control.getDomRef()).prop("tagName").toLowerCase()==="button"){t=this.control.getDomRef();}else{var b=jQuery(this.control.getDomRef()).find("[role='option']");if(b.length>0){t=b[0];}}if(e.isMarked()||!t||e.target!==t){return;}this.resultList.forwardTab(false);e.setMarked();}};},
setHighlightTerms:function(t){this.setProperty('highlightTerms',t,true);},
delayedRerender:function(){var t=this;setTimeout(function(){t.rerender();},0);},
renderer:function(r,c){var a=c.getModel().getProperty("/appResults");if(!a||a.length===0){return;}r.write('<div');r.writeControlData(c);r.addClass('sapUshellSearchTileContainer');r.writeClasses();r.write('>');c.renderTiles(r,c);r.write('</div>');},
logUsageAnalytics:function(t){var i,m,c;if(t.attachPress){t.attachPress(function(){m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.eventLogger.logEvent({type:m.eventLogger.TILE_NAVIGATE,tileTitle:t.eventLoggingData.title,targetUrl:t.eventLoggingData.targetUrl});});return;}if(t&&t.getContent){c=t.getContent();if(c.length!==1){return;}i=c[0];if(!i.attachPress){return;}i.attachPress(function(){m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.eventLogger.logEvent({type:m.eventLogger.TILE_NAVIGATE,tileTitle:t.eventLoggingData.title,targetUrl:t.eventLoggingData.targetUrl});});}},
renderTiles:function(r,c){var t=c.getTiles();for(var i=0;i<t.length;i++){var a=t[i];c.logUsageAnalytics(a);c.registerAfterRenderingForTile(a);r.write('<div');r.addClass('sapUshellSearchTileWrapper');r.addClass('sapMGT');r.addClass('OneByOne');r.writeClasses();r.write('>');r.renderControl(a);r.write('</div>');a.addEventDelegate(this._previousTabHandler,{resultList:c.getResultList(),control:a});}c.renderPlusTile(r,c);c.tileHighlighter.setHighlightTerms(c.getHighlightTerms());},
renderPlusTile:function(r,c){r.write('<div');r.addClass('sapUshellSearchTileWrapper');r.addClass('sapMGT');r.addClass('OneByOne');r.addClass('sapUshellSearchShowMoreTile');r.writeClasses();r.writeAttribute('style','display:none');r.write('>');var b=new sap.m.Button({text:sap.ushell.resources.i18n.getText('showMoreApps'),tooltip:sap.ushell.resources.i18n.getText('showMoreApps'),press:function(){c.fireShowMore();}});b.addEventDelegate(this._previousTabHandler,{resultList:c.getResultList(),control:b});b.addStyleClass('sapUshellSearchShowMoreTileButton');b.addStyleClass('sapMGT');b.addStyleClass('OneByOne');r.renderControl(b);r.write('</div>');},
onAfterRendering:function(e){this.limitTileSize();while(this.getNumberRows()>this.getMaxRows()){this.removeLastTile();}var c=this.getDomRef();var n=c.children.length-1;if(this.getTotalLength()>n){this.makePlusTileVisible();this.cutAtRow();}else{c.removeChild(c.children.item(c.children.length-1));}this.getModel().getProperty("/appResults").forEach(function(a){if(a.tile&&typeof a.tile.refresh==='function'){a.tile.refresh();}});this.addAccessibilityInformation();},
addAccessibilityInformation:function(){if(!this.getAddAccInformation()){return;}var c=this.getDomRef();var a=c.children;for(var i=0;i<a.length;++i){var b=a[i];var f=b.querySelector('[tabindex]');if(!f){f=b.querySelector('button');}if(!f){continue;}var d=f.getAttribute('aria-label');if((typeof d)==='string'){f.setAttribute('aria-label',sap.ushell.resources.i18n.getText('tile')+' '+d);}f.setAttribute('role','option');f.setAttribute('aria-posinset',i+1);f.setAttribute('aria-setsize',a.length);}},
limitTileSize:function(){var a=this.isPhoneSize();var c=this.getDomRef();for(var i=0;i<c.children.length;++i){var t=c.children.item(i);if(!this.findElementByStyleClass(t,'sapMGT')||!this.findElementByStyleClass(t,'OneByOne')){t.classList.add('sapMGT');t.classList.add('OneByOne');}if(a){var b=this.findElementByStyleClass(t,'sapMGT');if(b){b.classList.add(this.PHONE_SIZE_STYLE);}}}},
isPhoneSize:function(){var c=this.getDomRef();for(var i=0;i<c.children.length;++i){var t=c.children.item(i);if(this.findElementByStyleClass(t,this.PHONE_SIZE_STYLE)){return true;}}return false;},
findElementByStyleClass:function(d,c){if(d.classList.contains(c)){return d;}if(d.children.length===1){return this.findElementByStyleClass(d.children.item(0),c);}return false;},
getNumberDisplayedTiles:function(){var c=this.getDomRef();return c.children.length;},
registerAfterRenderingForTile:function(t){var a=this;if(t.searchTilesContainerAfterRenderingRegistered){return;}t.addEventDelegate({onAfterRendering:function(){var e=t.getDomRef().querySelector(".TwoByOne","TwoThirds");if(e){e.classList.remove("TwoByOne","TwoThirds");e.classList.add("OneByOne");}a.tileHighlighter.highlight(t);}});t.searchTilesContainerAfterRenderingRegistered=true;},
makePlusTileVisible:function(){var c=this.getDomRef();var p=c.children.item(c.children.length-1);p.style.display='inline-block';},
removeLastTile:function(){var c=this.getDomRef();var l=c.children.item(c.children.length-2);l.parentNode.removeChild(l);},
cutAtRow:function(){var c=this.getDomRef();while(!this.isLastRowCompletelyFilled()||this.getNumberRows()>this.getMaxRows()){if(c.children.length<=2){break;}this.removeLastTile();}},
isLastRowCompletelyFilled:function(){var c=this.getDomRef();var t=this.getTilesPerRow();var a=-1;for(var i=0;i<t;++i){var b=c.children.item(c.children.length-1-i);if(b.style.display==='none'){t++;continue;}if(a<0){a=b.offsetLeft;continue;}if(b.offsetLeft>a){return false;}}return true;},
getNumberRows:function(){var c=this.getDomRef();var t=-1;var a=0;for(var i=0;i<c.children.length-1;++i){var b=c.children.item(i);if(b.style.display==='none'){continue;}if(t<0||b.offsetLeft<=t){a++;}t=b.offsetLeft;}return a;},
getTilesPerRow:function(){var c=this.getDomRef();var t=-1;var a=0;for(var i=0;i<c.children.length;++i){var b=c.children.item(i);if(b.style.display==='none'){continue;}if(b.offsetLeft<=t){return a;}a++;t=b.offsetLeft;}return a;}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchTilesContainerKeyHandler',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";var d={getAncestorByClass:function(e,c){while(e){if(e.classList.contains(c)){return e;}e=e.parentElement;}return false;}};var T=function(){this.init.apply(this,arguments);};T.prototype={init:function(t,e){this.tilesContainer=t;this.tilesContainerElement=t.getDomRef();this.element=e;},getIndexInTilesContainer:function(){return Array.prototype.indexOf.call(this.tilesContainerElement.children,this.element);},next:function(){if((this.getIndexInTilesContainer()+1)%this.tilesContainer.getTilesPerRow()===0){return null;}if(this.element.nextElementSibling){return new T(this.tilesContainer,this.element.nextElementSibling);}return null;},previous:function(){if((this.getIndexInTilesContainer())%this.tilesContainer.getTilesPerRow()===0){return null;}if(this.element.previousElementSibling){return new T(this.tilesContainer,this.element.previousElementSibling);}return null;},upper:function(){var i=this.getIndexInTilesContainer()-this.tilesContainer.getTilesPerRow();if(i<0){return null;}return new T(this.tilesContainer,this.tilesContainerElement.children.item(i));},lower:function(){var i=this.getIndexInTilesContainer()+this.tilesContainer.getTilesPerRow();if(i>=this.tilesContainerElement.children.length){return null;}return new T(this.tilesContainer,this.tilesContainerElement.children.item(i));},focus:function(){var e=S.getFocusableTileDomRef(this.element);if(e){e.focus();}}};var K=sap.ushell.renderers.fiori2.search.controls.SearchTilesContainerKeyHandler=function(){this.init.apply(this,arguments);};K.prototype={init:function(t){this.tilesContainer=t;},getFocusedObject:function(e){var t=d.getAncestorByClass(e,'sapUshellSearchTileWrapper');if(!t){return null;}return new T(this.tilesContainer,t);},onsapdown:function(e){this.navigate('lower',e);},onsapup:function(e){this.navigate('upper',e);},onsapleft:function(e){this.navigate('previous',e);},onsapright:function(e){this.navigate('next',e);},navigate:function(m,e){e.stopPropagation();e.preventDefault();var o=this.getFocusedObject(e.target);if(!o){return;}var n=o[m].apply(o,[]);if(!n){return;}n.focus();}};return K;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/eventlogging/EventConsumer',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.eventlogging.EventConsumer');var m=sap.ushell.renderers.fiori2.search.eventlogging.EventConsumer=function(){this.init.apply(this,arguments);};m.prototype={init:function(){},logEvent:function(e){}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/eventlogging/EventLogger',['sap/ushell/renderers/fiori2/search/eventlogging/SinaLogConsumer','sap/ushell/renderers/fiori2/search/eventlogging/UsageAnalyticsConsumer','sap/ushell/renderers/fiori2/search/SearchHelper'],function(S,U,a){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.eventlogging.EventLogger');var m=sap.ushell.renderers.fiori2.search.eventlogging.EventLogger=function(){this.init.apply(this,arguments);};
m.newInstance=function(p){var l=new m();l.addConsumer(new S(p.sinaNext));l.addConsumer(new U());return l;};
m.prototype={ITEM_NAVIGATE:'ITEM_NAVIGATE',SUGGESTION_SELECT:'SUGGESTION_SELECT',SEARCH_REQUEST:'SEARCH_REQUEST',RESULT_LIST_ITEM_NAVIGATE_CONTEXT:'RESULT_LIST_ITEM_NAVIGATE_CONTEXT',SUGGESTION_REQUEST:'SUGGESTION_REQUEST',TILE_NAVIGATE:'TILE_NAVIGATE',SHOW_MORE:'SHOW_MORE',BROWSER_CLOSE:'BROWSER_CLOSE',LEAVE_PAGE:'LEAVE_PAGE',SESSION_START:'SESSION_START',RESULT_LIST_ITEM_NAVIGATE:'RESULT_LIST_ITEM_NAVIGATE',OBJECT_SUGGESTION_NAVIGATE:'OBJECT_SUGGESTION_NAVIGATE',DROPDOWN_SELECT_DS:'DROPDOWN_SELECT_DS',DATASOURCE_CHANGE:'DATASOURCE_CHANGE',FACET_FILTER_ADD:'FACET_FILTER_ADD',FACET_FILTER_DEL:'FACET_FILTER_DEL',ITEM_SHOW_DETAILS:'ITEM_SHOW_DETAILS',ITEM_HIDE_DETAILS:'ITEM_HIDE_DETAILS',CLEAR_ALL_FILTERS:'CLEAR_ALL_FILTERS',FACET_SHOW_MORE:'FACET_SHOW_MORE',FACET_SHOW_MORE_CLOSE:'FACET_SHOW_MORE_CLOSE',eventMetadata:{SESSION_START:{},ITEM_NAVIGATE:{systemAndClient:'string',sourceUrlArray:'string',targetUrl:'string'},RESULT_LIST_ITEM_NAVIGATE:{targetUrl:'string',positionInList:'integer',executionId:'string'},SUGGESTION_SELECT:{suggestionType:'string',suggestionTitle:'string',suggestionTerm:'string',searchTerm:'string',targetUrl:'string',dataSourceKey:'string'},SEARCH_REQUEST:{searchTerm:'string',dataSourceKey:'string'},RESULT_LIST_ITEM_NAVIGATE_CONTEXT:{systemAndClient:'string',sourceUrlArray:'string',targetUrl:'string'},SUGGESTION_REQUEST:{suggestionTerm:'string',dataSourceKey:'string'},TILE_NAVIGATE:{tileTitle:'string',targetUrl:'string'},SHOW_MORE:{},LEAVE_PAGE:{},BROWSER_CLOSE:{},DROPDOWN_SELECT_DS:{dataSourceId:'string'},DATASOURCE_CHANGE:{dataSourceId:'string'},FACET_FILTER_ADD:{referencedAttribute:'string',clickedValue:'string',clickedPosition:'integer'},FACET_FILTER_DEL:{referencedAttribute:'string',clickedValue:'string',clickedPosition:'integer'},FACET_SHOW_MORE:{referencedAttribute:'string'},FACET_SHOW_MORE_CLOSE:{}},init:function(){this.consumers=[];},addConsumer:function(c){this.consumers.push(c);c.eventLogger=this;},logEvent:function(b){if(!a.isLoggingEnabled()){return;}for(var i=0;i<this.consumers.length;++i){var c=this.consumers[i];try{c.logEvent(b);}catch(e){}}}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/eventlogging/SinaLogConsumer',['sap/ushell/renderers/fiori2/search/eventlogging/EventConsumer'],function(E){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.eventlogging.SinaLogConsumer');var m=sap.ushell.renderers.fiori2.search.eventlogging.SinaLogConsumer=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new E(),{init:function(s){this.sinaNext=s;},logEvent:function(e){this.sinaNext.logUserEvent(e);}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/eventlogging/UsageAnalyticsConsumer',['sap/ushell/renderers/fiori2/search/eventlogging/EventConsumer'],function(E){"use strict";var s=window.sinabase;jQuery.sap.declare('sap.ushell.renderers.fiori2.search.eventlogging.UsageAnalyticsConsumer');var m=sap.ushell.renderers.fiori2.search.eventlogging.UsageAnalyticsConsumer=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new E(),{init:function(){try{this.analytics=sap.ushell.Container.getService("UsageAnalytics");}catch(e){}},logEvent:function(e){if(!this.analytics){return;}switch(e.type){case this.eventLogger.RESULT_LIST_ITEM_NAVIGATE:this.analytics.logCustomEvent('FLP: Search','Launch Object',[e.targetUrl]);break;case this.eventLogger.SUGGESTION_SELECT:switch(e.suggestionType){case s.SuggestionType.APPS:this.analytics.logCustomEvent('FLP: Search','Suggestion Select App',[e.suggestionTitle,e.targetUrl,e.searchTerm]);this.analytics.logCustomEvent('FLP: Application Launch point','Search Suggestions',[e.suggestionTitle,e.targetUrl,e.searchTerm]);break;case s.SuggestionType.DATASOURCE:this.analytics.logCustomEvent('FLP: Search','Suggestion Select Datasource',[e.dataSourceKey,e.searchTerm]);break;case s.SuggestionType.OBJECTDATA:this.analytics.logCustomEvent('FLP: Search','Suggestion Select Object Data',[e.suggestionTerm,e.dataSourceKey,e.searchTerm]);break;case s.SuggestionType.HISTORY:this.analytics.logCustomEvent('FLP: Search','Suggestion Select Object Data',[e.suggestionTerm,e.dataSourceKey,e.searchTerm]);break;}break;case this.eventLogger.SEARCH_REQUEST:this.analytics.logCustomEvent('FLP: Search','Search',[e.searchTerm,e.dataSourceKey]);break;case this.eventLogger.RESULT_LIST_ITEM_NAVIGATE_CONTEXT:this.analytics.logCustomEvent('FLP: Search','Launch Related Object',[e.targetUrl]);break;case this.eventLogger.SUGGESTION_REQUEST:this.analytics.logCustomEvent('FLP: Search','Suggestion',[e.suggestionTerm,e.dataSourceKey]);break;case this.eventLogger.TILE_NAVIGATE:this.analytics.logCustomEvent('FLP: Search','Launch App',[e.tileTitle,e.targetUrl]);this.analytics.logCustomEvent('FLP: Application Launch point','Search Results',[e.titleTitle,e.targetUrl]);break;}}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/personalization/BrowserPersonalizationStorage',['sap/ushell/renderers/fiori2/search/personalization/Personalizer'],function(P){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.personalization.BrowserPersonalizationStorage');var m=sap.ushell.renderers.fiori2.search.personalization.BrowserPersonalizationStorage=function(){this.init.apply(this,arguments);};var B=m;m.prototype={init:function(){},getItem:function(k){if(!this._isStorageSupported()){throw'not supported storage';}return this._getStorage(k);},setItem:function(k,d){if(!this._isStorageSupported()){throw'not supported storage';}this._putStorage(k,d);},getPersonalizer:function(k){return new P(k,this);},_isStorageSupported:function(){if(jQuery.sap.storage&&jQuery.sap.storage.isSupported()){return true;}else{return false;}},_getStorage:function(k){return jQuery.sap.storage.get("Search.Personalization."+k);},_putStorage:function(k,s){jQuery.sap.storage.put("Search.Personalization."+k,s);}};
m.getInstance=function(){return new jQuery.Deferred().resolve(new B());};
return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/personalization/FLPPersonalizationStorage',['sap/ushell/renderers/fiori2/search/personalization/Personalizer','sap/ushell/renderers/fiori2/search/SearchHelper'],function(P,S){"use strict";var m=sap.ushell.renderers.fiori2.search.personalization.FLPPersonalizationStorage=function(){this.init.apply(this,arguments);};var F=m;m.prototype={init:function(c){this.container=c;this.save=S.delayedExecution(this.save,2000);},save:function(){this.container.save();},getItem:function(k){k=this.limitLength(k);if(!this._isStorageSupported()){throw'not supported storage';}return this.container.getItemValue(k);},setItem:function(k,d){k=this.limitLength(k);if(!this._isStorageSupported()){throw'not supported storage';}this.container.setItemValue(k,d);this.save();},limitLength:function(k){return k.slice(-40);},getPersonalizer:function(k){return new P(k,this);},_isStorageSupported:function(){if(jQuery.sap.storage&&jQuery.sap.storage.isSupported()){return true;}else{return false;}}};
m.getInstance=function(){var p=sap.ushell.Container.getService("Personalization");return p.getContainer("ushellSearchPersoServiceContainer").then(function(c){return new F(c);});};
return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/personalization/MemoryPersonalizationStorage',['sap/ushell/renderers/fiori2/search/personalization/Personalizer'],function(P){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.personalization.MemoryPersonalizationStorage');var m=sap.ushell.renderers.fiori2.search.personalization.MemoryPersonalizationStorage=function(){this.init.apply(this,arguments);};var M=m;m.prototype={init:function(){this.dataMap={};},getItem:function(k){if(!this._isStorageSupported()){throw'not supported storage';}return this._getStorage(k);},setItem:function(k,d){if(!this._isStorageSupported()){throw'not supported storage';}this._putStorage(k,d);},getPersonalizer:function(k){return new P(k,this);},_isStorageSupported:function(){return true;},_getStorage:function(k){return this.dataMap[k];},_putStorage:function(k,s){this.dataMap[k]=s;}};
m.getInstance=function(){return new jQuery.Deferred().resolve(new M());};
return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/personalization/PersonalizationStorage',['sap/ushell/renderers/fiori2/search/personalization/FLPPersonalizationStorage','sap/ushell/renderers/fiori2/search/personalization/BrowserPersonalizationStorage','sap/ushell/renderers/fiori2/search/personalization/MemoryPersonalizationStorage','sap/ushell/renderers/fiori2/search/SearchConfiguration'],function(F,B,M,S){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.personalization.PersonalizationStorage');var c=S.getInstance();sap.ushell.renderers.fiori2.search.personalization.PersonalizationStorage={instance:null,isLaunchpad:function(){try{return sap.ushell.Container.getService("Personalization")?true:false;}catch(e){return false;}},getInstance:function(){var t=this;if(this.instancePromise){return this.instancePromise;}switch(c.personalizationStorage){case'auto':if(this.isLaunchpad()){this.instancePromise=F.getInstance();}else{this.instancePromise=B.getInstance();}break;case'browser':this.instancePromise=B.getInstance();break;case'flp':this.instancePromise=F.getInstance();break;case'memory':this.instancePromise=M.getInstance();break;default:}this.instancePromise.then(function(i){t.instance=i;});return this.instancePromise;},getInstanceSync:function(){if(!this.instance){throw'No instance, call async method getInstance for getting the instance';}return this.instance;},isInitialized:function(){return!!this.instance;}};return sap.ushell.renderers.fiori2.search.personalization.PersonalizationStorage;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/personalization/Personalizer',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.personalization.Personalizer');var P=sap.ushell.renderers.fiori2.search.personalization.Personalizer=function(){this.init.apply(this,arguments);};P.prototype={init:function(k,p){this.key=k;this.personalizationStorageInstance=p;},getKey:function(){return this.key;},setPersData:function(d){return(new jQuery.Deferred()).resolve(this.personalizationStorageInstance.setItem(this.key,d));},getPersData:function(){return(new jQuery.Deferred()).resolve(this.personalizationStorageInstance.getItem(this.key));}};return P;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/AppSuggestionProvider',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/suggestions/SuggestionProvider','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType'],function(S,a,b){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.AppSuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.AppSuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new a(),{init:function(p){a.prototype.init.apply(this,arguments);this.suggestApplications=S.refuseOutdatedRequests(this.suggestApplications);},abortSuggestions:function(){this.suggestApplications.abort();},combineSuggestionsWithIdenticalTitle:function(s){var c;var d={};for(var i=0;i<s.length;i++){c=s[i];var f=d[c.title+c.subtitle];if(f){if(!f.combinedSuggestionExists){var e={title:'combinedAppSuggestion'+i,subtitle:c.subtitle,sortIndex:f.sortIndex,url:this.model.searchUrlParser.renderFromParameters(this.model.appTopDefault,this.model.sinaNext.createFilter({dataSource:this.model.appDataSource,searchTerm:c.title}),false),label:sap.ushell.resources.i18n.getText("suggestion_in_apps",c.label),icon:""};var g=sap.ushell.resources.i18n.getText("suggestion_in_apps",[""]);e.label=e.label.replace(g,"<i>"+g+"</i>");d[e.title+e.subtitle]=e;f.combinedSuggestionExists=true;}}else{c.sortIndex=i;d[c.title+c.subtitle]=c;}}s=[];for(var h in d){if(d.hasOwnProperty(h)){c=d[h];if(!c.combinedSuggestionExists){s.push(c);}}}s.sort(function(j,k){return j.sortIndex-k.sortIndex;});return s;},addAsterisk4ShowAllApps:function(s){var n=s;s=s.match(/\S+/g);if(s.length>0){var c;var d=[];for(var i=0;i<s.length;i++){c=s[i];if(c&&c.lastIndexOf('*')!==c.length-1){d.push(c+'*');}else{d.push(c);}}n=d.join(' ');}return n;},createShowMoreSuggestion:function(t){var c=sap.ushell.resources.i18n.getText("showAllNApps",t);c=c.replace(/"/g,"");var d=c;var l="<i>"+c+"</i>";return{title:c,tooltip:d,label:l,dataSource:this.model.appDataSource,labelRaw:this.model.getProperty("/uiFilter/searchTerm"),uiSuggestionType:b.SearchTermData,searchTerm:this.model.getProperty("/uiFilter/searchTerm")||''};},getSuggestions:function(){var t=this;var d=t.model.getDataSource();if(d!==t.model.allDataSource&&d!==t.model.appDataSource){return jQuery.when([]);}var s=t.model.getProperty('/uiFilter/searchTerm');return t.suggestApplications(s).then(function(r){var c=r.getElements();c=t.combineSuggestionsWithIdenticalTitle(c);jQuery.each(c,function(i,f){f.uiSuggestionType=b.App;f.dataSource=t.model.appDataSource;f.position=b.properties.App.position;});var e;if(t.model.isAllCategory()){e=b.properties.App.limitDsAll;}else{e=b.properties.App.limitDsApps;}c=c.slice(0,e);if(r.totalResults>e&&d===t.model.appDataSource){c.push(t.createShowMoreSuggestion(r.totalResults));}return c;});},suggestApplications:function(s){return sap.ushell.Container.getService("Search").queryApplications({searchTerm:s,suggestion:true});}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SinaBaseSuggestionProvider',['sap/ushell/renderers/fiori2/search/suggestions/SuggestionProvider','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType'],function(S,a){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SinaBaseSuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.SinaBaseSuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new S(),{init:function(){S.prototype.init.apply(this,arguments);},prepareSuggestionQuery:function(f){var t=this;t.suggestionQuery.resetResultSet();t.suggestionQuery.setFilter(f);var s=t.assembleSinaSuggestionTypesAndCalcModes();t.suggestionQuery.setTypes(s.types);t.suggestionQuery.setCalculationModes(s.calculationModes);t.suggestionQuery.setTop(20);},assembleSinaSuggestionTypesAndCalcModes:function(){var b=function(l,e){if(l.indexOf(e)>=0){return;}l.push(e);};var r={types:[],calculationModes:[]};for(var i=0;i<this.suggestionTypes.length;++i){var s=this.suggestionTypes[i];switch(s){case a.SearchTermHistory:b(r.types,this.sinaNext.SuggestionType.SearchTerm);b(r.calculationModes,this.sinaNext.SuggestionCalculationMode.History);break;case a.SearchTermData:b(r.types,this.sinaNext.SuggestionType.SearchTerm);b(r.calculationModes,this.sinaNext.SuggestionCalculationMode.Data);break;case a.DataSource:b(r.types,this.sinaNext.SuggestionType.DataSource);b(r.calculationModes,this.sinaNext.SuggestionCalculationMode.Data);break;case a.Object:b(r.types,this.sinaNext.SuggestionType.Object);b(r.calculationModes,this.sinaNext.SuggestionCalculationMode.Data);break;}}return r;}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SinaObjectSuggestionFormatter',['sap/ushell/renderers/fiori2/search/SearchNavigationObjectForSinaNavTarget'],function(S){"use strict";var F=function(){this.init.apply(this,arguments);};F.prototype={init:function(){},assembleLabel1:function(s){var t=[];var a=false;var b;var c=s.object.titleAttributes;for(var i=0;i<c.length;++i){b=c[i];t.push(b.valueHighlighted);if(b.isHighlighted){a=true;}}return{label:t.join(' '),isHighlighted:a};},assembleLabel2:function(l,s){var d=s.object.detailAttributes;var a;if(d.length===0){return'';}if(!l){a=this.getFirstHighlightedAttribute(d);if(a){return a.valueHighlighted;}}a=this.getFirstStringAttribute(d);if(a){return a.valueHighlighted;}return'';},getFirstHighlightedAttribute:function(a){for(var i=0;i<a.length;++i){var b=a[i];if(b.isHighlighted){return b;}}},getFirstStringAttribute:function(a){var s={"Date":40,"Double":70,"GeoJson":130,"ImageBlob":120,"ImageUrl":110,"Integer":60,"Longtext":20,"String":10,"Time":50,"Timestamp":30};if(a.length===0){return null;}a=a.slice();a.sort(function(c,d){return s[c.metadata.type]-s[d.metadata.type];});var b=a[0];if(s[b.metadata.type]>100){return null;}return b;},assembleNavigation:function(s){if(!s.object.defaultNavigationTarget){return null;}var n=new S(s.object.defaultNavigationTarget);n.setLoggingType('OBJECT_SUGGESTION_NAVIGATE');return n;},assembleImageUrl:function(s){var d=s.object.detailAttributes;for(var i=0;i<d.length;++i){var a=d[i];if(a.metadata.type===a.sina.AttributeType.ImageUrl){return a.value;}}},format:function(s,a){var b={key:a.key,uiSuggestionType:a.uiSuggestionType};var l=this.assembleLabel1(a);b.label1=l.label;b.label2=this.assembleLabel2(l.isHighlighted,a);b.titleNavigation=this.assembleNavigation(a);b.imageUrl=this.assembleImageUrl(a);b.position=a.position;s.addSuggestion(b);}};return F;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SinaSuggestionProvider',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/suggestions/SinaBaseSuggestionProvider','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType','sap/ushell/renderers/fiori2/search/suggestions/SinaObjectSuggestionFormatter'],function(S,a,b,c){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SinaSuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.SinaSuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new a(),{suggestionLimit:jQuery.device.is.phone?5:7,init:function(p){a.prototype.init.apply(this,arguments);this.dataSourceDeferred=null;this.suggestionQuery=this.sinaNext.createSuggestionQuery();this.sinaObjectSuggestionFormatter=new c(this);},abortSuggestions:function(){this.suggestionQuery.abort();},getSuggestions:function(f){var t=this;this.suggestions=[];this.firstObjectDataSuggestion=true;this.numberSuggestionsByType={};for(var i=0;i<b.types.length;++i){var s=b.types[i];this.numberSuggestionsByType[s]=0;}var d=f.searchTerm;if(this.suggestionTypes.length===1&&this.suggestionTypes.indexOf(b.SearchTermData)>=0&&d.length<3){return jQuery.when(this.suggestions);}if(this.suggestionTypes.length===1&&this.suggestionTypes.indexOf(b.DataSource)>=0&&t.model.getDataSource()!==t.model.sinaNext.allDataSource){return jQuery.when(this.suggestions);}t.createAllAndAppDsSuggestions();if(!t.model.config.searchBusinessObjects){return jQuery.when(this.suggestions);}if(t.model.getDataSource()===t.model.appDataSource){return jQuery.when(this.suggestions);}t.prepareSuggestionQuery(f);return t.suggestionQuery.getResultSetAsync().then(function(r){var e=r.items;t.formatSinaSuggestions(e);return t.suggestions;});},createAllAndAppDsSuggestions:function(){if(this.suggestionTypes.indexOf(b.DataSource)<0){return;}if(this.model.getDataSource()!==this.model.allDataSource){return;}var d=[];d.unshift(this.model.appDataSource);d.unshift(this.model.allDataSource);var s=this.model.getProperty('/uiFilter/searchTerm');var e=s.replace(/\*/g,'');var t=new S.Tester(e);for(var i=0;i<d.length;++i){var f=d[i];if(f.id===this.model.getDataSource().id){continue;}var T=t.test(f.label);if(T.bMatch===true){var n=this.numberSuggestionsByType[b.DataSource];var l=b.properties.DataSource.limit;if(n>=l){return;}var g={};g.label='<i>'+sap.ushell.resources.i18n.getText("searchInPlaceholder",[""])+'</i> '+T.sHighlightedText;g.dataSource=f;g.position=b.properties.DataSource.position;g.type=this.sinaNext.SuggestionType.DataSource;g.calculationMode=this.sinaNext.SuggestionCalculationMode.Data;g.key=f.id;this.addSuggestion(g);}}},preFormatSuggestions:function(s){for(var i=0;i<s.length;++i){var d=s[i];d.uiSuggestionType=this.getSuggestionType(d);d.position=b.properties[d.uiSuggestionType].position;switch(d.uiSuggestionType){case b.SearchTermData:d.key=d.filter.searchTerm;break;case b.SearchTermHistory:d.key=d.filter.searchTerm;break;case b.DataSource:d.key=d.dataSource.id;break;case b.Object:d.key=d.object.title;break;}if(d.childSuggestions){this.preFormatSuggestions(d.childSuggestions);}}},formatSinaSuggestions:function(s){this.preFormatSuggestions(s);for(var i=0;i<s.length;++i){var d=s[i];if(this.suggestionTermBuffer.hasTerm(d.key)){continue;}var n=this.numberSuggestionsByType[d.uiSuggestionType];var l=b.properties[d.uiSuggestionType].limit;if(n>=l){continue;}switch(d.uiSuggestionType){case b.DataSource:if(this.model.getDataSource()!==this.model.allDataSource){continue;}d.label='<i>'+sap.ushell.resources.i18n.getText("searchInPlaceholder",[""])+'</i> '+d.label;this.addSuggestion(d);break;case b.SearchTermData:this.formatSearchTermDataSuggestion(d);break;case b.SearchTermHistory:this.addSuggestion(d);break;case b.Object:this.sinaObjectSuggestionFormatter.format(this,d);break;default:break;}}return this.suggestions;},addSuggestion:function(s){this.suggestions.push(s);this.suggestionTermBuffer.addTerm(s.key);this.numberSuggestionsByType[s.uiSuggestionType]+=1;},formatSearchTermDataSuggestion:function(s){if(this.model.getDataSource()===this.model.allDataSource){if(this.firstObjectDataSuggestion){this.firstObjectDataSuggestion=false;if(s.childSuggestions.length>0){s.label=this.assembleSearchInSuggestionLabel(s);this.addSuggestion(s);this.addChildSuggestions(s);}else{this.addSuggestion(s);}}else{this.addSuggestion(s);}}else{this.addSuggestion(s);}},addChildSuggestions:function(s){for(var i=0;i<Math.min(2,s.childSuggestions.length);++i){var l=b.properties.SearchTermData.limit;var n=this.numberSuggestionsByType[b.SearchTermData];if(n>=l){return;}var d=s.childSuggestions[i];d.label=this.assembleSearchInSuggestionLabel(d);this.addSuggestion(d);}},assembleSearchInSuggestionLabel:function(s){return sap.ushell.resources.i18n.getText("resultsIn",['<span>'+s.label+'</span>',s.filter.dataSource.labelPlural]);},getSuggestionType:function(s){switch(s.type){case this.sinaNext.SuggestionType.SearchTerm:if(s.calculationMode===this.sinaNext.SuggestionCalculationMode.History){return b.SearchTermHistory;}return b.SearchTermData;case this.sinaNext.SuggestionType.SearchTermAndDataSource:if(s.calculationMode===this.sinaNext.SuggestionCalculationMode.History){return b.SearchTermHistory;}return b.SearchTermData;case this.sinaNext.SuggestionType.DataSource:return b.DataSource;case this.sinaNext.SuggestionType.Object:return b.Object;}}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SuggestionHandler',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/suggestions/SinaSuggestionProvider','sap/ushell/renderers/fiori2/search/suggestions/AppSuggestionProvider','sap/ushell/renderers/fiori2/search/suggestions/TimeMerger','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType'],function(S,a,A,T,b){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SuggestionHandler');var s=sap.ushell.renderers.fiori2.search.suggestions;var c=function(){this.init.apply(this,arguments);};c.prototype={init:function(){this.terms={};},addTerm:function(t){t=t.trim().toLowerCase();this.terms[t]=true;},hasTerm:function(t){t=t.trim().toLowerCase();return!!this.terms[t];},clear:function(){this.terms={};}};
s.SuggestionHandler=function(){this.init.apply(this,arguments);};
s.SuggestionHandler.prototype={init:function(p){var t=this;t.model=p.model;t.suggestionProviders=[];t.suggestionTermBuffer=new c();t.keyboardRelaxationTime=400;t.uiUpdateInterval=500;t.uiClearOldSuggestionsTimeOut=1000;t.appSuggestionProvider=new A({model:t.model,suggestionTermBuffer:t.suggestionTermBuffer});t.doSuggestionInternal=S.delayedExecution(t.doSuggestionInternal,t.keyboardRelaxationTime);t.timeMerger=new T();},abortSuggestions:function(d){if(d===undefined||d===true){this.model.setProperty("/suggestions",[]);}if(this.clearSuggestionTimer){clearTimeout(this.clearSuggestionTimer);this.clearSuggestionTimer=null;}this.doSuggestionInternal.abort();this.getSuggestionProviders().done(function(e){for(var i=0;i<e.length;++i){var f=e[i];f.abortSuggestions();}});this.timeMerger.abort();},getSuggestionProviders:function(){var t=this;if(t.suggestionProvidersDeferred){return t.suggestionProvidersDeferred;}t.suggestionProvidersDeferred=t.model.initBusinessObjSearch().then(function(){t.sinaNext=t.model.sinaNext;var d=[t.appSuggestionProvider];if(!t.model.config.searchBusinessObjects){return jQuery.when(d);}d.push.apply(d,t.createSinaSuggestionProviders());return jQuery.when(d);});return t.suggestionProvidersDeferred;},createSinaSuggestionProviders:function(){var p=[{suggestionTypes:[b.SearchTermHistory]},{suggestionTypes:[b.SearchTermData]},{suggestionTypes:[b.DataSource]}];var d=[];for(var k=0;k<p.length;++k){var e=p[k];d.push(new a({model:this.model,sinaNext:this.sinaNext,suggestionTermBuffer:this.suggestionTermBuffer,suggestionTypes:e.suggestionTypes}));}return d;},isSuggestionPopupVisible:function(){return jQuery('.searchSuggestion').filter(':visible').length>0;},doSuggestion:function(f){var t=this;if(this.isSuggestionPopupVisible()){this.abortSuggestions(false);this.clearSuggestionTimer=setTimeout(function(){t.clearSuggestionTimer=null;t.model.setProperty("/suggestions",[]);},t.uiClearOldSuggestionsTimeOut);}else{this.abortSuggestions();}this.doSuggestionInternal(f);},doSuggestionInternal:function(f){var t=this;var d=t.model.getProperty("/uiFilter/searchTerm");if(d.length===0){return;}if(d.trim()==='*'){return;}t.model.eventLogger.logEvent({type:t.model.eventLogger.SUGGESTION_REQUEST,suggestionTerm:t.model.getProperty('/uiFilter/searchTerm'),dataSourceKey:t.model.getProperty('/uiFilter/dataSource').id});t.suggestionTermBuffer.clear();t.getSuggestionProviders().done(function(e){var p=[];var g=true;var h=e.length;for(var i=0;i<e.length;++i){var k=e[i];p.push(k.getSuggestions(f));}t.timeMerger.abort();t.timeMerger=new T(p,t.uiUpdateInterval);t.timeMerger.process(function(r){h-=r.length;var s=[];for(var j=0;j<r.length;++j){var l=r[j];s.push.apply(s,l);}if(h>0&&s.length===0){return;}if(t.clearSuggestionTimer){clearTimeout(t.clearSuggestionTimer);t.clearSuggestionTimer=null;}t.insertSuggestions(s,g);g=false;});});},insertSuggestions:function(i,f){var s=this.model.getProperty('/suggestions');if(f){s=[];}var g=this._groupByPosition(i);for(var p in g){var d=g[p];this._insertSuggestions(s,d);}var e=sap.ui.getCore().byId('searchFieldInShell-input');var h=e.getDomRef().getBoundingClientRect().width/16;h+=2;if(h<20){h=35;}e.setMaxSuggestionWidth((h*16)+'px');this.model.setProperty('/suggestions',s);},_groupByPosition:function(s){var g={};for(var i=0;i<s.length;++i){var d=s[i];var e=g[d.position];if(!e){e=[];g[d.position]=e;}e.push(d);}return g;},_insertSuggestions:function(s,i){if(i.length<=0){return;}var d=i[0];var e=0;for(;e<s.length;++e){var f=s[e];if(f.position>d.position){break;}}var g=[e,0];g.push.apply(g,i);s.splice.apply(s,g);}};return s.SuggestionHandler;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SuggestionProvider',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.SuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype={init:function(p){jQuery.extend(this,p);},abortSuggestions:function(){},getSuggestions:function(){}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SuggestionType',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypeProps');var m=sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypeProps={};m.App='App';m.DataSource='DataSource';m.SearchTermHistory='SearchTermHistory';m.SearchTermData='SearchTermData';m.Object='Object';m.types=[m.App,m.DataSource,m.SearchTermHistory,m.SearchTermData,m.Object];m.properties={App:{position:20,limitDsAll:3,limitDsApps:7},DataSource:{position:10,limit:2},SearchTermHistory:{position:30,limit:3},SearchTermData:{position:40,limit:7},Object:{position:25,limit:3}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/TimeMerger',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.TimeMerger');var T=sap.ushell.renderers.fiori2.search.suggestions.TimeMerger=function(){this.init.apply(this,arguments);};var c=0;T.prototype={init:function(p,t){this.promiseList=p||[];this.timeDelay=t||1000;this.pending=this.promiseList.length;this.returned=[];this.aborted=false;this.counter=++c;},abort:function(){this.aborted=true;},process:function(p){this.processorCallback=p;this.start();return this;},start:function(){for(var i=0;i<this.promiseList.length;++i){var p=this.promiseList[i];p.then(this.assembleDoneCallback(i));}this.scheduleProcessorNotification();},scheduleProcessorNotification:function(){var t=this;if(t.processorNotificationSchedule){window.clearTimeout(t.processorNotificationSchedule);t.processorNotificationSchedule=null;}t.processorNotificationSchedule=window.setTimeout(function(){t.notifyProcessor();},this.timeDelay);},notifyProcessor:function(){if(this.aborted){return;}if(this.returned.length>0){this.processorCallback(this.returned);this.returned=[];}if(this.pending>0){this.scheduleProcessorNotification();}},assembleDoneCallback:function(i){var t=this;return function(r){t.pending--;t.returned.push(r);if(t.pending===0){if(t.processorNotificationSchedule){window.clearTimeout(t.processorNotificationSchedule);t.processorNotificationSchedule=null;}t.notifyProcessor();}};}};return T;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/userpref/SearchPrefs',['sap/ushell/renderers/fiori2/search/userpref/SearchPrefsModel'],function(S){"use strict";var m=sap.ushell.renderers.fiori2.search.userpref.SearchPrefs={};jQuery.extend(m,{model:new S(),getEntry:function(){return{title:sap.ushell.resources.i18n.getText('sp.userProfiling'),editable:true,isSearchPrefsActive:this.model.isSearchPrefsActive.bind(this.model),value:this.model.shortStatus.bind(this.model),onSave:this.model.savePreferences.bind(this.model),onCancel:this.model.cancelPreferences.bind(this.model),content:function(){return this.model.asyncInit().then(function(){var u=sap.ui.view({id:'searchPrefsView',type:sap.ui.core.mvc.ViewType.JS,viewName:'sap.ushell.renderers.fiori2.search.userpref.SearchPrefsDialog'});u.setModel(this.model);return u;}.bind(this));}.bind(this)};}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/userpref/SearchPrefsDialog.view',["sap/m/MessageBox"],function(){"use strict";return sap.ui.jsview("sap.ushell.renderers.fiori2.search.userpref.SearchPrefsDialog",{createContent:function(c){this.firstTimeBeforeRendering=true;var u=new sap.m.Label({text:sap.ushell.resources.i18n.getText("sp.userProfilingField")+':'});var s=new sap.m.Switch({state:{path:"/personalizedSearch",mode:sap.ui.model.BindingMode.TwoWay},ariaLabelledBy:u,enabled:'{/searchPrefsActive}'});this.resetButton=new sap.m.Button({text:sap.ushell.resources.i18n.getText("sp.clearCollectedData"),press:this.resetHistory.bind(this),enabled:{parts:['/searchPrefsActive','/resetButtonWasClicked'],formatter:function(b,r){return b&&!r;}}});var l=new sap.ui.layout.VerticalLayout({content:[new sap.m.Text({text:sap.ushell.resources.i18n.getText('sp.disclaimer')})]});var a=[u,s,l,this.resetButton];return a;},onBeforeRendering:function(){if(this.firstTimeBeforeRendering){this.firstTimeBeforeRendering=false;return;}this.getModel().reload();},resetHistory:function(){this.getModel().resetProfile().then(function(){},function(r){var e=sap.ushell.resources.i18n.getText('sp.resetFailed');e+='\n'+r;sap.m.MessageBox.show(e,{title:sap.ushell.resources.i18n.getText("sp.resetFailedTitle"),icon:sap.m.MessageBox.Icon.ERROR,actions:[sap.m.MessageBox.Action.OK]});});},formatErrorResponse:function(r){var p;try{p=JSON.parse(r);}catch(e){return r;}if(!p.ErrorDetails){return r;}var a=[];for(var i=0;i<p.ErrorDetails.length;++i){var b=p.ErrorDetails[i];a.push(b.Message+' ('+b.Code+')');}return a.join('\n');},switchChangeHandler:function(e){var s=e.getSource();if(s.getState()){return;}var i=sap.ushell.resources.i18n;var d=i.getText("sp.disable");sap.m.MessageBox.confirm(i.getText('sp.disablingUserProfilingMsg'),{title:sap.ushell.resources.i18n.getText("sp.disableUserProfiling"),icon:sap.m.MessageBox.Icon.QUESTION,actions:[d,sap.m.MessageBox.Action.CANCEL],onClose:function(a){if(a==sap.m.MessageBox.Action.CANCEL){s.setState(true);}}});},openMessageBox:function(){var t=this;var i=sap.ushell.resources.i18n;var c=i.getText("sp.clear");sap.m.MessageBox.confirm(i.getText('sp.profileWillBeReset'),{title:sap.ushell.resources.i18n.getText("sp.clearCollectedData"),icon:sap.m.MessageBox.Icon.QUESTION,actions:[c,sap.m.MessageBox.Action.CANCEL],onClose:function(a){if(a==c){t.getModel().resetProfile();}}});}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/userpref/SearchPrefsModel',['sap/ui/model/json/JSONModel','sap/ushell/renderers/fiori2/search/SearchModel','sap/ushell/renderers/fiori2/search/SearchConfiguration','sap/ushell/renderers/fiori2/search/SearchHelper'],function(J,S,a,b){"use strict";var p='sap.ushell.renderers.fiori2.search.userpref.SearchPrefsModel';return sap.ui.model.json.JSONModel.extend(p,{asyncInit:function(){var t=this;if(t.initializedDeferred){return t.initializedDeferred;}t.searchModel=sap.ushell.renderers.fiori2.search.getModelSingleton();t.initializedDeferred=t.searchModel.initBusinessObjSearch().then(function(){if(!t.searchModel.config.searchBusinessObjects){t.setProperty('/searchPrefsActive',false);t.setProperty('/personalizedSearch',false);t.setProperty('/resetButtonWasClicked',false);return undefined;}var s=t.searchModel.sinaNext;return b.convertPromiseTojQueryDeferred(s.getConfigurationAsync({forceReload:true})).then(function(c){t.configuration=c;t.setProperty('/searchPrefsActive',c.isPersonalizedSearchEditable);t.setProperty('/personalizedSearch',c.personalizedSearch);t.setProperty('/resetButtonWasClicked',false);});});return t.initializedDeferred;},reload:function(){this.initializedDeferred=false;return this.asyncInit();},shortStatus:function(){return this.asyncInit().then(function(){return this.getProperty('/personalizedSearch')?sap.ushell.resources.i18n.getText('sp.on'):sap.ushell.resources.i18n.getText('sp.off');}.bind(this));},isSearchPrefsActive:function(){return this.asyncInit().then(function(){return this.getProperty('/searchPrefsActive');}.bind(this));},savePreferences:function(){this.configuration.setPersonalizedSearch(this.getProperty('/personalizedSearch'));return b.convertPromiseTojQueryDeferred(this.configuration.saveAsync()).then(function(){this.setProperty('/resetButtonWasClicked',false);}.bind(this));},cancelPreferences:function(){this.setProperty('/personalizedSearch',this.configuration.personalizedSearch);this.setProperty('/resetButtonWasClicked',false);},resetProfile:function(){return b.convertPromiseTojQueryDeferred(this.configuration.resetPersonalizedSearchDataAsync()).then(function(){this.setProperty('/resetButtonWasClicked',true);}.bind(this));}});});
sap.ui.predefine('sap/ushell/ui/appfinder/PinButton',['sap/m/Button'],function(C){"use strict";
var P=C.extend("sap.ushell.ui.appfinder.PinButton",{
metadata:{properties:{selected:{type:"boolean",group:"Appearance",defaultValue:false}}},
renderer:{}
});
P.prototype.setSelected=function(s){this.setProperty("selected",s,true);this.$("inner").toggleClass("sapUshellPinSelected",s);};
P.prototype.onAfterRendering=function(){var s=this.getSelected();this.$("inner").toggleClass("sapUshellPinSelected",s);};
return P;});
sap.ui.predefine('sap/ushell/ui/launchpad/CatalogEntryContainer',['sap/ui/core/Control','sap/ushell/ui/launchpad/TileContainerUtils'],function(C,T){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.CatalogEntryContainer",{
metadata:{properties:{header:{type:"string",group:"Appearance",defaultValue:null},catalogSearchTerm:{type:"string",group:"Appearance",defaultValue:null},catalogTagSelector:{type:"object",group:"Appearance",defaultValue:null}},aggregations:{appBoxesContainer:{type:"sap.ushell.ui.appfinder.AppBox",multiple:true},customTilesContainer:{type:"sap.ushell.ui.launchpad.Tile",multiple:true}}},
renderer:{render:function(r,c){var t=c.getCustomTilesContainer(),A=c.getAppBoxesContainer(),h,b;r.write("<div");r.writeControlData(c);r.addClass("sapUshellTileContainer sapUshellCatalogTileContainer");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellTileContainerContent");r.writeClasses();r.writeAttribute("tabindex","-1");r.write(">");if(c.getHeader()){h=sap.ushell.resources.i18n.getText(c.getHeader());r.write("<div");r.addClass("sapUshellTileContainerHeader sapUshellCatalogTileContainerHeader");r.writeAttribute("id",c.getId()+"-groupheader");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-title");r.addClass("sapUshellCatalogTileContainerHeaderInner");r.writeClasses();r.write(">");r.write("<");r.write('h2');r.addClass("sapUshellContainerTitle sapUshellCatalogContainerTitle");r.writeClasses();r.writeAttributeEscaped("title",h);r.write(">");r.writeEscaped(h);r.write("</");r.write('h2');r.writeAttribute("id",c.getId()+"-groupheader");r.write(">");r.write("</div>");r.write("</div>");}r.write("<ul");b=c.data('containerHeight');if(b){r.writeAttribute("style",'height:'+b);}r.addClass('sapUshellTilesContainer-sortable');r.addClass('sapUshellInner');r.writeClasses();r.writeAccessibilityState(c,{role:"listbox"});r.write(">");jQuery.each(A,function(){if(this.getVisible()){}if(this.getVisible){r.renderControl(this);}});r.write("</ul>");r.write("<ul");b=c.data('containerHeight');if(b){r.writeAttribute("style",'height:'+b);}r.addClass('sapUshellTilesContainer-sortable');r.addClass('sapUshellInner');r.writeClasses();r.writeAccessibilityState(c,{role:"listbox"});r.write(">");jQuery.each(t,function(){if(this.getVisible()){}if(this.getVisible){r.renderControl(this);}});r.write("</ul>");r.write("</div>");r.write("</div>");}}
});
a.prototype.setCatalogTagSelector=function(t){};
a.prototype.setAfterHandleElements=function(c){this.onAfterHandleElements=c;};
a.prototype.onAfterUpdate=function(c){this.fnCallback=c;};
a.prototype.setCatalogSearchTerm=function(s){};
a.prototype.updateAggregation=function(r){jQuery.sap.log.debug("Updating CatalogEntryContainer. Reason: ",r);try{}catch(e){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments);}};
a.prototype.addNewItem=function(e,n){var N,i,p=e.getPath(),b=e.getObject?e.getObject().src:undefined,c=undefined;if(this.catalogState[n]!="full"){if(this.getAllocatedUnits){if(!this.getAllocatedUnits()){this.catalogState[n]="partial";return false;}}}if(n==="customTilesContainer"){if(b!==undefined){if(b.Chip!==undefined&&b.Chip.getContract!==undefined){c=b.Chip.getContract("preview");}else if(b.getContract!==undefined){c=b.getContract("preview");}if(c!==undefined){c.setEnabled(true);}}var d=sap.ushell.Container.getService("LaunchPage").getCatalogTileView(e.getProperty("src"));e.getProperty("content")[0]=d;}N=T.createNewItem.bind(this)(e,n);T.addNewItem.bind(this)(N,n);i=(n==="appBoxesContainer")?this.getAppBoxesContainer():this.getCustomTilesContainer(),this.indexingMaps[n].onScreenPathIndexMap[p]={aItemsRefrenceIndex:i.length-1,isVisible:true};return true;};
a.prototype.getNumberResults=function(r){return{nAppboxes:this.nNumberOfVisibileElements["appBoxesContainer"],nCustom:this.nNumberOfVisibileElements["customTilesContainer"]};};
a.prototype.handleElements=function(r){var n=r,b=this.mBindingInfos[n].binding,B=b.getContexts(),i,s,c;if(!this.catalogState){this.catalogState={};}if(!this.catalogState[r]){this.catalogState[r]="start";}if(!this.indexingMaps){this.indexingMaps={};}if(!this.nNumberOfVisibileElements){this.nNumberOfVisibileElements=[];}if(!this.nNumberOfVisibileElements["customTilesContainer"]){this.nNumberOfVisibileElements["customTilesContainer"]=0;}if(!this.nNumberOfVisibileElements["appBoxesContainer"]){this.nNumberOfVisibileElements["appBoxesContainer"]=0;}if(!this.filters){this.filters={};}i=(n==="appBoxesContainer")?this.getAppBoxesContainer():this.getCustomTilesContainer();this.indexingMaps[n]=T.indexOnScreenElements(i,false);c=T.markVisibleOnScreenElementsSearchCatalog(B,this.indexingMaps[n],true);if(T.createMissingElementsInOnScreenElementsSearchCatalog(this.indexingMaps[n],B,c,this.addNewItem.bind(this),i,this.filters[n],n,this.processFiltering.bind(this))){if(this.getAllocatedUnits&&this.getAllocatedUnits()){this.catalogState[r]="full";}}i=(n==="appBoxesContainer")?this.getAppBoxesContainer():this.getCustomTilesContainer();s=T.showHideTilesAndHeaders(this.indexingMaps[n],i);this.nNumberOfVisibileElements[n]=s.nCountVisibElelemnts;if(this.fnCallback){this.fnCallback(this);}if(this.onAfterHandleElements){this.onAfterHandleElements(this);}};
a.prototype.processFiltering=function(e,n){var p=e.getPath(),i;if(n){i=this.indexingMaps[n].onScreenPathIndexMap[p];if(i.isVisible&&this.currElementVisible){this.currElementVisible();}}};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/CatalogTileContainer',['jquery.sap.global','sap/ui/base/ManagedObject','sap/ushell/ui/launchpad/TileContainer','./CatalogTileContainerRenderer'],function(q,M,T){"use strict";return T.extend("sap.ushell.ui.launchpad.CatalogTileContainer",{updateTiles:function(r){var n="tiles";if(this.isTreeBinding(n)){M.prototype.updateAggregation.apply(this,arguments);}else{q.sap.log.debug("Updating TileContainer. Reason: ",r);try{this.filterTiles();}catch(e){this.updateAggregation(n);}}}});});
sap.ui.predefine('sap/ushell/ui/launchpad/CatalogsContainer',['sap/ui/core/Control','sap/ushell/ui/launchpad/TileContainerUtils'],function(C,T){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.CatalogsContainer",{
metadata:{properties:{categoryFilter:{type:"string",defaultValue:"ALL"},categoryAllocateTiles:{type:"int",defaultValue:"0"}},aggregations:{catalogs:{type:"sap.ushell.ui.launchpad.CatalogEntryContainer",multiple:true}}},
renderer:{render:function(r,c){var b=c.getCatalogs();if(b.length){c.setBusy(false);}r.write("<div");r.addClass("sapUshellCatalogsContainer");r.writeClasses();r.writeControlData(c);r.write(">");jQuery.each(b,function(i,d){r.renderControl(this);});r.write("</div>");}}
});
a.prototype.setPagingManager=function(p){jQuery.sap.measure.start("FLP:DashboardManager.CatalogsRendering","CatalogsRendering","FLP");jQuery.sap.measure.pause("FLP:DashboardManager.CatalogsRendering");this.oPagingManager=p;};
a.prototype.updateAllocatedUnits=function(n){this.nAllocatedUnits=n;};
a.prototype.applyPagingCategoryFilters=function(n,c){var i=this.getCatalogs();this.nAllocatedUnits=n;if(c&&c!="All"&&c!=""){this.sCatalogTerm=c;}else{this.sCatalogTerm="";}if(!this.filters){this.filters={};}if(!this.filters.catalogEntry){this.filters.catalogEntry=function(e){var p=e.getPath(),I=e.getProperty("title")===this.sCatalogTerm,b;if(!this.sCatalogTerm){return;}b=this.indexingMaps.onScreenPathIndexMap[p];if(b){b.isVisible=I;}}.bind(this);}if(!this.filters.pagination){this.filters.pagination=function(e){var p=e.getPath(),b;b=this.indexingMaps.onScreenPathIndexMap[p];if(!this.nAllocatedUnits){b.isVisible=false;}}.bind(this);}if(!this.indexingMaps){return;}this.indexingMaps=T.indexOnScreenElements(i);T.applyFilterOnAllItems(this.mBindingInfos["catalogs"],this.filters,this.processFiltering.bind(this));if(this.indexingMaps){T.showHideTilesAndHeaders(this.indexingMaps,this.getCatalogs());}};
a.prototype.processFiltering=function(e){var c=this.getCatalogs(),p=e.getPath(),i=this.indexingMaps.onScreenPathIndexMap[p],o=c[i.aItemsRefrenceIndex],b;if(i.isVisible&&(!this.catalogPagination[p]||this.catalogPagination[p]=="start")){if(this.catalogPagination[p]==undefined){this.catalogPagination[p]="start";o.catalogState={};}else if(this.catalogPagination[p]=="start"){var n=o.nNumberOfVisibileElements;this.nAllocatedUnits+=(n.appBoxesContainer+n.customTilesContainer);}b=this.nAllocatedUnits;o.handleElements("appBoxesContainer");o.handleElements("customTilesContainer");if(o.catalogState["appBoxesContainer"]=="full"&&o.catalogState["customTilesContainer"]=="full"){this.catalogPagination[p]="full";}if(b-this.nAllocatedUnits>0){this.bSearchResults=true;}else{i.isVisible=false;}}else if(i.isVisible&&this.catalogPagination[p]=="full"){var d=o.nNumberOfVisibileElements;var f=d.appBoxesContainer+d.customTilesContainer;if(f==0){i.isVisible=false;}}};
a.prototype.resetCatalogPagination=function(){this.catalogPagination={};};
a.prototype.updateAggregation=function(r){jQuery.sap.log.debug("Updating TileContainer. Reason: ",r);try{jQuery.sap.measure.resume("FLP:DashboardManager.CatalogsRendering");this.filterElements();jQuery.sap.measure.pause("FLP:DashboardManager.CatalogsRendering");}catch(e){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments);}};
a.prototype.addNewItem=function(e,n){var N,b,i,p=e.getPath();N=T.createNewItem.bind(this)(e,n);if(!N.filters){N.filters={};N.filters.appBoxesContainer={};N.filters.customTilesContainer={};N.filters.appBoxesContainer.pagination=function(c){var p=c.getPath(),d;d=this.indexingMaps.appBoxesContainer.onScreenPathIndexMap[p];if(this.getAllocatedUnits){d.isVisible=!!this.getAllocatedUnits();}}.bind(N);N.filters.customTilesContainer.pagination=function(c){var p=c.getPath(),d;d=this.indexingMaps.customTilesContainer.onScreenPathIndexMap[p];if(this.getAllocatedUnits){d.isVisible=!!this.getAllocatedUnits();}}.bind(N);}N.nAllocatedUnits=this.nAllocatedUnits;N.getAllocatedUnits=function(){return this.nAllocatedUnits;}.bind(this);N.elementFiltered=function(c){b=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits+=c*b;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);N.elementsVisible=function(c){b=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits-=c*b;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);N.newElementCreated=function(E,c){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);N.currElementVisible=function(){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);T.addNewItem.bind(this)(N,n);i=this.getCatalogs();this.indexingMaps.onScreenPathIndexMap[p]={aItemsRefrenceIndex:i.length-1,isVisible:true};return true;};
a.prototype.handleFilters=function(){if(!this.catalogPagination){this.catalogPagination={};}if(!this.catalogsElementsMap){this.catalogsElementsMap={};}if(!this.filters){this.filters={};}};
a.prototype.setHandleSearchCallback=function(h){this.handleSearchCallback=h;};
a.prototype.filterElements=function(){var n="catalogs",b=this.mBindingInfos[n].binding,B=b.getContexts(),i=this.getCatalogs(),c;if(!this.indexingMaps){this.indexingMaps=T.indexOnScreenElements(i);}this.handleFilters();c=T.markVisibleOnScreenElements(B,this.indexingMaps,false);if(!T.validateOrder(B,i,c)){throw true;}T.createMissingElementsInOnScreenElements(this.indexingMaps,B,c,this.addNewItem.bind(this),i,this.filters,n);i=this.getCatalogs();T.showHideTilesAndHeaders(this.indexingMaps,i);if(this.handleSearchCallback){this.handleSearchCallback();}};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/ViewPortState',function(){"use strict";},false);
sap.ui.predefine('sap/ushell/ui/shell/ShellFloatingAction',['jquery.sap.global','sap/m/Button','sap/ushell/library','./ShellFloatingActionRenderer'],function(q,B){"use strict";
var S=B.extend("sap.ushell.ui.shell.ShellFloatingAction");
S.prototype.init=function(){this.addStyleClass("sapUshellShellFloatingAction");if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
S.prototype.exit=function(){B.prototype.exit.apply(this,arguments);};
S.prototype.onAfterRendering=function(){if(this.data("transformY")){this.removeStyleClass('sapUshellShellFloatingActionTransition');q(this.getDomRef()).css('transform',"translateY("+this.data("transformY")+")");}else{this.addStyleClass('sapUshellShellFloatingActionTransition');}};
});
sap.ui.predefine('sap/ushell/ui/shell/ToolAreaItem',['jquery.sap.global','sap/ui/core/Control','sap/ui/core/IconPool','sap/ushell/EventHub','sap/ushell/library'],function(q,C,I,E){"use strict";
var T=C.extend("sap.ushell.ui.shell.ToolAreaItem",{
metadata:{properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false},text:{type:"string",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},expandable:{type:"boolean",group:"Appearance",defaultValue:false}},events:{press:{},expand:{}}},
renderer:{render:function(r,t){var i;r.write("<div");r.writeControlData(t);if(!t.getIcon()){r.addClass("sapUshellToolAreaItmTextOnly");}else{r.addClass("sapUshellToolAreaItm");}if(!t.getVisible()){r.addClass("sapUshellShellHidden");}if(t.getAriaLabel()){r.writeAccessibilityState({label:this.getAriaLabel(),role:"button"});}r.writeClasses();var a=t.getTooltip_AsString();if(a){r.writeAttributeEscaped("title",a);}r.write(">");if(t.getIcon()){i=I.createControlByURI(t.getIcon());i.setUseIconTooltip(false);i.addStyleClass("sapUshellToolAreaItemIcon");r.renderControl(i);}if(t.getText()){r.write("<span");r.addClass("sapUshellToolAreaItemText");r.writeClasses();r.write(">");r.writeEscaped(t.getText());r.write("</span>");}if(t.getExpandable()){this.renderExpandable(r);}r.write("</div>");},renderExpandable:function(r){var i=I.createControlByURI("sap-icon://icon-dropdown");i.addStyleClass("sapUshellToolAreaItemExpandable");r.renderControl(i);}}
});
T.prototype.init=function(){E.emit("ToolAreaItemCreated");};
T.prototype.onclick=function(e){if(this.$().parent().hasClass("sapUshellToolAreaItemSelected")){this.setSelected(false);}else{this.setSelected(true);}if(e.target.className.indexOf("sapUshellToolAreaItemExpandable")>0){this.fireExpand();}else{this.firePress();}};
T.prototype.onsapenter=T.prototype.onclick;
T.prototype.setExpandable=function(e){e=!!e;this.setProperty("expandable",e,true);this.$().toggleClass("sapUshellToolAreaItemExpandable",e);};
T.prototype.setSelected=function(s){s=!!s;if(s){var j=q(".sapUshellToolAreaItemSelected");j.each(function(){q(this).removeClass("sapUshellToolAreaItemSelected");});}this.setProperty("selected",s,true);this.$().parent().toggleClass("sapUshellToolAreaItemSelected",s);};
T.prototype.setVisible=function(v){var r=this.getParent().getDomRef();this.setProperty("visible",!!v,r);this.$().toggleClass("sapUshellShellHidden",!v);};
T.prototype.setAriaLabel=function(a){this.setProperty('ariaLabel',a);return this;};
return T;},true);
sap.ui.predefine('sap/ushell/ui5service/_AppIsolationService/appisolationservice.class.factory',["sap/ui/base/EventProvider",'sap/ushell/EventHub'],function(E,a){"use strict";return function(s){var S=s.serviceRegistry,b=s.serviceFactory,c=s.service;var e=new E(),A;var o=undefined;var d=c.extend("sap.ushell.ui5service.AppIsolationService",{init:function(){var t=this,p=this.getInterface();p.init=function(){t._amendPublicServiceInstance.call(t,this);};S.register("sap.ushell.ui5service.AppIsolationService",new b(p));},_setActiveComponentId:function(i){A=i;},_getActiveComponentId:function(){return A;},_getEventProvider:function(){return e;},_ensureArrayOfObjectOfStrings:function(v,m){var V=jQuery.isArray(v)&&v.every(function(O){return jQuery.isPlainObject(O)&&Object.keys(O).length>0&&Object.keys(O).every(function(k){return typeof O[k]==="string";});});if(!V){jQuery.sap.log.error("'"+m+"' was called with invalid parameters","An array of non-empty objects with string values is expected","sap.ushell.ui5service.AppIsolationService");}return V;},_ensureFunction:function(v,m){var t=typeof v;if(t!=="function"){jQuery.sap.log.error("'"+m+"' was called with invalid arguments","the parameter should be a function, got '"+t+"' instead","sap.ushell.ui5service.AppIsolationService");return false;}return true;},_ensureString:function(v,m){var t=typeof v;if(t!=="string"){jQuery.sap.log.error("'"+m+"' was called with invalid arguments","the parameter should be a string, got '"+t+"' instead","sap.ushell.ui5service.AppIsolationService");return false;}return true;},_addCallAllowedCheck:function(p,P){var t=this;p[P]=function(){var C=p.getContext();if(!C||C.scopeObject.getId()!==A){jQuery.sap.log.warning("Call to "+P+" is not allowed","This may be caused by an app component other than the active '"+A+"' that tries to call the method","sap.ushell.ui5service.AppIsolationService");return undefined;}return t[P].apply(p,arguments);};},_amendPublicServiceInstance:function(p){var C;var P={AppLifeCycle:undefined};sap.ui.getCore().getEventBus().publish("sap.ushell","getAppLifeCycle",P);o=P.AppLifeCycle;C=p.getContext();if(typeof C==="undefined"){return;}if(C.scopeType==="component"){this._setActiveComponentId(C.scopeObject.getId());return;}jQuery.sap.log.error("Invalid context for AppIsolationService interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.ui5service.AppIsolationService");},getUxdVersion:function(){if((new jQuery.sap.Version(sap.ui.version).compareTo("1.37.0"))>=0){return 2;}return 1;},registerShellCommunicationHandler:function(C,f){o.registerShellCommunicationHandler(C,f);},registerIframeCommunicationHandler:function(h,f){o.registerIframeCommunicationHandler(h,f);},getCurrentAppHash:function(){return o.getCurrentApplication().hash;},getCurrentAppTargetResolution:function(){return o.getCurrentApplication().target;},getIframeHandelrs:function(){return o.getCurrentApplication().container.getIframeHandlers();},jsonStringifyFn:function(j){var r=JSON.stringify(j,function(k,v){return(typeof v==='function')?v.toString():v;});return r;}});return d;};});
sap.ui.predefine('sap/ushell/ui5service/_ShellUIService/shelluiservice.class.factory',["sap/ui/base/EventProvider","sap/ui/thirdparty/hasher"],function(E,h){"use strict";return function(s){var S=s.serviceRegistry,a=s.serviceFactory,b=s.service;var l;var e=new E();var O={hierarchyChanged:"hierarchyChanged",relatedAppsChanged:"relatedAppsChanged",titleChanged:"titleChanged",backNavigationChanged:"backNavigationChanged"};var A;var c=b.extend("sap.ushell.ui5service.ShellUIService",{init:function(){var t=this,p=this.getInterface();p.init=function(){t._amendPublicServiceInstance.call(t,this);};S.register("sap.ushell.ui5service.ShellUIService",new a(p));},_setActiveComponentId:function(i){A=i;},_getActiveComponentId:function(){return A;},_shouldEnableAutoHierarchy:function(o){return typeof o.getManifestEntry==="function"&&o.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setHierarchy")==="auto";},_shouldEnableAutoTitle:function(o){return typeof o.getManifestEntry==="function"&&o.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setTitle")==="auto";},_enableAutoHierarchy:function(o){var t=this;var r=o.getRouter&&o.getRouter();if(!r){jQuery.sap.log.error("Could not enable automatic setHierarchy on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return;}r.attachTitleChanged(function(d){var H=d.getParameter("history");t.setHierarchy(H.reverse().map(function(u){var f=t._getCurrentShellHashWithoutAppRoute();return{title:u.title,intent:f+"&/"+u.hash};}));});},_enableAutoTitle:function(o){var t=this;var r=o.getRouter&&o.getRouter();if(!r){jQuery.sap.log.error("Could not enable automatic setTitle on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return;}var T=r.getTitleHistory()[0];if(T&&T.title){setTimeout(function(){t.setTitle(T.title);},0);}r.attachTitleChanged(function(d){var f=d.getParameter("title");t.setTitle(f);});},_getCurrentShellHashWithoutAppRoute:function(){var f="#"+h.getHash();var u=sap.ushell.Container.getService("URLParsing");var U=u.getShellHash(f);if(!U){jQuery.sap.log.error("Cannot get the current shell hash","URLParsing service returned a falsy value for "+f,"sap.ushell.ui5service.ShellUIService");return"";}return"#"+U;},_getEventProvider:function(){return e;},_getLastSetTitle:function(){return l;},_ensureArrayOfObjectOfStrings:function(v,m){var V=jQuery.isArray(v)&&v.every(function(o){return jQuery.isPlainObject(o)&&Object.keys(o).length>0&&Object.keys(o).every(function(k){return typeof o[k]==="string";});});if(!V){jQuery.sap.log.error("'"+m+"' was called with invalid parameters","An array of non-empty objects with string values is expected","sap.ushell.ui5service.ShellUIService");}return V;},_ensureFunction:function(v,m){var t=typeof v;if(t!=="function"){jQuery.sap.log.error("'"+m+"' was called with invalid arguments","the parameter should be a function, got '"+t+"' instead","sap.ushell.ui5service.ShellUIService");return false;}return true;},_ensureString:function(v,m){var t=typeof v;if(t!=="string"){jQuery.sap.log.error("'"+m+"' was called with invalid arguments","the parameter should be a string, got '"+t+"' instead","sap.ushell.ui5service.ShellUIService");return false;}return true;},_addCallAllowedCheck:function(p,P){var t=this;p[P]=function(){var C=p.getContext();if(!C||C.scopeObject.getId()!==A){jQuery.sap.log.warning("Call to "+P+" is not allowed","This may be caused by an app component other than the active '"+A+"' that tries to call the method","sap.ushell.ui5service.ShellUIService");return undefined;}if(P==="setHierarchy"&&C.scopeType==="component"&&C.scopeObject&&t._shouldEnableAutoHierarchy(C.scopeObject)){jQuery.sap.log.warning("Call to "+P+" is not allowed","The app defines that setHierarchy should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined;}if(P==="setTitle"&&C.scopeType==="component"&&C.scopeObject&&t._shouldEnableAutoTitle(C.scopeObject)){jQuery.sap.log.warning("Call to "+P+" is not allowed","The app defines that setTitle should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined;}return t[P].apply(p,arguments);};},_amendPublicServiceInstance:function(p){var t=this,C;C=p.getContext();if(typeof C==="undefined"){return;}["setTitle","setHierarchy","setRelatedApps","setBackNavigation"].forEach(function(m){t._addCallAllowedCheck(p,m);});var o=C.scopeObject;if(C.scopeType==="component"&&o){this._setActiveComponentId(o.getId());if(this._shouldEnableAutoHierarchy(o)){this._enableAutoHierarchy(o);}if(this._shouldEnableAutoTitle(o)){this._enableAutoTitle(o);}return;}jQuery.sap.log.error("Invalid context for ShellUIService interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.ui5service.ShellUIService");},setHierarchy:function(H){if(typeof H!=="undefined"&&!c.prototype._ensureArrayOfObjectOfStrings(H,"setHierarchy")){return;}var C=this.getContext().scopeObject;e.fireEvent(O.hierarchyChanged,{data:H,component:C});return;},setTitle:function(t){if(typeof t!=="undefined"&&!c.prototype._ensureString(t,"setTitle")){return;}var C=this.getContext().scopeObject;l=t;e.fireEvent(O.titleChanged,{data:t,component:C});return;},setBackNavigation:function(C){if(typeof C!=="undefined"&&!c.prototype._ensureFunction(C,"setBackNavigation")){return;}var o=this.getContext().scopeObject;e.fireEvent(O.backNavigationChanged,{data:C,component:o});return;},getTitle:function(){return this._getLastSetTitle();},setRelatedApps:function(r){if(typeof r!=="undefined"&&!c.prototype._ensureArrayOfObjectOfStrings(r,"setRelatedApps")){return;}var C=this.getContext().scopeObject;e.fireEvent(O.relatedAppsChanged,{data:r,component:C});return;},getUxdVersion:function(){if((new jQuery.sap.Version(sap.ui.version).compareTo("1.37.0"))>=0){return 2;}return 1;},_attachHierarchyChanged:function(f){this._getEventProvider().attachEvent(O.hierarchyChanged,f);},_detachHierarchyChanged:function(f){this._getEventProvider().detachEvent(O.hierarchyChanged,f);},_attachTitleChanged:function(f){this._getEventProvider().attachEvent(O.titleChanged,f);},_attachBackNavigationChanged:function(f){this._getEventProvider().attachEvent(O.backNavigationChanged,f);},_detachBackNavigationChanged:function(f){this._getEventProvider().detachEvent(O.backNavigationChanged,f);},_detachTitleChanged:function(f){this._getEventProvider().detachEvent(O.titleChanged,f);},_attachRelatedAppsChanged:function(f){this._getEventProvider().attachEvent(O.relatedAppsChanged,f);},_detachRelatedAppsChanged:function(f){this._getEventProvider().detachEvent(O.relatedAppsChanged,f);}});return c;};});
sap.ui.predefine('sap/ushell/ui5service/_UserStatus/userstatus.class.factory',["sap/ui/base/EventProvider","sap/ushell/ui/launchpad/UserStatusItem"],function(E,U){"use strict";return function(s){var S=s.serviceRegistry,a=s.serviceFactory,b=s.service;var o=new E(),O={statusChanged:"statusChanged",serviceStateChanged:"serviceStateChanged"},A;var c=b.extend("sap.ushell.ui5service.UserStatus",{init:function(){var t=this,p=this.getInterface();c.prototype.isEnabled=false;p.init=function(){t._amendPublicServiceInstance.call(t,this);};S.register("sap.ushell.ui5service.UserStatus",new a(p));c.prototype.AvailableStatus={AVAILABLE:"AVAILABLE",AWAY:"AWAY",BUSY:"BUSY",APPEAR_OFFLINE:"APPEAR_OFFLINE"};},_setActiveComponentId:function(i){A=i;},_getActiveComponentId:function(){return A;},_getEventProvider:function(){return o;},_ensureArrayOfObjectOfStrings:function(v,m){var V=jQuery.isArray(v)&&v.every(function(d){return jQuery.isPlainObject(d)&&Object.keys(d).length>0&&Object.keys(d).every(function(k){return typeof d[k]==="string";});});if(!V){jQuery.sap.log.error("'"+m+"' was called with invalid parameters","An array of non-empty objects with string values is expected","sap.ushell.ui5service.UserStatus");}return V;},_ensureFunction:function(v,m){var t=typeof v;if(t!=="function"){jQuery.sap.log.error("'"+m+"' was called with invalid arguments","the parameter should be a function, got '"+t+"' instead","sap.ushell.ui5service.UserStatus");return false;}return true;},_ensureString:function(v,m){var t=typeof v;if(t!=="string"){jQuery.sap.log.error("'"+m+"' was called with invalid arguments","the parameter should be a string, got '"+t+"' instead","sap.ushell.ui5service.UserStatus");return false;}return true;},_addCallAllowedCheck:function(p,P){var t=this;p[P]=function(){var C=p.getContext();if(!C||C.scopeObject.getId()!==A){jQuery.sap.log.warning("Call to "+P+" is not allowed","This may be caused by an app component other than the active '"+A+"' that tries to call the method","sap.ushell.ui5service.UserStatus");return undefined;}return t[P].apply(p,arguments);};},_amendPublicServiceInstance:function(p){var t=this,C;C=p.getContext();if(typeof C==="undefined"){return;}["setStatus","attachStatusChanged","detachStatusChanged"].forEach(function(m){t._addCallAllowedCheck(p,m);});if(C.scopeType==="component"){this._setActiveComponentId(C.scopeObject.getId());return;}jQuery.sap.log.error("Invalid context for UserStatus interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.ui5service.UserStatus");},setEnabled:function(e){o.fireEvent(O.serviceStateChanged,{data:e});c.prototype.isEnabled=e;this._getUserStatusSetting().then(function(u){if(u===undefined||u.userStatusEnabled===undefined){this._showLegalPopup();}else if(u.userStatusEnabled){this.setStatus(u.userStatusDefault);}else if(!u.userStatusEnabled){this.setStatus(null);}}.bind(this));return;},attachEnabledStatusChanged:function(f){this._getEventProvider().attachEvent(O.serviceStateChanged,f);},detachEnabledStatusChanged:function(f){this._getEventProvider().detachEvent(O.serviceStateChanged,f);},setStatus:function(n){if(!c.prototype.isEnabled){throw new Error("Unable to change status because the UserStatus service is disabled.");}if(!c.prototype.AvailableStatus[n]&&n!==null){throw new Error("Enter a valid status.");}this._getUserStatusSetting().then(function(u){if((n!==null)&&(u===undefined||u.userStatusEnabled===undefined||!u.userStatusEnabled)){throw new Error("Unable to change status; user has not explicitly opted-in to share their online status.");}o.fireEvent(O.statusChanged,{data:n});return;});},getUxdVersion:function(){if((new jQuery.sap.Version(sap.ui.version).compareTo("1.37.0"))>=0){return 2;}return 1;},attachStatusChanged:function(f){this._getEventProvider().attachEvent(O.statusChanged,f);},detachStatusChanged:function(f){this._getEventProvider().detachEvent(O.statusChanged,f);},_getOnlineStatusPopOver:function(u){var p=new sap.m.Popover({placement:sap.m.PlacementType.Bottom,showArrow:true,showHeader:false,content:[new U({status:U.prototype.STATUS_ENUM.AVAILABLE,isOpener:false,press:function(e){d.setStatus(U.prototype.STATUS_ENUM.AVAILABLE);p.close();}}).addStyleClass('sapUserStatusContainer'),new U({status:U.prototype.STATUS_ENUM.AWAY,isOpener:false,press:function(e){d.setStatus(U.prototype.STATUS_ENUM.AWAY);p.close();}}).addStyleClass('sapUserStatusContainer'),new U({status:U.prototype.STATUS_ENUM.BUSY,isOpener:false,press:function(e){d.setStatus(U.prototype.STATUS_ENUM.BUSY);p.close();}}).addStyleClass('sapUserStatusContainer'),new U({status:U.prototype.STATUS_ENUM.APPEAR_OFFLINE,isOpener:false,press:function(e){d.setStatus(U.prototype.STATUS_ENUM.APPEAR_OFFLINE);p.close();}}).addStyleClass('sapUserStatusContainer')]});var d=new U({tooltip:"{i18n>headerActionsTooltip}",enabled:false,ariaLabel:sap.ushell.Container.getUser().getFullName(),image:sap.ui.core.IconPool.getIconURI("account"),status:u?U.prototype.STATUS_ENUM[u]:U.prototype.STATUS_ENUM["AVAILABLE"],press:function(e){var B=sap.ui.getCore().byId(e.mParameters.id);p.openBy(B);}.bind(this),contentList:p}).addStyleClass('sapUserStatusOpener');return d;},_showLegalPopup:function(){var t=this;setTimeout(function(){var T=sap.ui.getCore().getConfiguration().getRTL()?'Left':'Right';var d=sap.ui.Device.system.phone?"auto":"14rem";var f=sap.ui.Device.system.phone?"auto":"10rem";var g=new sap.m.Label({text:sap.ushell.resources.i18n.getText("enableStatusMessageBoxFld")+":",width:d,textAlign:T});var h=new sap.m.Switch("enableStatusSwitch",{type:sap.m.SwitchType.Default,change:function(e){k.setEnabled(e.mParameters.state);jQuery("#"+k.getId()).attr("tabindex",e.mParameters.state?0:-1);}.bind(this)});var i=new sap.m.FlexBox({alignItems:'Center',direction:'Row',items:[g,h]}).addStyleClass('sapUshellUserStatusFlexBox');var j=new sap.m.Label({text:sap.ushell.resources.i18n.getText("userStatusMessageBoxDropdownLabelFld")+":",width:f,textAlign:T}).addStyleClass("sapUshellUserStatusSignInAsLabel");var k=t._getOnlineStatusPopOver(U.prototype.STATUS_ENUM.AVAILABLE.status);jQuery("#"+k.getId()).attr("tabindex",k.getEnabled()?0:-1);var l=new sap.m.Text({text:sap.ushell.resources.i18n.getText("userStatusMessageBoxInfoTextLine1")}).addStyleClass('sapUshellUserStatusLegalTextLine').addStyleClass('sapUshellUserStatusLegalTextFirstLine');var m=new sap.m.Text({text:sap.ushell.resources.i18n.getText("userStatusMessageBoxInfoTextLine2")}).addStyleClass('sapUshellUserStatusLegalTextLine');var n=new sap.m.FlexBox({alignItems:'Center',direction:'Row',items:[j,k]}).addStyleClass('sapUshellUserStatusFlexBox');var p=new sap.ui.layout.VerticalLayout('userStatusDialogLayout',{content:[i,n,l,m]});var q=new sap.m.Button('saveButton',{text:sap.ushell.resources.i18n.getText("okBtn"),press:function(){t._writeUserStatusSettingToPersonalization({userStatusEnabled:h.getState(),userStatusDefault:h.getState()?k.getStatus().status:null});t.setStatus(h.getState()?k.getStatus().status:null);r.close();}});var r=new sap.m.Dialog('agreementMessageBox',{title:sap.ushell.resources.i18n.getText("userStatusAgreementMessageBoxTitle"),modal:true,stretch:sap.ui.Device.system.phone,buttons:[q],afterClose:function(e){t._getUserStatusSetting().then(function(u){if(u===undefined||u.userStatusEnabled===undefined){t._writeUserStatusSettingToPersonalization({userStatusEnabled:false,userStatusDefault:null});t.setStatus(null);}r.destroy();});}}).addStyleClass('sapUshellUserStatusDialog');r.addContent(p);r.open();},100);},_getUserStatusSetting:function(){var p=this._getUserSettingsPersonalizer();return p.getPersData();},_writeUserStatusSettingToPersonalization:function(u){var d,p;try{p=this._getUserSettingsPersonalizer().setPersData(u);}catch(e){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(e.name+": "+e.message);d=new jQuery.Deferred();d.reject(e);p=d.promise();}return p;},_getUserSettingsPersonalizer:function(){this.oUserPersonalizer=this._createUserPersonalizer();return this.oUserPersonalizer;},_createUserPersonalizer:function(){var p=sap.ushell.Container.getService("Personalization"),C,d={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true},P={container:"sap.ushell.services.UserStatus",item:"userStatusData"},e=p.getPersonalizer(P,d,C);return e;}});return c;};});
sap.ui.predefine('sap/ushell/utils/utilsCdm',["sap/ushell/utils"],function(u){"use strict";
function g(o,A){return u.getMember(o,A);}
function m(k,s,A){s=u.clone(s);A=u.clone(A);var i={};i.semanticObject=s.semanticObject;i.action=s.action;i.title=s.title||g(A,"sap|app.title");i.info=s.info||g(A,"sap|app.info");i.icon=s.icon||g(A,"sap|ui.icons.icon");i.subTitle=s.subTitle||g(A,"sap|app.subTitle");i.shortTitle=s.shortTitle||g(A,"sap|app.shortTitle");var T,c,d,o,D,e,I=false;var S=g(A,"sap|platform|runtime");i.resolutionResult=jQuery.extend(true,{},S);if(S){i.resolutionResult["sap.platform.runtime"]=jQuery.extend(true,{},S);}if(g(A,"sap|ui.technology")==="GUI"){i.resolutionResult["sap.gui"]=g(A,"sap|gui");}if(g(A,"sap|ui.technology")==="WDA"){i.resolutionResult["sap.wda"]=g(A,"sap|wda");}if(g(A,"sap|ui.technology")==="URL"){if(A["sap.url"]){i.resolutionResult["sap.platform.runtime"]=i.resolutionResult["sap.platform.runtime"]||{};i.resolutionResult.url=A["sap.url"].uri;i.resolutionResult["sap.platform.runtime"].url=A["sap.url"].uri;}else if(S&&S.uri){i.resolutionResult["sap.platform.runtime"].url=S.uri;i.resolutionResult.url=S.uri;}}if(!i.resolutionResult["sap.ui"]){i.resolutionResult["sap.ui"]={};}i.resolutionResult["sap.ui"].technology=g(A,"sap|ui.technology");i.resolutionResult.applicationType=this._formatApplicationType(i.resolutionResult,A);i.resolutionResult.systemAlias=i.resolutionResult.systemAlias||s.systemAlias;i.resolutionResult.systemAliasSemantics="apply";i.resolutionResult.text=i.title;i.deviceTypes=g(A,"sap|ui.deviceTypes")||{};i.resolutionResult.appId=g(A,"sap|app.id");["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(s.deviceTypes||{},M)){i.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(i.deviceTypes,M)){i.deviceTypes[M]=true;}i.deviceTypes[M]=!!i.deviceTypes[M];});i.signature=s.signature||{};i.signature.parameters=i.signature.parameters||{};i.signature.additionalParameters=(s.signature||{}).additionalParameters||"allowed";var h=s.indicatorDataSource||g(A,"sap|app.crossNavigation.inbounds."+k+".indicatorDataSource");var j=h?"#Shell-dynamicTile":"#Shell-staticTile";if(g(A,"sap|app.type")==="tile"||g(A,"sap|flp.type")==="tile"){j=i.resolutionResult;j.url=g(A,"sap|platform|runtime.componentProperties.url");j.componentName=g(A,"sap|ui5.componentName");if(g(A,"sap|platform|runtime.includeManifest")){j.componentProperties=j.componentProperties||{};j.componentProperties.manifest=jQuery.extend(true,{},A);delete j.componentProperties.manifest["sap.platform.runtime"];}o=g(A,"sap|app.crossNavigation.outbounds.target");I=true;}if(g(A,"sap|app.type")==="plugin"||g(A,"sap|flp.type")==="plugin"){return undefined;}if(g(A,"sap|flp.tileSize")){T=g(A,"sap|flp.tileSize");}if(g(A,"sap|app.description")){c=g(A,"sap|app.description");}if(g(A,"sap|ui.technology")==="GUI"&&g(A,"sap|gui.transaction")){d=g(A,"sap|gui.transaction");}if(g(A,"sap|ui.technology")==="WDA"&&g(A,"sap|wda.applicationId")){d=g(A,"sap|wda.applicationId");}if(g(A,"sap|app.dataSources")){D=g(A,"sap|app.dataSources");}if(g(A,"sap|app.id")){e=g(A,"sap|app.id");}i.tileResolutionResult={appId:e,title:i.title,subTitle:i.subTitle,icon:i.icon,size:T,info:i.info,tileComponentLoadInfo:j,indicatorDataSource:h,dataSources:D,description:c,runtimeInformation:S,technicalInformation:d,deviceTypes:i.deviceTypes};i.tileResolutionResult.isCustomTile=I;if(o){i.tileResolutionResult.targetOutbound=o;}return i;}
function f(r,A){var s=r.applicationType;if(s){return s;}var c=g(A,"sap|platform|runtime.componentProperties.self.name")||g(A,"sap|ui5.componentName");if(g(A,"sap|flp.appType")==="UI5"||g(A,"sap|ui.technology")==="UI5"){r.applicationType="SAPUI5";r.additionalInformation="SAPUI5.Component="+c;r.url=g(A,"sap|platform|runtime.componentProperties.url");r.applicationDependencies=g(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(g(A,"sap|ui.technology")==="GUI"){r.applicationType="TR";r["sap.gui"]=g(A,"sap|gui");r.systemAlias=g(A,"sap|app.destination.name");return"TR";}if(g(A,"sap|ui.technology")==="WDA"){r.applicationType="WDA";r["sap.wda"]=g(A,"sap|wda");r.systemAlias=g(A,"sap|app.destination.name");return"WDA";}if(g(A,"sap|ui.technology")==="URL"){r.applicationType="URL";r.systemAlias=g(A,"sap|app.destination.name");}return"URL";}
function a(s){var c=this;if(!s){return[];}var i=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var o=s.applications[A];var d=g(o,"sap|app.crossNavigation.inbounds");if(d){var l=Object.keys(d).sort();l.forEach(function(I){var h=d[I];var r=c.mapOne(I,h,o);if(r){i.push(r);}});}}catch(E){jQuery.sap.log.error("Error in application "+A+": "+E,E.stack);}});}catch(e){jQuery.sap.log.error(e);jQuery.sap.log.error(e.stack);return[];}return i;}
function t(i){var s,p,c;s={target:{semanticObject:i.semanticObject,action:i.action},params:{}};p=jQuery.sap.getObject("signature.parameters",undefined,i)||{};Object.keys(p).forEach(function(k){if(p[k].filter&&Object.prototype.hasOwnProperty.call(p[k].filter,"value")&&(p[k].filter.format===undefined||p[k].filter.format==="plain")){s.params[k]=[p[k].filter.value];}if(p[k].launcherValue&&Object.prototype.hasOwnProperty.call(p[k].launcherValue,"value")&&(p[k].launcherValue.format===undefined||p[k].launcherValue.format==="plain")){s.params[k]=[p[k].launcherValue.value];}});c=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!c){return undefined;}return c;}
function b(o){var s,p,c;s={target:{semanticObject:o.semanticObject,action:o.action},params:{}};p=o.parameters||{};Object.keys(p).forEach(function(k){if(p.hasOwnProperty(k)&&typeof p[k].value==="object"){s.params[k]=[p[k].value.value];}});c=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!c){return undefined;}return c;}
return{formatSite:a,toHashFromInbound:t,toHashFromOutbound:b,mapOne:m,_formatApplicationType:f};},true);
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/ApplicationType',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/wdaResolution","sap/ushell/_ApplicationType/guiResolution","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/Config"],function(U,u,a,s,w,g,p,C){"use strict";
function b(M,B,E){var i=M.inbound;var r=i&&i.resolutionResult;if(!(!i||!r||!(r["sap.wda"]))){return w.constructFullWDAResolutionResult(M,B,E);}if(!(!i||!r)){return w.constructWDAResolutionResult(M,B,E);}}
function c(M,B,E){var o=new U(B),i=M.inbound,I=i&&i.resolutionResult,j=jQuery.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults),S,k;if(j["sap-system"]){S=j["sap-system"][0];delete j["sap-system"];}if(j["sap-system-src"]){k=j["sap-system-src"][0];delete j["sap-system-src"];}return new Promise(function(r,R){s.spliceSapSystemIntoURI(o,I.systemAlias,S,k,"WCF",I.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.apply,E).done(function(l){var P=a.getURLParsing().paramsToString(j),F=a.appendParametersToUrl(P,l.toString());var n={url:F,text:"",additionalInformation:"",applicationType:"WCF",fullWidth:true};r(n);}).fail(function(l){R(l);});});}
function d(M,B,E){var i=M.inbound,j,S,k,o,r={};["applicationType","additionalInformation","applicationDependencies"].forEach(function(P){if(i.resolutionResult.hasOwnProperty(P)){r[P]=i.resolutionResult[P];}});r.url=B;if(r.applicationDependencies&&typeof r.url==="undefined"){r.url="";}if(typeof r.url==="undefined"){return Promise.reject("Cannot resolve intent: url was not specified in matched inbound");}o=jQuery.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);r.reservedParameters={};var R={"sap-ui-fl-max-layer":true,"sap-ui-fl-control-variant-id":true};Object.keys(R).forEach(function(n){var v=o[n];if(v){delete o[n];r.reservedParameters[n]=v;}});M.mappedDefaultedParamNames=M.mappedDefaultedParamNames.filter(function(D){return!R[D];});if(M.mappedDefaultedParamNames.length>0){o["sap-ushell-defaultedParameterNames"]=[JSON.stringify(M.mappedDefaultedParamNames)];}S=o["sap-system"]&&o["sap-system"][0];k=o["sap-system-src"]&&o["sap-system-src"][0];r["sap-system"]=S;if(typeof k==="string"){r["sap-system-src"]=k;}M.effectiveParameters=o;j=a.getURLParsing().paramsToString(o);if(j){r.url=r.url+((r.url.indexOf("?")<0)?"?":"&")+j;}if(typeof i.resolutionResult.ui5ComponentName!=="undefined"){r.ui5ComponentName=i.resolutionResult.ui5ComponentName;}r.text=i.title;return Promise.resolve(r);}
function e(M,B,E){var i=M.inbound,I=i&&i.resolutionResult,r={};var o=new U(B);var j=jQuery.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);if(M.inbound&&M.inbound.action==="launchURL"&&M.inbound.semanticObject==="Shell"){delete j["sap-external-url"];}var S=j["sap-system"]&&j["sap-system"][0];var k=j["sap-system-src"]&&j["sap-system-src"][0];r["sap-system"]=S;delete j["sap-system"];if(typeof k==="string"){r["sap-system-src"]=k;delete j["sap-system-src"];}return(new Promise(function(R,l){if(a.absoluteUrlDefinedByUser(o,I.systemAlias,I.systemAliasSemantics)){R(B);}else{s.spliceSapSystemIntoURI(o,I.systemAlias,S,k,"URL",I.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(l).done(function(n){var q=n.toString();R(q);});}})).then(function(l){var P=a.getURLParsing().paramsToString(j);var F=C.last("/core/navigation/flpURLDetectionPattern");var n=new RegExp(F);return n.test(l)?a.appendParametersToIntentURL(j,l):a.appendParametersToUrl(P,l);},Promise.reject.bind(Promise)).then(function(l){["additionalInformation","applicationDependencies"].forEach(function(P){if(i.resolutionResult.hasOwnProperty(P)){r[P]=i.resolutionResult[P];}});r.url=l;r.text=i.title;r.applicationType="URL";return Promise.resolve(r);},Promise.reject.bind(Promise));}
var A={URL:{type:"URL",generateResolutionResult:e,easyAccessMenu:{intent:"Shell-startURL",resolver:null,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:false,systemSelectionPriority:1}},WDA:{type:"WDA",generateResolutionResult:b,easyAccessMenu:{intent:"Shell-startWDA",resolver:w.resolveEasyAccessMenuIntentWDA,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:2}},TR:{type:"TR",generateResolutionResult:g.generateTRResolutionResult,easyAccessMenu:{intent:"Shell-startGUI",resolver:g.resolveEasyAccessMenuIntentWebgui,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:3}},NWBC:{type:"NWBC"},WCF:{type:"WCF",generateResolutionResult:c},SAPUI5:{type:"SAPUI5",generateResolutionResult:d}};
function f(){return Object.keys(A).map(function(i){return A[i];}).filter(function(o){return typeof o.easyAccessMenu==="object";});}
function h(){var E={};f().forEach(function(o){E[o.easyAccessMenu.intent]=o.easyAccessMenu.resolver;});return function(M){return E[M];};}
var m={getEasyAccessMenuResolver:h(),getEasyAccessMenuDefinitions:f};Object.keys(m).forEach(function(M){Object.defineProperty(A,M,{value:m[M]});});return A;},false);
sap.ui.predefine('sap/ushell/Config',["sap/ushell/EventHub","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/_Config/utils"],function(E,c,C){"use strict";var o=c(window["sap-ushell-config"]);var f=E.createChannel(o);var a=Object.keys(f).reduce(function(a,m){a[m]=function(){if(!f){f=E.createChannel(o);}return f[m].apply(f,arguments);};return a;},{_reset:function(){f=null;},registerConfiguration:function(O,b){o=b;},createModel:function(p,b){if(!f){f=E.createChannel(o);}return C.createModel(f,o,p,b);}});return a;},false);
sap.ui.predefine('sap/ushell/Fiori20Adapter',['sap/ui/base/Object','sap/ui/core/Component','sap/ui/core/UIComponent','sap/ui/model/resource/ResourceModel','sap/m/Fiori20Adapter',"sap/ui/thirdparty/hasher"],function(B,C,U,R,S,h){"use strict";var u;
U._fnOnInstanceDestroy=function(c){if(c._fioriAdapter){c._fioriAdapter.destroy();}};
var A=B.extend("AppInfo",{
constructor:function(c){B.call(this);this._oComponent=c;},
getDefaultTitle:function(){var t,r,m=this._oComponent.getMetadata();var a=m.getManifestEntry("sap.app");if(a&&a.title){t=a.title;if(this._isLocalizationKey(t)){r=(a.i18n||"i18n/i18n.properties");return this._getLocalized(t,r);}return t;}var o=m.getManifestEntry("sap.ui5");if(o&&o.config&&o.config.resourceBundle&&o.config.titleResource){t=o.config.titleResource;r=o.config.resourceBundle;return this._getLocalized(t,r);}return;},
_getLocalized:function(t,r){var m=new R({bundleUrl:jQuery.sap.getModulePath(this._oComponent.getMetadata().getComponentName())+"/"+r});return m.getResourceBundle().getText(t.replace(/^{{/,"").replace(/}}$/,""));},
_isLocalizationKey:function(t){return(t.indexOf("{{")===0)&&(t.indexOf("}}")>0);}
});
var H=B.extend("HeaderInfo",{
constructor:function(c,o,a){B.call(this);this._oConfig=o;this._oAppInfo=a;this._aHierarchy=[];this._defaultTitle=this._oAppInfo.getDefaultTitle();this._oCurrentViewInfo={oTitleInfo:{text:this._defaultTitle}};},
registerView:function(v){if(this._oConfig.bMoveTitle===true){if(!v.oTitleInfo&&v.oSubTitleInfo){v.oTitleInfo=v.oSubTitleInfo;}this._oCurrentViewInfo=v;var t=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:undefined;if(t!==u.getTitle()){u.setTitle(t);}this._updateHierarchy();}this._setBackNavigation(v.oBackButton,v.oAdaptOptions);},
_setBackNavigation:function(b,a){if(a&&a.bHideBackButton===false){return;}var f;if(b){f=b.firePress.bind(b);}u.setBackNavigation(f);},
_updateHierarchy:function(){if(this._oConfig.bHierarchy===false){return;}if(!this._oCurrentViewInfo){return;}var n=true,s="#"+h.getHash();for(var i=this._aHierarchy.length-1;i>=0;i--){var e=this._aHierarchy[i],k=(e.id===this._oCurrentViewInfo.sViewId),K=(e.intent===s);if(k||K){n=false;e=this._updateHierarchyEntry(e);this._aHierarchy[i]=e;this._aHierarchy=this._aHierarchy.slice(0,i+1);if(k){e.intent=s;}break;}}if(n){this._aHierarchy.push(this._createHierarchyEntry());}var N=[];for(var j=this._aHierarchy.length-2;j>=0;j--){N.push(this._aHierarchy[j]);}u.setHierarchy(this._deleteUndefinedProperties(N));},
_createHierarchyEntry:function(){var s="#"+h.getHash(),e={id:this._oCurrentViewInfo.sViewId,title:this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle,subtitle:this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined,intent:s};return e;},
_updateHierarchyEntry:function(e){e.id=this._oCurrentViewInfo.sViewId;e.title=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle;e.subtitle=this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined;return e;},
_deleteUndefinedProperties:function(o){o.forEach(function(O){for(var p in O){if(O.hasOwnProperty(p)&&!O[p]&&p!=='title'){delete O[p];}}});return o;}
});
var F=B.extend("sap.ushell.Fiori20Adapter",{
constructor:function(c,o){B.call(this);this._oComponent=c;this._oConfig=o;this._oHeaderInfo=new H(c,o,new A(c));if(S){S.attachViewChange(this._onViewChange,this);}},
init:function(){if(!S){return;}jQuery.sap.measure.start("Fiori20Adapter");var c=jQuery.extend({},this._oConfig);S.traverse(this._oComponent.getAggregation("rootControl"),c);jQuery.sap.measure.end("Fiori20Adapter");},
destroy:function(){if(S){S.detachViewChange(this._onViewChange,this);}},
_onViewChange:function(e){this._oHeaderInfo.registerView(e.getParameters());}
});
F.applyTo=function(c,o,a,s){var O=c instanceof U?c:C.getOwnerComponentFor(c);if(!O){O=o;}if(O&&!O._fioriAdapter){u=s;O._fioriAdapter=new F(O,a);O._fioriAdapter.init();}};
return F;});
sap.ui.predefine('sap/ushell/Fiori20AdapterTest',['sap/ui/core/UIComponent','sap/ushell/Fiori20Adapter'],function(U,F){"use strict";var a={I_DEFAULT_SEARCH_DEPTH:5,B_DEFAULT_LATE_ADAPTATION:false,S_FIORI20ADAPTER_URL_PARAM_NAME:"sap-ui-xx-fiori2Adaptation",S_FIORI20ADAPTER_METADATA_PARAM_NAME:"sapFiori2Adaptation",A_WHITELIST:["fin.*","ssuite.fin.*","fscm.*","sap.fin.*","cus.sd.*","cus.o2c.*","sap.apf.*","tl.ibp.*","ux.fnd.apf.o2c.*","fnd.apf.*","fnd.pob.o2c.*","fcg.sll.*","ux.fnd.generic-apf-application.*","hpa.cei.*","query.viewbrowser.s1.*","ssuite.vdm.viewbrowser.s1.*","ssuite.smartbusiness.kpi.s1.*","ssuite.smartbusiness.evaluation.s1.*","ssuite.smartbusiness.association.s1.*","ssuite.smartbusiness.drilldown.s1.*","ssuite.smartbusiness.tile.s1.*","ssuite.smartbusiness.tile.ce.s1.*","ssuite.smartbusiness.workspace.s1.*","ssuite.smartbusiness.runtime.s1.*","gs.fin.customersummarycn.display.*","gs.fin.financialstatement.structure.manage.*","gs.fin.financialstatement.display.*","uipsm.*","publicservices.her.*"],getConfiguration:function(c){var C=this._getURLParamConfiguration();if(!C){C=this._getMetadataConfiguration(c);}if(!C){C=this._getDefaultConfiguration(c);}C.iSearchDepth=C.iSearchDepth||a.I_DEFAULT_SEARCH_DEPTH;if((typeof C.iSearchDepth==="string")&&!isNaN(C.iSearchDepth)){C.iSearchDepth=parseInt(C.iSearchDepth,10);}return C;},_getURLParamConfiguration:function(){if(typeof sap.ui.getCore().getConfiguration().getFiori2Adaptation!=="function"){return;}if(!this._isURLParameterSpecified(a.S_FIORI20ADAPTER_URL_PARAM_NAME)){return;}var u=sap.ui.getCore().getConfiguration().getFiori2Adaptation(),b,s;if(typeof(u)==="boolean"){b=u;}else if(u&&(u.length>=1)){s=u;}if(!s&&(b===undefined)){return;}return{bStylePage:s?s.indexOf("style")>-1:b,bMoveTitle:s?s.indexOf("title")>-1:b,bHideBackButton:s?s.indexOf("back")>-1:b,bCollapseHeader:s?s.indexOf("collapse")>-1:b,bHierarchy:s?s.indexOf("hierarchy")>-1:b};},_getMetadataConfiguration:function(c){var A=c.getMetadata("config").getConfig(a.S_FIORI20ADAPTER_METADATA_PARAM_NAME),b,d;if(typeof(A)==="boolean"){b=A;}else if((typeof A==="object")&&!jQuery.isEmptyObject(A)){d=A;}if(!d&&(b===undefined)){return;}return{bStylePage:d?this._isSgnTrue(d["style"]):b,bMoveTitle:d?this._isSgnTrue(d["title"]):b,bHideBackButton:d?this._isSgnTrue(d["back"]):b,bCollapseHeader:d?this._isSgnTrue(d["collapse"]):b,bHierarchy:d?this._isSgnTrue(d["hierarchy"]):b,bLateAdaptation:d?this._isSgnTrue(d["lateAdaptation"]):a.B_DEFAULT_LATE_ADAPTATION};},_getDefaultConfiguration:function(c){var e=this._hasMinVersionSmallerThan(c,"1.42")&&this._isWhitelisted(c);return{bStylePage:e,bMoveTitle:e,bHideBackButton:e,bCollapseHeader:e,bHierarchy:e};},_isURLParameterSpecified:function(p){var A=jQuery.sap.getUriParameters().mParams&&jQuery.sap.getUriParameters().mParams[p];return A&&(A.length>0);},_isWhitelisted:function(c){var C=c.getMetadata().getName();for(var i=0;i<a.A_WHITELIST.length;i++){var n=a.A_WHITELIST[i].substring(0,a.A_WHITELIST[i].length-2);if(this._isPrefixedString(C,n)){return true;}}return false;},_isAdaptationRequired:function(A){for(var o in A){if(A[o]===true){return true;}}return false;},_isPrefixedString:function(s,p){return s&&p&&(s.substring(0,p.length)===p);},_hasMinVersionSmallerThan:function(c,v){var i=c.getMetadata().getManifestEntry("sap.ui5"),m=true;if(i&&i.dependencies&&i.dependencies.minUI5Version){var M=new jQuery.sap.Version(i.dependencies.minUI5Version);m=M.compareTo(new jQuery.sap.Version(v))<0;}return m;},_isSgnTrue:function(v){return(v===true)||(v==="true");}};
U._fnOnInstanceInitialized=function(c){var C=c.getAggregation("rootControl");if(!C||C.getId()==="navContainerFlp"||c.getId().indexOf("application-")!==0){return;}var o=a.getConfiguration(c);if(!a._isAdaptationRequired(o)){return;}if(!sap.ui.core.service||!sap.ui.core.service.ServiceFactoryRegistry||typeof sap.ui.core.service.ServiceFactoryRegistry.get!=="function"){jQuery.sap.log.warning("Fiori20Adapter not loaded because static FactoryRegistry is not available","sap.ui.core.service.ServiceFactoryRegistry should be a function","sap.ushell.Fiori20AdapterTest");return;}var d={onBeforeRendering:function(){C.removeEventDelegate(d);var s=sap.ui.core.service.ServiceFactoryRegistry.get("sap.ushell.ui5service.ShellUIService"),S=s&&s.createInstance();if(!s||!S){jQuery.sap.log.warning("Fiori20Adapter not loaded because ShellUIService is not available","sap.ushell.ui5service.ShellUIService should be declared by configuration","sap.ushell.Fiori20AdapterTest");return;}S.then(function(s){if(s&&(s.getUxdVersion()===2)){F.applyTo(C,c,o,s);}},function(e){jQuery.sap.log.warning("Fiori20Adapter not loaded as ShellUIService is not available",e,"sap.ushell.Fiori20AdapterTest");});}};C.addEventDelegate(d);};
},false);
sap.ui.predefine('sap/ushell/Layout',["sap/ushell/Config"],function(C){"use strict";var a=function(s){this.init(s);};a.prototype={settings:null,tileWidth:0,tileHeight:0,tileMargin:0,curTouchMatrixCords:null,tilesInRow:null,groupsList:null,item:null,matrix:null,tiles:null,collisionLeft:false,startGroup:null,currentGroup:null,endGroup:null,init:function(s){this.curTouchMatrixCords={column:null,row:null};this.endGroup=null;this.groupSwitched=false;this.item=null;this.matrix=null;this.tiles=null;this.collisionLeft=false;this.startArea=null;this.currentArea=null;this.endArea=undefined;this.startGroup=null;this.draggedTileDomRef=null;this.sDragStartGroupModelId=undefined;this.sDragTargetGroupModelId=undefined;this.currentGroup=null;this.groupsList=null;this.allGroups=null;this.settings=this.settings||s;jQuery.extend(this,this.settings);this.tileWidth=this.thisLayout.styleInfo.tileWidth;this.tileHeight=this.thisLayout.styleInfo.tileHeight;this.tileMargin=this.thisLayout.styleInfo.tileMarginWidth;this.aExcludedControlClass=this.aExcludedControlClass||[];this.reorderElementsCallback=this.reorderElementsCallback||function(){};this.rightToLeft=sap.ui.getCore().getConfiguration().getRTL();this.tabBarArrowCollisionRight=false;this.tabBarArrowCollisionLeft=false;this.collidedLinkAreas=[];this.intersectedLink=null;this.aLinksBoundingRects=[];this.intersectedLinkPlaceHolder=undefined;this.isLinkPersonalizationSupported=sap.ushell.Container?sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported():null;this.isLinkMarkerShown=false;this.bIsTabBarCollision=false;},isTabBarCollision:function(){return this.bIsTabBarCollision;},moveDraggable:function(m,c,t){var o=this.getCollisionObject(m,c,t),n;if(o){this._toggleAnchorItemHighlighting(false);if(o.collidedObjectType!=="TabBar"){this._toggleTabBarOverflowArrows(false);this.thisLayout.setOnTabBarElement(false);this._resetOverFlowButtonElements();this.bIsTabBarCollision=false;}else{this.bIsTabBarCollision=true;this._toggleTabBarOverflowArrows(true);this.removePlaceHolders();this._handleTabBarCollision(m,t);}if(this.isLinkPersonalizationSupported&&o.collidedObjectType==="Group-link"){n=this._handleLinkAreaIntersection(o.collidedObject,m,c);}else if(o.collidedObjectType==="Group-tile"){n=this._handleTileAreaIntersection(o.collidedObject,m,c);this._toggleTileCloneHoverOpacity(false);}if(n||this.endAreaChanged){this.handlePlaceHolder(o.collidedObject);}}else{this._removeEmptyLinkAreaMark();}},_toggleAnchorItemHighlighting:function(h){if(this.targetGroup){this.targetGroup.classList.toggle('sapUshellAnchorItemDropCollision',h);this.targetGroup.firstElementChild.classList.toggle('sapUshellAnchorInnerMarker',h);}},removePlaceHolders:function(){this._removeLinkDropMarker();this._removeEmptyLinkAreaMark();this._handleChangedGroup(this.currentGroup);},handlePlaceHolder:function(c){if(this.endArea==="tiles"){if(this.endAreaChanged){this._removeLinkDropMarker();}this.handlePlaceholderChange();}else if(this.endArea==="links"&&this.intersectedLink){this._changeLinkPlaceholder(this.intersectedLink,c);if(this.endAreaChanged){this.handlePlaceholderChange();}}},switchLinkWithClone:function(i){if(i){this.intersectedLinkPlaceHolder=i.getDomRef().cloneNode(true);this.intersectedLinkPlaceHolder.id="sapUshellIntersectedLinkPlaceHolder";jQuery(i.getDomRef()).replaceWith(this.intersectedLinkPlaceHolder);}},_removeLinkDropMarker:function(){jQuery("#sapUshellLinkDropMarker").remove();this.isLinkMarkerShown=false;},saveLinkBoundingRects:function(e){var l=sap.ui.getCore().byId(e.id);this.draggedLinkBoundingRects=l.getBoundingRects();},_getMarkerOffset:function(r,c){var n=jQuery(c.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().left,d=jQuery(c.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().top,e=this.rightToLeft?20:-1,f=this.rightToLeft?42:21,g=r[r.length-1].offset.x-n+r[r.length-1].width-e,l=r[this.rightToLeft?r.length-1:0].offset.x-n-f,t=r[this.rightToLeft?r.length-1:0].offset.y-d,h=r[this.rightToLeft?0:r.length-1].offset.y-d;if(jQuery("body.sapUiSizeCompact").length){t-=6;h-=6;}if(this.rightToLeft){if(jQuery(c.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().right-r[r.length-1].offset.x-r[r.length-1].width<16){g=g-8;}}else if(l<16){l=0;}return{right:g,left:l,topLeft:t,topRight:h};},_changeLinkPlaceholder:function(l,c){var o=this.aLinksBoundingRects[l.link.getId()],d=o.left,t=o.topLeft,e=o.topRight,r=o.right;if(jQuery(c.getDomRef()).find("#sapUshellLinkDropMarker").length===0){this._removeLinkDropMarker();jQuery(c.getDomRef()).find(".sapUshellLinksInnerContainer").prepend(this.LinkDropMarker);}jQuery(this.LinkDropMarker).css({left:l.leftSide?d:r,top:l.leftSide?t:e});this.isLinkMarkerShown=true;},showTilePlaceholder:function(c,t,T){var d,r=this.curTouchMatrixCords.row,e=this.curTouchMatrixCords.column;this.domRef=this.item.getDomRef()?this.item.getDomRef():this.domRef;jQuery(this.domRef).show();this.removeExcludedElementsFromMatrix(this.aExcludedControlClass);d=this.tiles||this.thisLayout.getGroupTiles(this.endGroup).slice(0);if(this.matrix[r]&&typeof this.matrix[r][e]==="object"){this.handleMatrixCollision(d,c,t,T);return;}this._handleMoveOutOfBorders(d,c);},removeTilePlaceholder:function(g,A){var c,d,h,f=function(){if(this.thisLayout.isAnimationsEnabled()){this.thisLayout.initGroupDragMode(this.endGroup);d=this.thisLayout.organizeGroup(c);this.thisLayout.renderLayoutGroup(this.currentGroup,d);}}.bind(this);this.domRef=this.item.getDomRef()?this.item.getDomRef():this.domRef;c=this.thisLayout.getGroupTiles(this.currentGroup);c=c.slice(0);if(this.startArea!=='links'&&c.indexOf(this.item)>-1){c.splice(c.indexOf(this.item),1);}if(!jQuery(this.domRef.parentNode).hasClass("sapUshellLinksInnerContainer")){jQuery(this.domRef).hide();}if(A){h=jQuery(this.currentGroup.getDomRef()).find(".sapUshellTilesContainer-sortable").height()-jQuery(this.domRef).height();this.collidedLinkAreas=[];jQuery(this.currentGroup.getDomRef()).find(".sapUshellTilesContainer-sortable").animate({height:h},300,f);}else{f();}},handlePlaceholderChange:function(){var c=this.currentGroup,t=(this.endGroup!==this.currentGroup),T=this.endAreaChanged&&this.endArea==='links',i=this.thisLayout.isTabBarActive()&&this.groupSwitched,A=false,m=this.matrix[this.matrix.length-1];if(this.item&&m[0]){if(!m[1]){A=true;}if(m[0].getLong&&m[0].getLong()&&m[1]&&!m[2]){A=true;}}this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);this.matrix=this.thisLayout.organizeGroup(this.tiles);if(i){this.handleTabBarSwitch(c);}if(t){this._handleChangedGroup(c);}else if(T){this.removeTilePlaceholder(undefined,A);}if(!T){this.showTilePlaceholder(c,t,T);}},handleMatrixCollision:function(t,c,T,d){var r,e,f,n;r=this.matrix[this.curTouchMatrixCords.row][this.curTouchMatrixCords.column];e=t.indexOf(r);f=t.indexOf(this.item);if(this.rightToLeft){this.collisionLeft=!this.collisionLeft;}if(f>-1&&f<e){r=t[e+1];}if(r===this.item){if(T||d){t.splice(t.indexOf(this.item),1);}this._handleTileReplace(t,c);return;}n=this.changeTilesOrder(this.item,r,t,this.matrix);if(n&&!this.isLinkMarkerShown){this._handleTileReplace(n,c);}},handleTabBarSwitch:function(c){var d=this.thisLayout.getGroupTiles(c),e;this._appendTargetGroupDomRefWithDraggedTile();if(!this.item.getDomRef()){this.endGroup.getInnerContainersDomRefs()[0].appendChild(this.draggedTileDomRef);}else{this.endGroup.getInnerContainersDomRefs()[0].appendChild(this.item.getDomRef());}this.currentGroup=this.endGroup;if(this.thisLayout.isAnimationsEnabled()){this.thisLayout.initGroupDragMode(this.endGroup);e=this.thisLayout.organizeGroup(d);this.thisLayout.renderLayoutGroup(c,e);}},_handleMoveOutOfBorders:function(t,c){var m=this.findTileToPlaceAfter(this.matrix,t),r;if(t[m+1]==this.item){return;}if(t[m+1]){r=t[m+1];}else if(this.currentGroup.getShowPlaceholder()){r=t[0];}var n=this.changeTilesOrder(this.item,r,t,this.matrix);if(n){this._handleTileReplace(n,c);}},_handleChangedGroup:function(c){var d=this.thisLayout.getGroupTiles(this.currentGroup),i;if(this.currentGroup===this.startGroup&&(this.startArea==="tiles"||this.intersectedLinkPlaceHolder)){d=d.slice(0);if(d.indexOf(this.item)>-1){d.splice(d.indexOf(this.item),1);}}if(this.startGroup===this.endGroup&&this.startArea==="tiles"){this.tiles.splice(this.tiles.indexOf(this.item),1);}i=this.item.getDomRef()||this.domRef;if(this.startArea==="links"&&!this.intersectedLinkPlaceHolder){this.switchLinkWithClone(this.item);}if(this.endArea==='tiles'){this.endGroup.getInnerContainersDomRefs()[0].appendChild(i);}if(!jQuery(i.parentNode).hasClass("sapUshellLinksInnerContainer")){jQuery(i).hide();}this.currentGroup=this.endGroup;if(this.thisLayout.isAnimationsEnabled()){this.thisLayout.initGroupDragMode(this.endGroup);var e=this.thisLayout.organizeGroup(d);this.thisLayout.renderLayoutGroup(c,e);}},_handleTileReplace:function(t,c){this.reorderElementsCallback({currentGroup:c,endGroup:this.endGroup,tiles:t,item:this.item});this.reorderTilesView(t,this.endGroup);this.reorderTilesInDom();if(this.thisLayout.isAnimationsEnabled()){this.thisLayout.renderLayoutGroup(this.endGroup,this.matrix);}},_getIntersectedLink:function(c,m,d){var e=jQuery(".sapUshellLinkTile")[0];if(!e){return;}var f=c.getDomRef().querySelector(".sapUshellLineModeContainer").getBoundingClientRect(),g=!jQuery("body.sapUiSizeCompact").length,r=Math.floor((d-f.top)/(g?45:31)),h=this.collidedLinkAreas[c.getId()],i;if(this.rightToLeft){i=Math.floor((f.right-m)/20);}else{i=Math.floor((m-f.left)/20);}if(r<h.length&&h[r]&&i<h[r].length){return h[r][i];}else if(h.length){var l=h.length;if(r>=l){r=l-1;}if(!this.collidedLinkAreas[c.getId()][r]){return;}i=this.collidedLinkAreas[c.getId()][r].length;return this.collidedLinkAreas[c.getId()][r][i-1];}},_mapGroupLinks:function(c){var g=c.getId(),l,r,R=0;if(!this.collidedLinkAreas[g]||this.bElapseGroupLinksMap){this.bElapseGroupLinksMap=false;var d=c.getLinks(),e=[];this.collidedLinkAreas.push(c.getId());d.forEach(function(i){r=this._getLinkBoundingRects(i,c);r.forEach(function(o){if(o.offset.y>l){R++;}l=o.offset.y;this._addLinkToHashMap(e,c,o,R,i);}.bind(this));}.bind(this));this.collidedLinkAreas[g]=e;}},_getLinkBoundingRects:function(l,c){var r=l.getBoundingRects();if(this.item&&this.item.getId()===l.getId()){r=this.draggedLinkBoundingRects;}if(r.length){this.aLinksBoundingRects[l.getId()]=this._getMarkerOffset(r,c);}return r;},_addLinkToHashMap:function(c,d,r,e,l){if(!c[e]){c[e]=[];}for(var i=0;i<=(r.width+20)/20;i++){var f={link:l,leftSide:!this.rightToLeft};if(i>((r.width+20)/20)/2){f.leftSide=this.rightToLeft;}c[e].push(f);}},_isLinkAreaIntersection:function(c,m,d){var i=c.getInnerContainersDomRefs();if(i[1]){return this._isElementCollideByGivenCordinates(i[1],m,d);}else{return false;}},_isLinksEquals:function(l,o){if(!l||!o){return false;}if(l.link.getId()!==o.link.getId()){return false;}if(l.link.leftSide!==o.link.leftSide){return false;}return true;},_toggleTileCloneHoverOpacity:function(v){jQuery(".sapUshellTile-clone").toggleClass("sapUshellTileDragOpacity",v);},_handleLinkAreaIntersection:function(c,m,d){var i,e=false;if(this.isLinkPersonalizationSupported){this._toggleTileCloneHoverOpacity(true);}this._mapGroupLinks(c);this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(c));i=this._getIntersectedLink(c,m,d);if(i){e=this._isLinksEquals(this.intersectedLink,i);this.intersectedLink=i;}else{this.removeTilePlaceholder(c);}this._markEmptyLinkArea(c);return e;},_markEmptyLinkArea:function(c){if(!c.getLinks().length){jQuery(c.getDomRef()).find(".sapUshellLineModeContainer").addClass("sapUshellEmptyLinkAreaHover");}},_removeEmptyLinkAreaMark:function(){jQuery(".sapUshellLineModeContainer").removeClass("sapUshellEmptyLinkAreaHover");},reorderTilesInDom:function(){var j=this.item.getDomRef()?this.item.getDomRef():this.domRef,s=jQuery(j).index(),c=jQuery(j).closest(".sapUshellTilesContainer-sortable"),d=this.calcDestIndexInGroup(),e=jQuery(this.endGroup.getDomRef()).find(".sapUshellTilesContainer-sortable"),f=e.find(".sapUshellTile");if(this.startArea==="tiles"){c.find(f[s]).remove();}else if(!this.intersectedLinkPlaceHolder){this.switchLinkWithClone(this.item);}if(this.endArea!=='links'){f=e.find(".sapUshellTile");e[0].insertBefore(j,f[d]);}},isLinkIntersected:function(){return this.intersectedLink!==undefined;},calcDestIndexInGroup:function(){var l,t=0,i,j,I=false;for(i=0;i<this.matrix.length&&!I;i++){for(j=0;j<this.matrix[i].length;j++){if(this.matrix[i][j]!==undefined){if(this.item.sId!==this.matrix[i][j].sId){if(l!==this.matrix[i][j].sId){l=this.matrix[i][j].sId;t++;}}else{I=true;break;}}}}return t;},layoutStartCallback:function(e){this.init();this.item=sap.ui.getCore().byId(e.id);this.tilesInRow=this.thisLayout.getTilesInRow();this.groupsList=this.thisLayout.getGroups();this.allGroups=this.thisLayout.getAllGroups();this.startGroup=this.currentGroup=this.item.getParent();this.groupSwitched=false;this.startArea=this.isLinkPersonalizationSupported&&this.item.getMode&&this.item.getMode()==='LineMode'?"links":"tiles";this.currentArea=this.startArea;if(this.thisLayout.isAnimationsEnabled()){this.thisLayout.initDragMode();}if(this.isLinkPersonalizationSupported){this.LinkDropMarker=this._getLinkDropMarkerElement();}},_getLinkDropMarkerElement:function(){var e=document.createElement("DIV"),c=document.createElement("DIV"),d=document.createElement("DIV");e.setAttribute("id","sapUshellLinkDropMarker");c.setAttribute("id","sapUshellLinkDropMarkerDot");d.setAttribute("id","sapUshellLinkDropMarkerLine");e.appendChild(c);e.appendChild(d);return e;},isAreaChanged:function(){return(this.currentArea&&this.endArea)?this.currentArea!==this.endArea:false;},isOriginalAreaChanged:function(){return(this.startArea&&this.endArea)?this.startArea!==this.endArea:false;},_getDestinationIndex:function(t){if(t==="links"){if(this.intersectedLink){var i=this.endGroup.getLinks().indexOf(this.intersectedLink.link),d=this.endGroup.getLinks().indexOf(this.item);if(this.intersectedLink.leftSide){i=this.rightToLeft?i+1:i-1;}if(d<0||d>i){i=this.rightToLeft?i:i+1;}return i;}else{return this.endGroup.getLinks().length;}}else{return this._getDestinationTileIndex();}},layoutEndCallback:function(){var r,s,d;this._removeLinkDropMarker();if(this.endArea!=="links"&&!this.tiles){return{tile:this.item};}s=this._getDragSourceGroup();if(!b.isTabBarActive()||!this.bIsTabBarCollision){this.targetGroup="";};d=this._getDestGroupObject(this.targetGroup);r={srcGroup:s,dstGroup:d,dstGroupData:this._getDropTargetGroup(),tile:this.item,dstTileIndex:this._getDestinationIndex(this.endArea),tileMovedFlag:true,srcArea:this.startArea,dstArea:this.bIsTabBarCollision?undefined:this.endArea};return r;},_getDestGroupObject:function($){return $?sap.ui.getCore().byId(($.getAttribute('id'))):this.endGroup;},_getDragSourceGroup:function(){var s;s=this.startGroup;if(this.thisLayout.isTabBarActive()&&(this.groupSwitched===true)){s={groupId:this.sDragStartGroupModelId};}return s;},_getDropTargetGroup:function(){var d;if(this.thisLayout.isTabBarActive()&&this.thisLayout.isOnTabBarElement()){d={groupId:this.sDragTargetGroupModelId};}else{d=this.endGroup;}return d;},_getDestinationTileIndex:function(){var d,m;if(this.thisLayout.isTabBarActive()&&this.thisLayout.isOnTabBarElement()){d=this._getDropTargetGroup().groupId;m=this._getModelGroupById(d);return m.tiles.length;}return this.tiles.indexOf(this.item);},compareArrays:function(c,d){if(c.length!==d.length){return false;}for(var i=0;i<c.length;i++){if(c[i]!==d[i]){return false;}}return true;},reorderTilesView:function(t,g){this.tiles=t;this.matrix=this.thisLayout.organizeGroup(t);},changeTilesOrder:function(i,r,t,m){var n=t.slice(0),d=n.indexOf(i),c,e,f;if(d>-1){n.splice(d,1);}if(r){n.splice(n.indexOf(r),0,this.item);}else{n.push(i);}if(this.currentGroup==this.endGroup){if(this.compareArrays(t,n)){return false;}c=this.thisLayout.organizeGroup(n);e=this.thisLayout.getTilePositionInMatrix(i,m);f=this.thisLayout.getTilePositionInMatrix(i,c);if((e.row==f.row)&&(e.col==f.col)){return false;}}this.tiles=n;this.currentGroup=this.endGroup;return n;},setMatrix:function(n){this.matrix=n;},findTileToPlaceAfter:function(c,t){var x=(this.thisLayout.rightToLeft)?0:this.curTouchMatrixCords.column,I=(this.thisLayout.rightToLeft)?1:-1,m=0,i,j,d,r=c[0].length;for(i=this.curTouchMatrixCords.row;i>=0;i--){for(j=x;j>=0&&j<r;j+=I){if(!c[i]||typeof c[i][j]!=="object"){continue;}d=t.indexOf(c[i][j]);m=d>m?d:m;}x=c[0].length-1;}return m||(t.length-1);},_isElementCollideByGivenCordinates:function(e,m,c){var t=e.getBoundingClientRect(),i=false,d=false;if(t.height===0&&!e.classList.contains("sapUshellNoLinksAreaPresent")){t=e.parentNode.getBoundingClientRect();}i=t.right>m&&t.left<m;d=t.bottom>c&&t.top<c;return i&&d;},_getMatrixCordinatesOfTouchedTile:function(c,m,d){var e=jQuery.extend({},this.curTouchMatrixCords),t=c.getInnerContainersDomRefs()[0].getBoundingClientRect();this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(c));var o=this.rightToLeft?(t.right+(-1)*m):(t.left*(-1)+m),f=(t.top*(-1)+d)/(this.tileHeight+this.tileMargin),g=o/(this.tileWidth+this.tileMargin);e={row:Math.floor(f),column:Math.floor(g)};return e;},_getCollidedGroup:function(m,c){for(var i=0;i<this.groupsList.length;i++){var g=this.groupsList[i],d=g.getInnerContainersDomRefs();for(var j=0;j<d.length;j++){if(d[j]&&this._isElementCollideByGivenCordinates(d[j],m,c)){var e=!g.groupHasTiles();for(var f=this.groupsList.length-1;f>=i;f--){if(e){break;}if(!this.groupsList[f].groupHasTiles()){var q=this.groupsList[f].$();if(!q.hasClass("sapUshellInDragMode")){continue;}q.removeClass("sapUshellEnableTransition");q.find('.sapUshellInner').removeAttr("style");}}return g;}}}},_handleTileAreaIntersection:function(c,m,d){var e=this._getMatrixCordinatesOfTouchedTile(c,m,d);if((c===this.endGroup)&&(e.column===this.curTouchMatrixCords.column)&&(e.row===this.curTouchMatrixCords.row)){return false;}if(this.rightToLeft){this.collisionLeft=(this.curTouchMatrixCords.column-e.column)>0;}else{this.collisionLeft=(e.column-this.curTouchMatrixCords.column)>0;}if(e.column===this.curTouchMatrixCords.column){this.collisionLeft=false;}jQuery.extend(this.curTouchMatrixCords,e);return true;},_getGroupCollisionObject:function(m,c){var d,l;d=this._getCollidedGroup(m,c);if(!d||d.getIsGroupLocked()){return undefined;}l=this._isLinkAreaIntersection(d,m,c);this.endGroup=d;if(!this.tiles){this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);}this.endArea=l?'links':'tiles';this.endAreaChanged=this.isAreaChanged();this.currentArea=this.endArea;return{"collidedObjectType":l?"Group-link":"Group-tile","collidedObject":d};},getCollisionObject:function(m,c){if(this.thisLayout.oTabBarItemClickTimer){clearTimeout(this.thisLayout.oTabBarItemClickTimer);}if(this.thisLayout.isTabBarActive()&&this._isTabBarCollision(c)){return{"collidedObjectType":"TabBar"};}return this._getGroupCollisionObject(m,c);},_isTabBarScrollArea:function(m){var A=jQuery("#anchorNavigationBar").height(),o=jQuery("#anchorNavigationBar").offset(),i=o.top;return((m>A+i)&&(m<A+i+30));},_cancelLongDropTimmer:function(){clearTimeout(this.thisLayout.oTabBarItemClickTimer);},_isTabBarCollision:function(m){var A=jQuery("#anchorNavigationBar").height(),o=jQuery("#anchorNavigationBar").offset(),i=o.top;return(m<A+i&&m>i);},_handleTabBarCollision:function(m,t){var c=this,h=this._getTabBarHoverItem(m,t),T,H,i,d,D;if(b.isTabBarActive()){this._toggleTileCloneHoverOpacity(true);}this.lastHighlitedTabItem=h;this.thisLayout.setOnTabBarElement(true);i=this._handleOverflowCollision(m);if(i){return;}if(!h){return;}this.targetGroup=h;this.sDragTargetGroupModelId=h.getAttribute('modelGroupId');T=this._getTabBarGroupIndexByModelId(this.sDragTargetGroupModelId);if(this.thisLayout.oTabBarItemClickTimer){clearTimeout(this.thisLayout.oTabBarItemClickTimer);}D=this._getModelGroupById(this._getDropTargetGroup().groupId);if(D.isGroupLocked){this._toggleTabBarOverflowArrows(false);this.thisLayout.setOnTabBarElement(false);this._resetOverFlowButtonElements();return;}this._toggleAnchorItemHighlighting(true);if(!this.sDragStartGroupModelId){this.sDragStartGroupModelId=this.startGroup.getGroupId();}this.thisLayout.oTabBarItemClickTimer=setTimeout(function(){var e=c._getSelectedTabBarItem();if(c.lastHighlitedTabItem===e){return;}c.draggedTileModelPath=c.item.getBindingContext().getPath();c._prepareDomForDragAndDrop();c.startGroup.removeAggregation('tiles',c.item,true);d=c.sDragStartGroupModelId===c.sDragTargetGroupModelId;c.item.getBindingContext().oModel.setProperty(c.draggedTileModelPath+"/draggedInTabBarToSourceGroup",d);c.groupSwitched=true;sap.ui.getCore().getEventBus().publish("launchpad","switchTabBarItem",{iGroupIndex:T});var f=c.thisLayout.getGroups();c.endGroup=f[0];c.bElapseGroupLinksMap=true;},800);if((this.tiles===null)&&(this.endGroup)){this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);}H=jQuery('.sapUshellTabBarHoverOn');H.removeClass('sapUshellTabBarHoverOn');h.classList.add('sapUshellTabBarHoverOn');return true;},_prepareDomForDragAndDrop:function(){if(sap.ui.Device.system.tablet){var c=this.item.$().clone();var $=this.item.$();var d=$.parent();this.origItemId=$.attr("id");this.origItemDataSapUi=$.attr("data-sap-ui");$.removeAttr("id").removeAttr("data-sap-ui");$.hide();c.hide();jQuery("#dashboardGroups").parent().append($);d.append(c);this.draggedTileDomRef=$.get(0);}else if(!this.draggedTileDomRef){this.draggedTileDomRef=this.item.getDomRef();}},_appendTargetGroupDomRefWithDraggedTile:function(){if(!this.item.getDomRef()){if(sap.ui.Device.system.tablet){jQuery(this.draggedTileDomRef).attr("id",this.origItemId);jQuery(this.draggedTileDomRef).attr("data-sap-ui",this.origItemDataSapUi);jQuery(this.draggedTileDomRef).show();}this.endGroup.getInnerContainerDomRef().appendChild(this.draggedTileDomRef);}else{this.endGroup.getInnerContainerDomRef().appendChild(this.item.getDomRef());if(sap.ui.Device.system.tablet){jQuery(this.item.getDomRef()).show();}}},_getSelectedTabBarItem:function(){return jQuery('.sapUshellAnchorItemSelected')[0];},_getTabBarGroupIndexByModelId:function(g){var i,t;for(i=0;i<this.allGroups.length;i++){t=this.allGroups[i].groupId;if(g===t){return i;}}},_getModelGroupById:function(g){var m=this.thisLayout.getAllGroups(),i,t,T;for(i=0;i<m.length;i++){t=m[i];T=t.groupId;if(T===g){return t;}}},_handleOverflowCollision:function(m){var A=sap.ui.getCore().byId("anchorNavigationBar"),o=this._calculateOverflowButtonSideCollision(m);if(o=="right"){if(!this.tabBarArrowCollisionRight){A._scrollToGroupByGroupIndex(A.anchorItems.length-1,5000);this.tabBarArrowCollisionRight=true;}return true;}else if(o=="left"){if(!this.tabBarArrowCollisionLeft){A._scrollToGroupByGroupIndex(0,5000);this.tabBarArrowCollisionLeft=true;}return true;}else{this._resetOverFlowButtonElements();return false;}},_calculateOverflowButtonSideCollision:function(m){var c=jQuery(".sapUshellAnchorRightOverFlowButton"),d=c.offset().left,e=jQuery(".sapUshellAnchorItemOverFlow"),f=e.offset().left,g=jQuery(".sapUshellAnchorLeftOverFlowButton"),h=g.offset().left,i=32,j=jQuery("#anchorNavigationBar"),k=j.offset().left;if(m>d&&m<f){return"right";}if(m>k&&(m<h+i)){return"left";}},_resetOverFlowButtonElements:function(){var t=sap.ui.Device.system.tablet,c=jQuery(t?'.sapUshellAnchorNavigationBarItemsScroll':'.sapUshellAnchorNavigationBarItems');c.stop();this.tabBarArrowCollisionRight=false;this.tabBarArrowCollisionLeft=false;},_toggleTabBarOverflowArrows:function(s){var c=jQuery(".sapUshellAnchorRightOverFlowButton"),d=jQuery(".sapUshellAnchorLeftOverFlowButton");d.toggleClass("sapUshellTabBarOverflowButton",s);c.toggleClass("sapUshellTabBarOverflowButton",s);},_getTabBarHoverItem:function(m,t){var n,l,h,T,H;l=jQuery(".sapUshellAnchorItem:not(.sapUshellShellHidden)").first().offset().left;if(m-l<=0){return;}n=Math.round((m-l)/10);if(n>=t.length){n=t.length-1;}h=t[n];T=jQuery(".sapUshellAnchorItem");H=T[h];return H;},removeExcludedElementsFromMatrix:function(e){if(!e.length){return;}if(!this.matrix){return;}var n=this.matrix.map(function(r){return r.map(function(i){var c=e.some(function(d){return i instanceof d;});return(c)?undefined:i;});});this.setMatrix(n);},setExcludedControl:function(c){if(c){this.aExcludedControlClass.push(c);}},setReorderTilesCallback:function(f){if(typeof f==="function"){this.reorderElementsCallback=f;}}};var L=function(){};L.prototype={_initDeferred:jQuery.Deferred(),init:function(c){var t=function(){var s=this.getStyleInfo(this.container);if(s.tileWidth>0){this.isInited=true;this.reRenderGroupsLayout();this.layoutEngine=new a({thisLayout:this});this._initDeferred.resolve();return;}setTimeout(t,100);}.bind(this);this.cfg=c||this.cfg;this.cfg.animationsEnabled=!!this.cfg.animationsEnabled;this.minTilesinRow=2;this.container=this.cfg.container||document.getElementById('dashboardGroups');this.oTabBarItemClickTimer=new Date();this.bTabBarModeActive=false;this.bOnTabBarElement=false;t();sap.ui.getCore().getEventBus().subscribe('launchpad','tabBarChange',this._onTabBarChange,this);return this.getInitPromise();},setOnTabBarElement:function(o){this.bOnTabBarElement=o;},isOnTabBarElement:function(){return this.bOnTabBarElement;},_onTabBarChange:function(c,e,d){if(d==="tabs"){this.bTabBarModeActive=true;}else{this.bTabBarModeActive=false;}},tabBarTileDropped:function(){if(this.oTabBarItemClickTimer){clearTimeout(this.oTabBarItemClickTimer);}},getInitPromise:function(){return this._initDeferred.promise();},isAnimationsEnabled:function(){return this.cfg.animationsEnabled;},getLayoutEngine:function(){return this.layoutEngine;},getStyleInfo:function(c){var t=document.createElement('div'),d=c.getAttribute('id');c=d?document.getElementById(d):c;t.className="sapUshellTile";var s=C.last("/core/home/sizeBehavior");if(s=="Small"){t.classList.add("sapUshellSmall");}t.setAttribute('style','position: absolute; visibility: hidden;');c.appendChild(t);var e=window.getComputedStyle(t);var i={"tileMarginHeight":parseFloat(e.marginBottom,10)+parseFloat(e.marginTop,10),"tileMarginWidth":parseFloat(e.marginLeft,10)+parseFloat(e.marginRight,10),"tileWidth":t.offsetWidth,"tileHeight":t.offsetHeight,"containerWidth":c.offsetWidth-(c.style.marginLeft?parseFloat(c.style.marginLeft,10):0)};t.parentNode.removeChild(t);return i;},getGroups:function(){return this.cfg.getGroups();},getAllGroups:function(){return this.cfg.getAllGroups?this.cfg.getAllGroups():[];},isTabBarActive:function(){return this.cfg.isTabBarActive?this.cfg.isTabBarActive():false;},getTilesInRow:function(i){return this.tilesInRow;},setTilesInRow:function(t){this.tilesInRow=t;},checkPlaceForTile:function(t,m,c,l,i){if(typeof m[c.y]==="undefined"){m.push(new Array(m[0].length));}if(typeof m[c.y+1]==="undefined"){m.push(new Array(m[0].length));}if(typeof m[c.y][c.x]!=="undefined"){return false;}var p=jQuery.extend({},c);if(i||(t.getLong&&!t.getLong())){return[p];}var d=[p];if(t.getLong&&t.getLong()){if((c.x+1)>=m[0].length||(typeof m[p.y][p.x+1]!=="undefined")){return false;}d.push({y:p.y,x:p.x+1});}return d;},placeTile:function(t,m,c){for(var i=0;i<c.length;i++){m[c[i].y][c[i].x]=t;}},getTilePositionInMatrix:function(t,m){for(var r=0;r<m.length;r++){for(var c=0;c<m[0].length;c++){if(m[r][c]==t){return{row:r,col:c};}}}return false;},fillRowsInLine:function(m,t,r,i){if(!t.length){return 0;}var c;for(var j=0;j<m[0].length&&t.length;j++){c=this.checkPlaceForTile(t[0],m,{x:j,y:r},i);if(c){this.placeTile(t[0],m,c);t.shift();}}},organizeGroup:function(t,I){var c=t.slice(0);var d=[];var e=0;d.push(new Array(I?Math.floor(this.tilesInRow/2):this.tilesInRow));while(c.length){this.fillRowsInLine(d,c,e,I);e++;}if(this.rightToLeft){for(var i=0;i<d.length;i++){d[i].reverse();}}d=this.cleanRows(d);return d;},cleanRows:function(t){var d=false;for(var r=t.length-1;r>0&&!d;r--){for(var c=0;c<t[r].length&&!d;c++){if(typeof t[r][c]==="object"){d=true;}}if(!d){t.pop();}}return t;},setGroupsLayout:function(g,m){var i;if(this.cfg.isLockedGroupsCompactLayoutEnabled&&g.getIsGroupLocked()&&m.length>0){var p=g.getDomRef().parentElement;if(this.cfg.isLockedGroupsCompactLayoutEnabled()){var t=m[0].length;if(this.rightToLeft){for(i=m[0].length-1;i>=0;i--){if(!m[0][i]){t=(m[0].length-1)-i;break;}}}else{for(i=0;i<m[0].length;i++){if(!m[0][i]){t=i;break;}}}var c=t>0?t*(this.styleInfo.tileWidth+this.styleInfo.tileMarginWidth)+this.styleInfo.tileMarginWidth:0;g.getDomRef().style.width="auto";p.style.width=c+"px";p.style.display="inline-block";}else{g.getDomRef().style.width="";p.style.width="";p.style.display="";}}},calcTilesInRow:function(c,t,d){var e=Math.floor(c/(t+d));e=(e<this.minTilesinRow?this.minTilesinRow:e);return e;},getGroupTiles:function(g){var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return t;},reRenderGroupsLayout:function(g){if(!this.isInited){return;}var s=this.getStyleInfo(this.container);if(!s.tileWidth){return;}this.styleInfo=s;this.tilesInRow=this.calcTilesInRow(s.containerWidth,s.tileWidth,s.tileMarginWidth);g=g||this.getGroups();for(var i=0;i<g.length;i++){if(g[i].getDomRef&&!g[i].getDomRef()){continue;}var t=this.getGroupTiles(g[i]);var c=this.organizeGroup(t);this.setGroupsLayout(g[i],c);}},initDragMode:function(){this.initGroupDragMode(this.layoutEngine.currentGroup);},endDragMode:function(){var g=this.getGroups();for(var i=0;i<g.length;i++){var c=g[i].$();if(!c.hasClass("sapUshellInDragMode")){continue;}c.removeClass("sapUshellInDragMode sapUshellEnableTransition");var t=this.getGroupTiles(g[i]);for(var j=0;j<t.length;j++){t[j].$().removeAttr("style");}c.find('.sapUshellInner').removeAttr("style");}},initGroupDragMode:function(g){if(g.$().hasClass("sapUshellInDragMode")){return;}var t=this.getGroupTiles(g);var c=this.organizeGroup(t);g.$().addClass("sapUshellInDragMode");this.renderLayoutGroup(g,c);setTimeout(function(){g.$().addClass("sapUshellEnableTransition");});},calcTranslate:function(r,c){this.styleInfo=this.getStyleInfo(this.container);var t=c*(this.styleInfo.tileWidth+this.styleInfo.tileMarginWidth);var d=r*(this.styleInfo.tileHeight+this.styleInfo.tileMarginHeight);if(this.layoutEngine.rightToLeft){t=-t;}return{x:t,y:d};},renderLayoutGroup:function(g,c){var h=c.length*(this.styleInfo.tileHeight+this.styleInfo.tileMarginHeight);g.$().find('.sapUshellInner').height(h);var d;if(!g.$().hasClass("sapUshellInDragMode")){return;}for(var i=0;i<c.length;i++){for(var j=0;j<c[i].length;j++){if(d==c[i][j]){continue;}else{d=c[i][j];}if(typeof d=="undefined"){break;}var t=this.calcTranslate(i,j);var e="translate("+t.x+"px,"+t.y+"px) translatez(0)";c[i][j].getDomRef().style.transform=e;}}}};var b=new L();return b;},true);
sap.ui.predefine('sap/ushell/System',[],function(){"use strict";var S=function(d){this._oData=d;};
S.prototype.getAlias=function(){return this._oData.alias;};
S.prototype.getBaseUrl=function(){return this._oData.baseUrl;};
S.prototype.getClient=function(){return this._oData.client;};
S.prototype.getName=function(){return this._oData.system;};
S.prototype.getPlatform=function(){return this._oData.platform;};
S.prototype.adjustUrl=function(u){if(u.indexOf('/')!==0||u==='/'){throw new Error("Invalid URL: "+u);}if(this._oData.baseUrl===";o="){if(this._oData.alias){u=u+";o="+this._oData.alias;}}else if(this._oData.baseUrl){u=this._oData.baseUrl.replace(/\/$/,"")+u;}if(this._oData.client){u+=(u.indexOf("?")>=0?"&":"?")+"sap-client="+this._oData.client;}return u;};
S.prototype.toString=function(){return JSON.stringify(this._oData);};
return S;},true);
sap.ui.predefine('sap/ushell/TechnicalParameters',["sap/ushell/utils/type"],function(t){"use strict";var T={"sap-fiori-id":{getValue:function(p,A,o,s){return new Promise(function(S,f){if(s==="UI5"){S(g(p,A)||a('/sap.fiori/registrationIds',A));}else{S(b(p,o));}});}},"sap-ui-fl-max-layer":{getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-control-variant-id":{getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-app-id-hint":{getValue:d},"sap-ach":{getValue:function(p,A,o,s){return new Promise(function(S,f){if(s==="UI5"){S(g(p,A)||a('/sap.app/ach',A));}else{S(b(p,o));}});}}};
function d(p){return Promise.reject(p+" is reserved for shell internal usage only");}
function g(p,A){return A.getComponentData().technicalParameters[p];}
function a(p,A){var m=A.getMetadata()?A.getMetadata():undefined;var v=m.getManifestEntry(p);if(!t.isArray(v)){v=[v];}return v;}
function b(p,A){return A.getReservedParameters()[p];}
function c(p,A,o,s){if(!T[p]){return Promise.reject(p+" is not a known technical parameter");}return T[p].getValue(p,A,o,s);}
function e(){return Object.keys(T);}
function i(p){return T.hasOwnProperty(p);}
return{getParameterValue:c,getParameterNames:e,isTechnicalParameter:i};},false);
sap.ui.predefine('sap/ushell/Ui5ServiceFactory',["sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service"],function(S,a){"use strict";var A;
function s(i){A=i;}
function g(){return A;}
function b(m){return!!/^[^_].+/.test(m);}
function c(o){var p,P=[];for(p in o){P.push(p);}return P;}
function d(u,p,P,i){c(u).filter(b).filter(function(n){var v=u[n];p[n]=v;return typeof v==="function";}).forEach(function(F){p[F]=p[F].bind(u);if(i){f(P,p,F);}});}
function e(C){var G;if(typeof C==="undefined"){return true;}if(!jQuery.isPlainObject(C)){return false;}if(!C.scopeType){return false;}G=jQuery.sap.getObject("scopeObject.getId",undefined,C);if(typeof G!=="function"){return false;}return true;}
function f(p,P,l){var o=P[l];P[l]=function(){var i,m,A=g();if(!p||p.scopeObject.getId()!==A){jQuery.sap.log.warning("Call to "+l+" is not allowed","This may be caused by an app component other than the active '"+A+"' that tries to call the method","sap.ushell.Ui5ServiceFactory");return undefined;}m=new Array(arguments.length);for(i=0;i<m.length;++i){m[i]=arguments[i];}return o.apply(P,m);};}
function h(p,u){var P,i;P={};i=typeof p==="object";d(u,P,p,i);if(i&&p.scopeType==="component"&&p.scopeObject&&p.scopeObject.getId){s(p.scopeObject.getId());}return P;}
function j(u){return new Promise(function(r,R){try{var U=sap.ushell.Container.getService(u);r(U);}catch(E){R(E);}});}
function k(u){var U=S.extend("sap.ushell.ui5service."+u+"Factory",{createInstance:function(p){return new Promise(function(r,R){j(u).then(function(o){var i,l,m;if(!e(p)){jQuery.sap.log.error("Invalid context for "+u+" service interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.Ui5ServiceFactory");R("Invalid Context for "+u+" service");return;}l=h(p,o,u);m=a.extend("sap.ushell.ui5service."+u,{getInterface:function(){return l;}});i=new m(p);r(i);},function(G){R(G);});});}});return new U();}
return{createServiceFactory:k};});
sap.ui.predefine('sap/ushell/User',['sap/ui/thirdparty/URI'],function(U){"use strict";
function c(o){if(o===undefined){return undefined;}return jQuery.extend(true,{},o);}
function g(u){var o;if(u.host&&typeof u.host==="function"&&u.host()){o=u.host();if(typeof u.protocol==="function"&&u.protocol()){o=u.protocol()+"://"+o;}return o;}return"";}
function i(t){return t.indexOf("sap_")===0;}
var a=function(C){var b=[],B,s,o,n,e=new sap.ui.base.EventProvider();this.getEmail=function(){return C.email;};this.getFirstName=function(){return C.firstName;};this.getFullName=function(){return C.fullName;};this.getId=function(){return C.id;};this.getLanguage=function(){return C.language;};this.getLanguageBcp47=function(){return C.languageBcp47;};this.getLastName=function(){return C.lastName;};this.getImage=function(){return C.image;};this.setImage=function(u){C.image=u;e.fireEvent('onSetImage',u);};this.attachOnSetImage=function(f,d){e.attachEvent('onSetImage',f,d);};this.isJamActive=function(){return C.isJamActive===true;};this.isLanguagePersonalized=function(){return C.isLanguagePersonalized===true;};this.getTheme=function(t){if(t===a.prototype.constants.themeFormat.ORIGINAL_THEME){return o.originalTheme.theme;}if(t===a.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return o.theme+(o.locationPath?"@"+o.locationOrigin+o.locationPath:"");}if(t===a.prototype.constants.themeFormat.NWBC){if(i(o.theme)){return o.theme;}else{return this.getTheme(a.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}}return o.theme;};this.getThemeRoot=function(t){if(C.ranges&&C.ranges.theme&&C.ranges.theme[t]&&C.ranges.theme[t].themeRoot){return C.ranges.theme[t].themeRoot;}else{return"";}};this.setTheme=function(N){if(this.isSetThemePermitted()===false){var E="setTheme not permitted";jQuery.sap.log.error(E);throw new Error(E);}o=this._amendTheme({theme:N,root:this.getThemeRoot(N)},s);if(N!==n.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},n.originalTheme.theme,N);n=o;}if(o.suppliedRoot){sap.ui.getCore().applyTheme(o.theme,o.suppliedRoot+"/UI5/");}else if(o.path){sap.ui.getCore().applyTheme(o.theme,o.path+"/UI5/");}else{sap.ui.getCore().applyTheme(o.theme);}};this.setLanguage=function(N){if(N){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},C.language,N);C.language=N;}};this.getAccessibilityMode=function(){return C.accessibility;};this.setAccessibilityMode=function(A){if(this.isSetAccessibilityPermitted()===false){var E="setAccessibilityMode not permitted";jQuery.sap.log.error(E);throw new Error(E);}C.accessibility=A;};this.isSetAccessibilityPermitted=function(){return C.setAccessibilityPermitted;};this.isSetThemePermitted=function(){return C.setThemePermitted;};this.getContentDensity=function(){return C.contentDensity;};this.setContentDensity=function(d){if(this.isSetContentDensityPermitted()===false){var E="setContentDensity not permitted";jQuery.sap.log.error(E);throw new Error(E);}this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},C.contentDensity,d);C.contentDensity=d;};this.isSetContentDensityPermitted=function(){return C.setContentDensityPermitted;};this.getChangedProperties=function(){return jQuery.extend(true,[],b);};this.setChangedProperties=function(p,d,f){b.push({propertyName:p.propertyName,name:p.name,oldValue:d,newValue:f});};this.resetChangedProperties=function(){b=[];};this.getTrackUsageAnalytics=function(){return C.trackUsageAnalytics;};this.setTrackUsageAnalytics=function(t){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},C.trackUsageAnalytics,t);C.trackUsageAnalytics=t;};this.setImageConsent=function(d){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},C.isImageConsent,d);C.isImageConsent=d;};this.getImageConsent=function(){return C.isImageConsent;};s={locationPathUi5:(new U(jQuery.sap.getModulePath(""))).absoluteTo(document.location).pathname(),locationPathCustom:C.themeRoot||"",locationOrigin:g(new U(document.location))};if(!s.locationPathUi5){jQuery.sap.log.warning("User: Could not set UI5 location path");}if(!s.locationPathCustom){jQuery.sap.log.warning("User: Could not set location path for custom themes");}if(!s.locationOrigin){jQuery.sap.log.warning("User: Could not set front-end server location origin");}B=C.bootTheme||{theme:"",root:""};o=this._amendTheme(B,s);n=o;};
a.prototype._amendTheme=function(t,s){var T={},b,r;function d(R,s){var u,o,p={};u=new U(R);o=g(u);if(o){p.locationOrigin=o;p.locationPath=u.path();}else{p.locationOrigin=s.locationOrigin;p.locationPath=R;}return p;}if(!t||!t.theme||!s){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""};}T.originalTheme=c(t);if(T.originalTheme.theme.indexOf("@")>0){b=T.originalTheme.theme.split('@',2);T.theme=b[0];T.suppliedRoot=b[1];r=d(b[1],s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.theme=T.originalTheme.theme;if(T.originalTheme.root){T.suppliedRoot=T.originalTheme.root;r=d(T.originalTheme.root,s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.suppliedRoot="";if(i(T.theme)){T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathUi5;T.path="";return T;}T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathCustom;T.path=T.locationPath;return T;};
a.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"}};return a;},true);
sap.ui.predefine('sap/ushell/UserActivityLog',["sap/ushell/utils","sap/ushell/ui/launchpad/Tile","sap/ushell/EventHub","sap/base/Log"],function(u,T,E,L){"use strict";var U=function(){};U.prototype={_maxLoggedMessages:50,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroup","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","movetile","externalSearch","addBookmarkTile"],_observedGeneralActions:["openApp"],_observedEventHubEvents:["showCatalog"],_aDoableObjects:[],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(c){if(this._isActive){return;}this._isActive=true;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(b,i,d){e.subscribe("launchpad",b,t._handleAction,t);});e.subscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(b,i,d){e.subscribe(b,t._handleAction,t);});this._observedEventHubEvents.forEach(function(b,i,d){t._aDoableObjects.push(E.on(b).do(t._handleActionEventHub.bind(t)));});L.addLogListener(this);t._tileOntapOrigFunc=T.prototype.ontap;sap.ushell.ui.launchpad.Tile.prototype.ontap=t._tileOnTapDecorator(t._tileOntapOrigFunc);},deactivate:function(){if(!this._isActive){return;}this._isActive=false;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(b,i,c){e.unsubscribe("launchpad",b,t._handleAction,t);});e.unsubscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(b,i,c){e.unsubscribe(b,t._handleAction,t);});this._aDoableObjects.forEach(function(d){d.off();});L.removeLogListener(this);sap.ushell.ui.launchpad.Tile.prototype.ontap=this._tileOntapOrigFunc;},addMessage:function(t,m,b){if(this._isActive){this._addMessageInternal(t,m,b);}},getLog:function(){return this._getLoggingQueueFromStorage();},getMessageInfo:function(s){var r={userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog(),formFactor:u.getFormFactor()};return r;},getMessageInfoAsString:function(s){return JSON.stringify(this.getMessageInfo(s));},onLogEntry:function(d){if(d.level<=2){var e=d.message;if(typeof d.details!=="undefined"&&(d.details!=="")){e=e+", "+d.details;}this.addMessage(this.messageType.ERROR,e);}},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(o){var t=this,n,l,b,c,d,e;return function(f,g){var h=this.getMetadata().getName();if(h==="sap.ushell.ui.launchpad.PlusTile"){t.addMessage(t.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId());}else if(h=="sap.ushell.ui.launchpad.Tile"){n=hasher.getHash();if(n){var i=sap.ushell.Container.getService("URLParsing");var j=i.parseShellHash(n);n='#'+i.constructShellHash({target:{semanticObject:j.semanticObject,action:j.action}});}l=t._getLastNavActionFromStorage();l.time=new Date();l.navigationHash=n;l.tileDebugInfo=this.getDebugInfo();b=sap.ui.getCore().byId(this.getId());c=b.getModel();d=this.getBindingContext();e=d.getPath();l.tileTitle=d.getModel().getProperty(e).title;t._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));t.addMessage(t.messageType.ACTION,"Click on Tile: "+c.getData().title+" Tile debugInfo: "+this.getDebugInfo());}o.apply(this,arguments);};},_addMessageInternal:function(t,m,b){var l=this._getLoggingQueueFromStorage(),c={type:null},p;for(p in this.messageType){if(t===this.messageType[p]){c.type=p;break;}}if(c.type===null){return;}jQuery.extend(c,{messageID:b,messageText:m,time:new Date(),toString:function(){var d=[this.type,this.time];if(typeof this.messageID!=="undefined"){d.push(this.messageID);}d.push(this.messageText);return d.join(" :: ");}});l.push(c);if(l.length>this._maxLoggedMessages){l.shift();}this._putInSessionStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(l));},_handleActionEventHub:function(e){this._handleAction("",e.sId,e.oData);},_handleAction:function(c,e,d){var m;switch(e){case'deleteTile':m="Delete Tile "+(d.tileId||"");break;case'moveTile':m="Move Tile "+(d.sTileId||"")+" to Group "+(d.toGroupId||"");break;case'createGroup':m="Create Group";break;case'changeGroupTitle':m="Change Group Title of "+(d.groupId||"")+" to "+(d.newTitle||"");break;case'deleteGroup':m="Delete Group "+(d.groupId||"");break;case'addTile':var t=d.catalogTileContext.oModel.oData,s=d.catalogTileContext.sPath,b=this._findInModel(s,t),f=b.id,g=d.groupContext.getObject(),h=g.groupId;m="Add Tile "+(f||"")+" to Group "+(h||"");break;case'moveGroup':m="Move Group from index "+(d.fromIndex||"")+" to index "+(d.toIndex||"");break;case'appOpened':m="Open application "+d.action;var l=this._getLastNavActionFromStorage();l.applicationInformation={};["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(p){l.applicationInformation[p]=d[p];});if(!this._hashSegmentsEqual(l.navigationHash,d.sShellHash)){l.tileDebugInfo="";}l.navigationHash=d.sShellHash;this._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));break;case'addBookmarkTile':m="Add Bookmark "+(d.title||"")+" "+(d.subtitle||"")+" for URL: "+(d.url||"");break;case'showCatalog':m="Show Catalog";break;default:break;}this.addMessage(this.messageType.ACTION,m);},_findInModel:function(p,m){var b,c=m,i,d;try{b=p.split("/");for(i=0;i<b.length;i=i+1){if(d!==b[i]){continue;}c=c[d];}}catch(e){return undefined;}return c;},_getUserDetails:function(s){var b=sap.ushell.Container.getUser();return{fullName:b.getFullName()||"",userId:b.getId()||"",eMail:b.getEmail()||"",Language:b.getLanguage()||""};},_getShellState:function(){var v=sap.ui.getCore().byId("viewPortContainer"),m,r="";if(v!==undefined){m=v.getModel();r=m.getProperty("/currentState/stateName");}return r;},_getLoggingQueueFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.loggingQueue");var q=[];if(l){try{q=JSON.parse(l);}catch(e){}}return q;},_getLastNavActionFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return(l?JSON.parse(l):{});},_hashSegmentsEqual:function(b,c){if((!b)||(!c)){return false;}return(this._getHashSegment(b)==this._getHashSegment(c))?true:false;},_getHashSegment:function(b){var i=b.indexOf("~"),c;if(i>-1){return b.substring(0,i);}c=b.indexOf("?");if(c>-1){return b.substring(0,c);}return b;},_getFromSessionStorage:function(k){var r=null;try{r=sessionStorage.getItem(k);}catch(e){}return r;},_putInSessionStorage:function(k,v){try{sessionStorage.setItem(k,v);}catch(e){}}};var a=new U();return a;},true);
sap.ui.predefine('sap/ushell/_ApplicationType/guiResolution',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping"],function(U,u,a,S,c,p){"use strict";
function r(O,K){K.forEach(function(s){delete O[s];});}
function i(P,I){return I&&I.signature&&I.signature&&I.signature.parameters&&I.signature.parameters[P]&&I.signature.parameters[P].required===true;}
function g(E,I){var y=i("DYNP_OKCODE",I)||i("DYNP_NO1ST",I);var B=[];if(y){return[];}var z=b(E);function A(s){return s.toUpperCase();}var N=Object.keys(z).map(A).sort();function C(s,D){if(s.length!==D.length){return false;}return s.every(function(F,G){return s[G]==D[G];});}if(C(["DYNP_NO1ST","DYNP_OKCODE"],N)||C(["DYNP_OKCODE"],N)||C(["DYNP_NO1ST"],N)){B=Object.keys(z);}return B;}
function b(P){var B=c.filterObject(P,d);return B;}
function d(N,V){var s;if(arguments.length===1){s=N.split(/[=](.+)?/);if(s.length>1){return d.apply(null,s);}}return!(N.indexOf("sap-")===0||N.charAt(0)==="~");}
function e(M,B,E){var I=M.inbound;var R=I&&I.resolutionResult;if(!(!I||!R||!(R["sap.gui"])||!(R.applicationType==="TR"))){return l(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")===-1))){return n(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")>=0))){return m(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")===-1))){return o(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")!==-1))){return k(M,B,E);}throw new Error("Cannot generate TR resolution result");}
function f(T,s,y,E){var z,A;z="/gui/sap/its/webgui?%7etransaction="+T+"&%7enosplash=1";A=new U(z);return S.spliceSapSystemIntoURI(A,S.LOCAL_SYSTEM_ALIAS,s,y,"NATIVEWEBGUI",S.SYSTEM_ALIAS_SEMANTICS.apply,E);}
function h(Q,P,s,y){var I,z="P_OBJECT"+y,M=132;var A=a.getURLParsing().privparamsToString(P,"%25","%21");if(!A){return Q;}var B="";j("P_OBJECT",Q,s,y,function(E){var F=E.replace(z,"");B=decodeURIComponent(F);if(B.length>0){B=B+"%25";}return z;});A=B+A;var C={pObjX:"",pObject:""};A.match(new RegExp(".{1,"+M+"}","g")).map(function(E){return encodeURIComponent(E);}).forEach(function(E,G){var F="P_OBJECT";var H="pObject";if(G>0){F="P_OBJ"+G;H="pObjX";}var J=C[H].length===0?"":s;C[H]=C[H]+J+F+y+E;});I=[C.pObjX,C.pObject].filter(function(E){return E.length>0;}).join(s);var D=j("P_OBJECT",Q,s,y,function(F){return I;});if(D.found){return D.query;}return Q+(Q.length===0?"":s)+I;}
function j(T,Q,s,y,A){var F=false,P=T+y;var z=Q.split(s).map(function(B){if(B.indexOf(P)!==0){return B;}F=true;return A(B);}).filter(function(B){return typeof B!=="undefined";}).join(s);return{found:F,query:z};}
function k(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,R={};var W=new U(B);var y=jQuery.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"NATIVEWEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();var F=P.split("&").map(function(Q){var G;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){G=h(Q,y,"%3b","%3d");return G;}return Q;}).join("&");W.search(F);["additionalInformation","applicationDependencies"].forEach(function(G){if(I.resolutionResult.hasOwnProperty(G)){R[G]=I.resolutionResult[G];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";C(R);});});}
function l(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,y=M.mappedIntentParamsPlusSimpleDefaults||{};var z=s.systemAlias;if(y["sap-system"]){z=y["sap-system"][0];}var A;if(y["sap-system-src"]){A=y["sap-system-src"][0];}return new Promise(function(R,C){f(I.resolutionResult["sap.gui"].transaction,z,A,E).done(function(D){p.mapParameterNamesAndRemoveObjects(M);var F=q(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,D);if(F&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){F["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}F["sap-system"]=z;R(F);}).fail(C);});}
function m(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=jQuery.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();P=h(P,y,"&","=");W.search(P);["additionalInformation","applicationDependencies"].forEach(function(F){if(I.resolutionResult.hasOwnProperty(F)){R[F]=I.resolutionResult[F];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";C(R);});});}
function n(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=jQuery.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}var C=g(y,I||{});r(y,C);return new Promise(function(D,F){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(F).done(function(W){var G=a.getURLParsing().paramsToString(y);var P=W.search();if(G){P=P+((P.indexOf("?")<0)?"?":"&")+G;}W.search(P);["additionalInformation","applicationDependencies"].forEach(function(H){if(I.resolutionResult.hasOwnProperty(H)){R[H]=I.resolutionResult[H];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";D(R);});});}
function o(M,B,E){var I=M.inbound,R=I&&I.resolutionResult,F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true,"sap-system-src":true};var W=new U(B);var s=jQuery.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var y=s["sap-system"]&&s["sap-system"][0];var z=s["sap-system-src"]&&s["sap-system-src"][0];Object.keys(s).forEach(function(P){if(F[P.toLowerCase()]){delete s[P];}});return new Promise(function(A,C){S.spliceSapSystemIntoURI(W,R.systemAlias,y,z,"NATIVEWEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(C).done(function(W){var R=q(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,W);A(R);});});}
function q(I,M,W){var F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var R={};var E=jQuery.extend(true,{},M);var s=E["sap-system"]&&E["sap-system"][0];var y=E["sap-system-src"]&&E["sap-system-src"][0];R["sap-system"]=s;if(typeof y==="string"){R["sap-system-src"]=y;}Object.keys(E).forEach(function(D){if(F[D.toLowerCase()]){delete E[D];}});var z=g(E,I||{});r(E,z);var A=t(E);r(E,Object.keys(A));var P=W.search();var B=P.split("&").map(function(Q){var N;if(!d(Q)){if(Q.indexOf("=")>=0){N=Q.split("=");if(!A.hasOwnProperty(N[0])){A[N[0]]=N[1];}}else{jQuery.sap.log.error("Found no '=' separator of Webgui non-business parameter. Parameter will be skipped.","'"+Q+"'","sap.ushell.services.ClientSideTargetResolution");}return undefined;}var D;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){D=w(Q,E,"%3b","%3d");return D;}return Q;}).filter(function(D){return typeof D!=="undefined";}).join("&");var C=a.getURLParsing().paramsToString(A);B=[B,C.replace("~","%7e")].join("&");W.search(B);["additionalInformation","applicationDependencies","sap.platform.runtime"].forEach(function(D){if(I.resolutionResult.hasOwnProperty(D)){R[D]=I.resolutionResult[D];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";return R;}
function t(P){var N;N=c.filterObject(P,function(K,V){return!d(K,V);});return N;}
function v(T){var s="^(.+?)(%20|(%20)(.+))?$",y=new RegExp(s,"i"),z,P={hasParameters:null,transactionParamName:"",transactionCode:"",parameters:[]};var A=T.split("=");if(A.length>2){return{"error":"Found more than one assignment ('=') in the transaction query parameter","details":"Only one '=' sign is expected in "+T};}if(A.length<2||typeof A[1]==="undefined"||A[1].length===0){return{"error":"The transaction query parameter must specify at least the transaction name","details":"Got "+T+" instead."};}P.transactionParamName=A[0];z=A[1];var M=z.match(y);if(!M){return{"error":"Cannot parse ~transaction query parameter value.","details":z+" should match /"+s+"/"};}P.transactionCode=M[1];if(M[2]&&M[2]!=="%20"){var B=M[4]||"";B.split("%3b").forEach(function(N){var C=N.split("%3d"),D=C[0];if(D&&typeof D==="string"&&D.length>0){P.parameters.push({name:D,value:C[1]});}});}P.hasParameters=false;if(P.parameters.length>0){P.hasParameters=true;P.transactionCode=P.transactionCode.replace(/^[*]/,"");}return P;}
function w(T,P){var s=v(T);if(s.error){jQuery.sap.log.error(s.error,s.details,"sap.ushell.services.ClientSideTargetResolution");return T;}var y=s.parameters.map(function(C){return C.name.toUpperCase()+"%3d"+C.value;});var D,A=true;if(P.hasOwnProperty("DYNP_SKIP_SEL_SCREEN")){D=P["DYNP_SKIP_SEL_SCREEN"];delete P["DYNP_SKIP_SEL_SCREEN"];if(D[0]===""||D[0]===" "||D[0]==="0"||D[0]===0||(D[0]&&D[0].toLowerCase()==="false")){A=false;}}var z={};Object.keys(P).forEach(function(K){z[K.toUpperCase()]=P[K];});var B=a.getURLParsing().privparamsToString(z,"%3b","%3d");if(B){y.push(B);}var H=y.length>0;return s.transactionParamName+"="+(H&&A?"*":"")+s.transactionCode+(H?"%20":"")+y.join("%3b");}
function x(I,M,E){return new Promise(function(R,s){var y;if(I.params["sap-system-src"]){y=I.params["sap-system-src"][0];}f(I.params["sap-ui2-tcode"][0],I.params["sap-system"][0],y,E).done(function(z){delete M.intentParamsPlusAllDefaults["sap-ui2-tcode"];p.mapParameterNamesAndRemoveObjects(M);var A=q(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,z);if(A&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){A["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}A["sap-system"]=I.params["sap-system"][0];A.text=I.params["sap-ui2-tcode"][0];R(A);}).fail(function(z){s(z);});});}
return{generateTRResolutionResult:e,resolveEasyAccessMenuIntentWebgui:x,injectEffectiveParametersIntoWebguiQueryParam:w,injectEffectiveParametersIntoWebguiPobjectParam:h,amendGuiParam:j,parseWebguiTransactionQueryParam:v,getWebguiNonBusinessParameters:t,getWebguiBusinessParameters:b,isWebguiBusinessParameter:d,buildNativeWebGuiURI:f,constructFullWebguiResolutionResult:l};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/systemAlias',["sap/ui/thirdparty/URI","sap/ushell/utils"],function(U,u){"use strict";var S="";var O={apply:"apply",applied:"applied"};
function i(o){return(o.protocol()||"").length>0;}
function r(k,l,E){var m=typeof l==="string";var n=[k];if(m){n.unshift(l);}var K=u.generateLocalStorageKey("sap-system-data",n);var L=u.getLocalStorage();var o=L.getItem(K);var p={};if(o){try{p=JSON.parse(o);}catch(q){return new jQuery.Deferred().reject("Cannot parse system data from local storage at key '"+K+"'. Data: "+o);}return new jQuery.Deferred().resolve(p).promise();}else if(m){return new jQuery.Deferred().reject("Cannot find data for system '"+k+"' in local storage using key '"+K+"'");}if(!E){return new jQuery.Deferred().reject("fallback: the adapter does not implement resolveSystemAlias").promise();}return E(k);}
function a(k,l,o,m,E){var n=o,D=new jQuery.Deferred();r(k,l,E).fail(function(p){D.reject(p);}).done(function(R){var V=v(R);if(!V.isValid){g(V);D.reject("Invalid system alias definition");return D;}var p=f(R,new U(window.location.toString()).protocol()),q=R[p],Q,L,t;if(k===S&&q.host===""&&(q.port===0||q.port==="")){p="";}n.protocol(p);n.hostname(q.host);n.port(q.port);j(n,m,q.pathPrefix,E).fail(function(w){D.reject(w);}).done(function(n){Q=n.query();if(typeof R.client==="string"&&R.client!==""){Q=Q+(Q.length>0?"&":"")+"sap-client="+R.client;}if(typeof R.language==="string"&&R.language!==""){L=R.language;}else{t=sap.ushell.Container.getUser();if(!t){jQuery.sap.log.error("Cannot retieve the User object via sap.ushell.Container while determining sap-language","will default to 'en' language","sap.ushell.services.ClientSideTargetResolution");L="en";}else{L=t.getLanguage();}}Q=Q+(Q.length>0?"&":"")+"sap-language="+L;n.query(Q);if(R.hasOwnProperty("rfc")&&m==="NATIVEWEBGUI"){var w=c(R.rfc,q.host,n);var P=n.path()+";"+w;n.path(P);o._parts.path=P;}D.resolve(n);});});return D.promise();}
function s(o,k,l,m,n,p,E){var D=new jQuery.Deferred();if(p!==O.apply&&p!==O.applied){throw new Error("Invalid system alias semantic was provided: '"+p+"'");}if(p===O.applied&&((typeof l==="undefined"||k===l))){return D.resolve(o).promise();}if(p===O.apply&&typeof k==="undefined"&&typeof l==="undefined"){return D.resolve(o).promise();}if(n==="URL"&&p==O.applied){return b(o,k,l,m,E);}(new Promise(function(R){if(p===O.apply){R({targetUri:o,alias:l?l:k,sapSystemSrc:l?m:undefined});return;}d(o,k,undefined,n,E).fail(function(q){D.reject(q);}).done(function(q){R({targetUri:q,alias:l});});})).then(function(A){a(A.alias,A.sapSystemSrc,A.targetUri,n,E).fail(function(q){D.reject(q);}).done(function(I){D.resolve(I);});});return D.promise();}
function b(o,k,l,m,E){var D=new jQuery.Deferred();if(k===S||typeof k==="undefined"){if(i(o)){return D.resolve(o);}a(l,m,o,"URL",E).fail(function(n){D.reject(n);}).done(function(n){D.resolve(n);});return D.promise();}r(k,m,E).fail(function(n){D.reject(n);}).done(function(R){var n=f(R,new U(window.location.toString()).protocol()),p=R[n],q;if((o.protocol()||"").toLowerCase()===n&&(o.hostname()||"")===p.host&&(o.path().indexOf(p.pathPrefix)===0)){o.protocol("");o.hostname("");q=o.path().replace(p.pathPrefix,"");o.path(q);h(o,["sap-language","sap-client"]);a(l,m,o,"URL",E).fail(function(t){D.reject(t);}).done(function(t){D.resolve(t);});}else{D.resolve(o);}});return D.promise();}
function c(k,l){var R,m,I,t,n;I=!!k.systemId;if(I){t=[k.systemId&&("~sysid="+k.systemId),k.loginGroup&&("~loginGroup="+k.loginGroup),k.sncNameR3&&("~messageServer="+encodeURIComponent(k.sncNameR3)),k.sncNameR3&&("~sncNameR3="+encodeURIComponent(k.sncNameR3)),k.sncQoPR3&&("~sncQoPR3="+k.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}else{n=(k.host||"");m=n.toLowerCase()===l.toLowerCase();R=/^[/][HGMR][/].*/.test(n);if(n.length>0&&!m&&!R){jQuery.sap.log.error("Invalid connect string provided in 'host' field of system alias","Data for rfc destination provided are: "+JSON.stringify(k,null,3),"sap.ushell.services.ClientSideTargetResolution");}t=[n&&!R&&!m&&("~rfcHostName="+n),R&&("~connectString="+encodeURIComponent(n)),k.service&&("~service="+k.service),k.sncNameR3&&("~sncNameR3="+encodeURIComponent(k.sncNameR3)),k.sncQoPR3&&("~sncQoPR3="+k.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}return t.join(";").replace(/(%[A-F0-9]{2})/g,function(E){return E.toLowerCase();});}
function d(o,k,l,m,E){var D=new jQuery.Deferred();if(typeof k==="undefined"){e(o,k,m,undefined,E).fail(function(n){D.reject(n);}).done(function(n){D.resolve(n);});return D.promise();}r(k,l,E).fail(function(n){D.reject(n);}).done(function(R){e(o,k,m,R,E).fail(function(n){D.reject(n);}).done(function(n){D.resolve(n);});});return D.promise();}
function e(o,k,l,R,E){var m,n,t,p,D=new jQuery.Deferred(),P=new jQuery.Deferred();o.protocol("");o.hostname("");o.port("");h(o,["sap-client","sap-language"]);if(!jQuery.isPlainObject(R)||typeof k!=="string"){return D.resolve(o).promise();}n=f(R,new U(window.location.toString()).protocol());m=R[n];p=(typeof m.pathPrefix==="string")&&m.pathPrefix;if(p!==""){P.resolve(p);}else{r("",undefined,E).fail(function(q){D.reject(q);}).done(function(q){var w=q[n];P.resolve(w.pathPrefix);});}P.fail(function(q){D.reject(q);}).done(function(p){if(p&&p.length>0){t=o.path();t=t.replace(p,"");if(t.indexOf("/")!==0){t="/"+t;}o.path(t);}if(l==="NATIVEWEBGUI"&&R.hasOwnProperty("rfc")){t=o.path();t=t.split(";").filter(function(q){return q.indexOf("~sysid=")!==0&&q.indexOf("~service=")!==0&&q.indexOf("~loginGroup=")!==0&&q.indexOf("~messageServer=")!==0&&q.indexOf("~sncNameR3=")!==0&&q.indexOf("~sncQoPR3=")!==0;}).join(";");o.path(t);}D.resolve(o);});return D.promise();}
function f(o,B){if(o.hasOwnProperty("https")){return"https";}if(o.hasOwnProperty("http")){return"http";}jQuery.sap.log.error("Cannot select which system alias to pick between http/https","make sure they are provided in the given system alias collection","sap.ushell.services.ClientSideTargetResolution");return undefined;}
function g(V){jQuery.sap.log.error("Invalid system alias definition: "+V.debug,"ERRORS:"+V.errors.map(function(E){return"\n - "+E;}).join(""),"sap.ushell.ApplicationType");}
function v(R){function k(F){var E=[];if(typeof F.host!=="string"){E.push("host field must be a string");}if(typeof F.port!=="number"&&typeof F.port!=="string"){E.push("port field must be a number or a string");}if(typeof F.pathPrefix!=="string"){E.push("pathPrefix field must be a string");}return E;}var E=[],H=R.hasOwnProperty("https"),l=R.hasOwnProperty("http");if(!l&&!H){E.push("at least one of 'http' or 'https' fields must be defined");}if(H){k(R.https).forEach(function(m){E.push("https>"+m);});}if(l){k(R.http).forEach(function(m){E.push("http>"+m);});}if(E.length>0){return{isValid:false,errors:E,debug:JSON.stringify(R,null,3)};}return{isValid:true};}
function h(o,p){var B={},t;p.forEach(function(P){B[P]=true;});t=o.query();t=t.split("&").filter(function(P){var k=(P.split("=")[0]||"").toLowerCase();return!B.hasOwnProperty(k);}).join("&");o.query(t);}
function j(o,k,p,E){var D=new jQuery.Deferred(),t;if(k==="URL"&&p.length===0){return D.resolve(o).promise();}function l(P){var R=P+o.path();o.path(R.replace(/\/+/g,"/"));D.resolve(o);}r("",undefined,E).fail(function(m){D.reject(m);}).done(function(R){var m=f(R,new U(window.location.toString()).protocol());var L=R[m].pathPrefix;var P=p===L;if(p.length>0&&!P){if((k==="WDA"||k==="WEBGUI")&&o.path().indexOf("~canvas")>=0){t=o.path();t="/~canvas"+t.split("~canvas")[1];o.path(t);}}if(p.length===0){l(L);}else{l(p);}});return D.promise();}
return{LOCAL_SYSTEM_ALIAS:S,SYSTEM_ALIAS_SEMANTICS:O,spliceSapSystemIntoURI:s,isAbsoluteURI:i,stripURI:d,selectSystemAliasDataName:f,constructNativeWebguiParameters:c};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/utils',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ushell/_ApplicationType/systemAlias"],function(U,u,s){"use strict";var a;
function g(){if(!a){a=sap.ushell.Container.getService("URLParsing");}return a;}
function b(o,S,e){if(!e||e===s.SYSTEM_ALIAS_SEMANTICS.applied){return s.isAbsoluteURI(o)&&!S;}if(e===s.SYSTEM_ALIAS_SEMANTICS.apply){return s.isAbsoluteURI(o);}throw new Error("Invalid system alias semantics: '"+e+"'");}
function c(p,e){var S,f;if(p){var h=e.match(/#.*/);if(h){f=h;S=e.replace(h,"");}else{S=e;f="";}e=S+((e.indexOf("?")<0)?"?":"&")+p+f;}return e;}
function d(p,e){var a=g();var f=e.match(/#.*/);var h=f&&f[0];if(!h){var P=a.paramsToString(p);return c(P,e);}var i=a.parseShellHash(h);Object.keys(p).forEach(function(m){var n=p[m];i.params[m]=[n];});var j=Object.keys(i.params).reduce(function(o,K){var v=i.params[K];var V=v.map(function(m){return encodeURIComponent(m);});o[encodeURIComponent(K)]=V;return o;},{});i.params=j;var k=e.replace(h,"");var l=a.constructShellHash(i);return k+"#"+l;}
return{getURLParsing:g,appendParametersToUrl:c,appendParametersToIntentURL:d,absoluteUrlDefinedByUser:b};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/wdaResolution',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias"],function(U,u,a,s){"use strict";
function c(p,m){return new Promise(function(R,j){var E=jQuery.extend(true,{},p);if(m.length>0){E["sap-ushell-defaultedParameterNames"]=[JSON.stringify(m)];}delete E["sap-system"];sap.ushell.Container.getService("ShellNavigation").compactParams(E,["sap-xapp-state","sap-ushell-defaultedParameterNames","sap-intent-params"],undefined,true).fail(function(k){j(k);}).done(function(o){var k=a.getURLParsing().paramsToString(o);R(k);});});}
function b(o,j){var p=o.search();if(j){p=p+((p.indexOf("?")<0)?"?":"&")+j;}return o.search(p).toString();}
function d(A,C,I,o,E){var S,j,k,l,m,n=jQuery.extend(true,{},o);if(C){n["sap-wd-configId"]=C;}S=n["sap-system"][0];delete n["sap-system"];if(n.hasOwnProperty("sap-system-src")){j=n["sap-system-src"][0];delete n["sap-system-src"];}m=a.getURLParsing().paramsToString(n);if(I){k=e(A,m);}else{k=f(A,m);}l=new U(k);return s.spliceSapSystemIntoURI(l,s.LOCAL_SYSTEM_ALIAS,S,j,"WDA",s.SYSTEM_ALIAS_SEMANTICS.apply,E);}
function e(A,j){return"/ui2/nwbc/~canvas;window=app/wda/"+A+"/"+"?"+j;}
function f(n,j){var N=n.indexOf("/")!==0;if(N){n="sap/"+n;}return"/webdynpro/"+n+"?"+j;}
function g(I,F,S,j){var R={"sap-system":S,url:F,text:I.title,applicationType:"NWBC"};if(typeof j==="string"){R["sap-system-src"]=j;}["additionalInformation","applicationDependencies"].forEach(function(p){if(I.resolutionResult.hasOwnProperty(p)){R[p]=I.resolutionResult[p];}});return R;}
function h(m,B,E){var I=jQuery.sap.getObject("inbound.resolutionResult",undefined,m),M=m.mappedIntentParamsPlusSimpleDefaults||{};var S=I.systemAlias;if(M["sap-system"]){S=M["sap-system"][0];}var j;if(M["sap-system-src"]){j=M["sap-system-src"][0];}var o={"sap-system":[S]};if(typeof j==="string"){o["sap-system-src"]=[j];}var C=I["sap.wda"].compatibilityMode;if(C==undefined){C=true;}return new Promise(function(R,k){d(I["sap.wda"].applicationId,I["sap.wda"].configId,C,o,E).done(function(w){var M=m.mappedIntentParamsPlusSimpleDefaults;c(M,m.mappedDefaultedParamNames).then(function(l){var F=b(w,l);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];var n=g(m.inbound,F,S,j);R(n);},function(l){k(l);});}).fail(function(l){k(l);});});}
function i(m,B,E){var I=m.inbound,o=I&&I.resolutionResult,M=m.mappedIntentParamsPlusSimpleDefaults;var w=new U(B);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];return Promise.all([(new Promise(function(D,R){s.spliceSapSystemIntoURI(w,o.systemAlias,S,j,"WDA",o.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(R).done(D);})),c(M,m.mappedDefaultedParamNames)]).then(function(R){var W=R[0];var k=R[1];var F=b(W,k);var l=g(I,F,S,j);return l;},function(k){return Promise.reject(k);});}
function r(I,m,E){var C,A,o,j=true;A=I.params["sap-ui2-wd-app-id"][0];C=(jQuery.sap.getObject("params.sap-ui2-wd-conf-id",undefined,I)||[])[0];o=Object.keys(I.params).reduce(function(R,p){if(p!=="sap-ui2-wd-app-id"&&p!=="sap-ui2-wd-conf-id"){R[p]=I.params[p];}return R;},{});return new Promise(function(R,k){d(A,C,j,o,E).done(function(l){var S=I.params.hasOwnProperty("sap-system-src")&&I.params["sap-system-src"][0];var n={url:l.toString(),applicationType:"NWBC",text:A,additionalInformation:"","sap-system":I.params["sap-system"][0]};if(typeof S==="string"){n["sap-system-src"]=S;}if(m&&m.inbound&&m.inbound.resolutionResult&&m.inbound.resolutionResult["sap.platform.runtime"]){n["sap.platform.runtime"]=m.inbound.resolutionResult["sap.platform.runtime"];}R(n);}).fail(function(l){k(l);});});}
return{resolveEasyAccessMenuIntentWDA:r,constructFullWDAResolutionResult:h,constructWDAResolutionResult:i};},false);
sap.ui.predefine('sap/ushell/_Config/utils',[],function(){"use strict";
function i(p,C){var e=[];var n=[];var o=C;var f=false;var P=p.split("/");P.shift();P.forEach(function(g){if(!f&&o.hasOwnProperty(g)){o=o[g];e.push(g);return;}f=true;n.push(g);});return{contractPart:"/"+e.join("/"),nonContractPart:n};}
function a(v){return v&&v.isA&&v.isA("sap.ui.model.Context");}
function w(C,p,o,v){var D=o;p.forEach(function(P,I){if(I===p.length-1){D[P]=v;return;}if(!D.hasOwnProperty(P)){throw new Error("Cannot find "+P+" inside "+C);}D=D[P];});}
function c(p){var P=function(e){return p+e;};if(typeof p==="object"){var S="/";P=function(e){var f=e.split(S);f.shift();var F=f.shift();return p[F]+(f.length>0?S+f.join(S):"");};}return P;}
function b(p,m,P){var f=c(P);var F=f(p);if(a(m)&&p.charAt(0)!=="/"){var r=m.getPath()+"/"+p;F=f(r);}return F;}
function s(f,C,m,p){m.setData=function(P,D){throw new Error("not yet implemented");};m.setProperty=function(P,D,M){var F=b(P,M,p);var I=i(F,C);if(I.nonContractPart.length===0){f.emit(I.contractPart,D);return;}var B=f.last(I.contractPart);w(I.contractPart,I.nonContractPart,B,D);f.emit(I.contractPart,B);};return m;}
function d(f,C,p,e){var m,S,g,P;if(typeof p==="string"){var h=p;P=h;var I=f.last(h);if(Object.prototype.toString.apply(I)!=="[object Object]"){throw new Error("Cannot bind on leaf property of Configuration: '"+h+"'");}m=new e(I);g=m.setData.bind(m);f.on(h).do(function(v){g(v);});return s(f,C,m,P);}if(Object.prototype.toString.apply(p)==="[object Object]"){var D=p;var M=Object.keys(D).reduce(function(M,k){var j=D[k];M[k]=f.last(j);f.on(j).do(function(k,v){S("/"+k,v);}.bind(null,k));return M;},{});m=new e(M);S=m.setProperty.bind(m);return s(f,C,m,D);}throw new Error("Invalid parameter provided to createModel. Must be an object or a string.");}
return{createModel:d};},false);
sap.ui.predefine('sap/ushell/adapters/AppVariantPersonalizationAdapter',["sap/ushell/services/_Personalization/constants","sap/ui/fl/Cache"],function(c,C){"use strict";
function r(s){var b="sap.ushell.personalization#";if(s.substring(0,b.length)!==b){jQuery.sap.log.error("Unexpected ContainerKey "+s);return s;}return s.substring(b.length,b.length+40);}
A.prototype._determineCategory=function(s){if(!s){return"U";}if(s.keyCategory&&s.keyCategory===c.keyCategory.FIXED_KEY&&s.writeFrequency&&s.writeFrequency===c.writeFrequency.LOW&&s.clientStorageAllowed&&s.clientStorageAllowed===true){return"P";}return"U";};
A.prototype.getMap=function(){return{category:this._category,service:this._oService,changedKeys:this._oChangedKeys,component:this._oComponent,deletedKeys:this._oDeletedKeys,container:this._aJSONContainer,scope:this._oScope,appName:this._sAppName,appVarId:this._sAppVarId,appVersion:this._sAppVersion,containerKey:this._sContainerKey};};
function A(s,S,o,b){this._oService=S;this._oScope=o;this._sAppVarId=o.appVarId;this._sAppVersion=o.appVersion;this._oComponent=o.component;this._sContainerKey=r(s);this._sAppName=b||"";this._category=this._determineCategory(o);this._aJSONContainer=[];this._oChangedKeys={};this._oDeletedKeys={};}
;
A.prototype._reset=function(){this._aJSONContainer=[];};
A.prototype.load=function(){var d=new jQuery.Deferred();C.getPersonalization(this._sAppVarId,this._sAppVersion,this._sContainerKey).then(function(o){this._aJSONContainer=o||[];d.resolve(o);}.bind(this)).catch(function(e){jQuery.sap.log.warning(e);this._reset();d.reject(e);}.bind(this));return d.promise();};
A.prototype.save=function(){var p=[];Object.keys(this._oChangedKeys).forEach(function(i){var I=this._oChangedKeys[i];p.push(C.setPersonalization(I));},this);Object.keys(this._oDeletedKeys).forEach(function(i){p.push(C.deletePersonalization(this._sAppVarId,this._sContainerKey,i));},this);var d=new jQuery.Deferred();Promise.all(p).then(function(R){this._oChangedKeys={};this._oDeletedKeys={};d.resolve();}.bind(this),function(e){d.reject(e);});return d.promise();};
A.prototype.del=function(){var d=new jQuery.Deferred();this.load().then(function(){var p=[];this._aJSONContainer.forEach(function(i){p.push(C.deletePersonalization(this._sAppVarId,this._sContainerKey,i.itemName));},this);Promise.all(p).then(function(R){d.resolve();},function(e){d.reject(e);});}.bind(this));return d.promise();};
A.prototype.getItemKeys=function(){var b=[];this._aJSONContainer.forEach(function(m){if(m.category==="V"){b.push("VARIANTSET#"+m.itemName);}else if(m.category==="I"){b.push("ITEM#"+m.itemName);}});return b;};
A.prototype.containsItem=function(i){return this.getItemKeys().indexOf(i)>=0?true:false;};
A.prototype._findItemIndex=function(I,s){var i;for(i=0;i<this._aJSONContainer.length;i=i+1){if(this._aJSONContainer[i].itemName===I&&this._aJSONContainer[i].category===s){return i;}}return undefined;};
A.prototype._locateItem=function(i){var b={index:-1};if(i.indexOf("ITEM#")===0){b.trueItemKey=i.substring("ITEM#".length,"ITEM#".length+40);b.category="I";}else if(i.indexOf("VARIANTSET#")===0){b.trueItemKey=i.substring("VARIANTSET#".length,"VARIANTSET#".length+40);b.category="V";}else if(i.indexOf("ADMIN#")!==0){jQuery.sap.log.error("Unknown itemkey prefix"+i);}b.index=this._findItemIndex(b.trueItemKey,b.category);return b;};
A.prototype.getItemValue=function(i){var I="",o,b=this._locateItem(i);if(b.index>=0){I=this._aJSONContainer[b.index].content;o=I;}return o;};
A.prototype.setItemValue=function(i,I){var o=this._locateItem(i);var b;if(o.index>=0){b=this._aJSONContainer[o.index];b.content=I;}else{b={"reference":this._sAppVarId,"content":I,"itemName":o.trueItemKey,"category":o.category,"containerKey":this._sContainerKey,"containerCategory":this._category};this._aJSONContainer.push(b);}this._oChangedKeys[o.trueItemKey]=b;delete this._oDeletedKeys[o.trueItemKey];};
A.prototype.delItem=function(i){var I=this._locateItem(i);if(I.index>=0){this._aJSONContainer.splice(I.index,1);this._oDeletedKeys[I.trueItemKey]=true;return;}};
var a=function(){};
a.prototype.getAdapterContainer=function(s,S,b){return new A(s,this,S,b);};
a.prototype.delAdapterContainer=function(s,S){return this.getAdapterContainer(s,S).del();};
return a;});
sap.ui.predefine('sap/ushell/adapters/cdm/ClientSideTargetResolutionAdapter',["sap/ushell/utils/utilsCdm","sap/ushell/services/CommonDataModel"],function(u){"use strict";var C=function(s,p,a){this._oAdapterConfig=a&&a.config;this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",client:"",language:""};this.getInbounds=function(){var t=this;if(!this._getInboundsDeferred){this._getInboundsDeferred=new jQuery.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(S){return S.getSite();}).then(function(S){var i=u.formatSite(S)||[];t._getInboundsDeferred.resolve(i);},function(e){t._getInboundsDeferred.reject(e);});}return this._getInboundsDeferred.promise();};this._createSIDMap=function(A){return Object.keys(A).sort().reduce(function(S,i){var c=A[i];var b="SID("+c["systemId"]+"."+c["client"]+")";if(!S.hasOwnProperty(b)&&c.hasOwnProperty("systemId")&&c.hasOwnProperty("client")){S[b]=i;}return S;},{})};this._getSystemAliases=function(){var t=this;if(!this.Deferred){this.Deferred=new jQuery.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(S){return S.getSite();}).then(function(S){var o=jQuery.extend(true,{},S.systemAliases||{});Object.keys(o).forEach(function(i){o[i].id=i;});t.Deferred.resolve(o);},function(e){t.Deferred.reject(e);});}return this.Deferred.promise();};this.resolveSystemAlias=function(S){var d=new jQuery.Deferred(),t=this;this._getSystemAliases().done(function(o){var m;var M;if(o.hasOwnProperty(S)){d.resolve(o[S]);return;}if(S===""){d.resolve(t._oLocalSystemAlias);return;}S=S.toUpperCase(S);if(!t._oSIDMap){t._oSIDMap=t._createSIDMap(o);}if(t._oSIDMap.hasOwnProperty(S)){var b=o[t._oSIDMap[S]];d.resolve(b);return;}m="Cannot resolve system alias "+S;jQuery.sap.log.warning(m,"The system alias cannot be found in the site response","sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter");d.reject(m);}).fail(function(e){d.reject(e);});return d.promise();};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/CommonDataModelAdapter',["sap/ushell/adapters/cdm/ClientSideTargetResolutionAdapter","jquery.sap.global","jquery.sap.script"],function(C,q){"use strict";var a=function(u,p,A){this.oAdapterConfiguration=A;if(A&&A.config&&A.config.siteData){this.oCdmSiteDataRequestPromise=new q.Deferred().resolve(A.config.siteData);}else if(A&&A.config&&A.config.siteDataPromise){this.oCdmSiteDataRequestPromise=A.config.siteDataPromise;}else{var s=this._identifySiteUrlFromConfig(A);this.oCdmSiteDataRequestPromise=this._requestSiteData(s);}};
a.prototype._requestSiteData=function(u){var s=new q.Deferred();if(!u){return s.reject("Cannot load site: configuration property 'siteDataUrl' is missing for CommonDataModelAdapter.");}q.ajax({type:"GET",dataType:"json",url:u}).done(function(r){s.resolve(r);}).fail(function(e){q.sap.log.error(e.responseText);s.reject("CDM Site was requested but could not be loaded.");});return s.promise();};
a.prototype.getSite=function(){var d=new q.Deferred();this.oCdmSiteDataRequestPromise.done(function(s){var S=q.extend({},s);delete S.personalization;d.resolve(S);}).fail(function(m){d.reject(m);});return d.promise();};
a.prototype.getPersonalization=function(){var d=new q.Deferred(),t=this;this.oCdmSiteDataRequestPromise.done(function(s){var S=q.extend({},s);if(t.oAdapterConfiguration&&t.oAdapterConfiguration.config&&t.oAdapterConfiguration.config.ignoreSiteDataPersonalization){delete S.personalization;}if(S.personalization){d.resolve(S.personalization);}else{t._readPersonalizationDataFromStorage().done(function(p){d.resolve(p);}).fail(function(m){d.reject(m);});}}).fail(function(m){d.reject(m);});return d.promise();};
a.prototype._storePersonalizationData=function(p){var P=new q.Deferred(),o=sap.ushell.Container.getService("Personalization"),c,s={keyCategory:o.constants.keyCategory.FIXED_KEY,writeFrequency:o.constants.writeFrequency.LOW,clientStorageAllowed:true},b={container:"sap.ushell.cdm.personalization",item:"data"},d=o.getPersonalizer(b,s,c);d.setPersData(p).done(function(){q.sap.log.info("Personalization data has been stored successfully.");P.resolve();}).fail(function(){P.reject("Writing personalization data failed.");});return P.promise();};
a.prototype._readPersonalizationDataFromStorage=function(){var p=new q.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(P){var s={keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.LOW,clientStorageAllowed:true};var o={container:"sap.ushell.cdm.personalization",item:"data"};P.getPersonalizer(o,s).getPersData().done(function(b){p.resolve(b||{});}).fail(function(){p.reject("Fetching personalization data failed.");});});return p.promise();};
a.prototype._identifySiteUrlFromConfig=function(A){var p=q.sap.getUriParameters();var s=p.get("sap-ushell-cdm-site-url");var c=A&&A.config;if((c&&!c.allowSiteSourceFromURLParameter)&&s){s=null;}if(c&&!s){s=c.siteDataUrl||c.cdmSiteUrl;}this.sCdmSiteUrl=s;return s;};
return a;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/ContainerAdapter',['sap/ushell/utils','sap/ushell/User','sap/ushell/System','sap/ui/thirdparty/URI'],function(u,U,S,a){"use strict";var C=function(i,p,P){var b="/sap/public/bc/icf/logoff",l=g(P.config,b),o=c(P.config),s=d(i,P.config);function g(h,D){if(h.systemProperties&&h.systemProperties.logoutUrl){return h.systemProperties.logoutUrl;}return D;}function c(h){var j,k=h.userProfile;if(k){j=e(k.defaults,h.userProfilePersonalization,k.metadata);}return new U(j||f());}function d(O,h){var j=h.systemProperties,A=O.getAlias(),k=O.getPlatform(),B=O.getBaseUrl(),m,n;if(j){A=j.alias||A;k=j.platform||k;m=j.SID;n=j.client;}return new S({alias:A,platform:k,baseUrl:B,system:m,client:n});}function e(D,h,j){var k=jQuery.extend(f(),D,h);k.bootTheme=k.bootTheme||{theme:k.theme,root:""};delete k.theme;if(j){if(j.editablePropterties){k.setThemePermitted=j.editablePropterties.indexOf("theme")>-1;k.setAccessibilityPermitted=j.editablePropterties.indexOf("accessibility")>-1;k.setContentDensityPermitted=j.editablePropterties.indexOf("contentDensity")>-1;}if(j.ranges){k.ranges=j.ranges;}}return k;}function f(){return{setThemePermitted:false,setAccessibilityPermitted:false,setContentDensityPermitted:false};}this._getLogoutUrl=function(){return l;};this._setDocumentLocation=function(L){document.location=L;};this.getSystem=function(){return s;};this.getUser=function(){return o;};this.load=function(){return jQuery.when();};this.getCurrentUrl=function(){return window.location.href;};this.logout=function(L){var F;if(!L){throw new Error("Not implemented");}if(u.hasNativeLogoutCapability()){F=(new a(this._getLogoutUrl())).absoluteTo(this.getCurrentUrl()).search("").toString();u.getPrivateEpcm().doLogOff(F);}else{this.logoutRedirect();}return jQuery.when();};this.logoutRedirect=function(){var h=s.adjustUrl(this._getLogoutUrl());this._setDocumentLocation(h);};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/LaunchPageAdapter',["sap/ushell/adapters/cdm/_LaunchPage/readHome","sap/ushell/adapters/cdm/_LaunchPage/modifyHome","sap/ushell/adapters/cdm/_LaunchPage/readCatalogs","sap/m/GenericTile","sap/m/library","sap/ui/core/ComponentContainer","sap/ushell/adapters/cdm/_LaunchPage/uri.transform","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/navigationMode","sap/ushell/resources","sap/ushell/utils","sap/ushell/utils/utilsCdm","sap/ushell/components/tiles/utilsRT","sap/ushell/utils/WindowUtils"],function(r,m,R,G,M,C,u,a,E,n,o,U,b,c,W){"use strict";var l=jQuery.sap.log.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter"),L=jQuery.sap.log.Level;var g=M.GenericTileMode;
function d(f,p,A){var _,s="sap.ushell.components.tiles.cdm.applauncher",D="sap.ushell.components.tiles.cdm.applauncherdynamic";this._mResolvedTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};this._mContentProviders={};this.TileType={Tile:"tile",Link:"link"};this.getGroups=function(){var e=new jQuery.Deferred();this._assureLoaded().done(function(z){U.setPerformanceMark("FLP - homepage groups processed");e.resolve(z);}).fail(function(){e.resolve([]);});return e.promise();};this._getTileFromHashInContextOfSite=function(e,z,I){var B=new jQuery.Deferred(),F=z[I];if(!F){F=e(I);z[I]=F;}F.done(function(T){var H={tileIntent:I,tileResolutionResult:T};B.resolve(H);}).fail(function(H){B.reject("Hash '"+I+"' could not be resolved to a tile. "+H);});return B.promise();};this._getTileFromHash=function(I){var e=sap.ushell.Container.getService("ClientSideTargetResolution");var z=e.resolveTileIntent.bind(e);return this._getTileFromHashInContextOfSite(z,this._mCatalogTilePromises,I);};this._getTileFromHashFromSite=function(S,I){var e=sap.ushell.Container.getService("ClientSideTargetResolution");var z=b.formatSite(S);var B=e.resolveTileIntentInContext.bind(e,z);var F={};return this._getTileFromHashInContextOfSite(B,F,I);};this._getTileForUrl=function(T){var e=T.indicatorDataSource?"#Shell-dynamicTile":"#Shell-staticTile";return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:e,isCustomTile:false}};};this._assureGroupItemsResolved=function(e,S){var P=[],z,B;if(e.payload&&e.payload.tiles){z=this._assureGroupTilesResolved(e.payload.tiles,S);Array.prototype.push.apply(P,z);}if(e.payload&&e.payload.links){B=this._assureGroupLinksResolved(e.payload.links,S);Array.prototype.push.apply(P,B);}return P;};this._assureGroupTilesResolved=function(e,S){return(e||[]).map(function(T,I){return this._resolveGroupTile(T,S).then(function(z){z.isLink=false;return z;});},this);};this._assureGroupLinksResolved=function(e,S){return(e||[]).map(function(z,I){return this._resolveGroupTile(z,S).then(function(B){B.isLink=true;return B;});},this);};this._resolveGroupTile=function(T,S){var e=this._mResolvedTiles;var F=this._mFailedResolvedTiles;var z;function B(I){e[T.id]=I;if(F[T.id]){delete F[T.id];}return I;}function H(T){var I=T.target;return I&&I.semanticObject==="Shell"&&I.action==="launchURL";}if(e[T.id]){return(new jQuery.Deferred()).resolve(e[T.id]).promise();}if(T.target&&T.target.url){z=jQuery.when(this._getTileForUrl(T));}else if(T.isBookmark){z=this._resolveTileByIntent(T,S);}else if(H(T)){z=this._resolveTileByIntent(T,S);}else{z=this._resolveTileByAppId(T,S);}z.done(function(I){B(I);}).fail(function(I){F[T.id]=I;});return z;};this._resolveTileByAppId=function(T,S){var e,z,I,B,H;function F(Q,V){return new jQuery.Deferred().reject({logLevel:Q,message:V}).promise();}if(!jQuery.isPlainObject(T)){return F(L.ERROR,"Cannot resolve tile: oTile must be an object");}if(!jQuery.isPlainObject(S)){return F(L.ERROR,"Cannot resolve tile: oSite must be an object");}e=T.appId||T.appIDHint;if(!e){return F(L.ERROR,["Cannot resolve tile '",T.id,"': either appId or appIDHint must be specified"].join(""));}z=S.applications&&S.applications[e];if(!z){return F(L.INFO,["Tile '",T.id,"' filtered from result: no app found for appId '",e,"' (dangling app reference)"].join(""));}I=this._getFirstInbound(z);if(!I){return F(L.ERROR,["Cannot resolve tile '",T.id,"': app '",e,"' has no navigation inbound"].join(""));}var J=b.mapOne(I.key,I.inbound,z),K=J.resolutionResult.applicationType,N=J.resolutionResult.additionalInformation,O=a.last("/core/navigation/enableInPlaceForClassicUIs"),P=O?O[K]:false;B=J.tileResolutionResult;B.navigationMode=n.computeNavigationModeForHomepageTiles(K,N,P);B.isLink=false;if(!this._isFormFactorSupported(B)){return F(L.INFO,["Tile '",T.id,"' filtered from result: form factor not supported"].join(""));}H=this._toHashFromInbound(I.inbound);return jQuery.when({tileResolutionResult:B,tileIntent:H});};this._isFormFactorSupported=function(e){var z=U.getFormFactor();return r.supportsFormFactor(e,z);};this._getFirstInbound=function(e){var F=Object.keys(e["sap.app"].crossNavigation.inbounds).shift(),I=e["sap.app"].crossNavigation.inbounds[F];return{key:F,inbound:I};};this._resolveTileByIntent=function(T,S){var H=this._prepareTileHash(T);return this._getTileFromHash(H);};this._prepareTileHash=function(T){var e=sap.ushell.Container.getService("URLParsing"),P={},z,B;if(this._isCatalogTile(T)){return T.tileIntent;}if(this._isGroupTile(T)&&T.target){B=T.target.parameters||[];B.forEach(function(F){if(F.name&&F.value){P[F.name]=[F.value];}});z={target:{semanticObject:T.target.semanticObject,action:T.target.action},params:P,appSpecificRoute:T.target.appSpecificRoute};return"#"+e.constructShellHash(z);}return undefined;};this._allPromisesDone=function(P){var e=new jQuery.Deferred(),z;if(P.length===0){e.resolve([]);}else{var N=P.map(function(B){z=new jQuery.Deferred();B.always(z.resolve.bind(z));return z.promise();});jQuery.when.apply(this,N).done(function(){var B=Array.prototype.slice.call(arguments);e.resolve(B);});}return e.promise();};this._assureLoaded=function(){var e=this,z=sap.ushell.Container.getService("CommonDataModel"),B;if(this._assureLoadedDeferred){return this._assureLoadedDeferred.promise();}B=new jQuery.Deferred();this._assureLoadedDeferred=B;z.getSite().done(function(S){var I=[];var F=r.getGroupsArrayFromSite(S);var H=r.getDefaultGroup(F);if(!H){H=m.createDefaultGroup(U.generateUniqueId(r.getGroupIdsFromSite(S)));S=m.addGroupToSite(S,H,0);F=r.getGroupsArrayFromSite(S);}_=H;F.forEach(function(J){I=e._assureGroupItemsResolved(J,S).concat(I);});e._allPromisesDone(I).done(function(){e._assureLoadedDeferred.resolve(F);delete e._assureLoadedDeferred;e._logTileResolutionFailures(e._mFailedResolvedTiles);});}).fail(function(F){jQuery.sap.log.error("Delivering hompage groups failed - "+F);e._assureLoadedDeferred.resolve([]);delete e._assureLoadedDeferred;});return B.promise();};this._logTileResolutionFailures=function(F){var e={};if(!F){return;}Object.keys(L).filter(function(z){var B=L[z];return B>=L.FATAL&&B<=L.ALL;}).forEach(function(z){e[L[z]]="";});Object.keys(F).forEach(function(z){var B=F[z];if(B.logLevel){e[B.logLevel]=e[B.logLevel].concat(B.message).concat("\n");}});if(e[L.FATAL]){l.fatal(e[L.FATAL]);}if(e[L.ERROR]){l.error(e[L.ERROR]);}if(e[L.WARNING]){l.warning(e[L.WARNING]);}if(e[L.INFO]){l.info(e[L.INFO]);}if(e[L.DEBUG]){l.debug(e[L.DEBUG]);}if(e[L.TRACE]){l.trace(e[L.TRACE]);}};this.getDefaultGroup=function(){var e=new jQuery.Deferred(),z;if(!_){z=this._assureLoaded();}if(z){z.done(function(){e.resolve(_);}).fail(function(B){e.reject("Failed to access default group. "+B);});}else{e.resolve(_);}return e.promise();};this._isValidTitle=function(T){if(typeof T!=='string'||!T){return false;}return true;};this._isGroupPreset=function(e){return r.isGroupPreset(e);};this._isGroupLocked=function(e){return r.isGroupLocked(e);};this.addGroup=function(T){var e=new jQuery.Deferred(),z=sap.ushell.Container.getService("CommonDataModel"),B,F,H=this;if(!this._isValidTitle(T)){return e.reject("No valid group title").promise();}F="Failed to add the group with title '"+T+"' to the homepage. ";z.getSite().done(function(S){B=U.generateUniqueId(r.getGroupIdsFromSite(S));m.addGroupToSite(S,m.createEmptyGroup(B,T));z.save().done(function(){delete H._assureLoadedDeferred;e.resolve(S.groups[B],B);}).fail(function(I){e.reject(I);});}).fail(function(I){e.reject(F+I);});return e.promise();};this.getGroupTitle=function(e){return r.getGroupTitle(e);};this.setGroupTitle=function(e,N){var z=this,B=new jQuery.Deferred(),F=sap.ushell.Container.getService("CommonDataModel"),O,H;if(typeof e!=='object'||!r.getGroupId(e)){return B.reject("Unexpected group value").promise();}if(!z._isValidTitle(N)){return B.reject("Unexpected oGroup title value").promise();}H="Failed to set new title for group with id '"+r.getGroupId(e)+"'. ";O=r.getGroupTitle(e);F.getSite().done(function(S){if(e){m.setGroupTitle(e,N);}F.save().done(function(){B.resolve();}).fail(function(I){jQuery.sap.log.error(I);B.reject(O);});}).fail(function(I){B.reject(O,H+I);});return B.promise();};this.getGroupId=function(e){return r.getGroupId(e);};this.hideGroups=function(H){var e=new jQuery.Deferred(),z=sap.ushell.Container.getService("CommonDataModel"),B;if(H&&jQuery.isArray(H)){B="Failed to hide group. ";z.getSite().done(function(S){r.getGroupsArrayFromSite(S).forEach(function(F){m.setGroupVisibility(F,jQuery.inArray(r.getGroupId(F),H)===-1);});z.save().done(function(){e.resolve();}).fail(function(F){e.reject("Hiding of groups did not work as expected - "+F);});}).fail(function(F){e.reject(B+F);});}else{e.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.");}return e.promise();};this.isGroupVisible=function(e){return r.isGroupVisible(e);};this.moveGroup=function(e,z){var B=new jQuery.Deferred(),F=sap.ushell.Container.getService("CommonDataModel"),H,I;if(!e||!r.getGroupId(e)||z<0){return B.reject("Unable to move groups - invalid parameters").promise();}I="Failed to move group with id '"+e.identification.id+"'. ";F.getSite().done(function(S){var J=r.getGroupIdsFromSite(S),K=r.getGroupId(e);if(!J){return B.reject("groupsOrder not found - abort operation of adding a group.");}else if(J.indexOf(K)===z){return B.resolve();}H=U.moveElementInsideOfArray(J,J.indexOf(K),z);if(!H){return B.reject("invalid move group operation - abort.");}m.setGroupsOrder(S,H);F.save().done(function(){B.resolve();}).fail(function(N){B.reject(N);});return undefined;}).fail(function(J){B.reject(I+J);});return B.promise();};this.removeGroup=function(e){var z=new jQuery.Deferred(),B=sap.ushell.Container.getService("CommonDataModel"),F,H;if(typeof e!=="object"){return z.reject("invalid group parameter").promise();}H=r.getGroupId(e);if(!H){return z.reject("group without id given").promise();}F="Failed to remove group with id '"+H+"'. ";B.getSite().done(function(S){m.removeGroupFromSite(S,e);B.save().done(function(){z.resolve();}).fail(function(I){z.reject(I);});}).fail(function(I){z.reject(F+I);});return z.promise();};this.resetGroup=function(e){var z=new jQuery.Deferred(),B=sap.ushell.Container.getService("CommonDataModel"),S=[],F=this,H,I;if(typeof e==="object"&&r.getGroupId(e)){I=r.getGroupId(e);H="Failed to reset group with id '"+I+"'. ";B.getSite().done(function(J){jQuery.extend(true,S,r.getGroupsArrayFromSite(J));if(F.isGroupRemovable(e)===false){B.getGroupFromOriginalSite(I).done(function(K){if(typeof J==="object"&&r.getGroupFromSite(J,I)){m.overwriteGroup(J,K,I);}B.save().done(function(){z.resolve(K);}).fail(function(N){z.reject("Group could not be reset - "+N,S);});}).fail(function(K){z.reject("Group could not be reset - "+K,S);});}else{z.reject("Group could not be reset as it was created by the user",S);}}).fail(function(J){z.reject(H+J,[]);});}return z.promise();};this.getTileTitle=function(T){return r.getTileTitle(this._mResolvedTiles,T);};this.getTileSubtitle=function(T){return r.getTileSubtitle(this._mResolvedTiles,T);};this.getTileIcon=function(T){return r.getTileIcon(this._mResolvedTiles,T);};this.getTileInfo=function(T){return r.getTileInfo(this._mResolvedTiles,T);};this.getTileIndicatorDataSource=function(T){var e=this._mResolvedTiles[T.id],z={},B;if(T.indicatorDataSource){z.indicatorDataSource=T.indicatorDataSource;if(T.dataSource){z.dataSource=T.dataSource;}return z;}if(!e){return z;}B=e.tileResolutionResult;if(B.indicatorDataSource){z.indicatorDataSource=B.indicatorDataSource;if(B.indicatorDataSource.hasOwnProperty("dataSource")){var F=B.indicatorDataSource.dataSource,H=B.dataSources;if(H&&H.hasOwnProperty(F)){z.dataSource=H[F];}else{jQuery.sap.log.warning("datasource referenced but not found for tile: "+e.tileIntent);}}if(U.getMember(B,"runtimeInformation.componentProperties.url")){var P=U.getMember(z,"indicatorDataSource.path");var I=U.getMember(z,"dataSource.uri");var J=U.getMember(B,"runtimeInformation.componentProperties.url");var K=u(P,I,J,window.location.href);if(!K.error){if(P){z.indicatorDataSource.path=K.uri;}if(I){z.dataSource.uri=K.uriParent;}}}}return z;};this.isGroupRemovable=function(e){return!this._isGroupPreset(e);};this.isGroupLocked=function(e){return this._isGroupLocked(e);};this.getGroupTiles=function(e){return r.getGroupTiles(e).concat(r.getGroupLinks(e));};this.getLinkTiles=function(e){return r.getGroupLinks(e);};this.getTileType=function(T){if(r.isLink(this._mResolvedTiles,T)){return this.TileType.Link;}return this.TileType.Tile;};this.getTileId=function(T){return r.getTileId(T);};this.getTileSize=function(T){return r.getTileSize(this._mResolvedTiles,T)||"1x1";};this.getTileTarget=function(T){var e,z=r.getTileId(T),B=this._mResolvedTiles[z],F;if(T.target&&T.target.url){return T.target.url;}if(B&&B.tileResolutionResult){e=B.tileResolutionResult;if(e.isCustomTile!==true){return B.tileIntent;}if(e&&typeof e.targetOutbound==="object"){F=this._toHashFromOutbound(e.targetOutbound);if(F){return F;}}}jQuery.sap.log.warning("Could not find a target for Tile with id '"+z+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return"";};this.isLinkPersonalizationSupported=function(T){return true;};this.isTileIntentSupported=function(T){return(this._mFailedResolvedTiles[T.id]===undefined)?true:false;};this._notifyTileAboutRefresh=function(T){if(typeof T.tileRefresh==="function"){T.tileRefresh();}};this.refreshTile=function(T){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutRefresh(e.tileComponent);}}};this._notifyTileAboutVisibility=function(T,N,O){if(typeof T.tileSetVisible==="function"&&O!==N){T.tileSetVisible(N);}};this.setTileVisible=function(T,N){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutVisibility(e.tileComponent,N,e.visibility);}e.visibility=N;}};this.getTileView=function(e){var z=this;return new jQuery.Deferred(function(B){return z._getTileView(e,false).then(function(T){B.resolve(T);},function(F){var H="Tile with ID '"+e.id+"' could not be initialized"+(F?":\n"+F:".");jQuery.sap.log.error(H,null,e.tileType);B.reject(H);});}).promise();};this._getTileUiComponentContainerSync=function(T,e,I){var z=this,B,F,N,H,J={};if(I===true){F=z._createTileComponentData(T,true,e);}else{F=z._createTileComponentData(T,false,e);}B=e.tileResolutionResult;if(e.isLink){N=B.navigationMode;return z._createLinkInstance(T,I,N,G,o);}if(typeof B.tileComponentLoadInfo==="string"){if(F.properties.indicatorDataSource&&F.properties.indicatorDataSource.path){J.name="sap.ushell.components.tiles.cdm.applauncherdynamic";}else{J.name="sap.ushell.components.tiles.cdm.applauncher";}}else if(typeof B.tileComponentLoadInfo==="object"&&B.tileComponentLoadInfo!==null){J=B.tileComponentLoadInfo.componentProperties||{};J.name=B.tileComponentLoadInfo.componentName;}J.componentData=F;if(J.manifest){J.componentData.properties=J.componentData.properties||{};J.componentData.properties.manifest=J.manifest;}if(J.name){J.async=false;var K;try{H=sap.ui.component(J);}catch(O){jQuery.sap.log.error(O.message+"\n-- An error occurred while instantiating "+"the tile component for "+J.name,O.stack?O.stack:"","sap.ushell.adapters.cdm.LaunchPageAdapter");return null;}K=new sap.ui.core.ComponentContainer({component:H,height:'100%'});if(!I){z._mResolvedTiles[T.id].tileComponent=H;}return K;}return null;};this._getTileUiComponentContainer=function(T,e,I){var z=this,B,F,N,H,J,K,O=new jQuery.Deferred();var P=sap.ushell.Container.getService("Ui5ComponentLoader");if(I===true){F=z._createTileComponentData(T,true,e);}else{F=z._createTileComponentData(T,false,e);}B=e.tileResolutionResult;if(e.isLink){N=B.navigationMode;O.resolve(z._createLinkInstance(T,I,N,G,o));return O.promise();}var Q=this._createTileComponentProperties(F,B.tileComponentLoadInfo);if(!Q.name){return O.reject("Cannot find name of tile component for tile with id: '"+T.id+"'").promise();}if(Q.manifest){F.properties=F.properties||{};F.properties.manifest=Q.manifest;}K=this.isCustomTile(Q.name);var S=function(Z){var e;H=Z.componentHandle.getInstance();J=new C({component:H,height:'100%'});if(!I){e=z._mResolvedTiles[T.id];e.tileComponent=H;if(typeof e.visibility==="boolean"){z._notifyTileAboutVisibility(H,e.visibility);}}return J;};var V=function(){return P.createComponent({loadCoreExt:K,loadDefaultDependencies:false,componentData:F,url:Q.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:Q,ui5ComponentName:Q.name},{},[]).then(S);};var X=function(){var Z={componentData:F,url:Q.url,name:Q.name,async:false};H=sap.ui.component(Z);var $={componentHandle:{getInstance:function(){return H;}}};return S($);};if(K){E.once("CoreResourcesComplementLoaded").do(function(){V().then(function(J){O.resolve(J);}).fail(function(Z){O.reject(Z);});});}else{var Y=X();O.resolve(Y);}return O.promise();};this._createTileComponentProperties=function(T,e){var z={};if(typeof e==="string"){if(T.properties.indicatorDataSource&&T.properties.indicatorDataSource.path){z.name=D;}else{z.name=s;}return z;}if(typeof e==="object"&&e!==null){z=e.componentProperties||{};z.name=e.componentName;}return z;};this._getTileView=function(e){var z,B,F=new jQuery.Deferred();if(typeof e!=="object"||!e.id){B="Invalid input parameter passed to _getTileView: "+e;jQuery.sap.log.error(B);return F.reject(B).promise();}z=this._mResolvedTiles[e.id];if(z){return this._getTileUiComponentContainer(e,z,false);}B="No resolved tile found for tile ID: "+e.id;jQuery.sap.log.error(B);return F.reject(B).promise();};this._getCatalogTileView=function(e){if(typeof e!=="object"){throw new Error(e);}return this._getTileUiComponentContainerSync(e,e,true);};this._getCatalogTileViewControl=function(e){var z=new jQuery.Deferred();if(typeof e!=="object"){var B="Invalid input parameter passed to _getCatalogTileView: "+e;jQuery.sap.log.error(B);return z.reject(B).promise();}return this._getTileUiComponentContainer(e,e,true);};this._createTileComponentData=function(T,I,e){var z=I?this.getCatalogTileTitle(T):this.getTileTitle(T),S=I?this.getCatalogTilePreviewSubtitle(T):this.getTileSubtitle(T),B=I?this.getCatalogTilePreviewIcon(T):this.getTileIcon(T),F=I?this.getCatalogTilePreviewInfo(T):this.getTileInfo(T),H=I?this.getCatalogTileTargetURL(T):this.getTileTarget(T),J=this.getTileIndicatorDataSource(T),K={properties:{},startupParameters:{}};if(e.tileResolutionResult.isCustomTile===true&&e.tileResolutionResult.startupParameters){K.startupParameters=e.tileResolutionResult.startupParameters;}if(z){K.properties.title=z;}if(F){K.properties.info=F;}if(S){K.properties.subtitle=S;}if(B){K.properties.icon=B;}if(H){K.properties.targetURL=H;}if(J.indicatorDataSource){K.properties.indicatorDataSource=J.indicatorDataSource;if(J.dataSource){K.properties.dataSource=J.dataSource;}}if(e.tileResolutionResult){K.properties.navigationMode=e.tileResolutionResult.navigationMode;}return K;};this._createLinkInstance=function(T,I,N,e,o){var z,B,F,H=this.getTileSubtitle(T);var G=e;if(I===true){z=this.getCatalogTileTitle(T);}else{z=this.getTileTitle(T);}B=new G({mode:g.LineMode,subheader:H,header:z,press:function(J){this._genericTilePressHandler(T,J);}.bind(this)});if(N){F=o.i18n.getText(N+"NavigationMode");B.setAriaLabel(F+" "+z+" "+H);}this._mResolvedTiles[T.id].linkTileControl=B;return B;};this._genericTilePressHandler=function(T,e){var z;if(e.getSource().getScope&&e.getSource().getScope()==="Display"){z=this.getTileTarget(T);if(z){if(z[0]==='#'){hasher.setHash(z);}else{W.openURL(z,'_blank');}}}};this._addTileToSite=function(P,e,N,z){var B=this,F=new jQuery.Deferred(),I=sap.ushell.Container.getService("URLParsing").parseShellHash(N.properties.targetURL),T={"id":B.getTileId(N),"target":{"semanticObject":I.semanticObject,"action":I.action,"parameters":y(I.params)}};P.groups[e.identification.id].payload.tiles.push(T);z.save().done(function(){F.resolve(T);}).fail(function(H){F.reject(H);});return F.promise();};this.addTile=function(e,z){var B=new jQuery.Deferred(),F,H=sap.ushell.Container.getService("CommonDataModel"),I;if(!z){z=_;}if(e.contentProviderId){if(e.externalUrl){return this.addBookmark(this._getBookmarkDataForExtensionCatalogTile(e),z);}return B.reject("Extension Tile without URL").promise();}I=j();I.appId=e.tileResolutionResult.appId;this._mResolvedTiles[I.id]={tileIntent:e.tileIntent,tileResolutionResult:e.tileResolutionResult,isLink:false};H.getSite().done(function(S){S.groups[z.identification.id].payload.tiles.push(I);H.save().done(function(){B.resolve(I);}).fail(function(J){B.reject(J);});}).fail(function(J){F="Failed to add tile with id '"+I.id+"' to group with id '"+z.identification.id+"'. ";B.reject(F+J);});return B.promise();};this._getBookmarkDataForExtensionCatalogTile=function(e){var B={title:e.tileResolutionResult.title,subtitle:e.tileResolutionResult.subTitle,icon:e.tileResolutionResult.icon,info:e.tileResolutionResult.info,url:e.externalUrl};if(e.tileResolutionResult.indicatorDataSource&&e.tileResolutionResult.indicatorDataSource.path){B.serviceUrl=e.tileResolutionResult.indicatorDataSource.path;B.serviceRefreshInterval=e.tileResolutionResult.indicatorDataSource.refresh;}return B;};this.removeTile=function(z,T,I){var B,F,H=new jQuery.Deferred(),J=this;if(!z||typeof z!=="object"||!z.identification||!z.identification.id||!T||typeof T!=="object"||!T.id){return H.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise();}F="Failed to remove tile with id '"+T.id+"' from group with id '"+z.identification.id+"'. ";B=sap.ushell.Container.getService("CommonDataModel");B.getSite().done(function(S){var P,K;I=+I;try{P=S.groups[z.identification.id].payload;}catch(e){H.reject(S.groups[z.identification.id],F);}K=J.getTileType(T)===J.TileType.Link?"links":"tiles";if(J.getTileType(T)===J.TileType.Link){I-=P.tiles.length;}if(I>=0){P[K].splice(I,1);}else{P[K]=P[K].filter(function(N){return N.id!==T.id;});}B.save().done(function(){H.resolve();}).fail(function(N){jQuery.sap.log.error(N);H.reject(S.groups[z.identification.id],N);});}).fail(function(e){H.reject({},F+e);});return H.promise();};this.moveTile=function(T,S,e,z,B,F){var H=new jQuery.Deferred(),I=sap.ushell.Container.getService("CommonDataModel"),J=this,K;if(!T||jQuery.isEmptyObject(T)||S===undefined||S<0||e===undefined||e<0||!z||!z.identification||!z.identification.id||!B||!B.identification||!B.identification.id){return H.reject("Invalid input parameters").promise();}K="Failed to move tile with id '"+T.id+"'. ";I.getSite().done(function(N){var O,P,Q=J.getTileType(T)===J.TileType.Link?"links":"tiles";if(!F){F=J._mResolvedTiles[T.id].isLink?"link":"tile";}O=F==="link"?"links":"tiles";if(Q!=O&&J._mResolvedTiles[T.id]){J._mResolvedTiles[T.id].isLink=F==="link";}if(O==="links"){e-=N.groups[B.identification.id].payload.tiles.length;}if(Q==="links"){S-=N.groups[z.identification.id].payload.tiles.length;}if(z.identification.id===B.identification.id){if(S!==e||Q!=O){P=N.groups[B.identification.id].payload;P[Q].splice(S,1);P[O].splice(e,0,T);}else{return H.resolve(T).promise();}}else{N.groups[z.identification.id].payload[Q].splice(S,1);N.groups[B.identification.id].payload[O].splice(e,0,T);}I.save().done(function(){H.resolve(T);}).fail(function(V){jQuery.sap.log.error(K+V);H.reject(K+V);});return undefined;}).fail(function(N){jQuery.sap.log.error(K+N);H.reject(K+N);});return H.promise();};this._compareCatalogs=function(e,B){if(e.identification.id>B.identification.id){return 1;}return-1;};this.getCatalogs=function(){var e=this,z=new jQuery.Deferred(),B=[],F=sap.ushell.Container.getService("CommonDataModel");function H(I,J,B,K,P,N){var O=I.catalogs[J];if(P&&N){O.contentProviderId=P;N.catalogsMap[J]=O;}B.push(O);K.notify(O);}window.setTimeout(function(){F.getSite().done(function(S){Object.keys(S.catalogs).forEach(function(I){H(S,I,B,z);});F.getExtensionSites().progress(function(I){var P=I.providerId;var J=I.site;var K=Promise.resolve(J);var N={sitePromise:K,site:J,catalogsMap:{}};Object.keys(J.catalogs).forEach(function(O){e._mContentProviders[P]=N;H(J,O,B,z,P,N);});}).done(function(I){I.filter(function(J){return!J.success;}).forEach(function(J,K){B.push({identification:{id:J.providerId},contentProviderId:J.providerId,error:"The following content providers could not provide catalogs: "+J.providerId+(J.error?" -> "+J.error:"")});});z.resolve(B.sort(e._compareCatalogs));});});},0);return z.promise();};this._isStartableInbound=function(I){var N=["Shell-plugin","Shell-bootConfig"],e;if(!I.semanticObject||!I.action){return false;}if(N.indexOf(I.semanticObject+"-"+I.action)>-1){return false;}if(!jQuery.sap.getObject("signature.parameters",undefined,I)){return true;}e=Object.keys(I.signature.parameters).every(function(p){return!I.signature.parameters[p].filter||(!!I.signature.parameters[p].launcherValue||p==="sap-external-url");});return e;};this._isHiddenInbound=function(I){return!!I.hideLauncher;};this._toHashFromInbound=function(I){var e=b.toHashFromInbound(I);if(!e){return undefined;}return"#"+e;};this._getExternalUrlFromInbound=function(I){return jQuery.sap.getObject("signature.parameters.sap-external-url.launcherValue.value",undefined,I)||null;};this._toHashFromOutbound=function(O){var e=b.toHashFromOutbound(O);if(!e){return undefined;}return"#"+e;};this._isCustomTile=function(e){if(U.getMember(e,"sap|flp.type")==="tile"){return true;}return false;};this.getCatalogTiles=function(e){var z=this,B=new jQuery.Deferred();if(typeof e!=="object"||e===null){return B.reject("Invalid input parameter '"+e+"' passed to getCatalogTiles.").promise();}if(e.contentProviderId&&this._mContentProviders[e.contentProviderId]){this._mContentProviders[e.contentProviderId].sitePromise.then(function(S){h.call(z,e,S).done(B.resolve).fail(B.reject);},function(F){B.reject("Failed to get site: "+F);});}else{sap.ushell.Container.getService("CommonDataModel").getSite().done(function(S){h.call(z,e,S).done(B.resolve).fail(B.reject);}).fail(function(F){B.reject("Failed to get site: "+F);});}return B.promise();};this.isCustomTile=function(e){return!(e===s||e===D);};function h(e,S){var z=this,B=new jQuery.Deferred();setTimeout(function(){var F=((e.payload&&e.payload.appDescriptors)||[]).reduce(function(H,I){var J=S.applications[I.id],K,T,N,O,P,Q,V,X,Y,Z,$,a1;if(!J){return H;}K=z._getMember(J,"sap|app.crossNavigation.inbounds");if(!K||Object.keys(K).length===0){return H;}N=Object.keys(K)[0];O=K[N];if(z._isStartableInbound(O)&&!z._isHiddenInbound(O)){P=b.mapOne(N,O,J);if(!P||!P.tileResolutionResult){return H;}Y=P.resolutionResult.applicationType;a1=a.last("/core/navigation/enableInPlaceForClassicUIs");$=a1?a1[Y]:false;Z=P.resolutionResult.additionalInformation;P.tileResolutionResult.navigationMode=n.computeNavigationModeForHomepageTiles(Y,Z,$);Q=P.tileResolutionResult;T=z._toHashFromInbound(O);if(e.contentProviderId){X=z._getMember(J,"sap|app.crossNavigation.inbounds.Shell-launchURL.signature.parameters.sap-external-url.launcherValue.value");}V={id:X||T,tileIntent:X||T,tileResolutionResult:Q,isCatalogTile:true};if(e.contentProviderId&&X){V.contentProviderId=e.contentProviderId;V.externalUrl=X;}H.push(V);}return H;},[]);B.resolve(F);},0);return B.promise();}this.getCatalogError=function(e){if(e.error){return e.error;}return undefined;};this.getCatalogId=function(e){return R.getCatalogId(e);};this.getCatalogTitle=function(e){return R.getCatalogTitle(e);};this._isGroupTile=function(T){return r.isGroupTile(T);};this._isCatalogTile=function(T){return!!(T&&T.isCatalogTile);};this._isFailedGroupTile=function(T){return!!(T&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[r.getTileId(T)]);};this._isFailedCatalogTile=function(T){return!!(T&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[r.getTileId(T)]);};this.getCatalogTileId=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return undefined;}if(e.isBookmark&&jQuery.sap.getObject("target.url",undefined,e)){return e.target.url;}return(this._mResolvedTiles[r.getTileId(e)]||{}).tileIntent;}if(this._isCatalogTile(e)){return e.id;}return undefined;};this.getCatalogTileTitle=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return"";}return this._mResolvedTiles[e.id].tileResolutionResult.title;}if(this._isCatalogTile(e)){if(this._isFailedCatalogTile(e)){return undefined;}return e.tileResolutionResult.title;}return undefined;};this.getCatalogTileSize=function(e){return this.getTileSize(e);};this.getCatalogTileView=function(e){return this._getCatalogTileView(e);};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewControl(e);};this.getCatalogTileTargetURL=function(e){if(!e){throw new Error("The given tile is falsy");}if(this._isCatalogTile(e)){if(e.tileResolutionResult&&e.tileResolutionResult.isCustomTile){if(!e.tileResolutionResult.targetOutbound){return"";}return this._toHashFromOutbound(e.tileResolutionResult.targetOutbound);}return e.tileIntent||"";}return this.getTileTarget(e);};this.getCatalogTilePreviewTitle=function(e){if(this._isGroupTile(e)){return this.getTileTitle(e);}return(e.tileResolutionResult&&e.tileResolutionResult.title)||"";};this.getCatalogTilePreviewSubtitle=function(e){if(this._isGroupTile(e)){return this.getTileSubtitle(e);}return(e.tileResolutionResult&&e.tileResolutionResult.subTitle)||"";};this.getCatalogTilePreviewIcon=function(e){if(this._isGroupTile(e)){return this.getTileIcon(e);}return(e.tileResolutionResult&&e.tileResolutionResult.icon)||"";};this.getCatalogTilePreviewInfo=function(e){if(this._isGroupTile(e)){return this.getTileInfo(e);}return(e.tileResolutionResult&&e.tileResolutionResult.info)||"";};this.getCatalogTileKeywords=function(e){var K=[],z=e;if(!z){jQuery.sap.log.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return K;}if(this._mResolvedTiles&&this._mResolvedTiles[e.id]){z=this._mResolvedTiles[e.id];}if(z&&z.tileResolutionResult&&z.tileResolutionResult.title){K.push(z.tileResolutionResult.title);}if(z&&z.tileResolutionResult&&z.tileResolutionResult.subTitle){K.push(z.tileResolutionResult.subTitle);}return K;};this._visitBookmarks=function(e,V){var z=sap.ushell.Container;var B=z.getService("URLParsing");var F=z.getService("CommonDataModel");var H;var I=B.parseShellHash(e);if(I){H=x(I);}else{H=w(e);}return F.getSite().then(function(S){var J=S.groups;var T=Object.keys(J).filter(function(K){return!J[K].payload.locked;}).map(function(K){return J[K].payload.tiles.filter(function(N){return N.isBookmark&&q(H,N.target);});}).reduce(function(K,N){Array.prototype.push.apply(K,N);return K;},[]);if(!V){return T.length;}return jQuery.when(T.map(V)).then(function(){return T.length;});});};this.addBookmark=function(P,e){var T=this;return new jQuery.Deferred(function(z){var B=sap.ushell.Container;var F=B.getService("URLParsing");var H=B.getService("CommonDataModel");jQuery.when(e||T.getDefaultGroup(),H.getSite()).done(function(e,S){var I,J,K=F.parseShellHash(P.url),N,O=false;if(!K){J=w(P.url);O=true;}else{J=x(K);}I=i(P,J);if(O){N=new jQuery.Deferred();N.resolve(T._getTileForUrl(I));}else{N=T._getTileFromHash(P.url);}N.done(function(Q){Q.isLink=false;T._mResolvedTiles[I.id]=Q;S.groups[e.identification.id].payload.tiles.push(I);H.save().done(function(){z.resolve(I);}).fail(function(V){z.reject(V);});}).fail(function(Q){z.reject("Bookmark creation failed because: "+Q);});}).fail(function(I){z.reject(I);});}).promise();};this.countBookmarks=function(e){return this._visitBookmarks(e);};this.updateBookmarks=function(e,P){var z=sap.ushell.Container;var B=z.getService("URLParsing");var F=z.getService("CommonDataModel");var H=this._mResolvedTiles;function I(T){return new jQuery.Deferred(function(J){var K,N;var O;var Q=false;var S={};if(P.url||P.url===""){K=B.parseShellHash(P.url);if(!K){N=w(P.url);}else{N=x(K);}}if(T.icon!==P.icon){S.icon=P.icon;Q=true;}if(T.title!==P.title){S.title=P.title;Q=true;}if(T.subTitle!==P.subtitle){S.subtitle=P.subtitle;Q=true;}if(P.url&&e!==P.url){S.targetURL=P.url;Q=true;}if(T.info!==P.info){S.info=P.info;Q=true;}k(T,P,N);if(Q&&H[T.id]){O=H[T.id].tileComponent;O.tileSetVisualProperties(S);}J.resolve(T);}).promise();}return this._visitBookmarks(e,I).then(function(J){return F.save().then(function(){return J;});});};this.deleteBookmarks=function(e){var z=sap.ushell.Container;var B=z.getService("URLParsing");var F=z.getService("CommonDataModel");var I=B.parseShellHash(e);var H;if(I){H=x(I);}else{H=w(e);}return F.getSite().then(function(S){var J=S.groups;var K=Object.keys(J).map(function(N){var P=J[N].payload;var O=0;P.tiles=P.tiles.filter(function(T){if(T.isBookmark&&q(H,T.target)){++O;return false;}return true;});return O;}).reduce(function(N,O){N+=O;return N;},0);return F.save().then(function(){return K;});});};this.onCatalogTileAdded=function(T){};this._onTileSettingsSave=function(T,S){var e=new jQuery.Deferred(),z,B,N,F,H,O,I,J;if(T&&T.id&&S){N=S.oTitleInput.getValue();H=S.oSubTitleInput.getValue();F=S.oInfoInput.getValue();O=this.getTileTitle(T);I=this.getTileInfo(T);J=this.getTileSubtitle(T);if(O===N&&J===H&&I===F){return undefined;}z=sap.ushell.Container.getService("CommonDataModel");var K=this;z.getSite().done(function(P){if(!P.modifiedTiles){P.modifiedTiles={};}if(!P.modifiedTiles[T.id]){P.modifiedTiles[T.id]={id:T.id};}B={};if(O!==N){B.title=N;P.modifiedTiles[T.id].title=N;T.title=N;}if(J!==H){B.subtitle=H;P.modifiedTiles[T.id].subTitle=H;T.subTitle=H;}if(I!==F){B.info=F;P.modifiedTiles[T.id].info=F;T.info=F;}if(K._mResolvedTiles[T.id].tileComponent){K._mResolvedTiles[T.id].tileComponent.tileSetVisualProperties(B);}else if(K._mResolvedTiles[T.id].linkTileControl){if(B.title){K._mResolvedTiles[T.id].linkTileControl.setHeader(B.title);}if(B.subtitle){K._mResolvedTiles[T.id].linkTileControl.setSubheader(B.subtitle);}if((B.title)||(B.subtitle)){K._mResolvedTiles[T.id].linkTileControl.rerender();}}z.save().fail(function(Q){jQuery.sap.log.error(Q);e.reject("Could not save personalization changes: "+Q);}).done(function(){e.resolve();});}).fail(function(P){jQuery.sap.log.error(P);e.reject("Cannot get site: "+P);});}return e.promise();};this.getTileActions=function(T){var e=[],z,B;if(this._isGroupTile(T)&&!this._isFailedGroupTile(T)){B=new sap.ui.model.json.JSONModel({config:{"display_title_text":this.getTileTitle(T),"display_subtitle_text":this.getTileSubtitle(T),"display_info_text":this.getTileInfo(T)}});z=c.getTileSettingsAction(B,this._onTileSettingsSave.bind(this,T),this.getTileType(T));e.push(z);}return e;};function i(P,T){var e=j(P,T);e.isBookmark=true;return e;}function j(P,T){var e={id:U.generateUniqueId([])};k(e,P,T);return e;}function k(T,P,e){P=jQuery.extend(true,{},P);if(e){T.target=e;}if(P.title||P.title===""){T.title=P.title;}if(P.icon||P.icon===""){T.icon=P.icon;}if(P.subtitle||P.subtitle===""){T.subTitle=P.subtitle;}if(P.info||P.info===""){T.info=P.info;}if(P.dataSource){T.dataSource={};jQuery.extend(true,T.dataSource,P.dataSource);delete P.serviceUrl;}else if(P.dataSource===null){delete T.dataSource;delete T.indicatorDataSource;delete P.serviceUrl;}if((P.dataSource||T.dataSource)&&P.serviceUrlPath){T.indicatorDataSource={path:P.serviceUrlPath};}if(P.serviceUrl||P.serviceUrl===""){if(T.dataSource){jQuery.sap.log.warning("`serviceUrl` is marked for deprecation in the future."+"It is not the preferred means for defining a dynamic "+"tile's data source. Please use `oParameter.dataSource`");delete T.dataSource;}T.indicatorDataSource={path:P.serviceUrl};}else if(P.serviceUrl===null&&!T.dataSource){delete T.indicatorDataSource;}if(P.serviceRefreshInterval||P.serviceRefreshInterval===0){T.indicatorDataSource.refresh=P.serviceRefreshInterval;}}function q(T,O){if(T&&O){if(T.url){return T.url===O.url;}return T.semanticObject===O.semanticObject&&T.action===O.action&&t(T.parameters,O.parameters);}return T===O;}function t(P,O){var F,e;P=P||[];O=O||[];if(P.length===O.length){F=v(P);e=v(O);return F===e;}return false;}function v(e){return e.map(function(P){return P.name+P.value;}).sort().join();}function w(e){return{url:e};}function x(I){var T={semanticObject:I.semanticObject,action:I.action,parameters:y(I.params)};if(I.appSpecificRoute){T.appSpecificRoute=I.appSpecificRoute;}return T;}function y(I){return Object.keys(I).map(function(K){var V=I[K]&&I[K][0];return{name:K,value:V||""};});}}
d.prototype._getMember=function(O,A){return U.getMember(O,A);};
return d;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/PersonalizationAdapter',["sap/ushell/adapters/cdm/_Personalization/internals","sap/ushell/utils/XHttpClient"],function(a,h){"use strict";return a.PersonalizationAdapter.bind(null,h,null);},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/modifyHome',["sap/ushell/adapters/cdm/_LaunchPage/readHome"],function(r){"use strict";
function c(u){return a(u,"Home",true);}
function a(u,t,D){var g={"identification":{"id":u,"namespace":"","title":t},"payload":{"isPreset":false,"locked":false,"tiles":[],"links":[],"groups":[]}};if(D){g.payload.isDefaultGroup=true;}return g;}
function b(S,g,i){var G=r.getGroupId(g);S.groups[G]=g;if(i!==undefined){S.site.payload.groupsOrder.splice(i,0,G);}else{S.site.payload.groupsOrder.push(G);}return S;}
function o(S,g,G){if(S&&S.groups&&S.groups[G]){S.groups[G]=g;}return S;}
function d(S,g){if(S&&S.groups&&S.groups[g.identification.id]){delete S.groups[g.identification.id];}if(S&&S.site&&S.site.payload&&S.site.payload.groupsOrder){S.site.payload.groupsOrder=jQuery.grep(S.site.payload.groupsOrder,function(G){return G!==g.identification.id;});}return S;}
function s(S,n){S.site.payload.groupsOrder=n;return S;}
function e(g,n){g.identification.title=n;}
function f(g,n){if(n){delete g.identification.isVisible;}else{g.identification.isVisible=false;}}
return{createDefaultGroup:c,createEmptyGroup:a,addGroupToSite:b,overwriteGroup:o,removeGroupFromSite:d,setGroupsOrder:s,setGroupTitle:e,setGroupVisibility:f};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/readCatalogs',[],function(){"use strict";
function g(c){return c.identification.id;}
function a(c){return c.identification.title;}
return{getCatalogId:g,getCatalogTitle:a};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/readHome',["sap/ushell/utils/type"],function(t){"use strict";
function g(S){var L=[];S.site.payload.groupsOrder.forEach(function(G,I){var x=S.groups[G];if(x){x.payload=x.payload||{};L.push(x);}});return L;}
function a(S){return S.groups;}
function b(S){return S.site.payload.groupsOrder;}
function c(S,G){return S.groups[G];}
function d(G){var D=G.filter(function(x){return x.payload.hasOwnProperty("isDefaultGroup");});if(D.length>0){return D[0];}return undefined;}
function e(G){return G.identification&&G.identification.id;}
function f(G){return G.identification.title;}
function i(G){if(!G.payload.hasOwnProperty("isPreset")){return true;}return!!G.payload.isPreset;}
function h(G){return!!G.payload.locked;}
function j(G){return!!(G.identification.isVisible===undefined||G.identification.isVisible===true);}
function k(G){if(G.payload.tiles&&t.isArray(G.payload.tiles)&&G.payload.tiles.length>0){return G.payload.tiles;}else{return[];}}
function l(G){if(G.payload.links&&t.isArray(G.payload.links)&&G.payload.links.length>0){return G.payload.links;}else{return[];}}
function m(T){return T.id;}
function n(R,T){var x;if(T&&T.isBookmark){return T.title;}x=R[T.id];if(x){return T.title||x.tileResolutionResult.title;}else{return undefined;}}
function o(R,T){var x;if(T.isBookmark){return T.subTitle;}x=R[T.id];if(x){return T.subTitle||x.tileResolutionResult.subTitle;}else{return undefined;}}
function p(R,T){var x;if(T.isBookmark){return T.info;}x=R[T.id];return T.info||x.tileResolutionResult.info;}
function q(R,T){var x;if(T.isBookmark){return T.icon;}x=R[T.id];if(x){return T.icon||x.tileResolutionResult.icon;}else{return undefined;}}
function r(R,T){var x;if(T.isBookmark){return T.icon;}x=R[T.id];if(x){return T.icon||x.tileResolutionResult.icon;}else{return undefined;}}
function s(R,T){var x=R[T.id];if(x&&x.tileResolutionResult&&x.tileResolutionResult.size){return x.tileResolutionResult.size;}}
function u(R,T){var x=R[T.id];if(x){return!!x.isLink;}return false;}
function v(T){return!!(T&&T.id&&!T.isCatalogTile);}
function w(A,F){return A.deviceTypes&&A.deviceTypes[F];}
return{getGroupsArrayFromSite:g,getGroupsMapFromSite:a,getGroupIdsFromSite:b,getGroupFromSite:c,getDefaultGroup:d,getGroupId:e,getGroupTitle:f,isGroupPreset:i,isGroupLocked:h,isGroupVisible:j,getGroupTiles:k,getGroupLinks:l,getTileId:m,getTileTitle:n,getTileSubtitle:o,getTileInfo:p,getTileIcon:q,getTileIndicatorDataSource:r,getTileSize:s,isLink:u,isGroupTile:v,supportsFormFactor:w};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/uri.transform',["sap/ui/thirdparty/URI"],function(U){"use strict";
function t(u,s,f,g){var o=(e(u))?new U(u):null;if(!o){return{error:'Error: Parameter sUri is empty or not a string, use case not supported.'};}if(!b(o)){return r(u,null,null,null,u);}var h=(e(s))?new U(s):null;if(h&&!b(h)){return r(u,s,null,null,o.absoluteTo(h));}var i=new U().search("");if(i.toString()==""){i=new U('https://x.y.z:8443/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/shells/cdm/fioriCDM.html?params');}var k=(e(f))?new U(m(f)):i;if(!b(k)&&!g){return r(u,s,U.joinPaths(h,o),c(k),U.joinPaths(h,o).absoluteTo(k));}var l=(e(g))?new U(g):i;if(!k||!l.toString()){return{error:'Error: Parameter sUriNewBase is empty or not a string, use case not supported.'};}if(b(l)){return{error:'Error: Parameter sUriNewBase is a relative uri, but must be absolute.'};}if(b(k)&&!b(l)){k=k.absoluteTo(l);}if(!b(k)&&!b(l)){if(k.host()&&l.host()&&k.host()!=l.host()){return{error:'Error: Hosts of the parameters sUriBase and sUriNewBase are given but do not match.'};}var n=d(k).relativeTo(d(l));var p;if(e(s)){p=o.absoluteTo(h.absoluteTo(n.absoluteTo(l)));var q=j(n,h);var v=j(q,o);return r(o,q,v,c(l),p);}else{p=o.absoluteTo(n.absoluteTo(l));var w=j(n,o);return r(w,null,w,c(l),p);}}return{error:'Error: Parameter combination not supported.'};}
function r(u,o,f,g,h){var r={};if(u){r.uri=u.toString();}if(o){r.uriParent=o.toString();}if(f){r.uriRelative=f.toString();}if(g){r.uriBase=g.toString();}if(h){r.uriAbsolute=h.toString();}return r;}
function a(u){if(!u.is("relative"))return false;return u.toString()[0]=='/';}
function b(u){return!u.is("absolute")&&!a(u);}
function c(u){return u.filename("").search("").fragment("");}
function j(){var l=new U("/1/2/3/4/5/6/7/8/9/");var r=l;for(var i=0;i<arguments.length;i++){r=U.joinPaths(r,arguments[i]);}return r.relativeTo(l);}
function d(u){return U.joinPaths(u.directory(),'/');}
function m(u){var s=u;if(u){var o=new U(u);if(o.filename()&&o.filename().indexOf(".")==-1&&o.filename().slice(-1)!='/'){s+='/';}}return s;}
function e(f){return(f&&typeof f==='string');}
return t;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_Personalization/internals',["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","jquery.sap.global"],function(s,i,q){"use strict";return Object.create(null,{PersonalizationAdapter:{value:P},getStorageResourceRoot:{value:g},getContainerPath:{value:c},delAdapterContainer:{value:e},createContainerData:{value:f},getAdapterContainer:{value:A},getContainerCategory:{value:h},isCategoryPContainer:{value:k},trimContainerKey:{value:t},save:{value:l},load:{value:m},del:{value:n},clearContainerData:{value:o},getItemKeys:{value:u},containsItem:{value:v},setItemValue:{value:w},getItemValue:{value:x},delItem:{value:y},addPrefixToItemKey:{value:p},stripPrefixFromItemKey:{value:r},getHttpHeaderValue:{value:z}});
function P(H,C,S,B,D){var E,F;var G={cache:{},headers:{"sap-client":S.getClient()}};D=D&&D.config;if(!D){throw new Error("PersonalizationAdapter: missing configuration.");}if(!C){C=Object.create(null);}E=g(D);F=H(E,G);return Object.create(null,{getAdapterContainer:{value:A.bind(null,D,C,F)},delAdapterContainer:{value:e.bind(null,D,C,F)}});}
function g(C){var I=!C||!C.storageResourceRoot;if(I){throw new Error("Configuration error: storage resource root is not defined.");}return C.storageResourceRoot;}
function a(C){var I=!C||!C.relativeUrlReadOptimized;if(I){throw new Error("Configuration error: relative URL for read optimization is not defined.");}return C.relativeUrlReadOptimized;}
function b(C){var I=!C||!C.relativeUrlWriteOptimized;if(I){throw new Error("Configuration error: relative URL for write optimization is not defined.");}return C.relativeUrlWriteOptimized;}
function c(C,S,B){return j(C,S)+"/"+encodeURIComponent(t(B))+".json";}
function t(C){var B=i.S_CONTAINER_PREFIX,D,R;if(q.type(C)!=="string"||C.length===0){throw new Error("Personalization container key must be a non-empty string");}if(C.substring(0,B.length)===B){D=C.substring(B.length);}else{q.sap.log.error("Unexpected personalization container key: "+C,"should always be prefixed with "+B,"sap.ushell.adapters.cdm.PersonalizationAdapter");D=C;}if(D.length<=40){R=D;}else{R=D.substring(0,40);q.sap.log.error("Invalid personalization container key: '"+D+"'"+" exceeds maximum key length (40 characters) and is shortened to '"+R+"'",undefined,"sap.ushell.adapters.cdm.PersonalizationAdapter");}return R;}
function d(){return{validity:Infinity,keyCategory:s.keyCategory.GENERATED_KEY,writeFrequency:s.writeFrequency.HIGH,clientStorageAllowed:false};}
function e(C,B,H,D,S){var E=c(C,S,D);var F=B&&B[E];if(F){delete B[E];}return n(H,E);}
function f(S,B){var C;if((!B&&B!=="")||B.constructor!==String){q.sap.log.warning("Personalization container has an invalid app name; must be a non-empty string",null,"sap.ushell.adapters.cdm.PersonalizationAdapter");}if(!S){S=d();}C=Object.create(null,{items:{value:Object.create(null),enumerable:true},__metadata:{value:Object.create(null,{appName:{value:B,enumerable:true},expiry:{value:Date.now()+S.validity*60*1000,enumerable:true},validity:{value:S.validity,enumerable:true},category:{value:h(S),enumerable:true}}),enumerable:true,writable:true}});return C;}
function A(C,B,H,D,S,E){var F,G,I=c(C,S,D);if(B&&B[I]){return B[I];}G=f(S,E);F=G.items;return Object.create(null,{save:{value:l.bind(null,H,G,I)},load:{value:m.bind(null,H,G,I)},del:{value:n.bind(null,H,G,I)},setItemValue:{value:w.bind(null,F)},getItemValue:{value:x.bind(null,F)},getItemKeys:{value:u.bind(null,F)},containsItem:{value:v.bind(null,F)},delItem:{value:y.bind(null,F)}});}
function h(S){return k(S)?"p":"u";}
function j(C,S){return k(S)?a(C):b(C);}
function k(S){return S&&S.keyCategory===s.keyCategory.FIXED_KEY&&S.writeFrequency===s.writeFrequency.LOW&&S.clientStorageAllowed;}
function l(H,C,B){return new q.Deferred(function(D){H.put(B,{data:C}).then(function(R){D.resolve();}).catch(function(R){q.sap.log.error("Failed to save personalization container; response: "+(typeof R==="object"?JSON.stringify(R):R),R.stack?R.stack:null,"sap.ushell.adapters.cdm.PersonalizationAdapter");D.reject(R);});}).promise();}
function m(H,C,B){function D(C){o(C.items);}return new q.Deferred(function(E){H.get(B).then(function(R){var F,G;if(R.status===200&&z(R.responseHeaders,"content-length")==="0"&&z(R.responseHeaders,"content-type").indexOf("text/plain")===0){D(C);}else{F=JSON.parse(R.responseText);if(F.data){F.items=F.data;delete F.data;F.__metadata=C.__metadata;}G=F.items;o(C.items);Object.keys(G).forEach(function(I){C.items[I]=G[I];});C.__metadata=F.__metadata;}E.resolve();}).catch(function(R){if(R.status===404){D(C);E.resolve();}else{o(C.items);E.reject(R);}});}).promise();}
function n(H,B){return new q.Deferred(function(D){H.delete(B).then(function(){D.resolve();}).catch(function(R){D.reject(R);});}).promise();}
function o(C){Object.keys(C).forEach(function(K){delete C[K];});}
function p(K){if(K==="__metadata"){return undefined;}else if(K.indexOf(i.S_VARIANT_PREFIX)===0||K.indexOf(i.S_ADMIN_PREFIX)===0){return K;}else{return i.S_ITEM_PREFIX+K;}}
function r(K){if(K.indexOf(i.S_ITEM_PREFIX)===0){return K.substring(i.S_ITEM_PREFIX.length);}else if(K.indexOf(i.S_VARIANT_PREFIX)===0||K.indexOf(i.S_ADMIN_PREFIX)===0){return K;}else{throw new Error("Illegal item key for personalization container: '"+K+"'; must be prefixed with one of the following: ["+i.S_ITEM_PREFIX+", "+i.S_VARIANT_PREFIX+", "+i.S_ADMIN_PREFIX+"] ");}}
function u(C){return Object.keys(C).map(p).filter(function(K){return!!K;});}
function v(C,K){return C.hasOwnProperty(r(K));}
function w(C,K,V){C[r(K)]=V;}
function x(C,K){return C[r(K)];}
function y(C,K){delete C[r(K)];}
function z(H,N){var M=H&&H.filter(function(B){return B.name.toLowerCase()===N;});return M&&M[0]&&M[0].value;}
});
sap.ui.predefine('sap/ushell/adapters/local/AppStateAdapter',['sap/ushell/services/Personalization'],function(P){"use strict";var A=function(s,p,c){this._oConfig=c&&c.config;};
A.prototype._getPersonalizationService=function(){return sap.ushell.Container.getService("Personalization");};
A.prototype.saveAppState=function(k,s,v,a,c){var p=this._getPersonalizationService(),d=new jQuery.Deferred();p.createEmptyContainer(k,{keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(C){C.setItemValue("appStateData",v);C.save().done(function(){d.resolve();}).fail(function(m){d.reject(m);jQuery.sap.log.error(m);});}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};
A.prototype.loadAppState=function(k){var p=this._getPersonalizationService(),d=new jQuery.Deferred();p.getContainer(k,{keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(c){var v=c.getItemValue("appStateData");d.resolve(k,v);}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};
return A;},true);
sap.ui.predefine('sap/ushell/adapters/local/ClientSideTargetResolutionAdapter',function(){"use strict";var C=function(s,p,c){this._oConfig=c&&c.config;this._aInbounds=[];if(!this._oConfig){this._oSystemAliases={};jQuery.sap.log.warning("No configuration supplied!","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");}else{if(this._oConfig.inbounds){this._aInbounds=this._transformInboundsObjectToInboundsArray(this._oConfig.inbounds);}if(this._oConfig.applications){Array.prototype.push.apply(this._aInbounds,this._transformApplicationsToInbounds(this._oConfig.applications));}if(this._aInbounds.length===0){jQuery.sap.log.warning("Adapter got no inbounds via configuration!","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");}this._oSystemAliases=this._oConfig.systemAliases||{};jQuery.sap.log.debug("Adapter got no system aliases via configuration","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");}};
C.prototype.getInbounds=function(){var d=new jQuery.Deferred(),t=this;setTimeout(function(){d.resolve(t._aInbounds);},0);return d.promise();};
C.prototype.resolveSystemAlias=function(s){var d=new jQuery.Deferred(),t=this;setTimeout(function(){var r={};if(t._oSystemAliases.hasOwnProperty(s)){r=t._oSystemAliases[s];d.resolve(r);}else{d.reject("No system alias value available");}},0);return d.promise();};
C.prototype._transformApplicationsToInbounds=function(a){var i,I=[],A,o,b;function c(s,u){if(s==="NWBC"&&u){if(u.indexOf("/~canvas;window=app/wda")>=0){return"WDA";}return"TR";}return s;}for(i in a){if(a.hasOwnProperty(i)&&i.indexOf("_")!==0){o={};if(i.indexOf("-")>-1){b=i.split("-",2);o.semanticObject=b[0];o.action=b[1];}else if(i===""){o.semanticObject="";o.action="";}else{jQuery.sap.log.warning("Excluded syntactically incorrect intent '"+i+"' from inbounds array","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");continue;}A=a[i];o.title=A.description||"";o.signature={parameters:{}};o.signature.additionalParameters="allowed";o.resolutionResult={};o.resolutionResult.applicationType=c(A.applicationType,A.url);o.resolutionResult.additionalInformation=A.additionalInformation||"";if(o.resolutionResult.additionalInformation&&o.resolutionResult.additionalInformation.indexOf("SAPUI5.Component=")!==-1){o.resolutionResult.applicationType="SAPUI5";o.resolutionResult.ui5ComponentName=o.resolutionResult.additionalInformation.split("SAPUI5.Component=",2)[1];o.resolutionResult.applicationDependencies={self:{name:o.resolutionResult.ui5ComponentName},asyncHints:{libs:[{name:"sap.ui.core"},{name:"sap.ui.unified"}]}};}o.resolutionResult.url=A.url;I.push(o);}}return I;};
C.prototype._transformInboundsObjectToInboundsArray=function(i){var I,a=[],o;for(I in i){if(i.hasOwnProperty(I)){o=i[I];if(o.resolutionResult.additionalInformation&&o.resolutionResult.additionalInformation.indexOf("SAPUI5.Component=")!==-1){o.resolutionResult.ui5ComponentName=o.resolutionResult.additionalInformation.split("SAPUI5.Component=",2)[1];if(!o.resolutionResult.hasOwnProperty("applicationDependencies")){o.resolutionResult.applicationDependencies={self:{name:o.resolutionResult.ui5ComponentName},asyncHints:{libs:[{name:"sap.ui.core"},{name:"sap.ui.unified"}]}};}}a.push(i[I]);}}return a;};
return C;},true);
sap.ui.predefine('sap/ushell/adapters/local/ContainerAdapter',['sap/base/Log','sap/ushell/User','sap/ushell/utils'],function(L,U,u){"use strict";var C=function(s,p,a){var A,o,b,k;A=jQuery.sap.getObject("config",0,a);o={id:"DEFAULT_USER",firstName:"Default",lastName:"User",fullName:"Default User",accessibility:false,isJamActive:false,language:sap.ui.getCore().getConfiguration().getLanguage()||"en",bootTheme:{theme:"sap_belize",root:""},themeRoot:"/sap/public/bc/themes/",setAccessibilityPermitted:true,setThemePermitted:true,isLanguagePersonalized:false,setContentDensityPermitted:true,trackUsageAnalytics:null};for(k in A){if(A.hasOwnProperty(k)){o[k]=A[k];}}this.getSystem=function(){return s;};this.getUser=function(){return b;};this.sessionKeepAlive=function(){L.warning("Demo container adapter sessionKeepAlive called");};this.load=function(){var c,d,e,D,f=new jQuery.Deferred();if(A&&typeof A.setUserCallback==="string"){D=new jQuery.Deferred();c=A.setUserCallback.split(".");d=c.pop();if(c.length===0){e=window;}else{e=jQuery.sap.getObject(c.join("."));}if(e&&typeof e[d]==="function"){e[d](D);}else{throw new u.Error("ContainerAdapter local platform: Cannot execute setUserCallback - "+A.setUserCallback);}D.done(function(g){["id","firstName","lastName","fullName"].forEach(function(v){if(g[v]&&typeof A.setUserCallback!=="function"){o[v]=g[v];}});b=new U(o);f.resolve();});}else{b=new U(o);f.resolve();}return f.promise();};this.logout=function(l){jQuery.sap.log.info("Demo system logged out: "+s.getAlias(),null,"sap.ushell.adapters.local.ContainerAdapter");u.reload();return(new jQuery.Deferred()).resolve().promise();};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/local/EndUserFeedbackAdapter',['jquery.sap.storage'],function(){"use strict";var e;var E=function(s,p,a){var S="com.sap.ushell.adapters.local.EndUserFeedback";this.sendFeedback=function(f){var d,o,n;n=333;d=new jQuery.Deferred();setTimeout(function(){o=jQuery.sap.storage(jQuery.sap.storage.Type.session,S);if(o.put(n,JSON.stringify(f))===true){jQuery.sap.log.info("User Feedback "+JSON.stringify(f)+" has been sent.");d.resolve(n);}else{d.reject("Failed to save end user feedback");}},0);return d.promise();};this.getLegalText=function(){var d,l;l="This is the legal text \n in the users language.\n with multiple line breaks.";d=new jQuery.Deferred();setTimeout(function(){jQuery.sap.log.info("Legal text "+l+" for user feedback dialog has been sent.");d.resolve(l);},0);return d.promise();};this.isEnabled=function(){var d=new jQuery.Deferred();setTimeout(function(){if(e){d.resolve();}else{d.reject();}},0);return d.promise();};e=jQuery.sap.getObject("config.enabled",undefined,a);if(e===undefined){e=true;}};return E;},true);
sap.ui.predefine('sap/ushell/adapters/local/LaunchPageAdapter',["sap/ushell/resources","sap/ui/model/resource/ResourceModel","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/m/NumericContent","sap/m/library","sap/ui/core/ComponentContainer","sap/ui/thirdparty/datajs","sap/ushell/utils/WindowUtils"],function(r,R,G,I,T,N,m,C,O,W){"use strict";var a=m.GenericTileMode;var L=function(u,p,A){var c=jQuery.extend(true,[],A.config.groups),b=A.config.catalogs||[],f=0,g=10,M=10,d=10,h,j,k,l;for(k=0;k<c.length;k++){if(c[k].isDefaultGroup===true){l=c[k];break;}}if(!l&&c.length>0){l=c[0];l.isDefaultGroup=true;}this.translationBundle=r.i18n;this.TileType={Tile:"tile",Link:"link"};if(!h&&A.config.pathToLocalizedContentResources){h=new R({bundleUrl:A.config.pathToLocalizedContentResources,bundleLocale:sap.ui.getCore().getConfiguration().getLanguage()});j=h.getResourceBundle();}function _(K){if(j){return j.getText(K);}return K;}jQuery.each(b,function(i,e){if(j){e.title=_(e.title);}jQuery.each(e.tiles,function(i,n){n.getTitle=function(){return n.title;};});});jQuery.each(c,function(i,e){if(j){e.title=_(e.title);}jQuery.each(e.tiles,function(i,n){x(n,true);});});function o(){return(100*Math.random())<f;}function q(){return(100*Math.random())<g;}function s(){return M+d*Math.random();}function t(e,i){var n;for(n=0;n<e.tiles.length;n=n+1){if(i.id===e.tiles[n].id){return n;}}return-1;}function v(e,i){var n;for(n=0;n<e.length;n=n+1){if(i.id===e[n].id){return n;}}return-1;}function w(e){var D=jQuery.Deferred();window.setTimeout(function(){D.resolve(e);},s());return D.promise();}function x(e,n){if(e.tileType!=='sap.ushell.ui.tile.DynamicTile'||!e.properties||!e.properties.serviceUrl){return;}if(e.intervalTimer){clearInterval(e.intervalTimer);e.intervalTimer=undefined;}if(n){var i=e.serviceRefreshInterval;if(i){i=i*1000;}else{i=10000;}e.intervalTimer=setInterval(function(){O.read(e.properties.serviceUrl+'?id='+e.id+'&t='+new Date().getTime(),function(y){jQuery.sap.log.debug('Dynamic tile service call succeed for tile '+e.id);},function(y){jQuery.sap.log.debug('Dynamic tile service call failed for tile '+e.id+', error message:'+y);});},i);}}this.getGroups=function(){var D=jQuery.Deferred();window.setTimeout(function(){D.resolve(c.slice(0));},s());return D.promise();};this.getDefaultGroup=function(){var D=new jQuery.Deferred();D.resolve(l);return D.promise();};this.addGroup=function(e){var D=jQuery.Deferred(),F=o(),i=this;window.setTimeout(function(){if(!F){var n={id:"group_"+c.length,title:e,tiles:[]};c.push(n);D.resolve(n);}else{i.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},s());return D.promise();};this.getGroupTitle=function(e){return e.title;};this.setGroupTitle=function(e,n){var D=jQuery.Deferred(),F=o();window.setTimeout(function(){if(!F){e.title=n;D.resolve();}else{w(e).done(function(E){D.reject(E.title);}).fail(function(){D.reject();});}},s());return D.promise();};this.getGroupId=function(e){return e.id;};this.hideGroups=function(H){if(H&&c){for(var i=0;i<c.length;i++){if(H.indexOf(c[i].id)!=-1){c[i].isVisible=false;}else{c[i].isVisible=true;}}}return jQuery.Deferred().resolve();};this.isGroupVisible=function(e){return e&&(e.isVisible===undefined?true:e.isVisible);};this.moveGroup=function(e,n){var D=jQuery.Deferred(),F=o(),i=this;window.setTimeout(function(){if(!F){c.splice(n,0,c.splice(v(c,e),1)[0]);D.resolve();}else{i.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},s());return D.promise();};this.removeGroup=function(e){var D=jQuery.Deferred(),F=o(),i=this;window.setTimeout(function(){if(!F){c.splice(v(c,e),1);jQuery.each(e.tiles,function(n,y){x(y,false);});D.resolve();}else{i.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},s());return D.promise();};this.resetGroup=function(e){var D=jQuery.Deferred(),F=o(),i=this;window.setTimeout(function(){if(!F){jQuery.each(e.tiles,function(n,y){x(y,false);});e=jQuery.extend(true,{},A.config.groups[v(A.config.groups,e)]);c.splice(v(c,e),1,e);jQuery.each(e.tiles,function(n,y){x(y,true);});D.resolve(e);}else{i.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},s());return D.promise();};this.isGroupRemovable=function(e){return e&&!e.isPreset;};this.isGroupLocked=function(e){return e.isGroupLocked;};this.getGroupTiles=function(e){return e.tiles;};this.getLinkTiles=function(e){return e.links;};this.getTileTitle=function(e){return e.title;};this.getTileType=function(e){if(e.isLink){return this.TileType.Link;}return this.TileType.Tile;};this.getTileId=function(e){return e.id;};this.getTileSize=function(e){return e.size;};this.getTileTarget=function(e){var U;if(e.properties){U=e.properties.href||e.properties.targetURL;}return e.target_url||U||"";};this.isTileIntentSupported=function(e){if(e&&e.formFactor){var i=e.formFactor;var S=sap.ui.Device.system;var n;if(S.desktop){n="Desktop";}else if(S.tablet){n="Tablet";}else if(S.phone){n="Phone";}if(i.indexOf(n)===-1){return false;}}return true;};this.isLinkPersonalizationSupported=function(e){if(e){return e.isLinkPersonalizationSupported;}return true;};this.getTileView=function(e){var D=jQuery.Deferred(),F=o(),i=this;if(q()){window.setTimeout(function(){if(!F){i._getTileView(e).done(function(n){D.resolve(n);});}else{D.reject();}},s());}else{if(!F){i._getTileView(e).done(function(n){D.resolve(n);});}else{D.reject();}}return D.promise();};this._getTileView=function(i){var E='unknown error',n,y,z=this.getTileType(i)==="link",D=jQuery.Deferred(),B=this;this._translateTileProperties(i);if(i.namespace&&i.path&&i.moduleType){jQuery.sap.registerModulePath(i.namespace,i.path);if(i.moduleType==="UIComponent"){n=new C({component:sap.ui.getCore().createComponent({componentData:{properties:i.properties},name:i.moduleName}),height:'100%',width:'100%'});}else{n=sap.ui.view({viewName:i.moduleName,type:sap.ui.core.mvc.ViewType[i.moduleType],viewData:{properties:i.properties},height:'100%'});}D.resolve(n);return D.promise();}else if(i.tileType){y=z?"Link":i.tileType;if(y){var F=i.properties.targetURL||i.properties.href;try{if(F){delete i.properties.targetURL;this._createTileInstance(i,y).done(function(H){n=H;if(typeof(n.setTargetURL)==='function'){n.setTargetURL(F);}i.properties.targetURL=F;B._handleTilePress(n);B._applyDynamicTileIfoState(n);D.resolve(n);});return D.promise();}else{this._createTileInstance(i,y).done(function(H){n=H;B._handleTilePress(n);B._applyDynamicTileIfoState(n);D.resolve(n);});return D.promise();}}catch(e){D.resolve(new G({header:e&&(e.name+": "+e.message)||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(i.size)}));return D.promise();}}else{E='TileType: '+i.tileType+' not found!';}}else{E='No TileType defined!';}D.resolve(new G({header:E,frameType:this._parseTileSizeToGenericTileFormat(i.size)}));return D.promise();};this._getCatalogTileViewAsync=function(i){var D=new jQuery.Deferred(),n=this,y,E='unknown error',z,B,F=this.getTileType(i)==="link";this._translateTileProperties(i);if(i.namespace&&i.path&&i.moduleType){jQuery.sap.registerModulePath(i.namespace,i.path);if(i.moduleType==="UIComponent"){z=new C({component:sap.ui.getCore().createComponent({componentData:{properties:i.properties},name:i.moduleName}),height:'100%',width:'100%'});}else{z=sap.ui.view({viewName:i.moduleName,type:sap.ui.core.mvc.ViewType[i.moduleType],viewData:{properties:i.properties},height:'100%'});}D.resolve(z);return D.promise();}else if(i.tileType){B=F?"Link":i.tileType;if(B){var H=i.properties.targetURL||i.properties.href;try{if(H){delete i.properties.targetURL;y=this._createCatalogTileInstanceAsync(i,B);y.done(function(J){if(typeof(J.setTargetURL)==='function'){z.setTargetURL(H);}i.properties.targetURL=H;n._handleTilePress(J);n._applyDynamicTileIfoState(J);D.resolve(J);});}else{y=this._createCatalogTileInstanceAsync(i,B);y.done(function(J){n._handleTilePress(J);n._applyDynamicTileIfoState(J);D.resolve(J);});}}catch(e){D.resolve(G({header:e&&(e.name+": "+e.message)||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(i.size)}));}}else{E='TileType: '+i.tileType+' not found!';}return D.promise();}else{E='No TileType defined!';}D.resolve(G({header:E,frameType:this._parseTileSizeToGenericTileFormat(i.size)}));return D.promise();};this._getCatalogTileView=function(i){var E='unknown error',n,y,z=this.getTileType(i)==="link";this._translateTileProperties(i);if(i.namespace&&i.path&&i.moduleType){jQuery.sap.registerModulePath(i.namespace,i.path);if(i.moduleType==="UIComponent"){n=new C({component:sap.ui.getCore().createComponent({componentData:{properties:i.properties},name:i.moduleName}),height:'100%',width:'100%'});}else{n=sap.ui.view({viewName:i.moduleName,type:sap.ui.core.mvc.ViewType[i.moduleType],viewData:{properties:i.properties},height:'100%'});}return n;}else if(i.tileType){y=z?"Link":i.tileType;if(y){var B=i.properties.targetURL||i.properties.href;try{if(B){delete i.properties.targetURL;n=this._createCatalogTileInstance(i,y);if(typeof(n.setTargetURL)==='function'){n.setTargetURL(B);}i.properties.targetURL=B;}else{n=this._createCatalogTileInstance(i,y);}this._handleTilePress(n);this._applyDynamicTileIfoState(n);return n;}catch(e){return new G({header:e&&(e.name+": "+e.message)||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(i.size)});}}else{E='TileType: '+i.tileType+' not found!';}}else{E='No TileType defined!';}return new G({header:E,frameType:this._parseTileSizeToGenericTileFormat(i.size)});};this._createTileInstance=function(e,i){var n,D=jQuery.Deferred(),y=this._getImageContent({src:e.properties.icon});y.addStyleClass("sapUshellFullWidth");switch(i){case'sap.ushell.ui.tile.DynamicTile':n=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new N({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:function(E){this._genericTilePressHandler(e,E);}.bind(this)});D.resolve(n);break;case'sap.ushell.ui.tile.StaticTile':n=new G({mode:this._parseTileModeToGenericTileFormat(e.mode),header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:y}),press:function(E){this._genericTilePressHandler(e,E);}.bind(this)});D.resolve(n);break;case'Link':n=new G({mode:a.LineMode,subheader:e.properties.subtitle,header:e.properties.title,press:function(E){this._genericTilePressHandler(e,E);}.bind(this)});D.resolve(n);break;default:var z=e.tileType.replace(/\./g,'/');sap.ui.require([z],function(){var B=jQuery.sap.getObject(e.tileType);n=new B(e.properties||{});D.resolve(n);});}return D.promise();};this._createCatalogTileInstanceAsync=function(e,i){var D=new jQuery.Deferred(),n,i,y,z=this._getImageContent({src:e.properties.icon});z.addStyleClass("sapUshellFullWidth");switch(i){case'sap.ushell.ui.tile.DynamicTile':n=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new N({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:function(E){this._genericTilePressHandler(e,E);}.bind(this)});break;case'sap.ushell.ui.tile.StaticTile':n=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:z}),press:function(E){this._genericTilePressHandler(e,E);}.bind(this)});break;case'Link':n=new G({mode:a.LineMode,subheader:e.properties.subtitle,header:e.properties.title,press:function(E){this._genericTilePressHandler(e,E);}.bind(this)});break;default:var i=e.tileType,y=i.replace(/\./g,"/");sap.ui.require([y],function(B){n=new B(e.properties||{});D.resolve(n);});}D.resolve(n);return D.promise();};this._createCatalogTileInstance=function(e,i){var n,y,z,B=this._getImageContent({src:e.properties.icon});B.addStyleClass("sapUshellFullWidth");switch(i){case'sap.ushell.ui.tile.DynamicTile':n=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new N({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:function(E){this._genericTilePressHandler(e,E);}.bind(this)});break;case'sap.ushell.ui.tile.StaticTile':n=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:B}),press:function(E){this._genericTilePressHandler(e,E);}.bind(this)});break;case'Link':n=new G({mode:a.LineMode,subheader:e.properties.subtitle,header:e.properties.title,press:function(E){this._genericTilePressHandler(e,E);}.bind(this)});break;default:y=e.tileType.replace(/\./g,"/");z=sap.ui.require(y);if(!z){if(!jQuery.sap.getObject(e.tileType)){jQuery.sap.require(e.tileType);}z=jQuery.sap.getObject(e.tileType);}n=new z(e.properties||{});}return n;};this._genericTilePressHandler=function(e,E){var i={},n=sap.ushell.Container.getRenderer("fiori2");if(E.getSource().getScope&&E.getSource().getScope()==="Display"){if(e.properties.targetURL){if(e.properties.targetURL[0]==='#'){hasher.setHash(e.properties.targetURL);}else{i.title=e.properties.title;i.appType="App";i.url=e.properties.targetURL;i.appId=e.properties.targetURL;n.logRecentActivity(i);W.openURL(e.properties.targetURL,'_blank');}}}};this._parseTileSizeToGenericTileFormat=function(e){return e==="1x2"?"TwoByOne":"OneByOne";};this._parseTileModeToGenericTileFormat=function(e){return e==="HeaderMode"?a.HeaderMode:a.ContentMode;};this._parseTileValueColor=function(e){var i=e;switch(e){case"Positive":i="Good";break;case"Negative":i="Critical";break;}return i;};this._applyDynamicTileIfoState=function(e){var i=e.onAfterRendering;e.onAfterRendering=function(){if(i){i.apply(this,arguments);}var n=this.getModel(),D,y,z;if(!n){return;}D=n.getProperty('/data/display_info_state');y=this.getDomRef();z=y.getElementsByClassName('sapMTileCntFtrTxt')[0];switch(D){case'Negative':z.classList.add('sapUshellTileFooterInfoNegative');break;case'Neutral':z.classList.add('sapUshellTileFooterInfoNeutral');break;case'Positive':z.classList.add('sapUshellTileFooterInfoPositive');break;case'Critical':z.classList.add('sapUshellTileFooterInfoCritical');break;default:return;}};};this._handleTilePress=function(e){if(typeof e.attachPress==='function'){e.attachPress(function(){if(typeof e.getTargetURL==='function'){var i=e.getTargetURL();if(i){if(i[0]==='#'){hasher.setHash(i);}else{W.openURL(i,'_blank');}}}});}};this._translateTileProperties=function(e){if(this.translationBundle&&j&&!e._isTranslated){var i=e.properties,n=e.keywords;i.title=_(i.title);i.subtitle=_(i.subtitle);i.info=_(i.info);if(n){for(var y=0;y<n.length;y++){n[y]=_(n[y]);}}e._isTranslated=true;}};this.refreshTile=function(e){};this.setTileVisible=function(e,n){x(e,n);};this.addTile=function(e,i){if(!i){i=l;}var D=jQuery.Deferred(),F=o(),n=this;window.setTimeout(function(){if(!F){var y=jQuery.extend(true,{title:"A new tile was added",size:"1x1"},e,{id:"tile_0"+e.chipId});i.tiles.push(y);x(y,true);D.resolve(y);}else{n.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},s());return D.promise();};this.removeTile=function(e,i){var D=jQuery.Deferred(),F=o(),n=this;window.setTimeout(function(){if(!F){e.tiles.splice(t(e,i),1);x(i,false);D.resolve();}else{n.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},s());return D.promise();};this.moveTile=function(e,i,n,S,y,z){var D=jQuery.Deferred(),F=o(),B=this;window.setTimeout(function(){if(!F){if(y===undefined){y=S;}e.isLink=z?(z===B.TileType.Link):e.isLink;S.tiles.splice(i,1);y.tiles.splice(n,0,e);D.resolve(e);}else{B.getGroups().done(function(E){D.reject(E);}).fail(function(){D.reject();});}},s());return D.promise();};this.getTile=function(S,e){var D=jQuery.Deferred();return D.promise();};this.getCatalogs=function(){var D=jQuery.Deferred();b.forEach(function(e){window.setTimeout(function(){D.notify(e);},300);});window.setTimeout(function(){D.resolve(b);},1500);return D.promise();};this.isCatalogsValid=function(){return true;};this.getCatalogError=function(e){return;};this.getCatalogId=function(e){return e.id;};this.getCatalogTitle=function(e){return e.title;};this.getCatalogTiles=function(e){var D=jQuery.Deferred();window.setTimeout(function(){D.resolve(e.tiles);},s());return D.promise();};this.getCatalogTileId=function(e){if(e.chipId){return e.chipId;}else{return"UnknownCatalogTileId";}};this.getCatalogTileTitle=function(e){return e.title;};this.getCatalogTileSize=function(e){return e.size;};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewAsync(e);};this.getCatalogTileView=function(e){return this._getCatalogTileView(e);};this.getCatalogTileTargetURL=function(e){return(e.properties&&e.properties.targetURL)||null;};this.getCatalogTilePreviewTitle=function(e){return(e.properties&&e.properties.title)||null;};this.getCatalogTilePreviewSubtitle=function(e){return(e.properties&&e.properties.subtitle)||null;};this.getCatalogTilePreviewIcon=function(e){return(e.properties&&e.properties.icon)||null;};this.getCatalogTileKeywords=function(e){return jQuery.merge([],jQuery.grep(jQuery.merge([e.title,e.properties&&e.properties.subtitle,e.properties&&e.properties.info],(e&&e.keywords)||[]),function(n,i){return n!==""&&n;}));};this.getCatalogTileTags=function(e){return(e&&e.tags)||[];};this.addBookmark=function(P,e){var e=e?e:l,D=jQuery.Deferred(),F=o(),i=this,n=P.title,y=P.subtitle,z=P.info,B=P.url,E=this.isLinkPersonalizationSupported();window.setTimeout(function(){if(!F){var H={title:n,size:"1x1",chipId:"tile_0"+e.tiles.length,tileType:"sap.ushell.ui.tile.StaticTile",id:"tile_0"+e.tiles.length,isLinkPersonalizationSupported:E,keywords:[],properties:{icon:"sap-icon://time-entry-request",info:z,subtitle:y,title:n,targetURL:B}};e.tiles.push(H);x(H,true);D.resolve(H);}else{i.getGroups().done(function(J){D.reject(J);}).fail(function(){D.reject();});}},s());return D.promise();};this.updateBookmarks=function(U,P){var D=new jQuery.Deferred(),e=this.getGroups();e.done(function(i){i.forEach(function(n){n.tiles.forEach(function(y){if(y.properties&&y.properties.targetURL===U){for(var z in P){if(P.hasOwnProperty(z)){y.properties[z]=P[z];}}}});});D.resolve();});e.fail(function(){D.reject();});return D.promise();};this.countBookmarks=function(U){var D=jQuery.Deferred();var i=0;var e,n,y,z;for(y=0;y<c.length;y++){e=c[y];for(z=0;z<e.tiles.length;z++){n=e.tiles[z];if(n.properties.targetURL===U){i++;}}}D.resolve(i);return D.promise();};this._getImageContent=function(D){return new I(D);};this.onCatalogTileAdded=function(e){};this.getTileActions=function(e){return(e&&e.actions)||null;};};return L;},true);
sap.ui.predefine('sap/ushell/adapters/local/NavTargetResolutionAdapter',["sap/ui/thirdparty/datajs","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds"],function(d,v){"use strict";var N=function(u,p,a){var A=jQuery.sap.getObject("config.applications",0,a);var V=v.getInbounds();b(V,A);function b(V,A){V.forEach(function(i){var I=i.semanticObject+"-"+i.action;A[I]=i.resolutionResult;});}this.resolveHashFragment=function(h){var D=new jQuery.Deferred(),i,r,R,P;if(h&&h.charAt(0)!=="#"){throw new sap.ushell.utils.Error("Hash fragment expected","sap.ushell.renderers.minimal.Shell");}h=h.substring(1);if(!h&&!A[h]){D.resolve(undefined);}else{jQuery.sap.log.info("Hash Fragment: "+h);i=h.indexOf("?");if(i>=0){P=h.slice(i+1);h=h.slice(0,i);}r=A[h];if(r){R={additionalInformation:r.additionalInformation,applicationType:r.applicationType,url:r.url,text:r.text,fullWidth:r.fullWidth,isolated:r.isolated,iframeUrl:r.iframeUrl};if(P){R.url+=(R.url.indexOf("?")<0)?"?":"&";R.url+=P;}if(r.navigationMode!==undefined){R.navigationMode=r.navigationMode;}D.resolve(R);}else{D.reject("Could not resolve link '"+h+"'");}}return D.promise();};this.getSemanticObjectLinks=function(s,P){var I,r=[],i=0,D=new jQuery.Deferred(),c;if(!s){setTimeout(function(){D.resolve([]);},0);}else{c=sap.ushell.Container.getService("URLParsing").paramsToString(P);jQuery.sap.log.info("getSemanticObjectLinks: "+s);for(I in A){if(A.hasOwnProperty(I)&&I.substring(0,I.indexOf('-'))===s){r[i]=A[I];r[i].id=I;r[i].text=r[i].text||r[i].description||"no text";r[i].intent="#"+I;if(c!==""){if(r[i].intent.indexOf("?")!==-1){r[i].intent+="&"+c;}else{r[i].intent+="?"+c;}}i+=1;}}if(r){setTimeout(function(){D.resolve(r);},0);}else{setTimeout(function(){D.reject("Could not get links for  '"+s+"'");},0);}}return D.promise();};this.isIntentSupported=function(I){var D=new jQuery.Deferred(),s={},c=[],t=this;function e(i,S){s[i]={supported:S};}I.forEach(function(f,i){var o=new jQuery.Deferred();c.push(o.promise());t.resolveHashFragment(f).fail(function(E){e(f,false);o.resolve();}).done(function(g){e(f,true);o.resolve();});});if(I.length>0){jQuery.when.apply(jQuery,c).always(function(){D.resolve(s);});}else{D.resolve(s);}return D.promise();};};return N;},true);
sap.ui.predefine('sap/ushell/adapters/local/PersonalizationAdapter',['sap/ushell/utils','jquery.sap.storage'],function(u){"use strict";var m;var P=function(U,a,A){this._sStorageType=jQuery.sap.getObject("config.storageType",undefined,A)||P.prototype.constants.storage.LOCAL_STORAGE;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:sap.ui.require(['jquery.sap.storage']);break;case P.prototype.constants.storage.MEMORY:m=jQuery.sap.getObject("config.personalizationData",undefined,A)||{};break;default:throw new u.Error("Personalization Adapter Local Platform: unsupported storage type '"+this._sStorageType+"'");}};P.prototype.constants={"storage":{"MEMORY":"MEMORY","LOCAL_STORAGE":"LOCAL_STORAGE"}};
P.prototype.getAdapterContainer=function(C){return new sap.ushell.adapters.local.AdapterContainer(C,this._sStorageType);};
P.prototype.delAdapterContainer=function(C){return this.getAdapterContainer(C).del();};
sap.ushell.adapters.local.AdapterContainer=function(C,S){this._sContainerKey=C;this._sStorageType=S;this._oItemMap=new u.Map();};
function g(){return jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.sandbox.Personalization");}
function p(j){try{return JSON.parse(j);}catch(e){return undefined;}}
function s(j){return JSON.stringify(j);}
function c(j){if(j===undefined){return undefined;}try{return JSON.parse(JSON.stringify(j));}catch(e){return undefined;}}
sap.ushell.adapters.local.AdapterContainer.prototype.load=function(){var d=new jQuery.Deferred(),l,i,t=this;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){i=l.get(t._sContainerKey);t._oItemMap.entries=p(i)||{};d.resolve(t);},0);break;case P.prototype.constants.storage.MEMORY:setTimeout(function(){t._oItemMap.entries=c(m[t._sContainerKey])||{};d.resolve(t);},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};
sap.ushell.adapters.local.AdapterContainer.prototype.save=function(){var d=new jQuery.Deferred(),l,i,t=this;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){i=s(t._oItemMap.entries);l.put(t._sContainerKey,i);d.resolve();},0);break;case P.prototype.constants.storage.MEMORY:setTimeout(function(){m[t._sContainerKey]=c(t._oItemMap.entries);d.resolve();},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};
sap.ushell.adapters.local.AdapterContainer.prototype.del=function(){var d=new jQuery.Deferred(),l,t=this;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){l.remove(t._sContainerKey);t._oItemMap.entries={};d.resolve();},0);break;case P.prototype.constants.storage.MEMORY:setTimeout(function(){if(m&&m[t._sContainerKey]){delete m[t._sContainerKey];}t._oItemMap.entries={};d.resolve();},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};
sap.ushell.adapters.local.AdapterContainer.prototype.getItemKeys=function(){return this._oItemMap.keys();};
sap.ushell.adapters.local.AdapterContainer.prototype.containsItem=function(i){return this._oItemMap.containsKey(i);};
sap.ushell.adapters.local.AdapterContainer.prototype.getItemValue=function(i){return this._oItemMap.get(i);};
sap.ushell.adapters.local.AdapterContainer.prototype.setItemValue=function(i,I){this._oItemMap.put(i,I);};
sap.ushell.adapters.local.AdapterContainer.prototype.delItem=function(i){this._oItemMap.remove(i);};
return P;},true);
sap.ui.predefine('sap/ushell/adapters/local/SearchAdapter',[],function(s){"use strict";var S=function(o,p,a){this.isSearchAvailable=function(){var d=jQuery.Deferred();d.resolve(true);return d.promise();};this.getSina=function(){return{};};};return S;},true);
sap.ui.predefine('sap/ushell/adapters/local/SupportTicketAdapter',function(){"use strict";var S=function(s,p,a){this.createTicket=function(o){var d=new jQuery.Deferred(),t="1234567";d.resolve(t);return d.promise();};};return S;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserDefaultParameterPersistenceAdapter',['sap/ushell/services/Personalization'],function(P){"use strict";var U=function(s,p,c){this._oConfig=c&&c.config;};
U.prototype._getPersonalizationService=function(){return sap.ushell.Container.getService("Personalization");};
U.prototype.saveParameterValue=function(p,v){var d=new jQuery.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){jQuery.sap.log.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer().done(function(c){c.setItemValue(p,v);c.saveDeferred(50).done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};
U.prototype.deleteParameter=function(p,v){var d=new jQuery.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){jQuery.sap.log.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer().done(function(c){c.delItem(p);c.save().done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};
U.prototype.loadParameterValue=function(p){var d=new jQuery.Deferred();this._getUDContainer().done(function(c){var v=c.getItemValue(p);if(v){d.resolve(v);}else{d.reject("no value ");}}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};
U.prototype.getStoredParameterNames=function(){var d=new jQuery.Deferred();this._getUDContainer().done(function(c){var v=c.getItemKeys();d.resolve(v);}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};
U.prototype._getUDContainer=function(){var p=this._getPersonalizationService();if(this._oPromise){return this._oPromise;}this._oPromise=p.getContainer("sap.ushell.UserDefaultParameter",{keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true});return this._oPromise;};
return U;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserInfoAdapter',["jquery.sap.global","sap/ushell/services/Container","sap/ushell/services/Personalization"],function(q,C,P){"use strict";var U=function(u,p,a){var o;function g(A){var d=[{id:"sap_belize",name:"SAP Belize"}],e=q.sap.getObject("config.themes",undefined,A);return e===undefined?d:e;}this.updateUserPreferences=function(b){var d=new q.Deferred();function l(e){var E="Failed to update user preferences: "+(e&&e.message?e.message:e);q.sap.log.error(E,e&&e.stack,"com.sap.ushell.adapters.local.UserInfo");}sap.ushell.Container.getServiceAsync("Personalization").then(function(c){var s={keyCategory:c.constants.keyCategory.FIXED_KEY,writeFrequency:c.constants.writeFrequency.LOW,clientStorageAllowed:true};function e(f,b){var h=b.getChangedProperties()||[];h.forEach(function(i){f.setItemValue(i.propertyName,i.newValue);});}c.getContainer("sap.ushell.UserProfile",s,undefined).done(function(f){e(f,b);f.save().fail(function(E){l(E);d.reject(E);}).done(function(){d.resolve();});}).fail(function(E){l(E);d.reject(E);});});return d.promise();};this.getThemeList=function(){var d=new q.Deferred();if(o===undefined){o=g(a);}if(o.length===0){d.reject("no themes were configured");}else{d.resolve({options:o});}return d.promise();};this.getLanguageList=function(){var d=new q.Deferred();d.resolve([{"text":"Browser Language","key":"default"},{"text":"en-US","key":"en-US"},{"text":"en-UK","key":"en-UK"},{"text":"en","key":"en"},{"text":"de-DE","key":"de-DE"},{"text":"he-IL","key":"he-IL"},{"text":"ru-RU","key":"ru-RU"},{"text":"ru","key":"ru"}]);return d.promise();};};return U;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppCommunicationMgr',["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/Log","sap/ui/thirdparty/URI"],function(A,q,O,L,U){"use strict";var C="sap.ushell.appRuntime.ui5.AppCommunicationMgr";var s,t={},T={},a=0,b=[],p=0;
function c(){this.init=function(){var d=this;s=A.getHandlers();A.registerCommunicationHandler("sap.ushell.PostMessage",{oInboundActions:{"callTunnelFunction":{executeServiceCallFn:function(S){var e=S.oMessageData.body.content,f=d.restoreArray(e.arguments);t[e.UUID].fnCallback.apply(this,Object.values(f));return new q.Deferred().resolve().promise();}}}});d.handleMessageEvent=c.prototype._handleMessageEvent.bind(d,d);addEventListener("message",d.handleMessageEvent);};this.restoreArray=function(o){var d=[],i=0;while(o[i]){d.push(o[i]);i++;}return d;};this.destroy=function(){removeEventListener("message",this.handleMessageEvent);};this._handleMessageResponse=function(m){if(m.request_id&&b[m.request_id]){var r=b[m.request_id];if(m.status==="success"){r.resolve(m.body.result);}else{r.reject();}}};this._handleMessageRequest=function(o,m,M){var d=this,P=O.create("sap-ushell-config.services.PostMessage.config"),S=M&&M.service,e,f,g,h,i;L.debug("App Runtime received post message request from origin '"+m.origin+"': "+JSON.stringify(M),null,C);if(!S){return;}if(P&&P.enabled===false){L.warning("App Runtime received message for "+f+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,C);this.sendResponseMessage(m,M,"error",{message:"feature disabled"});return;}if(!this._isTrustedPostMessageSource(o,m)){L.warning("App Runtime received message from untrusted origin '"+m.origin+"': "+JSON.stringify(m.data),null,C);this.sendResponseMessage(m,M,"error",{message:"Invalid request"});return;}if(S.indexOf(".")>0){e=S.split(".");g=e[e.length-1];f=S.substr(0,S.length-g.length-1);}else{this.sendResponseMessage(m,M,"error",{message:"Invalid service name: '"+S+"'"});return;}var j={oMessage:m,oMessageData:M,oContainer:o};try{h=s[f];i=h&&h.oInboundActions[g];if(i&&i.executeServiceCallFn){i.executeServiceCallFn(j).done(function(r){d.sendResponseMessage(m,M,"success",{result:r});}).fail(function(k){d.sendResponseMessage(m,M,"error",{message:k});});}else{this.sendResponseMessage(m,M,"error",{message:"Unknown service name: '"+M.service+"'"});}}catch(E){this.sendResponseMessage(m,M,"error",{message:E.message});}};this._getCFLPWindow=function(){return window.parent;};this._isTrustedPostMessageSource=function(o,m){var d=false,P=o._getCFLPWindow();if(P){d=(m.source===P);}return d;};this.sendResponseMessage=function(m,M,S,B){var r=this.stringify({type:"response",service:M.service,request_id:M.request_id,status:S,body:B});L.debug("Sending post message response to origin ' "+m.origin+"': "+r,null,C);if(typeof m.source!=="object"||m.source===null){L.debug("Cannot send response message to origin ' "+m.origin,"`source` member of request message is not an object",C);return;}m.source.postMessage(r,m.origin);};this._getTargetWindow=function(){return window.parent;};this.postMessage=function(m){var d,e=this._getTargetWindow();if(m){try{if(m.type==="request"&&!m.request_id){m.request_id=this.getId();}d=this.stringify(m);e.postMessage(d,"*");}catch(f){L.error("Message '"+m+"' cannot be posted: "+f,"sap.ui5Isolation.AppCommunicationMgr");}}};this.sendMessageToOuterShell=function(m,P,r){var d=new q.Deferred(),M={"type":"request","service":m,"body":(P||{}),"request_id":r};this.postMessage(M);b[M.request_id]=d;return d.promise();};this.getId=function(){return"SAPUI5_APPRUNTIME_MSGID_"+(++p);};}
c.prototype._handleMessageEvent=function(o,m){if(m===undefined){return;}var M=m.data;if(typeof M==="string"){try{M=this.parse(m.data,this);}catch(e){L.debug("Message received from origin '"+m.origin+"' cannot be parsed: "+e,M,C);return;}}if(M.type==="request"){return o._handleMessageRequest(o,m,M);}else if(M.type==="response"){return o._handleMessageResponse(M);}};
c.prototype.stringify=function(d){var e=function(g){if(t[g]){return{type:"tunnel",UUID:t[g]};}a++;t[a]={fnCallback:g};t[g]=a;return{type:"tunnel",UUID:a};},f=[],r=JSON.stringify(d,function(k,v){if(v!==null){if(typeof v==='object'||typeof v==="function"){if(f.indexOf(v)!==-1){return;}f.push(v);}}if(typeof v==="function"){var n=T[v];if(n){return{type:"reversetunnel",UUID:n};}return e(v);}return v;});return r;};
c.prototype.parse=function(d,o){return JSON.parse(d,function(k,v){if(v&&v.type==="tunnel"){var e=function(){return o.sendMessageToOuterShell("sap.ushell.PostMessage.callTunnelFunction",{"content":{UUID:v.UUID,arguments:arguments}});};T[e]=v.UUID;return e;}else if(v&&v.type==="reversetunnel"){return t[v.UUID].fnCallback;}return v;});};
return new c();},false);
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimePostMessage',["sap/ui/thirdparty/jquery"],function(q){"use strict";var a={};
function A(){this.getHandlers=function(){return a;};this.registerCommHandlers=function(c){var i=[];Object.keys(c).forEach(function(k){var C=c[k];if(C.oInboundActions){Object.keys(C.oInboundActions).forEach(function(b){i.push({action:b,service:k});});}});q.extend(a,c);return i;};this.registerCommunicationHandler=function(k,c){var C=a[k],i=[];if(!C){C=a[k]={oInboundActions:{}};}if(c.oInboundActions){Object.keys(c.oInboundActions).forEach(function(b){C.oInboundActions[b]=c.oInboundActions[b];i.push({action:b,service:k});});}return i;};this._getPostMesageInterface=function(s,i){var c=a[s],I;if(c&&c.oRequestCalls&&c.oRequestCalls[i]){I=c.oRequestCalls[i];}return I;};}
return new A();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI',["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A,a){"use strict";
function b(){this.getHandlers=function(){return A.getHandlers();};this.registerCommHandlers=function(c){var i=A.registerCommHandlers(c);a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.subscribe",i);};this.registerCommunicationHandler=function(k,c){var i=A.registerCommunicationHandler(k,c);a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.subscribe",i);};this._getPostMesageInterface=function(s,i){return A._getPostMesageInterface(s,i);};}
return new b();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimeService',["sap/ushell/appRuntime/ui5/AppCommunicationMgr"],function(A){"use strict";
function a(){this.sendMessageToOuterShell=function(m,p,r){return A.sendMessageToOuterShell(m,p,r);};}
return new a();},false);
sap.ui.predefine('sap/ushell/appRuntime/ui5/SessionHandlerAgent',["sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/jquery"],function(A,a,q){"use strict";
function S(){this.init=function(){var t=this;A.registerCommunicationHandler("sap.ushell.sessionHandler",{oInboundActions:{"logout":{executeServiceCallFn:function(m){return t.handleLogoutEvent(m);}},"extendSessionEvent":{executeServiceCallFn:function(m){return t.handleExtendSessionEvent(m);}}}});this.attachUserEvents();this.userActivityHandler();};this.handleLogoutEvent=function(){var d=new q.Deferred();this.detachUserEvents();sap.ushell.Container.logout().then(function(){return d.resolve().promise();});return d.promise();};this.handleExtendSessionEvent=function(){sap.ushell.Container.sessionKeepAlive();return new q.Deferred().resolve().promise();};this.attachUserEvents=function(){q(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this));};this.detachUserEvents=function(){q(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");q(document).off("keydown.sessionTimeout");q(document).off("touchstart.sessionTimeout");};this.userActivityHandler=function(e){if(this.oUserActivityTimer!==undefined){return;}var t=this;this.oUserActivityTimer=setTimeout(function(){a.sendMessageToOuterShell("sap.ushell.sessionHandler.notifyUserActive",{});t.oUserActivityTimer=undefined;},1000);};}
var s=new S();return s;});
sap.ui.predefine('sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer',["sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/Log"],function(A,L){"use strict";var b=[];
function R(){var t=this;sap.ushell=(sap.ushell||{});sap.ushell.renderers=(sap.ushell.renderers||{});sap.ushell.renderers.fiori2=(sap.ushell.renderers.fiori2||{});sap.ushell.renderers.fiori2.Renderer=this;["init","createContent","createExtendedShellState","applyExtendedShellState","showLeftPaneContent","showHeaderItem","showRightFloatingContainerItem","showRightFloatingContainer","showToolAreaItem","showFloatingActionButton","showHeaderEndItem","setHeaderVisibility","showSubHeader","showSignOutItem","showSettingsItem","setFooter","setShellFooter","setFooterControl","hideHeaderItem","removeToolAreaItem","removeRightFloatingContainerItem","hideLeftPaneContent","hideFloatingActionButton","hideSubHeader","removeFooter","getCurrentViewportState","addShellSubHeader","addSubHeader","addUserAction","addActionButton","addFloatingButton","addFloatingActionButton","addSidePaneContent","addLeftPaneContent","addHeaderItem","addRightFloatingContainerItem","addToolAreaItem","getModelConfiguration","addEndUserFeedbackCustomUI","addUserPreferencesEntry","setHeaderTitle","setLeftPaneVisibility","showToolArea","setHeaderHiding","setFloatingContainerContent","setFloatingContainerVisibility","getFloatingContainerVisiblity","getRightFloatingContainerVisibility","setFloatingContainerDragSelector","makeEndUserFeedbackAnonymousByDefault","showEndUserFeedbackLegalAgreement","createTriggers","convertButtonsToActions","createItem","addEntryInShellStates","removeCustomItems","addCustomItems","addRightViewPort","addLeftViewPort","getShellController","getViewPortContainerCurrentState","ViewPortContainerNavTo","switchViewPortStateByControl","setMeAreaSelected","getMeAreaSelected","setNotificationsSelected","getNotificationsSelected","addShellDanglingControl","getShellConfig","getEndUserFeedbackConfiguration","reorderUserPrefEntries","addUserProfilingEntry","logRecentActivity","setCurrentCoreView","getCurrentCoreView"].forEach(function(m){t[m]=function(){L.error("'Renderer' api '"+m+"' is not supported when UI5 application is running inside an iframe (sap.ushell.appRuntime.ui5.renderers.fiori2.Renderer)");};});this.LaunchpadState={App:"app",Home:"home"};this._addButtonHandler=function(i,h){b[i]=h;};this.handleHeaderButtonClick=function(B){if(b[B]!==undefined){b[B]();}};this.addHeaderItem=function(c,C,i,a,s){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){C=arguments[0];i=arguments[1];a=arguments[2];s=arguments[3];}this._addHeaderItem("sap.ushell.services.Renderer.addHeaderItem",C,i,a,s);};this.addHeaderEndItem=function(c,C,i,a,s){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){C=arguments[0];i=arguments[1];a=arguments[2];s=arguments[3];}this._addHeaderItem("sap.ushell.services.Renderer.addHeaderEndItem",C,i,a,s);};this.showHeaderItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.showHeaderItem",{"aIds":i,"bCurrentState":true,"aStates":""});};this.showHeaderEndItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.showHeaderEndItem",{"aIds":i,"bCurrentState":true,"aStates":""});};this.hideHeaderItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.hideHeaderItem",{"aIds":i,"bCurrentState":true,"aStates":""});};this.hideHeaderEndItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.hideHeaderEndItem",{"aIds":i,"bCurrentState":true,"aStates":""});};this._addHeaderItem=function(a,c,i){if(c.click!==undefined){b[c.id]=c.click;}if(c.press!==undefined){b[c.id]=c.press;}A.sendMessageToOuterShell(a,{sId:c.id,sTooltip:c.tooltip,sIcon:c.icon,bVisible:i,bCurrentState:true});};this.setHeaderTitle=function(T){A.sendMessageToOuterShell("sap.ushell.services.Renderer.setHeaderTitle",{"sTitle":T});};this.setHeaderVisibility=function(v,c,s){A.sendMessageToOuterShell("sap.ushell.services.Renderer.setHeaderVisibility",{"bVisible":v,"bCurrentState":c,"aStates":s});};this.createShellHeadItem=function(p){if(p.press!==undefined){b[p.id]=p.press;delete p.press;}A.sendMessageToOuterShell("sap.ushell.services.Renderer.createShellHeadItem",{params:p});};this.showActionButton=function(i,c,s){A.sendMessageToOuterShell("sap.ushell.services.Renderer.showActionButton",{"aIds":i,"bCurrentState":c,"aStates":s});};this.hideActionButton=function(i,c,s){A.sendMessageToOuterShell("sap.ushell.services.Renderer.hideActionButton",{"aIds":i,"bCurrentState":c,"aStates":s});};this.addUserAction=function(p){if(p.oControlProperties.press!==undefined){b[p.oControlProperties.id]=p.oControlProperties.press;delete p.oControlProperties["press"];}A.sendMessageToOuterShell("sap.ushell.services.Renderer.addUserAction",{"oParameters":p});};}
return new R();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions',['sap/ushell/EventHub','sap/base/util/ObjectPath'],function(E,O){"use strict";
function _(C){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"});},0);E.emit("RendererLoaded",{rendererName:"fiori2"});}
function a(x,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",x,D);},0);}
function b(I,L,x){}
function c(I,L,x){}
function d(I,L,x){}
function e(I,L,x){}
function f(B,L,x){}
function g(B,L,x){}
function h(C,L,x){}
function i(L,x){}
function j(I,L,x){}
function k(I,L,x){}
function l(I,L,x){}
function m(I,L,x){}
function n(){return{};}
function o(I,L,T,x){}
function p(C,S){}
function q(x){}
function r(T){}
function s(L,V){}
function t(H){}
function u(F){}
function v(){}
function R(){this.addHeaderItem=d;this.setHeaderItemVisibility=o;this.addSubHeader=b;this.removeSubHeader=c;this.addHeaderEndItem=l;this.removeHeaderItem=e;this.removeHeaderEndItem=m;this.addEndUserFeedbackCustomUI=p;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=g;this.setFooter=u;this.removeFooter=v;this.addUserPreferencesEntry=q;this.setHeaderTitle=r;this.setHeaderHiding=t;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=j;this.removeFloatingActionButton=k;this.setLeftPaneContent=h;this.removeLeftPaneContent=i;this.setLeftPaneVisibility=s;this.getConfiguration=n;}
var w=new R();var U={publishExternalEvent:a,init:_};O.set("sap.ushell.renderers.fiori2.utils",U);O.set("sap.ushell.renderers.fiori2.RendererExtensions",w);return w;},false);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppDelegationBootstrap',["sap/ushell/appRuntime/ui5/services/TunnelsAgent"],function(t){"use strict";
function A(){this.init=function(){};this.bootstrap=function(){t.reflectEvents({"addlistener":{iInterface:document,sFuncName:"addEventListener",fnProxy:function(e,c,u){var C={};if(c.getPairedInterface){C={pairedInterface:c.getPairedInterface()};}else{C=c;}return[e,C,u];},fnSpy:function(e){return e==="click"||e==="keypress";}},"removelistener":{iInterface:document,sFuncName:"removeEventListener",fnProxy:function(e,c,u){var C={};if(c.getPairedInterface){C={pairedInterface:c.getPairedInterface()};}else{C=c;}return[e,C,u];},fnSpy:function(e){return e==="click"||e==="keypress";}},"appOpening":{iInterface:sap.ui.getCore().getEventBus(),sFuncName:"subscribe",fnSpy:function(p,e){return p==="launchpad"&&e==="appOpening";}}});};}
return new A();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent',["sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/util/UriParameters","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/ushell/appRuntime/ui5/services/TunnelsAgent","sap/ushell/appRuntime/ui5/services/AppDelegationBootstrap"],function(A,a,U,b,q,t,d){"use strict";
function c(C){var e=this,f,g,o={},r,R,h={};this.getAppInfo=function(m,i,j){sap.ui.require([m.replace(/\./g,"/")],function(f){e.init(f,i,j);});};this.init=function(i,j,k){f=i;g=j;R=k;A.registerCommHandlers({"sap.ushell.services.appLifeCycle":{"oInboundActions":{"create":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data),s=new U(M.body.sUrl).get("sap-ui-app-id");window.hasher.replaceHash(M.body.sHash);e.create(s,M.body.sUrl);return new q.Deferred().resolve().promise();}},"destroy":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data);e.destroy(M.body.sCacheId);return new q.Deferred().resolve().promise();}},"store":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data);e.store(M.body.sCacheId);return new q.Deferred().resolve().promise();}},"restore":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data);window.hasher.replaceHash(M.body.sHash);e.restore(M.body.sCacheId);return new q.Deferred().resolve().promise();}}}},"sap.ushell.eventDelegation":{"oInboundActions":{"registerEventHandler":{executeServiceCallFn:function(s){var E=JSON.parse(s.oMessageData.body.sEventObject),l=E.eventKey,m=E.eventData;if(h.hasOwnProperty(l)){var n=h[l];for(var p=0;p<n.length;p++){n[p](m);}}return new q.Deferred().resolve().promise();}}}}});this.initialSetup();};this.initialSetup=function(){d.bootstrap();a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.setup",{isStateful:true,isKeepAlive:true,lifecycle:{bActive:true,bSwitch:true,bStorageIdentifier:true},settings:{bTheme:true,bLocal:true},session:{bSignOffSupport:true,bExtendSessionSupport:true}});};this.restore=function(s){var i=o[s],j=i.getComponentInstance();i.setVisible(true);if(j){if(j.restore){j.restore();}if(j.getRouter&&j.getRouter()&&j.getRouter().initialize){j.getRouter().initialize();}r=i;}};this.store=function(s){var i=r,j;o[s]=i;j=i.getComponentInstance();i.setVisible(false);if(j){if(j.suspend){j.suspend();}if(j.getRouter&&j.getRouter()){j.getRouter().stop();}}};this.getURLParameters=function(u){return new Promise(function(i,j){if(u.hasOwnProperty("sap-intent-param")){var s=u["sap-intent-param"];a.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{"sAppStateKey":s}).then(function(p){delete u["sap-intent-param"];var k=q.extend({},u,(new b("?"+p)).query(true),true);i(k);},function(E){i(u);});}else{i(u);}});};this.create=function(i,u){var j=new Promise(function(k){f.getAppInfo(i).then(function(l){k(l);});}).then(function(k){e.getURLParameters(new b(u).query(true)).then(function(l){g(i,l,k).then(function(m){R(m);});});});return j;};this.setComponent=function(i){r=i;};this.destroy=function(s){if(s){if(o[s]===r){r=undefined;}o[s].destroy();delete o[s];}else if(r){r.destroy();r=undefined;}};this.jsonStringifyFn=function(j){var s=JSON.stringify(j,function(k,v){return(typeof v==="function")?v.toString():v;});return s;};}
return new c();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppState',["sap/ushell/services/AppState","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/services/_AppState/AppState","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(A,a,b,u,q){"use strict";
function c(o,C,p,d){A.call(this,o,C,p,d);this.getAppState=function(k){var D=new q.Deferred();a.sendMessageToOuterShell("sap.ushell.services.AppState.getAppState",{"sKey":k}).done(function(s){var e=new b(sap.ushell.Container.getService("AppState"),s._sKey,s._bModifiable,s._sData,s._sAppName,s._sACHComponent,s._bTransient,s._iPersistencyMethod,s._oPersistencySettings);D.resolve(e);});return D.promise();};this._saveAppState=function(k,D,s,e,t,P,f){return a.sendMessageToOuterShell("sap.ushell.services.AppState._saveAppState",{"sKey":k,"sData":D,"sAppName":s,"sComponent":e,"bTransient":t,"iPersistencyMethod":P,"oPersistencySettings":f});};this._loadAppState=function(k){return a.sendMessageToOuterShell("sap.ushell.services.AppState._loadAppState",{"sKey":k});};this.getAppStateData=function(k){return a.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{"sAppStateKey":k});};this.createNewInAppState=function(D){return a.sendMessageToOuterShell("sap.ushell.services.AppState.createNewInAppState",{"sData":D});};this.updateInAppStateData=function(D){return a.sendMessageToOuterShell("sap.ushell.services.AppState.updateInAppState",{"sData":D});};this.getInAppStateData=function(){return a.sendMessageToOuterShell("sap.ushell.services.AppState.getInAppStateData");};this.makeStatePersistent=function(k,P,e){return a.sendMessageToOuterShell("sap.ushell.services.AppState.makeStatePersistent",{"sKey":k,"iPersistencyMethod":P,"oPersistencySettings":e});};}
c.prototype=Object.create(A.prototype);c.hasNoAdapter=A.hasNoAdapter;c.WindowAdapter=A.WindowAdapter;return c;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/Bookmark',["sap/ushell/services/Bookmark","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(B,A){"use strict";
function a(c,p,s){B.call(this,c,p,s);this.addBookmark=function(P,g){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addBookmarkUI5",{"oParameters":P,"oGroup":g});};this.getShellGroupIDs=function(){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.getShellGroupIDs");};this.addBookmarkByGroupId=function(P,g){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addBookmark",{"oParameters":P,"groupId":g});};this.addCatalogTileToGroup=function(C,g,o){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addCatalogTileToGroup",{"sCatalogTileId":C,"sGroupId":g,"oCatalogData":o});};this.countBookmarks=function(u){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.countBookmarks",{"sUrl":u});};this.deleteBookmarks=function(u){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.deleteBookmarks",{"sUrl":u});};this.updateBookmarks=function(u,P){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.updateBookmarks",{"sUrl":u,"oParameters":P});};}
a.prototype=Object.create(B.prototype);a.hasNoAdapter=B.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/Container',["sap/ushell/services/Container","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer","sap/ushell/appRuntime/ui5/ui/UIProxy"],function(c,A,R,U){"use strict";
function C(){var o;this.bootstrap=function(p,a){return sap.ushell.bootstrap(p,a).then(function(b){o=sap.ushell.Container.setDirtyFlag;sap.ushell.Container.runningInIframe=function(){try{return window.self!==window.top;}catch(e){return true;}};sap.ushell.Container.setDirtyFlag=function(i){o(i);A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setDirtyFlag",{"bIsDirty":i});};sap.ushell.Container.getFLPUrl=function(i){return A.sendMessageToOuterShell("sap.ushell.services.Container.getFLPUrl",{"bIncludeHash":i});};sap.ushell.Container.getRenderer=function(){return R;};});};}
return new C();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/CrossApplicationNavigation',["sap/ushell/services/CrossApplicationNavigation","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/services/_AppState/AppState","sap/ui/thirdparty/jquery"],function(C,A,a,q){"use strict";
function b(c,p,s){C.call(this,c,p,s);this.backToPreviousApp=function(){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.backToPreviousApp");};this.expandCompactHash=function(h){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.expandCompactHash",{"sHashFragment":h});};this.getDistinctSemanticObjects=function(){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getDistinctSemanticObjects");};this.getLinks=function(v){if(Array.isArray(v)){v.forEach(function(e){if(e[0]){delete e[0].ui5Component;}});}else{delete v.ui5Component;}return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getLinks",v);};this.getPrimaryIntent=function(S,P){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getPrimaryIntent",{"sSemanticObject":S,"mParameters":P});};this.getSemanticObjectLinks=function(S,P,i,o,d,e){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks",{"sSemanticObject":S,"mParameters":P,"bIgnoreFormFactor":i,"sAppStateKey":d,"bCompactIntents":e});};this.historyBack=function(S){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.historyBack",{"iSteps":S});};this.isIntentSupported=function(i,o){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isIntentSupported",{"aIntents":i});};this.isNavigationSupported=function(i,o){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isNavigationSupported",{"aIntents":i});};this.toExternal=function(o,d){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.toExternal",{"oArgs":o});};this.getAppState=function(o,d){var D=new q.Deferred();A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppState",{"sAppStateKey":d}).done(function(S){var e=new a(sap.ushell.Container.getService("AppState"),S._sKey,S._bModifiable,S._sData,S._sAppName,S._sACHComponent,S._bTransient);D.resolve(e);});return D.promise();};}
b.prototype=Object.create(C.prototype);b.hasNoAdapter=C.hasNoAdapter;return b;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/LaunchPage',["sap/ushell/services/LaunchPage","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(L,A){"use strict";
function a(c,p,s){L.call(this,c,p,s);this.getGroupsForBookmarks=function(){return A.sendMessageToOuterShell("sap.ushell.services.LaunchPage.getGroupsForBookmarks");};}
a.prototype=Object.create(L.prototype);a.hasNoAdapter=L.hasNoAdapter;return a;},false);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/TunnelsAgent',["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A){"use strict";
function T(){var t={},a=this;this.reflectEvents=function(s){for(var S in s){if(s.hasOwnProperty(S)){this.reflectEventEntry(S,s[S]);}}};this.reflectEventEntry=function(s,S){var i=S.iInterface,f=S.sFuncName,b=s,c=S.fnSpy,p=S.fnProxy,e="",C=function(){var o=arguments,d=c.apply(undefined,arguments);if(p){o=p.apply(undefined,arguments);}if(d){a.callTunnel({tunnelName:b,oData:o});}};if(!S.iInterface){e+="strategy "+s+" is missing mandatory property 'iInterface'.\n";}if(!S.sFuncName){e+="strategy "+s+" is missing mandatory property 'sFuncName'.\n";}if(e){throw e;}this.replace({iInterface:i,sFuncName:f,fnCallback:C,sWrap:"after"});};this.getCallTunnelFunction=function(){var t={},a=this;return function(p){var f=p.tunnelName,o=p.oData;if(!t[f]){a.getTunnel(f).done(function(r){t[f]=r.endPoint;t[f].apply(undefined,o);});}else{t[f].apply(undefined,o);}};};this.callTunnel=function(p){var f=p.tunnelName,o=p.oData;return new Promise(function(r){if(!t[f]){a.getTunnel(f).done(function(R){t[f]=R.endPoint;t[f].apply(undefined,o).done(function(d){r(d);});});}else{t[f].apply(undefined,o).done(function(d){r(d);});}});};this.replace=function(p){var o=p.iInterface[p.sFuncName],w=p.sWrap;p.iInterface[p.sFuncName]=function(){if(w==="before"){o.apply(this,arguments);}p.fnCallback.apply(undefined,arguments);if(w==="after"){o.apply(this,arguments);}};return{getOriginal:function(){return o;}};};this.useInterface=function(d){var i=d.name,c=d.callback,p=d.params;var C="sap.ushell.tunnelRegistry."+i;A.sendMessageToOuterShell(C,p).done(c);};this.getTunnel=function(s){var c="sap.ushell.tunnelRegistry."+s;return A.sendMessageToOuterShell(c,{});};this.usePairedInterface=function(c){var s=c.sService,m=c.sMethodName,p=c.fnPackArgs,C=s+"."+m;var b=function(){var P=p.apply(undefined,arguments);return A.sendMessageToOuterShell(C,P);};b.getPairedInterface=function(){return[s,m].join('.');};return b;};}
return new T();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/UserInfo',["sap/ushell/services/UserInfo","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/jquery","sap/base/Log"],function(U,A,q,L){"use strict";
function a(o,c){U.call(this,o,c);this.getThemeList=function(){L.warning("'UserInfo.getThemeList' is private API and should not be called");return q.Deferred().resolve().promise();};this.updateUserPreferences=function(){L.warning("'UserInfo.updateUserPreferences' is private API and should not be called");return q.Deferred().resolve().promise();};this.getLanguageList=function(){L.warning("'UserInfo.getLanguageList' is private API and should not be called");return q.Deferred().resolve().promise();};}
a.prototype=Object.create(U.prototype);a.hasNoAdapter=U.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/adapters/ContainerAdapter',["sap/ushell/User","sap/ui/thirdparty/jquery"],function(U,q){"use strict";var C=function(s,p,a){var u;this.load=function(){var b=q.extend(true,{id:""},a&&a.config&&a.config.userProfile&&a.config.userProfile.defaults);u=new U(b);return new q.Deferred().resolve().promise();};this.getSystem=function(){return s;};this.getUser=function(){return u;};this.logout=function(){return new q.Deferred().resolve().promise();};};return C;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/ui/UIProxy',["sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer","sap/m/Button"],function(R,B){"use strict";
function U(){sap.ushell=sap.ushell||{};sap.ushell.ui=sap.ushell.ui||{};sap.ushell.ui.shell=sap.ushell.ui.shell||{};sap.ushell.ui.shell.ShellHeadItem=function(p){var t=this;Object.keys(p).forEach(function(P){t[P]=p[P];t["get"+P[0].toUpperCase()+P.slice(1)]=function(){return p[P];};});R.createShellHeadItem(p);};}
return new U();});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5datetimeformat',[],function(){"use strict";return c;
function c(u){var U=u&&u.services&&u.services.Container&&u.services.Container.adapter&&u.services.Container.adapter.config&&u.services.Container.adapter.config.userProfile;var m="Date Format is incorrectly set for the User";var M="Time Format is incorrectly set for the User";try{var s=U&&U.defaults&&U.defaults.sapDateFormat;sap.ui.getCore().getConfiguration().getFormatSettings().setLegacyDateFormat(s);}catch(e){jQuery.sap.log.error(m,e.stack,"sap/ushell/bootstrap/common/common.configure.ui5datetimeformat");}try{var S=U&&U.defaults&&U.defaults.sapTimeFormat;sap.ui.getCore().getConfiguration().getFormatSettings().setLegacyTimeFormat(S);}catch(e){jQuery.sap.log.error(M,e.stack,"sap/ushell/bootstrap/common/common.configure.ui5datetimeformat");}}
},true);
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.xhrlogon',["jquery.sap.global","sap/ushell/bootstrap/common/common.util"],function(q,u){"use strict";var m={start:s,initXhrLogonIgnoreList:i,createUi5ConnectedXhrLogger:c};return m;
function c(){return["error","warning","info","debug"].reduce(function(x,l){x[l]=function(M){return q.sap.log[l](M);};return x;},{});}
function i(x){var o=u.getLocationOrigin(),U=q.sap.getModulePath("");if(U&&U.indexOf(o+"/")===-1){x.ignore.add(U);}}
function s(S,x){x.start();m.initXhrLogonIgnoreList(x.XHRLogonManager.getInstance());XMLHttpRequest.logger=c();S.oFrameLogonManager=x.FrameLogonManager.getInstance();}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.create.configcontract.core',[],function(){"use strict";
function c(m){function g(p,d){var s=a(p);return s!==undefined?s:d;}function a(p){var P=p.split("/");var l=P.pop();var d=P.reduce(function(o,s){if(!o||!o.hasOwnProperty(s)){return{};}return o[s];},m);return d[l];}function e(p,o){var E=g("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined);var P=g("renderers/fiori2/componentData/config/applications/Shell-home/"+p,undefined);var O=g("renderers/fiori2/componentData/config/applications/Shell-home/"+o,undefined);P=(E===false)?false:P;P=(P!==undefined)?P:E;if(E==undefined||E){if(P===false){return false;}else{return(O!==undefined)?O:P;}}else{return false;}}var C={core:{extension:{enableHelp:g("renderers/fiori2/componentData/config/enableHelp",false),EndUserFeedback:g("services/EndUserFeedback/config/enabled",true),SupportTicket:g("services/SupportTicket/config/enabled",false)},navigation:{enableInPlaceForClassicUIs:{GUI:g("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/GUI",false),WDA:g("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WDA",false),WCF:g("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WCF",true)},enableWebguiLocalResolution:true,enableWdaLocalResolution:true,flpURLDetectionPattern:g("services/ClientSideTargetResolution/config/flpURLDetectionPattern","[/]FioriLaunchpad.html[^#]+#[^-]+?-[^-]+")},notifications:{enableNotificationsPreview:g("renderers/fiori2/componentData/config/applications/Shell-home/initialStateNotificationsPreview",g("services/Notifications/config/enableNotificationsPreview",false))},shell:{animationMode:g("renderers/fiori2/componentData/config/animationMode",'full'),enablePersonalization:g("renderers/fiori2/componentData/config/enablePersonalization",g("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true)),enableRecentActivity:g("renderers/fiori2/componentData/config/enableRecentActivity",true),enableRecentActivityLogging:g("renderers/fiori2/componentData/config/enableRecentActivityLogging",true),enableFiori3:g("ushell/shell/enableFiori3",false),model:{enableSAPCopilotWindowDocking:undefined,enableBackGroundShapes:true,personalization:undefined,contentDensity:undefined,setTheme:undefined,userDefaultParameters:undefined,disableHomeAppCache:undefined,enableHelp:undefined,ShellAppTitleState:undefined,enableTrackingActivity:undefined,animationMode:"full",searchAvailable:false,title:"",searchFiltering:true,showEndUserFeedback:false,searchTerm:"",isPhoneWidth:false,enableNotifications:false,enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",userStatus:undefined,migrationConfig:undefined,allMyAppsMasterLevel:undefined,options:[],userStatusUserEnabled:true,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},userPreferences:{dialogTitle:"Settings",isDetailedEntryMode:false,activeEntryPath:null,entries:[],profiling:[]},userImage:{personPlaceHolder:"sap-icon://person-placeholder",account:"sap-icon://account"},currentState:{stateName:"blank",showCurtain:false,headerVisible:true,showCatalog:false,showPane:false,showRightFloatingContainer:false,headItems:[],showRecentActivity:true,headEndItems:[],search:"",paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],application:{},showLogo:false}}},home:{animationRendered:false,disableSortedLockedGroups:g("renderers/fiori2/componentData/config/applications/Shell-home/disableSortedLockedGroups",false),draggedTileLinkPersonalizationSupported:true,editTitle:false,enableActionModeFloatingButton:g("renderers/fiori2/componentData/config/enableActionModeFloatingButton",g("renderers/fiori2/componentData/config/applications/Shell-home/enableActionModeFloatingButton",true)),enableActionModeMenuButton:g("renderers/fiori2/componentData/config/enableActionModeMenuButton",g("renderers/fiori2/componentData/config/applications/Shell-home/enableActionModeMenuButton",true)),enableDragIndicator:g("renderers/fiori2/componentData/config/enableDragIndicator",g("renderers/fiori2/componentData/config/applications/Shell-home/enableDragIndicator",false)),enableHomePageSettings:g("renderers/fiori2/componentData/config/applications/Shell-home/enableHomePageSettings",true),enableLockedGroupsCompactLayout:g("renderers/fiori2/componentData/config/enableLockedGroupsCompactLayout",g("renderers/fiori2/componentData/config/applications/Shell-home/enableLockedGroupsCompactLayout",false)),enableRenameLockedGroup:g("renderers/fiori2/componentData/config/applications/Shell-home/enableRenameLockedGroup",false),enableTileActionsIcon:g("renderers/fiori2/componentData/config/enableTileActionsIcon",g("renderers/fiori2/componentData/config/applications/Shell-home/enableTileActionsIcon",false)),enableTilesOpacity:g("services/ClientSideTargetResolution/config/enableTilesOpacity",g("renderers/fiori2/componentData/config/applications/Shell-home/enableTilesOpacity",true)),homePageGroupDisplay:g("renderers/fiori2/componentData/config/applications/Shell-home/homePageGroupDisplay","scroll"),isInDrag:false,optimizeTileLoadingThreshold:g("renderers/fiori2/componentData/config/applications/Shell-home/optimizeTileLoadingThreshold",100),sizeBehavior:g("renderers/fiori2/componentData/config/sizeBehavior","Responsive"),sizeBehaviorConfigurable:g("renderers/fiori2/componentData/config/sizeBehaviorConfigurable",false),wrappingType:g("ushell/home/tilesWrappingType","Normal"),segments:g("renderers/fiori2/componentData/config/applications/Shell-home/segments",undefined),tileActionModeActive:false,tileActionModeEnabled:g("renderers/fiori2/componentData/config/enableActionModeMenuButton",g("renderers/fiori2/componentData/config/applications/Shell-home/enableActionModeMenuButton",true))||g("renderers/fiori2/componentData/config/enableActionModeFloatingButton",g("renderers/fiori2/componentData/config/applications/Shell-home/enableActionModeFloatingButton",true))},catalog:{appFinderDisplayMode:g("renderers/fiori2/componentData/config/applications/Shell-home/appFinderDisplayMode",undefined),easyAccessNumbersOfLevels:g("renderers/fiori2/componentData/config/applications/Shell-home/easyAccessNumbersOfLevels",undefined),enableCatalogSearch:g("renderers/fiori2/componentData/config/enableSearchFiltering",g("renderers/fiori2/componentData/config/applications/Shell-home/enableSearchFiltering",g("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSearch",true))),enableCatalogSelection:g("renderers/fiori2/componentData/config/enableCatalogSelection",g("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSelection",true)),enableCatalogTagFilter:g("renderers/fiori2/componentData/config/applications/Shell-home/enableTagFiltering",g("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogTagFilter",true)),enableEasyAccess:g("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined),enableEasyAccessSAPMenu:(g("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:g("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenu",g("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessSAPMenuSearch:e("enableEasyAccessSAPMenu","enableEasyAccessSAPMenuSearch"),enableEasyAccessUserMenu:(g("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:g("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenu",g("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessUserMenuSearch:e("enableEasyAccessUserMenu","enableEasyAccessUserMenuSearch"),enableHideGroups:g("renderers/fiori2/componentData/config/enableHideGroups",g("renderers/fiori2/componentData/config/applications/Shell-home/enableHideGroups",true)),sapMenuServiceUrl:undefined,userMenuServiceUrl:g("renderers/fiori2/componentData/config/applications/Shell-home/userMenuServiceUrl",undefined)}}};return C;}
return c;},false);
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.launchpad',[],function(){"use strict";return l;
function l(){sap.ui.require(["sap/ushell/iconfonts","sap/ushell/services/AppConfiguration"],function(I,C){window.sap.ushell.Container.createRenderer(null,true).then(function(c){c.placeAt("canvas","only");});I.registerFiori2IconFont();});}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.model',['sap/ushell/Config','sap/ui/model/json/JSONModel'],function(C,J){"use strict";var _=undefined,m,s;
function a(){var S=C.last("/core"),A=undefined;var i={animationMode:A?A:S.shell.animationMode,groups:[],rtl:sap.ui.getCore().getConfiguration().getRTL(),personalization:S.shell.enablePersonalization,tagList:[],selectedTags:[],userPreferences:{entries:[]},enableNotificationsPreview:S.notifications.enableNotificationsPreview,enableHelp:S.extension.enableHelp,previewNotificationItems:[],enableTileActionsIcon:sap.ui.Device.system.desktop?S.home.enableTileActionsIcon:false};i=jQuery.extend({},S.catalog,S.home,i);_=new J(i);_.setSizeLimit(10000);}
function b(){sap.ui.getCore().getEventBus().subscribe("shell","changeNotificationPreview",s._updateNotificationPreview,this);sap.ui.getCore().getEventBus().subscribe('launchpad','afterSwitchState',s._handleShellViewPortSateChange,this);var g=window.matchMedia("(min-width: 800px)");if(g.addListener){g.addListener(s._handleMedia);s._handleMedia(g);}}
function c(){sap.ui.getCore().getEventBus().unsubscribe("shell","changeNotificationPreview",s._updateNotificationPreview,this);sap.ui.getCore().getEventBus().unsubscribe('launchpad','afterSwitchState',s._handleShellViewPortSateChange,this);}
s={_handleMedia:function(g){_.setProperty("/isPhoneWidth",!g.matches);},_updateNotificationPreview:function(g,E,D){var p=D;_.setProperty("/userEnableNotificationsPreview",p.bUserEnableNotificationsPreview);_.setProperty("/configEnableNotificationsPreview",p.bConfigEnableNotificationsPreview);if(p.bMainFlagExists===true){_.setProperty("/enableNotificationsPreview",p.bEnableNotificationsPreview);}},_handleShellViewPortSateChange:function(n,E,o){var g=o?o.getParameter('to'):'';_.setProperty('/viewPortState',g);}};
function d(){return;}
function e(){return;}
function f(){if(_===undefined){a();b();}return _;}
m={getModel:f,updateModelForCatalog:e,updateModelForHomepage:d,unsubscribeEventHandlers:c};return m;});
sap.ui.predefine('sap/ushell/components/CatalogsManager',["sap/ui/base/Object","sap/ushell/ui/launchpad/TileState","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/ushell/components/HomepageManager"],function(B,T,e,u,d,g,m,H){"use strict";
var C=B.extend("sap.ushell.components.CatalogsManager",{
metadata:{publicMethods:["createGroup","createGroupAndSaveTile","createTile","deleteCatalogTileFromGroup","notifyOnActionFailure","resetAssociationOnFailure"]},
analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},
_aDoableObjects:[],
constructor:function(i,s){this.oLaunchPageService=sap.ushell.Container.getService("LaunchPage");this.aPendingCatalogQueue=[];this.oTileCatalogToGroupsMap={};this.skippedProcessCatalogs=0;this.tagsPool=[];this.oModel=s.model;var h={model:this.oModel};if(typeof sap.ushell.components.getHomepageManager==="function"){this.oHomepageManager=sap.ushell.components.getHomepageManager();}else{this.oHomepageManager=new H("dashboardMgr",h);}sap.ushell.components.getCatalogsManager=jQuery.sap.getter(this.getInterface());this.registerEvents();},
registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects=[e.on("showCatalog").do(this.updateTilesAssociation.bind(this)),e.on("updateGroups").do(this.updateTilesAssociation.bind(this))];},
unregisterEvents:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects.forEach(function(D){D.off();});},
getModel:function(){return this.oModel;},
loadAllCatalogs:function(c,E,D){var G=new jQuery.Deferred(),t=this,s;G.resolve();s=function(){G.done(function(){var a=t.getModel().getProperty("/groups");if(a&&a.length!==0){t.updateTilesAssociation();}});};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){G=this.oHomepageManager.loadPersonalizedGroups();}d.destroyFLPAggregationModels(this.oModel.getProperty("/catalogs"));d.destroyTileModels(this.oModel.getProperty("/catalogTiles"));this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];jQuery.sap.measure.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");jQuery.sap.measure.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");jQuery.sap.measure.pause("FLP:DashboardManager.getCatalogTiles");jQuery.sap.measure.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");jQuery.sap.measure.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");this.oLaunchPageService.getCatalogs().done(function(a){jQuery.sap.measure.end("FLP:DashboardManager.GetCatalogsRequest");jQuery.sap.measure.end("FLP:DashboardManager.getCatalogTiles");jQuery.when.apply(jQuery,this.aPromises).then(function(){t.onDoneLoadingCatalogs(a);});s();}.bind(this)).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_msg")).progress(this.addCatalogToModel.bind(this));}else{s();}},
updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();},
mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups"),i,o,t,a,b,c,f,h=this;for(i=0;i<G.length;i++){o=G[i];["tiles","links"].forEach(function(A){a=o[A];if(a){for(t=0;t<a.length;++t){b=encodeURIComponent(h.oLaunchPageService.getCatalogTileId(a[t].object));c=h.oTileCatalogToGroupsMap[b]||[];f=h.oLaunchPageService.getGroupId(o.object);if(c.indexOf(f)===-1&&(typeof(o.isGroupVisible)==='undefined'||o.isGroupVisible)&&!o.isGroupLocked){c.push(f);}h.oTileCatalogToGroupsMap[b]=c;}}});}},
updateCatalogTilesToGroupsMap:function(){var c=this.getModel().getProperty("/catalogs"),i,t,a,G,b,f,h,j,A,o;if(c){for(i=0;i<c.length;i++){f=c[i].appBoxes;if(f){for(j=0;j<f.length;j++){A=f[j];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(A.src));G=this.oTileCatalogToGroupsMap[t];a=(G||[]);A.associatedGroups=a;}}b=c[i].customTiles;if(b){for(h=0;h<b.length;h++){o=b[h];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o.src));G=this.oTileCatalogToGroupsMap[t];a=(G||[]);o.associatedGroups=a;}}}}this.getModel().setProperty("/catalogs",c);},
addCatalogToModel:function(c){var o={title:this.oLaunchPageService.getCatalogTitle(c),id:this.oLaunchPageService.getCatalogId(c),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]},p;jQuery.sap.measure.resume("FLP:DashboardManager.getCatalogTiles");p=this.oLaunchPageService.getCatalogTiles(c);this.aPromises.push(p);p.done(function(a){jQuery.sap.measure.pause("FLP:DashboardManager.getCatalogTiles");if(!a.length){return;}this.aPendingCatalogQueue.push({oCatalogEntry:a,oCatalogModel:o});if(this.skippedProcessCatalogs<10){clearTimeout(this.oprocessCatalogsTimer);this.skippedProcessCatalogs++;this.oprocessCatalogsTimer=setTimeout(function(){this.processPendingCatalogs();if(this.oModel.getProperty("/enableCatalogTagFilter")===true){this.getTagList();}}.bind(this),20);}}.bind(this)).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));},
getTagList:function(c){var i={},f=0,t=[],h,o,s;if(this.oModel.getProperty("/tagList")&&this.oModel.getProperty("/tagList").length>0){this.tagsPool.concat(this.oModel.getProperty("/tagList"));}for(f=0;f<this.tagsPool.length;f++){o=this.tagsPool[f];if(i[o]){i[o]++;}else{i[o]=1;}}for(h in i){t.push({tag:h,occ:i[h]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(c){this.oModel.setProperty("/tagList",s.slice(0,c));}else{this.oModel.setProperty("/tagList",s);}},
processPendingCatalogs:function(){var c=this.oModel.getProperty('/catalogs'),p,o,a,E,i,b,f,h=sap.ui.getCore().getEventBus(),A,j=this.oModel.getProperty('/masterCatalogs')||[{title:m.getLocalizedText("all")}];jQuery.sap.measure.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");this.skippedProcessCatalogs=0;while(this.aPendingCatalogQueue.length>0){p=this.aPendingCatalogQueue.shift();o=p.oCatalogEntry;a=p.oCatalogModel;E=this.searchModelCatalogByTitle(a.title);if(E.result){b=this.oModel.getProperty('/catalogs')[E.indexOfPreviousInstanceInModel];i=false;}else{i=true;b=a;}o.forEach(function(o,k){if(this._getIsIntentSupported(o)){if(this._getIsAppBox(o)){A=this.createCatalogAppBoxes(o,true);b.appBoxes.push(A);}else{f=this.createCatalogTiles(o);b.customTiles.push(f);if(!this.aFnToGetTileView){this.aFnToGetTileView=[];}}}}.bind(this));if(b.appBoxes.length>0||b.customTiles.length>0){if(i){c.push(a);j.push({title:a.title});}}}this.oModel.setProperty('/masterCatalogs',j);this.oModel.setProperty('/catalogs',c);h.publish("launchpad","afterCatalogSegment");jQuery.sap.measure.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");},
loadCustomTilesKeyWords:function(){var f;if(this.aFnToGetTileView){while(this.aFnToGetTileView.length>0){f=this.aFnToGetTileView.pop();f();}}},
searchModelCatalogByTitle:function(c){var a=this.oModel.getProperty('/catalogs'),b=false,i,n=0,G=false;$.each(a,function(f,t){if(t.title===sap.ushell.resources.i18n.getText('catalogsLoading')){G=true;}else if(c==t.title){i=f;n=t.numberOfTiles;b=true;return false;}});return{result:b,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},
createCatalogAppBoxes:function(c,G){var a=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(c)),b=this.oTileCatalogToGroupsMap[a]||[],t=this.oLaunchPageService.getCatalogTileTags(c)||[];if(t.length>0){this.tagsPool=this.tagsPool.concat(t);}var n=undefined;if(c.tileResolutionResult){n=c.tileResolutionResult.navigationMode;}return{id:a,associatedGroups:b,src:c,title:this.oLaunchPageService.getCatalogTilePreviewTitle(c),subtitle:this.oLaunchPageService.getCatalogTilePreviewSubtitle(c),icon:this.oLaunchPageService.getCatalogTilePreviewIcon(c),keywords:G?(this.oLaunchPageService.getCatalogTileKeywords(c)||[]).join(','):[],tags:t,navigationMode:n,url:this.oLaunchPageService.getCatalogTileTargetURL(c)};},
onDoneLoadingCatalogs:function(c){var i,a=[];for(i=0;i<c.length;i++){a.push(this.oLaunchPageService.getCatalogTiles(c[i]));}Promise.all(a).then(function(r){var I,n=true;for(I=0;I<r.length;I++){if(r[I].length!=0){n=false;break;}}if(n||!c.length){this.oModel.setProperty("/catalogsNoDataText",sap.ushell.resources.i18n.getText('noCatalogs'));}});var E=sap.ui.getCore().getEventBus();E.publish("launchpad","catalogContentLoaded");var t=this,l=c.filter(function(o){var s=t.oLaunchPageService.getCatalogError(o);if(s){jQuery.sap.log.error("A catalog could not be loaded",s,"sap.ushell.components.CatalogsManager");}return!s;});if(l.length!==c.length){m.showLocalizedError("partialCatalogFail");}u.handleTilesVisibility();},
createCatalogTiles:function(c,G){var t,a,b=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(c)),f=this.oTileCatalogToGroupsMap[b]||[],h=this.oLaunchPageService.getCatalogTileTags(c)||[];if(h.length>0){this.tagsPool=this.tagsPool.concat(h);}t=new T({state:"Loading"});this.oLaunchPageService.getCatalogTileView(c);a=this.oLaunchPageService.getCatalogTilePreviewTitle(c);if(!a){a=this.oLaunchPageService.getCatalogTileTitle(c);}return{associatedGroups:f,src:c,catalog:c.title,catalogId:c.id,title:a,tags:h,keywords:(this.oLaunchPageService.getCatalogTileKeywords(c)||[]).join(','),id:b,size:this.oLaunchPageService.getCatalogTileSize(c),content:[t],isTileIntentSupported:this.oLaunchPageService.isTileIntentSupported(c),tileType:c.tileType};},
createGroupAndSaveTile:function(D){var t=this,c=D.catalogTileContext,n=D.newGroupName,a=jQuery.Deferred(),r={};if(u.validHash(n)&&c){this.createGroup(n).then(function(o){var p=t.createTile({catalogTileContext:c,groupContext:o});p.done(function(b){r={group:b.group,status:1,action:'addTileToNewGroup'};a.resolve(r);}).fail(function(b){r={group:b.group,status:0,action:'addTileToNewGroup'};a.resolve(r);});}.bind(this));}return a.promise();},
createGroup:function(t){var a=this,D=jQuery.Deferred();if(!u.validHash(t)){return D.reject({status:0,action:'createNewGroup'});}var r=this.oLaunchPageService.addGroup(t);r.done(function(G,s){var o=a.oHomepageManager.addGroupToModel(G);D.resolve(o);});r.fail(function(){m.showLocalizedError("fail_to_create_group_msg");var R={status:0,action:'createNewGroup'};D.resolve(R);});return D.promise();},
createTile:function(D){var t=this,c=D.catalogTileContext,o=D.groupContext,G=this.oModel.getProperty(o.getPath()),s=G.groupId,r,a=jQuery.Deferred(),R={},E;E=sap.ui.getCore().getEventBus();E.publish("launchpad","addTile",{catalogTileContext:c,groupContext:o});if(!c){jQuery.sap.log.warning("CatalogsManager: Did not receive catalog tile object. Abort.",this);R={group:G,status:0,action:'add'};return Promise.resolve(R);}r=this.oLaunchPageService.addTile(c.getProperty("src"),o.getProperty("object"));r.done(function(b){var f=t.oModel.getProperty("/groups"),h=g.getModelPathOfGroup(f,s),i=t.oLaunchPageService.getTileTitle(b);t.oHomepageManager.addTileToGroup(h,b);R={group:G,status:1,action:'add'};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[G.title,i]);a.resolve(R);}).fail(function(){m.showLocalizedError("fail_to_add_tile_msg");R={group:G,status:0,action:'add'};a.resolve(R);});return a.promise();},
deleteCatalogTileFromGroup:function(D){var t=this,s=decodeURIComponent(D.tileId),G=D.groupIndex,o=this.oModel.getProperty("/groups/"+G),a=jQuery.Deferred(),b=[],r=[],p,c;["tiles","links"].forEach(function(A){o[A].forEach(function(f){var h=t.oLaunchPageService.getCatalogTileId(f.object);if(h===s){p=jQuery.Deferred();c=t.oLaunchPageService.removeTile(o.object,f.object);c.done((function(a){return function(){r.push(f.uuid);a.resolve({status:true});};})(p));c.fail((function(a){return function(){a.resolve({status:false});};})(p));b.push(p);}});});jQuery.when.apply(jQuery,b).done(function(f){var S=b.length===r.length;t.oHomepageManager.deleteTilesFromGroup(o.groupId,r);t.updateTilesAssociation();a.resolve({group:o,status:S,action:'remove'});});return a.promise();},
calculateCatalogTileIndex:function(c,n,t){var r=parseInt(c*100000,10);r+=(n!==undefined?n:0)+t;return r;},
notifyOnActionFailure:function(M,p){m.showLocalizedError(M,p);},
resetAssociationOnFailure:function(M,p){this.notifyOnActionFailure(M,p);this.updateTilesAssociation();},
_getIsIntentSupported:function(c){return!!(this.oLaunchPageService.isTileIntentSupported(c));},
_getIsAppBox:function(c){var a,i;if(!sap.ushell.Container){return false;}a=this.oModel.getProperty("/appFinderDisplayMode");if(a==="tiles"){i=false;}else{i=!!(this.oLaunchPageService.getCatalogTileTargetURL(c)&&(this.oLaunchPageService.getCatalogTilePreviewTitle(c)||this.oLaunchPageService.getCatalogTilePreviewSubtitle(c)));}return i;},
destroy:function(){this.unregisterEvents();}
});
return C;});
sap.ui.predefine('sap/ushell/components/HomepageManager',["jquery.sap.global","sap/ui/base/Object","sap/ui/Device","sap/ui/model/Filter","sap/ushell/ui/launchpad/TileState","sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/components/_HomepageManager/DashboardLoadingManager","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/SelectDialog","sap/m/StandardListItem","sap/ushell/components/homepage/ComponentKeysHandler"],function(Q,B,D,F,T,P,a,e,s,u,r,d,g,m,G,S,b,C){"use strict";var c={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};var _=[];var f=false;
function h(R){_.push(R);if(!f){f=true;_.shift()();}}
function l(){if(_.length===0){f=false;}else{_.shift()();}}
function n(){_=[];f=false;}
function o(E,p){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(U){U.logCustomEvent(c.PERSONALIZATION,E,p);});}
var H=B.extend("sap.ushell.components.HomepageManager",{
metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","resetGroupsOnFailure","addGroupToModel","addTileToGroup","deleteTilesFromGroup"]},
analyticsConstants:c,
constructor:function(i,j){if(sap.ushell.components.getHomepageManager){var k=sap.ushell.components.getHomepageManager();if(!k.view){k.setDashboardView(j.view);}return k;}sap.ui.getCore().attachThemeChanged(u.handleTilesVisibility);sap.ushell.components.getHomepageManager=Q.sap.getter(this.getInterface());this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oModel=j.model;this.oRouter=j.router;this.oDashboardView=j.view;this.oSortableDeferred=Q.Deferred();this.oSortableDeferred.resolve();this.registerEvents();this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.tileUuid=null;this.bIsGroupsModelLoading=false;this.segmentsStore=[];this.bIsFirstSegment=true;this.bIsFirstSegmentViewLoaded=false;this.aGroupsFrame=null;this.iMinNumOfTilesForBlindLoading=this.oModel.getProperty("/optimizeTileLoadingThreshold")||100;this.bIsScrollModeAccordingKPI=false;this.oGroupNotLockedFilter=new F("isGroupLocked",sap.ui.model.FilterOperator.EQ,false);this.bLinkPersonalizationSupported=this.oPageBuilderService.isLinkPersonalizationSupported();this.oDashboardLoadingManager=new a("loadingManager",{oDashboardManager:this});if(this.oRouter){var t=this.oRouter.getTarget('home');t.attachDisplay(function(E){this.oDashboardView=E.getParameter('view');}.bind(this));}this.oModel.bindProperty("/tileActionModeActive").attachChange(this._changeLinksScope.bind(this));},
isBlindLoading:function(){var i=s.last("/core/home/homePageGroupDisplay");if((i===undefined||i==="scroll")&&this.bIsScrollModeAccordingKPI){Q.sap.log.info("isBlindLoading reason IsScrollModeAccordingKPI and IsScrollMode: true");return true;}if(this.oModel.getProperty("/tileActionModeActive")){Q.sap.log.info("isBlindLoading reason TileActionModeActive : true");return true;}return false;},
createMoveActionDialog:function(i){var j=this.oGroupNotLockedFilter,M=new S(i,{title:r.i18n.getText('moveTileDialog_title'),rememberSelections:false,search:function(E){var v=E.getParameter("value"),k=new F("title",sap.ui.model.FilterOperator.Contains,v),p=E.getSource().getBinding("items");p.filter([k,j]);},contentWidth:'400px',contentHeight:"auto",confirm:function(E){var k=E.getParameter("selectedContexts");this.publishMoveActionEvents(E,k,"movetile");}.bind(this),cancel:function(){var k=Q('.sapUshellTile[tabindex="0"]')[0];if(k){k.focus();}},items:{path:"/groups",filters:[j],template:new b({title:"{title}"})}});return M;},
publishMoveActionEvents:function(E,i,M){var j=sap.ui.getCore().getEventBus();if(i.length){var k=this.tileType==="link"?"links":"tiles";j.publish("launchpad",M,{sTileId:this.tileUuid,sToItems:k,sFromItems:k,sTileType:k,toGroupId:i[0].getObject().groupId,toIndex:i[0].getObject()[this.tileType==="link"?"links":"tiles"].length,source:E.getSource().getId(),callBack:C.callbackSetFocus.bind(C)});j.publish("launchpad","scrollToGroup",{groupId:i[0].getObject().groupId,groupChanged:false,focus:false});}},
_changeLinksScope:function(E){var t=this;if(this.bLinkPersonalizationSupported){var i=E.getSource().getValue();this.oModel.getProperty("/groups").forEach(function(j,k){if(!j.isGroupLocked){t._changeGroupLinksScope(j,i?'Actions':'Display');}});}},
_changeGroupLinksScope:function(i,j){var t=this;i.links.forEach(function(L,k){t._changeLinkScope(L.content[0],j);});},
_changeLinkScope:function(L,i){var j=L.getScope?L:L.getContent()[0];if(this.bLinkPersonalizationSupported&&j.setScope){j.setScope(i);}},
registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.subscribe("launchpad","tabSelected",this.getSegmentTabContentViews,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);E.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);E.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.subscribe("launchpad","createGroupAt",this._createGroupAt,this);E.subscribe("launchpad","createGroup",this._createGroup,this);E.subscribe("launchpad","deleteGroup",this._deleteGroup,this);E.subscribe("launchpad","resetGroup",this._resetGroup,this);E.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.subscribe("launchpad","moveGroup",this._moveGroup,this);E.subscribe("launchpad","deleteTile",this._deleteTile,this);E.subscribe("launchpad","movetile",this._moveTile,this);E.subscribe("launchpad","sortableStart",this._sortableStart,this);E.subscribe("launchpad","sortableStop",this._sortableStop,this);E.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);E.subscribe("launchpad","convertTile",this._convertTile,this);this.oPageBuilderService.registerTileActionsProvider(this._addFLPActionsToTile.bind(this));},
_addFLPActionsToTile:function(t){var L=this.bLinkPersonalizationSupported&&this.oPageBuilderService.isLinkPersonalizationSupported(t),A=[];A.push(this._getMoveTileAction(t));if(L){A.push(this._getConvertTileAction(t));}return A;},
_getConvertTileAction:function(t){var E=sap.ui.getCore().getEventBus(),i=this,j=i.oPageBuilderService.getTileType(t);return{text:j==='link'?r.i18n.getText('ConvertToTile'):r.i18n.getText('ConvertToLink'),press:function(k){var p={tile:k,callBack:C.callbackSetFocus.bind(C)};E.publish("launchpad","convertTile",p);}};},
_getMoveTileAction:function(t){var i=this;return{text:r.i18n.getText('moveTileDialog_action'),press:function(){i.tileType=i.oPageBuilderService.getTileType(t);i.tileUuid=i.getModelTileById(i.oPageBuilderService.getTileId(t),i.tileType==="link"?"links":"tiles").uuid;var M=i.tileType==="tile"?i.moveTileDialog:i.moveLinkDialog;if(i.tileType==="tile"||i.tileType==="link"){if(!M){M=i.createMoveActionDialog("move"+i.tileType+"Dialog");M.setModel(i.oModel);if(i.tileType==="tile"){i.moveTileDialog=M;}else{i.moveLinkDialog=M;}}else{M.getBinding("items").filter([i.oGroupNotLockedFilter]);}M.open();}}};},
_handleTileAppearanceAnimation:function(j){if(!j){return;}var p=["webkit",""];function k(q,t){for(var i=0;i<p.length;i++){t=t.toLowerCase();j.attachBrowserEvent(p[i]+t,function(E){if(E.originalEvent&&E.originalEvent.animationName==="sapUshellTileEntranceAnimation"){j.removeStyleClass("sapUshellTileEntrance");}},false);}}k(j,"AnimationEnd");j.addStyleClass("sapUshellTileEntrance");},
destroy:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);E.unsubscribe("launchpad","createGroup",this._createGroup,this);E.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);E.unsubscribe("launchpad","resetGroup",this._resetGroup,this);E.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.unsubscribe("launchpad","moveGroup",this._moveGroup,this);E.unsubscribe("launchpad","deleteTile",this._deleteTile,this);E.unsubscribe("launchpad","movetile",this._moveTile,this);E.unsubscribe("launchpad","sortableStart",this._sortableStart,this);E.unsubscribe("launchpad","sortableStop",this._sortableStop,this);E.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);sap.ui.getCore().detachThemeChanged(u.handleTilesVisibility);sap.ushell.components.getHomepageManager=undefined;B.prototype.destroy.apply(this,arguments);},
_sortableStart:function(){this.oSortableDeferred=Q.Deferred();},
_createBookmark:function(i,E,j){var t=j.group?j.group.object:"";delete j.group;function k(){sap.ushell.Container.getServiceAsync("Bookmark").then(function(p){p.addBookmark(j,t).always(l).done(function(){m.showLocalizedMessage("tile_created_msg");}).fail(function(M){Q.sap.log.error("Failed to add bookmark",M,"sap.ushell.ui.footerbar.AddBookmarkButton");m.showLocalizedError("fail_to_add_tile_msg");});});}h(k);},
_addBookmarkToModel:function(i,E,j){var t=j.tile,k,p=j.group,q,v,w,x,y,N,I;if(!j||!t){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate();}return;}if(!p){k=this.getModel().getProperty("/groups");for(I=0;I<k.length;I++){if(k[I].isDefaultGroup===true){p=k[I].object;break;}}}q=this.oPageBuilderService;v=q.getTileType(t);w=this._getTileModel(t,q.isGroupLocked(p),v);this.getTileView(w);x=this._getIndexOfGroupByObject(p);y=this.oModel.getProperty("/groups/"+x);y.tiles.push(w);y.visibilityModes=u.calcVisibilityModes(y,true);N=y.tiles.length;this._updateModelWithTileView(x,N);this.oModel.setProperty("/groups/"+x,y);},
_refreshGroupInModel:function(i,E,j){var L=this.oPageBuilderService,k='Failed to refresh group with id:'+j+' in the model',t=this;L.getGroups().fail(Q.sap.log.error(k,null,"sap.ushell.components.HomepageManager")).done(function(p){p.some(function(q){if(L.getGroupId(q)===j){L.getDefaultGroup().done(function(v){var I=j===v.getId()?true:false,w=t._getGroupModel(q,I,false,{isRendered:true}),x=t._getIndexOfGroupByObject(w.object);w.visibilityModes=sap.ushell.utils.calcVisibilityModes(q,true);t.oModel.setProperty("/groups/"+x,w);if(w&&w.tiles){w.tiles.forEach(function(y){t.getTileView(y);});}});return true;}});});},
_sortableStop:function(){this.oSortableDeferred.resolve();},
_handleAfterSortable:function(i){return function(){var j=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){i.apply(null,j);});}.bind(this);},
_createGroup:function(){var i=this._getGroupModel(null),M=this.oModel,j=M.getProperty("/groups");M.setProperty("/groups/"+j.length,i);},
_createGroupAt:function(j,E,k){var p=parseInt(k.location,10),q=this.oModel.getProperty("/groups"),t=this._getGroupModel(null,false,p===q.length,k),M=this.oModel,i;t.index=p;q.splice(p,0,t);for(i=0;i<q.length-1;i++){q[i].isLastGroup=false;}for(i=p+1;i<q.length;i++){q[i].index++;}M.setProperty("/groups",q);},
_getIndexOfGroupByObject:function(i){var j=null,k=this.oModel.getProperty("/groups"),p=this.oPageBuilderService.getGroupId(i);k.every(function(M,q){var t=this.oPageBuilderService.getGroupId(M.object);if(t===p){j=q;return false;}return true;}.bind(this));return j;},
addTileToGroup:function(i,t){var j=i+"/tiles",k=this.oModel.getProperty(i),N=this.oModel.getProperty(j).length,p=this.oPageBuilderService.getTileType(t);var q=this.oModel.getProperty(i+"/isGroupLocked"),v=this.oModel.getProperty("/personalization");k.tiles[N]=this._getTileModel(t,q,p);this.getTileView(k.tiles[N]);k.visibilityModes=u.calcVisibilityModes(k,v);this._updateModelWithTileView(k.index,N);this.oModel.setProperty(i,k);},
_getPathOfTile:function(t){var i=this.oModel.getProperty("/groups"),j=null,k=null,p,E=function(q,v){if(v.uuid===t){k=q;return false;}};Q.each(i,function(q,v){Q.each(v.tiles,E);if(k!==null){j=q;p="tiles";return false;}Q.each(v.links,E);if(k!==null){j=q;p="links";return false;}});return j!==null?"/groups/"+j+"/"+p+"/"+k:null;},
_moveInArray:function(A,i,j){if(j>=A.length){var k=j-A.length;while((k--)+1){A.push(undefined);}}A.splice(j,0,A.splice(i,1)[0]);},
_updateGroupIndices:function(A){var k;for(k=0;k<A.length;k++){A[k].index=k;}},
_deleteGroup:function(i,E,j){var t=this,k=j.groupId,p,q=this.oModel.getProperty("/groups"),v=g.getIndexOfGroup(q,k),I=q.length-1===v,w=null,M,x,y;x=I?v-1:v;d.destroyFLPAggregationModel(this.oModel.getProperty("/groups/"+v));w=q.splice(v,1)[0].object;if(I){this.oModel.setProperty("/groups/"+x+"/isLastGroup",I);}p=this.oPageBuilderService.getGroupId(w);M=this.oModel;M.setProperty("/groups",q);this._updateGroupIndices(q);if(x>=0){y=sap.ui.getCore().getEventBus();window.setTimeout(Q.proxy(y.publish,y,"launchpad","scrollToGroup",{groupId:this.oModel.getProperty("/groups")[x].groupId}),200);}function z(){var A=this.oPageBuilderService.getGroupTitle(w);try{this.oPageBuilderService.removeGroup(w).done(function(){o(c.DELETE_GROUP,[A,p]);m.showLocalizedMessage("group_deleted_msg",[A]);}).fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_delete_group_msg"))).always(l);}catch(J){this._resetGroupsOnFailure("fail_to_delete_group_msg");}}h(z.bind(this));},
_resetGroup:function(i,E,j){var t=this,k=j.groupId,p=this.oModel.getProperty("/groups"),q=g.getIndexOfGroup(p,k),v=this.oModel.getProperty("/groups/"+q),w,x,y;this.oModel.setProperty("/groups/"+q+"/sortable",false);x=this.oPageBuilderService.getGroupId(v.object);w=this.oPageBuilderService.getGroupTitle(v.object);function z(){try{this.oPageBuilderService.resetGroup(v.object).done(this._handleAfterSortable(Q.proxy(function(k,v,R){o(c.RESET_GROUP,[w,x]);var p=this.oModel.getProperty("/groups"),q=g.getIndexOfGroup(p,k);this._loadGroup(q,R||v.object);m.showLocalizedMessage("group_reset_msg",[v.title]);this.oModel.setProperty("/groups/"+q+"/sortable",true);y=sap.ui.getCore().byId('dashboardGroups').getGroupControlByGroupId(k);if(y.getBindingContext().getObject().links&&y.getBindingContext().getObject().links.length&&!y.getIsGroupLocked()){this._changeGroupLinksScope(y.getBindingContext().getObject(),this.oModel.getProperty("/tileActionModeActive")?sap.m.GenericTileScope.Actions:sap.m.GenericTileScope.Display);}if(y){y.rerender();e.emit("updateGroups",Date.now());u.handleTilesVisibility();}},this,k,v))).fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_reset_group_msg"))).always(l);}catch(A){this._resetGroupsOnFailure("fail_to_reset_group_msg");}}h(z.bind(this));},
_moveGroup:function(j,E,k){var p=k.fromIndex,t=k.toIndex,q=this.oModel.getProperty("/groups"),M=this.oModel,A=this.oModel.getProperty("/tileActionModeActive"),v,w,x=this,i,y;if(!A){p=this._adjustFromGroupIndex(p,q);}v=q[p];w=v.groupId;if(!A){t=this._adjustToGroupIndex(t,q,w);}y=q[t].object;this._moveInArray(q,p,t);this._updateGroupIndices(q);for(i=0;i<q.length-1;i++){q[i].isLastGroup=false;}q[q.length-1].isLastGroup=true;M.setProperty("/groups",q);function z(){q=this.oModel.getProperty("/groups");var v=this.oModel.getProperty(g.getModelPathOfGroup(q,w));if(!v.object){return;}try{this._getOriginalGroupIndex(y).done(function(J){this.oPageBuilderService.moveGroup(v.object,J).done(function(){o(x.analyticsConstants.MOVE_GROUP,[v.title,p,t,w]);}).fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_group_msg"))).always(l);}.bind(this));}catch(I){this._resetGroupsOnFailure("fail_to_move_group_msg");}}h(z.bind(this));},
_adjustToGroupIndex:function(t,j,k){var v=0,I=false,i=0;for(i=0;i<j.length&&v<t;i++){if(j[i].isGroupVisible){if(j[i].groupId===k){I=true;}else{v++;}}}if(I){return i-1;}return i;},
_adjustFromGroupIndex:function(j,k){var v=0,i;for(i=0;i<k.length;i++){if(k[i].isGroupVisible){v++;}if(v===j+1){return i;}}return j;},
_getOriginalGroupIndexByIndex:function(i){var j=this.oModel.getProperty("/groups"),k=j[i].object;return this._getOriginalGroupIndex(k);},
_getOriginalGroupIndex:function(i){var j=this.oPageBuilderService,k=this.oPageBuilderService.getGroups(),p=new Q.Deferred();k.done(function(q){var t=null;Q.each(q,function(v,w){if(j.getGroupId(w)===j.getGroupId(i)){t=v;return false;}});p.resolve(t);});k.fail(function(){m.showLocalizedError("fail_to_load_groups_msg");p.reject();});return p;},
_changeGroupTitle:function(i,E,j){var N=j.newTitle,k=this.oModel.getProperty("/groups"),p=j.groupId,q=j.groupId,t=g.getIndexOfGroup(k,p),v=this.oModel.getProperty("/groups/"+t),O=v.title;this.oModel.setProperty("/groups/"+t+"/title",N);function w(){try{if(t===k.length-1){this.oPageBuilderService.addGroup(N,t).done(this._handleAfterSortable(Q.proxy(function(p,z){var k=this.oModel.getProperty("/groups"),t=g.getIndexOfGroup(k,p);this._loadGroup(t,z);o(c.RENAME_GROUP,[O,N,p]);},this,p))).fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg"))).always(l);}else{this._getOriginalGroupIndexByIndex(t+1).done(function(z){this.oPageBuilderService.addGroupAt(N,z).done(this._handleAfterSortable(Q.proxy(function(p,A){var k=this.oModel.getProperty("/groups"),t=g.getIndexOfGroup(k,p);this._loadGroup(t,A);o(c.RENAME_GROUP,[O,N,p]);},this,p))).fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg"))).always(l);}.bind(this));}}catch(y){this._resetGroupsOnFailure("fail_to_create_group_msg");}}function x(){try{this.oPageBuilderService.setGroupTitle(v.object,N).done(function(){q=this.oPageBuilderService.getGroupId(v.object);o(c.RENAME_GROUP,[O,N,q]);}.bind(this)).fail(this._handleAfterSortable(Q.proxy(function(p,O){var k=this.oModel.getProperty("/groups"),z=g.getModelPathOfGroup(k,p);m.showLocalizedError("fail_to__msg");this.oModel.setProperty(z+"/title",O);n();},this,p))).always(l);}catch(y){this._resetGroupsOnFailure("fail_to_rename_group_msg");}}if(!v.object){l.call(this);h(w.bind(this));}else{h(x.bind(this));}},
addGroupToModel:function(i){var j=this._getGroupModel(i,false,true),k=this.oModel.getProperty("/groups"),p=k.length,q;if(p>0){k[p-1].isLastGroup=false;}j.index=p;k.push(j);this.oModel.setProperty("/groups/",k);q=new sap.ui.model.Context(this.oModel,"/groups/"+p);return q;},
_deleteTile:function(i,E,j){var t=this,k=j.tileId||j.originalTileId,p=this.oModel.getProperty("/groups"),I=j.items||'tiles';Q.each(p,function(q,v){var w=false;Q.each(v[I],function(x,y){if(y.uuid!==k&&y.originalTileId!==k){return true;}d.destroyTileModel(t.oModel.getProperty("/groups/"+q+"/"+I+"/"+x));var z=v[I].splice(x,1)[0],A=t.oPageBuilderService.getTileTitle(z.object),J=t.oPageBuilderService.getCatalogTileId(z.object),K=t.oPageBuilderService.getCatalogTileTitle(z.object),L=t.oPageBuilderService.getTileId(z.object),M=t.oModel.getProperty("/personalization");v.visibilityModes=u.calcVisibilityModes(v,M);t.oModel.setProperty("/groups/"+q,v);function N(){try{t.oPageBuilderService.removeTile(v.object,z.object).done(t._handleAfterSortable(function(){m.showLocalizedMessage("tile_deleted_msg",[A,v.title]);o(c.DELETE_TILE,[A||L,J,K,v.title]);})).fail(t._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_remove_tile_msg"))).always(l);}catch(O){t._resetGroupsOnFailure("fail_to_remove_tile_msg");}}h(N);u.handleTilesVisibility();w=true;return false;});return!w;});},
deleteTilesFromGroup:function(i,R){var j=this.oModel.getProperty("/groups"),k=g.getIndexOfGroup(j,i),p=this.oModel.getProperty("/groups/"+k),q=[];["tiles","links"].forEach(function(A){q=p[A].filter(function(t){if(R.indexOf(t.uuid)<0){return true;}return false;});p[A]=q;});p.visibilityModes=u.calcVisibilityModes(p,true);this.oModel.setProperty("/groups/"+k,p);},
_getGroupIndex:function(i){var j=this.oModel.getProperty("/groups"),k=this._getNewGroupInfo(j,i);if(k){return k.newGroupIndex;}},
_convertTile:function(i,E,j){var k=j.tile?j.tile:j,p=j.srcGroupId?this._getGroupIndex(j.srcGroupId):undefined,q=j.srcGroupId?this.oModel.getProperty("/groups/"+p):k.getParent().getBindingContext().getObject(),t=k.getBindingContext().sPath.split("/"),v=k.getBindingContext().getObject(),w=t[t.length-2],x=v.uuid,y=parseInt(t[t.length-1],10),z=j.toIndex!==undefined?j.toIndex:undefined,R,A=this.oModel.getProperty("/tileActionModeActive"),I=j.toGroupId?this._getGroupIndex(j.toGroupId):q.index,J=j.toGroupId?this.oModel.getProperty("/groups/"+I):q;var K=this._getIndexForConvert(w,y,z,q,J),L={"tileIndex":y,"groupIndex":p,"group":q};function M(){try{R=this.oPageBuilderService.moveTile(v.object,K.tileIndex,K.newTileIndex,q.object,J.object,w==="links"?"tile":"link");}catch(N){this._resetGroupsOnFailure("fail_to_move_tile_msg");return;}v.tileIsBeingMoved=true;R.done(this._handleAfterSortable(Q.proxy(function(x,O){var U=this._getPathOfTile(x);if(U){l();this.oPageBuilderService.getTileView(O).done(function(V){if(w==="tiles"){this._attachLinkPressHandlers(V);this._addDraggableAttribute(V);this._changeLinkScope(V,A&&w!=='links'?'Actions':'Display');}var W={"tileIndex":z,"groupIndex":I,"group":J},X={"tile":v,"view":V,"type":w,"tileObj":O};this.replaceTileViewAfterConvert(L,W,X);e.emit("updateGroups",Date.now());u.handleTilesVisibility();if(j.callBack){j.callBack(V);}}.bind(this));}},this,x)));R.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_tile_msg")));}h(M.bind(this));},
replaceTileViewAfterConvert:function(i,j,t){var k=t.tile,p=k.content;k.tileIsBeingMoved=false;k.content=[t.view];k.object=t.tileObj;k.originalTileId=this.oPageBuilderService.getTileId(t.tileObj);i.group[t.type].splice(i.tileIndex,1);if(j.tileIndex!==undefined){j.group[t.type==="tiles"?"links":"tiles"].splice(j.tileIndex,0,k);}else{j.group[t.type==="tiles"?"links":"tiles"].push(k);}this.oModel.setProperty("/groups/"+j.groupIndex,j.group);this.oModel.setProperty("/groups/"+i.groupIndex,i.group);if(t.type==="links"){this._handleTileAppearanceAnimation(k.content[0].getParent());}else{this._handleTileAppearanceAnimation(k.content[0]);}if(p&&p[0]){p[0].destroy();}},
_getIndexForConvert:function(t,i,j,k,p){var q;if(t==="tiles"){if(j!==undefined){q=p[t].length+j;}else{q=p[t].length+p["links"].length;}if(k.groupId===p.groupId){q--;}}else{q=j?j:k['tiles'].length;i+=k["tiles"].length;}return{"tileIndex":i,"newTileIndex":q};},
_getIndexForMove:function(t,i,j,k,p){var q;if(t==="tiles"){q=j!==undefined?j:k[t].length;}else{if(j!==undefined){q=k["tiles"].length+j;}else{q=k["tiles"].length+k["links"].length;}i+=p["tiles"].length;}return{"tileIndex":i,"newTileIndex":q};},
_getTileInfo:function(i,t,I){var j;Q.each(i,function(k,p){var q=false;Q.each(p[I],function(v,w){if(w.uuid===t){j={"oTile":w,"tileIndex":v,"oGroup":p,"groupIndex":k};q=true;return false;}});return!q;});return j;},
_getNewGroupInfo:function(i,N){var j;Q.each(i,function(k,t){if(t.groupId===N){j={"oNewGroup":t,"newGroupIndex":k};}});return j;},
_moveTile:function(i,E,j){var k=j.toIndex,N=j.toGroupId,t=j.sTileId,p=j.source,q=j.sTileType==="tiles"||j.sTileType==="tile"?"tile":"link",v=j.sToItems,w=j.sFromItems,x=this.oPageBuilderService,A=this.oModel.getProperty("/tileActionModeActive"),y=this.oModel.getProperty("/groups"),z,I,R,J,K,L,M={};K=this._getTileInfo(y,t,w);L=this._getNewGroupInfo(y,N);if(K.oGroup.groupId==L.oNewGroup.groupId&&(p==="movetileDialog"||k===null||p==="movelinkDialog")){return;}if(q==="link"){K.oTile.content[0].addStyleClass("sapUshellZeroOpacity");}if(q==="tile"&&v==='tiles'){if(k&&k>L.oNewGroup[v].length){k=L.oNewGroup[v].length;}}if(K.oGroup.groupId===N&&v===w){if(k===null||k===undefined){K.oGroup[v].splice(K.tileIndex,1);k=K.oGroup[v].length;K.oGroup[v].push(K.oTile);}else{k=this._adjustTileIndex(k,K.oTile,K.oGroup,v);this._moveInArray(K.oGroup[v],K.tileIndex,k);}this.oModel.setProperty("/groups/"+K.groupIndex+"/"+v,K.oGroup[v]);}else{J=this.oModel.getProperty("/personalization");K.oGroup[w].splice(K.tileIndex,1);K.oGroup.visibilityModes=u.calcVisibilityModes(K.oGroup,J);this.oModel.setProperty("/groups/"+K.groupIndex+"/"+w,K.oGroup[w]);if(k===null||k===undefined){k=L.oNewGroup[v].length;L.oNewGroup[v].push(K.oTile);}else{k=this._adjustTileIndex(k,K.oTile,L.oNewGroup,v);L.oNewGroup[v].splice(k,0,K.oTile);}L.oNewGroup.visibilityModes=u.calcVisibilityModes(L.oNewGroup,J);this.oModel.setProperty("/groups/"+L.newGroupIndex+"/"+v,L.oNewGroup[v]);}e.emit("updateGroups",Date.now());u.handleTilesVisibility();z=this.oModel.getProperty("/groups/"+K.groupIndex);I=this.oModel.getProperty("/groups/"+L.newGroupIndex);M=this._getIndexForMove(w,K.tileIndex,k,L.oNewGroup,z);function O(){try{R=this.oPageBuilderService.moveTile(K.oTile.object,M.tileIndex,M.newTileIndex,z.object,I.object,q);}catch(U){this._resetGroupsOnFailure("fail_to_move_tile_msg");return;}K.oTile.tileIsBeingMoved=true;R.done(this._handleAfterSortable(Q.proxy(function(t,V){var W,X=[x.getTileTitle(K.oTile.object),x.getGroupTitle(z.object),x.getGroupTitle(I.object),t];o(c.MOVE_TILE,X);W=this._getPathOfTile(t);if(W){this.oModel.setProperty(W+"/object",V);this.oModel.setProperty(W+"/originalTileId",this.oPageBuilderService.getTileId(V));l();this.oPageBuilderService.getTileView(V).done(function(Y){var Z=this.oModel.getProperty(W+"/content");if(v==='links'){this._changeLinkScope(Y,A?"Actions":"Display");this._attachLinkPressHandlers(Y);this._addDraggableAttribute(Y);this._handleTileAppearanceAnimation(Y);K.oTile.content=[Y];this.oModel.setProperty(W,Q.extend({},K.oTile));this.oModel.setProperty("/groups/"+L.newGroupIndex+"/"+v,this.oModel.getProperty("/groups/"+L.newGroupIndex+"/"+v));}else{this.oModel.setProperty(W+"/content",[Y]);}if(Z&&Z[0]){var $=Y.onAfterRendering;Y.onAfterRendering=function(){$.apply(this);Z[0].destroy();Y.onAfterRendering=$;};}this.oModel.setProperty(W+"/tileIsBeingMoved",false);if(j.callBack){j.callBack(Y);}}.bind(this));}},this,t)));R.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_tile_msg")));}h(O.bind(this));},
_adjustTileIndex:function(j,t,k,I){var v=0,p=false,i=0;for(i=0;i<k[I].length&&v<j;i++){if(k[I][i].isTileIntentSupported){if(k[I][i]===t){p=true;}else{v++;}}}if(p){return i-1;}return i;},
getModel:function(){return this.oModel;},
getDashboardView:function(){return this.oDashboardView;},
setDashboardView:function(i){this.oDashboardView=i;return this;},
updateSettings:function(i){this.oModel=i.model||this.oModel;this.oConfig=i.config||this.oConfig;this.oRouter=i.router||this.oRouter;this.oDashboardView=i.view||this.oDashboardView;},
_getIsAppBox:function(i){if(!sap.ushell.Container){return false;}var j=this.oPageBuilderService,I=!!(j.getCatalogTileTargetURL(i)&&(j.getCatalogTilePreviewTitle(i)||j.getCatalogTilePreviewSubtitle(i)));return I;},
_resetGroupsOnFailureHelper:function(M){var t=this;return function(i){m.showLocalizedError(M);n();window.setTimeout(function(){t.bStartLoadRemainSegment=false;t.loadGroupsFromArray(i);});};},
_resetGroupsOnFailure:function(M,p){n();m.showLocalizedError(M,p);this.loadPersonalizedGroups();this.oModel.updateBindings(true);},
resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments);},
_bindSegment:function(i,j){var k,p,q,t;for(k=0;k<j.length;k++){q=j[k];t=q.index;p=i[t];if(p){p.isRendered=true;p.tiles=p.tiles.concat(q.tiles);p.links=p.links.concat(q.links);}}return i;},
createGroupsModelFrame:function(i,p){var j,k=[],O,q;q=function(t){var v=Q.extend({},t);v.tiles=[];v.pendingLinks=[];v.links=[];return v;};for(j=0;j<i.length;j++){O=i[j];k[j]=q(O);k[j].isRendered=false;k[j].visibilityModes=u.calcVisibilityModes(O,p);}return k;},
_splitGroups:function(i,j){var k,t=[],p=0,I=this.oModel.getProperty("/homePageGroupDisplay")==='tabs',q=0,v;var w=500;for(k=0;k<i.length;k++){v=i[k];t.push(v);if(!this.segmentsStore.length){p+=this.PagingManager.getGroupHeight(v,j===k);}else{q+=v.tiles.length+v.links.length;}if(I&&!this.segmentsStore.length&&p>0){t.loadTilesView=true;this.segmentsStore.push(t);t=[];p=0;}if(p>=1||q>=w){this.segmentsStore.push(t);t=[];p=0;q=0;}}if(t.length){this.segmentsStore.push(t);}},
_processSegment:function(i){var j=this.segmentsStore.shift();if(!j){return i;}if(this.isBlindLoading()===false){if(this.oModel.getProperty("/homePageGroupDisplay")!=='tabs'||j.loadTilesView){this.getSegmentContentViews(j);}}i=this._bindSegment(i,j);return i;},
getSegmentContentViews:function(i){var j,k,p,q;for(j=0;j<i.length;j++){p=i[j];for(k=0;k<p.tiles.length;k++){q=p.tiles[k];if(q.isTileIntentSupported){this.getTileView(q);}}for(k=0;k<p.links.length;k++){q=p.links[k];if(q.isTileIntentSupported){this.getTileView(q,p.index);}}}this.bIsFirstSegmentViewLoaded=true;},
getSegmentTabContentViews:function(i,E,p){var j,k,q=p.iSelectedGroup,t;t=this.oModel.getProperty("/groups/"+q);for(j=0;j<t.tiles.length;j++){k=t.tiles[j];if(k.isTileIntentSupported){this.getTileView(k);}}for(j=0;j<t.links.length;j++){k=t.links[j];if(k.isTileIntentSupported){this.getTileView(k,q);}}},
_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups();},
_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate();}},
handleFirstSegmentLoaded:function(){var i=this.oModel.getProperty("/groups");if(this.aGroupsFrame){Array.prototype.push.apply(i,this.aGroupsFrame);this.aGroupsFrame=null;}this._initializeAnchorNavigationBar();if(!this.bStartLoadRemainSegment){this._processRemainingSegments();}},
_initializeAnchorNavigationBar:function(){var A,i=sap.ushell.components.getHomepageManager().getDashboardView();A=i._getAnchorItemTemplate();this.oDashboardView.oAnchorNavigationBar.bindAggregation("groups",{path:"/groups",template:A});},
_processRemainingSegments:function(){var U;if(this.segmentsStore.length>0){window.setTimeout(function(){U=this._processSegment(this.oModel.getProperty('/groups'));this.oModel.setProperty('/groups',U);this.bIsFirstSegment=false;this._processRemainingSegments();}.bind(this),0);}else{this.bIsGroupsModelLoading=false;this._updateModelWithTileView(0,0);u.handleTilesVisibility();sap.ui.getCore().getEventBus().publish("launchpad","dashboardModelContentLoaded");e.emit("updateGroups",Date.now());}},
loadGroupsFromArray:function(j){if(this.bIsGroupsModelLoading){Q.sap.log.info("Skip set the group model, because the group model is still loading");return;}j=(j||[]).slice();this.bIsGroupsModelLoading=true;var t=this;Q.sap.flpmeasure.end(0,"Service: Get Data for Dashboard");Q.sap.flpmeasure.start(0,"Process & render the first segment/tiles",4);Q.sap.measure.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");Q.sap.measure.start("FLP:DashboardManager.getDefaultGroup","getDefaultGroup","FLP");this.oPageBuilderService.getDefaultGroup().done(function(k){Q.sap.measure.end("FLP:DashboardManager.getDefaultGroup");if(j.length==0&&k==undefined){return;}var i=0,p=[],q,v=j.indexOf(k),w,N,z=[],A,E,I,J,K,L=0,M=0,O,R,U=null,V,W,X=[];j.splice(v,1);while(i<j.length){A=j[i];E=t.oPageBuilderService.isGroupLocked(A);if(E){p.push(A);j.splice(i,1);}else{i++;}}w=p.length;if(!t.oModel.getProperty('/disableSortedLockedGroups')){p.sort(function(x,y){var $=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),a1=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return $<a1?-1:1;});}q=p;q.push(k);q.push.apply(q,j);j=q;I=j.length;K=t.oModel.getProperty("/groups/length");for(i=I;i<K;++i){d.destroyFLPAggregationModel(t.oModel.getProperty("/groups/"+i));}t.oModel.setProperty("/iSelectedGroup",J);if(!t.PagingManager){var Y=Q("#dashboardGroups").width();if(!Y){Y=window.innerWidth;if(Y>=1024&&t.oModel.getProperty('/enableNotificationsPreview')){Y-=27*16;}}var Z=Q('#sapUshellDashboardPage-cont').height();if(Z<100){Z=window.innerHeight;}t.PagingManager=new P('dashboardPaging',{supportedElements:{tile:{className:'sapUshellTile'},link:{className:'sapUshellLinkTile'}},containerHeight:Z,containerWidth:Y});}Q.sap.measure.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(i=0;i<I;++i){N=t._getGroupModel(j[i],i===w,i===I-1);N.index=i;if(N.isGroupVisible){L+=N.tiles.length;}z.push(N);}t.bIsScrollModeAccordingKPI=L>t.iMinNumOfTilesForBlindLoading;Q.sap.measure.end("FLP:DashboardManager._getGroupModel");t.aGroupsFrame=t.createGroupsModelFrame(z,t.oModel.getProperty("/personalization"));for(var i=0;i<t.aGroupsFrame.length;i++){if(t.aGroupsFrame[i].isGroupVisible&&t.aGroupsFrame[i].visibilityModes[0]){if(U===null){U=i;t.aGroupsFrame[i]["isGroupSelected"]=true;t.oModel.setProperty("/iSelectedGroup",i);}M++;if(M>1){t.aGroupsFrame[U]["showGroupHeader"]=false;break;}}}t._splitGroups(z,U);R=t.segmentsStore[0].length;O=t.aGroupsFrame.splice(0,R);Q.sap.measure.start("FLP:DashboardManager._processSegment","_processSegment","FLP");X=t._processSegment(O);X["indexOfDefaultGroup"]=w;if(t.oModel.getProperty("/homePageGroupDisplay")==='tabs'){V=t.getDashboardView();if(V){W=V.oDashboardGroupsBox;W.getBinding('groups').filter([V.oFilterSelectedGroup]);}}Q.sap.measure.end("FLP:DashboardManager._processSegment");t.oModel.setProperty('/groups',X);t.aGroupModel=X;if(t.oDashboardView){e.once("firstSegmentCompleteLoaded").do(t.handleFirstSegmentLoaded.bind(t));}else{setTimeout(function(){Array.prototype.push.apply(t.aGroupModel,t.aGroupsFrame);t.aGroupsFrame=null;t.bStartLoadRemainSegment=true;t._processRemainingSegments();},0);}if(t.bIsFirstSegmentViewLoaded){e.emit("firstSegmentCompleteLoaded",true);}Q.sap.measure.end("FLP:DashboardManager.loadGroupsFromArray");Q.sap.flpmeasure.end(0,"Process & render the first segment/tiles");}).fail(t._resetGroupsOnFailureHelper("fail_to_get_default_group_msg"));},
getPreparedGroupModel:function(){return this.aGroupModel;},
_loadGroup:function(i,j){var t=this,k="/groups/"+i,p=t.oModel.getProperty("/groups/indexOfDefaultGroup"),I=t.oModel.getProperty(k).isLastGroup,O,N;d.destroyFLPAggregationModel(t.oModel.getProperty(k));O=this.oModel.getProperty(k+"/groupId");N=this._getGroupModel(j,i===p,I,undefined);if(O){N.groupId=O;}N.index=i;N.isRendered=true;this.oModel.setProperty(k,N);},
_getGroupModel:function(j,k,L,p){var q=this.oPageBuilderService,t=(j&&q.getGroupTiles(j))||[],M=[],v=[],i,w,x=this.getModel();w=x.getProperty("/personalization");var y=j&&q.isGroupLocked(j)?true:false;for(i=0;i<t.length;++i){var z=t[i],A=q.getTileType(z).toLowerCase();if(A==="tile"){M.push(this._getTileModel(t[i],y,A));}else if(A==="link"){v.push(this._getTileModel(t[i],y,A));}else{Q.sap.log.error("Unknown tile type: '"+A+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(k&&m.getLocalizedText("my_group"))||(j&&q.getGroupTitle(j))||(p&&p.title)||"",object:j,groupId:Q.sap.uid(),links:v,pendingLinks:[],tiles:M,isDefaultGroup:!!k,editMode:!j,isGroupLocked:y,visibilityModes:[true,true],removable:!j||q.isGroupRemovable(j),sortable:w,isGroupVisible:!j||q.isGroupVisible(j),isEnabled:!k,isLastGroup:L||false,isRendered:!!(p&&p.isRendered),isGroupSelected:false};},
_hasPendingLinks:function(M){for(var i=0;i<M.length;i++){if(M[i].content[0]===undefined){return true;}}return false;},
_addModelToTileViewUpdateQueue:function(t,i){this.tileViewUpdateQueue.push({uuid:t,view:i});},
_updateModelWithTileView:function(i,j){var t=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=window.setTimeout(function(){t.tileViewUpdateTimeoutID=undefined;t.oSortableDeferred.done(function(){t._updateModelWithTilesViews(i,j);});},50);},
_updateGroupModelWithTilesViews:function(t,i,k,p){var v,U,w,L,x=i||0;for(var j=x;j<t.length;j=j+1){v=t[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){U=this.tileViewUpdateQueue[q];if(v.uuid==U.uuid){k.push(q);if(U.view){if(p){v.content=[U.view];}else{v.content[0].destroy();v.content=[U.view];}this.oDashboardLoadingManager.setTileResolved(v);w=this.oPageBuilderService.getTileSize(v.object);L=((w!==null)&&(w==="1x2"))||false;if(v['long']!==L){v['long']=L;}}else{v.content[0].setState("Failed");}break;}}}},
_updateModelWithTilesViews:function(j,k){var p=this.oModel.getProperty("/groups"),q=j||0,t=[];if(!p||this.tileViewUpdateQueue.length===0){return;}for(var i=q;i<p.length;i=i+1){this._updateGroupModelWithTilesViews(p[i].tiles,k,t);if(p[i].links){this._updateGroupModelWithTilesViews(p[i].links,k,t,true);if(p[i].pendingLinks.length>0){if(!p[i].links){p[i].links=[];}p[i].links=p[i].links.concat(p[i].pendingLinks);p[i].pendingLinks=[];}}}var v=[],w;for(w=0;w<this.tileViewUpdateQueue.length;w++){if(t.indexOf(w)===-1){v.push(this.tileViewUpdateQueue[w]);}}this.tileViewUpdateQueue=v;this.oModel.setProperty("/groups",p);},
getModelTileById:function(i,I){var j=this.oModel.getProperty('/groups'),M,k=false;j.every(function(p){p[I].every(function(t){if(t.uuid===i||t.originalTileId===i){M=t;k=true;}return!k;});return!k;});return M;},
_addDraggableAttribute:function(v){if(this.isIeHtml5DnD()){v.addEventDelegate({onAfterRendering:function(){this.$().attr("draggable","true");}.bind(v)});}},
_attachLinkPressHandlers:function(v){var E=sap.ui.getCore().getEventBus(),t=v.attachPress?v:v.getContent()[0];t.attachPress(function(i){var j=v.getBindingContext().getObject().tileIsBeingMoved;if(!j&&this.getScope&&this.getScope()==="Actions"){switch(i.getParameters().action){case"Press":var k=v.getState?v.getState():"";if(k!=="Failed"){sap.ushell.components.homepage.ActionMode._openActionsMenu(i,v);}break;case"Remove":var p=v.getBindingContext().getObject().uuid;E.publish("launchpad","deleteTile",{tileId:p,items:'links'});break;}}else{E.publish("launchpad","dashboardTileLinkClick");}});},
handleDisplayModeChange:function(N){this.oModel.setProperty("/homePageGroupDisplay",N);switch(N){case"scroll":this._handleDisplayModeChangeToScroll();break;case"tabs":this._handleDisplayModeChangeToTabs();break;}},
_handleDisplayModeChangeToTabs:function(){var j=this.oModel.getProperty("/iSelectedGroup"),k=this.oModel.getProperty("/groups");if(k.length>0){for(var i=0;i<k.length;i++){this.oModel.setProperty("/groups/"+i+"/isGroupSelected",false);}this.oModel.setProperty("/groups/"+j+"/isGroupSelected",true);sap.ui.getCore().getEventBus().publish("launchpad","beforeAndAfterContentRemoved");}},
_handleDisplayModeChangeToScroll:function(){if(this.isBlindLoading()){return;}var k=this.oModel.getProperty("/groups"),p,t,q,L=[],i,j;for(i=0;i<k.length;i++){p=k[i];t=p.tiles||[];for(j=0;j<t.length;j++){q=t[j];if(q.content.length===0){this.getTileView(q,i);}}L=p.links||[];for(j=0;j<L.length;j++){this.getTileView(L[j],i);}}this.oModel.refresh(false);var v=this.oModel.getProperty("/iSelectedGroup");if(v){setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","scrollToGroup",{groupId:k[v].groupId});},100);}},
getTileViewsFromArray:function(R){var t=this;if(R.length===0){return;}R.forEach(function(i){t.getTileView(i.oTile,i.iGroup);});this.oModel.refresh(false);if(this.bIsFirstSegmentViewLoaded===false){this.bIsFirstSegmentViewLoaded=true;e.emit("firstSegmentCompleteLoaded",true);}},
getTileView:function(t,i){var j,k=this,p=this.oPageBuilderService,M,q,v,U=this._addModelToTileViewUpdateQueue,w,N=false,x=t.uuid,y=false;var z=Q.sap.flpmeasure.startFunc(0,"Service + model binding and rendering for all tile-Views",5,"getTileView",t.object);if(k.oDashboardLoadingManager.isTileViewRequestIssued(t)){return;}this.oDashboardLoadingManager.setTileInProgress(t);p.setTileVisible(t.object,false);j=p.getTileView(t.object);if(j.state()==="resolved"){y=true;}j.done(function(V){if(V.oController&&V.oController.navigationTargetUrl&&!t.isCustomTile){t.target=V.oController.navigationTargetUrl;}w=V;if(w.getComponentInstance){Q.sap.measure.average("FLP:getComponentInstance","get info for navMode","FLP1");var A=w.getComponentInstance().getComponentData();if(A&&A.properties){t.navigationMode=A.properties.navigationMode;}Q.sap.measure.end("FLP:getComponentInstance");}k.oDashboardLoadingManager.setTileResolved(t);M=V.getMode?V.getMode():"ContentMode";if(k.bLinkPersonalizationSupported&&M==="LineMode"){k._attachLinkPressHandlers(w);k._addDraggableAttribute(w);if(i!=undefined){q=k.oModel.getProperty("/groups");if(q[i]){t.content=[w];v=k.oModel.getProperty("/groups/"+i+"/links");k.oModel.setProperty("/groups/"+i+"/links",[]);k.oModel.setProperty("/groups/"+i+"/links",v);}}}else if(k.isBlindLoading()){if(t.content.length>0){t.content[0].destroy();}t.content=[w];if(i!=undefined&&!y){k.oModel.refresh(false);}}if(k.isBlindLoading()){var E=k.oPageBuilderService.getTileSize(t.object);var L=E==="1x2";if(t['long']!==L){t['long']=L;}}else if(M==="LineMode"){t.content=[w];if(N){v=k.oModel.getProperty("/groups/"+i+"/links");k.oModel.setProperty("/groups/"+i+"/links",[]);k.oModel.setProperty("/groups/"+i+"/links",v);}}else if(t.content.length===0){t.content=[w];}else{U.apply(k,[x,w]);k._updateModelWithTileView(0,0);}Q.sap.flpmeasure.endFunc(0,"Service + model binding and rendering for all tile-Views",z);});j.fail(function(){if(k.sTileType==="link"&&k.bLinkPersonalizationSupported){var A=k.oPageBuilderService.getCatalogTilePreviewSubtitle(t.object);var E=k.oPageBuilderService.getCatalogTilePreviewTitle(t.object);if(!E&&!A){E=r.i18n.getText("cannotLoadLinkInformation");}w=new G({mode:"LineMode",state:"Failed",header:E,subheader:A});k._attachLinkPressHandlers(w);}else{w=new T({state:"Failed"});}t.content=[w];});if(!w){if(p.getTileType(t.object)==="link"){N=true;w=new G({mode:"LineMode"});}else{w=new T();}t.content=[w];}},
_getTileModel:function(t,i,j){var k=this.oPageBuilderService,p=Q.sap.uid(),q;this.sTileType=j;var v=k.getTileSize(t);var L=[];if(j==="link"){L=[new G({mode:"LineMode"})];}q={"isCustomTile":!this._getIsAppBox(t),"object":t,"originalTileId":k.getTileId(t),"uuid":p,"tileCatalogId":encodeURIComponent(k.getCatalogTileId(t)),"content":L,"long":v==="1x2","target":k.getTileTarget(t)||"","debugInfo":k.getTileDebugInfo(t),"isTileIntentSupported":k.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":this.oModel.getProperty("/enableTileActionsIcon")||false,"navigationMode":this.navigationMode};return q;},
isIeHtml5DnD:function(){return(D.browser.msie||D.browser.edge)&&(D.system.combi||D.system.tablet);},
loadPersonalizedGroups:function(){Q.sap.flpmeasure.start(0,"Service: Get Data for Dashboard",4);Q.sap.measure.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return this.oPageBuilderService.getGroups().done(function(i){Q.sap.measure.end("FLP:DashboardManager.loadPersonalizedGroups");this.loadGroupsFromArray(i);}.bind(this)).fail(function(){m.showLocalizedError("fail_to_load_groups_msg");});}
});
return H;});
sap.ui.predefine('sap/ushell/components/LifeCycleWrapper',["sap/ushell/Config"],function(C){"use strict";var L=function(){this.oInstanceManager={};L.prototype.Init();};
L.prototype.Init=function(){this.oManagedComponents={};};
L.prototype.processDelay=function(n,c){if(!c||c.delay===undefined){return false;}var m=this.oManagedComponents[n];if(c.delay===0){m.fnRun();return true;}else{m.oTimer=setTimeout(m.fnRun,c.delay);return false;}};
L.prototype.processOn=function(n,c){var o;if(c.on){var m=this.oManagedComponents[n],e=sap.ui.getCore().getEventBus();for(o=0;o<c.on.length;o++){var E=c.on[o];e.subscribe(E.sender,E.signal,m.fnRun,this);}}};
L.prototype.processLaunchData=function(n){if(!this.oManagedComponents[n]){return;}var c=this.oManagedComponents[n].oConfiguration,l=c.launchData;if(!L.prototype.processDelay(n,l)){L.prototype.processOn(n,l);}};
L.prototype.startComponent=function(n,r,c){if(this.oManagedComponents[n]){return;}this.oManagedComponents[n]={sState:'start',fnRun:r,oConfiguration:c,oTimer:undefined};};
L.prototype.componentCreated=function(n){if(!this.oManagedComponents[n]){return;}var m=this.oManagedComponents[n],c=this.oManagedComponents[n].oConfiguration;if(m.oTimer){clearTimeout(m.oTimer);}if(c.launchData.on){var M=this.oManagedComponents[n],o,e=sap.ui.getCore().getEventBus();for(o=0;o<c.launchData.on.length;o++){var E=c.launchData.on[o];e.unsubscribe(E.sender,E.signal,M.fnRun,this);}}};
L.prototype.createLifeCycleWrapperShell=function(c){var b=true,d=jQuery.Deferred(),r=function(a,f,o){if(!sap.ushell.Container){d.reject();return;}jQuery.sap.registerModulePath(c.run.ui5ComponentName,c.run.url+"/");sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(c.run).done(function(l){L.prototype.componentCreated(c.name);if(o&&(typeof o==="function")){o();}d.resolve(l);}).fail(function(F){d.reject(F);});}.bind(this),e=c.launchData.excludedStates,s;if(e){s=C.last("/core/shell/model/currentState/stateName");if(e.indexOf(s)!=-1){b=false;}}if(b){this.startComponent(c.name,r,c);this.processLaunchData(c.name);}else{d.reject();}return d;};
return new L();},true);
sap.ui.predefine('sap/ushell/components/SharedComponentUtils',["sap/ushell/Config","sap/ushell/UserActivityLog","sap/ushell/resources","sap/ushell/components/homepage/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/bootstrap/common/common.load.model","sap/base/Log"],function(C,U,r,a,A,m,L){"use strict";var s={PERS_KEY:"flp.settings.FlpSettings",bFlpSettingsAdded:false,toggleUserActivityLog:function(){C.on("/core/extension/SupportTicket").do(function(c){if(c){U.activate();}else{U.deactivate();}});},initializeAccessKeys:function(R){var t,S;if(sap.ui.Device.system.phone){return;}a.init(m.getModel(),R);A.registerAppKeysHandler(a.handleFocusOnMe);t=r.i18n;S=[];S.push({text:"Alt+H",description:t.getText("hotkeyHomePage")});if(m.getModel().getProperty("/personalization")){S.push({text:"Alt+A",description:t.getText("hotkeyFocusOnAppFinderButton")});S.push({text:"Ctrl+Enter",description:t.getText("hotkeySaveEditing")});}A.registerAppShortcuts(a.handleShortcuts,S);},getEffectiveHomepageSetting:function(c,b){var p,d=new jQuery.Deferred(),e=C.last(b)!==false,i=c.split("/").reverse()[0];if(e){p=this._getPersonalization(i);}else{p=jQuery.Deferred().resolve();}p.done(function(v){v=v||C.last(c);if(v!==undefined){C.emit(c,v);}d.resolve(v);});p.fail(function(){var v=C.last(c);d.resolve(v);});return d;},_getPersonalization:function(i){var p=s.getPersonalizer(i,sap.ushell.Container.getRenderer("fiori2"));var P=p.getPersData();P.fail(function(e){L.error("Failed to load "+i+" from the personalization",e,"sap.ushell.components.flp.settings.FlpSettings");});return P;},getPersonalizer:function(i,c){var p=sap.ushell.Container.getService("Personalization");var o=sap.ui.core.Component.getOwnerComponentFor(c);var S={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:this.PERS_KEY,item:i};return p.getPersonalizer(P,S,o);}};return s;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/DashboardLoadingManager',["sap/ui/base/Object"],function(B){"use strict";
var D=B.extend("sap.ushell.components._HomepageManager.DashboardLoadingManager",{
metadata:{publicMethods:[]},
constructor:function(i,s){var e=sap.ui.getCore().getEventBus();this.currentVisibleTiles=[];this.aRefreshTiles=[];this.oBusyIndicatorTiles={};this.oActiveDynamicTiles={};this.oResolvedTiles={};this.oInProgressTiles={};this.oDashboardManager=s.oDashboardManager;e.subscribe("launchpad","visibleTilesChanged",this._onVisibilityChanged,this);e.subscribe("launchpad","dashboardTileClick",this._addTileToRefreshArray,this);e.subscribe("launchpad","refresTiles",this._refreshTiles,this);e.subscribe("launchpad","setTilesNoVisibility",this._setTilesNoVisibility,this);e.subscribe("launchpad","onHiddenTab",this._setTilesNoVisibility,this);},
_onVisibilityChanged:function(c,e,v){this.currentVisibleTiles=v;if(this.oDashboardManager.isBlindLoading()){this.manageTilesView();}this.manageBusyIndicatorTiles();this.manageDynamicTiles();},
manageDynamicTiles:function(){var v;jQuery.sap.measure.average("DashboardLoadingManagerActiveDynamicTile","Manage Active Dynamic Tiles","FLP_SHELL");var l=sap.ushell.Container.getService("LaunchPage"),k,V,t,a,n={},c=jQuery.extend(true,{},{},this.oActiveDynamicTiles);for(var i=0;i<this.currentVisibleTiles.length;i++){var o=this.currentVisibleTiles[i];if(!o.bIsExtanded){delete c[o.oTile.uuid];}}for(k in c){t=this.oActiveDynamicTiles[k];a=t.object;l.setTileVisible(a,false);}for(V=0;V<this.currentVisibleTiles.length;V++){v=this.currentVisibleTiles[V];if(!v.bIsExtanded){t=v.oTile;a=t.object;if(this.oActiveDynamicTiles[t.uuid]===undefined&&a){l.setTileVisible(a,true);}n[t.uuid]=t;}}this.oActiveDynamicTiles=n;jQuery.sap.measure.end("DashboardLoadingManagerActiveDynamicTile");},
isTileViewRequestIssued:function(t){if(this.oInProgressTiles[t.uuid]==undefined&&this.oResolvedTiles[t.uuid]==undefined){return false;}else{return true;}},
manageBusyIndicatorTiles:function(){jQuery.sap.measure.average("DashboardLoadingManagerBusyIndicators","Manage Busy Indicators on Tiles","FLP_SHELL");var v,c,C,I,r=[],b,a=[];for(c in this.oBusyIndicatorTiles){b=true;I=this.oBusyIndicatorTiles[c];if(this.oResolvedTiles[c]===undefined){for(var i=0;i<this.currentVisibleTiles.length;i++){if(this.currentVisibleTiles[i].oTile.uuid===I.oTile.uuid){b=false;break;}}if(b){r.push(I);}}}for(v=0;v<this.currentVisibleTiles.length;v++){C=this.currentVisibleTiles[v];if(this.oBusyIndicatorTiles[C.oTile.uuid]===undefined&&this.oResolvedTiles[C.oTile.uuid]===undefined){a.push(C);}}for(v=0;v<r.length;v++){C=r[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState();}}else{C.oTile.content[0].setState();}}delete this.oBusyIndicatorTiles[C.oTile.uuid];}for(v=0;v<a.length;v++){C=a[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState("Loading");}}else{C.oTile.content[0].setState("Loading");}}this.oBusyIndicatorTiles[C.oTile.uuid]=C;}jQuery.sap.measure.end("DashboardLoadingManagerBusyIndicators");},
setTileInProgress:function(t){this.oInProgressTiles[t.uuid]=t;},
setTileResolved:function(t){delete this.oInProgressTiles[t.uuid];this.oResolvedTiles[t.uuid]=t;},
_addTileToRefreshArray:function(c,e,d){this.aRefreshTiles.push(d.uuid);},
_refreshTiles:function(){var l=sap.ushell.Container.getService("LaunchPage");for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){for(var r=0;r<this.aRefreshTiles.length;r++){if(t.uuid===this.aRefreshTiles[r]){this.aRefreshTiles.splice(r,1);l.setTileVisible(a,true);l.refreshTile(a);break;}}}}},
_setTilesNoVisibility:function(){if(!sap.ushell.Container){return;}var l=sap.ushell.Container.getService("LaunchPage");for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){l.setTileVisible(a,false);}delete this.oActiveDynamicTiles[t.uuid];}},
manageTilesView:function(){var v,c,r=[];for(v=0;v<this.currentVisibleTiles.length;v++){c=this.currentVisibleTiles[v];if(this.oInProgressTiles[c.oTile.uuid]==undefined&&this.oResolvedTiles[c.oTile.uuid]==undefined){r.push(c);}}this.oDashboardManager.getTileViewsFromArray(r);}
});
return D;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PagingManager',["sap/ui/base/Object","sap/ui/Device","sap/ushell/Config"],function(B,D,C){"use strict";var T=7;
var P=B.extend("sap.ushell.components._HomepageManager.PagingManager",{
metadata:{publicMethods:["setElementClass","GetGroupHeight","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},
constructor:function(i,s){sap.ushell.components._HomepageManager.getPagingManager=jQuery.sap.getter(this.getInterface());this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.supportedElements=s.supportedElements||"";this.tileHeight=0;this.tileSize={"sapUshellTile":{width:100,height:100},"sapUshellLinkTile":{width:40,height:20},"default":{width:40,height:20}};},
getTileHeight:function(){return this.tileHeight;},
setElementClass:function(c){this.supportedElements=c;},
_getTileHeight:function(i){return i?148:176;},
_getTileWidth:function(i,I){if(i){return I?304:360;}else{return I?148:176;}},
getGroupHeight:function(g,f){if(!g||g.isGroupVisible===false){return 0;}var t=g.tiles,l=g.links,I=D.system.phone||C.last("/core/home/sizeBehavior")==="Small",w=this._getTileWidth(false,I),W=this._getTileWidth(true,I),a=48,b=8,A=this.containerWidth-b;var r=0,R=1,c,d,i;var s=t.some(function(c){return!!c&&c.isTileIntentSupported!==false;});if(!s){if(g.isGroupLocked||g.isDefaultGroup){return 0;}else{return(a+b)/this.containerHeight;}}var h=b;if(!f){h+=a;}if(l&&l.length){h+=44;}for(i=0;i<t.length;i++){if(h>this.containerHeight){break;}c=t[i];if(!c||c.isTileIntentSupported===false){continue;}d=c.long?W:w;if(r>0){r+=T;}r+=d;if(r>A){R+=1;r=d;}}h+=(this._getTileHeight(I)+T)*R;return h/this.containerHeight;},
setContainerSize:function(n,a){var t=this.getNumberOfAllocatedElements();this.containerHeight=n;this.containerWidth=a;this._changePageSize(t);},
getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex;},
_changePageSize:function(t){this.currentPageIndex=Math.ceil(t/this._calcElementsPerPage());},
moveToNextPage:function(){this.currentPageIndex++;},
resetCurrentPageIndex:function(){this.currentPageIndex=0;},
getSizeofSupportedElementInUnits:function(t){return this.supportedElements[t].sizeInBaseUnits;},
_calcElementMatrix:function(c){var e=jQuery("<div>").addClass(c);jQuery('body').append(e);var a=e.height();var b=e.width();var r;if(a<20||b<40){r=this.tileSize[c]||this.tileSize["default"];}else{r={width:b,height:a};}this.tileHeight=a;e.remove();return r;},
_calcElementsPerPage:function(){var s,b,a,m,a,c,e,d;for(s in this.supportedElements){a=this.supportedElements[s];m=this._calcElementMatrix(a.className);a.matrix=m;if(b){b.width=b.width>m.width?m.width:b.width;b.height=b.height>m.height?m.height:b.height;}else{b={width:m.width,height:m.height};}}for(s in this.supportedElements){a=this.supportedElements[s];c=a.matrix;a.sizeInBaseUnits=Math.round(c.width/b.width*c.height/b.height);}e=Math.round(this.containerWidth/b.width);d=Math.round(this.containerHeight/b.height);if(!d||!e||e===Infinity||d===Infinity||e===0||d===0){return 10;}return d*e;}
});
return P;});
sap.ui.predefine('sap/ushell/components/appfinder/AppFinder.controller',['sap/ushell/ui/launchpad/AccessibilityCustomData','sap/ushell/ui5service/ShellUIService','sap/ushell/EventHub','sap/ushell/components/CatalogsManager'],function(A,S,E,C){"use strict";sap.ui.controller("sap.ushell.components.appfinder.AppFinder",{onInit:function(){sap.ushell.Container.getRenderer("fiori2").createExtendedShellState("appFinderExtendedShellState",function(){sap.ushell.Container.getRenderer("fiori2").showHeaderItem('backBtn',true);sap.ushell.Container.getRenderer("fiori2").showHeaderItem('homeBtn',true);});var v=this.getView(),m=v.getModel(),s=v.showEasyAccessMenu;var c={model:m};this.oCatalogsManager=new C("catalogsMgr",c);this.getView().setModel(this._getSubHeaderModel(),"subHeaderModel");this.oConfig=v.parentComponent.getComponentData().config;this.catalogView=sap.ui.view("catalogView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.Catalog",height:"100%",viewData:{parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel()}});this.catalogView.addStyleClass('sapUiGlobalBackgroundColor sapUiGlobalBackgroundColorForce');this._addViewCustomData(this.catalogView,"appFinderCatalogTitle");this.oRouter=this.getView().parentComponent.getRouter();this.oRouter.attachRouteMatched(this._handleAppFinderNavigation.bind(this));v.createSubHeader();if(!s){v.oPage.addContent(this.catalogView);setTimeout(function(){jQuery('#catalogSelect').focus();},0);}sap.ui.Device.resize.attachHandler(this._resizeHandler.bind(this));this.oRouter.initialize();},_resizeHandler:function(){var s=this._showOpenCloseSplitAppButton();var c=this.oSubHeaderModel.getProperty('/openCloseSplitAppButtonVisible');if(s!=c){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonVisible',s);if(s){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',false);}}this._toggleViewWithToggleButtonClass(s);},_handleAppFinderNavigation:function(e){var v=this.getView();this._preloadAppHandler();this._getPathAndHandleGroupContext(e);this._toggleViewWithToggleButtonClass(this._showOpenCloseSplitAppButton());if(v.showEasyAccessMenu){this.onShow(e);}else if(v._showSearch('catalog')){v.updateSubHeader('catalog',false);this._toggleViewWithSearchAndTagsClasses('catalog');}sap.ui.getCore().getEventBus().publish("showCatalog");E.emit("CenterViewPointContentRendered","appFinder");E.emit("showCatalog",{sId:"showCatalog",oData:Date.now()});sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");},_showOpenCloseSplitAppButton:function(){return!sap.ui.Device.orientation.landscape||sap.ui.Device.system.phone;},_resetSubHeaderModel:function(){this.oSubHeaderModel.setProperty('/activeMenu',null);this.oSubHeaderModel.setProperty('/search',{searchMode:false,searchTerm:null});this.oSubHeaderModel.setProperty('/tag',{tagMode:false,selectedTags:[]});this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonVisible',this._showOpenCloseSplitAppButton());this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',false);},_getSubHeaderModel:function(){if(this.oSubHeaderModel){return this.oSubHeaderModel;}this.oSubHeaderModel=new sap.ui.model.json.JSONModel();this._resetSubHeaderModel();return this.oSubHeaderModel;},onTagsFilter:function(e){var t=e.getSource(),s=t.getModel('subHeaderModel'),a=e.getSource().getSelectedItems(),T=a.length>0,o={tagMode:T,selectedTags:[]};a.forEach(function(b,i){o.selectedTags.push(b.getText());});s.setProperty('/activeMenu',this.getCurrentMenuName());s.setProperty('/tag',o);sap.ui.getCore().byId("catalogView").getController().onTag(o);},searchHandler:function(e){var c=sap.ushell.components.getCatalogsManager();c.loadCustomTilesKeyWords();var s=e.getSource().getValue(),a=false;if(s==null){return;}var o=this.oSubHeaderModel.getProperty('/search');var b=this.oSubHeaderModel.getProperty('/activeMenu');if(this.getCurrentMenuName()!=b){b=this.getCurrentMenuName();}if(!o.searchMode&&!e.getParameter('clearButtonPressed')){o.searchMode=true;}if(o.searchMode&&sap.ui.Device.system.phone){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}if(s!=o.searchTerm){if(this.containsOnlyWhiteSpac(s)){s='*';}o.searchTerm=s;a=true;}this.oSubHeaderModel.setProperty("/search",o);this.oSubHeaderModel.setProperty("/activeMenu",b);this.oSubHeaderModel.refresh(true);if(a){sap.ui.getCore().byId("catalogView").getController().onSearch(o);}},_preloadAppHandler:function(){setTimeout(function(){if(sap.ushell.Container){sap.ushell.Container.getRenderer("fiori2").applyExtendedShellState("appFinderExtendedShellState");}this._updateShellHeader(this.oView.oPage.getTitle());}.bind(this),0);},getCurrentMenuName:function(){return this.currentMenu;},_navigateTo:function(n,m){var g=this.oView.getModel().getProperty("/groupContext");var G=g?g.path:null;if(G){this.oRouter.navTo(n,{filters:JSON.stringify({targetGroup:encodeURIComponent(G)})},true);}else{this.oRouter.navTo(n,{},true);}},getSystemsModels:function(){var t=this;if(this.getSystemsPromise){return this.getSystemsPromise;}var g=new jQuery.Deferred();this.getSystemsPromise=g.promise();var m=["userMenu","sapMenu"].map(function(a){var s=new sap.ui.model.json.JSONModel();s.setProperty("/systemSelected",null);s.setProperty("/systemsList",[]);return t.getSystems(a).then(function(r){s.setProperty("/systemsList",r);return s;});});jQuery.when.apply(jQuery,m).then(function(u,s){g.resolve(u,s);});return this.getSystemsPromise;},onSegmentButtonClick:function(e){switch(e.getParameters().id){case"catalog":this._navigateTo("catalog");break;case"userMenu":this._navigateTo("userMenu");break;case"sapMenu":this._navigateTo("sapMenu");break;}},onShow:function(e){var p=e.getParameter("name");if(p===this.getCurrentMenuName()){return;}var v=this.getView();v._updateSearchWithPlaceHolder(p);this._updateCurrentMenuName(p);this.getSystemsModels().then(function(u,s){var a=s.getProperty("/systemsList");var b=u.getProperty("/systemsList");v.oPage.removeAllContent();var c=(this.currentMenu==='sapMenu'?a:b);if(c&&c.length){v.updateSubHeader(this.currentMenu,true);}else if(v._showSearch(this.currentMenu)){v.updateSubHeader(this.currentMenu,false);}if(this.currentMenu==='catalog'){v.oPage.addContent(this.catalogView);}else if(this.currentMenu==='userMenu'){if(!this.userMenuView){this.userMenuView=new sap.ui.view("userMenuView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.EasyAccess",height:"100%",viewData:{menuName:"USER_MENU",easyAccessSystemsModel:u,parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("userMenu")}});this._addViewCustomData(this.userMenuView,"appFinderUserMenuTitle");}v.oPage.addContent(this.userMenuView);}else if(this.currentMenu==='sapMenu'){if(!this.sapMenuView){this.sapMenuView=new sap.ui.view("sapMenuView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.EasyAccess",height:"100%",viewData:{menuName:"SAP_MENU",easyAccessSystemsModel:s,parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("sapMenu")}});this._addViewCustomData(this.sapMenuView,"appFinderSapMenuTitle");}v.oPage.addContent(this.sapMenuView);}this._setFocusToSegmentedButton(c);this.oSubHeaderModel.setProperty("/activeMenu",this.currentMenu);if(this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible")){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}this.oSubHeaderModel.refresh(true);}.bind(this));},_updateCurrentMenuName:function(m){var v=this.getView();if(!v.showEasyAccessMenu||(m==="sapMenu"&&!v.enableEasyAccessSAPMenu)||(m==="userMenu"&&!v.enableEasyAccessUserMenu)){this.currentMenu="catalog";}else{this.currentMenu=m;}this._toggleViewWithSearchAndTagsClasses(m);},_toggleViewWithSearchAndTagsClasses:function(m){var v=this.getView();if(v._showSearch(m)){v.oPage.addStyleClass('sapUshellAppFinderSearch');}else{v.oPage.removeStyleClass('sapUshellAppFinderSearch');}if(v._showSearchTag(m)){v.oPage.addStyleClass('sapUshellAppFinderTags');}else{v.oPage.removeStyleClass('sapUshellAppFinderTags');}},_toggleViewWithToggleButtonClass:function(b){var v=this.getView();if(b){v.oPage.addStyleClass('sapUshellAppFinderToggleButton');}else{v.oPage.removeStyleClass('sapUshellAppFinderToggleButton');}},_setFocusToSegmentedButton:function(s){var v=this.getView();if(s&&s.length){var b=v.segmentedButton.getSelectedButton();setTimeout(function(){jQuery("#"+b).focus();},0);}else{setTimeout(function(){jQuery('#catalogSelect').focus();},0);}},_getPathAndHandleGroupContext:function(o){var p=o.getParameter('arguments');var d=p.filters;var D;try{D=JSON.parse(d);}catch(e){D=d;}var P=(D&&decodeURIComponent(D.targetGroup))||"";P=P==='undefined'?undefined:P;this._updateModelWithGroupContext(P);},_updateModelWithGroupContext:function(p){var l=sap.ushell.Container.getService("LaunchPage"),m=this.oView.getModel(),g,G={path:p,id:"",title:""};if(p&&p!==""){var t=function(){var M=m.getProperty("/groups");if(M.length){g=m.getProperty(p);G.id=l.getGroupId(g.object);G.title=g.title||l.getGroupTitle(g.object);return;}setTimeout(t,100);};t();}m.setProperty("/groupContext",G);},getSystems:function(m){var d=new jQuery.Deferred();var c=sap.ushell.Container.getService("ClientSideTargetResolution");if(!c){d.reject("cannot get ClientSideTargetResolution service");}else{c.getEasyAccessSystems(m).done(function(s){var a=[];var b=Object.keys(s);for(var i=0;i<b.length;i++){var e=b[i];a[i]={"systemName":s[e].text,"systemId":e};}d.resolve(a);}).fail(function(e){d.reject("An error occurred while retrieving the systems: "+e);});}return d.promise();},_addViewCustomData:function(v,t){var r=sap.ushell.resources.i18n;v.addCustomData(new A({key:"role",value:"region",writeToDom:true}));v.addCustomData(new A({key:"aria-label",value:r.getText(t),writeToDom:true}));},_initializeShellUIService:function(){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});},_updateShellHeader:function(t){if(!this.oShellUIService){this._initializeShellUIService();}this.oShellUIService.setTitle(t);this.oShellUIService.setHierarchy();},containsOnlyWhiteSpac:function(t){if(!t||t==="")return false;var T=t;return(!T.replace(/\s/g,'').length);}});},false);
sap.ui.predefine('sap/ushell/components/appfinder/AppFinder.view',function(){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.AppFinder",{createContent:function(){this.oController=this.getController();this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.setModel(this.parentComponent.getModel());this.enableEasyAccessSAPMenu=this.getModel().getProperty("/enableEasyAccessSAPMenu");this.enableEasyAccessUserMenu=this.getModel().getProperty("/enableEasyAccessUserMenu");if((!this.enableEasyAccessSAPMenu&&!this.enableEasyAccessUserMenu)||(sap.ui.Device.system.phone||sap.ui.Device.system.tablet&&(!sap.ui.Device.system.combi))){this.showEasyAccessMenu=false;}else{this.showEasyAccessMenu=true;}var r=sap.ushell.resources.i18n;this.oPage=new sap.m.Page("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?r.getText("appFinderTitle"):r.getText("appFinder_group_context_title",t);}}});return this.oPage;},_showSearch:function(m){var M="enableCatalogSearch";if(m==="userMenu"){M="enableEasyAccessUserMenuSearch";}else if(m==="sapMenu"){M="enableEasyAccessSAPMenuSearch";}return this.getModel().getProperty("/"+M);},_showSearchTag:function(m){if(m==="userMenu"||m==="sapMenu"){return false;}return this.getModel().getProperty("/enableCatalogTagFilter");},createSubHeader:function(){this.oToolbar=new sap.m.Toolbar("appFinderSubHeader",{});this.oToolbar.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsapskipforward:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){e.preventDefault();sap.ushell.components.homepage.ComponentKeysHandler.setFocusOnCatalogTile();}},onAfterRendering:function(){jQuery("#catalog-button").attr("accesskey","a");}});this.oToolbar.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"heading",writeToDom:true}));this.oToolbar.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-level",value:"2",writeToDom:true}));this.oToolbar.addStyleClass('sapUshellAppFinderHeader');this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new sap.m.ToggleButton("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(e){this.getController().oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',e.getSource().getPressed());this.openCloseSplitAppButton.setTooltip(e.getParameter("pressed")?sap.ushell.resources.i18n.getText("ToggleButtonHide"):sap.ushell.resources.i18n.getText("ToggleButtonShow"));}.bind(this),tooltip:sap.ushell.resources.i18n.getText("ToggleButtonShow")});this.openCloseSplitAppButton.addEventDelegate({onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton);}},updateSubHeader:function(m,e){var s,a;this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(e){s=this.createSegmentedButtons(m);this.oPage.addStyleClass('sapUshellAppFinderWithEasyAccess');this.oToolbar.addContent(s);}if(this._showSearch(m)){a=this.createSearchControl(m);this.oToolbar.addContent(a);}this.getController()._updateCurrentMenuName(m);},createSegmentedButtons:function(m){var c,r,s,b,a,i;if(this.segmentedButton){this.segmentedButton.setSelectedButton(m);return this.segmentedButton;}c=this.getController();r=sap.ushell.resources.i18n;s=[];s.push(new sap.m.SegmentedButtonItem("catalog",{text:r.getText("appFinderCatalogTitle"),press:function(e){c.onSegmentButtonClick(e);}}));if(this.enableEasyAccessUserMenu){s.push(new sap.m.SegmentedButtonItem('userMenu',{text:r.getText("appFinderUserMenuTitle"),press:function(e){c.onSegmentButtonClick(e);}}));}if(this.enableEasyAccessSAPMenu){s.push(new sap.m.SegmentedButtonItem('sapMenu',{text:r.getText("appFinderSapMenuTitle"),press:function(e){c.onSegmentButtonClick(e);}}));}this.segmentedButton=new sap.m.SegmentedButton("appFinderSegmentedButtons",{items:s});this.segmentedButton.addEventDelegate({onsaptabprevious:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(!o.getVisible()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}});this.segmentedButton.setSelectedButton(m);b=this.segmentedButton.getItems();for(i=0;i<b.length;i++){a=b[i];a.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-controls",value:a.getId()+"View",writeToDom:true}));}return this.segmentedButton;},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);jQuery('#appFinderSearch input').select();},createSearchControl:function(m){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new sap.m.FlexBox("appFinderSearchContainer");}this.oAppFinderSearchContainer.removeAllItems();if(m==='catalog'&&this._showSearchTag('catalog')){this.createTagControl();this.oAppFinderSearchContainer.addItem(this.oAppFinderTagFilter);}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new sap.m.SearchField("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:'subHeaderModel>/search/searchTerm',mode:sap.ui.model.BindingMode.OneWay}}).addStyleClass('help-id-catalogSearch');this.oAppFinderSearchControl.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-controls",value:"",writeToDom:true}));this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.setFocusOnCatalogTile();}}});}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(m);return this.oAppFinderSearchContainer;},_updateSearchWithPlaceHolder:function(m){var s="";if(m==='catalog'){s="EasyAccessMenu_SearchPlaceHolder_Catalog";}else if(m==='userMenu'){s="EasyAccessMenu_SearchPlaceHolder_UserMenu";}else if(m==='sapMenu'){s="EasyAccessMenu_SearchPlaceHolder_SAPMenu";}if(s&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(sap.ushell.resources.i18n.getText(s));this.oAppFinderSearchControl.setTooltip(sap.ushell.resources.i18n.getText(s));}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter;}this.oAppFinderTagFilter=new sap.m.MultiComboBox("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",visible:{path:"/tagList",formatter:function(t){return t.length>0;}},items:{path:"/tagList",sorter:new sap.ui.model.Sorter("tag",false,false),template:new sap.ui.core.ListItem({text:"{tag}",key:"{tag}"})},selectionChange:[this.oController.onTagsFilter,this.oController]}).addStyleClass('help-id-catalogTagFilter');return this.oAppFinderTagFilter;},getControllerName:function(){return"sap.ushell.components.appfinder.AppFinder";}});},false);
sap.ui.predefine('sap/ushell/components/appfinder/Catalog.controller',["sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/utils/WindowUtils"],function(P,W){"use strict";sap.ui.controller("sap.ushell.components.appfinder.Catalog",{oPopover:null,onInit:function(){this.categoryFilter="";this.preCategoryFilter="";this.oMainModel=this.oView.getModel();this.oSubHeaderModel=this.oView.getModel("subHeaderModel");this.resetPage=false;this.bIsInProcess=false;var t=this;sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this);var r=this.getView().parentComponent.getRouter();r.attachRouteMatched(function(e){t.onShow(e);});this.timeoutId=0;document.subHeaderModel=this.oSubHeaderModel;document.mainModel=this.oMainModel;var T=this.oSubHeaderModel.bindProperty("/openCloseSplitAppButtonToggled");T.attachChange(t.handleToggleButtonModelChanged.bind(this));this.oView.oCatalogsContainer.setHandleSearchCallback(t.handleSearchModelChanged.bind(this));},onBeforeRendering:function(){sap.ui.getCore().getEventBus().publish("renderCatalog");},onAfterRendering:function(){this.wasRendered=true;var m=this.getView().getModel(),c=m.getProperty('/catalogs'),t=this;if(!c.length){}else if(c[0].title!=sap.ushell.resources.i18n.getText('catalogsLoading')){}if(!this.PagingManager){this._setPagingManager();}if(this.PagingManager.currentPageIndex===0){t.allocateNextPage();}jQuery(window).resize(function(){var w=$(window).width(),a=$(window).height();t.PagingManager.setContainerSize(w,a);});t._handleAppFinderWithDocking();sap.ui.getCore().getEventBus().subscribe("launchpad","appFinderWithDocking",t._handleAppFinderWithDocking,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appFinderAfterNavigate",t._handleAppFinderAfterNavigate,this);},_setPagingManager:function(){this.lastCatalogId=0;this.PagingManager=new P('catalogPaging',{supportedElements:{tile:{className:'sapUshellTile'}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});this.getView().getCatalogContainer().setPagingManager(this.PagingManager);},_decodeUrlFilteringParameters:function(u){var U;try{U=JSON.parse(u);}catch(e){U=u;}var h=(U&&U.tagFilter&&U.tagFilter)||[];if(h){try{this.tagFilter=JSON.parse(h);}catch(e){this.tagFilter=[];}}else{this.tagFilter=[];}this.categoryFilter=(U&&U.catalogSelector&&U.catalogSelector)||this.categoryFilter;if(this.categoryFilter){this.categoryFilter=window.decodeURIComponent(this.categoryFilter);}this.searchFilter=(U&&U.tileFilter&&U.tileFilter)||null;if(this.searchFilter){this.searchFilter=window.decodeURIComponent(this.searchFilter);}},_applyFilters:function(w){var s=false;if(this.categoryFilter){this.categoryFilter=sap.ushell.resources.i18n.getText('all')===this.categoryFilter?'':this.categoryFilter;if(this.categoryFilter!=this.preCategoryFilter){s=true;}this.oView.setCategoryFilterSelection(this.categoryFilter,s);}else{s=true;this.oView.setCategoryFilterSelection("",s);}this.preCategoryFilter=this.categoryFilter;if(this.searchFilter&&this.searchFilter.length){this.searchFilter=this.searchFilter.replace(/\*/g,'');this.searchFilter=this.searchFilter.trim();this.oSubHeaderModel.setProperty('/search',{searchMode:true,searchTerm:this.searchFilter});}else if(w){this.oSubHeaderModel.setProperty('/search',{searchMode:false,searchTerm:""});this.resetPage=true;}if(this.tagFilter&&this.tagFilter.length){this.oSubHeaderModel.setProperty('/tag',{tagMode:true,selectedTags:this.tagFilter});}else if(w){this.oSubHeaderModel.setProperty('/tag',{tagMode:false,selectedTags:[]});this.resetPage=true;}this.handleSearchModelChanged();},_handleAppFinderAfterNavigate:function(){this.clearFilters();},clearFilters:function(){var s=false;if(this.categoryFilter!=this.preCategoryFilter){s=true;}var S=this.oSubHeaderModel.getProperty('/search/searchMode'),t=this.oSubHeaderModel.getProperty('/tag/tagMode');if(S){this.oSubHeaderModel.setProperty('/search',{searchMode:true,searchTerm:""});}if(t){this.oSubHeaderModel.setProperty('/tag',{tagMode:true,selectedTags:[]});}if(this.categoryFilter&&this.categoryFilter!=""){this.selectedCategoryId=undefined;this.categoryFilter=undefined;this.getView().getModel().setProperty("/categoryFilter","");this.oView.setCategoryFilterSelection("",s);}this.preCategoryFilter=this.categoryFilter;this.handleSearchModelChanged();},onShow:function(e){var v,u=e.getParameter('arguments').filters;v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(false);}$.extend(this.getView().getViewData(),e);this._decodeUrlFilteringParameters(u);if(this.wasRendered&&!u){this.clearFilters();}else{this._applyFilters(this.wasRendered);}},allocateNextPage:function(){var c=this.getView().getCatalogContainer();if(!c.nAllocatedUnits||c.nAllocatedUnits===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();c.applyPagingCategoryFilters(this.allocateTiles,this.categoryFilter);}},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect"),i=jQuery.grep(s.getItems(),jQuery.proxy(function(I){return I.getBindingContext().getObject().title===this.categoryFilter;},this));if(!i.length&&s.getItems()[0]){i.push(s.getItems()[0]);}},setTagsFilter:function(f){var p={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:(this.searchFilter&&this.searchFilter.length)?encodeURIComponent(this.searchFilter):'',tagFilter:f.length?JSON.stringify(f):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},setCategoryFilter:function(f){var p={catalogSelector:f,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},setSearchFilter:function(f){var p={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:f?encodeURIComponent(f):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},onSearch:function(s){var a=this.oSubHeaderModel.getProperty('/activeMenu');if(this.oView.getId().indexOf(a)!==-1){var b=s.searchTerm?s.searchTerm:"";this.setSearchFilter(b);}else{this._restoreSelectedMasterItem();}},onTag:function(t){var a=this.oSubHeaderModel.getProperty('/activeMenu');if(this.oView.getId().indexOf(a)!==-1){var b=t.selectedTags?t.selectedTags:[];this.setTagsFilter(b);}else{this._restoreSelectedMasterItem();}},getGroupContext:function(){var m=this.getView().getModel(),g=m.getProperty("/groupContext/path");return g?g:"";},_isTagFilteringChanged:function(s){var S=s.length===this.tagFilter.length,i=S;if(!i){return true;}s.some(function(t,I){i=jQuery.inArray(t,this.tagFilter)!==-1;return!i;}.bind(this));return i;},_setUrlWithTagsAndSearchTerm:function(s,S){var u={tileFilter:s&&s.length?encodeURIComponent(s):'',tagFilter:S.length?JSON.stringify(S):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(u)});},handleSearchModelChanged:function(){var s=this.oSubHeaderModel.getProperty('/search/searchMode'),t=this.oSubHeaderModel.getProperty('/tag/tagMode'),p,S=this.oSubHeaderModel.getProperty('/search/searchTerm'),a=this.oSubHeaderModel.getProperty('/tag/selectedTags'),o,b,c,f=[],F;if(!this.PagingManager){this._setPagingManager();}this.PagingManager.resetCurrentPageIndex();this.nAllocatedTiles=0;this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oView.oCatalogsContainer.updateAllocatedUnits(this.allocateTiles);this.oView.oCatalogsContainer.resetCatalogPagination();var d=sap.ui.getCore().byId('catalogTilesDetailedPage');if(d){d.scrollTo(0,0);}if(s||t||this.resetPage){if(a&&a.length>0){o=new sap.ui.model.Filter('tags','EQ','v');o.fnTest=function(T){var l,m;if(a.length===0){return true;}for(l=0;l<a.length;l++){m=a[l];if(T.indexOf(m)===-1){return false;}}return true;}.bind(this);b=new sap.ui.model.Filter([o],true);}S=S?S.replace(/\*/g,''):S;if(S){var e=S.split(/[\s,]+/);var k=new sap.ui.model.Filter(jQuery.map(e,function(v){return(v&&new sap.ui.model.Filter("keywords",sap.ui.model.FilterOperator.Contains,v));}),true);var g=new sap.ui.model.Filter($.map(e,function(v){return(v&&new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v));}),true);var h=new sap.ui.model.Filter($.map(e,function(v){return(v&&new sap.ui.model.Filter("subtitle",sap.ui.model.FilterOperator.Contains,v));}),true);f.push(k);f.push(g);f.push(h);c=new sap.ui.model.Filter(f,false);}var i=this.oView.oCatalogsContainer.getCatalogs();this.oSearchResultsTotal=[];var j=this;if(b&&b.aFilters.length>0&&c){F=new sap.ui.model.Filter([c].concat([b]),true);}else if(b&&b.aFilters.length>0){F=new sap.ui.model.Filter([b],true);}else if(c&&c.aFilters.length>0){F=new sap.ui.model.Filter([c],true);}i.forEach(function(m){m.getBinding("customTilesContainer").filter(F);m.getBinding("appBoxesContainer").filter(F);});this.oView.oCatalogsContainer.bSearchResults=false;this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);this.bSearchResults=this.oView.oCatalogsContainer.bSearchResults;this.oView.splitApp.toDetail(j.getView()._calculateDetailPageId());this.resetPage=false;}else{this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);}p=this.getView()._calculateDetailPageId();this.oView.splitApp.toDetail(p);},_handleAppFinderWithDocking:function(){if(jQuery(".sapUshellContainerDocked").length>0){if(jQuery("#mainShell").width()<710){if(window.innerWidth<1024){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(sap.m.SplitAppMode.ShowHideMode);}else{this.oView.splitApp.setMode(sap.m.SplitAppMode.HideMode);this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",true);}}else{this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(sap.m.SplitAppMode.ShowHideMode);}}},_restoreSelectedMasterItem:function(){var c=this.oView.splitApp.getMasterPage('catalogSelect'),o=sap.ui.getCore().byId(this.selectedCategoryId);if(o){this.categoryFilter=o.getTitle();}c.setSelectedItem(o);},handleToggleButtonModelChanged:function(){var b=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible"),B=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonToggled");if(B!=this.bCurrentButtonToggled){if(!sap.ui.Device.system.phone){if(b){if(B&&!this.oView.splitApp.isMasterShown()){this.oView.splitApp.showMaster();}else if(this.oView.splitApp.isMasterShown()){this.oView.splitApp.hideMaster();}}}else{if(b){if(B&&!this.oView.splitApp.isMasterShown()){var c=sap.ui.getCore().byId('catalogSelect');this.oView.splitApp.backMaster(c);}else if(this.oView.splitApp.isMasterShown()){var d=sap.ui.getCore().byId(this.getView()._calculateDetailPageId());this.oView.splitApp.toDetail(d);}}}}this.bCurrentButtonToggled=B;},_handleCatalogListItemPress:function(e){this.onCategoryFilter(e);if(this.oSubHeaderModel.getProperty('/search/searchTerm')!=""){this.oSubHeaderModel.setProperty('/search/searchMode',true);}if(sap.ui.Device.system.phone||sap.ui.Device.system.tablet){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',!this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled'));}},onCategoryFilter:function(e){var m=e.getSource(),s=m.getSelectedItem(),S=s.getBindingContext(),M=S.getModel();if(M.getProperty("static",S)){M.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategoryId=undefined;this.categoryFilter=undefined;}else{M.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(window.encodeURIComponent(s.getBindingContext().getObject().title));this.categoryFilter=s.getTitle();this.selectedCategoryId=s.getId();}},onTileAfterRendering:function(e){var j=jQuery(e.oSource.getDomRef()),a=j.find(".sapMGT");a.attr("tabindex","-1");},catalogTilePress:function(c){sap.ui.getCore().getEventBus().publish("launchpad","catalogTileClick");},onAppBoxPressed:function(e){var a=e.getSource(),t=a.getBindingContext().getObject(),p;if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}p=sap.ushell.Container.getService("LaunchPage").getAppBoxPressHandler(t);if(p){p(t);}else{var u=a.getProperty("url"),r={},R=sap.ushell.Container.getRenderer("fiori2");if(u&&u.indexOf("#")===0){hasher.setHash(u);}else{r.title=a.getProperty("title");r.appType="App";r.url=u;r.appId=u;R.logRecentActivity(r);W.openURL(u,'_blank');}}},onTilePinButtonClick:function(e){var l=sap.ushell.Container.getService("LaunchPage");var d=l.getDefaultGroup();d.done(function(D){var c=e.getSource(),s=c.getBindingContext(),m=this.getView().getModel(),g=m.getProperty("/groupContext/path");if(g){this._handleTileFooterClickInGroupContext(s,g);}else{var a=m.getProperty("/groups");var l=sap.ushell.Container.getService("LaunchPage");var b=this.getCatalogTileDataFromModel(s);var t=b.tileData.associatedGroups;var G=[];var f=a.map(function(j){var r,k,T;r=l.getGroupId(j.object);k=!($.inArray(r,t)==-1);T={id:r,title:this._getGroupTitle(D,j.object),selected:k};G.push(T);return{selected:k,initiallySelected:k,oGroup:j};}.bind(this));var p=sap.ui.getCore().byId("sapUshellGroupsPopover");var h;if(!p){h=l.getCatalogTilePreviewTitle(m.getProperty(s.sPath).src);if(!h){h=l.getCatalogTileTitle(m.getProperty(s.sPath).src);}var i=new sap.ui.view("sapUshellGroupsPopover",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.GroupListPopover",viewData:{groupData:f,title:h,enableHideGroups:m.getProperty("/enableHideGroups"),enableHelp:m.getProperty("/enableHelp"),sourceContext:s,catalogModel:this.getView().getModel(),catalogController:this}});i.getController().setSelectedStart(G);i.open(c).then(this._handlePopoverResponse.bind(this,s,b));}}}.bind(this));},_getGroupTitle:function(d,g){var l=sap.ushell.Container.getService("LaunchPage"),t;if(d&&(l.getGroupId(d)===l.getGroupId(g))){t=sap.ushell.resources.i18n.getText("my_group");}else{t=l.getGroupTitle(g);}return t;},_handlePopoverResponse:function(s,c,r){if(!r.addToGroups.length&&!r.newGroups.length&&!r.removeFromGroups.length){return;}var m=this.getView().getModel();var g=m.getProperty("/groups");var p=[];r.addToGroups.forEach(function(a){var i=g.indexOf(a);var G=new sap.ui.model.Context(m,"/groups/"+i);var b=this._addTile(s,G);p.push(b);}.bind(this));r.removeFromGroups.forEach(function(a){var t=s.getModel().getProperty(s.getPath()).id;var i=g.indexOf(a);var b=this._removeTile(t,i);p.push(b);}.bind(this));r.newGroups.forEach(function(a){var n=(a.length>0)?a:sap.ushell.resources.i18n.getText("new_group_name");var b=this._createGroupAndSaveTile(s,n);p.push(b);}.bind(this));jQuery.when.apply(jQuery,p).then(function(){var a=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(c,r,a);}.bind(this));},_handlePopoverGroupsActionPromises:function(c,p,r){var e=r.filter(function(g,i,r){return!g.status;});if(e.length){var E=this.prepareErrorMessage(e,c.tileData.title);var a=sap.ushell.components.getCatalogsManager();a.resetAssociationOnFailure(E.messageId,E.parameters);return;}var t=[];var l=sap.ushell.Container.getService("LaunchPage");p.allGroups.forEach(function(g){if(g.selected){var h=l.getGroupId(g.oGroup.object);t.push(h);}});var m=this.getView().getModel();if(p.newGroups.length){var d=m.getProperty("/groups");var n=d.slice(d.length-p.newGroups.length);n.forEach(function(g){var h=l.getGroupId(g.object);t.push(h);});}m.setProperty(c.bindingContextPath+"/associatedGroups",t);var f=(p.addToGroups[0])?p.addToGroups[0].title:"";if(!f.length&&p.newGroups.length){f=p.newGroups[0];}var b=(p.removeFromGroups[0])?p.removeFromGroups[0].title:"";var D=this.prepareDetailedMessage(c.tileData.title,p.addToGroups.length+p.newGroups.length,p.removeFromGroups.length,f,b);sap.m.MessageToast.show(D,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_getCatalogTileIndexInModel:function(s){var t=s.sPath,a=t.split("/"),b=a[a.length-1];return b;},_handleTileFooterClickInGroupContext:function(s,g){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),c=this.getCatalogTileDataFromModel(s),a=c.tileData.associatedGroups,G=m.getProperty(g),b=l.getGroupId(G.object),C=$.inArray(b,a),t=c.bindingContextPath,o,A,r,T,d,e=this;if(c.isBeingProcessed){return;}m.setProperty(t+'/isBeingProcessed',true);if(C==-1){o=new sap.ui.model.Context(s.getModel(),g);A=this._addTile(s,o);A.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,true);}else{e._groupContextOperationFailed(c,G,true);}});A.always(function(){m.setProperty(t+'/isBeingProcessed',false);});}else{T=s.getModel().getProperty(s.getPath()).id;d=g.split('/')[2];r=this._removeTile(T,d);r.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,false);}else{e._groupContextOperationFailed(c,G,false);}});r.always(function(){m.setProperty(t+'/isBeingProcessed',false);});}},_groupContextOperationSucceeded:function(s,c,g,t){var l=sap.ushell.Container.getService("LaunchPage"),G=l.getGroupId(g.object),a=c.tileData.associatedGroups,d,i;if(t){a.push(G);s.getModel().setProperty(c.bindingContextPath+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,1,0,g.title,"");}else{for(i in a){if(a[i]==G){a.splice(i,1);break;}}s.getModel().setProperty(c.bindingContextPath+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,0,1,"",g.title);}sap.m.MessageToast.show(d,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_groupContextOperationFailed:function(c,g,t){var a=sap.ushell.components.getCatalogsManager(),e;if(t){e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[c.tileData.title,g.title]});}else{e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[c.tileData.title,g.title]});}a.notifyOnActionFailure(e.messageId,e.parameters);},prepareErrorMessage:function(e,t){var g,a,f,F,n=0,N=0,c=false,m;for(var i in e){g=e[i].group;a=e[i].action;if(a=='add'){n++;if(n==1){f=g.title;}}else if(a=='remove'){N++;if(N==1){F=g.title;}}else if(a=='addTileToNewGroup'){n++;if(n==1){f=g.title;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){if(n){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,F]});}}else if(N==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]});}else if(n==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}return m;},prepareDetailedMessage:function(t,n,a,f,b){var m;if(n==0){if(a==1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSingleGroup",[t,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSeveralGroups",[t,a]);}}else if(n==1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroup",[t,f]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,a]);}}else if(n>1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroups",[t,n]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,a]);}}return m;},getCatalogTileDataFromModel:function(s){var b=s.getPath(),m=s.getModel(),t=m.getProperty(b);return{tileData:t,bindingContextPath:b,isBeingProcessed:t.isBeingProcessed?true:false};},_addTile:function(t,g){var c=sap.ushell.components.getCatalogsManager(),d=jQuery.Deferred(),p=c.createTile({catalogTileContext:t,groupContext:g});p.done(function(a){d.resolve(a);});return d;},_removeTile:function(t,i){var c=sap.ushell.components.getCatalogsManager(),d=jQuery.Deferred(),p=c.deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(a){d.resolve(a);});return d;},_createGroupAndSaveTile:function(t,n){var c=sap.ushell.components.getCatalogsManager(),d=jQuery.Deferred(),p=c.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(a){d.resolve(a);});return d;},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this);}});},false);
sap.ui.predefine('sap/ushell/components/appfinder/Catalog.view',['sap/ui/core/HTML','sap/ushell/ui/appfinder/AppBox','sap/ushell/ui/appfinder/PinButton','sap/ushell/ui/launchpad/CatalogEntryContainer','sap/ushell/ui/launchpad/CatalogsContainer','sap/ushell/ui/launchpad/Panel','sap/ushell/ui/launchpad/Tile'],function(H,A,P,C,a,b,T){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.Catalog",{oController:null,createContent:function(c){var t=this;this.oViewData=this.getViewData();this.parentComponent=this.oViewData.parentComponent;var m=this.parentComponent.getModel();this.setModel(m);this.setModel(this.oViewData.subHeaderModel,"subHeaderModel");this.oController=c;function i(L){return((L!==null)&&(L==="1x2"||L==="2x2"))||false;}function d(v){return parseInt(v,10)||0;}function g(e,q,G,r,v,w){var x;if(r){var R=sap.ushell.resources.i18n,y=$.inArray(v,G);x=R.getText(y!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup",w);}else{x=G&&G.length?q:e;}return x;}var o=new P({icon:'sap-icon://pushpin-off',selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(e,q,G,r){if(G){var v=$.inArray(r,e);return v!==-1;}else{return!!q;}}},tooltip:{parts:["i18n>EasyAccessMenu_PinButton_UnToggled_Tooltip","i18n>EasyAccessMenu_PinButton_Toggled_Tooltip","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(e,q,G,r,v,w,x){return g(e,q,G,v,w,x);}},press:[c.onTilePinButtonClick,c]});var f=new P({icon:'sap-icon://pushpin-off',selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(e,q,G,r){if(G){var v=$.inArray(r,e);return v!==-1;}else{return!!q;}}},tooltip:{parts:["i18n>EasyAccessMenu_PinButton_UnToggled_Tooltip","i18n>EasyAccessMenu_PinButton_Toggled_Tooltip","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(e,q,G,r,v,w,x){return g(e,q,G,v,w,x);}},press:[c.onTilePinButtonClick,c]});this.oAppBoxesTemplate=new A({title:'{title}',icon:'{icon}',subtitle:'{subtitle}',url:'{url}',navigationMode:'{navigationMode}',pinButton:f,press:[c.onAppBoxPressed,c]});f.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));f.addStyleClass("sapUshellPinButton");o.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));o.addStyleClass("sapUshellPinButton");this.oTileTemplate=new T({tileViews:{path:"content",factory:function(I,e){return e.getObject();}},"long":{path:"size",formatter:i},index:{path:"id",formatter:d},tileCatalogId:"{id}",pinButton:o,press:[c.catalogTilePress,c],afterRendering:c.onTileAfterRendering});this.oCatalogSelect=new sap.m.List("catalogSelect",{visible:"{/enableCatalogSelection}",name:"Browse",rememberSelections:true,mode:"SingleSelectMaster",items:{path:"/masterCatalogs",template:new sap.m.StandardListItem({type:"Active",title:"{title}",tooltip:"{title}"})},showNoData:false,itemPress:[c._handleCatalogListItemPress,c]});this.getCatalogSelect=function(){return this.oCatalogSelect;};var h=this.oCatalogSelect.onAfterRendering;this.oCatalogSelect.addEventDelegate({onsaptabnext:function(q){try{q.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.setFocusOnCatalogTile();}catch(e){}},onsapskipforward:function(q){try{q.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.setFocusOnCatalogTile();}catch(e){}},onsapskipback:function(q){try{q.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var r=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(r.getVisible()){r.focus();}else{sap.ushell.components.homepage.ComponentKeysHandler.appFinderFocusMenuButtons(q);}}catch(e){}}});if(m.getProperty("/enableHelp")){this.oCatalogSelect.addStyleClass('help-id-catalogCategorySelect');}this.setCategoryFilterSelection=function(S,e){var q=t.getCatalogSelect(),r=q.getItems(),v=S,w=0;if(!v||v==""){v=sap.ushell.resources.i18n.getText('all');}r.forEach(function(L,x){if(L.getTitle()===v){w=x;q.setSelectedItem(L);}});if(r.length!=0&&e){r[w].focus();}};this.oCatalogSelect.onAfterRendering=function(){var S=t.oController.categoryFilter||sap.ushell.resources.i18n.getText('all');t.setCategoryFilterSelection(S);if(h){h.apply(this,arguments);}if(!this.getSelectedItem()){this.setSelectedItem(this.getItems()[0]);}setTimeout(function(){var e=jQuery("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(e.length){e.eq(0).focus();}else{jQuery("#catalog-button").focus();}},0);};var j=this.oCatalogSelect._onAfterRenderingPopover;this.oCatalogSelect._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false);}if(j){j.apply(this,arguments);}};var E=sap.ui.getCore().getEventBus(),D,u=function(){this.splitApp.toMaster('catalogSelect','show');if(!sap.ui.Device.system.phone){D=this._calculateDetailPageId();if(D!=this.splitApp.getCurrentDetailPage().getId()){this.splitApp.toDetail(D);}}};E.subscribe("launchpad","catalogContentLoaded",function(){setTimeout(u.bind(this),500);},this);E.subscribe("launchpad","afterCatalogSegment",u,this);var k=new H("sapUshellCatalogAccessibilityTileText",{content:"<div style='height: 0px; width: 0px; overflow: hidden; float: left;'>"+sap.ushell.resources.i18n.getText("tile")+"</div>"});var l=new C({header:'{title}',customTilesContainer:{path:"customTiles",template:this.oTileTemplate,templateShareable:true},appBoxesContainer:{path:"appBoxes",template:this.oAppBoxesTemplate,templateShareable:true}});this.oMessagePage=new sap.m.MessagePage({visible:true,showHeader:false,text:sap.ushell.resources.i18n.getText('EasyAccessMenu_NoAppsToDisplayMessagePage_Text'),description:''});this.oCatalogsContainer=new a("catalogTiles",{categoryFilter:"{/categoryFilter}",catalogs:{path:"/catalogs",templateShareable:true,template:l},busy:true});this.oCatalogsContainer.addStyleClass('sapUshellCatalogTileContainer');this.oCatalogsContainer.addEventDelegate({onsaptabprevious:function(e){var q=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader"),r=jQuery(e.srcControl.getDomRef());if(q.getVisible()&&!q.getPressed()&&!r.hasClass("sapUshellPinButton")){e.preventDefault();var v=sap.ui.getCore().byId("appFinderSearch");v.focus();}},onsapskipback:function(e){var q=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(q.getVisible()&&!q.getPressed()){e.preventDefault();q.focus();}}});this.oCatalogsContainer.onAfterRendering=function(){var e=sap.ui.getCore().byId('catalogTilesDetailedPage');if(!this.getBusy()){e.setBusy(false);jQuery.sap.measure.end("FLP:AppFinderLoadingStartToEnd");}else{e.setBusy(true);}jQuery("#catalogTilesDetailedPage-cont").scroll(function(){var q=sap.ui.getCore().byId('catalogTilesDetailedPage'),r=q.getScrollDelegate(),v=r.getScrollTop(),w=r.getMaxScrollTop();if(w-v<=30+3*t.oController.PagingManager.getTileHeight()&&t.oController.bIsInProcess===false){t.oController.bIsInProcess=true;t.oController.allocateNextPage();setTimeout(function(){t.oController.bIsInProcess=false;},0);}});};this.wrapCatalogsContainerInDetailPage=function(e,I){var q=new sap.m.Page(I,{showHeader:false,showFooter:false,showNavButton:false,content:[new b({translucent:true,content:e}).addStyleClass("sapUshellCatalogPage")]});return q;},this.getCatalogContainer=function(){return this.oCatalogsContainer;};new sap.m.Page({showHeader:false,showFooter:false,showNavButton:false,content:[new b({translucent:true,content:[k,this.getCatalogContainer()]}).addStyleClass("sapUshellCatalogPage")]});var n=this.wrapCatalogsContainerInDetailPage([k,this.getCatalogContainer()],'catalogTilesDetailedPage'),p=new sap.m.Page('catalogMessagePage',{showHeader:false,showFooter:false,showNavButton:false,content:[this.oMessagePage]});var s=new sap.m.BusyIndicator('catalogSelectBusyIndicator',{size:"1rem"});this.splitApp=new sap.m.SplitApp('catalogViewMasterDetail',{masterPages:[s,this.oCatalogSelect],detailPages:[n,p]});document.toSearch=function(){this.splitApp.toDetail('catalogTilesSearchPage');}.bind(this);document.toDetail=function(){this.splitApp.toDetail('catalogTilesDetailedPage');}.bind(this);document.toMessage=function(){this.splitApp.toDetail('catalogMessagePage');}.bind(this);return this.splitApp;},_calculateDetailPageId:function(){var s=this.getModel('subHeaderModel');var S=s.getProperty('/search/searchMode');var t=s.getProperty('/tag/tagMode');var n=this.getModel().getProperty("/catalogsNoDataText")?true:false;var i;if(S||t){i=this.getController().bSearchResults?'catalogTilesDetailedPage':'catalogMessagePage';}else if(n){i="catalogMessagePage";}else{i="catalogTilesDetailedPage";}return i;},getControllerName:function(){return"sap.ushell.components.appfinder.Catalog";}});},false);
sap.ui.predefine('sap/ushell/components/appfinder/Component',['sap/ushell/components/CatalogsManager','sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/homepage/ComponentKeysHandler','sap/m/routing/Router','sap/ushell/UserActivityLog','sap/ushell/Config','sap/ushell/bootstrap/common/common.load.model',"sap/ushell/components/SharedComponentUtils"],function(C,r,U,a,R,b,c,m,s){"use strict";return U.extend("sap.ushell.components.appfinder.Component",{metadata:{routing:{config:{viewType:"JS",controlAggregation:"detailPages",controlId:"catalogViewMasterDetail",clearAggregation:false,routerClass:R,async:true},routes:[]},version:"1.60.40",library:"sap.ushell.components.flp",dependencies:{libs:["sap.m"]},config:{semanticObject:'Shell',action:'home',title:r.i18n.getText("homeBtn_tooltip"),fullWidth:true,hideLightBackground:true}},parseOldCatalogParams:function(u){var p=jQuery.sap.getUriParameters(u).mParams,v,k;for(k in p){if(p.hasOwnProperty(k)){v=p[k][0];p[k]=v.indexOf('/')!==-1?encodeURIComponent(v):v;}}return p;},handleNavigationFilter:function(n){var S=sap.ushell.Container.getService("URLParsing").parseShellHash(n),p;if(S&&S.semanticObject==='shell'&&S.action==='catalog'){p=this.parseOldCatalogParams(n);setTimeout(function(){this.getRouter().navTo("catalog",{filters:JSON.stringify(p)});}.bind(this),0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}return this.oShellNavigation.NavigationFilterStatus.Continue;},createContent:function(){this.oRouter=this.getRouter();this.isEmbedded=!sap.ushell.Container.isMock;this.oModel=m.getModel();this.setModel(this.oModel);var h,S,p,o,P=c.last("/core/shell/enablePersonalization");if(P){this.oRouter.addRoute({name:"userMenu",pattern:"userMenu/:filters:"});this.oRouter.addRoute({name:"sapMenu",pattern:"sapMenu/:filters:"});this.oRouter.addRoute({name:"catalog",pattern:["catalog/:filters:","",":filters:"]});s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");}var d={model:this.oModel,router:this.oRouter};this.oCatalogsManager=new C("dashboardMgr",d);this.setModel(r.i18nModel,"i18n");s.toggleUserActivityLog();this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");h=hasher.getHash();S=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(S&&S.semanticObject==='shell'&&S.action==='catalog'){p=this.parseOldCatalogParams(h);o=this.getMetadata().getConfig();this.oShellNavigation.toExternal({target:{semanticObject:o.semanticObject,action:o.action}});this.getRouter().navTo("catalog",{filters:JSON.stringify(p)});}var A=sap.ui.view({id:"appFinderView",viewName:"sap.ushell.components.appfinder.AppFinder",type:"JS",async:true});return A;},exit:function(){this.oCatalogsManager.destroy();m.unsubscribeEventHandlers();}});});
sap.ui.predefine('sap/ushell/components/appfinder/EasyAccess.controller',["sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/datajs"],function(O,a){"use strict";sap.ui.controller("sap.ushell.components.appfinder.EasyAccess",{DEFAULT_URL:"/sap/opu/odata/UI2",DEFAULT_NUMBER_OF_LEVELS:3,SEARCH_RESULTS_PER_REQUEST:100,onInit:function(){var t=this;this.translationBundle=sap.ushell.resources.i18n;this.oView=this.getView();var e=this.oView.getModel("easyAccessSystemsModel");var s=e.bindProperty("/systemSelected");s.attachChange(t.adjustUiOnSystemChange.bind(this));this.menuName=this.oView.getViewData().menuName;this.systemId=null;this.easyAccessCache={};this.easyAccessModel=new sap.ui.model.json.JSONModel();this.oView.hierarchyFolders.setModel(this.easyAccessModel,"easyAccess");this.oView.hierarchyApps.setModel(this.easyAccessModel,"easyAccess");var S=this.oView.getModel("subHeaderModel");var T=S.bindProperty("/openCloseSplitAppButtonToggled");T.attachChange(t.handleToggleButtonModelChanged.bind(this));if(this.oView.getViewData().enableSearch){var o=S.bindProperty("/search");o.attachChange(t.handleSearchModelChanged.bind(this));}this.checkIfSystemSelectedAndLoadData();},onAfterRendering:function(){setTimeout(function(){this.oView.hierarchyApps.getController()._updateAppBoxedWithPinStatuses();}.bind(this),0);},checkIfSystemSelectedAndLoadData:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;this.loadMenuItemsFirstTime(this.oView.getViewData().menuName,s);}},navigateHierarchy:function(p,f){this.oView.hierarchyFolders.setBusy(false);var e=this.easyAccessModel.getProperty(p?p:"/");if(typeof e.folders!="undefined"){this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);return;}this.oView.hierarchyFolders.setBusy(true);this.getMenuItems(this.menuName,this.systemId,e.id,e.level).then(function(p,r){this.easyAccessModel.setProperty(p+"/folders",r.folders);this.easyAccessModel.setProperty(p+"/apps",r.apps);this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);this.oView.hierarchyFolders.setBusy(false);}.bind(this,p),function(b){this.handleGetMenuItemsError(b);}.bind(this));},handleSearch:function(s){var i=!this.hierarchyAppsSearchResults;if(i){this.hierarchyAppsSearchResults=new sap.ui.view(this.getView().getId()+"hierarchyAppsSearchResults",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.HierarchyApps",height:"100%",viewData:{easyAccessSystemsModel:this.oView.getModel("easyAccessSystemsModel"),getMoreSearchResults:this.getMoreSearchResults.bind(this)}});this.easyAccessSearchResultsModel=new sap.ui.model.json.JSONModel();this.easyAccessSearchResultsModel.setSizeLimit(10000);this.hierarchyAppsSearchResults.setModel(this.easyAccessSearchResultsModel,"easyAccess");this.hierarchyAppsSearchResults.setBusyIndicatorDelay(this.getView().BUSY_INDICATOR_DELAY);this.hierarchyAppsSearchResults.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyAppsSearchResults.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));this.hierarchyAppsSearchResults.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oView.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));}this.searchResultFrom=0;this.oView.splitApp.getCurrentDetailPage().setBusy(true);this.easyAccessSearchResultsModel.setProperty("/apps",[]);this.easyAccessSearchResultsModel.setProperty("/total",0);this._getSearchResults(s,this.searchResultFrom).then(function(r){r.results.forEach(function(e){var b=sap.ushell.Container.getService("Bookmark");b.countBookmarks(e.url).then(function(c){e.bookmarkCount=c;});});this.easyAccessSearchResultsModel.setProperty("/apps",r.results);this.easyAccessSearchResultsModel.setProperty("/total",r.count);this.searchResultFrom=r.results.length;if(i){this.oView.splitApp.addDetailPage(this.hierarchyAppsSearchResults);}this.hierarchyAppsSearchResults.updateResultSetMessage(parseInt(r.count,10),true);this.oView.splitApp.getCurrentDetailPage().setBusy(false);if(this.oView.splitApp.getCurrentDetailPage()!==this.hierarchyAppsSearchResults){this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyAppsSearchResults");}}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.splitApp.getCurrentDetailPage().setBusy(false);}.bind(this));},getMoreSearchResults:function(){if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true);}var s=this.oView.getModel("subHeaderModel");var S=s.getProperty("/search/searchTerm");this._getSearchResults(S,this.searchResultFrom).then(function(r){var c=this.easyAccessSearchResultsModel.getProperty("/apps");var n=c.slice();Array.prototype.push.apply(n,r.results);this.easyAccessSearchResultsModel.setProperty("/apps",n);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(false);}this.searchResultFrom=n.length;}.bind(this),function(e){this.handleGetMenuItemsError(e);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true);}}.bind(this));},_getSearchResults:function(s,f){var d=new jQuery.Deferred();var S=this._getODataRequestForSearchUrl(this.menuName,this.systemId,s,f);var r={requestUri:S};var c=this._callODataService(r,this.handleSuccessOnReadFilterResults);c.done(function(b){d.resolve(b);});c.fail(function(e){d.reject(e);});return d.promise();},getSystemNameOrId:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){return s.name||s.id;}return;},adjustUiOnSystemChange:function(){var c=this.easyAccessModel.getData();if(this.systemId&&c&&c.id){this.easyAccessCache[this.systemId]=c;}var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;var n=this.easyAccessCache[this.systemId];if(n){this.easyAccessModel.setData(n);this.navigateHierarchy("",false);}else{this.oView.hierarchyFolders.setBusy(true);this.oView.hierarchyApps.setBusy(true);this.loadMenuItemsFirstTime(this.menuName,s);}}},handleToggleButtonModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var b=s.getProperty("/openCloseSplitAppButtonVisible");var B=s.getProperty("/openCloseSplitAppButtonToggled");var S=this.getView().splitApp;if(b){if(B&&!S.isMasterShown()){S.showMaster();}else if(S.isMasterShown()){S.hideMaster();}}},handleSearchModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var A=s.getProperty("/activeMenu");if(this.getView().getId().indexOf(A)===-1){return;}var S=s.getProperty("/search/searchTerm");var b=s.getProperty("/search/searchMode");if(b){sap.ui.getCore().byId('appFinderSearch').getCustomData()[0].setValue(this.getView().getId()+"hierarchyAppsSearchResults");if(S){this.handleSearch(S);}}else{sap.ui.getCore().byId('appFinderSearch').getCustomData()[0].setValue('');this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyApps");}},loadMenuItemsFirstTime:function(m,s){return this.getMenuItems(m,s.systemId,"",0).then(function(r){r.text=s.systemName||s.systemId;this.easyAccessModel.setData(r);this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);this.navigateHierarchy("",false);}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.hierarchyFolders.updatePageBindings("/",false);this.oView.hierarchyApps.getController().updatePageBindings("/");}.bind(this));},handleGetMenuItemsError:function(e){var E=this.getErrorMessage(e);sap.ui.require(["sap/m/MessageBox"],function(M){M.error(E);});this.easyAccessModel.setData("");this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);},getErrorMessage:function(e){var m="";if(this.menuName=="SAP_MENU"){m=this.translationBundle.getText("easyAccessSapMenuNameParameter");}else if(this.menuName=="USER_MENU"){m=this.translationBundle.getText("easyAccessUserMenuNameParameter");}if(e){if(e.message){return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e.message]);}else{return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e]);}}else{return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgNoReason",m);}},getMenuItems:function(m,s,e,b,n){var d=new jQuery.Deferred();if(m!="SAP_MENU"&&m!="USER_MENU"){d.reject("Invalid menuType parameter");return d.promise();}if(typeof s!=="string"||s===""){d.reject("Invalid systemId parameter");return d.promise();}if(typeof e!=="string"){d.reject("Invalid entityId parameter");return d.promise();}if(typeof b!=="number"){d.reject("Invalid entityLevel parameter");return d.promise();}if(n&&typeof n!=="number"){d.reject("Invalid numberOfNextLevels parameter");return d.promise();}if(e==""){b=0;}var N;var M=this.getView().getModel();var c=M.getProperty("/easyAccessNumbersOfLevels");if(c){N=c;}else if(n){N=n;}else{N=this.DEFAULT_NUMBER_OF_LEVELS;}var l=b+N+1;var S=this._getODataRequestUrl(m,s,e,l);var r={requestUri:S};var C=this._callODataService(r,this.handleSuccessOnReadMenuItems,{systemId:s,entityId:e,iLevelFilter:l});C.done(function(f){d.resolve(f);});C.fail(function(f){d.reject(f);});return d.promise();},_callODataService:function(r,s,S){var l,i;var t=this;var d=new jQuery.Deferred();if(!S){S={};}if(sap.ushell.Container){l=sap.ushell.Container&&sap.ushell.Container.getUser().getLanguage();if((l)&&(r.requestUri.indexOf("sap-language=")==-1)){r.requestUri=r.requestUri+(r.requestUri.indexOf("?")>=0?"&":"?")+"sap-language="+l;}i=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";}sap.ui.require(["sap/ui/thirdparty/datajs"],function(){a.read({requestUri:r.requestUri,headers:{"Cache-Control":"no-cache, no-store, must-revalidate","Pragma":"no-cache","Expires":"0","Accept-Language":(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||"","sap-client":(i||""),"sap-language":(l||"")}},function(R,o){if(R&&R.results&&o&&o.statusCode===200){var b=s.bind(t,R,S)();d.resolve(b);}},function(m){d.reject(m);});});return d.promise();},handleSuccessOnReadMenuItems:function(r,p){var R=this._oDataResultFormatter(r.results,p.systemId,p.entityId,p.iLevelFilter);return R;},handleSuccessOnReadFilterResults:function(r){var u;r.results.forEach(function(R,i){u=this._appendSystemToUrl(R,this.systemId);R.url=u;}.bind(this));return{results:r.results,count:r.__count};},_appendSystemToUrl:function(d,s){if(d.url){return d.url+(d.url.indexOf('?')>0?'&':'?')+'sap-system='+s;}},_oDataResultFormatter:function(r,s,e,l){var f={};var R={};if(e==""){R={id:"root",text:"root",level:0,folders:[],apps:[]};f.root=R;}else{R={id:e,folders:[],apps:[]};f[e]=R;}var o;for(var i=0;i<r.length;i++){o=r[i];var p;if(o.level=="01"){p=f["root"];}else{p=f[o.parentId];}var m={id:o.Id,text:o.text,subtitle:o.subtitle,icon:o.icon,level:parseInt(o.level,10)};if(o.type=='FL'){m.folders=[];m.apps=[];if(o.level==l-1){m.folders=undefined;m.apps=undefined;}if(p&&p.folders){p.folders.push(m);}f[o.Id]=m;}else{m.url=this._appendSystemToUrl(o,s);if(p&&p.apps){p.apps.push(m);}}}return R;},_getODataRequestUrl:function(m,s,e,l){var S=this._getServiceUrl(m);var L;if(l<10){L="0"+l;}else{L=l.toString();}var b="";if(e){if(decodeURIComponent(e)===e){e=encodeURIComponent(e);}b="('"+e+"')/AllChildren";}S=S+";o="+s+"/MenuItems"+b+"?$filter=level lt '"+L+"'&$orderby=level,text";return S;},_getODataRequestForSearchUrl:function(m,s,t,f){var S=this._getServiceUrl(m);var n=this.SEARCH_RESULTS_PER_REQUEST;t=this._removeWildCards(t);f=!f?0:f;t=O.formatValue(t,"Edm.String");S=S+";o="+s+"/MenuItems"+"?$filter=type ne 'FL' and substringof("+t+", text) or substringof("+t+", subtitle) or substringof("+t+", url)&$orderby=text,subtitle,url&$inlinecount=allpages&$skip="+f+"&$top="+n;return S;},_getServiceUrl:function(m){var s;var M=this.getView().getModel();if(m=="SAP_MENU"){var S=M.getProperty("/sapMenuServiceUrl");if(S){s=S;}else{s=this.DEFAULT_URL+"/EASY_ACCESS_MENU";}}else if(m=="USER_MENU"){var u=M.getProperty("/userMenuServiceUrl");if(u){s=u;}else{s=this.DEFAULT_URL+"/USER_MENU";}}return s;},_removeWildCards:function(t){return t.replace(/\*/g,"");}});},false);
sap.ui.predefine('sap/ushell/components/appfinder/EasyAccess.view',function(){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.EasyAccess",{BUSY_INDICATOR_DELAY:1000,createContent:function(c){this.oResourceBundle=sap.ushell.resources.i18n;this.setModel(this.getViewData().easyAccessSystemsModel,"easyAccessSystemsModel");this.setModel(this.getViewData().subHeaderModel,"subHeaderModel");this.setModel(this.getViewData().parentComponent.getModel());this.hierarchyFolders=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.HierarchyFolders",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(c),easyAccessSystemsModel:this.getModel("easyAccessSystemsModel"),subHeaderModel:this.getModel("subHeaderModel")}});this.hierarchyFolders.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyFolders.addStyleClass("sapUshellHierarchyFolders");this.hierarchyFolders.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"navigation",writeToDom:true}));this.hierarchyFolders.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oResourceBundle.getText("easyAccessListNavigationContainer"),writeToDom:true}));this.hierarchyApps=new sap.ui.view(this.getId()+"hierarchyApps",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.HierarchyApps",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(c)}});this.hierarchyApps.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyApps.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyApps.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));this.hierarchyApps.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));this.splitApp=new sap.m.SplitApp({masterPages:this.hierarchyFolders,detailPages:this.hierarchyApps});this.splitApp.setInitialMaster(this.hierarchyFolders);this.splitApp.setInitialDetail(this.hierarchyApps);return this.splitApp;},getControllerName:function(){return"sap.ushell.components.appfinder.EasyAccess";}});},false);
sap.ui.predefine('sap/ushell/components/appfinder/GroupListPopover.controller',function(){"use strict";sap.ui.controller("sap.ushell.components.appfinder.GroupListPopover",{onInit:function(){var v=this.getView(),g=v.getViewData().groupData;this.oPopoverModel=new sap.ui.model.json.JSONModel({userGroupList:g});this.oPopoverModel.setSizeLimit(9999);v.oPopover.setModel(this.oPopoverModel);},okButtonHandler:function(e){e.preventDefault();e._bIsStopHandlers=true;var v=this.getView(),u=this.oPopoverModel.getProperty("/userGroupList"),r={addToGroups:[],removeFromGroups:[],newGroups:[],allGroups:u};u.forEach(function(g){if(g.selected===g.initiallySelected){return;}if(g.selected){r.addToGroups.push(g.oGroup);}else{r.removeFromGroups.push(g.oGroup);}});if(v.newGroupInput&&v.newGroupInput.getValue().length){r.newGroups.push(v.newGroupInput.getValue());}v.oPopover.close();v.deferred.resolve(r);},_closeButtonHandler:function(e){e._bIsStopHandlers=true;var v=this.getView();v.oPopover.close();v.deferred.reject();},_createGroupAndSaveTile:function(t,n){var c=sap.ushell.components.getCatalogsManager(),d=jQuery.Deferred(),p=c.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(a){d.resolve(a);});return d;},groupListItemClickHandler:function(o){o.oSource.setSelected(!o.oSource.getSelected());var i=o.oSource.getBindingContextPath(),p=o.oSource.getModel(),s=o.oSource.getSelected()?true:false;this.addRemoveTileFromGroup(i,p,s);},getGroupsBeforeChanges:function(p){var m=this.getView().getViewData().sourceContext.oModel;return m.getProperty(p+"/associatedGroups");},getGroupsAfterChanges:function(p){var g=sap.ui.getCore().byId("groupsPopover");return g.getModel().getProperty("/userGroupList");},checkboxClickHandler:function(o){var v=this.getView(),p=v.getViewData().sourceContext.sPath,g=this.getGroupsBeforeChanges(p),G=this.getGroupsAfterChanges(),l=sap.ushell.Container.getService("LaunchPage"),P=o.oSource.getModel(),s=o.getParameter("selected"),a=0,i=0,d=false,b;while(l.isGroupLocked(G[i].oGroup.object)===true){i++;}for(i;i<G.length;i++){var e=false;if(d===true){break;}for(a=0;a<g.length;a++){if(l.getGroupId(G[i].oGroup.object)===g[a]){e=true;if(G[i].selected===false){d=true;b=("/userGroupList/"+i);this.addRemoveTileFromGroup(b,P,s);break;}}}if(G[i].selected===true&&e===false){b=("/userGroupList/"+i);this.addRemoveTileFromGroup(b,P,s);break;}}},addRemoveTileFromGroup:function(i,p,t){var v=this.getView(),c=this.getView().getViewData().catalogController,a=this.getView().getViewData().catalogModel,T=this.getView().getViewData().sourceContext,g=a.getProperty("/groups"),b=g.indexOf(p.getProperty(i).oGroup),G=new sap.ui.model.Context(a,"/groups/"+b),l=sap.ushell.Container.getService("LaunchPage"),s=l.getGroupId(a.getProperty("/groups/"+b).object);if(t){var A=c._addTile(T,G);A.done(function(e){var f=v.getViewData().sourceContext,C=a.getProperty(f+"/associatedGroups");C.push(s);a.setProperty(f+"/associatedGroups",C);});}else{var d=T.getModel().getProperty(T.getPath()).id,r=c._removeTile(d,b);r.done(function(e){var f=v.getViewData().sourceContext,C=a.getProperty(f+"/associatedGroups"),h=jQuery.inArray(s,C);if(h>=0){C.splice(h,1);}a.setProperty(f+"/associatedGroups",C);});}},_switchGroupsPopoverButtonPress:function(){var g="groupsPopover-popover";if(sap.ui.Device.system.phone){g="groupsPopover-dialog";}if(sap.ui.getCore().byId(g).getContent()[0].getId()==="newGroupNameInput"){var u=this.oPopoverModel.getProperty("/userGroupList"),r={addToGroups:[],removeFromGroups:[],newGroups:[],allGroups:u};if(this.getView().newGroupInput.getValue().length){r.newGroups.push(this.getView().newGroupInput.getValue());}this.getView().oPopover.close();this.getView().deferred.resolve(r);}else{this._closeButtonHandler(this);}},_navigateToCreateNewGroupPane:function(){var v=this.getView();if(!v.headBarForNewGroup){v.headBarForNewGroup=v._createHeadBarForNewGroup();}if(!v.newGroupInput){v.newGroupInput=v._createNewGroupInput();}v.oPopover.removeAllContent();v.oPopover.addContent(v.newGroupInput);v.oPopover.setCustomHeader(v.headBarForNewGroup);v.oPopover.setContentHeight("");setTimeout(function(){v.oPopover.getBeginButton().setText(sap.ushell.resources.i18n.getText("okDialogBtn"));},0);if(v.oPopover.getEndButton()){v.oPopover.getEndButton().setVisible(true);}if(sap.ui.getCore().byId("groupsPopover-popover")&&(sap.ui.getCore().byId("groupsPopover-popover").getContent()[0].getId()==="newGroupNameInput")&&!v.oPopover.getEndButton()){v.oPopover.setEndButton(v._createCancelButton());}setTimeout(function(){v.oPopover.getEndButton().setText(sap.ushell.resources.i18n.getText("cancelBtn"));},0);if(v.getViewData().singleGroupSelection){this._setFooterVisibility(true);}setTimeout(function(){v.newGroupInput.focus();},0);},setSelectedStart:function(s){this.start=s;},_afterCloseHandler:function(){var v=this.getView(),c=this.getView().getViewData().catalogModel;if(c){var s=c.getProperty(this.getView().getViewData().sourceContext+"/associatedGroups");this.showToastMessage(s,this.start);}v.oGroupsContainer.destroy();if(v.headBarForNewGroup){v.headBarForNewGroup.destroy();}if(v.newGroupInput){v.newGroupInput.destroy();}v.oPopover.destroy();v.destroy();},showToastMessage:function(e,s){var a=0,r=0,f,b,c={};e.forEach(function(d,g){c[d]=d;});s.forEach(function(g,i){if(c[g.id]){if(g.selected===false){a++;f=g.title;}}else{if(g.selected===true){r++;b=g.title;}}});var m=this.getView().getViewData().catalogController.prepareDetailedMessage(this.getView().getViewData().title,a,r,f,b);if(m){sap.m.MessageToast.show(m,{duration:6000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}},_backButtonHandler:function(){var v=this.getView();v.oPopover.removeAllContent();if(v.getViewData().singleGroupSelection){this._setFooterVisibility(false);}if(!sap.ui.Device.system.phone){v.oPopover.setContentHeight(v.iPopoverDataSectionHeight+"px");}else{v.oPopover.setContentHeight("100%");}v.oPopover.setVerticalScrolling(true);v.oPopover.setHorizontalScrolling(false);v.oPopover.addContent(v.oGroupsContainer);v.oPopover.setTitle(sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"));v.oPopover.setCustomHeader();v.newGroupInput.setValue('');if(sap.ui.getCore().byId("groupsPopover-popover")&&(sap.ui.getCore().byId("groupsPopover-popover").getContent()[0].getId()!="newGroupNameInput")){v.oPopover.getEndButton().setVisible(false);};setTimeout(function(){v.oPopover.getBeginButton().setText(sap.ushell.resources.i18n.getText("close"));},0);},_setFooterVisibility:function(v){var f=sap.ui.getCore().byId("groupsPopover-footer");if(f){f.setVisible(v);}}});},false);
sap.ui.predefine('sap/ushell/components/appfinder/GroupListPopover.view',["sap/ushell/Config"],function(C){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.GroupListPopover",{createContent:function(c){this.oPopover=sap.ui.getCore().byId("groupsPopover");if(this.oPopover){return;}this.iPopoverDataSectionHeight=192;this.oGroupsContainer=this._createPopoverContainer(this.iPopoverDataSectionHeight);this.oLaunchPageService=sap.ushell.Container.getService("LaunchPage");this.oPopover=new sap.m.ResponsivePopover({id:"groupsPopover",placement:"Auto",title:sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:'20rem',beginButton:this._createCloseButton(),content:this.oGroupsContainer,afterClose:this.getController()._afterCloseHandler.bind(this.getController())});this.oPopover.setInitialFocus('newGroupItem');},open:function(o){if(document.body.clientHeight-o.getDomRef().getBoundingClientRect().bottom>=310){this.oPopover.setPlacement("Bottom");}this.oPopover.openBy(o);if(this.getViewData().singleGroupSelection){this.getController()._setFooterVisibility(false);}this.deferred=jQuery.Deferred();return this.deferred.promise();},_createPopoverContainer:function(p){var a=sap.ui.getCore().byId("popoverContainer");if(a){return a;}var n=this._createNewGroupUiElements(),g=this._createPopoverGroupList();a=new sap.m.ScrollContainer({id:"popoverContainer",horizontal:false,vertical:true,content:[n,g]});if(!sap.ui.Device.system.phone){a.setHeight((p-2)+"px");}else{a.setHeight("100%");}return a;},_createNewGroupUiElements:function(){var n=sap.ui.getCore().byId("newGroupItemList");if(n){return n;}var N=new sap.m.StandardListItem({id:"newGroupItem",title:sap.ushell.resources.i18n.getText("newGroup_listItemText"),type:"Navigation",press:this.getController()._navigateToCreateNewGroupPane.bind(this.getController())});n=new sap.m.List("newGroupItemList",{});if(C.last("/core/extension/enableHelp")){N.addStyleClass('help-id-newGroupItem');}n.addItem(N);n.addEventDelegate({onsapdown:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#popoverContainer .sapMListModeMultiSelect li, #popoverContainer .sapMListModeSingleSelectMaster li").first();j.focus();}catch(e){}},onsaptabnext:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#closeButton");j.focus();}catch(e){}}});return n;},_createNewGroupInput:function(){var n=sap.ui.getCore().byId("newGroupNameInput");if(n){return n;}n=new sap.m.Input({id:"newGroupNameInput",type:"Text",placeholder:sap.ushell.resources.i18n.getText("new_group_name")});n.setValueState(sap.ui.core.ValueState.None);n.setPlaceholder(sap.ushell.resources.i18n.getText("new_group_name"));n.enabled=true;n.addStyleClass("sapUshellCatalogNewGroupInput");return n;},_createHeadBarForNewGroup:function(){var h=sap.ui.getCore().byId("oHeadBar");if(h){return h;}var b=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:this.getController()._backButtonHandler.bind(this.getController()),tooltip:sap.ushell.resources.i18n.getText("newGroupGoBackBtn_tooltip")});b.addStyleClass("sapUshellCatalogNewGroupBackButton");h=new sap.m.Bar("oHeadBar",{contentLeft:[b],contentMiddle:[new sap.m.Label({text:sap.ushell.resources.i18n.getText("newGroup_popoverTitle")})]});return h;},getControllerName:function(){return"sap.ushell.components.appfinder.GroupListPopover";},_createPopoverGroupList:function(){var l=new sap.m.DisplayListItem({label:"{oGroup/title}",selected:"{selected}",tooltip:"{oGroup/title}",type:sap.m.ListType.Active,press:this.getController().groupListItemClickHandler.bind(this.getController())});var u=[];u.push(new sap.ui.model.Filter("oGroup/isGroupLocked",sap.ui.model.FilterOperator.EQ,false));if(this.getViewData().enableHideGroups){u.push(new sap.ui.model.Filter("oGroup/isGroupVisible",sap.ui.model.FilterOperator.EQ,true));}var s=this.getViewData().singleGroupSelection,L=new sap.m.List({mode:s?sap.m.ListMode.SingleSelectMaster:sap.m.ListMode.MultiSelect,items:{path:"/userGroupList",template:l,filters:u}});if(s){L.attachSelect(this.getController().okButtonHandler.bind(this.getController()));}else{L.attachSelectionChange(this.getController().checkboxClickHandler.bind(this.getController()));}L.addEventDelegate({onsapup:function(E){try{E.preventDefault();var j,c=jQuery(":focus");if(c.index()==0){j=jQuery("#newGroupItem");j.focus();E._bIsStopHandlers=true;}}catch(e){jQuery.sap.log.error("Groups popup Accessibility `up` key failed");}}});return L;},_createOkButton:function(){var o=new sap.m.Button({id:"okButton",press:this.getController().okButtonHandler.bind(this.getController()),text:sap.ushell.resources.i18n.getText("okBtn")});o.addEventDelegate({onsaptabprevious:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#newGroupItem");if(!j.length){j=jQuery("#newGroupNameInput input");}j.focus();}catch(e){jQuery.sap.log.error("Groups popup Accessibility `shift-tab` key failed");}}});return o;},_createCancelButton:function(){return new sap.m.Button({id:"cancelButton",press:this.getController()._closeButtonHandler.bind(this.getController()),text:sap.ushell.resources.i18n.getText("cancelBtn")});},_createCloseButton:function(){return sap.ui.getCore().byId("closeButton")||new sap.m.Button({id:"closeButton",press:this.getController()._switchGroupsPopoverButtonPress.bind(this.getController()),text:sap.ushell.resources.i18n.getText(sap.ushell.resources.i18n.getText("close"))});}});},false);
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyApps.controller',function(){"use strict";sap.ui.controller("sap.ushell.components.appfinder.HierarchyApps",{onInit:function(){var e=this.getView().getViewData().easyAccessSystemsModel;if(e){this.getView().setModel(e,"easyAccessSystems");}},getCrumbsData:function(p,m){var a=p.split("/");a.splice(a.length-2,2);var n=[];while(a.length){var P=a.join("/");var t=m.getProperty(P+"/text");n.unshift({text:t,path:P});a.splice(a.length-2,2);}return n;},_updateAppBoxedWithPinStatuses:function(p){var v=this.getView();if(!p){p=v.layout.getBinding("items").getPath();}var e=v.getModel("easyAccess");var a=e.getProperty(p)?e.getProperty(p):[];var b=sap.ushell.Container.getService("Bookmark");var c=a.map(function(d){return b.countBookmarks(d.url).then(function(f){d.bookmarkCount=f;return d;});});jQuery.when.apply(jQuery,c).then(function(){var a=Array.prototype.slice.call(arguments);e.setProperty(p,a);});},updatePageBindings:function(p){this.getView().layout.bindAggregation("items","easyAccess>"+p+"/apps",this.getView().oItemTemplate);this._updateAppBoxedWithPinStatuses(p+"/apps");this.getView().breadcrumbs.bindProperty("currentLocationText","easyAccess>"+p+"/text");var c=this.getCrumbsData(p,this.getView().getModel("easyAccess"));this.getView().crumbsModel.setProperty("/crumbs",c);var n=this.getView().getModel("easyAccess").getProperty(p+'/apps');this.getView().updateResultSetMessage(n.length,false);},onAppBoxPressed:function(e){if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}var u=e.getSource().getProperty("url");if(u&&u.indexOf("#")===0){hasher.setHash(u);}},_handleSuccessMessage:function(a,p){var m;var n=p.addToGroups?p.addToGroups.length:0;var b=p.newGroups?p.newGroups.length:0;var t=n+b;if(t===1){var g;if(n===1){g=p.addToGroups[0].title;}else{g=p.newGroups[0];}m=sap.ushell.resources.i18n.getText("appAddedToSingleGroup",[a.text,g]);}else{m=sap.ushell.resources.i18n.getText("appAddedToSeveralGroups",[a.text,t]);}if(t>0){sap.m.MessageToast.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}return m;},_prepareErrorMessage:function(e,a){var g,A,f,n=0,c=false,m;for(var i in e){g=e[i].group;A=e[i].action;if(A=='addBookmark_ToExistingGroup'){n++;if(n==1){f=g.title;}}else if(A=='addBookmark_ToNewGroup'){n++;if(n==1){f=g;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_app_operation_add_to_group",parameters:[a,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_app_operation_add_to_several_groups",parameters:[a]});}return m;},_handleBookmarkAppPopoverResponse:function(a,p){var b=[];p.newGroups.forEach(function(g){b.push(this._createGroupAndAddBookmark(g,a));}.bind(this));p.addToGroups.forEach(function(g){b.push(this._addBookmark(g,a));}.bind(this));jQuery.when.apply(jQuery,b).then(function(){var r=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(a,p,r);}.bind(this));},_handlePopoverGroupsActionPromises:function(a,p,r){var e=r.filter(function(b,i,r){return!b.status;});if(e.length){var E=this._prepareErrorMessage(e,a.text);var c=sap.ushell.components.getCatalogsManager();c.notifyOnActionFailure(E.messageId,E.parameters);return;}this._updateAppBoxedWithPinStatuses();this._handleSuccessMessage(a,p);},_createGroupAndAddBookmark:function(n,a){var c=sap.ushell.components.getCatalogsManager();var d=jQuery.Deferred(),r={};var b=c.createGroup(n);b.done(function(e){var f=this._addBookmark(e.getObject(),a,true);f.done(function(g){d.resolve(g);}).fail(function(){r={group:n,status:0,action:'addBookmark_ToNewGroup'};d.resolve(r);});}.bind(this)).fail(function(){r={group:n,status:0,action:'addBookmark_NewGroupCreation'};d.resolve(r);});return d.promise();},_addBookmark:function(g,a,i){var b=sap.ushell.Container.getService("Bookmark");var d=jQuery.Deferred(),r={};var c=b.addBookmark({url:a.url,title:a.text,subtitle:a.subtitle,icon:a.icon},g.object);var e=i?"addBookmark_ToNewGroup":"addBookmark_ToExistingGroup";c.done(function(){r={group:g,status:1,action:e};d.resolve(r);}).fail(function(){r={group:g,status:0,action:e};d.resolve(r);});return d.promise();},showSaveAppPopover:function(e){var m=this.getView().getModel();var a=e.oSource.getParent().getBinding("title").getContext().getObject();if(!!m.getProperty("/groupContext").path){var g=m.getProperty("/groupContext").path;var G=m.getProperty(g);var c={newGroups:[],addToGroups:[G]};this._handleBookmarkAppPopoverResponse(a,c);return;}var b=m.getProperty("/groups").map(function(f){return{selected:false,initiallySelected:false,oGroup:f};});var p=new sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.appfinder.GroupListPopover",viewData:{groupData:b,enableHideGroups:m.getProperty("/enableHideGroups"),enableHelp:m.getProperty("/enableHelp"),singleGroupSelection:true}});var d=p.open(e.oSource);d.then(this._handleBookmarkAppPopoverResponse.bind(this,a));},resultTextFormatter:function(s,t){var r=sap.ushell.resources.i18n;if(s){var S=s.systemName?s.systemName:s.systemId;var R="";if(t){R=r.getText('search_easy_access_results',[t,S]);}return R;}return"";},showMoreResultsVisibilityFormatter:function(a,t){if(a&&a.length<t){return true;}return false;},showMoreResultsTextFormatter:function(a,t){if(!a||!t){return"";}var c=a.length;return sap.ushell.resources.i18n.getText('EasyAccessSearchResults_ShowMoreResults',[c,t]);}});},true);
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyApps.view',['sap/ushell/ui/appfinder/AppBox','sap/ushell/ui/appfinder/PinButton'],function(A,P){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.HierarchyApps",{createContent:function(c){this.oController=c;function g(G,b,s,a,d){var r=sap.ushell.resources.i18n,t;if(s){var i=jQuery.inArray(a,G);var T=i!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";t=r.getText(T,d);}else{t=b?r.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):r.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip");}return t;}var p=new P({icon:'sap-icon://pushpin-off',selected:{path:"easyAccess>bookmarkCount",formatter:function(b){return(!!b);}},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(G,b,s,a,d){return g(G,b,s,a,d);}},press:c.showSaveAppPopover.bind(c)});p.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));p.addStyleClass("sapUshellPinButton");this.oItemTemplate=new A({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:p,tabindex:{path:"easyAccess>text"},press:[c.onAppBoxPressed,c]});this.oItemTemplate.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new sap.m.FlexBox(this.getId()+'_hierarchyAppsLayout',{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:sap.m.FlexWrap.Wrap});this.layout.addDelegate({onAfterRendering:function(){var i=this.getItems();var u=function(a){if(a.getKey()==="tabindex"){a.setValue("0");}};if(i.length){i[0].getCustomData().forEach(u);i[0].getPinButton().getCustomData().forEach(u);}}.bind(this.layout)});this.oMessagePage=new sap.m.MessagePage({visible:false,showHeader:false,text:sap.ushell.resources.i18n.getText('EasyAccessMenu_NoAppsToDisplayMessagePage_Text'),description:''});var C=[];if(this.getViewData()&&this.getViewData().navigateHierarchy){this.crumbsModel=new sap.ui.model.json.JSONModel({crumbs:[]});this.linkTemplate=new sap.m.Link({text:"{crumbs>text}",press:function(e){var a=e.oSource.getBinding("text").getContext().getObject();this.getViewData().navigateHierarchy(a.path,false);}.bind(this)});this.breadcrumbs=new sap.m.Breadcrumbs({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");C.push(this.breadcrumbs);}else{this.resultText=new sap.m.Text({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:c.resultTextFormatter.bind(c)}}).addStyleClass('sapUshellEasyAccessSearchResultText');this.resultText.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"heading",writeToDom:true}));this.resultText.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-level",value:"3",writeToDom:true}));C.push(this.resultText);this.showMoreResultsLink=new sap.m.Button({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:c.showMoreResultsTextFormatter.bind(c)},press:this.getViewData().getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:c.showMoreResultsVisibilityFormatter.bind(c)},type:sap.m.ButtonType.Transparent});}C.push(this.oMessagePage);C.push(this.layout);if(this.showMoreResultsLink){C.push(this.showMoreResultsLink);}return C;},updateResultSetMessage:function(i,I){var e;if(I){e='noFilteredItems';}else{e='EasyAccessMenu_NoAppsToDisplayMessagePage_Text';}if(i){if(I){this.resultText.updateProperty('text');this.resultText.setVisible(true);}this.layout.setVisible(true);this.oMessagePage.setVisible(false);}else{if(I){this.resultText.setVisible(false);}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var E=sap.ushell.resources.i18n.getText(e);this.oMessagePage.setText(E);}},setShowMoreResultsBusy:function(b){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(b);}},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyApps";}});},true);
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyFolders.controller',function(){"use strict";sap.ui.controller("sap.ushell.components.appfinder.HierarchyFolders",{onInit:function(){this.oDialog=null;this.getView().setModel(this.getView().getViewData().easyAccessSystemsModel,"easyAccessSystems");this.getView().setModel(this.getView().getViewData().subHeaderModel,"subHeaderModel");this.getSelectedSystem().then(function(s){if(s){this.setSystemSelected(s);}else{this.setSystemSelected(undefined);this.onSystemSelectionPress();}}.bind(this),function(){this.setSystemSelected(undefined);this.onSystemSelectionPress();});},onExit:function(){if(this.oDialog){this.destroyDialog();}},onAfterRendering:function(){var j=jQuery('#'+this.getView().getId());j.on("click",function(e){this.exitSearchMode();}.bind(this));},getPersonalizer:function(){if(this.oPersonalizer){return this.oPersonalizer;}var p=sap.ushell.Container.getService("Personalization");var c=sap.ui.core.Component.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:"appfinder.HierarchyFolders",item:"lastSelectedSystem"};this.oPersonalizer=p.getPersonalizer(P,s,c);return this.oPersonalizer;},getSelectedSystem:function(){var d=new jQuery.Deferred();var s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length===1){var e=s[0];this.setSystemSelectedInPersonalization(e);d.resolve(e);}else{this.getSelectedSystemInPersonalization().then(function(p){if(p){var S=false;for(var i=0;i<s.length;i++){if((s[i].systemName&&s[i].systemName===p.systemName)||(s[i].systemId===p.systemId)){S=true;d.resolve(p);}}if(!S){d.resolve();this.setSystemSelectedInPersonalization();}}else{d.resolve();}}.bind(this));}return d.promise();},setSystemSelected:function(s){this.getView().getModel("easyAccessSystems").setProperty("/systemSelected",s);this.setSystemSelectedInPersonalization(s);},getSelectedSystemInPersonalization:function(){var d=new jQuery.Deferred();this.getPersonalizer().getPersData().then(function(p){if(p){d.resolve(p);}else{d.resolve();}},function(e){jQuery.sap.log.error("Failed to get selected system from the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders");d.reject();});return d.promise();},setSystemSelectedInPersonalization:function(s){this.getPersonalizer().setPersData(s).fail(function(e){jQuery.sap.log.error("Failed to save selected system in the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders");});},onSystemSelectionPress:function(){var s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length<=1){return;}var d=this.createDialog();d.open();},createDialog:function(){var t=this;if(!this.oDialog){this.oDialog=new sap.m.SelectDialog({id:"systemSelectionDialog",title:t.getView().translationBundle.getText("easyAccessSelectSystemDialogTitle"),multiSelect:false,contentHeight:"20rem",items:{path:"/systemsList",template:new sap.m.StandardListItem({adaptTitleSize:false,title:{parts:["systemName","systemId"],formatter:t.titleFormatter},description:{parts:["systemName","systemId"],formatter:t.descriptionFormatter},selected:{parts:["systemName","systemId"],formatter:t.selectedFormatter.bind(this)}})},confirm:t.systemConfirmHandler.bind(t),search:t.systemSearchHandler.bind(t),cancel:t.destroyDialog.bind(t)});this.oDialog.setModel(this.getView().getModel("easyAccessSystems"));}return this.oDialog;},destroyDialog:function(){this.oDialog.destroyItems();this.oDialog.destroy();this.oDialog=null;},systemConfirmHandler:function(e){var i=e.getParameters().selectedItem;var s=i.getBindingContext().getObject();this.setSystemSelected(s);this.destroyDialog();},systemSearchHandler:function(e){var v=e.getParameter("value");var f=new sap.ui.model.Filter("systemName",sap.ui.model.FilterOperator.Contains,v);var F=new sap.ui.model.Filter("systemId",sap.ui.model.FilterOperator.Contains,v);var s=new sap.ui.model.Filter({filters:[F,f],and:false});var b=e.getSource().getBinding("items");b.filter(s);},titleFormatter:function(s,a){return s||a;},descriptionFormatter:function(s,a){if(s){return a;}return null;},selectedFormatter:function(s,a){var u=this.getView().getModel("easyAccessSystems").getProperty("/systemSelected");if(!u){return false;}if(s){return(u.systemName===s&&u.systemId===a);}else{return(u.systemId===a);}},systemSelectorTextFormatter:function(s){if(s){if(s.systemName){return s.systemName;}else{return s.systemId;}}else{return this.getView().translationBundle.getText("easyAccessSelectSystemTextWithoutSystem");}},exitSearchMode:function(){var s=this.getView().getModel('subHeaderModel');s.setProperty('/search/searchMode',false);s.refresh(true);}});},true);
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyFolders.view',function(){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.HierarchyFolders",{createContent:function(c){var t=this;this.translationBundle=sap.ushell.resources.i18n;this.treePath="";this.systemSelectorText=new sap.m.Text({text:{path:"easyAccessSystemsModel>/systemSelected",formatter:c.systemSelectorTextFormatter.bind(c)}});this.oItemTemplate=new sap.m.StandardListItem({title:"{easyAccess>text}",type:"Navigation",press:function(){var p=this.getBindingContextPath();t.getViewData().navigateHierarchy(p,true);}});this.oList=new sap.m.List({showSeparators:sap.m.ListSeparators.None,items:{path:"easyAccess>"+this.treePath+"/folders",template:this.oItemTemplate},updateFinished:function(){var l=this.getItems();t.finishEasyAccessAnimation(true);l.forEach(function(L){L.onsapspace=L.onsapenter;});},noDataText:{path:"easyAccessSystemsModel>/systemSelected",formatter:function(s){if(s){return t.translationBundle.getText("easyAccessFolderWithNoItems");}}}});this.pageMenu=new sap.m.Page({showNavButton:false,enableScrolling:true,headerContent:new sap.m.Bar({contentLeft:[new sap.m.Label({text:{parts:["easyAccessSystemsModel>/systemSelected"],formatter:c.systemSelectorTextFormatter.bind(c)}})],contentRight:[new sap.m.Button({text:this.translationBundle.getText("action_change"),type:sap.m.ButtonType.Transparent,visible:{path:"easyAccessSystemsModel>/systemsList",formatter:function(s){return s.length>1;}},press:[c.onSystemSelectionPress,c]})]}).addStyleClass("sapUshellEasyAccessMasterPageHeader"),content:this.oList});this.pageMenu.attachNavButtonPress(function(){var p=this.treePath.split("/");var n=p.slice(0,p.length-2);this.getViewData().navigateHierarchy(n.join("/"),false);}.bind(this));return this.pageMenu;},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyFolders";},finishEasyAccessAnimation:function(){if(!this.jqFolderClone){return;}if(this.forwardAnimation){this.pageMenu.$().addClass("forwardToViewAnimation");this.jqFolderClone.addClass("forwardOutOfViewAnimation");}else{this.pageMenu.$().addClass("backToViewAnimation");this.jqFolderClone.addClass("backOutOfViewAnimation");}this.jqFolderClone.on("animationend",function(){this.pageMenu.$().removeClass("forwardToViewAnimation backToViewAnimation");var b=this.pageMenu.$().find(".sapMBarLeft button");if(b.length){b.focus();}else{setTimeout(function(){this.pageMenu.$().find("header + header").focus();}.bind(this));}if(this.jqFolderClone){this.jqFolderClone.remove();}}.bind(this));},prepareEasyAccessAnimation:function(f){this.forwardAnimation=f;this.jqFolderClone=this.pageMenu.$().clone().removeAttr("data-sap-ui").css("z-index","1");this.jqFolderClone.find("*").removeAttr("id");this.pageMenu.$().parent().append(this.jqFolderClone);},updatePageBindings:function(p,f){var s=p.split("/").length>2;this.treePath=p;this.pageMenu.setShowNavButton(s);this.pageMenu.setShowSubHeader(!s);this.prepareEasyAccessAnimation(f);this.oList.bindItems("easyAccess>"+p+"/folders",this.oItemTemplate);}});},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/API',['sap/ui/core/UIComponent'],function(U){"use strict";
var A=U.extend("sap.ushell.components.applicationIntegration.API",{metadata:{version:"1.60.40",dependencies:{version:"1.60.40",libs:["sap.ui.core","sap.m"],components:[]}}});
A.prototype.createContent=function(){this.oShellModel=sap.ushell.components.applicationIntegration.AppLifeCycle;};
A.prototype.createExtendedShellState=function(s,c){return this.oShellModel.createExtendedShellState(s,c);};
A.prototype.applyExtendedShellState=function(s,c){this.oShellModel.applyExtendedShellState(s,c);};
A.prototype.showLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.oShellModel.addLeftPaneContent([i],c,s);}else{this.oShellModel.addLeftPaneContent(i,c,s);}};
A.prototype.showHeaderItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addHeaderItem([i],c,s);}else{this.oShellModel.addHeaderItem(i,c,s);}};
A.prototype.showRightFloatingContainerItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addRightFloatingContainerItem([i],c,s);}else{this.oShellModel.addRightFloatingContainerItem(i,c,s);}};
A.prototype.showRightFloatingContainer=function(s){this.oShellModel.showRightFloatingContainer(s);};
A.prototype.showToolAreaItem=function(i,c,s){this.oShellModel.addToolAreaItem(i,c,s);};
A.prototype.showActionButton=function(i,c,s,I){var b=[],a=[],B;if(typeof i==="string"){i=[i];}b=i.filter(function(d){B=sap.ui.getCore().byId(d);return B instanceof sap.m.Button&&!(B instanceof sap.ushell.ui.launchpad.ActionItem);});a=i.filter(function(d){B=sap.ui.getCore().byId(d);return B instanceof sap.ushell.ui.launchpad.ActionItem;});if(b.length){this.convertButtonsToActions(b,c,s,I);}if(a.length){this.oShellModel.addActionButton(a,c,s,I);}this.toggleOverFlowActions();};
A.prototype.showFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.addFloatingActionButton([i],c,s);}else{this.oShellModel.addFloatingActionButton(i,c,s);}};
A.prototype.showHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addHeaderEndItem([i],c,s);}else{this.oShellModel.addHeaderEndItem(i,c,s);}};
A.prototype.setHeaderVisibility=function(v,c,s){this.oShellModel.setHeaderVisibility(v,c,s);};
A.prototype.showSubHeader=function(i,c,s){if(typeof i==="string"){this.oShellModel.addSubHeader([i],c,s);}else{this.oShellModel.addSubHeader(i,c,s);}};
A.prototype.showSignOutItem=function(c,s){this.oShellModel.showSignOutButton(c,s);};
A.prototype.showSettingsItem=function(c,s){this.oShellModel.showSettingsButton(c,s);};
A.prototype.hideHeaderItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],c,s);}else{this.oShellModel.removeHeaderItem(i,c,s);}};
A.prototype.removeToolAreaItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeToolAreaItem([i],c,s);}else{this.oShellModel.removeToolAreaItem(i,c,s);}};
A.prototype.removeRightFloatingContainerItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],c,s);}else{this.oShellModel.removeRightFloatingContainerItem(i,c,s);}};
A.prototype.hideActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeActionButton([i],c,s);}else{this.oShellModel.removeActionButton(i,c,s);}this.toggleOverFlowActions();};
A.prototype.toggleOverFlowActions=function(){jQuery.sap.measure.start("FLP:Shell.controller.toggleMeAreaView","show or hide actionbox if no actions in me area","FLP");var m=sap.ui.getCore().byId('meArea');var B={};try{if(m){if(m.actionBox){if(m.actionBox._getControlsIds().length===0){sap.ui.getCore().byId('overflowActions').setVisible(false);}else{m.actionBox._getControlsIds().forEach(function(a){var b=sap.ui.getCore().byId(a);if(b.getVisible()){throw B;}});sap.ui.getCore().byId('overflowActions').setVisible(false);}}}}catch(e){if(e!==B){throw e;}else{sap.ui.getCore().byId('overflowActions').setVisible(true);}}jQuery.sap.measure.end("FLP:Shell.controller.toggleMeAreaView");};
A.prototype.hideLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],c,s);}else{this.oShellModel.removeLeftPaneContent(i,c,s);}};
A.prototype.hideFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],c,s);}else{this.oShellModel.removeFloatingActionButton(i,c,s);}};
A.prototype.hideHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],c,s);}else{this.oShellModel.removeHeaderEndItem(i,c,s);}};
A.prototype.hideSubHeader=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],c,s);}else{this.oShellModel.removeSubHeader(i,c,s);}};
A.prototype.addShellSubHeader=function(p){var d=new jQuery.Deferred(),t=this,c,C,a=p.controlType,o=p.oControlProperties,i=p.bIsVisible,b=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(i){this.showSubHeader(C.getId(),b,s);}d.resolve(C);}}if(a){c=a.replace(/\./g,"/");sap.ui.require([c],function(e){C=new e(o);if(i){t.showSubHeader(C.getId(),b,s);t.oShellModel.addElementToManagedQueue(C);}d.resolve(C);});}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return d.promise();};
A.prototype.addSubHeader=function(c,C,i,b,s){var a=c.replace(/\./g,"/"),o=sap.ui.require(a),d,f,r=false;if(o){r=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(r){return new o(C);}else{var e=jQuery.sap.getObject(c);return new e(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};d=this.createItem(C,b,s,f);if(i){this.showSubHeader(d.getId(),b,s);}return d;};
A.prototype.addUserAction=function(p){var d=new jQuery.Deferred(),t=this,m=this.oShellModel.getModelToUpdate(),c,C,a=p.controlType,o=p.oControlProperties,i=p.bIsVisible,b=p.bCurrentState,s=p.aStates,I=p.bIsFirst||true,n;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){d.resolve(C);}}if(a){if(a==="sap.m.Button"){a="sap.ushell.ui.launchpad.ActionItem";}c=a.replace(/\./g,"/");sap.ui.require([c],function(e){var O=t.oShellModel.getModelToUpdate();t.oShellModel.setModelToUpdate(m,true);var f;if(o){if(o.id){f=o.id;}}C=sap.ui.getCore().byId(f)||new e(o);if(!C.getActionType){C=new e(o);}if(i){t.showActionButton(C.getId(),b,s,I);t.oShellModel.addElementToManagedQueue(C);}t.oShellModel.setModelToUpdate(O,false);d.resolve(C);});}else{n="You must specify control type in order to create it";jQuery.sap.log.warning(n);d.reject(n);}return d.promise();};
A.prototype.addActionButton=function(c,C,i,b,s,I){var a,o,d,f,r=false;if(c==="sap.m.Button"){c="sap.ushell.ui.launchpad.ActionItem";}a=c.replace(/\./g,"/");o=sap.ui.require(a);if(o){r=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(r){return new o(C);}else{var e=jQuery.sap.getObject(c);return new e(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};d=this.createItem(C,b,s,f);if(i){this.showActionButton(d.getId(),b,s,I);}return d;};
A.prototype.addFloatingButton=function(p){var d=new jQuery.Deferred(),t=this,c,C,a=p.controlType,o=p.oControlProperties,i=p.bIsVisible,b=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(i){t.oShellModel.addElementToManagedQueue(C);t.showFloatingActionButton(oItem.getId(),b,s);}d.resolve(C);}}if(a){c=a.replace(/\./g,"/");}else{c="sap/m/Button";}sap.ui.require([c],function(e){C=new e(o);if(i){this.showFloatingActionButton(oItem.getId(),b,s);}d.resolve(C);});return d.promise();};
A.prototype.addFloatingActionButton=function(c,C,i,b,s){var a,o,d,f,r=false;if(!c){c="sap.m.Button";}a=c.replace(/\./g,"/");o=sap.ui.require(a);if(o){r=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(r){return new o(C);}else{var e=jQuery.sap.getObject(c);return new e(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};d=this.createItem(C,b,s,f);if(i){this.showFloatingActionButton(d.getId(),b,s);}return d;};
A.prototype.addSidePaneContent=function(p){var d=new jQuery.Deferred(),t=this,c,C,a=p.controlType,o=p.oControlProperties,i=p.bIsVisible,b=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){d.resolve(C);}}if(a){c=a.replace(/\./g,"/");sap.ui.require([c],function(e){C=new e(o);if(i){t.oShellModel.addElementToManagedQueue(C);t.showLeftPaneContent(oItem.getId(),b,s);}d.resolve(C);});}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return d.promise();};
A.prototype.addLeftPaneContent=function(c,C,i,b,s){var a=c.replace(/\./g,"/"),o=sap.ui.require(a),d,f,r;if(o){r=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(r){return new o(C);}else{var e=jQuery.sap.getObject(c);return new e(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};d=this.createItem(C,b,s,f);if(i){this.showLeftPaneContent(d.getId(),b,s);}return d;};
A.prototype.addHeaderItem=function(c,C,i,b,s){if(typeof(arguments[0])==='object'&&typeof(arguments[1])==='boolean'){C=arguments[0];i=arguments[1];b=arguments[2];s=arguments[3];}else{jQuery.sap.log.warning("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var p=C;p.showSeparator=false;var f=function(C){return new sap.ushell.ui.shell.ShellHeadItem(C);},I=this.createItem(p,b,s,f);if(i){this.showHeaderItem(I.getId(),b,s);}return I;};
A.prototype.addRightFloatingContainerItem=function(c,i,C,s){var f=function(c){return new sap.m.NotificationListItem(c);},I=this.createItem(c,C,s,f);if(i){this.showRightFloatingContainerItem(I.getId(),C,s);}return I;};
A.prototype.addToolAreaItem=function(c,i,C,s){var f=function(c){return new sap.ushell.ui.shell.ToolAreaItem(c);},I=this.createItem(c,C,s,f);if(i){this.showToolAreaItem(I.getId(),C,s);}return I;};
A.prototype.addHeaderEndItem=function(c,C,i,b,s){var p=C;p.showSeparator=false;var f=function(C){return new sap.ushell.ui.shell.ShellHeadItem(C);},I=this.createItem(p,b,s,f);if(i){this.showHeaderEndItem(I.getId(),b,s);}return I;};
A.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};
A.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};
A.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};
A.prototype.LaunchpadState={App:"app",Home:"home"};
A.prototype.createInspection=function(a,c,C,s){this.oShellModel.createInspection(a,c,C,s);};
A.prototype.createTriggers=function(t,c,s){this.oShellModel.createTriggers(t,c,s);};
A.prototype.convertButtonsToActions=function(i,c,s,I){var p={},b,t=this;i.forEach(function(a){b=sap.ui.getCore().byId(a);p.id=b.getId();p.text=b.getText();p.icon=b.getIcon();p.tooltip=b.getTooltip();p.enabled=b.getEnabled();p.visible=b.getVisible();if(b.mEventRegistry&&b.mEventRegistry.press){p.press=b.mEventRegistry.press[0].fFunction;}b.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,c,s,I);});};
A.prototype.createItem=function(c,C,s,f){var i;if(c&&c.id){i=sap.ui.getCore().byId(c.id);}if(!i){i=f(c);if(C){this.oShellModel.addElementToManagedQueue(i);}}return i;};
A.prototype.addEntryInShellStates=function(n,e,a,r,s){this.oShellModel.addEntryInShellStates(n,e,a,r,s);};
A.prototype.removeCustomItems=function(s,i,c,S){if(typeof i==="string"){this.oShellModel.removeCustomItems(s,[i],c,S);}else{this.oShellModel.removeCustomItems(s,i,c,S);}};
A.prototype.addCustomItems=function(s,i,c,S){if(typeof i==="string"){this.oShellModel.addCustomItems(s,[i],c,S);}else{this.oShellModel.addCustomItems(s,i,c,S);}};
return A;});
sap.ui.predefine('sap/ushell/components/applicationIntegration/AppLifeCycle',['sap/ushell/components/applicationIntegration/elements/model','sap/ushell/components/applicationIntegration/Storage','sap/ushell/components/container/ApplicationContainer','sap/ushell/ui5service/ShellUIService','sap/ushell/components/applicationIntegration/application/Application','sap/ushell/components/applicationIntegration/relatedServices/RelatedServices','sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements','sap/ushell/components/applicationIntegration/configuration/AppMeta','sap/ushell/services/AppConfiguration','sap/ushell/utils','sap/ushell/resources','sap/ui/Device','sap/ushell/Config','sap/ushell/EventHub','sap/ushell/ui5service/AppIsolationService'],function(E,S,A,a,b,R,c,d,e,u,r,D,C,f,g){"use strict";
function h(){var v,i=["URL"],s,j,o,k,l=false,m={},n={home:{embedded:"embedded-home",headerless:"headerless-home",merged:"blank-home",blank:"blank-home"},app:{minimal:"minimal",app:"app",standalone:"standalone",embedded:"embedded",headerless:"headerless",merged:"merged",home:"home",blank:"blank",lean:"lean"}},p,G=[],q={};this.shellElements=function(){return c;};this.service=function(){return R;};this.isCurrentApp=function(t){return m.appId===t?true:false;};this.isAppWithSimilarShellHashInCache=function(t,F){var w=S.get(t);if(w){if(w.shellHash===F){return true;}else{return false;}}else{return false;}};this.isAppInCache=function(t){return!!S.get(t);};this.normalizeAppId=function(t){var w="-component",x=t.endsWith(w);if(x){return t.substring(0,t.length-w.length);}else{return t;}};this.onComponentCreated=function(t,w,x){var y=x.component,z=this.normalizeAppId(y.getId());if(y.active){y.active();}if(this.isAppInCache(z)){S.get(z).app=y;}else{m.app=y;}};this.onGetMe=function(t,w,x){x.AppLifeCycle=this;};this.store=function(t){var w=S.get(t);if(w){b.store(w.app);R.store(w.service);d.store(w.meta);}};this.destroy=function(t,F){var w=S.get(t);function x(){b.destroy(F);c.destroy(F);d.destroy(F);}this.removeControl(t);if(w){w.container.destroy();S.remove(t);}else{var P=F&&F.sendBeforeAppCloseEvent&&F.sendBeforeAppCloseEvent();if(P===undefined){x();}else{P.then(function(){x();},function(y){x();jQuery.sap.log.error("FLP got a failed response from the iframe for the 'sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent' message sent",y,"sap.ushell.components.applicationIntegration.AppLifeCycle.js");});}}};this.restore=function(t){var w=S.get(t);if(w){b.restore(w.app);R.restore(w.service);d.restore(w.meta);}};this.onAfterNavigate=function(F,t,T){if(F&&t){if(S.get(F)){this.store(F);}else if(t.getApplicationType&&this.applicationIsStatefulType(t.getApplicationType())){if(T.indexOf("Shell-appfinder-component")>0||T.indexOf("Shell-home-component")>0){t.postMessageRequest("sap.gui.triggerCloseSessionImmediately");}}else{if(this.isAppOfTypeCached(F)===false){this.destroy(F,t);}}if(F.indexOf("Shell-appfinder-component")>0){sap.ui.getCore().getEventBus().publish("sap.ushell","appFinderAfterNavigate");}}if(T){if(S.get(T)){this.restore(T);}else{}}};this.storeApp=function(t,w,T,x,y,H,F){if(!this.isAppInCache(t)){S.set(t,{service:R.create(),shellHash:F,appId:t,stt:'loading',appRelatedElements:c.getAppRelatedElement(),container:w,meta:e.getMetadata(T),app:undefined,target:y,hash:H});return true;}return false;};this.resoterApp=function(t){if(this.isAppInCache(t)){m=S.get(t);}};this.isAppOfTypeCached=function(t){if(!l&&t.indexOf(s)!==-1){return true;}if(!l&&t.indexOf("Shell-appfinder")!==-1){return true;}if(jQuery.sap.getUriParameters().get("sap-keep-alive")=="true"){return true;}return false;};h.prototype._getURLParsing=function(){if(!this._oURLParsing){this._oURLParsing=sap.ushell.Container.getService("URLParsing");}return this._oURLParsing;};this.openApp=function(t,T,w,F){var x;var y=undefined,H=undefined;var z="application"+t;if(typeof T!=="undefined"){y=Object.assign({},T);delete y.componentHandle;}if(typeof w!=="undefined"){H=Object.assign({},w);}if(this.isAppOfTypeCached(z)||this.isCachedEnabledAsAppParameter(w,T)){if(!this.isAppInCache(z)){x=this.createApplicationContainer(t,T);this.storeApp(z,x,T,w,y,H,F);}this.resoterApp(z);}else if(this.applicationIsStatefulType(T.applicationType)){x=this.getStatefulContainer(T.applicationType);if(!x){x=this.createApplicationContainer(t,T);this.setStatefulContainer(T.applicationType,x);x.setIsStateful(true);}m={appId:z,stt:'loading',container:x,meta:e.getMetadata(T),app:undefined,target:y,hash:H};}else{x=this.createApplicationContainer(t,T);m={appId:z,stt:'loading',container:x,meta:e.getMetadata(T),app:undefined,target:y,hash:H};}};this.getAppMeta=function(){return d;};this.init=function(t,I,w,x,y,z){o=new a({scopeObject:y.ownerComponent,scopeType:"component"});k=new g({scopeObject:y.ownerComponent,scopeType:"component"});j=t;v=I;s=w;d.init(s);l=x;S.init(z,function(B){var F=B.value;this.destroy(F.appId,F.container);}.bind(this));sap.ui.getCore().getEventBus().subscribe("sap.ushell","appComponentLoaded",this.onComponentCreated,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","getAppLifeCycle",this.onGetMe,this);c.init(this.getElementsModel());};this.addControl=function(t){v.addCenterViewPort(t);};this.removeControl=function(I){v.removeCenterViewPort(I,true);};this.removeApplication=function(I){var t=this.getControl(I);if(t){this.removeControl(t.getId());t.destroy();}};this.getControl=function(I){return v&&(v.getViewPortControl('centerViewPort',"application"+'-'+I)||v.getViewPortControl('centerViewPort',"applicationShellPage"+'-'+I));};this.getViewPortContainer=function(){return v;};this.navTo=function(I){v.navTo('centerViewPort',I,'show');};this.getCurrentApplication=function(){return m;};this.setApplicationFullWidth=function(I){var t=this.getCurrentApplication();if(t.container){t.container.toggleStyleClass("sapUShellApplicationContainerLimitedWidth",!I);}};this.createComponent=function(t,P){this.shellElements().setDangling(true);return b.createComponent(t,P);};this.getAppContainer=function(t,w,I,x,F){w.shellUIService=o.getInterface();w.appIsolationService=k.getInterface();w.targetNavigationMode=I?"explace":"inplace";this.openApp(t,w,x,F);if(G.length>0)m.container.registerShellCommunicationHandler(G);if(q["UI5APP"])m.container.setIframeHandlers(q["UI5APP"]);return m.container;};this.getShellUIService=function(){return o;};this.getAppIsolationService=function(){return k;};this.initShellUIService=function(t){o._attachHierarchyChanged(d.onHierarchyChange.bind(this));o._attachTitleChanged(d.onTitleChange.bind(this));o._attachRelatedAppsChanged(d.onRelatedAppsChange.bind(this));o._attachBackNavigationChanged(t.fnOnBackNavigationChange.bind(this));};this.parseStatefulContainerConfiguration=function(t){var w={};if(t){var x={"GUI":true};Object.keys(t).filter(function(y){return true===t[y]&&x[y];}).map(function(U){var y=U;if(y==="GUI"){y="TR";}return y;}).forEach(function(y){w[y]=null;});}p=w;};this.setStatefulApplicationContainer=function(t){p=t;};this.getStatefulApplicationContainer=function(){return p;};this.applicationIsStatefulType=function(t){return p.hasOwnProperty(t);};this.getStatefulContainer=function(t){return p[t];};this.setStatefulContainer=function(t,w){return p[t]=w;};this.statefulContainerForTypeExists=function(t){return!!this.getStatefulContainer(t);};this.getAllApplicationContainers=function(){return Object.keys(p).map(function(K){return p[K];}).filter(function(t){return!!t;});};this.getElementsModel=function(){return E;};this.activeContainer=function(t){var w=this.getAllApplicationContainers();w.forEach(function(x){jQuery.sap.log.info("Deactivating container "+x.getId());x.setActive(false);});if(t){jQuery.sap.log.info("Activating container "+t.getId());t.setActive(true);}};this.reuseApplicationContainer=function(t,w,x){var y=this;return t.setNewApplicationContext(w,x).then(function(){y.navTo(t.getId());t.toggleStyleClass("hidden",false);jQuery.sap.log.info("New application context opened successfully in an existing transaction UI session.");},function(z){jQuery.sap.log.error(z&&z.message||z);});};this.createApplicationContainer=function(t,w){return b.createApplicationContainer(t,w);};this.publishNavigationStateEvents=function(t,w,O){var x,I=t.getId?t.getId():"",y=this;var z=e.getMetadata(),B=z.icon,T=z.title;t.addEventDelegate({onAfterRendering:O});x=t.exit;t.exit=function(){if(x){x.apply(this,arguments);}y.getAppMeta()._applyContentDensityByPriority();setTimeout(function(){var F=jQuery.extend(true,{},w);delete F.componentHandle;F["appId"]=I;F["usageIcon"]=B;F["usageTitle"]=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",F);jQuery.sap.log.info('app was closed');},0);var P=y._publicEventDataFromResolutionResult(w);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",P);};};this._publicEventDataFromResolutionResult=function(t){var P={};if(!t){return t;}["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(w){P[w]=t[w];});Object.freeze(P);return P;};this.isCachedEnabledAsAppParameter=function(t,T){if(t&&t.params&&t.params["sap-keep-alive"]){if(t.params["sap-keep-alive"]=="true"){return true;}}if(T&&T.url){if(jQuery.sap.getUriParameters(T.url).get("sap-keep-alive")=="true"){return true;}}return false;};this.getInMemoryInstance=function(I,F){var t="application-"+I,w=S.get(t);if(w){if(w.shellHash===F){return{isInstanceSupported:true,appId:w.appId,container:w.container};}else{return{isInstanceSupported:false,appId:w.appId,container:w.container};}}return{isInstanceSupported:false,appId:undefined,container:undefined};};this.handleControl=function(I,t,w,T,W,x,F){var y=this.getControl(I),z=this.statefulContainerForTypeExists(T.applicationType),M=e.getMetadata(T),L=(T.applicationType==="NWBC"||T.applicationType==="TR"),B=i.indexOf(T.applicationType)>=0,H="application-"+I,J=this.isAppOfTypeCached(H,B)||this.isCachedEnabledAsAppParameter(w,T);if(!z&&y&&!J){this.destroy(y.getId(),y);y=W(I,M,w,T,t,T.fullWidth||M.fullWidth||L,F);}else if(!y){y=W(I,M,w,T,t,T.fullWidth||M.fullWidth||L,F);}else if(I===s){x();}if(!z){this.resoterApp(y.getId());this.navTo(y.getId());}v.switchState("Center");u.setPerformanceMark("FLP -- centerViewPort");this.activeContainer(y);if(z){this.reuseApplicationContainer(y,T.applicationType,T.url);}};this.switchViewState=function(t,w,x){var y=t,z;if(n[t]&&n[t][j]){y=n[t][j];}var I=C.last("/core/shell/model/currentState/stateName")==="home";if(!I&&(!m.appId||!S.get(m.appId))){E.destroyManageQueue();}z=S.get("application"+x);if(z){c.restore(z);}else{c.assignNew(t);}var B=E.switchState(y,w,x);this.shellElements().setDangling(false);this.shellElements().processDangling();if(t==="searchResults"){this.getElementsModel().setProperty("/lastSearchScreen",'');if(!window.hasher.getHash().indexOf("Action-search")===0){var F=sap.ui.getCore().getModel("searchModel");window.hasher.setHash("Action-search&/searchTerm="+F.getProperty("/uiFilter/searchTerms")+"&dataSource="+JSON.stringify(F.getProperty("/uiFilter/dataSource").getJson()));}}sap.ui.getCore().getEventBus().publish("launchpad","shellViewStateChanged",B);};this.registerShellCommunicationHandler=function(t,T){if(T==="global"){G=t;}else{m.container.registerShellCommunicationHandler(t);}};this.registerIframeCommunicationHandler=function(H,t){q[t]=H;};}
return new h();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/Storage',[],function(){"use strict";
function S(){var c,e;function L(l){this.size=0;(typeof l=="number")?this.limit=l:this.limit=10;this.map={};this.head=null;this.tail=null;}L.prototype.LRUnode=function(k,v){if(typeof k!="undefined"&&k!==null){this.key=k;}if(typeof v!="undefined"&&v!==null){this.value=v;}this.prev=null;this.next=null;};L.prototype.setHead=function(n){n.next=this.head;n.prev=null;if(this.head!==null){this.head.prev=n;}this.head=n;if(this.tail===null){this.tail=n;}this.size++;this.map[n.key]=n;};L.prototype.set=function(k,v){var n=new L.prototype.LRUnode(k,v);if(this.map[k]){this.map[k].value=n.value;this.remove(n.key);}else{if(this.size>=this.limit){if(e){e(this.map[this.tail.key]);}delete this.map[this.tail.key];this.size--;this.tail=this.tail.prev;this.tail.next=null;}}this.setHead(n);};L.prototype.get=function(k){if(this.map[k]){var v=this.map[k].value;var n=new L.prototype.LRUnode(k,v);this.remove(k);this.setHead(n);return v;}else{return null;}};L.prototype.remove=function(k){var n=this.map[k];if(n.prev!==null){n.prev.next=n.next;}else{this.head=n.next;}if(n.next!==null){n.next.prev=n.prev;}else{this.tail=n.prev;}delete this.map[k];this.size--;};L.prototype.removeAll=function(l){this.size=0;this.map={};this.head=null;this.tail=null;if(typeof l=="number"){this.limit=l;}};L.prototype.forEach=function(a){var n=this.head,i=0;while(n){a.apply(this,[n,i,this]);i++;n=n.next;}};L.prototype.toJSON=function(){var j=[],n=this.head;while(n){j.push({key:n.key,value:n.value});n=n.next;}return j;};L.prototype.toString=function(){var s='',n=this.head;while(n){s+=String(n.key)+':'+n.value;n=n.next;if(n){s+='\n';}}return s;};this.init=function(l,i){c=new L(l);e=i;};this.get=function(k){return c.get(k);};this.set=function(k,v){c.set(k,v);};this.remove=function(k){c.remove(k);};}
return new S();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/Application',['sap/ushell/components/container/ApplicationContainer'],function(A){"use strict";var a,o=A.getMetadata().getJSONKeys();
function b(){this._createWaitForRendererCreatedPromise=function(){var p,r;r=sap.ushell.Container.getRenderer();if(r){jQuery.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[];}else{p=new Promise(function(c,d){var O;O=function(){jQuery.sap.log.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");c();sap.ushell.Container.detachRendererCreatedEvent(O);};r=sap.ushell.Container.getRenderer();if(r){jQuery.sap.log.debug("Shell controller: resolving component waitFor promise immediately (shell renderer already created");c();}else{sap.ushell.Container.attachRendererCreatedEvent(O);}});return[p];}};this.createComponent=function(r,p){return sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(r,p,this._createWaitForRendererCreatedPromise());};this.createApplicationContainer=function(s,r){var t={};this._cleanTargetResolution(r,t);a=new A("application"+s,r);this._restoreTargetResolution(r,t);return a;};b.prototype._cleanTargetResolution=function(r,t){var k;if(r){for(k in r){if(o[k]===undefined){t[k]=r[k];delete r[k];}}}};b.prototype._restoreTargetResolution=function(r,t){var k;if(r){for(k in t){r[k]=t[k];}}};this.restore=function(c){if(c){if(c.restore){c.restore();}if(c.setInitialConfiguration){c.setInitialConfiguration();}if(c.getRouter&&c.getRouter()&&c.getRouter().initialize){c.getRouter().initialize();}}};this.store=function(c){if(c){if(c.suspend){c.suspend();}if(c.getRouter&&c.getRouter()){c.getRouter().stop();}}};this.destroy=function(c){if(c&&c.destroy){c.destroy();}};}
return new b();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/configuration/AppMeta',['sap/ushell/services/AppConfiguration','sap/ushell/components/applicationIntegration/elements/model','sap/ui/Device','sap/ushell/Config','sap/ushell/utils','sap/ushell/resources','sap/ushell/EventHub','sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements'],function(A,E,D,C,u,r,a,R){"use strict";
function b(){var i,t=this,c,s,d;this.getIsTitleChanged=function(){return i;};this.getIsRelatedAppsChanged=function(){return d;};this.getHierarchyDefaultValue=function(){var h=[];var e=C.last("/core/shell/model/currentState/stateName");if(e&&((e==="app"||e==="embedded"))){h=[{icon:"sap-icon://home",title:r.i18n.getText("actionHomePage"),intent:s?"#"+s:"#"}];}return h;};this.init=function(I){s=I;};this.getIsHierarchyChanged=function(){return c;};this.onHierarchyChange=function(e){c=true;var h=e.getParameters().data,H,f=[],g=C.last("/core/shell/model/currentState/stateName");if(!h){h=[];}H=t.getHierarchyDefaultValue();h.forEach(function(I,j){f[j]=jQuery.extend({},I);});f=f.concat(H);if(g==="home"){E.updateStateProperty("application/hierarchy",f,false,["home"]);}E.updateStateProperty("application/hierarchy",f,true);};this.onRelatedAppsChange=function(e){d=true;var o=e.getParameters().data,f=C.last("/core/shell/model/currentState/stateName");if(!o){o=[];}if(f==="home"){E.updateStateProperty("application/relatedApps",o,false,["home"]);}E.updateStateProperty("application/relatedApps",o,true);};this.resetShellUIServiceHandlers=function(){d=false;c=false;i=false;};this.onTitleChange=function(e){i=true;var T=e.getParameters().data;if(!T){T=this.getAppMeta().getTitleDefaultValue();}var f=C.last("/core/shell/model/currentState/stateName");if(f==="home"){E.updateStateProperty("application/title",T,false,["home"]);}E.updateStateProperty("application/title",T,true);R.genericSetItem("application/title",T);window.document.title=T;u.setPerformanceMark("FLP -- title change");a.emit("TitleChanged",T);};this._getDefaultFavIcon=function(p){var f=p.get('sapUiShellFavicon');if(f){var m=/url[\s]*\('?"?([^\'")]*)'?"?\)/.exec(f);if(m){f=m[1];}else if(f==="''"||f==="none"){f=null;}}if(!f){var M=jQuery.sap.getModulePath("sap.ushell");return M+'/themes/base/img/launchpad_favicon.ico';}return f;};this.getFavIconHref=function(){return jQuery('link').filter('[rel="shortcut icon"]').attr('href')||'';};this.getAppIcon=function(){var I="sap-icon://folder",e=A.getMetadata();if(e&&e.icon){I=e.icon;}return I;};this.setAppIcons=function(m){sap.ui.require(["sap/ui/core/theming/Parameters"],function(P){jQuery.sap.measure.start("FLP:ShellController.setAppIcons","setAppIcons","FLP");var M=jQuery.sap.getModulePath("sap.ushell"),l=(m&&m.homeScreenIconPhone)||(M+'/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png'),L=(m&&m["homeScreenIconPhone@2"])||(M+'/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png'),o=(m&&m.homeScreenIconTablet)||(M+'/themes/base/img/launchicons/72_iPad_Desktop_Launch.png'),e=(m&&m["homeScreenIconTablet@2"])||(M+'/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png'),f=(m&&m.favIcon)||(this._getDefaultFavIcon(P)),g=this.getFavIconHref();if(D.os.ios){jQuery.sap.setIcons({'phone':l,'phone@2':L,'tablet':o,'tablet@2':e,'favicon':f,'precomposed':false});}else if(g!==f){jQuery.sap.setIcons({'phone':'','phone@2':'','tablet':'','tablet@2':'','favicon':f,'precomposed':true});}jQuery.sap.measure.end("FLP:ShellController.setAppIcons");}.bind(this));};this._applyContentDensityByPriority=function(e){var f;if(e===undefined){if(D.system.combi){var g=sap.ushell.Container.getService("UserInfo"),U=g.getUser(),h="autoDetect";if(U){h=U.getContentDensity();}switch(h){case"cozy":e=false;break;case"compact":e=true;break;default:f=A.getMetadata();if(f.compactContentDensity&&!f.cozyContentDensity){e=true;}else{e=false;}}}else{f=A.getMetadata();if(f.compactContentDensity&&!f.cozyContentDensity){e=true;}else if(!f.compactContentDensity&&f.cozyContentDensity){e=false;}else{e=this._isCompactContentDensityByDevice();}}}this._applyContentDensityClass(e);};this._applyContentDensityClass=function(e){var I=this._isCompactContentDensityByDevice();return new Promise(function(f,g){function h(j){jQuery('body').toggleClass('sapUiSizeCompact',j).toggleClass('sapUiSizeCozy',!j);f();}if(e===undefined){sap.ushell.Container.getServiceAsync("UserInfo").then(function(j){var U=j.getUser?j.getUser():undefined;h(U&&U.getContentDensity()==='cozy'?false:I);});}else{h(!!e);}});};this._isCompactContentDensityByDevice=function(){return!D.support.touch||D.system.combi;};this.getTitleDefaultValue=function(){var T="",e=A.getMetadata();if(e&&e.title){T=e.title;}return T;};this.create=function(){};this.restore=function(I){this._applyContentDensityByPriority();this.setAppIcons(I);};this.store=function(I){};this.destroy=function(I){};}
return new b();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/elements/model',["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/ui/footerbar/EndUserFeedback","sap/ushell/ui/shell/ShellHeadItem"],function(E,C,u,a,b,S){"use strict";var B;var c;
function d(){return{"home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn"]},"app":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"minimal":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"standalone":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded-home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"lean":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]}};}
function e(){return{"blank":{"stateName":"blank","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"blank-home":{"stateName":"blank-home","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"home":{"stateName":"home","showCurtain":false,"headerVisible":true,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"headItems":['meAreaHeaderButton'],"showRecentActivity":true,"headEndItems":[],"search":"","paneContent":[],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false},"app":{"stateName":"app","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"search":"","headItems":['meAreaHeaderButton','backBtn','homeBtn'],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false},"minimal":{"stateName":"minimal","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['meAreaHeaderButton','homeBtn'],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"standalone":{"stateName":"standalone","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['meAreaHeaderButton','backBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"embedded":{"stateName":"embedded","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['meAreaHeaderButton','backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"embedded-home":{"stateName":"embedded-home","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['meAreaHeaderButton'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false,"search":""},"headerless":{"stateName":"headerless","showCurtain":false,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"search":""},"merged":{"stateName":"merged","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":['backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"search":""},"headerless-home":{"stateName":"headerless-home","showCurtain":false,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"search":""},"merged-home":{"stateName":"merged-home","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"search":""},"lean":{"stateName":"lean","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":false,"paneContent":[],"search":"","headItems":['meAreaHeaderButton'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false},"lean-home":{"stateName":"lean-home","showCurtain":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":false,"paneContent":[],"search":"","headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{},"showLogo":false}};}
function r(O,K){return Object.keys(O).reduce(function(o,s){if(!K[s]){o[s]=O[s];}return o;},{});}
function v(i,j,s){return j!=undefined;}
function n(i,j,s){return true;}
function g(o,m){var p=m.split("/");var M=o;p.shift();p.forEach(function(P){if(!M){return;}M=M[P];});return M;}
function f(m,V,o){var p=m.split("/");var M=o;p.shift();var P=p.pop();p.forEach(function(s){M=M[s];});M[P]=V;}
function h(){var o;var s;var l;var A;var m;var I;var p;var q;var t;var T;var w;this.createDefaultTriggers=function(i){var R=function(D,F,G){if(G.sProperty=="actions"){var H=g(G.oModel,G.path);if(H&&H.length===0&&G.aIds&&G.aIds.length>0){this._renderShellState();}}}.bind(this);var j=function(H){function D(O,N){var U=sap.ushell.Container.getService("URLParsing"),G=U.getHash(O),J=U.getHash(N),K=U.parseShellHash(G).appSpecificRoute,L=U.parseShellHash(J).appSpecificRoute;return K!==L;}var F=D(H.oldURL,H.newURL);if(F){this.addHeaderItem(["backBtn"],true);}}.bind(this);this.createTriggersOnBaseStates([{sName:'onAddFirstAction',fnRegister:function(){sap.ui.getCore().getEventBus().subscribe("launchpad","updateShell",R,this);},fnUnRegister:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","updateShell",R,this);}}],["blank","blank-home"],i);var y=this;var z;this.createTriggersOnBaseStates([{sName:'onAddFirstAction',fnRegister:function(){window.addEventListener("hashchange",j);var N=0;z=E.on("AppRendered").do(function(){N++;if(N>=2){y.addHeaderItem(["backBtn"],true);}});},fnUnRegister:function(){window.removeEventListener("hashchange",j);if(z){z.off();}}}],["lean","lean-home"],i);};this.init=function(i,j){B=e();c=d();s=C.last("/core/shell/model");o={};m={};I=false;p=false;t=false;T=[];w=true;A=j;q=undefined;if(i){jQuery.sap.measure.start("FLP:ElementsModel.init","moveShellHeaderEndItems","FLP");if(i.moveEditHomePageActionToShellHeader){this._moveActionsToShellHeader("ActionModeBtn");}if(i.moveContactSupportActionToShellHeader){this._moveCustomeDataActionBtnToShellHeader("ContactSupportBtn");}if(i.moveGiveFeedbackActionToShellHeader){this._moveCustomeDataActionBtnToShellHeader("EndUserFeedbackBtn");}if(i.moveAppFinderActionToShellHeader){this._moveActionsToShellHeader("openCatalogBtn");}if(i.moveUserSettingsActionToShellHeader){this._moveActionsToShellHeader("userSettingsBtn");}jQuery.sap.measure.end("FLP:ElementsModel.init");}var y=i&&i.appState?i.appState:"home";this.createDefaultTriggers(y);this.switchState(y);};this.destroy=function(){s=undefined;o=undefined;A=undefined;m=undefined;I=undefined;p=undefined;w=undefined;t=undefined;q=undefined;B=undefined;c=undefined;};this.getModel=function(){var R=sap.ushell.Container.getRenderer("fiori2");if(!R){return undefined;}return R._oShellView.getModel();};this._moveCustomeDataActionBtnToShellHeader=function(i){for(var j in c){var y=c[j];var z=y.actions;var D=z.indexOf(i);if(D!=-1){c[j].actions.splice(D,1);D=B[j].headEndItems.indexOf(i);if(D===-1){B[j].headEndItems.push(i);}}}var F=sap.ui.getCore().byId(i);if(!F){var G;if(i==="ContactSupportBtn"){G=new a("tempContactSupportBtn",{visible:true});}else if(i==="EndUserFeedbackBtn"){G=new b("EndUserFeedbackHandlerBtn",{});}var H=G.getIcon();var J=G.getText();var K=function(){G.firePress();};var L=new S(i,{icon:H,tooltip:J,text:J,showSeparator:false});if(i==="ContactSupportBtn"){L.attachPress(K);}if(i==="EndUserFeedbackBtn"){L.setVisible(false);}L.data("isShellHeader",true);}};this._attachPressToUserSettings=function(){jQuery.sap.measure.start("FLP:ElementsModel._attachPressToUserSettings","_attachPressToUserSettings","FLP");var i=sap.ui.getCore().byId("userSettingsBtn");i.attachPress(function(){var j=sap.ui.getCore().byId('meArea');if(!j.oSettingsDialog.getModel()){j.oSettingsDialog.setModel(j.getModel());}var O=function(){j.oSettingsDialog.open();sap.ui.getCore().byId("viewPortContainer").detachAfterSwitchStateAnimationFinished(O);};var y=sap.ui.getCore().byId('viewPortContainer');if(y.getCurrentState()!="Center"){sap.ui.getCore().byId("viewPortContainer").attachAfterSwitchStateAnimationFinished(O);sap.ui.getCore().byId("viewPortContainer").switchState("Center");}else{O();}});jQuery.sap.measure.end("FLP:ElementsModel._attachPressToUserSettings");};this._moveActionsToShellHeader=function(i){var j;for(j in B){var y=B[j];if(j==="blank"||j==="blank-home"){continue;}if(i==="ActionModeBtn"&&j==="app"){continue;}if((i==="openCatalogBtn"||i==="userSettingsBtn")&&(j==="lean"||j==="lean-home")){continue;}var z=y.actions;var D=z.indexOf(i);if(D!=-1){B[j].actions.splice(D,1);}D=B[j].headEndItems.indexOf(i);if(D===-1){B[j].headEndItems.push(i);}}if(i==="userSettingsBtn"){var F="userSettingsBtn";var G=sap.ushell.resources.i18n.getText("userSettings");var H='sap-icon://action-settings';var U=sap.ui.getCore().byId(F);E.on("CoreResourcesComplementLoaded").do(this._attachPressToUserSettings.bind(this));if(!U){var J=new S(F,{icon:H,tooltip:G,text:G,showSeparator:false});J.data("isShellHeader",true);}}};this.destroyManageQueue=function(){this._destroyManageQueue(["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"]);};this.switchState=function(i){var j=u.clone(B[i]);var y=r(j,{aTriggers:true,oCheckPoints:true});C.emit("/core/shell/model/currentState",y);l=A.customShellState;q=undefined;this._renderShellState();return j;};this.setLeftPaneVisibility=function(V,i,j){this.updateStateProperty("showPane",V,i,j);};this.setHeaderHiding=function(){jQuery.sap.log.warning("Application Life Cycle model: headerHiding property is deprecated and has no effect");};this.setHeaderVisibility=function(V,i,j){this.updateStateProperty("headerVisible",V,i,j);};this.showLogo=function(i,j){this.updateStateProperty("showLogo",true,i,j,false);};this.addHeaderItem=function(i,j,y){this._addHeaderItemInCorrectOrder("headItems",i,j,y);};this._removeReservedItemId=function(R,i,j){var y=false,z=j.indexOf(R);if(z>-1){j.splice(z,1);y=true;}z=i.indexOf(R);if(z>-1){i.splice(z,1);y=true;}return y;};this._addHeaderItemInCorrectOrder=function(P,i,j,y){var z=this;function V(D,F,G){var H=3-D.length;F.forEach(function(J,K){var L=(J==='meAreaHeaderButton'||J==='backBtn'||J==='homeBtn');if(D[J]===-1&&!L){H--;}});if(H<0){jQuery.sap.log.warning("Maximum of three items has been reached, cannot add more items.");return false;}return true;}function U(D,F,G){jQuery.sap.measure.start("FLP:ElementsModel.fnUpdate","update shell head end items","FLP");var H=g(G,D),J=[],K=F.slice(0);if(z._removeReservedItemId("meAreaHeaderButton",H,K)===true){J.push("meAreaHeaderButton");}if(z._removeReservedItemId("backBtn",H,K)===true){J.push("backBtn");}if(z._removeReservedItemId("homeBtn",H,K)===true){J.push("homeBtn");}H.some(function(L){if(J.length<3){J.push(L);}else{return true;}});K.some(function(L){if(J.length<3){J.push(L);}else{return true;}});f(D,J,G);jQuery.sap.measure.end("FLP:ElementsModel.fnUpdate");}this._setShellItem(P,i,j,y,V,U);};this.removeHeaderItem=function(i,j,y){this._removeShellItem("headItems",i,j,y);};this.addHeaderEndItem=function(i,j,y,D){if(i.length){this._addUpToSixItem("headEndItems",i,j,y,D);}};this.removeHeaderEndItem=function(i,j,y){this._removeShellItem("headEndItems",i,j,y);};this.addSubHeader=function(i,j,y){if(i.length){this._addShellItem("subHeader",i,j,y);}};this.removeSubHeader=function(i,j,y){this._removeShellItem("subHeader",i,j,y);};this.addActionButton=function(i,j,y,z){if(z){this._addActionButtonAtStart("actions",i,j,y);}else{this._addActionButton("actions",i,j,y);}};this.removeActionButton=function(i,j,y){this._removeShellItem("actions",i,j,y);};this.addToolAreaItem=function(i,j,y){if(i.length){this._addToolAreaItem("toolAreaItems",i,j,y);}};this.removeToolAreaItem=function(i,j,y){this._removeShellItem("toolAreaItems",i,j,y);};this.addLeftPaneContent=function(i,j,y){if(i.length){this._addShellItem("paneContent",i,j,y);}};this.removeLeftPaneContent=function(i,j,y){this._removeShellItem("paneContent",i,j,y);};this.addRightFloatingContainerItem=function(i,j,y){if(i.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",i,j,y);}};this.removeRightFloatingContainerItem=function(i,j,y){this._removeShellItem("RightFloatingContainerItems",i,j,y);};this.showSettingsButton=function(i,j){this.addActionButton(["userSettingsBtn"],i,j,false);};this.showSignOutButton=function(i,j){this.addActionButton(["logoutBtn"],i,j,false);};this.showRightFloatingContainer=function(i){this._showRightFloatingContainer(i);};this.addFloatingActionButton=function(i,j,y){if(i.length){this._addShellItem("floatingActions",i,j,y);}};this.removeFloatingActionButton=function(i,j,y){this._removeShellItem("floatingActions",i,j,y);};this.updateStateProperty=function(P,V,i,j,D){this._setShellItem(P,V,i,j,v,f,D);};this._handleTriggers=function(N){var i,j,y=[],z={};w=false;while(T.length>0){i=T.pop();if(N[i.sName]){y.push(i);z[i.sName]=i;}else{i.fnUnRegister(this);}}for(var D in N){if(N.hasOwnProperty(D)){if(!z[D]){j=N[D];j.fnRegister(this);y.push(j);}}}T=y;w=true;};this._registerTriggers=function(i){w=false;i.forEach(function(j){j.fnRegister(this);T.push(j);});w=true;};function x(i,j){var y=[];if(!j.aTriggers){j.aTriggers=[];}i.forEach(function(z){var F={sName:z.sName,fnRegister:z.fnRegister,fnUnRegister:z.fnUnRegister};j.aTriggers.push(F);y.push(F);});return y;}this.createTriggersOnState=function(i,j){var y=x(i,B);if(!I){this._registerTriggers(y);}};this.createTriggersOnBaseStates=function(i,j,y){var z=[];j.forEach(function(F){var G=B[F];z=x(i,G);});var D=j.indexOf(y)>=0;if(D&&!I){this._registerTriggers(z);}};this.createTriggers=function(i,j,y){var z=s.currentState;if(j===true){this.createTriggersOnState(i,z);return;}this.createTriggersOnBaseStates(i,y,z.stateName);};this.createInspection=function(j,y,z,D){var F=function(M,j,y){var N,O;if(!M.oCheckPoints){M.oCheckPoints=[];}if(!M.oCheckPoints[j]){M.oCheckPoints[j]=[];}N=M.oCheckPoints[j];for(O=0;O<y.length;O++){G=y[O];N.push({fnCondition:G.fnCondition,fnCheckPoint:G.fnAction});}};if(z===true){var G,H=s.currentState;F(H,j,y);if(!t&&!I){F(l.currentState,j,y);}this._renderShellState();}else{var i,J=s.currentState.stateName;for(i=0;i<D.length;i++){var K=D[i],L=B[K];F(L,j,y);if(J===K){if(!I){this._renderShellState();}}}}};this.showShellItem=function(P,j,V){var y=this._getModelStates(j),M="/currentState"+P,z;for(var i=0;i<y.length;i++){z=B[y[i]].stateName;B[z][P.split("/")[1]]=V;}if(s.currentState.stateName===j){f(M,V,s);}};this.addCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnAdd(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.removeCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnRemove(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.createExtendedShellState=function(i,j){var y,z=this._createCustomShellState(i);if(!A){A={extendedShellStates:{},oCheckPoints:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}y=A.extendedShellStates;if(y[i]){return false;}s=z;t=true;j();if(y[i]){y[i].customState=z;}else{y[i]={managedObjects:[],customState:z};}s=C.last("/core/shell/model");t=false;return true;};this.applyExtendedShellState=function(i){q=i;this._renderShellState();};this.addEntryInShellStates=function(i,j,y,R,z){var D,F;if(!o[i]){o[i]={fnAdd:y,fnHide:R};var G=this._getStatesList();for(D=0;D<G.length;D++){F=G[D];B[F][i]=z[F];}this["remove"+j]=R;this["add"+j]=y;}else{throw new Error("State entry already exsists:"+i);}};this.addElementToManagedQueue=function(i){var j=C.last("/core/shell/model/currentState/stateName"),y,z=i.getId();if(!A){A={extendedShellStates:{},oCheckPoints:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}y=A.extendedShellStates;if(!y[j]){y[j]={managedObjects:[],customState:undefined};}y[j].managedObjects.push(z);var M=m[z];if(M){M.nRefCount++;}else{M={oItem:i,nRefCount:1};m[z]=M;}};this.updateNeededTriggersMap=function(i,j){var y;if(!j){return;}for(y=0;y<j.length;y++){i[j[y].sName]=j[y];}};this._renderShellState=function(){if(B===undefined){return;}var i=C.last("/core/shell/model/currentState/stateName"),j,y,z=u.clone(B[i]),D=A,F,N={};if(I){return;}if(D){F=D.customShellState.currentState;}var G={"currentState":u.clone(z)};s=G;I=true;if(q){if(D.extendedShellStates[q]){j=D.extendedShellStates[q].customState;y=j.currentState;this._addCustomShellStates(y);}}if(F){this._addCustomShellStates(F);}s=C.last("/core/shell/model");if(z&&z.aTriggers){this.updateNeededTriggersMap(N,z.aTriggers);}if(y&&y.aTriggers){this.updateNeededTriggersMap(N,y.aTriggers);}if(F&&F.aTriggers){this.updateNeededTriggersMap(N,F.aTriggers);}if(w){this._handleTriggers(N);}delete G.currentState.aTriggers;delete G.currentState.oCheckPoints;var H=r(G.currentState,{aTriggers:true,oCheckPoints:true});C.emit("/core/shell/model/currentState",H);I=false;};this._addCustomShellStates=function(i){this.addHeaderItem(i.headItems,true);this.addToolAreaItem(i.toolAreaItems,true);this.addHeaderEndItem(i.headEndItems,true);this.addSubHeader(i.subHeader,true);this.addRightFloatingContainerItem(i.RightFloatingContainerItems,true);this.addActionButton(i.actions,true,undefined,false);this.addLeftPaneContent(i.paneContent,true);this.addFloatingActionButton(i.floatingActions,true);this._setCurrentApplicationInformation(i.application);this.showRightFloatingContainer(i.showRightFloatingContainer);this.setHeaderVisibility(i.headerVisible,true);if(i.showLogo){this.showLogo(true);}};this._createCustomShellState=function(i){var j={"currentState":{"stateName":i,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}};var y=c[i];if(y){jQuery.extend(j.currentState,y);}return j;};this._setCurrentApplicationInformation=function(i){if(!i){i={};}i=jQuery.extend(true,{},s.currentState.application,i);this.updateStateProperty("application",i,true);};this._showRightFloatingContainer=function(i){this._setShellItem("showRightFloatingContainer",i,true,[],v,f);};this._addActionButtonAtStart=function(P,i,j,y){function U(z,D,F){var G=g(F,z),H=[],O=D.indexOf("openCatalogBtn");if(O>-1){D.splice(O,1);H.push("openCatalogBtn");}else{if(G[0]==="openCatalogBtn"){G.splice(0,1);H.push("openCatalogBtn");}}H=H.concat(D).concat(G);f(z,H,F);}this._setShellItem(P,i,j,y,n,U);};this._addActionButton=function(P,i,j,y){function U(z,D,F){var G=g(F,z);var L=G.indexOf("logoutBtn");if(L>-1){G.splice.apply(G,[L,0].concat(D));}else{G=G.concat(D);}var O=G.indexOf("openCatalogBtn"),H=[];if(O>-1){G.splice(O,1);H.push("openCatalogBtn");H=H.concat(G);}else{H=G;}f(z,H,F);}this._setShellItem(P,i,j,y,n,U);};this.setFloatingContainerContent=function(P,i,j,y){function V(z,i,D){return i.length===1;}function U(z,i,D){f(z,i,D);}this._setShellItem(P,i,j,y,V,U);};this._addUpToSixItem=function(P,i,j,y,D){function V(z,F,G){var H=0,J,K;if(F.length===1&&F[0]==="endItemsOverflowBtn"){return true;}for(J=0;J<z.length;J++){K=z[J];if(K!=="endItemsOverflowBtn"){H++;}if(H+F.length>6){jQuery.sap.log.warning("maximum of six items has reached, cannot add more items.");return false;}if(F.indexOf(K)>-1){return false;}}return true;}function U(z,F,G){var H=g(G,z),J=H.slice(0);J=J.sort();J=J.concat(F);var K=J.indexOf("NotificationsCountButton");if(K!=-1){J.splice(K,1);J.splice(J.length,0,"NotificationsCountButton");}var L=J.indexOf("copilotBtn");if(L!=-1){J.splice(L,1);if(J.indexOf("sf")!=-1){J.splice(1,0,"copilotBtn");}else{J.splice(0,0,"copilotBtn");}}var M=J.indexOf("sf");if(M!=-1){J.splice(M,1);J.splice(0,0,"sf");}f(z,J,G);}this._setShellItem(P,i,j,y,V,U,D);};this._addShellItem=function(P,i,j,y){function V(z,i,D){if(z.length>0){jQuery.sap.log.warning("You can only add one item. Replacing existing item: "+z[0]+" in state: "+D+", with the new item: "+i[0]+".");}return true;}function U(z,D,F){f(z,i.slice(0),F);}this._setShellItem(P,i,j,y,V,U);};this._addRightFloatingContainerItem=function(P,i,j,y){function U(z,D,F){var G=g(F,z);G=G.concat(D);f(z,G,F);}this._setShellItem(P,i,j,y,n,U);};this._addToolAreaItem=function(P,i,j,y){function U(F,i,G){var H=g(G,F);H.push(i);f(F,H,G);}var z,D=this._getPassStates(y);for(z=0;z<D.length;z++){this.showShellItem("/toolAreaVisible",D[z],true);}this._setShellItem(P,i,j,y,n,U);};this._removeShellItem=function(P,i,j,y){function V(z,D){var F,i,G;for(G=0;G<D.length;G++){i=D[G];F=z.indexOf(i);if(F<0){jQuery.sap.log.warning("You cannot remove Item: "+i+", the headItem does not exists.");return false;}}return true;}function U(z,D,F){var G=g(F,z),H,i,J;for(J=0;J<D.length;J++){i=D[J];H=G.indexOf(i);if(H>-1){G.splice(H,1);}}f(z,G,F);}this._setShellItem(P,i,j,y,V,U);};this._commitCheckPoints=function(i,j,y){var z;for(z=0;z<i.length;z++){if(i[z].fnCondition(j,y,this)){i[z].fnCheckPoint(j,y,this);}}};this._setShellItem=function(P,O,y,z,V,U,D){var F,G;var H=Array.isArray(O)?O.slice(0):O;if(y===true){F="/currentState/"+P;G=g(s,F);if(V(G,H,"currentState")===false){return;}if(I&&!p){var J=C.last("/core/shell/model/currentState/stateName"),K=B[J],L=A;p=true;if(K.oCheckPoints){var M=K.oCheckPoints[P];if(M&&M.length){this._commitCheckPoints(M,G,H);}}if(q){if(L.extendedShellStates[q]){var N=L.extendedShellStates[q].customState,Q=N.currentState;if(Q&&Q.oCheckPoints&&Q.oCheckPoints[P]){this._commitCheckPoints(Q.oCheckPoints[P],G,H);}}}var R=L.customShellState.currentState;if(R&&R.oCheckPoints&&R.oCheckPoints[P]){M=R.oCheckPoints[P];if(M&&M.length){this._commitCheckPoints(M,G,H);}}p=false;}if(!t&&!I){U(F,H,l);sap.ui.getCore().getEventBus().publish('launchpad','updateShell',{oModel:s,path:F,aIds:H,sProperty:P});this._renderShellState();}else{U(F,H,s);}}else{var W=D?z:this._getPassStates(z),i,X=s.currentState.stateName;for(i=0;i<W.length;i++){var Y=W[i],j;G=g(B[Y],"/"+P);if(V(G,H,Y)===false){continue;}var Z=this._getModelStates(Y,D);for(j=0;j<Z.length;j++){F="/"+Z[j]+"/"+P;U(F,H,B);if(X===Z[j]){if(!I){this._renderShellState();}}}}}};this._getPassStates=function(j){var P=[],i;j=j||[];for(i=0;i<j.length;i++){if(j[i]!==undefined){if(j[i]!=="home"&&j[i]!=="app"){throw new Error("sLaunchpadState value is invalid");}P.push(j[i]);}}if(!P.length){P=["app","home"];}return P;};this._getModelStates=function(i,D){var M=[];if(i==="app"&&!D){var j=["app","minimal","standalone","embedded","headerless","merged","blank","lean"];M=M.concat(j);}else if(i==="home"&&!D){var j=["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"];M=M.concat(j);}else{M.push(i);}return M;};this._getStatesList=function(){return Object.keys(B);};this._destroyManageQueue=function(i){var j,y,M,z,D,F;z=A.extendedShellStates;for(D in z){if(z.hasOwnProperty(D)){F=z[D].managedObjects;for(j=0;j<F.length;j++){y=F[j];M=m[y];M.nRefCount--;if(M.nRefCount===0){M.oItem.destroy();m[y]=null;}}delete z[D];}}};this._isValidStateEntry=function(N){return!!o[N];};this.getModelToUpdate=function(){return s;};this.setModelToUpdate=function(M,i){t=i;s=M;};this._getManagedElements=function(){return m;};this.extendStates=function(i){var j;for(j in i){if(i.hasOwnProperty(j)){B[j]=i[j];}}};this.getBaseStateMember=function(i,j){return B[i][j];};this.getCustomStateDeltaMember=function(i,j){return c[i][j];};this.getAllStatesInDelta=function(){return Object.keys(c);};}
var k=new h();return k;},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedServices/RelatedServices',[],function(){"use strict";
function R(){var b;var s={};this._historyBackNavigation=function(){window.history.back();};this.navigateBack=function(){if(b){b();}else{this._historyBackNavigation();}};this.setNavigateBack=function(i){b=i;s.backNavigationHander=b;};this.resetNavigateBack=function(){b=this._historyBackNavigation;s.backNavigationHander=b;};this.create=function(){b=this._historyBackNavigation;s={backNavigationHander:b};return s;};this.restore=function(i){if(i){s=i;b=s.backNavigationHander;}};this.store=function(S){s={backNavigationHander:this._historyBackNavigation};};this.destroy=function(S){};}
return new R();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements',[],function(){"use strict";
function R(){var d=[],E,a,c={},s,i=false,C={},A,t=[],o={home:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"home"}},app:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"app"}}};this.init=function(b){E=b;};this.processDangling=function(){var D,b;for(D=0;D<d.length;D++){b=d.pop();b.func.apply(this,b.args);}};this.setDangling=function(I){i=I;};this.calculateElementsState=function(n,b,e,f){var N=!!o[n]?o[n]:o.default,g=!!N[f?undefined:b]?N[b]:N.default,h=!!g[e]?g[e]:g.default;return h;};this.createCustomShellState=function(S){var b={"currentState":{"stateName":S,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}},e={"home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn"]},"app":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"minimal":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"standalone":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded-home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"lean":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]}},f=e[S];if(f){jQuery.extend(b.currentState,f);}return b;};this.createExtendedShellState=function(S,f){var b,e=this.createCustomShellState(S);b=a.extendedShellStates;if(b[S]){return false;}s=e;f();if(b[S]){b[S].customState=e;}else{b[S]={managedObjects:[],customState:e};}s=a.customShellState;return true;};this.assignNew=function(S){c=this.createCustomShellState(S);a.customShellState=c;a.aTriggers=[];a.extendedShellStates={};a.oCheckPoints={};this._updateModel();s=a.customShellState;};this._genericSetItem=function(b,v){var e=b.split("/");var l=e.pop();var L=e.reduce(function(f,m){return f[m];},s.currentState);L[l]=v;E._renderShellState();};this._genericAddItems=function(b,I,e){var f=s.currentState[b];if(!!e){s.currentState[b]=I.concat(f);}else{s.currentState[b]=f.concat(I);}E._renderShellState();};this.genericSetItem=function(b,v){if(i){d.push({func:this._genericSetItem,args:arguments});}else{this._genericSetItem(b,v);}};this.genericAddItems=function(b,I,e){if(i){d.push({func:this.genericAddItems,args:arguments});}else{this._genericAddItems(b,I,e);}};this.setShellModelForApplications=function(b,v){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(b)>-1){this.genericSetItem(b,v);}else{jQuery.sap.log.error("Not a valid attribute:"+b);}};this.addShellModelForApplications=function(b,I,e){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(b)>-1){this.genericAddItems(b,I,e);}else{jQuery.sap.log.error("Not a valid attribute:"+b);}};this.setStateModelToUpdate=function(I){s=I;};this.getStateModelToUpdate=function(){return s;};this.model=function(){if(!a){this.create();}A={customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};return A;};this._updateModel=function(){if(A){A.customShellState=a.customShellState;A.aTriggers=a.aTriggers;A.extendedShellStates=a.extendedShellStates;A.oCheckPoints=a.oCheckPoints;}};this.getAppRelatedElement=function(){return{customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};};this.create=function(){a={extendedShellStates:{},oCheckPoints:C,aTriggers:t,customShellState:{"currentState":{"stateName":"app","headEndItems":[],"paneContent":[],"headItems":[],"actions":["aboutBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}}};s=a.customShellState;this._updateModel();return a;};this.restore=function(S){if(S&&S.appRelatedElements){var b=S.appRelatedElements;a.aTriggers=b.aTriggers;a.extendedShellStates=b.extendedShellStates;a.oCheckPoints=b.oCheckPoints;a.customShellState=b.customShellState;}this._updateModel();s=a.customShellState;};this.store=function(m){};this.clean=function(){a=undefined;};this.destroy=function(m){};}
return new R();},true);
sap.ui.predefine('sap/ushell/components/container/ApplicationContainer',["sap/ui/Device","sap/ushell/utils","sap/ushell/library","sap/m/MessagePopover","sap/ui/core/Component","sap/ui/core/ComponentContainer","sap/ui/core/Control","sap/ui/thirdparty/URI","sap/ushell/EventHub"],function(D,u,a,M,C,b,c,U,E){"use strict";var p="sap.ushell.components.container.",s=p+"ApplicationContainer",d="sap.ushell.Container.dirtyState.",l,S={"sap.ushell.services.CrossApplicationNavigation":{isTrustedPostMessageSourceFn:function(){return true;},oServiceCalls:{"hrefForExternal":{executeServiceCallFn:function(e){return new jQuery.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal(e.oMessageData.body.oArgs)).promise();}},"getSemanticObjectLinks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters,e.oMessageData.body.bIgnoreFormFactors,undefined,undefined,e.oMessageData.body.bCompactIntents);}},"isIntentSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(e.oMessageData.body.aIntents);}},"isNavigationSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported(e.oMessageData.body.aIntents);}},"backToPreviousApp":{executeServiceCallFn:function(e){sap.ushell.Container.getService("CrossApplicationNavigation").backToPreviousApp();return new jQuery.Deferred().resolve().promise();}},"historyBack":{executeServiceCallFn:function(e){sap.ushell.Container.getService("CrossApplicationNavigation").historyBack(e.oMessageData.body.iSteps);return new jQuery.Deferred().resolve().promise();}},"getAppStateData":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getAppStateData(e.oMessageData.body.sAppStateKey);}},"toExternal":{executeServiceCallFn:function(e){var P=u.clone(e.oMessageData.body.oArgs);var Q=(P||{}).params;var R=Q&&Q.hasOwnProperty("sap-system");if(R){if(u.isPlainObject(Q["sap-system"])){var T=Q["sap-system"];var V=Q["sap-system-src"];var W=typeof V==="string";if(!W){e.storeSapSystemData(T);}else{e.storeSapSystemData(T,V);Q["sap-system-src"]=V;}Q["sap-system"]=T.id;}else if(e.matchesLocalSid(Q["sap-system"])){delete Q["sap-system"];}}return new jQuery.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(P)).promise();}},"registerBeforeAppCloseEvent":{executeServiceCallFn:function(e){e.oContainer.setProperty("beforeAppCloseEvent",{enabled:true,params:e.oMessageData.body},true);return new jQuery.Deferred().resolve().promise();}}}},"sap.ushell.CrossApplicationNavigation":{isTrustedPostMessageSourceFn:function(){return true;},oServiceCalls:{"backToPreviousApp":{executeServiceCallFn:function(e){sap.ushell.Container.getService("CrossApplicationNavigation").backToPreviousApp();return new jQuery.Deferred().resolve().promise();}}}},"sap.ushell.ui5service.ShellUIService":{isTrustedPostMessageSourceFn:function(){return true;},oServiceCalls:{"setTitle":{executeServiceCallFn:function(e){return new jQuery.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},"setBackNavigation":{executeServiceCallFn:function(e){return e.executeSetBackNavigationService(e.oMessage,e.oMessageData);}}}},"sap.ushell.services.Container":{isTrustedPostMessageSourceFn:function(){return true;},oServiceCalls:{"setDirtyFlag":{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new jQuery.Deferred().resolve().promise();}},"getFLPUrl":{executeServiceCallFn:function(e){return new jQuery.Deferred().resolve(sap.ushell.Container.getFLPUrl()).promise();}}}}},r;
function f(T){var e=sap.ushell.Container.getService("CrossApplicationNavigation");e.isUrlSupported(T.url).done(function(){T.promise.resolve({"allowed":true,"id":T.id});}).fail(function(){T.promise.resolve({"allowed":false,"id":T.id});});}
function i(){var e={"asyncURLHandler":O.prototype._adaptIsUrlSupportedResultForMessagePopover};if(M&&M.setDefaultHandlers){M.setDefaultHandlers(e);}}
E.once("RendererExtensionPluginsLoaded").do(i);l=new u.Map();
function g(e){return l.get(e.getId());}
function h(e){var P=S[e.sService];if(P){Object.keys(e.oServiceCalls).forEach(function(R){P.oServiceCalls[R]=e.oServiceCalls[R];});return;}var Q={isTrustedPostMessageSourceFn:function(){return true;},oServiceCalls:{}};if(e.isTrustedPostMessageSourceFn){Q.isTrustedPostMessageSourceFn=e.isTrustedPostMessageSourceFn;}Object.keys(e.oServiceCalls).forEach(function(R){Q.oServiceCalls[R]=e.oServiceCalls[R];});S[e.sService]=Q;}
function j(){return S;}
function k(e){var P=jQuery.sap.getUriParameters(e).mParams,Q=P["sap-xapp-state"],R;delete P["sap-xapp-state"];R={startupParameters:P};if(Q){R["sap-xapp-state"]=Q;}return R;}
function m(e,P){if(!r){r=jQuery.sap.resources({url:jQuery.sap.getModulePath(p)+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});}return r.getText(e,P);}
function n(){return new sap.ui.core.Icon({size:"2rem",src:"sap-icon://error",tooltip:O.prototype._getTranslatedText("an_error_has_occured")});}
function o(e){var P=e.getAggregation("child"),Q;if(P instanceof b){Q=P.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");jQuery.sap.log.debug("unloading component "+Q,null,s);}e.destroyAggregation("child");}
function q(e,P,Q){var R,T,V,W,X,Y,Z,$={},_,a1;V=P.indexOf("?");if(V>=0){Y=O.prototype._getParameterMap(P);$=Y.startupParameters;P=P.slice(0,V);}if(P.slice(-1)!=='/'){P+='/';}if(/\.view\.(\w+)$/i.test(Q)){X=/^SAPUI5=(?:([^\/]+)\/)?([^\/]+)\.view\.(\w+)$/i.exec(Q);if(!X){jQuery.sap.log.error("Invalid SAPUI5 URL",Q,s);return O.prototype._createErrorControl();}Z=X[1];_=X[2];a1=X[3].toUpperCase();if(Z){_=Z+"."+_;}else{W=_.lastIndexOf(".");if(W<1){jQuery.sap.log.error("Missing namespace",Q,s);return O.prototype._createErrorControl();}Z=_.slice(0,W);}}else{Z=Q.replace(/^SAPUI5=/,"");}jQuery.sap.registerModulePath(Z,P+Z.replace(/\./g,'/'));O.prototype._destroyChild(e);if(_){if(e.getApplicationConfiguration()){$.config=e.getApplicationConfiguration();}T=sap.ui.view({id:e.getId()+"-content",type:a1,viewData:$||{},viewName:_});e.fireEvent("applicationConfiguration");}else{jQuery.sap.log.debug("loading component "+Z,null,s);var b1=Y?{startupParameters:Y.startupParameters}:{startupParameters:{}};if(Y&&Y["sap-xapp-state"]){b1["sap-xapp-state"]=Y["sap-xapp-state"];}if(e.getApplicationConfiguration()){b1.config=e.getApplicationConfiguration();}R=sap.ui.component({id:e.getId()+"-component",componentData:b1,name:Z});e.fireEvent("applicationConfiguration",{"configuration":R.getMetadata().getConfig()});T=new b({id:e.getId()+"-content",component:R});}T.setWidth(e.getWidth());T.setHeight(e.getHeight());T.addStyleClass("sapUShellApplicationContainer");e.setAggregation("child",T,true);return T;}
function t(e,P){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell",e,P);},0);}
function v(e,P,Q){var R,T,V,W,X={startupParameters:{}},Y,Z=e.getComponentHandle(),$=sap.ushell.Container.getService("PluginManager"),_,a1;u.addTime("createUi5Component");R=P.indexOf("?");if(R>=0){W=O.prototype._getParameterMap(P);X={startupParameters:W.startupParameters};if(W["sap-xapp-state"]){X["sap-xapp-state"]=W["sap-xapp-state"];}P=P.slice(0,R);}if(e.getApplicationConfiguration()){X.config=e.getApplicationConfiguration();}if(P.slice(-1)!=='/'){P+='/';}O.prototype._destroyChild(e);Y={id:e.getId()+"-component",name:Q,componentData:X};jQuery.sap.log.debug("Creating component instance for "+Q,JSON.stringify(Y),s);sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:Q});if(Z){T=Z.getInstance(Y);}else{jQuery.sap.registerModulePath(Q,P);jQuery.sap.log.error("No component handle available for '"+Q+"'; fallback to component.load()",null,s);T=sap.ui.component({id:e.getId()+"-component",name:Q,componentData:X});}e.fireEvent("applicationConfiguration",{"configuration":T.getMetadata().getConfig()});V=new b({id:e.getId()+"-content",component:T});V.setHeight(e.getHeight());V.setWidth(e.getWidth());V.addStyleClass("sapUShellApplicationContainer");e._disableRouterEventHandler=O.prototype._disableRouter.bind(this,T);sap.ui.getCore().getEventBus().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",e._disableRouterEventHandler);e.setAggregation("child",V,true);if($){_=$.getPluginLoadingPromise("RendererExtensions");a1=_&&_.state();if(a1==="pending"){_.done(function(){O.prototype._publishExternalEvent("appComponentLoaded",{component:T});}).fail(function(){O.prototype._publishExternalEvent("appComponentLoaded",{component:T});});}if(a1==="resolved"||a1==="rejected"){O.prototype._publishExternalEvent("appComponentLoaded",{component:T});}}O.prototype._publishExternalEvent("appComponentLoaded",{component:T});return V;}
function w(e){var P;if((e instanceof C)&&(typeof e.getRouter==="function")){P=e.getRouter();if(P&&(typeof P.stop==="function")){jQuery.sap.log.info("router stopped for instance "+e.getId());P.stop();}}}
function x(e){var P=document.createElement("a"),Q=jQuery.sap.getUriParameters(e).get("sap-client"),R;P.href=e;R=P.protocol+"//"+P.host;return new sap.ushell.System({alias:Q?R+"?sap-client="+Q:R,baseUrl:R,client:Q||undefined,platform:"abap"});}
function y(e,P){var T=false,Q=e.getDomRef(),R=e.getApplicationType(),V,W;if(Q){if(u.isApplicationTypeEmbeddedInIframe(R)){V=U(Q.src||window.location&&window.location.href||'');W=V.protocol()+"://"+V.host();T=(P.source===Q.contentWindow)||(P.origin===W);}else if(R===sap.ushell.components.container.ApplicationType.URL){V=U();W=V.protocol()+"://"+V.host();T=(P.origin===W);}}return T;}
function z(e,P,Q){var R=JSON.stringify({type:"request",service:P,request_id:jQuery.sap.uid(),body:{}});jQuery.sap.log.debug("Sending post message request to origin ' "+Q+"': "+R,null,"sap.ushell.components.container.ApplicationContainer");e.postMessage(R,Q);}
function A(){var e=this.getDomRef();if(!e||e.tagName!=="IFRAME"){return null;}return e;}
function B(P,Q,R){var T=jQuery.sap.getObject("sap-ushell-config.services.PostMessage.config",0),V=R&&R.service,W,X,Y,Z,$=false;jQuery.sap.log.debug("Received post message request from origin '"+Q.origin+"': "+JSON.stringify(R),null,"sap.ushell.components.container.ApplicationContainer");if(R.type!=="request"||!V){return;}for(var _ in S){if(S.hasOwnProperty(_)){if(V.indexOf(_)!==-1){X=S[_];Y=_;$=true;break;}}}if($===false){return;}W=V.split(".")[3];if(T&&T.enabled===false){jQuery.sap.log.warning("Received message for "+W+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return;}if(!O.prototype._isTrustedPostMessageSource(P,Q)||!X.isTrustedPostMessageSourceFn(P,Q)){jQuery.sap.log.warning("Received message from untrusted origin '"+Q.origin+"': "+JSON.stringify(Q.data),null,"sap.ushell.components.container.ApplicationContainer");return;}function a1(e,h1){var i1=JSON.stringify({type:"response",service:R.service,request_id:R.request_id,status:e,body:h1});jQuery.sap.log.debug("Sending post message response to origin ' "+Q.origin+"': "+i1,null,"sap.ushell.components.container.ApplicationContainer");if(typeof Q.source!=="object"||Q.source===null){jQuery.sap.log.debug("Cannot send response message to origin ' "+Q.origin,"`source` member of request message is not an object","sap.ushell.components.container.ApplicationContainer");return;}Q.source.postMessage(i1,Q.origin);}function b1(Q,R){var e=new jQuery.Deferred(),h1;if(R.body&&R.body.callbackMessage&&R.body.callbackMessage.service){h1=O.prototype._backButtonPressedCallback.bind(null,Q.source,R.body.callbackMessage.service,Q.origin);}e.resolve(P.getShellUIService().setBackNavigation(h1));return e.promise();}function c1(h1,i1){var j1,k1,l1,m1=[h1.id];if(arguments.length>1){m1.unshift(i1);}try{l1=JSON.stringify(h1);}catch(e){jQuery.sap.log.error("Cannot stringify and store expanded system data: "+e);}if(l1){k1=u.getLocalStorage();j1=u.generateLocalStorageKey("sap-system-data",m1);k1.setItem(j1,l1);}}function d1(){var e=sap.ushell.Container.getLogonSystem();var h1=e.getName();var i1=e.getClient();return"sid("+h1+"."+i1+")";}function e1(e){return d1().toLowerCase()===e.toLowerCase();}var f1={matchesLocalSid:e1,getLocalSystemInSidForma:d1,storeSapSystemData:c1,executeSetBackNavigationService:b1,sendResponseMessage:a1,oMessage:Q,oMessageData:R,oContainer:P,oAppIsolationService:P.getAppIsolationService()};try{Z=X.oServiceCalls[R.service.replace(Y+".","")];if(Z&&Z.executeServiceCallFn){Z.executeServiceCallFn(f1).done(function(e){a1("success",{result:e});}).fail(function(e){a1("error",{message:e});});}else{a1("error",{message:"Unknown service name: '"+R.service+"'"});}}catch(g1){a1("error",{message:g1.message});}}
function F(P,Q){var R=P.getUi5ComponentName&&P.getUi5ComponentName(),T=Q.data;if(typeof T==="string"){try{T=JSON.parse(Q.data);}catch(e){jQuery.sap.log.debug("Message received from origin '"+Q.origin+"' cannot be parsed: "+e,T,"sap.ushell.components.container.ApplicationContainer");return;}}if(typeof R==="string"&&P.getIsolated()!==true){jQuery.sap.log.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(T)+"' on container of UI5 application '"+R+"'","Only non UI5 application containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}if(!P.getActive()){jQuery.sap.log.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(T)+"' on inactive container '"+P.getId()+"'","Only active containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}if(T.action==="pro54_setGlobalDirty"&&localStorage.getItem(P.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!O.prototype._isTrustedPostMessageSource(P,Q)){jQuery.sap.log.warning("Received message from untrusted origin: "+Q.origin,T,"sap.ushell.components.container.ApplicationContainer");return;}jQuery.sap.log.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+P.globalDirtyStorageKey+" value: "+T.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");u.localStorageSetItem(P.globalDirtyStorageKey,T.parameters.globalDirty,true);}else{O.prototype._handleServiceMessageEvent(P,Q,T);}}
function G(e,P){var Q=e._getIFrame(),R=e.getApplicationType();if(u.isApplicationTypeEmbeddedInIframe(e.getApplicationType(R))&&Q){Q.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),"*");P.preventDefault();}}
function H(R,e,P){R.write("<div").writeControlData(e).writeAccessibilityState(e).addClass("sapUShellApplicationContainer").writeClasses(e).addStyle("height",e.getHeight()).addStyle("width",e.getWidth()).writeStyles().write(">").renderControl(P);R.write("</div>");}
function I(P,Q){var R=Q==="TR"?"":"-NWBC";var V,T=function(){var V,W;try{V=sap.ui.getVersionInfo().version;}catch(e){jQuery.sap.log.error("sap ui version could not be determined, using sap.ui.version (core version) as fallback "+e);V=window.sap&&sap.ui&&sap.ui.version;}W=/\d+\.\d+\.\d+/.exec(V);if(W&&W[0]){V=W[0];}else{V=undefined;}return V;};V=T();if(V){P+=P.indexOf("?")>=0?"&":"?";P+="sap-shell="+encodeURIComponent("FLP"+V+R);}return P;}
function J(e,P,T,R){var Q,V=function(){var Y=u.getParameterValueBoolean("sap-accessibility");if(Y!==undefined){return Y;}return sap.ushell.Container.getUser().getAccessibilityMode();},W=function(){var Y=jQuery.sap.getUriParameters(e)||{mParams:{}};if(Y.mParams["sap-theme"]===undefined){return sap.ushell.Container.getUser().getTheme(sap.ushell.User.prototype.constants.themeFormat.NWBC);}return undefined;},X=function(){var Y=false,Z=jQuery.sap.getUriParameters(e)||{mParams:{}};Y=sap.ui.getCore().getConfiguration().getStatistics()&&!Z.mParams.hasOwnProperty("sap-statistics");return Y;};e+=e.indexOf("?")>=0?"&":"?";e+="sap-ie=edge";Q=W();if(Q){e+=e.indexOf("?")>=0?"&":"?";e+="sap-theme="+encodeURIComponent(Q);}if(T){e+=e.indexOf("?")>=0?"&":"?";e+="sap-target-navmode="+encodeURIComponent(T);}if(V()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-accessibility=X";}if(X()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-statistics=true";}if(R){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=1";}return I(e,P);}
function K(R,e,P,Q){var T=e.getAggregation("child");if(!T||e._bRecreateChild){T=O.prototype._createUi5Component(e,P,Q);e._bRecreateChild=false;}O.prototype._renderControlInDiv(R,e,T);}
function L(e,P,V){var Q=e.getProperty(P);if(jQuery.sap.equal(Q,V)){return;}e.setProperty(P,V);e._bRecreateChild=true;}
function N(R,e,P,Q,T){var V;localStorage.removeItem(e.globalDirtyStorageKey);if(T&&T.indexOf("SAPUI5.Component=")===0&&P===sap.ushell.components.container.ApplicationType.URL&&!!!e.getIsolated()){K(R,e,Q,T.replace(/^SAPUI5\.Component=/,""));return;}if(T&&T.indexOf("SAPUI5=")===0&&P===sap.ushell.components.container.ApplicationType.URL&&!!!e.getIsolated()){O.prototype._renderControlInDiv(R,e,O.prototype._createUi5View(e,Q,T));return;}jQuery.sap.log.debug("Not resolved as \"SAPUI5.Component=\" or \"SAPUI5=\" , "+"will attempt to load into iframe "+T);if(!e.getActive()){jQuery.sap.log.debug("Skipping rendering container iframe","Container '"+e.getId()+"' is inactive");return;}try{if(!!!e.getIsolated()){Q=e.getFrameSource(P,Q,T);}else{Q=e.getIframeUrl();}}catch(W){jQuery.sap.log.error(W.message||W,null,s);e.fireEvent("applicationConfiguration");R.renderControl(O.prototype._createErrorControl());return;}if(sap.ushell.Container){V=O.prototype._getLogoutHandler(e);if(!V){if(u.isApplicationTypeEmbeddedInIframe(P)){V=O.prototype._logout.bind(null,e);l.put(e.getId(),V);sap.ushell.Container.attachLogoutEvent(V);sap.ushell.Container.addRemoteSystem(O.prototype._createSystemForUrl(Q));}}else if(!u.isApplicationTypeEmbeddedInIframe(P)){sap.ushell.Container.detachLogoutEvent(V);l.remove(e.getId());}}if(u.isApplicationTypeEmbeddedInIframe(P)||!!e.getIsolated()){var X=(!!e.getIsolated()?"inplace":e.getTargetNavigationMode());if(!!!e.getIsolated()){Q=O.prototype._adjustNwbcUrl(Q,P,X,e.getIsStateful());}u.localStorageSetItem(e.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL);}e.fireEvent("applicationConfiguration");R.write("<iframe").writeControlData(e).writeAccessibilityState(e).writeAttributeEscaped("src",Q).addClass("sapUShellApplicationContainer").writeClasses(e).addStyle("height",e.getHeight()).addStyle("width",e.getWidth()).writeStyles().write("></iframe>");}
var O=c.extend(s,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationConfiguration:{type:"object"},applicationType:{defaultValue:"URL",type:p+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},navigationMode:{defaultValue:"",type:"string"},targetNavigationMode:{defaultValue:"",type:"string"},text:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},active:{defaultValue:true,type:"boolean"},"sap-system":{defaultValue:undefined,type:"string"},applicationDependencies:{type:"object"},componentHandle:{type:"object"},ui5ComponentName:{type:"string"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},shellUIService:{type:"object"},appIsolationService:{type:"object"},reservedParameters:{type:"object"},coreResourcesFullyLoaded:{type:"boolean"},isStateful:{defaultValue:false,type:"boolean"},isolated:{defaultValue:false,type:"boolean"},iframeUrl:{defaultValue:"",type:"string"},appLifeCycle:{type:"object"},iframeHandlers:{defaultValue:"",type:"string"},beforeAppCloseEvent:{type:"object"}},events:{"applicationConfiguration":{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell",designtime:"sap/ushell/designtime/ApplicationContainer.designtime"},exit:function(){var e,P=this;if(sap.ushell.Container){e=O.prototype._getLogoutHandler(P);if(e){sap.ushell.Container.detachLogoutEvent(e);l.remove(P.getId());}}localStorage.removeItem(P.globalDirtyStorageKey);if(P._unloadEventListener){removeEventListener("unload",P._unloadEventListener);}if(P._disableRouterEventHandler){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",P._disableRouterEventHandler);}if(P._storageEventListener){removeEventListener("storage",P._storageEventListener);}if(P._messageEventListener){removeEventListener("message",P._messageEventListener);}O.prototype._destroyChild(P);if(c.exit){c.exit.apply(P);}},init:function(){var e=this;e.globalDirtyStorageKey=d+jQuery.sap.uid();e._unloadEventListener=e.exit.bind(e);addEventListener("unload",e._unloadEventListener);e._storageEventListener=function(P){var Q=e.getApplicationType();if(P.key===e.globalDirtyStorageKey&&P.newValue===sap.ushell.Container.DirtyState.PENDING&&u.isApplicationTypeEmbeddedInIframe(Q)){var R=e._getIFrame();if(R){jQuery.sap.log.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");R.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),'*');}}};addEventListener('storage',e._storageEventListener);e._messageEventListener=O.prototype._handleMessageEvent.bind(null,e);addEventListener('message',e._messageEventListener);},onAfterRendering:function(e){if(this.getIsStateful()){this.rerender=function(){};}if(D.os.ios&&this.$().prop("tagName")==="IFRAME"){this.$().parent().css("overflow","auto");}},renderer:function(R,e){var P=e.getApplication(),Q=e.launchpadData,T;if(!e.getVisible()){O.prototype._renderControlInDiv(R,e);return;}if(e.error){delete e.error;O.prototype._renderControlInDiv(R,e,O.prototype._createErrorControl());}else if(!P){O.prototype._render(R,e,e.getApplicationType(),e.getUrl(),e.getAdditionalInformation());}else if(!P.isResolvable()){O.prototype._render(R,e,P.getType(),P.getUrl(),"");}else if(Q){O.prototype._render(R,e,Q.applicationType,Q.Absolute.url.replace(/\?$/,""),Q.applicationData);}else{jQuery.sap.log.debug("Resolving "+P.getUrl(),null,s);P.resolve(function(V){jQuery.sap.log.debug("Resolved "+P.getUrl(),JSON.stringify(V),s);e.launchpadData=V;O.prototype._destroyChild(e);},function(V){var W=P.getMenu().getDefaultErrorHandler();if(W){W(V);}O.prototype._destroyChild(e);e.error=V;});T=new sap.m.Text({text:O.prototype._getTranslatedText("loading",[P.getText()])});O.prototype._destroyChild(e);e.setAggregation("child",T);O.prototype._renderControlInDiv(R,e,T);}}});
O.prototype.getFrameSource=function(e,P,Q){if(!Object.prototype.hasOwnProperty.call(sap.ushell.components.container.ApplicationType,e)){throw new Error("Illegal application type: "+e);}return P;};
O.prototype.setUrl=function(V){L(this,"url",V);};
O.prototype.setAdditionalInformation=function(V){L(this,"additionalInformation",V);};
O.prototype.setApplicationType=function(V){L(this,"applicationType",V);};
O.prototype.createPostMessageRequest=function(e,P){var R=Date.now().toString();return{"type":"request","request_id":R,"service":e,"body":P};};
O.prototype.registerShellCommunicationHandler=function(e){var P=this;if(Array.isArray(e)){e.forEach(function(Q){P._addShellCommunicationHandler(Q);});}else{this._addShellCommunicationHandler(e);}};
O.prototype.setNewTRApplicationContext=function(e){var P=this._getIFrame();if(!P){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}e=I(e);var R=this.createPostMessageRequest("sap.its.startService",{"url":e});return this.postMessageToIframe(R,P,true).catch(function(Q){return Promise.reject({eventData:Q,message:"Failed to change application context."});});};
O.prototype.postMessageToIframe=function(P,Q,W){var R=this;var T=P.request_id;return new Promise(function(V,X){function Y($){var _;try{_=JSON.parse($.data);if(T!==_.request_id){return;}if("success"===_.status){V(_);}else{X(_);}window.removeEventListener("message",Y);}catch(e){V();jQuery.sap.log.warning("Obtained bad response from framework in response to message "+P.request_id);jQuery.sap.log.debug("Underlying framework returned invalid response data: '"+$.data+"'");}}var Z=JSON.stringify(P);jQuery.sap.log.debug("Sending postMessage "+Z+" to application container '"+R.getId()+"'");if(W){window.addEventListener("message",Y,false);Q.contentWindow.postMessage(Z,"*");}else{Q.contentWindow.postMessage(Z,"*");V();}});};
O.prototype.setNewApplicationContext=function(e,P){var Q=this;var R=this["setNew"+e+"ApplicationContext"];if(!R){return Promise.reject({message:"Unsupported application type"});}var T=this._getIFrame();if(!T){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var V=this.createPostMessageRequest("sap.gui.triggerCloseSessionImmediately",{});return this.postMessageToIframe(V,T,true).then(function(){return R.call(Q,P);},function(W){return Promise.reject({eventData:W,message:"Failed to change application context."});});};
O.prototype.onApplicationOpened=function(e){var P=this.getIsStateful();if(!P){return Promise.resolve();}var Q=this.getApplicationType();if(Q==="TR"&&e!=="TR"){var R=this._getIFrame();if(!R){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var T=this.createPostMessageRequest("sap.gui.triggerCloseSession",{});return this.postMessageToIframe(T,R,false).catch(function(V){return Promise.reject({eventData:V,message:"Failed to change application context."});});}return Promise.resolve();};
O.prototype.postMessageRequest=function(e){var P=this._getIFrame();if(!P){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var R=this.createPostMessageRequest(e,{});return this.postMessageToIframe(R,P,false).catch(function(Q){return Promise.reject({eventData:Q,message:"Failed to post message."});});};
O.prototype.sendBeforeAppCloseEvent=function(){var e=this.getBeforeAppCloseEvent&&this.getBeforeAppCloseEvent(),R;if(e&&e.enabled&&e.enabled===true){R=this.createPostMessageRequest("sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent",e.params);return this.postMessageToIframe(R,this._getIFrame(),true);}else{return undefined;}};
O.prototype._addShellCommunicationHandler=h;O.prototype._getCommunicationHandlers=j;O.prototype._adaptIsUrlSupportedResultForMessagePopover=f;O.prototype._getLogoutHandler=g;O.prototype._getParameterMap=k;O.prototype._getTranslatedText=m;O.prototype._createErrorControl=n;O.prototype._destroyChild=o;O.prototype._createUi5View=q;O.prototype._publishExternalEvent=t;O.prototype._createUi5Component=v;O.prototype._disableRouter=w;O.prototype._createSystemForUrl=x;O.prototype._isTrustedPostMessageSource=y;O.prototype._handleServiceMessageEvent=B;O.prototype._handleMessageEvent=F;O.prototype._logout=G;O.prototype._renderControlInDiv=H;O.prototype._adjustNwbcUrl=J;O.prototype._render=N;O.prototype._backButtonPressedCallback=z;O.prototype._getIFrame=A;return O;},true);
sap.ui.predefine('sap/ushell/components/factsheet/Component',['sap/ui/core/UIComponent'],function(U){"use strict";
var C=U.extend("sap.ushell.components.factsheet.Component",{
oMainView:null,
metadata:{version:"1.60.40",library:"sap.ushell.components.factsheet",dependencies:{libs:["sap.m","sap.ui.vbm","sap.suite.ui.commons","sap.ui.layout","sap.viz"],components:[]}},
createContent:function(){var c=this.getComponentData();var s=(c&&c.startupParameters)||{};this.oMainView=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.factsheet.views.ThingViewer",viewData:s,height:"100%"}).addStyleClass("ThingViewer");return this.oMainView;},
exit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId());},
onExit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId());}
});
jQuery.sap.setObject("factsheet.Component",C);return C;});
sap.ui.predefine('sap/ushell/components/factsheet/annotation/Mapping',function(){"use strict";var M={};M.initialized=[];
M.parse=function(m,a){var x={},g,b,s,c,d,r,e,f,h,n,o,A,q={},t,u,S={},i,v,w={},y={},z="",B,C,D,E,F,G,H,T,I,J,K,L,N,j,O,P,Q,R,U,V,W,X,Y,Z,$,_,a1,b1,c1,d1,e1,f1,g1;if(sap.ui.Device.browser.internet_explorer){x={setNameSpace:function(k){k.setProperty("SelectionNamespaces",'xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" xmlns:d="http://docs.oasis-open.org/odata/ns/edm"');k.setProperty("SelectionLanguage","XPath");return k;},selectNodes:function(k,x,l){return l.selectNodes(x);},nextNode:function(k){return k.nextNode();},getNodeText:function(k){return k.text;}};}else{x={setNameSpace:function(k){return k;},nsResolver:function(p){var k={"edmx":"http://docs.oasis-open.org/odata/ns/edmx","d":"http://docs.oasis-open.org/odata/ns/edm"};return k[p]||null;},selectNodes:function(k,p,l){var h1=k.evaluate(p,l,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);h1.length=h1.snapshotLength;return h1;},nextNode:function(k,l){return k.snapshotItem(l);},getNodeText:function(k){return k.textContent;}};}g=function(k){var l;if(sap.ui.Device.browser.internet_explorer){l=new ActiveXObject("Microsoft.XMLHTTP");l.open("GET",k,false);l.send(null);return l.responseXML;}else{l=jQuery.sap.sjax({url:k,dataType:"xml"});if(l.success){return l.data;}}};b=function(m){var h1={},i1={},j1={},k1=false,i,l1,m1,n1,o1={},j,p1={},q1={},r1=false,s1,l,k,t1,u1,v1,w1,p,x1;for(i=m.dataServices.schema.length-1;i>=0;i-=1){h1=m.dataServices.schema[i];if(h1.entityType){l1=h1.namespace;m1=h1.entityType;n1=h1.complexType;for(j in m1){if(m1.hasOwnProperty(j)){o1=m1[j];q1={};if(o1.hasStream&&o1.hasStream==="true"){continue;}p1={};for(k in o1.property){s1=o1.property[k];if(s1.type.substring(0,l1.length)===l1){for(l in n1){if(n1[l].name===s1.type.substring(l1.length+1)){for(k in n1[l].property){t1=n1[l].property[k];p1[n1[l].name+"/"+t1.name]=t1.type;}}}}else{u1=s1.name;v1=s1.type;for(p in s1.extensions){w1=s1.extensions[p];if((w1.name==="display-format")&&(w1.value==="Date")){v1="Edm.Date";}else{r1=true;if(!q1[u1]){q1[u1]={};}if(w1.namespace&&!q1[u1][w1.namespace]){q1[u1][w1.namespace]={};}q1[u1][w1.namespace][w1.name]=w1.value;}}p1[u1]=v1;}}if(!i1[l1+"."+o1.name]){i1[l1+"."+o1.name]={};}i1[l1+"."+o1.name]=p1;if(r1){if(!j1[l1+"."+o1.name]){k1=true;}j1[l1+"."+o1.name]={};j1[l1+"."+o1.name]=q1;}}}}}if(k1){x1={types:i1,extensions:j1};}else{x1={types:i1};}return x1;};s=function(p,k,l,S){var h1,i1,j1='';for(h1 in p){if(p.hasOwnProperty(h1)){if(p[h1]){i1=p[h1];if(i1.Value&&i1.Value.Path){j1=c(i1.Value.Path,k,l,S);if(j1){p[h1].EdmType=j1;}continue;}if(i1.Path){j1=c(i1.Path,k,l,S);if(j1){p[h1].EdmType=j1;}continue;}if(i1.Facets){p[h1].Facets=s(i1.Facets,k,l,S);continue;}if(i1.Data){p[h1].Data=s(i1.Data,k,l,S);continue;}if(h1==="Data"){p.Data=s(i1,k,l,S);continue;}if(i1.Value&&i1.Value.Apply){p[h1].Value.Apply.Parameters=s(i1.Value.Apply.Parameters,k,l,S);continue;}if(i1.Value&&i1.Type&&(i1.Type==="Path")){j1=c(i1.Value,k,l,S);if(j1){p[h1].EdmType=j1;}}}}}return p;};c=function(p,k,l,S){var h1;if((p.charAt(0)==="@")&&(p.indexOf(S.Alias)===1)){p=p.slice(S.Alias.length+2);}if(p.indexOf("/")>=0){if(k[p.slice(0,p.indexOf("/"))]){l=p.slice(0,p.indexOf("/"));p=p.slice(p.indexOf("/")+1);}}for(h1 in k[l]){if(k[l].hasOwnProperty(h1)){if(p===h1){return k[l][h1];}}}};d=function(k){var l="",p="",i,h1={};for(i=0;i<k.attributes.length;i+=1){if((k.attributes[i].name!=="Property")&&(k.attributes[i].name!=="Term")){l=k.attributes[i].name;p=k.attributes[i].value;}}if(l.length>0){h1[l]=r(p);}return h1;};e=function(t,k){var l={},p,h1,i1,j1,k1,l1;if(k.hasChildNodes()){p=x.selectNodes(t,"./d:String",k);if(p.length>0){h1=x.nextNode(p,0);l["String"]=x.getNodeText(h1);}else{i1=x.selectNodes(t,"./d:Path",k);if(i1.length>0){j1=x.nextNode(i1,0);l["Path"]=x.getNodeText(j1);}else{k1=x.selectNodes(t,"./d:Apply",k);if(k1.length>0){l1=x.nextNode(k1,0);l["Apply"]=n(t,l1);}}}}return l;};f=function(t,k,l){var p={},h1,i1,I,j1,k1,l1,m1,n1,o1={},N,O,X,p1,q1;if(k.hasChildNodes()){h1=x.selectNodes(t,"./d:Record | ./d:Collection/d:Record | ./d:Collection/d:If/d:Record",k);if(h1.length){i1=0;for(I=0;I<h1.length;I+=1){j1=x.nextNode(h1,I);k1=h(t,j1,l);if(j1.getAttribute("Type")){k1["RecordType"]=r(j1.getAttribute("Type"));}if(i1===0){if(j1.nextElementSibling||(j1.parentNode.nodeName==="Collection")||(j1.parentNode.nodeName==="If")){p=[];p.push(k1);}else{p=k1;}}else{p.push(k1);}i1+=1;}}else{l1=x.selectNodes(t,"./d:UrlRef",k);if(l1.length>0){for(I=0;I<l1.length;I+=1){m1=x.nextNode(l1,I);p["UrlRef"]=e(t,m1);}}else{l1=x.selectNodes(t,"./d:Url",k);if(l1.length>0){for(I=0;I<l1.length;I+=1){m1=x.nextNode(l1,I);p["Url"]=e(t,m1);}}else{q1=x.selectNodes(t,"./d:Collection/d:AnnotationPath | ./d:Collection/d:PropertyPath",k);if(q1.length>0){p=[];for(I=0;I<q1.length;I+=1){n1=x.nextNode(q1,I);o1={};o1[n1.nodeName]=x.getNodeText(n1);p.push(o1);}}else{p=d(k);N=x.selectNodes(t,"./d:Annotation",k);O={};for(X=0;X<N.length;X+=1){O=x.nextNode(N,X);if(O.hasChildNodes()===false){p1=r(O.getAttribute("Term"));p[p1]=d(O);}}}}}}}else{p=d(k);}return p;};h=function(t,k,l){var p={},O={},N,X,h1,i1,I,j1,k1,l1,m1,n1;N=x.selectNodes(t,"./d:Annotation",k);for(X=0;X<N.length;X+=1){O=x.nextNode(N,X);if(O.hasChildNodes()===false){h1=r(O.getAttribute("Term"));p[h1]=d(O);}}i1=x.selectNodes(t,"./d:PropertyValue",k);if(i1.length>0){for(I=0;I<i1.length;I+=1){j1=x.nextNode(i1,I);k1=j1.getAttribute("Property");p[k1]=f(t,j1,l);l1=x.selectNodes(t,"./d:Apply",j1);m1=null;for(n1=0;n1<l1.length;n1+=1){m1=x.nextNode(l1,n1);if(m1){p[k1]={};p[k1]['Apply']=n(t,m1);}}}}else{p=f(t,k,l);}return p;};n=function(t,k){var l={},p,h1=null,i1=[],i;p=x.selectNodes(t,"./d:*",k);for(i=0;i<p.length;i+=1){h1=x.nextNode(p,i);switch(h1.nodeName){case"Apply":i1.push({"Type":"Apply","Value":n(t,h1)});break;case"LabeledElement":i1.push({"Name":h1.getAttribute("Name"),"Value":e(t,h1)});break;default:i1.push({"Type":h1.nodeName,"Value":x.getNodeText(h1)});break;}}l['Name']=k.getAttribute('Function');l['Parameters']=i1;return l;};o=function(l,p,h1){var i1,i,j1,k1,j,k;for(i=m.dataServices.schema.length-1;i>=0;i-=1){i1=m.dataServices.schema[i];if(i1.entityType){j1=i1.namespace+".";k1=i1.entityType;for(k=k1.length-1;k>=0;k-=1){if(j1+k1[k].name===l&&k1[k].navigationProperty){for(j=0;j<k1[k].navigationProperty.length;j+=1){if(k1[k].navigationProperty[j].name===p){return true;}}}}}}return false;};r=function(k){for(A in w){if(w.hasOwnProperty(A)){if(k.indexOf(A+".")>=0){k=k.replace(A+".",w[A]+".");return k;}}}return k;};if(this.initialized[a]){return this.initialized[a];}t=g(a);t=x.setNameSpace(t);u=x.selectNodes(t,"//d:Schema",t);for(i=0;i<u.length;i+=1){v=x.nextNode(u,i);S.Alias=v.getAttribute("Alias");S.Namespace=v.getAttribute("Namespace");}B=x.selectNodes(t,"//edmx:Reference",t);for(i=0;i<B.length;i+=1){C=x.nextNode(B,i);D=x.selectNodes(t,"./edmx:Include",C);if(D&&D.length>0){E=x.nextNode(D,0);if(E.getAttribute("Alias")){w[E.getAttribute("Alias")]=E.getAttribute("Namespace");}else{w[E.getAttribute("Namespace")]=E.getAttribute("Namespace");}}F=x.selectNodes(t,"./edmx:IncludeAnnotations",C);if(F.length>0){for(j=0;j<F.length;j+=1){G=x.nextNode(F,j);if(G.getAttribute("TargetNamespace")){z=G.getAttribute("TargetNamespace");if(!y[z]){y[z]={};}y[z][G.getAttribute("TermNamespace")]=C.getAttribute("Uri");}else{y[G.getAttribute("TermNamespace")]=C.getAttribute("Uri");}}}}if(y){q.annotationReferences=y;}q.aliasDefinitions=w;H=x.selectNodes(t,"//d:Term",t);if(H.length>0){T={};for(I=0;I<H.length;I+=1){J=x.nextNode(H,I);K=r(J.getAttribute("Type"));T["@"+S.Alias+"."+J.getAttribute("Name")]=K;}q.termDefinitions=T;}L=b(m);if(L.extensions){q.propertyExtensions=L.extensions;}N=x.selectNodes(t,"//d:Annotations ",t);for(I=0;I<N.length;I+=1){O=x.nextNode(N,I);if(O.hasChildNodes()===false){continue;}P=O.getAttribute("Target");Q=P.split(".")[0];if(Q&&w[Q]){P=P.replace(new RegExp(Q,""),w[Q]);}R=P;U=null;if(P.indexOf("/")>0){R=P.split("/")[0];U=P.replace(R+"/","");}if(!q[R]){q[R]={};}if(U){if(!q.propertyAnnotations){q.propertyAnnotations={};}if(!q.propertyAnnotations[R]){q.propertyAnnotations[R]={};}q.propertyAnnotations[R][U]={};V=x.selectNodes(t,"./d:Annotation",O);for(X=0;X<V.length;X+=1){W=x.nextNode(V,X);if(W.hasChildNodes()===false){Y=r(W.getAttribute("Term"));q.propertyAnnotations[R][U][Y]=d(W);}}}else{$=R.replace(w[Q],Q);V=x.selectNodes(t,"./d:Annotation",O);for(Z=0;Z<V.length;Z+=1){W=x.nextNode(V,Z);_=W.getAttribute("Qualifier");a1=r(W.getAttribute("Term"));if(_){a1+="#"+_;}b1=f(t,W,$);b1=s(b1,L.types,R,S);q[R][a1]=b1;}c1=x.selectNodes(t,"//d:Annotations[contains(@Target, '"+$+"')]//d:PropertyValue[contains(@Path, '/')]//@Path",t);for(i=0;i<c1.length;i+=1){d1=x.nextNode(c1,i);e1=d1.value;if(q.propertyAnnotations){if(q.propertyAnnotations[R]){if(q.propertyAnnotations[R][e1]){continue;}}}f1=e1.split('/');if(o(R,f1[0],m)){if(!q.expand){q.expand={};}if(!q.expand[R]){q.expand[R]={};}q.expand[R][f1[0]]=f1[0];}}g1=x.selectNodes(t,"//d:Annotations[contains(@Target, '"+$+"')]//d:Path[contains(., '/')]",t);for(i=0;i<g1.length;i+=1){d1=x.nextNode(g1,i);e1=x.getNodeText(d1);if(q.propertyAnnotations[R]){if(q.propertyAnnotations[R][e1]){continue;}}if(!q.expand){q.expand={};}if(!q.expand[R]){q.expand[R]={};}f1=e1.split('/');if(o(R,f1[0],m)){if(!q.expand){q.expand={};}if(!q.expand[R]){q.expand[R]={};}q.expand[R][f1[0]]=f1[0];}}}this.initialized[a]=q;}return q;};
return M;},true);
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureTile',['sap/m/CustomTile','sap/ushell/library'],function(C,l){"use strict";
var P=C.extend("sap.ushell.components.factsheet.controls.PictureTile",{metadata:{deprecated:true,library:"sap.ushell",properties:{height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'32px'},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'32px'}},associations:{tileContent:{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:false}},events:{pictureDelete:{}}}});
P.prototype.init=function(t){this._oDeletePictureButton=new sap.m.Button({icon:"sap-icon://sys-cancel",press:jQuery.proxy(this._deletePictureRequestHandler,this),type:sap.m.ButtonType.Transparent}).addStyleClass("sapCaUiPTDeleteButton");if(!sap.ui.Device.system.desktop){this.attachPress(this._tilePressedHandler);this.attachBrowserEvent("swipe",jQuery.proxy(this._tileSwipedHandler,this));this._oDeletePictureButton.addStyleClass("hide");}};
P.prototype.setTileContent=function(t){this.setContent(null);if(t){var i=t.getImage();this.setContent(i);}else{this.setContent(null);}this.setAssociation("tileContent",t);};
P.prototype.setSize=function(w,h){this._width=w;this._height=h;var $=this.$();if($){$.css({width:w+"px",height:h+"px"});jQuery.sap.byId(this.getId()+"-wrapper").addClass("sapCaUiPTWrapper");}};
P.prototype._tilePressedHandler=function(e){this.switchVisibility();};
P.prototype.switchVisibility=function(v){var $=this._oDeletePictureButton.$();if(v===undefined){$.toggleClass("hide");}else{$.toggleClass("hide",!v);}};
P.prototype._tileSwipedHandler=function(e){var $=this._oDeletePictureButton.$();if($&&!$.hasClass("hide")){$.addClass("hide");}};
P.prototype._deletePictureRequestHandler=function(){this.firePictureDelete();};
return P;});
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureTileRenderer',['jquery.sap.global','sap/m/CustomTileRenderer','sap/ui/core/Renderer'],function(q,C,R){"use strict";var P=R.extend(C);
P.render=function(r,c){q.sap.log.debug("PictureTileRenderer :: begin rendering");r.write("<div ");r.writeControlData(c);r.addClass("sapCaUiPictureTile");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapCaUiPictureTileContent");r.writeClasses();r.write(">");r.write("<div id='"+c.getId()+"-wrapper'>");r.renderControl(c._oDeletePictureButton);this._renderContent(r,c);r.write("</div>");r.write("</div></div>");};
P._renderContent=function(r,t){r.renderControl(t.getContent());};
return P;},true);
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureViewer',['sap/m/TileContainer','sap/ushell/library'],function(T,l){"use strict";
var P=T.extend("sap.ushell.components.factsheet.controls.PictureViewer",{metadata:{deprecated:true,library:"sap.ushell",properties:{tileScaling:{type:"float",group:"Misc",defaultValue:0.95},removable:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"items",aggregations:{items:{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:true,singularName:"item"}},events:{pictureDeleted:{}}}});
P.prototype.init=function(){T.prototype.init.apply(this);this.setEditable(false);if(sap.ui.getCore().isMobile()){jQuery(window).bind("tap",jQuery.proxy(this._reset,this));var s=sap.ui.getCore().getStaticAreaRef();this.$blocker=jQuery("<div class='sapCaPVBly sapUiBLy'></div>").css("visibility","hidden");jQuery(s).append(this.$blocker);}if(!sap.ui.getCore().isMobile()){jQuery(window).bind("resize",jQuery.proxy(this._resize,this));}this.addStyleClass("sapCaPW");this.addStyleClass("sapCaPWRendering");};
P.prototype._resize=function(){if(this._oDragSession){return;}setTimeout(jQuery.proxy(function(){this._applyDimension();this._update(false);delete this._iInitialResizeTimeout;},this),this._iInitialResizeTimeout);this._iInitialResizeTimeout=0;};
P.prototype.exit=function(){this.$blocker.remove();if(!sap.ui.getCore().isMobile()){jQuery(window).unbind("resize",jQuery.proxy(this._resize,this));}T.prototype.exit.apply(this);if(!sap.ui.Device.system.desktop){jQuery(window).unbind("tap",jQuery.proxy(this._reset,this));}};
P.prototype.setTileScaling=function(t){if(t<0||t>1){t=0.75;jQuery.sap.log.error("Tile Scaling should be a float value between 0 and 1 and not "+t+". Setting it to 0.75 by default.");}this.setProperty('tileScaling',t);};
P.prototype.addItem=function(i){this.insertItem(i,this.getItems().length);};
P.prototype.insertItem=function(i,I){var t=new sap.ushell.components.factsheet.controls.PictureTile({tileContent:i});t.attachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));this.insertTile(t,I);this.insertAggregation("items",i,I);return this;};
P.prototype.insertTile=function(t,i){t.attachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));T.prototype.insertTile.apply(this,arguments);};
P.prototype.deleteTile=function(t){T.prototype.deleteTile.apply(this,arguments);t.destroy();};
P.prototype.deletePicture=function(i){var p,a,n;n=this.getTiles().length;if(typeof i!="number"||i<0||i>=n){p=this.getPageFirstTileIndex();}else{p=i;}if(p>-1){a=this.getTiles()[p];a.detachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));this.deleteTile(a);this.removeAggregation("items",p,true);}else{jQuery.sap.log.warning("Cannot find and delete a picture at index : "+i);}return this;};
P.prototype.selectPicture=function(i){var n=this.getTiles().length;if(typeof i!="number"){i=0;}else if(i<0){i=0;}else if(i>=n){i=n-1;}if(this._bRendered){this.addStyleClass("sapCaPWRendering");}this._selectedIndex=i;return this;};
P.prototype.setSelectedIndex=function(i){this.selectPicture(i);};
P.prototype.getCurrentPictureIndex=function(){return this.getPageFirstTileIndex();};
P.prototype._deletePictureRequestHandler=function(e){var p=this.indexOfTile(e.getSource());this.deleteTile(e.getSource());this.firePictureDeleted({index:p});};
P.prototype._reset=function(e){var i=this.getCurrentPictureIndex();var t=this.getTiles();if(i>-1&&t&&t.length>i){var o=t[i];if(o){var $=jQuery(e.target);var a=this.$();if(a.length>0&&$.length>0){var b=$.closest(this.$());if(b.length===0){o.switchVisibility(false);}}}}};
P.prototype.setRemovable=function(v){this.setProperty("removable",v,true);this.toggleStyleClass("sapCaPWEditable",v);};
P.prototype.setEditable=function(v){T.prototype.setEditable.call(this,false);};
P.prototype._getTileDimension=function(){if(!this._bRendered){return;}var $=jQuery.sap.byId(this.getId()+"-scrl");var t={width:$.width(),height:$.height()};return t;};
P.prototype.onBeforeRendering=function(){this.addStyleClass("sapCaPWRendering");};
P.prototype.onAfterRendering=function(){var t=this;this._bRendered=true;this._applyDimension();this.$().toggleClass("sapCaPWEditable",this.getRemovable()===true);this._sInitialResizeTimeoutId=setTimeout(function(){t.addStyleClass("sapCaPWRendering");t._applyPageStartIndex(t._selectedIndex);t._update(false);},this._iInitialResizeTimeout);if(sap.ui.Device.system.desktop){var f=this.getTiles()[0],i=this._iInitialResizeTimeout;if(!!f){setTimeout(jQuery.proxy(function(){this._findTile(f.$()).focus();},this),i);}}};
P.prototype._update=function(a){T.prototype._update.apply(this,arguments);this.removeStyleClass("sapCaPWRendering");if(sap.ui.getCore().isMobile()){var t=this;var b=this.$blocker;setTimeout(jQuery.proxy(function(){b.fadeOut(200,function(){t.css("visibility","hidden").css("z-index",0);});},this),250);}};
P.prototype._applyDimension=function(){var d=this._getContainerDimension(),i=this.getId(),$=this.$(),t,o=10,a=60,c=jQuery.sap.byId(i+"-cnt"),b,e,p=jQuery.sap.byId(i+"-pager").outerHeight();jQuery.sap.byId(i+"-scrl").css({width:d.outerwidth+"px",height:(d.outerheight-p)+"px"});c.css({height:(d.outerheight-p)+"px",visibility:"visible"});$.css("visibility","visible");t=$.position();b=c.position();e=c.outerHeight();if(jQuery.device.is.phone){o=2;}else if(sap.ui.Device.system.desktop){o=0;}jQuery.sap.byId(i+"-blind").css({top:(b.top+o)+"px",left:(b.left+o)+"px",width:(c.outerWidth()-o)+"px",height:(e-o)+"px"});jQuery.sap.byId(i+"-rightedge").css({top:(t.top+o+a)+"px",right:o+"px",height:(e-o-a)+"px"});jQuery.sap.byId(i+"-leftedge").css({top:(t.top+o+a)+"px",left:(t.left+o)+"px",height:(e-o-a)+"px"});};
P.prototype.showBlockerLayer=function(c){if(sap.ui.getCore().isMobile()){var a=20;jQuery(sap.ui.getCore().getStaticAreaRef()).children().each(function(i,v){var z=parseInt(jQuery(v).css("z-index"),10);if(!isNaN(z)){a=Math.max(a,z);}});jQuery.sap.log.debug("blocker layer z-index calculated : "+a+1);this.$blocker.css("z-index",a+1).css("visibility","visible").fadeIn(200,function(){if(c){c.call();}});}else{if(c){c.call();}}};
return P;});
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureViewerItem',['sap/ui/core/Control','sap/ushell/library'],function(C,l){"use strict";
var P=C.extend("sap.ushell.components.factsheet.controls.PictureViewerItem",{metadata:{deprecated:true,library:"sap.ushell",properties:{src:{type:"string",group:"Misc",defaultValue:null}},aggregations:{image:{type:"sap.m.Image",multiple:false}}}});
P.prototype.setSrc=function(s){this.setProperty("src",s);var i=this.getImage();if(i==null){i=new sap.m.Image();}i.setSrc(s);this.setImage(i);return this;};
P.prototype.exit=function(){var i=this.getImage();if(i){i.destroy();}};
return P;});
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureViewerRenderer',['jquery.sap.global','sap/m/TileContainerRenderer'],function(q,T){"use strict";var P={};
P.render=function(r,c){q.sap.log.debug("PictureViewerRenderer :: begin rendering");T.render(r,c);q.sap.log.debug("PictureViewerRenderer :: end rendering");};
return P;},true);
sap.ui.predefine('sap/ushell/components/factsheet/factory/ThingInspector',["jquery.sap.global","sap/suite/ui/commons/UnifiedThingInspector","sap/ushell/components/factsheet/annotation/Mapping","sap/ui/vbm/library","sap/ui/core/format/NumberFormat","sap/viz/ui5/data/FlattenedDataset"],function($,U,M,v,N,F){"use strict";var t,c={},A=[],L={},d,f,g,h,q,r,s,u,w,x,y,z,B={},C,D,E,G,H,I,J,K,O,P,Q,R,S,T,V,W,X,Y,Z,_,a1,b1,c1="displayFactSheet";V=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();if(sap.ui.getCore().getConfiguration().getLanguage()==="ZH"){V=new sap.ui.core.Locale("zh_CN");}
function d1(a){return a<0?true:false;}
function e1(a){var b=Number(a).toFixed(0);if(d1(a)){b=Number(b)*-1;}return b;}
function f1(a,b){var e,o,i,n;if(!a){return"";}o=new RegExp(N.oDefaultFloatFormat.groupingSeparator,"g");if(b>=0){b=parseInt(b,10);n=N.getFloatInstance({minFractionDigits:b,maxFractionDigits:b},V);}else{n=N.getFloatInstance({minFractionDigits:0,maxFractionDigits:99},V);}e=n.format(a);i=e.replace(/[\D]/g,"");if(i&&i.length>6){a=a.replace(o,"");if(e1(a)<1000){return N.getIntegerInstance().format(a);}n=N.getFloatInstance({minFractionDigits:1,maxFractionDigits:1,style:"short"},V);return n.format(a);}else{return e;}}
function g1(){var p,a,o="",b,m,e,k,i,j,n,l,h1;b=this.getElementBinding().sPath.split("/")[1];m=this.getModel();e=this.mBindingInfos.value.parameters;k=this.mBindingInfos.value.parts;for(i=0;i<e.length;i+=1){o=o+e[i].string;}for(j=0;j<k.length;j+=1){p=k[j].path;l="{"+p+"}";a=m.oData[b][p];o=o.replace(l,a);}n=C(o);if($.isNumeric(n)){h1=this.mBindingInfos.value.parts.filter(function(i1){return(i1.path===p);});n=f1(n,h1[0].type.oFormatOptions.maxFractionDigits);this.setDoubleFontSize(true);}this.setValue(n);this.getElementBinding().detachChange(g1);}
_=function(){var a="";if(t.getName()&&t.getDescription()){a=t.getName()+", "+t.getDescription();}else if(t.getName()&&!t.getDescription()){a=t.getName();}else if(!t.getName()&&t.getDescription()){a=t.getDescription();}return a;};h=function(a){var b,e,i;b=a.slice(1).split("/");e="/";for(i=0;i<b.length;i+=1){if((b[i].indexOf("(")>0)&&(b[i].indexOf("sid(")<0)){break;}else{e+=b[i]+"/";}}return e;};q=function(a,m){var e,b,i,n;b=a.slice(m.sServiceUrl.length+1);if(b.indexOf("/")>=0){i=b.split("/");n=i[i.length];e=i[i.length-1];if(e.indexOf("(")>=0){e=e.slice(e.indexOf("("));}e=this.getNavEntitySet(e,n,m.getMetadata());}else{if(b.indexOf("(")>=0){e=b.slice(0,b.indexOf("("));}else{if(b.indexOf("?")>=0){e=b.slice(0,b.indexOf("?"));}else{e=b;}}}return e;};G=function(a,m){var e,k="",o,b;e=a.slice(m.sServiceUrl.length+1);if(e.indexOf("(")>=0){k=e.slice(e.indexOf("(")+1,e.indexOf(")"));if(k.indexOf("=")<=0){o=m.getServiceMetadata();b=s(q(a,m),o);k=H(b,o)+"="+k;}}return k;};H=function(e,m){var i,a,j;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.namespace===e.slice(0,e.lastIndexOf("."))){for(j=0;j<a.entityType.length;j+=1){if(a.entityType[j].name===e.slice(e.lastIndexOf(".")+1)){return a.entityType[j].key.propertyRef[0].name;}}}}};r=function(e,m){var i,a,b,j;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){b=a.entityContainer[0].entitySet;for(j=b.length-1;j>=0;j-=1){if(b[j].entityType===e){return b[j].name;}}}}};s=function(e,m,b){var i,a,k,j,l;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){k=a.entityContainer[0].entitySet;for(j=k.length-1;j>=0;j-=1){if(k[j].name===e){if(b){l=k[j].entityType.slice(a.namespace.length+1);}else{l=k[j].entityType;}return l;}}}}};u=function(e,n,m){var a,i,b,l,k,j,o;a=e.split(".");for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];l=a[0];if(a.length>2){for(k=1;k<a.length-1;k+=1){l+="."+a[k];}}if(b.namespace===l){for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===a[a.length-1]){if(b.entityType[j].navigationProperty){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){o=b.entityType[j].navigationProperty[k];return{name:o.relationship,toRole:o.toRole};}}}}}}}};w=function(e,n,m){var a,b,o,i,l,j,p,k;a=s(e,m);if(n.charAt(0)==="@"){if(c.termDefinitions&&c.termDefinitions[n]){b=c.termDefinitions[n];if(b.indexOf("Collection")>=0){b=b.slice(b.indexOf("(")+1,b.indexOf(")"));}return r(b,m);}}else{o=u(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){l=m.dataServices.schema[i];if(l.entityContainer&&l.entityContainer[0].associationSet){for(j=l.entityContainer[0].associationSet.length-1;j>=0;j-=1){p=l.entityContainer[0].associationSet[j];if(p.association===o.name){for(k=0;k<p.end.length;k+=1){if(p.end[k].role===o.toRole){return p.end[k].entitySet;}}}}}}}}};x=function(e,n,m){var a,o,i,b,j,l,k,p,h1;a=s(e,m);p=a.split(".")[a.split(".").length-1];o=u(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];for(j=0;j<b.entityType.length&&!h1;j+=1){if(b.entityType[j].name===p){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){h1=b.entityType[j].navigationProperty[k].toRole;break;}}}}for(j=b.association.length-1;j>=0;j-=1){l=b.association[j];if(b.namespace+"."+l.name===o.name){for(k=0;k<l.end.length;k+=1){if(l.end[k].role===h1){return l.end[k].multiplicity;}}}}}}else{jQuery.sap.log.error("\""+n+"\" wasn't found in the metadata document. Check whether the corresponding search connector is active.");return 0;}};y=function(e,m){var o,a,b,i;o={};if(c.expand){if(c.expand[s(e,m)]){a=c.expand[s(e,m)];b=[];for(i in a){if(a.hasOwnProperty(i)){b.push(a[i]);}}o.expand=b.join(", ");}}return o;};b1=function(a,e,o){var m,b,j,k,l,n;for(m=o.dataServices.schema.length-1;m>=0;m-=1){b=o.dataServices.schema[m];for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===e.split(".")[e.split(".").length-1]){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===a){for(l=0;l<b.association.length;l+=1){for(n=b.association[l].end.length-1;n>=0;n-=1){if(b.association[l].end[n].role===b.entityType[j].navigationProperty[k].toRole){return(b.association[l].end[n].type);}}}}}}}}};z=function(p,o){var b={},j;b.parts=[];b.parameters=[];for(j=p.length-1;j>=0;j-=1){if(p[j].Type==="Path"){if(p[j].EdmType){switch(p[j].EdmType){case"Edm.DateTimeOffset":case"Edm.DateTime":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.DateTime({"UTC":true})});break;case"Edm.Time":b.parts.push({path:p[j].Value+"/ms",type:new sap.ui.model.type.Time({source:{pattern:"timestamp"},UTC:true})});break;case"Edm.Date":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.Date({"UTC":true})});break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.Float()});break;case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.Integer()});break;default:b.parts.push({path:p[j].Value});break;}}else{b.parts.push({path:p[j].Value});}}else if(p[j].Type==="String"){b.parameters.unshift({string:p[j].Value});}}b.formatter=function(){var a="",e,k,l,i,m="",n=false,h1=0,i1=0;if(arguments&&arguments.length>=1){e=arguments.length-1;l="";i=0;if(p&&p[0]&&(p[0].Type==="String")&&(p[0].Value.substr(0,1)==="#")){n=true;}for(k=0;k<p.length;k+=1){if(p[k].Type==="Path"){l=arguments[e];if(!l||(l.length===0)){if(a.length>i){if(a.indexOf("(")>i){a=a.substr(0,i);}else{a=a.substr(0,i);l=a;}}}else{if(n){l=encodeURIComponent(l);}a+=l;h1+=1;}e-=1;i=a.length;}else{i=a.length;m=p[k].Value;if(m.indexOf("(")!==-1){i1+=1;}if((l&&l.length>0)||(m.indexOf("(")!==-1)||(m&&(m.substr(0,1)==="#"))){a+=p[k].Value;}else{m="";}}}if(o){a=o(a);}a=a.trim();if((h1===1)&&(i1>0)&&(a.substr(0,1)==="(")&&(a.substr(-1)===")")){a=a.substr(1,a.length-2);}return a.trim();}};return b;};P=function(o,p){var k;for(k in o){if(o.hasOwnProperty(k)){if(k==="__metadata"){continue;}else if(k===p){return o[k];}else if(typeof o[k]==="object"){return P(o[k],p);}}}};C=function(a){var l,n,b,e={},i;l=a.lastIndexOf("/");n=a.slice(0,l);b=a.slice(l+1);if(!B[a]){e=new sap.ui.model.json.JSONModel();e.loadData(n,null,false);B[a]=e.getData();}else{e=B[a];}if(B[a]&&B[a].d){if(!B[a].d[b]){i=P(B[a].d,b);}else{i=B[a].d[b];}}return i;};D=function(o,e,m,a){var b,i,n,j,k,l,p,h1;b=new sap.ui.core.Control();i=Q(o.Value,o.EdmType,e);if(o.Value&&o.Value["com.sap.vocabularies.UI.v1.IsImageURL"]){b=new sap.m.Image({height:"50px"});if(i.BindingInfo){b.bindProperty("src",i.BindingInfo);}else{b.setProperty("src",i.String);}}else{if(o.UrlRef||o.Url||(o.Target&&o.Target.Path)){b=new sap.m.Link({wrapping:true});}else{b=new sap.m.Text();if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){b.setTextAlign(sap.ui.core.TextAlign.End);}}b.addStyleClass("sapFactsheetUtiDataField");if(i.BindingInfo){b.bindProperty("text",i.BindingInfo);}else{b.setProperty("text",i.String);}}if((o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigation")&&m){n=o.Target.Path;if(c[e][n.slice(1)]){if(n.charAt(0)==="@"){if(n.indexOf("/")<0){j=c[e][n.slice(1)].UrlRef;}else{j=c[e][n.slice(1,n.indexOf("/"))].UrlRef;}b.bindProperty("href",I(j));}}b.attachPress(function(i1){return false;});}if(o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url.String){b.setHref(o.Url.String);}else{b.bindProperty("href",I(o.Url));k=new sap.m.Text({wrapping:true});if(i.BindingInfo){k.bindProperty("text",jQuery.extend({},i.BindingInfo));}else{k.setProperty("text",i.String);}b.setVisible(false);l=new sap.ui.layout.VerticalLayout();l.addContent(b);l.addContent(k);if(!A[A.indexOf(a)].Links){A[A.indexOf(a)].Links=[];}if(o.Url.Apply){p=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));h1=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("?"));}A[A.indexOf(a)].Links.push({sSemanticObject:p,sIntend:h1,oVL:l});}}if(l){return l;}else{return b;}};E=function(o,l,p,b){var a,e="",i="",m,j,k,n;a=new sap.m.Label(l);a.addStyleClass("sapFactsheetUtiLabel");if(b){e=":";}if(o.Label){if(o.Label.String){a.setText(o.Label.String.trim()+e);a.setTooltip(o.Label.String.trim());}else{if(o.Label.Path){a.bindProperty("text",o.Label.Path);a.bindProperty("tooltip",o.Label.Path);}}}else{if(o.Value){if(o.Value.Path&&p){m=p[o.Value.Path];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}}else if(o.Value.Apply&&(o.Value.Apply.Name==="odata.concat")){for(k in o.Value.Apply.Parameters){if(o.Value.Apply.Parameters.hasOwnProperty(k)){n=o.Value.Apply.Parameters[k];if(n.Type==="Path"){m=p[n.Value];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}break;}}}}a.setText(i+e);a.setTooltip(i);}}return a;};Q=function(o,e,a){var b={},p,k,l=[],j,m,n,h1=[],i1,j1,i,k1,l1,m1,n1,o1=[],p1;p1=function(a,q1,r1){var p,s1={};p=c.propertyAnnotations[a];if(p&&p[q1]&&p[q1][r1]){if(p[q1][r1].Path){s1.Type="Path";s1.Value=p[q1][r1].Path;}else{s1.Type="String";s1.Value=p[q1][r1].String;}}return s1;};if(!o){return false;}if(o.Apply){if(o.Apply.Name==="odata.concat"){if(a&&c.propertyAnnotations&&c.propertyAnnotations[a]){k=o.Apply.Parameters;for(j=0;j<k.length;j+=1){l.push(k[j]);if(k[j].Type==="Path"){p=p1(a,k[j].Value,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(p)){l.push({Type:"String",Value:" "});l.push({Type:p.Type,Value:p.Value});}p=p1(a,k[j].Value,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(p)){l.push({Type:"String",Value:" "});l.push({Type:p.Type,Value:p.Value});}}}b.BindingInfo=z(l);}else{b.BindingInfo=z(o.Apply.Parameters);}}}else{if(o.Path){if(o.Path.charAt(0)==="@"){m=c[a][o.Path.slice(1,o.Path.indexOf("/"))].UrlRef;n=o.Path.slice(o.Path.indexOf("/")+1);if(m&&m.Apply){i1=m.Apply.Parameters;switch(m.Apply.Name){case"odata.concat":h1=i1;h1.push({Type:"String",Value:"/"+n});break;case"odata.fillUriTemplate":j1=i1[0].Value.split("{");for(i in j1){if(j1.hasOwnProperty(i)){if(j1[i].indexOf("}")<0){h1.push({Type:"String",Value:j1[i]});}else{k1=j1[i].split("}");for(j=1;j<i1.length;j+=1){if(i1[j].Name===k1[0]){l1=i1[j].Value;if(l1.Path){h1.push({Type:"Path",Value:l1.Path});}else{if(l1.Apply&&l1.Apply.Name&&(l1.Apply.Name.toLowerCase()==="odata.uriencode")){m1=l1.Apply.Parameters[0];h1.push({Type:m1.Type,Value:encodeURIComponent(m1.Value)});h1.push({Type:"String",Value:"{"+encodeURIComponent(m1.Value)+"}"});}}}}h1.push({Type:"String",Value:k1[1]});}}}h1.push({Type:"String",Value:"/"+n});b.fnChange=g1;break;default:break;}b.BindingInfo=z(h1,C);}else{if(m&&m.Path){h1.push({Type:"Path",Value:m.Path},{Type:"String",Value:"/"+n});b.BindingInfo=z(h1,C);}else{if(m&&m.String){b.String=C(m.String+"/"+n);}}}}else{b.BindingInfo={};switch(e){case"Edm.DateTimeOffset":case"Edm.DateTime":b.BindingInfo={path:o.Path,type:new sap.ui.model.type.DateTime({"UTC":true})};break;case"Edm.Time":b.BindingInfo={path:o.Path+"/ms",type:new sap.ui.model.type.Time({source:{pattern:"timestamp"},UTC:true})};break;case"Edm.Date":b.BindingInfo={path:o.Path,type:new sap.ui.model.type.Date({"UTC":true})};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":if((e==="Edm.Decimal")||(e==="Edm.Double")||(e==="Edm.Single")){n1=new sap.ui.model.type.Float();}else if((e==="Edm.Int16")||(e==="Edm.Int32")||(e==="Edm.Int64")){n1=new sap.ui.model.type.Integer();}if(c.propertyAnnotations){o1.push({Type:"Path",Value:o.Path,EdmType:e},{Type:"String",Value:" "});p=p1(a,o.Path,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(p)){o1.push({Type:p.Type,Value:p.Value});}p=p1(a,o.Path,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(p)){o1.push({Type:p.Type,Value:p.Value});}b.BindingInfo=z(o1);}else{b.BindingInfo={path:o.Path,type:n1};}break;default:b.BindingInfo={path:o.Path};break;}}}else{if(o.String){b.String=o.String;}}}return b;};I=function(o){var a=[],p,b,j,e,i={},k,l,m;if(o&&o.Apply){p=o.Apply.Parameters;switch(o.Apply.Name){case"odata.fillUriTemplate":p[0].Value=p[0].Value.trim();b=p[0].Value.split("{");for(j=0;j<b.length;j+=1){if(b[j].indexOf("}")<0){a.push({"Value":b[j],"Type":"String"});}else{e=b[j].split("}");i={};i.Value=e[0];i.Type="Path";for(j=1;j<p.length;j+=1){if(p[j].Name===i.Value){k=p[j].Value;if(k.Path){i.Value=k.Path;}else{if(k.Apply&&k.Apply.Name&&k.Apply.Name.toLowerCase()==="odata.uriencode"){i.Value=k.Apply.Parameters[0].Value;}}break;}}a.push(i);a.push({"Value":e[1],"Type":"String"});}}l=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(l&&l.url){m=jQuery.sap.getUriParameters(l.url).get("sap-system");if(m){a.push({Type:"String",Value:"&sap-system="+m});}}break;default:break;}}return z(a);};J=function(o){var a=sap.ui.core.TextAlign.Begin;if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){a=sap.ui.core.TextAlign.End;}return a;};R=function(m,e,a,o,b,k){var l,p,j=0,n=0,h1=0,i1=0,j1,i,k1,l1,m1;if(!b){b=m.getServiceMetadata();}if(!a){a=[];}l=s(e,b);m1=new sap.ui.layout.form.SimpleForm({labelMinWidth:150,maxContainerCols:2});p=(c.propertyExtensions)?c.propertyExtensions[l]:[];if(o&&o.High){n=o.High;}if(o&&o.Medium){h1=o.Medium;}if(o&&o.Low){i1=o.Low;}for(i=0;i<a.length;i+=1){j1=a1(a[i]);if(o&&(j1==="High")){if(n){n-=1;}else{continue;}}else if(o&&(j1==="Medium")){if(h1){h1-=1;}else{continue;}}else if(o&&(j1==="Low")){if(i1){i1-=1;}else{continue;}}if(o&&o.Total&&(j>=o.Total)){break;}j+=1;k1=new sap.ui.core.Control().setModel(m);l1=E(a[i],{textAlign:sap.ui.core.TextAlign.End},p,false);l1.addStyleClass("sapFactsheetUtiFormPadding");k1=D(a[i],l,b,k);k1.addStyleClass("sapFactsheetUtiFormPadding");if(k1.setTextAlign){k1.setTextAlign(sap.ui.core.TextAlign.Begin);}m1.addContent(l1);m1.addContent(k1);}m1.addStyleClass("sapFactsheetUtiFormLayout");return m1;};S=function(m,e,o,b,a){var j,k="",l,n,p,h1,i1,j1,k1,l1,m1,n1,o1=[],i,p1,q1,r1;j=m.getServiceMetadata();switch(o.RecordType){case"com.sap.vocabularies.UI.v1.ReferenceFacet":l=new sap.suite.ui.commons.UnifiedThingGroup();if(o.Label&&o.Label.String){l.setTitle(o.Label.String);}n=o.Target.AnnotationPath;p=n.substring(n.lastIndexOf("@")+1);n=n.substring(0,n.lastIndexOf("@")-1);if(n){k=x(e,n,j);}h1=p.split("#");switch(h1[0]){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":case"com.sap.vocabularies.UI.v1.Badge":case"com.sap.vocabularies.UI.v1.Identification":if(n){i1=w(e,n,j);p1=s(i1,j);}else{p1=s(e,j);}if(h1[0]==="com.sap.vocabularies.UI.v1.Chart"){p="com.sap.vocabularies.UI.v1.LineItem";}q1=c[p1][p];if(c.propertyExtensions){r1=c.propertyExtensions[p1];}if(k==="*"&&h1[0]!=="com.sap.vocabularies.UI.v1.Identification"){j1=T(m,q1,p1,j,b+"/"+n,o,r1,a);l.setContent(j1);}if(h1[0]==="com.sap.vocabularies.UI.v1.Identification"){k1=c[p1]["com.sap.vocabularies.UI.v1.Identification"];l1=new sap.ui.layout.VerticalLayout({width:"100%"}).setModel(m);if(n){l1.addContent(R(m,i1,k1,null,null,a)).addStyleClass("sapFactsheetUtiPanel");l1.bindElement(b+"/"+n);}else{l1.addContent(R(m,e,k1,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}l.setContent(l1);}break;case"com.sap.vocabularies.UI.v1.StatusInfo":if(n){i1=w(e,n,j);m1=c[s(i1,j)]["com.sap.vocabularies.UI.v1.StatusInfo"];l.setContent(R(m,i1,m1,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+n));}else{m1=c[s(e,j)]["com.sap.vocabularies.UI.v1.StatusInfo"];l.setContent(R(m,e,m1,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}break;case"com.sap.vocabularies.UI.v1.FieldGroup":n1=c[s(e,j)][p];if(n1){if(!l.getTitle()||(l.getTitle()==="")){if(n1.Label){if(n1.Label.String){l.setTitle(n1.Label.String);}else{if(n1.Label.Path){l.bindProperty("title",n1.Label.Path);}}}}if(n){i1=w(e,n,j);l.setContent(R(m,i1,n1.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+n));}else{l.setContent(R(m,e,n1.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}}break;default:break;}return l;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":l=new sap.ui.ux3.ThingGroup({title:o.Label.String});l.setContent(K(o));return l;case"com.sap.vocabularies.UI.v1.CollectionFacet":for(i=0;i<o.Facets.length;i+=1){o1.push(S(m,e,o.Facets[i],b,a));}return o1;default:break;}};K=function(o){var i,a,b;switch(o.UrlContentType.String){case"image/png":case"image/jpeg":case"image/gif":i=new sap.m.Image({width:"100%"});if(o.Url.String){i.setSrc(o.Url.String);}return i;default:a=new sap.ui.core.HTML();if(o.Url.String){a.setContent("<iframe src = '"+o.Url.String+"' width='100%' height='250px' frameborder='0'></iframe>");}else{if(o.Url.Path){a.bindProperty("content",{path:o.Url.Path,formatter:function(e){b="<iframe src = '"+o.Url.Path+"' width='100%' height='250px' frameborder='0'></iframe>";return b;}});}}return a;}};T=function(m,a,e,o,b,l,n,h1){var i1,j1,k1,l1,m1,i,k,n1=[],o1=[],p1=[],q1=[],r1,s1,t1,u1,v1,w1,x1,y1=[],z1,A1,B1,C1=[],D1,E1,F1,G1,H1,I1,J1,K1,L1=false,M1,N1;K1=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(!o){o=m.getServiceMetadata();}i1=(c.propertyExtensions)?c.propertyExtensions[e]:[];j1=6;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){j1=5;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){j1=4;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){j1=3;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){j1=2;}k1=0;l1=0;for(i=0;i<a.length;i+=1){m1=a1(a[i]);if(m1==="High"){k1+=1;}}if(j1>k1){l1=j1-k1;}else if(j1<k1){k1=j1;}o1.push(new sap.m.Column({visible:false}));n1.push(new sap.m.Text().bindText("__metadata/uri"));for(i=0;i<a.length;i+=1){N1="";t1=new sap.ui.core.Control();m1=a1(a[i]);t1=D(a[i],e,o,h1);r1=E(a[i],null,i1);if(a[i].Value.Path){B1=a[i].Value.Path;if(n&&n[B1]&&n[B1]["http://www.sap.com/Protocols/SAPData"]&&n[B1]["http://www.sap.com/Protocols/SAPData"].sortable){r1.data("IsSortable",n[B1]["http://www.sap.com/Protocols/SAPData"].sortable);if(n[B1]["http://www.sap.com/Protocols/SAPData"].sortable==="true"){L1=true;}}else{r1.data("IsSortable","true");L1=true;}if(n&&n[B1]&&n[B1]["http://www.sap.com/Protocols/SAPData"]&&n[B1]["http://www.sap.com/Protocols/SAPData"].filterable){r1.data("IsFilterable",n[B1]["http://www.sap.com/Protocols/SAPData"].filterable);if(n[B1]["http://www.sap.com/Protocols/SAPData"].filterable==="true"){L1=true;}}else{r1.data("IsFilterable","true");L1=true;}}else{M1=true;for(k=0;k<a[i].Value.Apply.Parameters.length;k+=1){if(a[i].Value.Apply.Parameters[k].Type==="Path"){B1=a[i].Value.Apply.Parameters[k].Value;if(n[B1]&&n[B1]["http://www.sap.com/Protocols/SAPData"]&&n[B1]["http://www.sap.com/Protocols/SAPData"].sortable){if(n[B1]["http://www.sap.com/Protocols/SAPData"].sortable==="false"){M1=false;N1="";break;}}if(N1){N1+=";";}N1+=B1;}}B1=N1;if(M1===false){r1.data("IsSortable","false");}else{r1.data("IsSortable","true");L1=true;}r1.data("IsFilterable","false");}if(a[i].EdmType){r1.data("EdmType",a[i].EdmType);}r1.data("ColumnName",B1);p1.push(r1);q1.push(t1);if(m1==="High"){if(k1>0){s1=true;k1-=1;}else{s1=false;}}else if(m1==="Medium"){if(l1>0){s1=true;l1-=1;}else{s1=false;}}else{s1=false;}o1.push(new sap.m.Column({header:r1,hAlign:J(a[i]),visible:s1}));n1.push(t1);}u1=new sap.m.ColumnListItem({type:sap.m.ListType.Navigation,unread:false,cells:n1});if(l){v1=l.Label.String;}u1.attachPress({aColumns:a,aLabels:p1,aControls:q1,sTitle:v1},function(j,p){var O1,P1,r1,i,Q1,R1,S1;O1=j.getSource().getCells()[0].getText().substr(j.getSource().getCells()[0].getText().lastIndexOf("/"));P1=new sap.m.Table({backgroundDesign:sap.m.BackgroundDesign.Transparent,showSeparators:sap.m.ListSeparators.None,columns:[new sap.m.Column({hAlign:sap.ui.core.TextAlign.End}),new sap.m.Column()]});P1.addStyleClass("sapFactsheetUtiPanel");P1.addStyleClass("sapFactsheetUtiTilePadding");P1.addStyleClass("sapFactsheetUtiTableNoTopBorder");P1.bindElement(O1);for(i=0;i<a.length;i+=1){r1=p1[i].clone();r1.setText(r1.getText()+":");S1=q1[i].clone();r1.setLabelFor(S1);P1.addItem(new sap.m.ColumnListItem({cells:[r1,S1]}));}Q1=new sap.suite.ui.commons.UnifiedThingGroup({content:P1,title:v1,description:_()});R1=new sap.m.Page({title:t.getTitle(),showNavButton:true,content:[Q1]});t.navigateToPage(R1,true);t.attachAfterNavigate(P1,function(j){if(j.getParameters().getParameters().toId.indexOf("__page")>=0){var T1;T1=P1.getItems();if(T1.length>0&&A.indexOf(h1)>=0){A[A.indexOf(h1)].bLoaded=true;A[A.indexOf(h1)].bProcessed=false;A[A.indexOf(h1)].bIsTable=true;A[A.indexOf(h1)].oTableItems=T1;d(A.indexOf(h1));}}});});w1=new sap.m.Table({growing:true,columns:o1});w1.setModel(m);w1.bindItems({path:b,template:u1});E1=new sap.m.VBox({items:[new sap.m.Input({placeholder:K1.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,O1,P1,Q1,i;p=j.getSource().getParent().getParent().getId();O1=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));P1=O1.getFilterItems();for(i=0;i<P1.length;i+=1){if(P1[i]instanceof sap.m.ViewSettingsCustomItem&&P1[i].getKey()===this.oParent.data("ColumnName")){Q1=P1[i];break;}}if(Q1){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){Q1.setSelected(false);Q1.setFilterCount(0);}else{Q1.setSelected(true);Q1.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});F1=new sap.m.VBox({items:[new sap.m.List({mode:sap.m.ListMode.SingleSelectLeft,includeItemInSelection:true,items:[new sap.m.StandardListItem({title:K1.getText("USHELL_FACTSHEET_GREATER_THEN")}).data("FilterOperator",sap.ui.model.FilterOperator.GT),new sap.m.StandardListItem({title:K1.getText("USHELL_FACTSHEET_EQUALS")}).data("FilterOperator",sap.ui.model.FilterOperator.EQ),new sap.m.StandardListItem({title:K1.getText("USHELL_FACTSHEET_LESS_THEN")}).data("FilterOperator",sap.ui.model.FilterOperator.LT)]}),new sap.m.Input({placeholder:K1.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,O1,P1,Q1,i;p=j.getSource().getParent().getParent().getId();O1=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));P1=O1.getFilterItems();for(i=0;i<P1.length;i+=1){if((P1[i]instanceof sap.m.ViewSettingsCustomItem)&&(P1[i].getKey()===this.oParent.data("ColumnName"))){Q1=P1[i];break;}}if(Q1){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){Q1.setSelected(false);Q1.setFilterCount(0);}else{Q1.setSelected(true);Q1.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});new sap.m.VBox({items:[new sap.m.List({mode:sap.m.ListMode.SingleSelectLeft,includeItemInSelection:true,items:[new sap.m.StandardListItem({title:K1.getText("USHELL_FACTSHEET_AFTER")}).data("FilterOperator",sap.ui.model.FilterOperator.GT),new sap.m.StandardListItem({title:K1.getText("USHELL_FACTSHEET_AT")}).data("FilterOperator",sap.ui.model.FilterOperator.EQ),new sap.m.StandardListItem({title:K1.getText("USHELL_FACTSHEET_BEFORE")}).data("FilterOperator",sap.ui.model.FilterOperator.LT)]}),new sap.m.DateTimeInput({type:sap.m.DateTimeInputType.Date,valueFormat:new sap.ui.model.type.DateTime({pattern:"yyyy/MM/dd HH:mm:ss UTC+00:00"}).getOutputPattern(),placeholder:K1.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,O1,P1,Q1,i;p=j.getSource().getParent().getParent().getId();O1=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));P1=O1.getFilterItems();for(i=0;i<P1.length;i+=1){if((P1[i]instanceof sap.m.ViewSettingsCustomItem)&&(P1[i].getKey()===this.oParent.data("ColumnName"))){Q1=P1[i];break;}}if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){Q1.setSelected(false);Q1.setFilterCount(0);}else{Q1.setSelected(true);Q1.setFilterCount(1);}}}).addStyleClass("sapFactsheetUtiFilterInput")]});G1=function(t1){var j=[],i,p,O1=t1.getItems(),P1;if(O1[0].getParent().data("EdmType")==="Edm.String"&&O1[0].getValue()){j.push(new sap.ui.model.Filter(O1[0].getParent().data("ColumnName"),sap.ui.model.FilterOperator.Contains,O1[0].getValue()));}else if(O1[0].getParent().data("EdmType")==="Edm.Decimal"&&O1[1].getValue()){for(i=0;i<O1[0].getItems().length;i+=1){if(O1[0].getItems()[i].getSelected()===true){p=O1[0].getItems()[i].data("FilterOperator");break;}}P1=O1[1].getValue();for(i=P1.length-1;i>0;i-=1){if(P1[i]===","){P1=P1.replace(P1[i],".");break;}}j.push(new sap.ui.model.Filter(O1[1].getParent().data("ColumnName"),p,P1));}else if(O1[0].getParent().data("EdmType")==="Edm.Date"&&O1[1].getValue()){for(i=0;i<O1[0].getItems().length;i+=1){if(O1[0].getItems()[i].getSelected()===true){p=O1[0].getItems()[i].data("FilterOperator");break;}}j.push(new sap.ui.model.Filter(O1[1].getParent().data("ColumnName"),p,O1[1].getValue()));}else{j.push(new sap.ui.model.Filter(O1[0].getParent().data("ColumnName"),sap.ui.model.FilterOperator.EQ,O1[0].getValue()));}return j;};H1=function(p){var O1=p.getSource(),P1=O1.getFilterItems(),Q1,i,j;for(i=0;i<P1.length;i+=1){if(P1[i]&&P1[i]instanceof sap.m.ViewSettingsCustomItem){P1[i].setSelected(false);P1[i].setFilterCount(0);Q1=P1[i].getCustomControl().getItems();for(j=0;j<Q1.length;j+=1){if((Q1[j]instanceof sap.m.Input)||(Q1[j]instanceof sap.m.DateTimeInput)){Q1[j].setValue("");}if((Q1[j]instanceof sap.m.List)&&(Q1[j].getSelectedItem()!==null)){Q1[j].removeSelections();}}}}};I1=H1;for(i=0;i<o1.length;i+=1){if(o1[i+1]){r1=p1[i].clone();if(r1.getText()&&(r1.data("IsSortable")==="true")&&o1[i+1].getVisible()){z1=new sap.m.ViewSettingsItem({text:r1.getText(),key:r1.data("ColumnName")});if(i===0){z1.setSelected(true);}z1.Sort=r1.Sort;y1.push(z1);}if(r1.getText()&&(r1.data("IsFilterable")==="true")){if(r1.data("EdmType")==="Edm.String"){J1=E1.clone().data("ColumnName",r1.data("ColumnName")).data("EdmType",r1.data("EdmType"));}else if(r1.data("EdmType")==="Edm.Decimal"){J1=F1.clone().data("ColumnName",r1.data("ColumnName")).data("EdmType",r1.data("EdmType"));}if((r1.data("EdmType")==="Edm.String")||(r1.data("EdmType")==="Edm.Decimal")){D1=new sap.m.ViewSettingsCustomItem({key:r1.data("ColumnName"),text:r1.getText(),customControl:J1,customData:new sap.ui.core.CustomData({key:"callback",value:G1})});C1.push(D1);}}}}A1=new sap.m.ViewSettingsDialog({sortItems:y1,filterItems:C1,cancel:I1,resetFilters:H1,confirm:function(j){var O1,P1,Q1=[],R1,S1=[],T1,U1=[],V1=[],p,i,W1;O1=j.getParameters();P1=w1.getBinding("items");if(O1.sortItem){R1=O1.sortItem.getKey();T1=O1.sortDescending;if(R1.indexOf(";")>0){S1=R1.split(";");for(i=0;i<S1.length;i+=1){Q1.push(new sap.ui.model.Sorter(S1[i],T1));}}else if(R1){Q1.push(new sap.ui.model.Sorter(R1,T1));}P1.sort(Q1);}p=O1;for(i=0;i<p.filterItems.length;i+=1){if(p.filterItems[i]instanceof sap.m.ViewSettingsCustomItem){W1=p.filterItems[i].getCustomData()[0].getValue();U1=W1.apply(this,[p.filterItems[i].getCustomControl()]);if(U1){if(!Array.isArray(U1)){U1=[U1];}V1=V1.concat(U1);}}else if(p.filterItems[i]instanceof sap.m.ViewSettingsItem){U1=p.filterItems[i].getCustomData()[0].getValue();if(U1){if(!Array.isArray(U1)){U1=[U1];}V1=V1.concat(U1);}}}P1.filter(V1);}});if(L1===true&&(y1.length>0||C1.length>0)){w1.setHeaderToolbar(new sap.m.Toolbar({content:[new sap.m.Label(),new sap.m.ToolbarSpacer(),new sap.m.Button({icon:"sap-icon://drop-down-list",press:function(j){A1.open();},tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("P13NDIALOG_VIEW_SETTINGS")})]}));}w1.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));x1=(function(h1){return function(j){var p=this.getItems();if(p.length===0){this.setNoDataText(K1.getText("FACETOVERVIEW_NO_CONTENT_TEXT"));}else{this.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));}if(p.length>0&&A.indexOf(h1)>=0){A[A.indexOf(h1)].bLoaded=true;A[A.indexOf(h1)].bProcessed=false;A[A.indexOf(h1)].bIsTable=true;A[A.indexOf(h1)].oTableItems=p;}d(A.indexOf(h1));};}(h1));w1.attachUpdateFinished(x1);return w1;};W=function(a,o,b,e){var i;switch(a){case"com.sap.vocabularies.UI.v1.ChartType/Area":i=new sap.viz.ui5.Area({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bar":i=new sap.viz.ui5.Bar({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bubble":i=new sap.viz.ui5.Bubble({});break;case"com.sap.vocabularies.UI.v1.ChartType/Column":i=new sap.viz.ui5.Column({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":i=new sap.viz.ui5.StackedColumn({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":i=new sap.viz.ui5.StackedColumn100({});break;case"com.sap.vocabularies.UI.v1.ChartType/Donut":i=new sap.viz.ui5.Donut({});break;case"com.sap.vocabularies.UI.v1.ChartType/HeatMap":i=new sap.viz.ui5.Heatmap({});break;case"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":i=new sap.viz.ui5.HorizontalArea({});break;case"com.sap.vocabularies.UI.v1.ChartType/Line":i=new sap.viz.ui5.Line({});break;case"com.sap.vocabularies.UI.v1.ChartType/Pie":i=new sap.viz.ui5.Pie({});break;case"com.sap.vocabularies.UI.v1.ChartType/Scatter":i=new sap.viz.ui5.Scatter({});break;case"com.sap.vocabularies.UI.v1.ChartType/TreeMap":i=new sap.viz.ui5.Treemap({});break;case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked100":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/Radar":case"com.sap.vocabularies.UI.v1.ChartType/Waterfall":break;}if(i){if(o&&o.String){i.setTitle(new sap.viz.ui5.types.Title({visible:true,text:o.String}));}if(b&&b.String){i.setTooltip(b.String);}i.setWidth("100%");i.setHeight("17rem");i.setDataset(e);}else{i=new sap.m.Text({});}return i;};X=function(i){var a;i=i||1;if(jQuery.device.is.phone){a=(7*i)+"rem";}else{a=(11*i-1)+"rem";}return a;};Y=function(a){var i,b=0,e=0,j=0,o;for(i=0;i<a.length;i+=1){o=a1(a[i]);if(o){switch(o){case"High":b+=1;break;case"Medium":e+=1;break;case"Low":j+=1;break;}}}return{High:b,Medium:e,Low:j};};a1=function(o){var e="";if(o.Importance){e=o.Importance.EnumMember;}else if(o["com.sap.vocabularies.UI.v1.Importance"]){e=o["com.sap.vocabularies.UI.v1.Importance"].EnumMember;}return e.substr(e.indexOf("/")+1);};Z=function(m,a,e,b){var i=false,o,j,k,l;o=new sap.suite.ui.commons.KpiTile({doubleFontSize:false});if(a.ValueFormat){j=a.ValueFormat.NumberOfFractionalDigits.Int;}if(a.Title&&a.Title.String){o.setDescription(a.Title.String);}else{if(a.Title&&a.Title.Path){o.bindProperty("description",{path:a.Title.Path});}}if(a.Value&&a.Value.String){o.setValue(a.Value.String);}else{if(a.Value&&a.Value.Path){k=Q(a.Value,a.Value.EdmType,e);if(k.fnChange){o.setModel(m);o.bindElement(b);o.getElementBinding().attachChange(k.fnChange,o);}if(k.String){if($.isNumeric(k.String)){i=true;o.setValue(f1(k.String,j));}else{o.setValue(k.String);}}else if(k.BindingInfo){l=k.BindingInfo;if(l.parts&&l.parts.length===2){o.bindProperty("valueUnit",l.parts[0]);l.parts[1].type=undefined;l.parts[1].formatter=(function(){return function(n){return f1(n,j);};}(j));o.bindProperty("value",l.parts[1]);}else if(l.parts&&l.parts.length===1){l.parts[0].type=undefined;l.parts[0].formatter=(function(){return function(n){return f1(n,j);};}(j));o.bindProperty("value",l);}else{o.bindProperty("value",l);}}}}if(a.Value.EdmType==="Edm.Decimal"||a.Value.EdmType==="Edm.Double"||a.Value.EdmType==="Edm.Single"||a.Value.EdmType==="Edm.Int16"||a.Value.EdmType==="Edm.Int32"||a.Value.EdmType==="Edm.Int64"||i===true){o.setDoubleFontSize(true);}return o;};g=function(m){var a=[],b=[],e,j,k,i,l;j=function(o){if(k(o)===false){if(Array.isArray(o)){for(i=0;i<o.length;i+=1){k(o[i]);}}else if(typeof o==="object"){for(l in o){if(o.hasOwnProperty(l)){if(o[l].constructor!==String){j(o[l]);}}}}}};k=function(o){if(o.RecordType&&o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url&&o.Url.Apply){e=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));if(a.indexOf(e)<0){a.push(e);}return true;}}else{return false;}};for(l in c){if(c.hasOwnProperty(l)){if(l.indexOf(m.dataServices.schema[0].namespace)>=0){j(c[l]);}}}for(i=0;i<a.length;i+=1){if(!L.hasOwnProperty(a[i])){b.push(a[i]);}}return b;};f=function(a){var i,o,l,b;if(a.length>0){o=new sap.ui.model.json.JSONModel();l="/sap/opu/odata/UI2/INTEROP/SemanticObjects?$expand=Links&$format=json";b="&$filter=id%20eq%20%27";for(i=0;i<a.length;i+=1){if(b.length>22){b+="%20or%20id%20eq%20%27"+a[i]+"%27";}else{b+=a[i]+"%27";}}l+=l+b;o.loadData(l);o.attachRequestCompleted(function(){var i,j,e,k=[];if(this.getData().d&&this.getData().d.results){e=this.getData().d.results;for(i=0;i<e.length;i+=1){L[e[i].id]="";k=e[i].Links.results;for(j=0;j<k.length;j+=1){L[k[j].id.slice(0,k[j].id.indexOf("~"))]="";}}}L.InteropCompleted=true;d();});}else{L.InteropCompleted=true;}};d=function(a){var i,j,k,n,b,e,l;if(L.InteropCompleted===true){for(i=0;i<A.length;i+=1){if(A[i].bLoaded&&!A[i].bProcessed&&A[i].Links){l=A[i].Links;for(j=0;j<l.length;j+=1){if(L.hasOwnProperty(l[j].sIntend)===true){if(A[i].bIsTable===true){if(A[i].oTableItems){b=A[i].oTableItems;for(k=0;k<b.length;k+=1){e=b[k].getCells();for(n=0;n<e.length;n+=1){if(e[n]instanceof sap.ui.layout.VerticalLayout&&e[n].getContent()[0].getBindingInfo("href").parts===l[j].oVL.getContent()[0].getBindingInfo("href").parts&&e[n].getContent()[1].getBindingInfo("text").parts===l[j].oVL.getContent()[1].getBindingInfo("text").parts){e[n].getContent()[0].setVisible(true);e[n].getContent()[1].setVisible(false);}}}}}else{l[j].oVL.getContent()[0].setVisible(true);l[j].oVL.getContent()[1].setVisible(false);}}else if(A[i].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}A[i].bProcessed=true;}}}}if(a>=0){if(A[a].bLoaded&&!A[a].bProcessed&&A[a].Links){l=A[a].Links;for(j=0;j<l.length;j+=1){if(A[a].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}}}}};O=function(e,l,t){var m,n,p,h1,i1,j1,k1,l1,i,m1={},n1,o1,p1,q1,j,r1,s1,t1,u1,v1,w1,x1,y1,z1,A1=0,B1=0,C1,D1,E1,F1,G1,H1,I1,J1=[],K1,L1,M1,N1,O1,P1,Q1,R1,S1,T1,U1,V1,W1,X1,Y1,Z1,$1,_1=0,a2,b2,c2,d2,e2,f2,g2;m=h(e);w1=l.substring(0,l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));x1=l.substring(l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));if(window.location.search.indexOf("cbn_keep_anno_case%3Dtrue")===-1){x1=x1.toLowerCase();}n=new sap.ui.model.odata.ODataModel(m,{annotationURI:w1+x1,loadAnnotationsJoined:true,loadMetadataAsync:false,json:true});n.setCountSupported(false);t.setModel(n);p=q(e,n);h1="/"+e.slice(m.length);i1=n.getServiceMetadata();c=n.getServiceAnnotations();j1=s(p,i1);k1=c[j1]["com.sap.vocabularies.UI.v1.HeaderInfo"];l1=c[j1]["com.sap.vocabularies.UI.v1.Facets"];t.bindElement(h1,y(p,i1));y1=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");L.InteropCompleted=false;f(g(i1));t.addStyleClass("sapFactsheetUtiThingType"+p.replace(/\s/g,""));if(k1.TypeName.String){t.setTitle(k1.TypeName.String);}else{if(k1.TypeName.Path){t.bindProperty("title",{path:k1.TypeName.Path});}}if(k1.ImageUrl&&k1.ImageUrl.String){t.setIcon(k1.ImageUrl.String);}else if(k1.ImageUrl&&k1.ImageUrl.Path){t.bindProperty("icon",{path:k1.ImageUrl.Path});}else if(k1.TypeImageUrl&&k1.TypeImageUrl.String){t.setIcon(k1.TypeImageUrl.String);}else if(k1.TypeImageUrl&&k1.TypeImageUrl.Path){t.bindProperty("icon",{path:k1.TypeImageUrl.Path});}if(k1.Title.Value.String){t.setName(k1.Title.Value.String);}else{t.bindProperty("name",Q(k1.Title.Value,k1.Title.EdmType,j1).BindingInfo);}if(k1.Description&&k1.Description.Value){if(k1.Description.Value.String){t.setDescription(k1.Description.Value.String);}else{t.bindProperty("description",Q(k1.Description.Value,k1.Description.EdmType,j1).BindingInfo);}}for(a2 in c[j1]){if(c[j1].hasOwnProperty(a2)){if(a2.search("com.sap.vocabularies.UI.v1.DataPoint")!==-1){b2=c[j1][a2];if(b2){t.addKpi(Z(n,b2,j1,h1));_1+=1;}}if(_1>=3){break;}}}for(i=0;i<l1.length;i+=1){if(l1[i]["com.sap.vocabularies.UI.v1.IsSummary"]){s1=l1[i];break;}}if(s1){z1=15;for(j=0;j<s1.Facets.length;j+=1){C1=s1.Facets[j].Target.AnnotationPath.substring(s1.Facets[j].Target.AnnotationPath.lastIndexOf("@")+1);n1=s1.Facets[j].Target.AnnotationPath;n1=n1.substring(0,n1.lastIndexOf("@")-1);s1.Facets[j].NavPath=n1;D1=w(p,n1,i1);s1.Facets[j].NavEntitySet=D1;if(D1){E1=D1;}else{E1=p;}s1.Facets[j].EntitySet=E1;F1=s(D1,i1);if(F1){G1=F1;}else{G1=j1;}s1.Facets[j].EntityType=G1;H1=[];if(c[G1][C1].length){H1=c[G1][C1];}else if(c[G1][C1].Data.length){H1=c[G1][C1].Data;}s1.Facets[j].Content=H1;for(i=0;i<H1.length;i+=1){I1=a1(H1[i]);if(I1==="High"){A1+=1;}else if(I1==="Medium"){B1+=1;}}}if(A1>=z1){A1=z1;B1=0;}else if((A1+B1)>z1){B1=z1-A1;if(B1<0){B1=0;}}if(jQuery.device.is.phone){B1=0;}M1=z1-A1-B1;U1=new sap.suite.ui.commons.FacetOverview({title:y1.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT")});A=[];A.push(U1);A[0].bLoaded=false;A[0].bProcessed=false;A[0].bIsTable=false;N1=[];P1=B1+A1;for(j=0;j<s1.Facets.length;j+=1){Q1=R(n,s1.Facets[j].EntitySet,s1.Facets[j].Content,{High:A1,Medium:B1,Low:0},null,U1).addStyleClass("sapFactsheetUtiTilePadding");if(j>0){Q1.addStyleClass("sapFactsheetUtiPaddingTop");}if(s1.Facets[j].NavPath){Q1.bindElement(h1+"/"+s1.Facets[j].NavPath);}O1=Y(s1.Facets[j].Content);A1-=O1.High;B1-=O1.Medium;if(((O1.High>0)&&((A1+O1.High)>0))||((O1.Medium>0)&&((B1+O1.Medium)>0))){N1.push(Q1);if(j>0){if(M1>0){M1-=1;}else if(B1>0){B1-=1;}else if(A1>0){A1-=1;}}}if((A1<1)&&(B1<1)){break;}}if(A1<0){A1=0;}if(B1<0){B1=0;}m1=new sap.ui.layout.VerticalLayout({content:N1,width:"100%"});R1=X();T1=1;if((P1>3)&&(P1<=9)){R1=X(2);T1=2;}else if(P1>9){R1=X(3);T1=3;}U1.setContent(m1);U1.setRowSpan(T1);if(jQuery.device.is.phone){U1.setHeightType(sap.suite.ui.commons.FacetOverviewHeight.Auto);}else{U1.setHeight(R1);}U1.addStyleClass("sapFactsheetUtiGeneralInformationOverviewFacet");U1.attachPress({facets:s1},function(o,a){var b,k,h2,i2,m1;t.removeAllFacetContent();h2=new sap.suite.ui.commons.UnifiedThingGroup();h2.setDescription(_());h2.setTitle(y1.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));h2.addStyleClass("sapFactsheetUtiGeneralInformationUtg");if(a.facets.Facets.length>1){b="L6 M12 S12";}else{b="L12 M12 S12";}A[0].Links=[];i2=new sap.ui.layout.VerticalLayout({width:"100%"});for(i=0;i<a.facets.Facets.length;i+=1){if(i%2===0){k=new sap.ui.layout.Grid({hSpacing:1,vSpacing:1,defaultSpan:b});}m1=S(n,p,a.facets.Facets[i],h1,this);m1.addStyleClass("sapFactsheetUtiGeneralInformationUtgContent");if((i===0)&&(a.facets.Facets.length>1)&&(m1.getTitle().trim()==="")){m1.setTitle(y1.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));}k.addContent(m1);if(i%2!==0){i2.addContent(k);}}A[0].bLoaded=true;A[0].bProcessed=false;A[0].bIsTable=false;d(0);if(i%2!==0){i2.addContent(k);}h2.setContent(i2);t.addFacetContent(h2);t.navigateToDetail();});t.addFacet(U1);}p1=function(q1){return function(a){var o,b,k,h2,i2,j2,k2,l2,m2,n2,h1,o2,p2,q2,r2,s2,t2,u2,v2,i;if((q1.cardinality==="*"&&a.results&&a.results.length&&a.results.length!==0)||(q1.cardinality==="1"&&a)){n2=new sap.ui.model.json.JSONModel();if(q1.cardinality==="*"){if(a.results&&a.results.length){n2.setData(a);}}else{n2.setData({result:a});h1="/result";}o=new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/VBI_APPL_DEF_SRV",false);b=c[q1.navigationType]["com.sap.vocabularies.UI.v1.GeoLocation"];p2=c[q1.navigationType]["com.sap.vocabularies.UI.v1.HeaderInfo"];q2=c[q1.navigationType]["com.sap.vocabularies.UI.v1.Identification"];if(b.Longitude&&b.Latitude){h2={"Data":{"Set":{"N":[{"name":"Spots","E":[]}]}}};if(q1.cardinality==="1"){if(b.Longitude.Path&&b.Latitude.Path){k=a[b.Longitude.Path]+";"+a[b.Latitude.Path]+";0";}h2.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}else{for(i=0;i<a.results.length;i+=1){if(b.Longitude.Path&&b.Latitude.Path){k=a.results[i][b.Longitude.Path]+";"+a.results[i][b.Latitude.Path]+";0";}h2.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}if(a.results.length!==0){k=a.results[0][b.Longitude.Path]+";"+a.results[0][b.Latitude.Path]+";0";}}}v2=parseInt(a.__count,10);if(Number(v2)){q1.facet.setQuantity(v2);}k2=function(w2){var x2,y2,z2,A2,B2;x2=$.parseJSON(w2.getParameters().data);if(x2.Action.name==="DETAIL_REQUEST"&&x2.Action.instance){y2=x2.Action.instance;if(n2.oData.results){h1="/results/"+y2.split(".")[1];}u2=p2.TypeName.String.substring(0,17);A2=parseFloat(X(0.7))*16;B2=parseFloat(X(1.5))*16;z2={"SAPVB":{"version":"2.0","xmlns:VB":"VB","Windows":{"Remove":{"name":"Detail1"},"Set":{"name":"Detail1","Window":{"id":"Detail1","type":"callout","refParent":"Main","refScene":"","offsetX":"16","offsetY":"-27","modal":"false","width":B2,"height":A2,"caption":u2,"pos.bind":y2+".GeoPosition"}}},"Scenes":{"Set":{"name":"Details","Scene":{"id":"Details","navControlVisible":"false"}}}}};this.load(z2);}};l2=function(w2){var a2,x2,D1,y2;if(!r2){r2=D(p2.Title,q1.navigationType,i1,q1.facet);r2.setModel(n2);r2.bindElement(h1);s2=D(p2.Description,q1.navigationType,i1,q1.facet);s2.setModel(n2);s2.bindElement(h1);for(a2 in b.Address){if(a2==="label"){o2=D({Value:b.Address[a2]},q1.navigationType,i1,q1.facet);o2.setModel(n2);o2.bindElement(h1);break;}}y2=7;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){y2=4;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){y2=5;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){y2=2;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){y2=3;}t2=new sap.ui.layout.VerticalLayout({width:"100%"}).setModel(n);if(q1.navigationPath){D1=w(q1.entitySet,q1.navigationPath,i1);t2.addContent(R(n,D1,q2,{High:y2},null,q1.facet));t2.setModel(n2).bindElement(h1);}else{t2.addContent(R(n,q1.entitySet,q2,{High:y2},null,q1.facet)).setModel(n2).bindElement(h1);}}else{r2.bindElement(h1);if(s2){s2.bindElement(h1);}if(o2){o2.bindElement(h1);}if(t2){t2.bindElement(h1);}}x2=parseFloat(X(1.5))*16*0.95+"px";if(r2){r2.placeAt(w2.getParameter("contentarea").id);r2.addStyleClass("sapFactsheetUtiGeoPopupHead");if(jQuery.device.is.phone){r2.addStyleClass("sapFactsheetUtiGeoPopupHeadFontPhone");}r2.setWidth(x2);}if(s2){s2.placeAt(w2.getParameter("contentarea").id);s2.addStyleClass("sapFactsheetUtiGeoPopupDescr");if(jQuery.device.is.phone){s2.addStyleClass("sapFactsheetUtiGeoPopupDescrFontPhone");}s2.setWidth(x2);}if(o2){o2.placeAt(w2.getParameter("contentarea").id);o2.addStyleClass("sapFactsheetUtiGeoPopupText");o2.setWidth(x2);}if(t2&&t2.getContent()[0]&&t2.getContent()[0].getContent&&t2.getContent()[0].getContent().length>0){t2.placeAt(w2.getParameter("contentarea").id);t2.addStyleClass("sapFactsheetUtiGeoPopupText");t2.setWidth(x2);}if(A.indexOf(q1.facet)>=0){A[A.indexOf(q1.facet)].bLoaded=true;A[A.indexOf(q1.facet)].bProcessed=false;A[A.indexOf(q1.facet)].bIsTable=false;}d(A.indexOf(q1.facet));};m2=function(w2){if(r2){r2.destroy();r2=undefined;}if(s2){s2.destroy();s2=undefined;}if(o2){o2.destroy();o2=undefined;}if(t2){t2.destroy();t2=undefined;}$(w2.getParameter("contentarea").id).empty();};i2=function(q1){return function(a){var w2,x2,y2,z2,i;z2=a.ProjectJSON;z2=z2.indexOf("{")?z2.substr(z2.indexOf("{")):z2;w2=$.parseJSON(z2);w2.SAPVB.Scenes.Set.SceneGeo.initialStartPosition=k;w2.SAPVB.Scenes.Set.SceneGeo.initialZoom=12;w2.SAPVB.Actions.Set.Action.push({id:"200",name:"TAP_ON_MAP",refEvent:"Click",refScene:"MainScene",refVO:"Map"});if(h2){w2.SAPVB.Data=h2.Data;}for(i=0;i<w2.SAPVB.Scenes.Set.SceneGeo.VO.length;i+=1){if(w2.SAPVB.Scenes.Set.SceneGeo.VO[i].datasource==="Spots"){if(w2.SAPVB.Scenes.Set.SceneGeo.VO[i].scale&&w2.SAPVB.Scenes.Set.SceneGeo.VO[i].scale.split(";").length!==3){w2.SAPVB.Scenes.Set.SceneGeo.VO[i].scale="1.0;1.0;1.0";break;}}}q1.facet.getContent().attachSubmit(function(A2){if(jQuery.device.is.tablet||jQuery.device.is.phone){q1.facet.firePress();}});q1.facet.getContent().load(w2);q1.facet.attachPress("",function(A2,B2){var C2=[],D2=[],i,E2;if(!x2){x2=new sap.ui.vbm.VBI({width:"100%",height:"100%",plugin:false,config:null});x2.addStyleClass("sapFactsheetUtiGeoPopup");}w2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.move="false";w2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.zoom="false";w2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.pitch="false";w2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.yaw="false";w2.SAPVB.Scenes.Set.SceneGeo.SuppressedNavControlVisibility="false";x2.load(w2);if(q1.cardinality==="*"){for(i=0;i<n2.oData.results.length;i+=1){C2.push(n2.oData.results[i][b.Longitude.Path]);D2.push(n2.oData.results[i][b.Latitude.Path]);}}x2.attachSubmit(k2);x2.attachOpenWindow(l2);x2.attachCloseWindow(m2);y2=new sap.suite.ui.commons.UnifiedThingGroup({content:x2,title:q1.facetContent.Label.String,description:_()});t.removeAllFacetContent();t.addFacetContent(y2);t.navigateToDetail();t.attachAfterNavigate(C2,function(A2){if(A2.getParameters().getParameters().toId.indexOf("-detail-page")!==-1){if(jQuery.device.is.phone){E2="300px";}else{E2=Math.floor($("#"+A2.getParameters().getParameters().toId+"-cont").height()-128)+"px";}x2.setHeight(E2);if(C2.length>1){x2.zoomToGeoPosition(C2,D2);}}});});};};j2=function(w2){return function(x2){t.removeFacet(w2);};};o.read("VBIApplicationSet('ZFACTSHEETS')","","",false,i2(q1),j2(q1.facet));}else{q1.facet.setQuantity(undefined);q1.facet.addStyleClass("sapFactsheetUtiEmptyTile");q1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S);q1.facet.setContent(undefined);q1.facet.setTitle(undefined);}};};o1=function(q1){return function(a){var o,b,k,h2,i2,j2,i,j,m1,k2,l2,m2,n2,o2,p2,q2,r2,s2,t2,u2,v2,w2,x2,y2,z2,A2="",B2,C2,D2,E2,F2,G2;o=new sap.ui.model.json.JSONModel();if(q1.facetContent.Target&&q1.facetContent.Target.AnnotationPath&&q1.facetContent.Target.AnnotationPath.split("#")[1]&&c[q1.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+q1.facetContent.Target.AnnotationPath.split("#")[1]]){b=c[q1.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+q1.facetContent.Target.AnnotationPath.split("#")[1]];}else{b=c[q1.navigationType]["com.sap.vocabularies.UI.v1.Badge"];}if(q1.cardinality==="*"){if(a.results&&a.results.length){B2=q1.facetContent.Target.AnnotationPath;c2=B2.substring(B2.lastIndexOf("@")+1);if(c2==="com.sap.vocabularies.UI.v1.Chart"){C2=c[q1.navigationType]["com.sap.vocabularies.UI.v1.Chart"];D2=c.propertyExtensions[q1.navigationType];E2=[];for(i=0;i<C2.Dimensions.length;i+=1){E2.push({axis:1,name:D2[C2.Dimensions[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+C2.Dimensions[i].PropertyPath+"}"});}F2=[];for(i=0;i<C2.Measures.length;i+=1){F2.push({name:D2[C2.Measures[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+C2.Measures[i].PropertyPath+"}"});}G2=new F({dimensions:E2,measures:F2,data:{path:"/results"}});m1=W(C2.ChartType.EnumMember,C2.Title,C2.Description,G2);m1.setModel(o);q1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.XL);}else{m1=new sap.ui.layout.VerticalLayout({width:"100%"}).addStyleClass("sapFactsheetUtiVLayoutPadding");for(i=0;i<a.results.length;i+=1){i2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutPadding");k=D(b.Title,q1.navigationType,i1,q1.facet);if(k.setWrapping){k.setWrapping(false);}sap.ui.getCore().byId(t.getId()+"-master-page").addDelegate({onAfterShow:(function(i2){return function(){var H2,I2;H2=i2.getParent().getDomRef().clientWidth;I2=H2;if(i2.getContent()[0]){I2-=i2.getContent()[0].getDomRef().clientWidth;if(H2<i2.getContent()[0].getDomRef().clientWidth){i2.getContent()[0].getDomRef().setAttribute("style","width:"+H2+"px");return;}}if(i2.getContent()[1]){I2-=i2.getContent()[1].getDomRef().clientWidth;}if(I2<10){I2=0;}if(i2.getContent()[2]){i2.getContent()[2].getDomRef().setAttribute("style","width:"+I2+"px");}};}(i2))});o=new sap.ui.model.json.JSONModel();o.setData({result:a.results[i]});k.setModel(o);k.bindElement("/result");j2=false;if(a.results[i][b.Title.Value.Path]){j2=true;}if(b.Title.Value.Apply){for(j=0;j<b.Title.Value.Apply.Parameters.length;j+=1){if(b.Title.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][b.Title.Value.Apply.Parameters[j].Value]){j2=true;break;}}}}A2="";if(j2){i2.addContent(k);if(b.MainInfo&&((b.MainInfo.EdmType&&b.MainInfo.EdmType==="Edm.Decimal")||(b.MainInfo.Value&&b.MainInfo.Value.Apply&&b.MainInfo.Value.Apply.Parameters[0]&&b.MainInfo.Value.Apply.Parameters[0].EdmType&&b.MainInfo.Value.Apply.Parameters[0].EdmType==="Edm.Decimal"))){A2="comma";}else if(b.MainInfo&&b.MainInfo.Value.Path&&a.results[i][b.MainInfo.Value.Path]){A2="dash";}else if(b.MainInfo&&b.MainInfo.Value.Apply){for(j=0;j<b.MainInfo.Value.Apply.Parameters.length;j+=1){if(b.MainInfo.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][b.MainInfo.Value.Apply.Parameters[j].Value]){A2="dash";break;}}}}if(A2==="dash"){i2.addContent(new sap.ui.core.HTML({content:"<span class=\"sapFactsheetUtiSeparatorPadding sapMText\"> &ndash; </span>"}));}if(A2==="comma"){i2.addContent(new sap.m.Text({text:", "}).addStyleClass("sapFactsheetUtiSeparatorPaddingForDecimal"));}}if(b.MainInfo){h2=D(b.MainInfo,q1.navigationType,i1,q1.facet);if(h2.setWrapping){h2.setWrapping(false);}h2.setModel(o);h2.bindElement("/result");i2.addContent(h2);}m1.addContent(i2);}}k2=parseInt(a.__count,10);if(Number(k2)){q1.facet.setQuantity(k2);}q1.facet.setContent(m1);q1.facet.attachPress({facet:q1.facetContent},function(H2,I2){var m1;t.removeAllFacetContent();A[A.indexOf(q1.facet)].Links=[];m1=S(n,q1.entitySet,I2.facet,q1.bindingPath,this);m1.setDescription(_());t.addFacetContent(m1);if(A.indexOf(q1.facet)>=0){A[A.indexOf(q1.facet)].bLoaded=false;A[A.indexOf(q1.facet)].bProcessed=false;A[A.indexOf(q1.facet)].bIsTable=true;}d(A.indexOf(q1.facet));t.navigateToDetail();});}else{q1.facet.setQuantity(0);q1.facet.addStyleClass("sapFactsheetUtiEmptyTile");q1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S);}if(A.indexOf(q1.facet)>=0){A[A.indexOf(q1.facet)].bLoaded=true;A[A.indexOf(q1.facet)].bProcessed=false;A[A.indexOf(q1.facet)].bIsTable=false;}d(A.indexOf(q1.facet));}else{o.setData({result:a});for(y2 in a){if(a.hasOwnProperty(y2)){if(y2!=="__metadata"){if(typeof a[y2]==="string"&&a[y2]){if(parseInt(a[y2],10)!==0){z2=true;break;}}else if(typeof a[y2]==="number"&&parseInt(a[y2],10)!==0){z2=true;break;}}}}if(z2){l2=new sap.ui.layout.VerticalLayout();m2=(c.propertyExtensions)?c.propertyExtensions[q1.navigationType]:[];n2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutLabelValue");o2=E(b.Title,{},m2,true).addStyleClass("sapFactsheetUtiLabelMargin");k=D(b.Title,q1.navigationType,i1,q1.facet);k.setModel(o);k.bindElement("/result");n2.addContent(o2);n2.addContent(k);l2.addContent(n2);if(b.MainInfo){p2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutLabelValue");q2=E(b.MainInfo,{},m2,true).addStyleClass("sapFactsheetUtiLabelMargin");h2=D(b.MainInfo,q1.navigationType,i1,q1.facet);h2.setModel(o);h2.bindElement("/result");p2.addContent(q2);p2.addContent(h2);l2.addContent(p2);}if(b.SecondaryInfo){r2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutLabelValue");s2=E(b.SecondaryInfo,{},m2,true).addStyleClass("sapFactsheetUtiLabelMargin");t2=D(b.SecondaryInfo,q1.navigationType,i1,q1.facet);t2.setModel(o);t2.bindElement("/result");r2.addContent(s2);r2.addContent(t2);l2.addContent(r2);}if(b.TypeImageUrl||b.ImageUrl){if(b.ImageUrl){u2=b.ImageUrl;}else{u2=b.TypeImageUrl;}v2=new sap.ui.layout.HorizontalLayout();w2="64px";if(jQuery.device.is.phone){w2="48px";}if(u2.String&&(u2.String.substr(0,11)==="sap-icon://")){x2=new sap.ui.core.Icon({size:w2,width:w2});}else{x2=new sap.m.Image({width:w2});}x2.addStyleClass("sapFactsheetUtiRelIcon");if(u2&&u2.String){x2.setSrc(u2.String);}else{if(u2&&u2.Path){x2.bindProperty("src",u2.Path);}}v2.addContent(x2);v2.addContent(l2);q1.facet.setContent(v2);}else{q1.facet.setContent(l2);}q1.facet.attachPress({facet:q1.facetContent},function(H2,I2){var m1;t.removeAllFacetContent();A[A.indexOf(q1.facet)].Links=[];m1=S(n,q1.entitySet,I2.facet,q1.bindingPath,this);m1.setDescription(_());t.addFacetContent(m1);if(A.indexOf(q1.facet)>=0){A[A.indexOf(q1.facet)].bLoaded=true;A[A.indexOf(q1.facet)].bProcessed=false;A[A.indexOf(q1.facet)].bIsTable=false;}d(A.indexOf(q1.facet));t.navigateToDetail();});}else{q1.facet.addStyleClass("sapFactsheetUtiEmptyTile");q1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S);}if(A.indexOf(q1.facet)>=0){A[A.indexOf(q1.facet)].bLoaded=true;A[A.indexOf(q1.facet)].bProcessed=false;A[A.indexOf(q1.facet)].bIsTable=false;}d(A.indexOf(q1.facet));}};};f2=function(q1){return function(a){t.removeFacet(q1.facet);};};d2=function(q1){return function(a){var o,b,i,k,h2;b=c[q1.navigationType]["com.sap.vocabularies.UI.v1.MediaResource"];if(q1.cardinality==="*"){if(a.results&&a.results.length){o=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiPictureViewerOverview");for(i=0;i<a.results.length;i+=1){o.addContent(new sap.m.Image({src:a.results[i][b.Thumbnail.Url.Path],height:"85px"}));if(i===3){break;}}k=parseInt(a.__count,10);if(Number(k)){q1.facet.setQuantity(k);}q1.facet.setContent(o);q1.facet.attachPress({facet:q1.facetContent,data:a},function(i2,j2){var k2,e2,l2;t.removeAllFacetContent();h2=new sap.suite.ui.commons.UnifiedThingGroup();if(j2.facet.Label&&j2.facet.Label.String){h2.setTitle(j2.facet.Label.String);}h2.setDescription(_());if(jQuery.device.is.phone){e2="350px";}else{e2="550px";}k2=new sap.m.Carousel({height:e2});for(i=0;i<j2.data.results.length;i+=1){l2=new sap.m.Image({src:j2.data.results[i][b.Url.Path]});if(jQuery.device.is.phone){l2.addStyleClass("sapFactsheetUtiCarouselMaxImageHeightPhone");}else{l2.addStyleClass("sapFactsheetUtiCarouselMaxImageHeight");}k2.addPage(l2);}h2.setContent(k2);t.addFacetContent(h2);t.navigateToDetail();});}else{q1.facet.setQuantity(0);q1.facet.addStyleClass("sapFactsheetUtiEmptyTile");q1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S);}}};};g2=function(o,h2){var k,i,j,i2=[],j2={},k2,l2,m2,n2,o2,p2,q2,r2;l2=function(i1,a){var i,b="";if(i1){if(i1.Path){return a[i1.Path];}else if(i1.String){return i1.String;}else if(i1.Apply.Name==="odata.concat"){for(i=0;i<i1.Apply.Parameters.length;i+=1){if(i1.Apply.Parameters[i].Type==="Path"){b=b+a[i1.Apply.Parameters[i].Value];}else if(i1.Apply.Parameters[i].Type==="String"){b=b+i1.Apply.Parameters[i].Value;}}return b;}}};j2.iCount=0;j2.aContacts=[];for(i=0;i<o.__batchResponses.length;i+=1){if(!o.__batchResponses[i].data){continue;}i2=o.__batchResponses[i].data.results;if(!i2){i2=[];i2.push(o.__batchResponses[i].data);}if(i2.length>0){k2=c[i2[0].__metadata.type]["com.sap.vocabularies.Communication.v1.Contact"];if(k2){for(j=0;j<i2.length;j+=1){m2=n2=o2="";if(k2.tel){for(k=0;k<k2.tel.length;k+=1){if(k2.tel[k].type&&k2.tel[k].type.EnumMember){p2=l2(k2.tel[k].uri,i2[j]);switch(k2.tel[k].type.EnumMember){case"com.sap.vocabularies.Communication.v1.PhoneType/voice":m2=p2?p2.replace("tel:",""):"";m2=m2?m2.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/cell":n2=p2?p2.replace("tel:",""):"";n2=n2?n2.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/fax":o2=p2?p2.replace("tel:",""):"";o2=o2?o2.replace(";ext=",""):"";break;}}}}r2=k2.email&&k2.email.address?k2.email.address:"";q2=l2(k2.photo,i2[j]);j2.iCount+=1;j2.aContacts.push({fn:l2(k2.fn,i2[j]),title:l2(k2.title,i2[j]),org:l2(k2.org,i2[j]),phone:m2,mobile:n2,fax:o2,photo:q2,email:l2(r2,i2[j]),sEntity:i2[0].__metadata.type,bExistsPhoto:q2?true:false,bUseIcon:q2?false:true,sOrder:j2.iCount});}}}}if(h2){j2.aContacts.sort(function(a,b){return a[h2]>b[h2]?1:-1;});}return j2;};L1=function(q1){return function(o){var i,a,b,k,h2,i2,j2,k2;a=g2(o,"sOrder");b=new sap.ui.layout.Grid({defaultSpan:"L6 M6 S12",hSpacing:0,vSpacing:0}).addStyleClass("sapFactsheetUtiContactsGrid");for(i=0;i<a.aContacts.length&&i<4;i+=1){i2=new sap.ui.layout.VerticalLayout();if(a.aContacts[i].photo){j2=new sap.m.Image({height:"55px",src:a.aContacts[i].photo});}else{j2=new sap.ui.core.Icon({size:"50px",src:sap.ui.core.IconPool.getIconURI("person-placeholder")}).addStyleClass("sapFactsheetUtiRelIcon");}i2.addContent(j2);i2.addStyleClass("sapFactsheetUtiContactsImage");h2=new sap.ui.layout.VerticalLayout({content:[new sap.m.Text({text:a.aContacts[i].fn}).addStyleClass("sapFactsheetUtiTextName"),new sap.m.Text({text:a.aContacts[i].title}).addStyleClass("sapFactsheetUtiTextValue")]});k=new sap.ui.layout.HorizontalLayout({content:[i2,h2]}).addStyleClass("sapFactsheetUtiContactsBox");b.addContent(k);}U1=sap.ui.getCore().byId(t.data("contactFacetId"));U1.setQuantity(a.iCount);if(i>0){U1.setContent(b);if(i<=2){k2=sap.suite.ui.commons.FacetOverviewHeight.M;}else{k2=sap.suite.ui.commons.FacetOverviewHeight.L;}U1.attachPress(function(){var i,J1=[],K1;n.clearBatch();for(i=0;i<c[j1]["com.sap.vocabularies.UI.v1.Contacts"].length;i+=1){n1=c[j1]["com.sap.vocabularies.UI.v1.Contacts"][i].AnnotationPath;n1=n1.substring(0,n1.lastIndexOf("@")-1);if(n1!==""){K1=h1+"/"+n1;}else{K1=h1;}J1.push(n.createBatchOperation(K1,"GET"));}n.addBatchReadOperations(J1);n.submitBatch(function(o){var a,l2,m2,n2,o2,p2,q2;q2=jQuery.sap.resources({url:jQuery.sap.getModulePath("sap.ushell.components.container.")+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});a=g2(o,"sEntity");l2=new sap.ui.model.json.JSONModel();l2.setData(a);m2=new sap.m.ColumnListItem({type:sap.m.Inactive,unread:false,cells:[new sap.ui.layout.VerticalLayout({content:[new sap.m.Image({src:"{photo}",width:"74px",visible:"{bExistsPhoto}"}),new sap.ui.core.Icon({size:"76px",src:sap.ui.core.IconPool.getIconURI("person-placeholder"),visible:"{bUseIcon}"}).addStyleClass("sapFactsheetUtiRelIcon")]}),new sap.ui.layout.VerticalLayout({content:[new sap.m.Text({text:"{fn}"}).addStyleClass("sapFactsheetUtiContactsName"),new sap.m.Label({text:"{title}"}),new sap.m.Label({text:"{org}"})]}),new sap.m.Link({text:"{phone}",href:"tel:{phone}"}),new sap.m.Link({text:"{mobile}",href:"tel:{mobile}"}),new sap.m.Link({text:"{fax}",href:"tel:{fax}"}),new sap.m.Link({text:"{email}",href:"mailto:{email}"})]});n2=new sap.m.Table({threshold:2,inset:false,showUnread:true,scrollToLoad:true,columns:[new sap.m.Column({hAlign:sap.ui.core.TextAlign.Center,width:"12%",header:new sap.m.Text({text:""})}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,header:new sap.m.Text({text:q2.getText("USHELL_FACTSHEET_NAME")})}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,width:"12%",header:new sap.m.Text({text:q2.getText("USHELL_FACTSHEET_PHONE")}),minScreenWidth:"Tablet",demandPopin:true}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,width:"12%",header:new sap.m.Text({text:sap.ushell.resources.i18n.getText("mobile")}),minScreenWidth:"Tablet",demandPopin:true}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,width:"12%",header:new sap.m.Text({text:sap.ushell.resources.i18n.getText("fax")}),minScreenWidth:"Tablet",demandPopin:true}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,width:"26%",header:new sap.m.Text({text:q2.getText("USHELL_FACTSHEET_EMAIL")}),minScreenWidth:"Tablet",demandPopin:true})],items:{path:"/aContacts",template:m2}});o2=new sap.m.ViewSettingsDialog({sortItems:[new sap.m.ViewSettingsItem({key:"fn",text:q2.getText("USHELL_FACTSHEET_NAME")}),new sap.m.ViewSettingsItem({key:"phone",text:q2.getText("USHELL_FACTSHEET_PHONE")}),new sap.m.ViewSettingsItem({key:"mobile",text:sap.ushell.resources.i18n.getText("mobile")}),new sap.m.ViewSettingsItem({key:"fax",text:sap.ushell.resources.i18n.getText("fax")}),new sap.m.ViewSettingsItem({key:"email",text:q2.getText("USHELL_FACTSHEET_EMAIL")})],confirm:function(r2){var s2,t2,u2=[];s2=r2.getParameters();t2=n2.getBinding("items");if(s2.sortItem){u2.push(new sap.ui.model.Sorter(s2.sortItem.getKey(),s2.sortDescending));t2.sort(u2);}}});n2.setHeaderToolbar(new sap.m.Toolbar({content:[new sap.m.Label(),new sap.m.ToolbarSpacer(),new sap.m.Button({icon:"sap-icon://drop-down-list",press:function(r2){o2.open();}})]}));n2.setModel(l2);p2=new sap.suite.ui.commons.UnifiedThingGroup({title:U1.getTitle(),description:_(),content:n2});t.removeAllFacetContent();t.addFacetContent(p2);t.navigateToDetail();});});}else{k2=sap.suite.ui.commons.FacetOverviewHeight.S;U1.addStyleClass("sapFactsheetUtiEmptyTile");U1.setQuantity(0);}U1.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:k2);};};for(i=0;i<l1.length;i+=1){if(l1[i]["com.sap.vocabularies.UI.v1.Map"]){n1=l1[i].Target.AnnotationPath;n1=n1.substring(0,n1.lastIndexOf("@")-1);X1="1";W1=j1;if(n1){W1=b1(n1,j1,i1);X1=x(p,n1,i1);}e2="100%";if(jQuery.device.is.phone){e2="150px";}V1=new sap.ui.vbm.VBI({width:"100%",height:e2,plugin:false,config:null});U1=new sap.suite.ui.commons.FacetOverview({title:l1[i].Label.String.trim(),heightType:jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.L,content:V1});A.push(U1);A[A.length-1].bLoaded=false;A[A.length-1].bProcessed=false;A[A.length-1].bIsTable=false;q1={cardinality:X1,navigationPath:n1,facet:U1,facetContent:l1[i],navigationType:W1,metadata:i1,bindingPath:h1,entitySet:p};if(X1==="*"){Y1=["$inlinecount=allpages","$top=1000"];}else{Y1=[];}n.read(h1+"/"+n1,"",Y1,true,p1(q1));t.addFacet(U1);}else{if(l1[i].Target){n1=l1[i].Target.AnnotationPath;n1=n1.substring(0,n1.lastIndexOf("@")-1);c2=l1[i].Target.AnnotationPath.substring(l1[i].Target.AnnotationPath.lastIndexOf("@")+1);if(n1){W1=b1(n1,j1,i1);U1=new sap.suite.ui.commons.FacetOverview({title:l1[i].Label.String.trim(),heightType:jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.M});X1=x(p,n1,i1);if(X1!==0){q1={cardinality:X1,navigationPath:n1,facet:U1,facetContent:l1[i],navigationType:W1,metadata:i1,bindingPath:h1,entitySet:p};if(l1[i]["com.sap.vocabularies.UI.v1.Gallery"]){if(X1==="*"){Y1=["$inlinecount=allpages"];}else{Y1=[];}n.read(h1+"/"+n1,"",Y1,true,d2(q1));}else{A.push(U1);A[A.length-1].bLoaded=false;A[A.length-1].bProcessed=false;A[A.length-1].bIsTable=false;if(X1==="*"){Y1=["$inlinecount=allpages","$top=3"];}else{Y1=[];}n.read(h1+"/"+n1,"",Y1,true,o1(q1),f2(q1));}t.addFacet(U1);}}else{if(c2==="com.sap.vocabularies.UI.v1.Contacts"){U1=new sap.suite.ui.commons.FacetOverview({title:l1[i].Label.String.trim(),heightType:jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.M});t.data("contactFacetId",U1.sId);q1={facet:U1};n.clearBatch();for(j=0;j<c[j1][c2].length;j+=1){n1=c[j1][c2][j].AnnotationPath;n1=n1.substring(0,n1.lastIndexOf("@")-1);if(n1!==""){X1=x(p,n1,i1);if(X1==="*"){K1=h1+"/"+n1+"?$top=4"+"&$inlinecount=allpages";}else{K1=h1+"/"+n1;}}else{K1=h1;}J1.push(n.createBatchOperation(K1,"GET"));}n.addBatchReadOperations(J1);n.submitBatch(L1(q1));t.addFacet(U1);}}}}}S1=new sap.ushell.ui.footerbar.AddBookmarkButton();$1=function(){var b,i,c2,a,k,h2={},a2,i2,j2,k2,o,l2,m2,n2,o2;S1.setAppData({title:t.getTitle(),subtitle:t.getName()+" - "+t.getDescription()});S1.setEnabled(true);m2=sap.ushell.Container.getService("URLParsing");n2=m2.getShellHash(window.location.href);o2=m2.parseShellHash(n2);j2=o2.semanticObject;u1=new sap.suite.ui.commons.LinkActionSheet({showCancelButton:true,placement:sap.m.PlacementType.Top});r1=G(e,n);b=r1.split(",");for(i=0;i<b.length;i+=1){b[i]=b[i].replace("='","=","g");if(b[i].lastIndexOf("'")===b[i].length-1){b[i]=b[i].slice(0,-1);}}for(c2 in c[j1]){if(c[j1].hasOwnProperty(c2)){if(c2.indexOf("com.sap.vocabularies.Common.v1.SecondaryKey")===0){a=c[j1][c2];for(i=0;i<a.length;i+=1){k=this.getBoundContext().getProperty(a[i].PropertyPath);if(k){b.push(a[i].PropertyPath+"="+k);}}}}}for(i=0;i<b.length;i+=1){a2=b[i].substr(0,b[i].indexOf("="));i2=b[i].substr(b[i].indexOf("=")+1,b[i].length);h2[decodeURIComponent(a2)]=decodeURIComponent(i2);}t1=sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(j2,h2);t1.done(jQuery.proxy(function(p2){var i,q2,r2;for(i=0;i<p2.length;i+=1){r2=p2[i].intent;if(r2.indexOf(c1)<0&&r2.indexOf("-analyzeKPIDetails~")<0&&r2.indexOf("-analyzeSBKPIDetails~")<0&&r2.indexOf("-NavigateToMaintainCusProj~")<0&&r2.indexOf("CostCenter-manageCostCenter~")<0&&r2.indexOf("AccountingDocument-analyzeDocumentJournal~")<0&&r2.indexOf("AccountingDocument-analyzeGLLineItem~")<0&&r2.indexOf("ControllingDocument-analyzeCostCenters~")<0&&r2.indexOf("ControllingDocument-analyzeInternalOrders~")<0&&r2.indexOf("ControllingDocument-analyzeMarketSegment~")<0&&r2.indexOf("ControllingDocument-analyzeProfitCentersActuals~")<0&&r2.indexOf("ControllingDocument-analyzeProfitLoss~")<0&&r2.indexOf("ControllingDocument-analyzeProjectsActuals~")<0&&r2.indexOf("PurchaseOrder-create~")<0){q2=sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({target:{shellHash:r2}});u1.addItem(new sap.m.Link({text:p2[i].text,href:q2}));t.setTransactionsVisible(true);}}}));t.attachTransactionsButtonPress(function(p2){u1.openBy(p2.getParameter("caller"));});this.detachChange($1);sap.ushell.services.AppConfiguration.setWindowTitle(t.getTitle().trim()+": "+t.getName().trim()+" ("+t.getDescription().trim()+")");t.setActionsVisible(true);Z1=new sap.m.Button({text:y1.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_EMAIL_LINK"),icon:"sap-icon://email",press:function(oE){sap.m.URLHelper.triggerEmail("",t.getName(),window.location.href);}});v1=new sap.m.ActionSheet({placement:sap.m.PlacementType.Top});k2=e.substr(0,e.lastIndexOf("/")+1);for(o in n.oData){if(n.oData.hasOwnProperty(o)){k2=k2+o;l2=o.substring(o.indexOf("(")+1,o.indexOf(")"));break;}}v1.addButton(new sap.ushell.ui.footerbar.JamDiscussButton({jamData:{businessObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:p,key:l2,name:t.getTitle(),ui_url:window.location.href}}}));v1.addButton(new sap.ushell.ui.footerbar.JamShareButton({jamData:{object:{id:window.location.href,display:new sap.m.Text({text:t.getTitle()}),share:""},externalObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:p,key:l2,name:t.getTitle()}}}));v1.addButton(S1);v1.addButton(Z1);t.attachActionsButtonPress(function(p2){v1.openBy(p2.getParameter("caller"));});A[0].bLoaded=true;A[0].bProcessed=false;d(0);};t.getElementBinding().attachChange($1);t.attachBackAction(function(o){history.back();});t.addDelegate({onAfterRendering:function(){t._adjustFacetLayout();}});return t;};return function(a,b){try{t=O(a,b,new U({configurationVisible:false}));}catch(e){throw e;}return t;};},true);
sap.ui.predefine('sap/ushell/components/factsheet/tools/ODataUrlTemplating',function(){"use strict";
function P(p,t,u){this.parameter=p;this.template=t;this.semiConvertedUrl=u;this.message=" is a missing key parameter for constructing the entity url";this.toString=function(){return this.parameter+this.message;};}
var O={ParameterException:P,resolve:function(t,d){var e,v,p,i,b=t.match(/{\s*[\w\.]+\s*}/g);e=t;for(i=b.length-1;i>=0;i-=1){p=b[i];v=d[p.replace(/[{}]/g,"")];if(v!==undefined){if(typeof v!=="string"){v=v[0];}v=encodeURIComponent(decodeURIComponent(v));e=e.replace(p,v);}}p=e.match(/{\s*[\w\.]+\s*}/g);if(p){jQuery.sap.log.error(" "+e);throw new this.ParameterException(p,t,e);}return e;}};return O;},true);
sap.ui.predefine('sap/ushell/components/homepage/ActionMode',["sap/ushell/utils/WindowUtils"],function(W){"use strict";var A=function(){this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe('launchpad','actionModeInactive',this.scrollToViewPoint,this);this.oEventBus.subscribe('launchpad','actionModeActive',this.scrollToViewPoint,this);this.viewPoint=undefined;this.init=function(m){this.oModel=m;};};
A.prototype.activate=function(){var t;this.oModel.setProperty('/tileActionModeActive',true);this.aOrigHiddenGroupsIds=sap.ushell.utils.getCurrentHiddenGroupIds(this.oModel);var d=sap.ui.getCore().byId("dashboardGroups");d.addLinksToUnselectedGroups();t=sap.ui.getCore().byId("ActionModeBtn");if(t){t.setTooltip(sap.ushell.resources.i18n.getText("exitEditMode"));t.setText(sap.ushell.resources.i18n.getText("exitEditMode"));if(t.data("isShellHeader")){t.setSelected(true);}}this.oEventBus.publish('launchpad','actionModeActive');};
A.prototype.scrollToViewPoint=function(){var d=this.viewPoint;d.restoreLastFocusedTile=true;if(!this.oModel.getProperty('/tileActionModeActive')){var j=jQuery(".sapUshellTileContainerHeader[tabindex=0]");if(j&&j.length>0){var a=j[0].closest('.sapUshellTileContainer');if(a){d.restoreLastFocusedTileContainerById=a.id;}}}d.iDuration=0;window.setTimeout(jQuery.proxy(this.oEventBus.publish,this.oEventBus,"launchpad","scrollToGroup",d),0);};
A.prototype.deactivate=function(){var t=sap.ui.getCore().byId("TileActions"),T;this.oModel.setProperty('/tileActionModeActive',false);this.oEventBus.publish("launchpad",'actionModeInactive',this.aOrigHiddenGroupsIds);if(t!==undefined){t.destroy();}sap.ui.require(['sap/m/MessageToast'],function(M){M.show(sap.ushell.resources.i18n.getText("savedChanges"),{duration:4000});});T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(sap.ushell.resources.i18n.getText("activateEditMode"));T.setText(sap.ushell.resources.i18n.getText("activateEditMode"));if(T.data("isShellHeader")){T.setSelected(false);}}};
A.prototype.toggleActionMode=function(m,s,d){var t=m.getProperty('/tileActionModeActive'),c=m.getProperty('/topGroupInViewPortIndex'),h=m.getProperty("/homePageGroupDisplay"),g=m.getProperty("/groups")||[],f=null,n=0;if(!d){d=[];}var v=d.filter(function(i){return i.getVisible();});g.forEach(function(G,i){if(G.isGroupVisible&&G.visibilityModes[t?0:1]){n+=1;if(f===null){f=i;}G.showGroupHeader=true;}});if(n>1){g[f].showGroupHeader=false;}var a=v[c];if(a){var e=t?-49:49;var b=(h==="tabs")?d[0].getDomRef():a.getDomRef();var S=0;if(b){S=b.offsetTop;}var j=document.getElementById("sapUshellDashboardPage-cont").scrollTop-S;this.viewPoint={group:v[c],fromTop:j+e};}else{this.viewPoint={fromTop:0};}if(t){this.deactivate();}else{this.activate();}};
A.prototype.activateGroupEditMode=function(g){var j=jQuery(g.getDomRef()).find('.sapUshellTileContainerContent');j.addClass("sapUshellTileContainerEditMode");};
A.prototype._openActionsMenu=function(e,v){var t=this,T=v?v:e.getSource(),l=sap.ushell.Container.getService("LaunchPage"),a=[],o=sap.ui.getCore().byId("TileActions"),i,n,b,c,d,h,f,g;if(T){d=T.getBindingContext().getObject().object;a=l.getTileActions(d);}t.oTileControl=T;jQuery(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");f=jQuery(e.getSource().getDomRef()).find(".sapUshellTileActionLayerDiv");f.addClass("sapUshellTileActionLayerDivSelected");if(o===undefined){o=new sap.m.ActionSheet("TileActions",{placement:sap.m.PlacementType.Bottom,afterClose:function(){$(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var E=sap.ui.getCore().getEventBus();E.publish("dashboard","actionSheetClose",t.oTileControl);}});}else{o.destroyButtons();}if(a.length===0||T.oParent.getProperty("isGroupLocked")){n=new sap.m.Button({text:sap.ushell.resources.i18n.getText("tileHasNoActions"),enabled:false});o.addButton(n);}else{for(i=0;i<a.length;i++){c=a[i];h=function(c){return function(){t._handleActionPress(c,T);};}(c);b=new sap.m.Button({text:c.text,icon:c.icon,press:h});o.addButton(b);}}g=e.getSource().getActionSheetIcon?e.getSource().getActionSheetIcon():undefined;if(g){o.openBy(g);}else{var m=sap.ui.getCore().byId(e.getSource().getId()+"-action-more");if(m){o.openBy(m);}else{o.openBy(e.getSource());}}};
A.prototype._handleActionPress=function(a,t){if(a.press){a.press.call(a,t);}else if(a.targetURL){if(a.targetURL.indexOf("#")===0){hasher.setHash(a.targetURL);}else{W.openURL(a.targetURL,'_blank');}}else{sap.ui.require(['sap/m/MessageToast'],function(M){M.show("No Action");});}};
return new A();},true);
sap.ui.predefine('sap/ushell/components/homepage/Component',['sap/ushell/components/HomepageManager','sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/homepage/ComponentKeysHandler','sap/ushell/UserActivityLog','sap/ushell/Config','sap/ushell/bootstrap/common/common.load.model',"sap/ushell/components/SharedComponentUtils"],function(H,r,U,C,a,b,m,s){"use strict";return U.extend("sap.ushell.components.homepage.Component",{metadata:{version:"1.60.40",library:"sap.ushell.components.homepage",dependencies:{libs:["sap.m"]},config:{semanticObject:'Shell',action:'home',title:r.i18n.getText("homeBtn_tooltip"),fullWidth:true,hideLightBackground:true}},init:function(){this.oModel=m.getModel();this.setModel(this.oModel);U.prototype.init.apply(this,arguments);var d={model:this.oModel,view:this.oDashboardView};this.oHomepageManager=new H("dashboardMgr",d);this.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted",function(){sap.ui.require(["sap/ushell/components/homepage/FLPAnalytics"]);});s.toggleUserActivityLog();s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");b.on("/core/home/homePageGroupDisplay").do(function(n){this.oHomepageManager.handleDisplayModeChange(n);}.bind(this));s.getEffectiveHomepageSetting("/core/home/sizeBehavior","/core/home/sizeBehaviorConfigurable");b.on("/core/home/sizeBehavior").do(function(S){var M=this.oHomepageManager.getModel();M.setProperty("/sizeBehavior",S);}.bind(this));this.setInitialConfiguration();},createContent:function(){this.oDashboardView=sap.ui.view({viewName:"sap.ushell.components.homepage.DashboardContent",type:"JS",async:true});return this.oDashboardView;},setInitialConfiguration:function(){sap.ui.getCore().getEventBus().publish("launchpad","initialConfigurationSet");},exit:function(){m.unsubscribeEventHandlers();this.oHomepageManager.destroy();}});});
sap.ui.predefine('sap/ushell/components/homepage/ComponentKeysHandler',['sap/ushell/ui/launchpad/AccessibilityCustomData','sap/ushell/EventHub'],function(A,E){"use strict";var C=function(){};C.prototype={keyCodes:jQuery.sap.KeyCodes,tileFocusCustomData:new A({key:"tabindex",value:"0",writeToDom:true}),goToTileContainer:function(){if(this.oModel.getProperty('/tileActionModeActive')){this.goToFirstVisibleTileContainer();}else{this.goToLastVisitedTile();}},goToFirstVisibleTileContainer:function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible'),t=this.oModel.getProperty("/topGroupInViewPortIndex");if(j.length){var a=jQuery(j.get(t));if(a.length){this._setTileContainerSelectiveFocus(a);}}},goToLastVisitedTile:function(j,l){var a,b,d;if(l){var e=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible'),t=this.oModel.getProperty("/topGroupInViewPortIndex");var f=j||jQuery(e.get(t));a=f.find(".sapUshellTile:visible:first");b=f.find(".sapUshellTile:visible[tabindex=0]");d=f.find(".sapMGTLineMode:visible[tabindex=0]");if(a.length===0){a=jQuery(".sapUshellTile:visible:first");}}else{a=jQuery(".sapUshellTile:visible:first");b=jQuery(".sapUshellTile:visible[tabindex=0]");d=jQuery(".sapMGTLineMode:visible[tabindex=0]");}if(b.length){this._moveScrollDashboard(b);}else if(d.length){this._moveScrollDashboard(d);}else if(a.length){a.attr("tabindex","0");this._moveScrollDashboard(a);}},_goToFirstTileOfNextGroup:function(d,e){this._preventDefault(e);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(d,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n);}}},_goToTileOfGroup:function(p,g){if(g){var a=g.getTiles();if(this.oModel.getProperty('/tileActionModeActive')){a.push(g.oPlusTile);}a=a.concat(g.getLinks());p=p==="first"?0:p;p=p==="last"?a.length-1:p;var t=a[p];if(t&&t.getDomRef()){var j=jQuery(t.getDomRef());if(j.length===1){this._moveScrollDashboard(j);return true;}}}return false;},_moveTile:function(d){var i=this._getGroupAndTilesInfo(),D=this._getNextTile(d,true,i);if(D){var o=D.getParent(),s=D.getMode?D.getMode():'ContentMode',a=i.oCurTile.getMode?i.oCurTile.getMode():'ContentMode',b=s==='LineMode'?o.getLinks():o.getTiles(),n=0;if(i.oGroup===o){n=b.indexOf(D);if(a==="LineMode"&&s==="ContentMode"&&d==="left"){n=b.length;}}else if(d==="left"||d==="up"){n=b.length;}var e,f,t=this;if(a===s){var g=jQuery(".sapUshellDashboardView").control(0);e="movetile";f={sTileId:g.getController()._getTileUuid(i.oCurTile),toGroupId:o.getGroupId?o.getGroupId():o.groupId,toIndex:n,sToItems:a==='LineMode'?'links':'tiles',sFromItems:a==='LineMode'?'links':'tiles',sTileType:a==='LineMode'?'link':'tile'};if(s==="LineMode"){f.callBack=function(){setTimeout(function(){var b=s==='LineMode'?o.getLinks():o.getTiles();t._moveScrollDashboard(b[n].$());},10);};}else{setTimeout(function(){var b=s==='LineMode'?o.getLinks():o.getTiles();t._moveScrollDashboard(b[n].$());},10);}}else{e="convertTile";f={toGroupId:o.getGroupId?o.getGroupId():o.groupId,srcGroupId:i.oGroup.getGroupId?i.oGroup.getGroupId():i.oGroup.groupId,toIndex:n,callBack:function(){setTimeout(function(){var b=s==='LineMode'?o.getLinks():o.getTiles();t._moveScrollDashboard(b[n].$());},10);},tile:i.oCurTile,longDrop:false};}sap.ui.getCore().getEventBus().publish("launchpad",e,f);}},callbackSetFocus:function(t){var a=this;setTimeout(function(){if(t.oParent&&t.oParent instanceof sap.ushell.ui.launchpad.Tile){a._moveScrollDashboard(jQuery(t.oParent.getDomRef()));}else{a._moveScrollDashboard(t.$());}});},_getTileCenter:function(d,t,T){if(!(T instanceof HTMLElement)){var j=T.$().find(".sapMGTLineStyleHelper");if(T.isLink&&j&&j.length>1){if(d==="down"){return t.right;}return t.left;}}return t.right-((t.right-t.left)/2);},_getTileRect:function(d,t){if(t instanceof HTMLElement){return t.getBoundingClientRect();}var j=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&j&&j.length){if(d==="down"){return j.get(j.length-1).getBoundingClientRect();}else{return j.get(0).getBoundingClientRect();}}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect();}},_findClosestTile:function(d,t,o){var a=this._getTileRect(d,o),n=this._getTileCenter(d,a,o);var b,e=Infinity,f=d==="down"?1:-1,g=t.indexOf(o)+f,h;for(;;g+=f){var T=t[g];if(!T){return b;}if(!b){if(d==="down"&&g===t.length-1){return T;}if(d==="up"&&g===0){return T;}}var i=this._getTileRect(d,T);if(!i){return b;}if(d==="down"&&a.bottom+5>=i.bottom){continue;}if(d==="up"&&a.top-5<=i.top){continue;}if(b&&h!=i.top){return b;}h=i.top;var j=Math.min(Math.abs(i.left-n),Math.abs(i.right-n));if(e>j){e=j;b=T;}else{return b;}}},_getNextTile:function(d,m,g){var i=g||this._getGroupAndTilesInfo(),l=true;if(!i||(m&&i.oGroup.getProperty('isGroupLocked'))){return null;}if(m){var t=i.oCurTile.getBindingContext().getObject().object;l=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported(t);}if(d==="right"||d==="left"){var f=i.oCurTile.isLink?i.aLinks:i.aTiles,n=f.indexOf(i.oCurTile),a=d==="right"?n+1:n-1;if(f[a]&&f[a].getDomRef()){if(m&&f[a]===i.oGroup.oPlusTile){}else{return f[a];}}if(d==="right"&&!i.oCurTile.isLink&&i.aLinks.length&&l){return i.aLinks[0];}if(d==="left"&&i.oCurTile.isLink&&i.aTiles.length){return i.oGroup.getShowPlaceholder()?i.oGroup.oPlusTile:i.aTiles[i.aTiles.length-1];}}var N=this._getNextGroup(d,i.oGroup,m,l);if(N&&d==="right"){if(N.getTiles().length===0&&(N.getLinks().length===0)){return N.oPlusTile;}else if(N.getTiles().length===0){return N.getLinks()[0];}else{return N.getTiles()[0];}}if(N&&d==="left"){if(N.getTiles().length===0&&(N.getLinks().length===0)){return N.oPlusTile;}else if(N.getLinks().length===0){return N.getTiles()[N.getTiles().length-1];}else{return N.getLinks()[N.getLinks().length-1];}}if(d==="down"||d==="up"){var G=l?i.aTiles.concat(i.aLinks):i.aTiles,b=[];if(N){b=l?N.getTiles().concat(N.getLinks()):N.getTiles();if(b.length===0){b.push(N.oPlusTile);}}var j=(d==="down")?G.concat(b):b.concat(G);return this._findClosestTile(d,j,i.oCurTile);}},_getNextGroup:function(d,o,m,l){var n,a,g=o.getParent().getGroups(),b=g.indexOf(o),e=b;if(d==="down"||d==="right"){a=1;}else if(d==="up"||d==="left"){a=-1;}else{jQuery.sap.log.error("Direction is unkown",d,"sap.ushell.components.homepage.ComponentKeysHandler");return null;}e+=a;while(g[e]){n=g[e];var f=l?n.getTiles().concat(n.getLinks()):n.getTiles();var i=n.getVisible()&&!(n.getIsGroupLocked()&&m)&&!(f.length===0&&!(m||this.oModel.getProperty('/tileActionModeActive')));if(i){return n;}e+=a;}},_getGroupAndTilesInfo:function(){var j=this._getFocusOnTile(jQuery(document.activeElement));if(!j||!j.length){return null;}var o=j.control(0);o.isLink=j.hasClass('sapUshellLinkTile')||j.hasClass('sapMGTLineMode');var g=j.closest(".sapUshellTileContainer").control(0);if(!g){return null;}var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return{oCurTile:o,oGroup:g,aTiles:t,aLinks:g.getLinks()};},_goToSiblingElementInTileContainer:function(d,j){var a=j.closest('.sapUshellTileContainer'),b,e,f;b=j.closest('.sapUshellTileContainerBeforeContent');if(b.length){if(d==='up'||d==="left"){this._goToNextTileContainer(b,d);}else{f=a.find('.sapUshellTileContainerHeader:first');this._setTabIndexOnTileContainerHeader(f);f.focus();}return;}b=j.closest('.sapUshellTileContainerHeader');if(b.length){if(d==='up'){this._setTabIndexOnTileContainerHeader(f);if(!this._goToTileContainerBeforeContent(a)){this._goToNextTileContainer(b,d);}}else if(d==="down"){e=a.find('.sapUshellTile:first');if(e.length){this._moveScrollDashboard(jQuery(e));}else{this._goToNextTileContainer(b,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(a)){this._goToNextTileContainer(b,"left");}}else{f=j.closest(".sapUshellTileContainerHeader");f.focus();}}else if(d==="right"){var g=j.hasClass("sapMInputBaseInner");if(!g){e=a.find('.sapUshellTile:first');if(e.length){this._moveScrollDashboard(e);}else{this._goToNextTileContainer(b,"down");}}}return;}b=this._getFocusOnTile(j);if(b){this._goFromFocusedTile(d,b,true);return;}b=j.closest('.sapUshellTileContainerAfterContent');if(b.length){if(d==='up'||d==="left"){this._goToTileOfGroup("first",b.control(0));}else{this._goToNextTileContainer(b,d);}}},_goToNextTileContainer:function(j,d){var a=j.closest('.sapUshellTileContainer');if(a.length===1){var b=jQuery('.sapUshellTileContainer:visible'),n=(d==='down')?1:-1,e=jQuery(b[b.index(a)+n]);if(e.length===1){var f=e.find('.sapUshellTileContainerHeader');if(d==='down'){if(!this._goToTileContainerBeforeContent(e)){this._setTabIndexOnTileContainerHeader(f);this._setTileContainerSelectiveFocus(e);}}else if(!this._goToTileContainerAfterContent(e)){if(d==="up"||d==="left"){var s=d==="up"?"first":"last";if(!this._goToTileOfGroup(s,e.control(0))){this._setTabIndexOnTileContainerHeader(f);f.focus();}}}}}},_goToTileContainerBeforeContent:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTileContainerBeforeContent button:visible');if(b.length){b.focus();return true;}else{return false;}},_goToTileContainerAfterContent:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTileContainerAfterContent button:visible');if(b.length){b.focus();return true;}else{return false;}},_goFromFocusedTile:function(d,j,i){var n=this._getNextTile(d);if(n){var a=n.$();if(i){var b=jQuery(j).closest('.sapUshellTileContainer'),e=n.oParent.$();if(b.get(0).id===e.get(0).id){this._moveScrollDashboard(a);}else if(d==='down'||d==='right'){if(!this._goToTileContainerAfterContent(b)){this._setTabIndexOnTileContainerHeader(e.find('.sapUshellTileContainerHeader'));this._setTileContainerSelectiveFocus(e);}}else if(d==='up'||d==='left'){var f=b.find('.sapUshellTileContainerHeader');this._setTabIndexOnTileContainerHeader(f);f.focus();}}else{this._moveScrollDashboard(a);}}},_setTabIndexOnTileContainerHeader:function(j){jQuery(".sapUshellTileContainerHeader").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var a=j.find('.sapUshellContainerTitle:first'),b=j.find('.sapUshellContainerHeaderActions:first');j.attr('tabindex',0);a.attr('tabindex',0);b.find('button').attr('tabindex',0);}},_setTileContainerSelectiveFocus:function(j){var a=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible'),b=j.find('.sapUshellTileContainerBeforeContent button'),d=j.find('.sapUshellTileContainerHeader:first'),B=b.length&&b.is(":visible");if(B){b.focus();}else if(j.get(0)===a.get(0)){this.goToLastVisitedTile();}else if(d.length){this._setTabIndexOnTileContainerHeader(d);d.focus();}},setTileFocus:function(j){if(!j.hasClass('sapUshellPlusTile')){if(j.parents('#catalogView').length>0){this.setFocusOnCatalogTile(j.find('[tabindex]').eq(0));}}jQuery(".sapUshellTile [tabindex = 0]").get().forEach(function(h){jQuery(h).attr("tabindex",-1);});jQuery(".sapUshellTile:visible[tabindex=0]").get().forEach(function(h){jQuery(h).attr("tabindex",-1);});jQuery(".sapMGTLineMode [tabindex = 0]").get().forEach(function(h){jQuery(h).attr("tabindex",-1);});jQuery(".sapUshellLinkTile [tabindex = 0]").get().forEach(function(h){jQuery(h).attr("tabindex",-1);});if(j.length>0){j.attr("tabindex",0);var a=jQuery("#Fiori2LoadingDialog")[0];if(!a||a.style.visibility==="hidden"){if(j.prop("tagName")==="DIV"&&jQuery(j).hasClass("sapUshellLinkTile")&&j.getMode==undefined){j=j.find("a").length?j.find("a")[0]:j;}j.focus();if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var b=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(b){b.removeAggregation("customData",this.tileFocusCustomData,true);}if(t&&sap.ui.getCore().byId(t.getId())&&this.tileFocusCustomData&&sap.ui.getCore().byId(this.tileFocusCustomData.getId())){t.addAggregation("customData",this.tileFocusCustomData,true);}}}}else{var d=jQuery(j.prevObject.selector.substring(0,j.prevObject.selector.length-3));if(d.length>0){var o=d.control(0),i={oCurTile:o.oPlusTile,oGroup:o,aTiles:o.getTiles(),aLinks:o.getLinks()},n=this._getNextTile("left",false,i);if(!n){n=this._getNextTile("right",false,i);}jQuery(n.getDomRef()).attr("tabindex",0);}}},setFocusOnCatalogTile:function(j){var p=jQuery(".sapUshellTile[tabindex=0]"),a,v;if(p.length){jQuery(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(h){jQuery(h).attr("tabindex",-1);});a=p.find('[tabindex], a').andSelf().filter('[tabindex], a');a.attr("tabindex",-1);}if(!j){v=jQuery(".sapUshellTile:visible,.sapUshellAppBox:visible");if(v.length){j=jQuery(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},_moveScrollDashboard:function(j){var y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+j[0].getBoundingClientRect().top;jQuery('#sapUshellDashboardPage section').stop().animate({scrollTop:y},0,function(){this.setTileFocus(j);}.bind(this));},_moveGroupFromDashboard:function(d,j){var a,t=jQuery(".sapUshellDashboardGroupsContainerItem"),i,b;a=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(a);b=d=="up"||d=="left"?i-1:i+1;this._moveGroup(i,b);},_moveGroup:function(f,t){if(t<0||t>=jQuery(".sapUshellDashboardGroupsContainerItem").length||t<jQuery(".sapUshellDisableDragAndDrop").length){return;}sap.ui.getCore().getEventBus().publish("launchpad","moveGroup",{fromIndex:f,toIndex:t});var a=this;setTimeout(function(){var b=jQuery(".sapUshellTileContainerHeader")[t];a._setTabIndexOnTileContainerHeader(jQuery(b));jQuery(b).focus();},100);},_getFocusOnTile:function(j){var a;['.sapUshellTile','.sapUshellLinkTile'].forEach(function(s){var b=j.closest(s);if(b.length){a=b;}});return a;},_renameGroup:function(j){if(j.closest('.sapUshellTileContainerHeader').length===1){j=j[0].tagName==='H2'?j:j.find("h2");j.click();}},_arrowsButtonsHandler:function(d,e,j){var i=this.oModel.getProperty('/tileActionModeActive');if((i&&j.hasClass('sapMInputBaseInner'))||j.hasClass("sapMITBFilter")){return;}else{this._preventDefault(e);}if(j.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(d,j);return;}var a=this._getFocusOnTile(j);if(e.ctrlKey===true&&this.oModel.getProperty("/personalization")){var b=j.closest('.sapUshellTileContainerHeader');if(a){this._moveTile(d,a);}else if(b.length){var f=b.closest('.sapUshellTileContainerContent');if(!f.hasClass('sapUshellTileContainerDefault')||!f.hasClass('sapUshellTileContainerLocked')){this._moveGroupFromDashboard(d,b);}}}else if(i){this._goToSiblingElementInTileContainer(d,j);}else if(a){this._goFromFocusedTile(d,a,i);}else if(!j.hasClass("sapUshellActionItem")){this.goToLastVisitedTile();}},_handleAnchorNavigationItemsArrowKeys:function(d,j){var a=jQuery(".sapUshellAnchorItem:visible"),n=a.index(j),N=j;if(d==="left"||d==="up"){if(n>0){N=a.get(n-1);}}else if(d==="right"||d==="down"){if(n<a.length-1){N=a.get(n+1);}}this._setAnchorItemFocus(jQuery(N));},_setAnchorItemFocus:function(j){jQuery(".sapUshellAnchorItem").get().forEach(function(h){jQuery(h).attr("tabindex",-1);});j.attr("tabindex",0);j.focus();},_appFinderHomeEndButtonsHandler:function(d,e,j){var v=jQuery(".sapUshellTile:visible,.sapUshellAppBox:visible"),a;if(v.length){if(d==="home"){a=jQuery(v.get(0));}if(d==="end"){a=jQuery(v.get(v.length-1));}}if(a){this._preventDefault(e);this._appFinderFocusAppBox(j,a);}},_homeEndButtonsHandler:function(s,e,j){if(j.hasClass("sapUshellAnchorItem")){this._preventDefault(e);this._setAnchorItemFocus(jQuery(".sapUshellAnchorItem:visible:"+s));}else if(e.ctrlKey===true){this._preventDefault(e);var a=jQuery(".sapUshellTile:visible")[s]();this._moveScrollDashboard(a);}else{var b=j.closest('.sapUshellTileContainer');if(b){var g=b.control(0);if(g){this._preventDefault(e);this._goToTileOfGroup(s,g);}}}},_deleteButtonHandler:function(j){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var a=this._getFocusOnTile(j);if(a&&!a.hasClass('sapUshellLockedTile')&&!a.hasClass('sapUshellPlusTile')){var i=this._getGroupAndTilesInfo();if(i){var d=jQuery(".sapUshellDashboardView").control(0),t=d.getController()._getTileUuid(i.oCurTile),b=this;setTimeout(function(){if(i.oCurTile.getDomRef()){b._moveScrollDashboard(i.oCurTile.$());}else{b._moveScrollDashboard(i.oGroup.oPlusTile.$());}},100);sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",{tileId:t},this);}}}},_ctrlPlusArrowKeyButtonsHandler:function(d){var j=jQuery(document.activeElement),a=j.closest('.sapUshellTileContainerHeader');if(this._getFocusOnTile(j)){this._moveTile(d);}else if(a.length){var b=a.closest('.sapUshellTileContainerContent');if(!b.hasClass('sapUshellTileContainerDefault')||!b.hasClass('sapUshellTileContainerLocked')){this._moveGroupFromDashboard(d,a);}}},_spaceButtonHandler:function(e,j){if(this._getFocusOnTile(j)){e.preventDefault();j.click(j);if(j.control(0).getUuid){sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick",{uuid:j.control(0).getUuid()});}}else{j.click();}},_enterButtonHandler:function(j){if(j.hasClass('sapMInputBaseInner')){var a=j.closest('.sapUshellTileContainerHeader'),t=this;if(a.length===1){setTimeout(function(){a=jQuery("#"+a[0].id);t._setTabIndexOnTileContainerHeader(a);a.focus();},10);}}if(this._getFocusOnTile(j)){j.click(j);if(j.control(0).getUuid){sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick",{uuid:j.control(0).getUuid()});}}},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(jQuery(".sapUshellAnchorItemSelected"));return jQuery(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(e,f){var r=sap.ushell.Container.getRenderer("fiori2"),h=c;if(r){var s=r.getCurrentCoreView();if(s==="home"){if(f){if(e.shiftKey){var a=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(a.length){a.focus();}else{h.goToLastVisitedTile();}}else if(!h.goToSelectedAnchorNavigationItem()){h.goToLastVisitedTile();}}else{h._dashboardKeydownHandler(e);}}if(s==="appFinder"){if(f){if(e.shiftKey){h.setFocusOnCatalogTile();}else{var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o&&o.getVisible()){o.focus();}else{h.appFinderFocusMenuButtons(e);}}}else{h._appFinderKeydownHandler(e);}}}},_groupHeaderNavigation:function(j){var a;if(j.hasClass("sapUshellTileContainerHeader")){a=j.find(".sapUshellContainerTitle");a.focus();}else if(j.closest(".sapUshellTileContainerHeader")){a=j.closest(".sapUshellTileContainerHeader");a.focus();}},_appFinderFocusAppBox:function(j,a){if(j&&a){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");a.attr("tabindex","0").focus();a.find(".sapUshellPinButton").attr("tabindex","0");}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();},_getNextCatalog:function(d,j){var a;if(d==="down"||d==="right"){a=j.next();}else if(d==="up"||d==="left"){a=j.prev();}else{jQuery.sap.log.error("Direction is unkown",d,"sap.ushell.components.homepage.ComponentKeysHandler");return null;}if(a.length>0){var n=a.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(n>0){return a;}else{return this._getNextCatalog(d,a);}}},_getNextCatalogItem:function(d,j,p){var a=jQuery(j.parents()[2]),b=a.find("li.sapUshellAppBox, li.sapUshellTile").get();if(d==="right"||d==="left"){var n=b.indexOf(j.get(0)),e=d==="right"?n+1:n-1;if(b[e]){return b[e];}}var f=this._getNextCatalog(d,a),N=f?f.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(N.length>0&&d==="right"){return N[0];}if(N.length>0&&d==="left"){return N[N.length-1];}if(d==="down"||d==="up"){if(N.length>0&&p){return N[0];}else{var J=(d==="down")?b.concat(N):N.concat(b);return this._findClosestTile(d,J,j.get(0));}}},_appFinderKeysHandler:function(d,e,j,p){if(j.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(e);var a=jQuery(this._getNextCatalogItem(d,j,p));if(a){this._appFinderFocusAppBox(j,a);}}},_handleAppFinderButton:function(){var o=window.document.getElementById("openCatalogBtn"),a=sap.ushell.Container.getRenderer("fiori2").getShellConfig(),O=window.document.getElementById("endItemsOverflowBtn");if(o){o.focus();return;}if(a.moveAppFinderActionToShellHeader){if(O){O.focus();}}else{E.emit('showMeArea',Date.now());window.setTimeout(function(){o=window.document.getElementById("openCatalogBtn");if(o){o.focus();}else{O=window.document.getElementById("overflowActions-overflowButton");if(O){O.focus();}}},300);}},handleShortcuts:function(e){var h=c,s=window.document.getElementById("shell-header");if(e.altKey&&s){switch(e.keyCode){case h.keyCodes.A:if(h.oModel.getProperty("/personalization")){s.setAttribute("accesskey","a");window.setTimeout(function(){h._handleAppFinderButton();s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");}},0);e.preventDefault();}break;case h.keyCodes.H:h.oRouter.navTo("home");E.emit('showMeArea',false);E.emit('showNotifications',false);s.setAttribute("accesskey","h");window.setTimeout(function(){var f=jQuery(".sapUshellAnchorItem:visible:first");if(f.length){f.focus();}s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");}},0);e.preventDefault();break;default:}}var i=h.oModel.getProperty('/tileActionModeActive');if(e.ctrlKey&&e.keyCode===h.keyCodes.ENTER&&i){var d=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(d){d.firePress();}}},appFinderFocusMenuButtons:function(e){var b=jQuery("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(b.length){b.eq(0).focus();this._preventDefault(e);return true;}else{return false;}},_appFinderKeydownHandler:function(e){var j=jQuery(document.activeElement);if(e.srcElement.id!="appFinderSearch-I"){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL();if(i&&p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(i&&p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}switch(p){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",e,j,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",e,j,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",e);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",e);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;default:return;}}},_dashboardKeydownHandler:function(e){var t=document.activeElement&&document.activeElement.tagName;if(t==="INPUT"||t==="TEXTAREA"){return;}var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL(),j=jQuery(document.activeElement);if(i){if(p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}}switch(p){case this.keyCodes.F2:this._renameGroup(j);break;case this.keyCodes.F7:this._groupHeaderNavigation(j);break;case this.keyCodes.DELETE:this._deleteButtonHandler(j);break;case this.keyCodes.BACKSPACE:this._deleteButtonHandler(j);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",e);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",e);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",e,j);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;case this.keyCodes.ENTER:this._enterButtonHandler(j);break;default:break;}return true;},init:function(m,r){this.oModel=m;this.oRouter=r;}};var c=new C();return c;},true);
sap.ui.predefine('sap/ushell/components/homepage/DashboardContent.controller',['jquery.sap.global','./DashboardUIActions','sap/ushell/utils','sap/ushell/EventHub','sap/ui/Device','sap/ushell/components/homepage/ComponentKeysHandler'],function(q,D,u,E,a,C){"use strict";sap.ui.controller("sap.ushell.components.homepage.DashboardContent",{onInit:function(){var e=sap.ui.getCore().getEventBus();this.isActionModeInited=false;this.handleDashboardScroll=this._handleDashboardScroll.bind(this);e.subscribe("sap.ushell","appClosed",this._resizeHandler,this);e.subscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe('launchpad','actionModeInactive',this._handleGroupVisibilityChanges,this);e.subscribe("launchpad",'animationModeChange',this._handleAnimationModeChange,this);e.subscribe("launchpad",'switchTabBarItem',this._handleTabBarItemPressEventHandler,this);window.document.addEventListener("visibilitychange",u.handleTilesVisibility,false);this.sViewId="#"+this.oView.getId();if(a.browser.mobile){e.subscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);}this.isDesktop=(a.system.desktop&&(navigator.userAgent.toLowerCase().indexOf('tablet')<0));this._setCenterViewPortShift();},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);e.unsubscribe("sap.ushell","appClosed",this._resizeHandler,this);e.unsubscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.unsubscribe("launchpad",'switchTabBarItem',this._handleTabBarItemPressEventHandler,this);window.document.removeEventListener("visibilitychange",u.handleTilesVisibility,false);},onAfterRendering:function(){u.setPerformanceMark("FLP - dashboard after rendering");var e=sap.ui.getCore().getEventBus(),m,t,g,i,b;e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);e.unsubscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);e.subscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);a.orientation.attachHandler(function(){var j=q('#dashboardGroups').find('.sapUshellTileContainer:visible');if(j.length){m=this.getView().getModel();t=m.getProperty('/topGroupInViewPortIndex');if(j.get(t)){g=sap.ui.getCore().byId(j.get(t).id);i=m.getProperty('/editTitle');this._publishAsync("launchpad","scrollToGroup",{group:g,isInEditTitle:i});}}},this);q(window).bind("resize",function(){clearTimeout(b);b=setTimeout(this._resizeHandler.bind(this),300);}.bind(this));if(this.getView().getModel().getProperty("/personalization")&&!this.isActionModeInited){sap.ui.require(["sap/ushell/components/homepage/ActionMode"],function(A){A.init(this.getView().getModel());}.bind(this));this.isActionModeInited=true;}this._updateTopGroupInModel();},_setCenterViewPortShift:function(){var v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(true);}},_dashboardDeleteTileHandler:function(e){var t=e.getSource(),T=t.getBindingContext().getObject().object,d={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(T)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},dashboardTilePress:function(e){var t=e.getSource();if(!t){return;}var s=document.activeElement.id.indexOf("feedTile")!==-1;if(document.activeElement.tagName!=="INPUT"&&s!==true){if(sap.ui.getCore().byId(t.getId())){C.setTileFocus(t.$());}}sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick",{uuid:t.getUuid()});},_updateTopGroupInModel:function(){var m=this.getView().getModel(),t=this._getIndexOfTopGroupInViewPort();var s=this._getModelGroupFromVisibleIndex(t);m.setProperty('/iSelectedGroup',s);m.setProperty('/topGroupInViewPortIndex',t);},_getIndexOfTopGroupInViewPort:function(){var v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName('section'),j=q(s).find('.sapUshellTileContainer'),o=j.not('.sapUshellHidden').first().offset(),f=(o&&o.top)||0,t=[],n=s[0].scrollTop,b=0;if(!j||!o){return b;}j.each(function(){if(!q(this).hasClass("sapUshellHidden")){var e=q(this).parent().offset().top;t.push([e,e+q(this).parent().height()]);}});var c=n+f;q.each(t,function(i,e){var g=e[0],h=e[1];if(g-24<=c&&c<=h){b=i;return false;}});return b;},_handleDashboardScroll:function(){var v=this.getView(),m=v.getModel(),n=400;var h=m.getProperty("/homePageGroupDisplay"),e=h!=="tabs",t=m.getProperty("/tileActionModeActive");function H(){u.handleTilesVisibility();}clearTimeout(this.timeoutId);this.timeoutId=setTimeout(H,n);if(!a.system.phone){v.oAnchorNavigationBar.closeOverflowPopup();}if(e||t){this._updateTopGroupInModel();}v.oAnchorNavigationBar.reArrangeNavigationBarElements();},_handleGroupDeletion:function(g){var e=sap.ui.getCore().getEventBus(),G=g.getObject(),i=G.removable,s=G.title,b=G.groupId,r=sap.ushell.resources.i18n,m=sap.ushell.Container.getService("Message"),A,c;sap.ui.require(['sap/m/MessageBox'],function(M){A=M.Action;c=(i?A.DELETE:r.getText('ResetGroupBtn'));m.confirm(r.getText(i?'delete_group_msg':'reset_group_msg',s),function(o){if(o===c){e.publish("launchpad",i?'deleteGroup':'resetGroup',{groupId:b});}},r.getText(i?"delete_group":"reset_group"),[c,A.CANCEL]);});},_modelLoaded:function(){this.bModelInitialized=true;sap.ushell.Layout.getInitPromise().then(function(){this._initializeUIActions();}.bind(this));},_initializeUIActions:function(){this.oDashboardUIActionsModule=new D();this.oDashboardUIActionsModule.initializeUIActions(this);},_forceBrowserRerenderElement:function(e){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(b){b(function(){var d=e.style.display;e.style.display='none';e.style.display=d;});}else{q.sap.log.info('unsupported browser for animation frame');}},_webkitMobileRenderFix:function(){if(a.browser.chrome||a.os.android){this._forceBrowserRerenderElement(document.body);}},_resizeHandler:function(){this._addBottomSpace();u.handleTilesVisibility();var i=q.find("#dashboardGroups:visible").length;if(E.last("AppRendered")!=undefined){E.emit("AppRendered",undefined);}if(sap.ushell.Layout&&i){sap.ushell.Layout.reRenderGroupsLayout(null);this._initializeUIActions();}},_handleAnimationModeChange:function(c,e,d){var m=this.getView().getModel();m.setProperty('/animationMode',d.sAnimationMode);},_appOpenedHandler:function(c,e,d){var v,p,P,m=this.getView().getModel();p=this.getOwnerComponent();P=p.getMetadata().getComponentName();if(d.additionalInformation.indexOf(P)===-1){u.setTilesNoVisibility();v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(false);}}if(sap.ushell.components.homepage.ActionMode&&sap.ushell.components.homepage.ActionMode.oModel&&sap.ushell.components.homepage.ActionMode.oModel.getProperty("/tileActionModeActive")){sap.ushell.components.homepage.ActionMode.toggleActionMode(m,"Menu Item");}if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.disableAllDashboardUiAction();}},_addBottomSpace:function(){u.addBottomSpace();},_scrollToFirstVisibleGroup:function(c,e,d){var g,v=this.oView.oDashboardGroupsBox.getGroups(),f=d.fromTop>0?d.fromTop:0;if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}if(v){q.each(v,function(n,G){if(G.getGroupId()===g){var y=document.getElementById(G.sId).offsetTop;q('.sapUshellDashboardView section').stop().animate({scrollTop:y+f},0);C.setTileFocus(q("#"+G.getId()+" li").first());return false;}});u.addBottomSpace();}},_scrollToGroupByName:function(c,e,d){var g=this.getView().getModel().getProperty("/groups"),G=d.groupName,l=sap.ushell.Container.getService('LaunchPage');q.each(g,function(n,o){if(l.getGroupTitle(o.object)===G){this._scrollToGroup(c,e,{groupId:o.groupId});}}.bind(this));},_scrollToGroup:function(c,e,d,i){var g,i=d.iDuration==undefined?500:d.iDuration,v=this.getView(),m=v.getModel(),M=m.getProperty('/animationMode')==='minimal',t=this;if(M){i=0;}if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}t.iAnimationDuration=i;if(this.oView.oDashboardGroupsBox.getGroups()){q.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;setTimeout(function(){y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(G.sId).getBoundingClientRect().top;var b=q(document.getElementById(G.sId)).find(".sapUshellTileContainerHeader").height();var f=q(document.getElementById(G.sId)).find(".sapUshellTileContainerBeforeContent").height();var I=G.getModel().getProperty('/tileActionModeActive');y=b>0&&!I?y+48:y+f+8;q('.sapUshellDashboardView section').stop().animate({scrollTop:y},t.iAnimationDuration,function(){if(d.groupChanged){if(!d.restoreLastFocusedTile){var j=q("#"+G.getId()+" .sapUshellTile:visible:first"),h=q("#"+G.getId()+" .sapMGTLineMode:visible:first");if(j.length){C.setTileFocus(j);}else if(h.length){C.setTileFocus(h);}}}if(d.restoreLastFocusedTile){var T="#"+G.getId();var l=false;if(d.restoreLastFocusedTileContainerById){T="#"+d.restoreLastFocusedTileContainerById;l=true;}C.goToLastVisitedTile(q(T),l);}});if(d.isInEditTitle){G.setEditMode(true);}},0);if(d.groupId||d.groupChanged){t._addBottomSpace();}u.handleTilesVisibility();return false;}});}},_handleDrop:function(e,b){var l=sap.ushell.Layout.getLayoutEngine(),t=l.layoutEndCallback(),i=!t.dstArea,o=sap.ui.getCore().getEventBus(),n,c,T,d=q.Deferred(),v=this.getView(),m=v.getModel(),f=m.getProperty('/homePageGroupDisplay')&&m.getProperty('/homePageGroupDisplay')==='tabs',g=m.getProperty('/tileActionModeActive'),I=true,h=!!(m.getProperty("/personalization")&&(a.browser.msie||a.browser.edge)&&a.browser.version>=11&&(a.system.combi||a.system.tablet)),p=sap.ushell.Container.getService("LaunchPage"),j=t.tile.getBindingContext().getObject().object,k=p.isLinkPersonalizationSupported(j);sap.ushell.Layout.getLayoutEngine()._toggleAnchorItemHighlighting(false);if(t.dstGroup){var r=t.dstGroup.getBindingContext(),s=r.getProperty(r.sPath).isGroupLocked;I=i&&s;}if(!t.tileMovedFlag||(h&&l.isTabBarCollision())||I||(!k&&t.dstArea==='links')){o.publish("launchpad","sortableStop");return null;}if(!g&&!f&&t.dstArea==="links"&&!t.dstGroupData.getLinks().length){o.publish("launchpad","sortableStop");return null;}n=true;c=true;if((t.srcGroup!==t.dstGroup)){n=c=false;}else if(t.tile!==t.dstGroup.getTiles()[t.dstTileIndex]){c=false;}T=this._getTileUuid(t.tile);if(t.srcGroup&&t.srcGroup.removeAggregation&&t.srcArea){t.srcGroup.removeAggregation('tiles',t.tile,n);}var S=t.dstGroupData&&t.dstGroupData.insertAggregation&&t.dstArea===t.srcArea;if(S){t.tile.sParentAggregationName=t.dstArea;t.dstGroupData.insertAggregation(t.dstArea,t.tile,t.dstTileIndex,c);this._showDropToastMessage(t);d=this._handleSameTypeDrop(t,T,S);}else{this._showDropToastMessage(t);if(i){d=this._handleShortDrop(t,T,S);}else{d=this._handleConvertDrop(t,S,b);}}if(this.getView().getModel()){this.getView().getModel().setProperty('/draggedTileLinkPersonalizationSupported',true);}o.publish("launchpad","sortableStop");return d.promise();},_showDropToastMessage:function(t){var T=this._getTileTitle(t),d=t.dstGroup.getHeaderText?t.dstGroup.getHeaderText():t.dstGroup.getTitle(),s=sap.ushell.resources.i18n.getText('added_tile_to_group'),b=T+' '+s+' '+d,c=t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,e=t.srcGroup.getGroupId?t.srcGroup.getGroupId():t.srcGroup.groupId;if(c!==e){sap.m.MessageToast.show(sap.ushell.resources.i18n.getText(b));}},_handleSameTypeDrop:function(t,T,s){var e=sap.ui.getCore().getEventBus(),d=q.Deferred();t.tile._getBindingContext().oModel.setProperty(t.tile._getBindingContext().sPath+'/draggedInTabBarToSourceGroup',false);e.publish("launchpad","movetile",{sTileId:T,sToItems:t.dstArea?t.dstArea:"tiles",sFromItems:t.srcArea?t.srcArea:"tiles",sTileType:t.dstArea?t.dstArea.substr(0,t.dstArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_handleShortDrop:function(t,T,s){var e=sap.ui.getCore().getEventBus(),d=q.Deferred();e.publish("launchpad","movetile",{sTileId:T,sToItems:t.srcArea||"tiles",sFromItems:t.srcArea||"tiles",sTileType:t.srcArea?t.srcArea.substr(0,t.srcArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_handleConvertDrop:function(t,s,b){var e=sap.ui.getCore().getEventBus(),d=q.Deferred();e.publish("launchpad","convertTile",{toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,tile:sap.ui.getCore().byId(b.id),srcGroupId:t.srcGroup.getGroupId?t.srcGroup.getGroupId():t.srcGroup.groupId,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_getTileTitle:function(t){var m=this.getView().getModel(),b=t.tile.getBindingContext().getPath(),T=m.getProperty(b).object,s=sap.ushell.Container.getService('LaunchPage').getTileTitle(T);return s;},_getTileUuid:function(t){var T=t.getMode?t.getMode():'ContentMode',s;if(T==='LineMode'){s=t.getUuid?t.getUuid():t.getBindingContext().getObject().uuid;}else{s=t.getUuid?t.getUuid():t.getBindingContext().getObject().getParent().getUuid();}return s;},_handleDrag:function(e,b){var t=sap.ushell.Layout.getLayoutEngine().layoutEndCallback(),p=sap.ushell.Container.getService("LaunchPage"),T=t.tile.getBindingContext().getObject().object,i=p.isLinkPersonalizationSupported(T),v=this.getView(),m=v.getModel();if(m){m.setProperty('/draggedTileLinkPersonalizationSupported',i);}},_handleTabBarItemPressEventHandler:function(c,e,d){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups"),G=d.iGroupIndex;for(var i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}m.setProperty("/groups/"+G+"/isGroupSelected",true);this._handleTabBarItemPress(c,e,G);},_handleTabBarItemPress:function(c,e,g,o){var v=this.getView(),s,f;if(o){s=o.getParameter("group").getIndex();}else{s=g;}sap.ui.getCore().getEventBus().publish("launchpad","tabSelected",{iSelectedGroup:s});f=this._getVisibleGroupIndex(s);v.oDashboardGroupsBox.removeLinksFromUnselectedGroups();v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);v.oAnchorNavigationBar.setSelectedItemIndex(f);v.oAnchorNavigationBar.reArrangeNavigationBarElements();setTimeout(function(){u.handleTilesVisibility();},0);},_getVisibleGroupIndex:function(s){var g=this.getView().getModel().getProperty("/groups");var h=0;for(var i=0;i<s;i++){if(!g[i].isGroupVisible||!g[i].visibilityModes[0]){h++;}}return s-h;},_getModelGroupFromVisibleIndex:function(s){var g=this.getView().getModel().getProperty("/groups"),v=0;for(var i=0;i<g.length;i++){if(g[i].isGroupVisible&&g[i].visibilityModes[0]){v++;if(v>s){return i;}}}return 0;},_handleAnchorItemPress:function(e){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups");if(a.system.phone&&e.getParameter("manualPress")){e.oSource.openOverflowPopup();}for(var i=0;i<g.length;i++){if(m.getProperty("/groups/"+i+"/isGroupSelected")===true){m.setProperty("/groups/"+i+"/isGroupSelected",false);}}m.setProperty("/groups/"+e.getParameter("group").getIndex()+"/isGroupSelected",true);m.setProperty("/iSelectedGroup",e.getParameter("group").getIndex());if(m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs"&&!m.getProperty("/tileActionModeActive")){this._handleTabBarItemPress(undefined,undefined,undefined,e);}else{if(!m.getProperty("/tileActionModeActive")){v.oDashboardGroupsBox.getBinding("groups").filter([new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true)]);}else{v.oDashboardGroupsBox.getBinding("groups").filter([]);}this._scrollToGroup("launchpad","scrollToGroup",{group:e.getParameter('group'),groupChanged:true,focus:(e.getParameter("action")==="sapenter")});}},_addGroupHandler:function(d){var i,p=d.getSource().getBindingContext().getPath(),b=p.split("/");i=window.parseInt(b[b.length-1],10);if(d.getSource().sParentAggregationName==="afterContent"){i=i+1;}sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:"",location:i,isRendered:true});},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout(q.proxy(b.publish,b,c,e,d),1);},_changeGroupVisibility:function(g){var b=g.getPath(),m=g.getModel(),G=m.getProperty(b+"/isGroupVisible");if(m.getProperty(b+'/isDefaultGroup')||m.getProperty(b+'/isGroupLocked')){return;}m.setProperty(b+"/isGroupVisible",!G);},_handleGroupVisibilityChanges:function(c,e,o){var l=sap.ushell.Container.getService('LaunchPage'),m=this.getView().getModel(),b=u.getCurrentHiddenGroupIds(m),s=b.length===o.length,i=s,p;b.some(function(h,I){if(!i){return true;}i=q.inArray(h,o)!==-1;return!i;});if(!i){p=l.hideGroups(b);p.done(function(){m.updateBindings('groups');}.bind(this));p.fail(function(){var d=sap.ushell.Container.getService('Message');d.error(sap.ushell.resources.i18n.getText('hideGroups_error'));});}},_updateShellHeader:function(){if(!this.oShellUIService){this._initializeShellUIService();}else{this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();}},_initializeShellUIService:function(){return sap.ui.require(["sap/ushell/ui5service/ShellUIService"],function(S){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();return this.oShellUIService;}.bind(this));},_deactivateActionModeInTabsState:function(){var v=this.getView(),m=v.getModel();var g=m.getProperty("/groups");for(var i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}var s=v.oAnchorNavigationBar.getSelectedItemIndex();var h=0;if(!this._isGroupVisible(s)){for(var i=0;i<g.length;i++){if(!this._isGroupVisible(i)){h++;}else{s=i;break;}}}else{for(var i=0;i<s;i++){if(!this._isGroupVisible(i)){h++;}}}var f=s-h;v.oAnchorNavigationBar.setSelectedItemIndex(f);v.oAnchorNavigationBar.adjustItemSelection(f);m.setProperty("/groups/"+s+"/isGroupSelected",true);v.oDashboardGroupsBox.removeLinksFromAllGroups();var G=m.getProperty('/homePageGroupDisplay');if(G&&G==="tabs"){v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);sap.ui.getCore().getEventBus().publish("launchpad","beforeAndAfterContentRemoved");}},_isGroupVisible:function(g){var G=this.getView().getModel().getProperty("/groups");return(G[g].isGroupVisible&&G[g].visibilityModes[0]);}});},false);
sap.ui.predefine('sap/ushell/components/homepage/DashboardContent.view',['./DashboardGroupsBox','sap/ushell/resources','sap/ushell/ui/launchpad/AnchorItem','sap/ushell/ui/launchpad/AnchorNavigationBar','sap/ushell/EventHub','sap/ushell/utils','sap/ushell/Config','sap/ui/core/InvisibleText',"sap/m/library","sap/m/Bar","sap/m/ToolbarSpacer","sap/m/Page","sap/m/FlexBox","sap/m/Button","sap/ui/Device","jquery.sap.global","sap/ui/core/mvc/View"],function(D,r,A,a,E,u,C,I,m,B,T,P,F,b,c,q,V){"use strict";sap.ui.jsview("sap.ushell.components.homepage.DashboardContent",{createContent:function(o){var d,v=sap.ui.getCore().byId("viewPortContainer"),e,h=sap.ushell.components.getHomepageManager?sap.ushell.components.getHomepageManager():undefined;this.isTouch=c.system.combi?false:(c.system.phone||c.system.tablet);this.isCombi=c.system.combi;this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.oModel=this.getModel();this.addStyleClass("sapUshellDashboardView");this.ieHtml5DnD=this.oModel.getProperty("/personalization")&&h&&h.isIeHtml5DnD();this.isContentWasRendered=false;sap.ui.getCore().getEventBus().subscribe("launchpad","initialConfigurationSet",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().subscribe("launchpad",'actionModeInactive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad",'actionModeActive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("shell","changeNotificationPreview",this._enablePreviewNotificationChanged,this);sap.ui.getCore().getEventBus().subscribe("shell","notificationsPreviewContainerCreated",this._notificationsPreviewContainerCreated,this);this.aDoableObjects=[E.on("CenterViewPointContentRendered").do(this._handleContentRendered.bind(this)),E.once("CoreResourcesComplementLoaded").do(this._enableAnchorBarOverflowAndCreateFooter.bind(this))];sap.ushell.Container.getRenderer('fiori2').getRouter().getRoute("home").attachMatched(this.onAfterNavigate,this);this.addEventDelegate({onAfterRendering:function(){function _(){var h=sap.ushell.components.getHomepageManager();if(!h.getPreparedGroupModel()){h.loadPersonalizedGroups();}else{E.once("firstSegmentCompleteLoaded").do(h.handleFirstSegmentLoaded.bind(h));}}window.setTimeout(_);this.onAfterNavigate();}.bind(this),onAfterShow:function(){this.getController()._addBottomSpace();this.getController()._updateShellHeader();this._onAfterDashboardShow();}.bind(this),onAfterHide:function(f){}});this.oAnchorNavigationBar=this._getAnchorNavigationBar(o);d=new D();this.oDashboardGroupsBox=d.createGroupsBox(o,this.oModel);e=this._previewNotificationEnabled();if(v){v.shiftCenterTransitionEnabled(e);}this.oFilterSelectedGroup=new sap.ui.model.Filter("isGroupSelected",sap.ui.model.FilterOperator.EQ,true);this.oFooter=new B('sapUshellDashboardFooter',{visible:{parts:['/tileActionModeActive','/viewPortState'],formatter:function(f,s){return f&&(s==='Center'||s===undefined);}},contentRight:[new T()]});this.oPage=new P('sapUshellDashboardPage',{customHeader:this.oAnchorNavigationBar,landmarkInfo:{headerRole:sap.ui.core.AccessibleLandmarkRole.Navigation},floatingFooter:true,footer:this.oFooter,content:[this.oDashboardGroupsBox]});var O=this.oPage.onAfterRendering;this.oPage.onAfterRendering=function(){if(O){O.apply(this,arguments);}var f=this.getDomRef(),s=f.getElementsByTagName('section');q(s[0]).off("scrollstop",o.handleDashboardScroll);q(s[0]).on("scrollstop",o.handleDashboardScroll);};this.oNotificationsContainer=new F({displayInline:true,fitContainer:true,items:[]});this.oViewContainer=new F({fitContainer:true,alignItems:m.FlexAlignItems.Stretch,renderType:m.FlexRendertype.Bare,height:'100%',items:[this.oPage,this.oNotificationsContainer]});sap.ui.getCore().getEventBus().publish("sap.ushell.services.Notifications","enablePreviewNotificationChanged");return this.oViewContainer;},_notificationsPreviewContainerCreated:function(s,e,d){this.oNotificationsContainer.addItem(d.previewNotificationsContainerPlaceholder);this.oNotificationsContainer.addItem(d.previewNotificationsContainer);},_getAnchorItemTemplate:function(){var t=this,h=C.last("/core/extension/enableHelp");var o=new A({index:"{index}",title:"{title}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",writeHelpId:h,selected:false,isGroupRendered:"{isRendered}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(d,i,v){if(!v[d?1:0]){return false;}return i||d;}},locked:"{isGroupLocked}",isGroupDisabled:{parts:['isGroupLocked','/isInDrag','/homePageGroupDisplay'],formatter:function(i,d,s){return i&&d&&s==='tabs';}},press:function(e){t.oAnchorNavigationBar.handleAnchorItemPress(e);}});o.attachBrowserEvent("focus",function(){this.setNavigationBarItemsVisibility();}.bind(this.oAnchorNavigationBar));return o;},_getAnchorNavigationBar:function(o){var d=new a("anchorNavigationBar",{selectedItemIndex:"{/topGroupInViewPortIndex}",itemPress:[function(e){this._handleAnchorItemPress(e);},o],overflowEnabled:false});d=this._extendAnchorNavigationBar(d);d.addStyleClass("sapContrastPlus");return d;},_extendAnchorNavigationBar:function(o){var e=q.extend(o,{onsapskipforward:function(d){d.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.goToTileContainer(d,this.bGroupWasPressed);this.bGroupWasPressed=false;},onsaptabnext:function(d){d.preventDefault();var j=q(":focus");if(!j.parent().parent().siblings().hasClass("sapUshellAnchorItemOverFlow")||(j.parent().parent().siblings().hasClass("sapUshellAnchorItemOverFlow")&&j.parent().parent().siblings().hasClass("sapUshellShellHidden"))){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.goToTileContainer(d);this.bGroupWasPressed=false;}else{var f=q(".sapUshellAnchorItemOverFlow button");f.focus();}},onsapskipback:function(d){d.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(d);},onsaptabprevious:function(d){d.preventDefault();var j=q(":focus");if(!j.parent().hasClass("sapUshellAnchorItemOverFlow")){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(d);}else{var f=q(".sapUshellAnchorItem:visible:first");if(!f.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(d);}else{sap.ushell.components.homepage.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}}},onsapenter:function(d){d.srcControl.getDomRef().click();},onsapspace:function(d){d.srcControl.getDomRef().click();}});return e;},_addActionModeButtonsToDashboard:function(){if(sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode.init(this.getModel());}},_createActionModeMenuButton:function(){var t=this,o={},d={id:"ActionModeBtn",text:r.i18n.getText("activateEditMode"),icon:'sap-icon://edit',press:function(){this.oDashboardGroupsBox.getBinding("groups").filter([]);var e=this.oDashboardGroupsBox.getGroups();sap.ushell.components.homepage.ActionMode.toggleActionMode(this.oModel,"Menu Item",e);this._updateAnchorNavigationBarVisibility();var v=sap.ui.getCore().byId('viewPortContainer');if(v.getCurrentState()!="Center"){sap.ui.getCore().byId("viewPortContainer").switchState("Center");}if(this.oModel.getProperty("/homePageGroupDisplay")!=="scroll"){if(this.oModel.getProperty("/tileActionModeActive")){if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){this.oDashboardGroupsBox.getBinding("groups").filter([]);var g=this.oModel.getProperty("/groups"),s;for(var i=0;i<g.length;i++){if(g[i].isGroupSelected){s=i;break;}}this.getController()._scrollToGroup("launchpad","scrollToGroup",{group:{getGroupId:function(){return g[s].groupId;}},groupChanged:false,focus:true});}else{this.oDashboardGroupsBox.getBinding("groups").filter([]);}}else{this.getController()._deactivateActionModeInTabsState();}}}.bind(this)};this.oTileActionsButton=sap.ui.getCore().byId(d.id);if(this.oTileActionsButton&&this.oTileActionsButton.data("isShellHeader")){q.sap.measure.start("FLP:DashboardContent,view._createActionModeMenuButton","attach press and text to edit home page button","FLP");this.oTileActionsButton.setTooltip(d.text);this.oTileActionsButton.setText(d.text);if(!this.bTileActionsButtonPressAttached){this.oTileActionsButton.attachPress(d.press);this.bTileActionsButtonPressAttached=true;}q.sap.measure.end("FLP:DashboardContent,view._createActionModeMenuButton");}else{o.controlType="sap.ushell.ui.launchpad.ActionItem";o.oControlProperties=d;o.bIsVisible=true;o.bCurrentState=true;sap.ushell.Container.getRenderer("fiori2").addUserAction(o).done(function(e){t.oTileActionsButton=e;if(C.last("/core/extension/enableHelp")){t.oTileActionsButton.addStyleClass('help-id-ActionModeBtn');}});}},_handleEditModeChange:function(){if(this.oTileActionsButton){this.oTileActionsButton.toggleStyleClass('sapUshellAcionItemActive');}},_enablePreviewNotificationChanged:function(s,e,d){this.oModel.setProperty("/userEnableNotificationsPreview",d.bUserEnableNotificationsPreview);this.oDashboardGroupsBox.toggleStyleClass("sapUshellDashboardGroupsContainerSqueezed",d.bUserEnableNotificationsPreview);this.oAnchorNavigationBar.toggleStyleClass("sapUshellAnchorNavigationBarSqueezed",d.bUserEnableNotificationsPreview);this.oNotificationsContainer.setVisible(d.bUserEnableNotificationsPreview);},_enableAnchorBarOverflowAndCreateFooter:function(s,e,d){if(this.oDoneBtn){return;}this.oAnchorNavigationBar.setOverflowEnabled(true);if(!this.oButtonLabelledBy){this.oButtonLabelledBy=new I({text:r.i18n.getText("closeEditMode")});this.oButtonLabelledBy.toStatic();}this.oDoneBtn=new b('sapUshellDashboardFooterDoneBtn',{type:m.ButtonType.Emphasized,text:r.i18n.getText("closeEditMode"),ariaLabelledBy:this.oButtonLabelledBy.getId(),press:function(){q("#sapUshellDashboardPage .sapUshellAnchorNavigationBarSqueezed").toggleClass("sapUshellAnchorBarEditMode");var f=this.oDashboardGroupsBox.getGroups();sap.ushell.components.homepage.ActionMode.toggleActionMode(this.oModel,"Menu Item",f);this._updateAnchorNavigationBarVisibility();if(this.oModel.getProperty("/homePageGroupDisplay")&&this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){this.getController()._deactivateActionModeInTabsState();}}.bind(this)});this.oDoneBtn.addEventDelegate({onsapskipforward:function(o){o.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(o);},onsapskipback:function(o){o.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.goToFirstVisibleTileContainer();},onsaptabprevious:function(o){o.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.goToFirstVisibleTileContainer();},onsaptabnext:function(o){o.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(o);}});this.oFooter.addContentRight(this.oDoneBtn);},_previewNotificationEnabled:function(){var d=this.oModel.getProperty("/configEnableNotificationsPreview"),U=this.oModel.getProperty("/userEnableNotificationsPreview");return(d&&U);},_createActionButtons:function(){var e=this.oModel.getProperty("/personalization");if(e){if(this.oModel.getProperty("/enableActionModeMenuButton")){this._createActionModeMenuButton();}}},onAfterNavigate:function(e){var R=sap.ushell.Container.getRenderer&&sap.ushell.Container.getRenderer("fiori2"),i=R&&R.getCurrentCoreView()==="home",d=sap.ui.getCore().byId("ActionModeBtn");if(d){if(d.data){if(d.data("isShellHeader")){d.setVisible(true);}}}if(R&&R.toggleOverFlowActions){R.toggleOverFlowActions();}if(i&&R){u.refreshTiles();R.createExtendedShellState("dashboardExtendedShellState",function(){this._createActionButtons();if(!c.system.phone){R.showRightFloatingContainer(false);}}.bind(this));this.getController()._setCenterViewPortShift();this._addActionModeButtonsToDashboard();this._updateAnchorNavigationBarVisibility();setTimeout(function(){if(sap.ushell.Container&&R){R.applyExtendedShellState("dashboardExtendedShellState");}},0);if(document.activeElement&&document.activeElement.tagName==="BODY"){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell();}}},_handleContentRendered:function(e){if(!this.isContentWasRendered&&e.groups>-1){this.isContentWasRendered=true;this._onAfterDashboardShow(e);var o={bUseUniqueMark:true};u.setPerformanceMark("FLP-TTI-Homepage",o);u.setPerformanceMeasure("FLP-TTI-Hompage");}else{this._onAfterDashboardShow(e);}},_focusOnDomElement:function(d){if(d){setTimeout(function(){d.focus();},0);}},_onAfterDashboardShow:function(e){if(!this.isContentWasRendered){this._focusOnDomElement(q("#configBtn"));return;}var j=q('.sapUshellTileContainer:visible'),v=sap.ui.getCore().byId('viewPortContainer'),i=sap.ushell.Container.getRenderer("fiori2").getCurrentCoreView()==="home",t=this.oModel.getProperty('/tileActionModeActive'),p;if(i){if(!t){u.handleTilesVisibility();var d=this.oModel.getProperty('/topGroupInViewPortIndex'),f=q(j[d]),g=j.find("li[class*='sapUshellTile']li[tabindex=0]"),h=f.find('.sapUshellTile:first'),k;if(g.length){k=g;}else if(h.length){k=h;}else{k=q("#configBtn");}p=this.oModel.getProperty('/enableNotificationsPreview');if(v){v.shiftCenterTransition(p);}this._focusOnDomElement(k);}this.onAfterNavigate();}},_updateAnchorNavigationBarVisibility:function(){var o=this.oPage.getShowHeader(),v=this.oAnchorNavigationBar.getVisibleGroups(),d=v.length>1;this.oPage.setShowHeader(d);if(d&&!o){var g=this.getModel().getProperty("/groups"),s=this.getModel().getProperty("/iSelectedGroup");for(var i=0;i<v.length;i++){if(v[i].getGroupId()===g[s].groupId){this.oAnchorNavigationBar.setSelectedItemIndex(i);break;}}}},getControllerName:function(){return"sap.ushell.components.homepage.DashboardContent";},_isInDeashboard:function(){var n=sap.ui.getCore().byId("viewPortContainer"),o=sap.ui.getCore().byId("dashboardGroups");return((n.getCurrentCenterPage()==="application-Shell-home")&&(o.getModel().getProperty("/currentViewName")==="home"));},exit:function(){if(this.oAnchorNavigationBar){this.oAnchorNavigationBar.handleExit();this.oAnchorNavigationBar.destroy();}if(this.oTileActionsButton){this.oTileActionsButton.destroy();}V.prototype.exit.apply(this,arguments);if(this.aDoableObjects){this.aDoableObjects.forEach(function(d){d.off();});}sap.ui.getCore().getEventBus().unsubscribe("launchpad","initialConfigurationSet",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad",'actionModeInactive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad",'actionModeActive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("shell","changeNotificationPreview",this._enablePreviewNotificationChanged,this);sap.ui.getCore().getEventBus().unsubscribe("shell","notificationsPreviewContainerCreated",this._notificationsPreviewContainerCreated,this);}});},false);
sap.ui.predefine('sap/ushell/components/homepage/DashboardGroupsBox',["sap/ushell/Layout","sap/ui/base/Object","sap/ushell/ui/launchpad/DashboardGroupsContainer","sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component"],function(L,b,D,E,C,a){"use strict";
var c=b.extend("sap.ushell.components.homepage.DashboardGroupsBox",{
metadata:{publicMethods:["createGroupsBox"]},
constructor:function(i,s){if(sap.ushell.components.homepage.getDashboardGroupsBox&&sap.ushell.components.homepage.getDashboardGroupsBox()){return sap.ushell.components.homepage.getDashboardGroupsBox();}sap.ushell.components.homepage.getDashboardGroupsBox=jQuery.sap.getter(this.getInterface());this.oController=undefined;this.oGroupsContainer=undefined;this.bTileContainersContentAdded=false;this.isLinkPersonalizationSupported=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported();sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);sap.ui.getCore().getEventBus().subscribe("launchpad","beforeAndAfterContentRemoved",this._removedContent,this);},
destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","beforeAndAfterContentRemoved",this._removedContent,this);sap.ushell.components.homepage.getDashboardGroupsBox=undefined;},
calculateFilter:function(){var f=[];var F;var g=this.oModel.getProperty('/homePageGroupDisplay'),e=this.oModel.getProperty("/tileActionModeActive");if(!e){if(g&&g==="tabs"){F=new sap.ui.model.Filter("isGroupSelected",sap.ui.model.FilterOperator.EQ,true);}else{F=new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true);}f.push(F);}return f;},
createGroupsBox:function(o,m){this.oController=o;var t=this,A,g,T=this._getTileContainerTemplate(o,m),e=function(){return t.oModel.getProperty('/enableLockedGroupsCompactLayout')&&!t.oModel.getProperty('/tileActionModeActive');},d=function(G){var h,p;if(G&&(h=G.getDomRef())){p=h.querySelector('.sapUshellPlusTile');if(p){return p;}}return null;},r=function(l){var p=d(l.currentGroup),h=d(l.endGroup),i=(l.tiles[l.tiles.length-2]===l.item)||(l.endGroup.getTiles().length===0);if(i){t._hidePlusTile(h);}else{t._showPlusTile(h);}if(l.currentGroup!==l.endGroup){t._showPlusTile(p);}};A=function(){L.getLayoutEngine().setExcludedControl(sap.ushell.ui.launchpad.PlusTile);L.getLayoutEngine().setReorderTilesCallback.call(L.layoutEngine,r);};g=function(){if(!L.isInited){L.init({getGroups:this.getGroups.bind(this),getAllGroups:t.getAllGroupsFromModel.bind(t),isTabBarActive:t.isTabBarActive.bind(t),isLockedGroupsCompactLayoutEnabled:e,animationsEnabled:(t.oModel.getProperty('/animationMode')==='full')}).done(A);sap.ui.Device.media.attachHandler(function(){if(!this.bIsDestroyed){L.reRenderGroupsLayout(null);}},this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);var h=this.getDomRef();o.getView().sDashboardGroupsWrapperId=!jQuery.isEmptyObject(h)&&h.parentNode?h.parentNode.id:'';}L.reRenderGroupsLayout(null);if(this.getGroups().length){if(o.bModelInitialized){o._initializeUIActions();}o._addBottomSpace();if(this.getModel().getProperty("/enableTilesOpacity")){sap.ushell.utils.handleTilesOpacity(this.getModel());}}E.emit("CenterViewPointContentRendered",{"groups":this.getGroups().length});sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");this.getBinding("groups").filter(t.calculateFilter());};this.isTabBarActive=function(){return this.oModel.getProperty("/homePageGroupDisplay")==="tabs";};this.oModel=m;var f=this.calculateFilter();this.oGroupsContainer=new D("dashboardGroups",{accessibilityLabel:sap.ushell.resources.i18n.getText("DashboardGroups_label"),groups:{filters:f,path:"/groups",template:T},displayMode:"{/homePageGroupDisplay}",afterRendering:g});this.oGroupsContainer.addEventDelegate({onsapskipback:function(h){h.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(".sapUshellAnchorItem:visible:first");if(!j.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(h);}else{sap.ushell.components.homepage.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}},onsapskipforward:function(h){h.preventDefault();var i=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(i.length){i.focus();}else{if(jQuery("#sapUshellFloatingContainerWrapper:visible").length==1&&(h.originalEvent.srcElement.id)!=""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(h);}}},onsaptabnext:function(h){if(t.oModel.getProperty("/tileActionModeActive")){var j=jQuery(document.activeElement).closest(".sapUshellTileContainerHeader");if(!j||j.length===0){h.preventDefault();var i=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(i.length){i.focus();}}else{var k=jQuery(document.activeElement).closest(".sapUshellTileContainer");var l=jQuery(document.activeElement).hasClass("sapUshellContainerTitle");var n=k.find('.sapUshellHeaderActionButton');var p=n&&n.length>0;var q=false;if(p){q=document.activeElement.id===n.last()[0].id;}if((l&&!p)||(q)){h.preventDefault();var H=k.find(".sapUshellTile:visible, sapUshellLink:visible").length>0;if(H){sap.ushell.components.homepage.ComponentKeysHandler.goToLastVisitedTile(k,true);}else{var i=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(i.length){i.focus();}else{if(jQuery("#sapUshellFloatingContainerWrapper:visible").length==1&&(h.originalEvent.srcElement.id)!=""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(h);}}}}}}else{h.preventDefault();if(jQuery("#sapUshellFloatingContainerWrapper:visible").length==1&&(h.originalEvent.srcElement.id)!=""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(h);}}},onsaptabprevious:function(h){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(":focus");if(!t.oModel.getProperty("/tileActionModeActive")||j.hasClass("sapUshellTileContainerHeader")){h.preventDefault();var i=jQuery(".sapUshellAnchorItem:visible:first"),k=jQuery(".sapUshellAnchorItemOverFlow");if(!i.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(h);}if(k.hasClass("sapUshellShellHidden")){sap.ushell.components.homepage.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}else{k.find("button").focus();}}else if(t.oModel.getProperty("/tileActionModeActive")){var l=jQuery(document.activeElement);if(l.hasClass('sapUshellTile')){h.preventDefault();var n=l.closest(".sapUshellTileContainer");var p=n.find('.sapUshellHeaderActionButton:visible').last();if(p.length>0){p.focus();}else{n.find('.sapUshellContainerTitle').focus();}}}}});return this.oGroupsContainer;},
getAllGroupsFromModel:function(){return this.oModel.getProperty("/groups");},
_getTileContainerTemplate:function(o,m){var t=this,T=new sap.ushell.ui.launchpad.TileContainer({headerText:"{title}",showDragIndicator:{parts:['/tileActionModeActive','/enableDragIndicator'],formatter:function(i,d){return i&&d&&!this.getIsGroupLocked()&&!this.getDefaultGroup();}},showEmptyLinksArea:{parts:['/tileActionModeActive','links/length',"isGroupLocked",'/isInDrag','/homePageGroupDisplay'],formatter:function(d,n,i,I,A){if(n){return true;}else if(i){return false;}else{return d||I&&A==='tabs';}}},showMobileActions:{parts:['/tileActionModeActive'],formatter:function(i){return i&&!this.getDefaultGroup();}},showIcon:{parts:['/isInDrag','/tileActionModeActive'],formatter:function(i,I){return(this.getIsGroupLocked()&&(i||I));}},deluminate:{parts:['/isInDrag'],formatter:function(i){return this.getIsGroupLocked()&&i;}},transformationError:{parts:['/isInDrag','/draggedTileLinkPersonalizationSupported'],formatter:function(i,d){return i&&!d;}},showBackground:'{/tileActionModeActive}',tooltip:"{title}",tileActionModeActive:'{/tileActionModeActive}',ieHtml5DnD:o.getView().ieHtml5DnD,enableHelp:'{/enableHelp}',groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",showHeader:true,showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",editMode:"{editMode}",supportLinkPersonalization:this.isLinkPersonalizationSupported,titleChange:function(e){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:e.getSource().getGroupId(),newTitle:e.getParameter("newTitle")});},showEmptyLinksAreaPlaceHolder:{parts:['links/length','/isInDrag','/homePageGroupDisplay'],formatter:function(n,i,A){return i&&A==='tabs'&&!n;}},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(d){return d&&!this.getIsGroupLocked();}},visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(d,i,v){if(!v[d?1:0]){return false;}return i||d;}},hidden:{parts:['/tileActionModeActive','isGroupVisible'],formatter:function(i,I){return i&&!I;}},links:this._getLinkTemplate(),tiles:this._getTileTemplate(),add:function(e){if(document.toDetail){document.toDetail();}a.getOwnerComponentFor(t.oController.getView().parentComponent).getRouter().navTo("appfinder",{"innerHash*":"catalog/"+JSON.stringify({targetGroup:encodeURIComponent(e.getSource().getBindingContext().sPath)})});}});return T;},
_getLinkTemplate:function(){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true);if(!this.isLinkPersonalizationSupported){return{path:"links",templateShareable:true,template:new sap.ushell.ui.launchpad.LinkTileWrapper({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,tileViews:{path:"content",factory:function(i,o){return o.getObject();}},afterRendering:function(e){var j=jQuery(this.getDomRef().getElementsByTagName("a"));j.attr("tabindex",-1);}}),filters:[f]};}else{return{path:"links",factory:function(i,o){var d=o.getObject().content[0];if(d&&d.bIsDestroyed){d=d.clone();o.getModel().setProperty(o.getPath()+"/content/0",d);}return d;},filters:[f]};}},
_getTileTemplate:function(){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true);var t=new sap.ushell.ui.launchpad.Tile({"long":"{long}",isDraggedInTabBarToSourceGroup:"{draggedInTabBarToSourceGroup}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",isCustomTile:"{isCustomTile}",target:"{target}",isLocked:"{isLocked}",navigationMode:"{navigationMode}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,tileViews:{path:"content",factory:function(i,o){return o.getObject();}},coverDivPress:function(e){if(!e.oSource.getBindingContext().getObject().tileIsBeingMoved){sap.ushell.components.homepage.ActionMode._openActionsMenu(e);}},showActions:function(e){sap.ushell.components.homepage.ActionMode._openActionsMenu(e);},deletePress:function(e){var T=e.getSource(),t=T.getBindingContext().getObject().object,d={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(t)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},press:[this.oController.dashboardTilePress,this.oController]});var v=sap.ui.getCore().byId("viewPortContainer");t.addEventDelegate({onclick:function(e){jQuery.sap.measure.start("FLP:DashboardGroupsBox.onclick","Click on tile","FLP");jQuery.sap.measure.start("FLP:OpenApplicationonClick","Open Application","FLP");function d(){jQuery.sap.measure.end("FLP:DashboardGroupsBox.onclick");v.detachAfterNavigate(d);}v.attachAfterNavigate(d);}});return{path:"tiles",templateShareable:true,template:t,filters:[f]};},
_updateGroupHeaderVisibility:function(){var g=this.oGroupsContainer.getGroups(),e=this.oModel.getProperty("/tileActionModeActive"),A=this.oController.getView().oPage.getShowHeader(),f,v=0;for(var i=0;i<g.length;i++){if(g[i].getProperty("visible")){v++;if(f===undefined){f=i;}else{g[i].setShowGroupHeader(true);}}}if(f!==undefined){var V=e||(v===1&&!A);g[f].setShowGroupHeader(V);}},
_handleActionModeChange:function(){var A=this.oModel.getProperty('/tileActionModeActive');if(A){this._addTileContainersContent();}else{L.reRenderGroupsLayout(null);}},
_addTileContainersContent:function(){if(!this.bTileContainersContentAdded){var g=this.oGroupsContainer.getGroups();g.forEach(function(d,e){this._addTileContainerContent(e);}.bind(this));this.bTileContainersContentAdded=true;}},
_addTileContainerContent:function(g){var G=this.oGroupsContainer.getGroups()[g],B;if(G){B=G.getBindingContext().getPath()+'/';G.addBeforeContent(this._getBeforeContent(this.oController,B));G.addAfterContent(this._getAfterContent(this.oController,B));sap.ui.require(["sap/ushell/ui/launchpad/GroupHeaderActions"],function(d){var h=new d({content:this._getHeaderActions(),tileActionModeActive:{parts:['/tileActionModeActive',B+'isDefaultGroup'],formatter:function(i,I){return i&&!I;}},isOverflow:'{/isPhoneWidth}'}).addStyleClass("sapUshellOverlayGroupActionPanel");G.addHeaderAction(h);}.bind(this));}},
_handleAddGroupButtonPress:function(d){this.oController._addGroupHandler(d);if(this.bTileContainersContentAdded){var g=this.oGroupsContainer.getGroups(),i;for(i=0;i<g.length;i++){if(!g[i].getBeforeContent().length){this._addTileContainerContent(i);}}}},
_removedContent:function(){this.bTileContainersContentAdded=false;},
_getBeforeContent:function(o){var d=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["/tileActionModeActive"],formatter:function(t){return(!this.getParent().getIsGroupLocked()&&!this.getParent().getDefaultGroup()&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:[this._handleAddGroupButtonPress.bind(this)]}).addStyleClass("sapUshellAddGroupButton");d.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return d;},
_getAfterContent:function(o){var d=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["isLastGroup","/tileActionModeActive","/isInDrag"],formatter:function(i,t,e){return(i&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:[this._handleAddGroupButtonPress.bind(this)]}).addStyleClass("sapUshellAddGroupButton");d.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return d;},
_getHeaderActions:function(){var s=new sap.m.Button({text:{path:'isGroupVisible',formatter:function(i){if(sap.ui.Device.system.phone){this.setIcon(i?"sap-icon://hide":"sap-icon://show");}return sap.ushell.resources.i18n.getText(i?'HideGroupBtn':'ShowGroupBtn');}},visible:{parts:['/tileActionModeActive','/enableHideGroups','isGroupLocked','isDefaultGroup'],formatter:function(i,I,e,f){return i&&I&&!e&&!f;}},press:function(e){var S=e.getSource(),g=S.getBindingContext();this.oController._changeGroupVisibility(g);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");var d=new sap.m.Button({text:{path:'removable',formatter:function(i){if(sap.ui.Device.system.phone){if(i){this.setIcon("sap-icon://delete");}else{this.setIcon("sap-icon://refresh");}}return sap.ushell.resources.i18n.getText(i?'DeleteGroupBtn':'ResetGroupBtn');}},visible:{parts:['/tileActionModeActive','isDefaultGroup'],formatter:function(i,I){return i&&!I;}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:function(e){var S=e.getSource(),g=S.getBindingContext();this.oController._handleGroupDeletion(g);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");return[s,d];},
_hidePlusTile:function(p){if(p){p.className+=" sapUshellHidePlusTile";}},
_showPlusTile:function(p){if(p){p.className=p.className.split(' '+'sapUshellHidePlusTile').join('');}}
});
return c;});
sap.ui.predefine('sap/ushell/components/homepage/DashboardUIActions',["sap/ui/base/Object"],function(b){"use strict";
var D=b.extend("sap.ushell.components.homepage.DashboardUIActions",{
metadata:{publicMethods:["initializeUIActions"]},
constructor:function(i,s){this.aTabBarItemsLocation=[];if(sap.ushell.components.homepage.getDashboardUIActions&&sap.ushell.components.homepage.getDashboardUIActions()){return sap.ushell.components.homepage.getDashboardUIActions();}sap.ushell.components.homepage.getDashboardUIActions=jQuery.sap.getter(this.getInterface());this.oTileUIActions=undefined;this.oLinkUIActions=undefined;this.oGroupUIActions=undefined;this.oController=undefined;this.UIActionsInitialized=false;sap.ui.getCore().getEventBus().subscribe('launchpad','actionModeActive',this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().subscribe('launchpad','actionModeInactive',this._disableGroupUIActions,this);},
destroy:function(){sap.ui.getCore().getEventBus().unsubscribe('launchpad','actionModeActive',this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().unsubscribe('launchpad','actionModeInactive',this._disableGroupUIActions,this);sap.ushell.components.homepage.getDashboardUIActions=undefined;this.oGroupUIActions=null;this.oTileUIActions=null;this.oLinkUIActions=null;},
initializeUIActions:function(c){this.oController=c;if(c.getView().getModel().getProperty("/homePageGroupDisplay")==="tabs"){this._fillTabBarItemsArray();}var i=sap.ushell.Container?sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported():null;var d=c.getView().sDashboardGroupsWrapperId,a,r=sap.ui.getCore().getConfiguration().getRTL(),C={containerSelector:'#dashboardGroups',wrapperSelector:d?"#"+d:undefined,rootSelector:"#shell"},o=jQuery.extend(true,{},C,{switchModeDelay:1000,isTouch:c.getView().isTouch,isCombi:c.getView().isCombi,debug:false}),l={draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",cloneClass:"sapUshellLinkTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?jQuery(".sapUshellViewPortLeft").width():-jQuery(".sapUshellViewPortLeft").width(),defaultMouseMoveHandler:function(){}},t={draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",deltaTop:-44,scrollContainerSelector:undefined,startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?jQuery(".sapUshellViewPortLeft").width():-jQuery(".sapUshellViewPortLeft").width(),defaultMouseMoveHandler:function(){}},g={draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",draggableSelectorExclude:".sapUshellHeaderActionButton",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",startCallback:this._handleGroupsUIStart.bind(this),endCallback:this._handleGroupDrop.bind(this),dragCallback:this._handleGroupStartDrag.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:0.1,isLayoutEngine:false,isVerticalDragOnly:true,draggableElement:".sapUshellTileContainerHeader"},w={type:"tiles",draggableSelector:".sapUshellTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?jQuery(".sapUshellViewPortLeft").width():-jQuery(".sapUshellViewPortLeft").width()},W={type:"links",draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?jQuery(".sapUshellViewPortLeft").width():-jQuery(".sapUshellViewPortLeft").width()},e={type:"groups",draggableSelector:".sapUshellTileContainerHeader",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",_publishAsync:c._publishAsync};if(c.getView().oDashboardGroupsBox.getGroups().length){if(c.getView().getModel().getProperty("/personalization")){if(!c.getView().ieHtml5DnD){sap.ui.require(['sap/ushell/UIActions'],function(U){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=new U(jQuery.extend(true,{},o,t)).enable();this.oGroupUIActions=new U(jQuery.extend(true,{},o,g));if(i){this.oLinkUIActions=new U(jQuery.extend(true,{},o,l)).enable();}a=c.getView().getModel().getProperty("/tileActionModeActive");if(a){this.oGroupUIActions.enable();}}.bind(this));}else{sap.ui.require(['sap/ushell/UIActionsWin8'],function(U){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=U.getInstance(jQuery.extend(true,{},C,w)).enable();this.oLinkUIActions=U.getInstance(jQuery.extend(true,{},C,W)).enable();this.oGroupUIActions=U.getInstance(jQuery.extend(true,{},C,e)).enable();}.bind(this));}}}},
_enableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.enable();}},
disableAllDashboardUiAction:function(){this._disableTileUIActions();this._disableLinkUIActions();this._disableGroupUIActions();},
_disableTileUIActions:function(){if(this.oTileUIActions){this.oTileUIActions.disable();}},
_disableLinkUIActions:function(){if(this.oLinkUIActions){this.oLinkUIActions.disable();}},
_disableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.disable();}},
_handleTileDragMove:function(c){if(!c.isScrolling){sap.ushell.Layout.getLayoutEngine().moveDraggable(c.moveX,c.moveY,this.aTabBarItemsLocation);}},
_handleTileDragAndScrollContinuation:function(m){var a=jQuery("#anchorNavigationBar").offset(),A=a.top;if(m<A){sap.ushell.Layout.getLayoutEngine()._cancelLongDropTimmer();}return sap.ushell.Layout.getLayoutEngine()._isTabBarCollision(m);},
_fillTabBarItemsArray:function(){var i=jQuery(".sapUshellAnchorItem"),l=i.length,a,B=10,t=0,T=[],I,o,c,n;for(a=0;a<l;a++){I=i[a];o=I.getBoundingClientRect();T[a]=o.width;}for(a=0;a<l;a++){c=T[a];if(c===0){continue;}n=Math.round(c/B);for(var d=t;d<t+n;d++){this.aTabBarItemsLocation[d]=a;}t=d;}},
_handleTileUIStart:function(e,u){if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");if(this.titleElement){this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}}},
_changeTileDragAndDropAnimate:function(e,u){var d=this.dragNDropData.jqDashboard.scrollTop(),j,t,c,a,f,T,i,C;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){j=this.dragNDropData.jqDraggableElements.eq(i);t=j[0];c=j.position();a=j.offset();if((a.left===t.offset.left)&&(a.top===t.offset.top)){continue;}t.position=c;t.offset=a;C=j.data("clone");if(!C){continue;}f=t.position.left+this.dragNDropData.containerLeftMargin;T=this._getTileTopOffset(j,t.position,d);C.stop(true,false).animate({left:f,top:T},{duration:250},{easing:"swing"});}},
_preventTextSelection:function(){if(window.getSelection){var s=window.getSelection();try{s.removeAllRanges();}catch(e){}}},
_handleStartDragTile:function(e,t){this._preventTextSelection();sap.ushell.Layout.getLayoutEngine().layoutStartCallback(t);if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.initDragMode();}jQuery(t).find("a").removeAttr('href');this.oController._handleDrag.call(this.oController,e,t);sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},
_onBeforeCreateLinkClone:function(e,L){sap.ushell.Layout.getLayoutEngine().saveLinkBoundingRects(L);},
_handleLinkDrop:function(e,t,a){var d=jQuery.Deferred(),p;if(sap.ushell.Layout.isTabBarActive()){sap.ushell.Layout.tabBarTileDropped();}if(sap.ushell.Layout.isAnimationsEnabled()&&a&&a.clone){jQuery(a.clone).animate({opacity:0},100,function(){});}if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}if(sap.ushell.Layout.getLayoutEngine().isLinkIntersected()||sap.ushell.Layout.getLayoutEngine().isOriginalAreaChanged()){p=this.oController._handleDrop.call(this.oController,e,t);}if(p){p.then(function(){jQuery('#dashboardGroups .sapUshellHidePlusTile').removeClass('sapUshellHidePlusTile');setTimeout(function(){d.resolve();}.bind(this),300);});}else{setTimeout(function(){d.resolve();}.bind(this),0);}return d.promise();},
_handleTileDrop:function(e,t,a){if(sap.ushell.Layout.getLayoutEngine().isOriginalAreaChanged()){return this._handleTileToLinkDrop(e,t,a);}else{return this._handleTileToTileDrop(e,t,a);}},
_handleTileToLinkDrop:function(e,t,a){return this._handleLinkDrop(e,t,a);},
_handleTileToTileDrop:function(e,t,a){var j,h,T,c=function(e,t){if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.endDragMode();}jQuery('#dashboardGroups .sapUshellHidePlusTile').removeClass('sapUshellHidePlusTile');if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}},h=jQuery(".sapUshellTabBarHoverOn");h.removeClass("sapUshellTabBarHoverOn");T=jQuery(".sapUshellTileDragOpacity");T.removeClass("sapUshellTileDragOpacity");if(sap.ushell.Layout.isTabBarActive()){sap.ushell.Layout.tabBarTileDropped();}if(sap.ushell.Layout.isTabBarActive()&&sap.ushell.Layout.isOnTabBarElement()){if(a&&a.clone){var d=jQuery.Deferred();j=jQuery(a.clone);j.css("display","none");setTimeout(function(){d.resolve();c.call(this,e,t);}.bind(this),300);return d.promise();}else{setTimeout(function(){c.call(this,e,t);}.bind(this),300);}}if(sap.ushell.Layout.isAnimationsEnabled()&&a&&a.clone){var f=jQuery.Deferred();j=jQuery(a.clone);var g=a.clone.getBoundingClientRect();var p=t.getBoundingClientRect();var s=j.css("transform").split(",");var i=p.top-g.top;var k=p.left-g.left;var l=parseInt(s[4],10)+k;var m=parseInt(s[5],10)+i;j.css({"transform":"translate3d("+l+"px, "+m+"px, 0px)","transition":"transform 0.3s cubic-bezier(0.46, 0, 0.44, 1)"});setTimeout(function(){f.resolve();c.call(this,e,t);}.bind(this),300);return f.promise();}else{setTimeout(function(){c.call(this,e,t);}.bind(this),300);}},
_getTileTopOffset:function(t,p,d){var i=0,T=i+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=p.top;return T;},
_markDisableGroups:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty('/isInDrag',true);}},
_endUIHandler:function(){if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.endDragMode();}if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty('/isInDrag',false);}},
_handleGroupStartDrag:function(e,u){this.oTileUIActions.disable();if(this.oLinkUIActions){this.oLinkUIActions.disable();}var g=jQuery(".sapUshellDashboardGroupsContainerItem-clone"),a=g.find(".sapUshellContainerTitle"),t=a.height(),c=a.width(),d,f,h,s,r=sap.ui.getCore().getConfiguration().getRTL();if(!sap.ui.Device.system.phone){g.find(".sapUshellTileContainerEditMode").offset({top:this.oGroupUIActions.getMove().y-t,left:r?jQuery(".sapUshellViewPortCenter").width()+this.oGroupUIActions.getMove().x+c:this.oGroupUIActions.getMove().x-(c/2)});jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}else{jQuery(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer, .sapUshellLinksContainer").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}jQuery(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerRemoveContent");jQuery(u).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.oController.getView().getModel().setProperty('/isInDrag',true);jQuery(u).attr('startPos',jQuery(u).index());jQuery.sap.log.info('startPos - '+jQuery(u).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},0);d=jQuery("#dashboardGroups").offset().top;f=jQuery(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top;h=jQuery(".sapUshellDashboardGroupsContainerItem-clone").offset().top;s=f-d-h;jQuery('.sapUshellDashboardView section').animate({scrollTop:s},0);},
_handleGroupsUIStart:function(e,u){jQuery(u).find(".sapUshellTileContainerContent").css("outline-color","transparent");},
_handleGroupDrop:function(e,u){var B=sap.ui.getCore().getEventBus(),q=jQuery(u),f=jQuery(q.children()[0]).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),o={group:g,groupChanged:false,focus:false},n=q.index();q.startPos=window.parseInt(q.attr('startPos'),10);d.removeAggregation('groups',g,true);d.insertAggregation('groups',g,n,true);this._handleGroupMoved(e,{item:q});q.removeAttr('startPos');sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){jQuery(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer, .sapUshellLinksContainer").removeClass("sapUshellTileContainerRemoveContent");},0);window.setTimeout(jQuery.proxy(B.publish,B,"launchpad","scrollToGroup",o),1);this.oTileUIActions.enable();if(this.oLinkUIActions){this.oLinkUIActions.enable();}},
_handleGroupMoved:function(e,u){var f=u.item.startPos,t=u.item.index(),m=this.oController.getView().getModel();if(t!==-1){this.oController._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t});setTimeout(function(){m.setProperty('/isInDrag',false);},100);}},
_setController:function(c){this.oController=c;}
});
return D;});
sap.ui.predefine('sap/ushell/components/shell/MeArea/Component',['sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/applicationIntegration/AppLifeCycle','sap/ushell/components/homepage/ComponentKeysHandler','sap/ushell/ui/footerbar/ContactSupportButton','sap/ushell/ui/footerbar/EndUserFeedback','sap/ushell/EventHub','sap/ushell/Config','./UserPreferences'],function(r,U,A,C,a,E,b,c,d){"use strict";var _;
function f(){if(!_){_=sap.ushell.Container.getRenderer("fiori2");}return _;}
function g(){return f().getShellConfig();}
function h(){return A.getElementsModel().getModel();}
var i;return U.extend("sap.ushell.components.shell.MeArea.Component",{metadata:{version:"1.60.40",library:"sap.ushell.components.shell.MeArea",dependencies:{libs:["sap.m","sap.ui.layout"]}},createContent:function(){this._bSearchPrefsLoaded=false;this._bIsMeAreaCreated=false;i=c.last("/core/extension/enableHelp");var m;var t=function(s){this.toggleMeAreaView(m,s);}.bind(this);m=sap.ui.getCore().byId("meAreaHeaderButton");m.applySettings({tooltip:sap.ushell.Container.getUser().getFullName(),icon:'{/userImage/personPlaceHolder}',selected:{path:"/currentViewPortState",formatter:function(v){if(v==='LeftCenter'){return true;}return false;}},press:function(){t(!this.getSelected());},visible:true,enabled:true,showSeparator:false,ariaLabel:"{i18n>MeAreaToggleButtonAria}"}).removeStyleClass("sapUshellPlaceHolders");m.addEventDelegate({onAfterRendering:function(){m.$().attr("aria-pressed",m.getSelected());},onsapskipforward:function(e){sap.ushell.renderers.fiori2.AccessKeysHandler.bForwardNavigation=true;e.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onsaptabprevious:function(e){var v=sap.ui.getCore().byId('viewPortContainer'),s=v.getCurrentState(),R;switch(s){case"LeftCenter":R=jQuery("#meAreaIconTabBar-content li:first");if(R.length>0){R[0].focus();}else{var j=c.last("/core/shell/enableRecentActivity");if(j&&h().getProperty("/enableTrackingActivity")){jQuery("#meAreaIconTabBar .sapMITBText")[0].focus();}else{e.preventDefault();jQuery('.sapUshellActionItem:last')[0].focus();}}break;case"Center":if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}break;default:}},onsapskipback:function(e){var v=sap.ui.getCore().byId('viewPortContainer'),s=v.getCurrentState(),n;switch(s){case"LeftCenter":e.preventDefault();n=jQuery("#meAreaIconTabBar .sapMITBSelected");if(n.length===0){n=jQuery(".sapUshellActionItem");}n[0].focus();break;case"Center":e.preventDefault();if(jQuery("#sapUshellFloatingContainerWrapper:visible").length==1&&(e.originalEvent.srcElement.id)!=""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}break;default:}}});A.getElementsModel().createInspection("actions",[{fnCondition:function(I,e,T){return true;},fnAction:function(I,e,T){if((I&&I.length>0)||(e&&e.length>0)){if(e.indexOf("meAreaHeaderButton")===-1){T.addHeaderItem(["meAreaHeaderButton"],true);}}else{T.removeHeaderItem(["meAreaHeaderButton"],true);}}}],false,["blank-home","blank"]);this._createMeArea();b.on('showMeArea').do(t);sap.ui.getCore().getEventBus().publish("shell","meAreaCompLoaded",{delay:0});},_createMeArea:function(){if(this._bIsMeAreaCreated===true){return;}this._bIsMeAreaCreated=true;var m=sap.ui.view("meArea",{viewName:"sap.ushell.components.shell.MeArea.MeArea",type:'JS',viewData:f().getComponentData(),async:true});m.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));m.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:r.i18n.getText("MeAreaToggleButtonAria"),writeToDom:true}));this._createActionButtons();this._setUserPrefModel();sap.ui.getCore().getEventBus().publish("launchpad","Settings");m.loaded().then(function(v){f().addLeftViewPort(m);});f().ViewPortContainerAttachAfterSwitchStateAnimationFinished(function(D){if(D.getParameter("to")==="LeftCenter"&&!this._bSearchPrefsLoaded){this._getSearchPrefs();}}.bind(this));},toggleMeAreaView:function(m,s){if(!m||!m.getDomRef()){return;}if(m.getSelected()===!!s){return;}var e=h().getProperty('/currentState/stateName');var p={'embedded':true,'embedded-home':true,'standalone':true,'blank-home':true,'blank':true};this._createMeArea();if(p[e]===true){this._showActionsInPopOver(m);}else{this._switchToMeAreaView(m,s);}},_createActionButtons:function(){if(!sap.ui.getCore().byId("aboutBtn")){var o=new sap.ushell.ui.footerbar.AboutButton("aboutBtn");if(i){o.addStyleClass('help-id-aboutBtn');}f().addShellDanglingControl(o);}if(!sap.ui.getCore().byId("userSettingsBtn")&&!g().moveUserSettingsActionToShellHeader){var u=new sap.ushell.ui.launchpad.ActionItem("userSettingsBtn",{id:"userSettingsBtn",text:r.i18n.getText("userSettings"),icon:'sap-icon://action-settings'});if(i){u.addStyleClass('help-id-loginDetails');}f().addShellDanglingControl(u);}if(!g().moveContactSupportActionToShellHeader){c.on("/core/extension/SupportTicket").do(function(e){var j=sap.ui.getCore().byId("ContactSupportBtn");if(e&&!j){j=new a("ContactSupportBtn");f().addShellDanglingControl(j);if(i){j.addStyleClass('help-id-contactSupportBtn');}}j&&j.setVisible(e);});}h().setProperty('/showEndUserFeedback',false);function s(j,k){try{j.isEnabled().done(function(){h().setProperty('/showEndUserFeedback',true);var l=f().getEndUserFeedbackConfiguration();if(g().moveGiveFeedbackActionToShellHeader){jQuery.sap.measure.start("FLP:Shell.controller._createActionButtons","create give feedback as shell head end item","FLP");var t=sap.ui.getCore().byId("EndUserFeedbackHandlerBtn");t.setModel(h());t.setShowAnonymous(l.showAnonymous);t.setAnonymousByDefault(l.anonymousByDefault);t.setShowLegalAgreement(l.showLegalAgreement);t.setShowCustomUIContent(l.showCustomUIContent);t.setFeedbackDialogTitle(l.feedbackDialogTitle);t.setTextAreaPlaceholder(l.textAreaPlaceholder);t.setAggregation("customUIContent",l.customUIContent,false);k.attachPress(function(){t.firePress();});jQuery.sap.measure.end("FLP:Shell.controller._createActionButtons");}else if(!k){k=new E("EndUserFeedbackBtn",{showAnonymous:l.showAnonymous,anonymousByDefault:l.anonymousByDefault,showLegalAgreement:l.showLegalAgreement,showCustomUIContent:l.showCustomUIContent,feedbackDialogTitle:l.feedbackDialogTitle,textAreaPlaceholder:l.textAreaPlaceholder,customUIContent:l.customUIContent});if(i){k.addStyleClass('help-id-EndUserFeedbackBtn');}f().addShellDanglingControl(k);}k.setVisible(true);}).fail(function(){if(k){k.setVisible(false);}});}catch(e){jQuery.sap.log.error("EndUserFeedback adapter is not found",e.message||e);}}c.on("/core/extension/EndUserFeedback").do(function(e){var j=sap.ui.getCore().byId("EndUserFeedbackBtn");if(e){sap.ushell.Container.getServiceAsync("EndUserFeedback").then(function(k){s(k,j);});}else if(j){h().setProperty('/showEndUserFeedback',false);j.setVisible(false);}});},_setUserPrefModel:function(){d.setModel();},_showActionsInPopOver:function(o){var e=h().getProperty('/currentState/actions');if(!this.oActionsPopover){this.oActionsLayout=new sap.ui.layout.VerticalLayout();this.oActionsPopover=new sap.m.Popover("sapUshellActionsPopover",{showHeader:false,placement:sap.m.PlacementType.Bottom,content:this.oActionsLayout}).addStyleClass("sapUshellPopupContainer");}this.oActionsLayout.removeAllContent();this._createActionButtons();e.forEach(function(s,I){var j=sap.ui.getCore().byId(s);if(j&&j.setActionType){this.oActionsLayout.addContent(j);j.setActionType('standard');j.addStyleClass('sapUshellStandardActionItem');}}.bind(this));this.oActionsPopover.setModel(h());this.oActionsPopover.openBy(o);},_switchToMeAreaView:function(o,s){f().switchViewPortStateByControl(o,s?"LeftCenter":"Center");f().toggleOverFlowActions();},_getSearchPrefs:function(){function e(){var m=h();try{var j=m.getProperty("/currentState/stateName");return A.getElementsModel().getBaseStateMember(j,"headEndItems").indexOf("sf")!=-1;}catch(k){jQuery.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: search button is not visible.");return false;}}if(e()){sap.ui.require(['sap/ushell/renderers/fiori2/search/userpref/SearchPrefs','sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader'],function(S){this._bSearchPrefsLoaded=true;var s=S.getEntry();s.isSearchPrefsActive().done(function(j){if(j){f().addUserProfilingEntry(s);}}.bind(this));}.bind(this));}},exit:function(){}});});
sap.ui.predefine('sap/ushell/components/shell/MeArea/DefaultParameters.controller',["sap/ui/comp/smartform/SmartForm","sap/ui/model/odata/ODataModel","sap/ui/comp/smartfield/SmartField","sap/ui/comp/valuehelpdialog/ValueHelpDialog"],function(S,O,a,V){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.DefaultParameters",{onInit:function(){this.oModelRecords={};this.oChangedParameters={};this.oBlockedParameters={};this.aDisplayedUserDefaults=[];this.DefaultParametersService=sap.ushell.Container.getService("UserDefaultParameters");},applyFocus:function(){var t=this;setTimeout(function(){if(!sap.ui.Device.phone){var e=jQuery.sap.byId(t.getView().getId()).firstFocusableDomRef();if(e){jQuery.sap.focus(e);}}},1);},overrideOdataModelValue:function(e){var u=e.getParameter('url'),m=e.getSource(),f,F,t=this;this.aDisplayedUserDefaults.forEach(function(r){if(r.editorMetadata&&r.editorMetadata.editorInfo){F=r.editorMetadata.editorInfo.odataURL+r.editorMetadata.editorInfo.bindingPath;if(F===u){f=r.editorMetadata.editorInfo.bindingPath+"/"+r.editorMetadata.editorInfo.propertyName;if(m.getProperty(f)!==r.valueObject.value){m.setProperty(f,r.valueObject.value);}t.oBlockedParameters[r.parameterName]=false;}}});},getOrCreateModelForODataService:function(u){if(!this.oModelRecords[u]){var p={metadataUrlParams:{"sap-documentation":"heading,quickinfo","sap-value-list":"none"},json:true};var m=new O(u,p);m.setDefaultCountMode("None");m.setDefaultBindingMode("TwoWay");m.attachRequestCompleted(this.overrideOdataModelValue.bind(this));this.oModelRecords[u]=m;}return this.oModelRecords[u];},constructControlSet:function(p){var u=[];for(var P in p){for(var n=0;n<u.length;n++){if(u[n].parameterName===P){u.splice(n,1);}}p[P].parameterName=P;u.push(p[P]);}this.sortParametersByGroupIdParameterIndex(u);this.aDisplayedUserDefaults=u;this.sForm=new S({editable:true}).addStyleClass("sapUshellShellDefaultValuesForm");this.getView().addContent(this.sForm);},getValue:function(){var d=jQuery.Deferred();var h=sap.ushell.Container.getService("UserDefaultParameters").hasRelevantMaintainableParameters();h.done(function(H){d.resolve({value:H?1:0,displayText:" "});});h.fail(function(e){d.reject(e);});return d.promise();},createPlainModel:function(g,r){r.modelBind.model=this.oMdlParameter;r.modelBind.extendedModel=this.oMdlParameter;g.setModel(r.modelBind.model);var m="/sUserDef_"+r.nr+"_";r.modelBind.sFullPropertyPath=m;r.modelBind.sPropertyName="{"+m+"}";r.modelBind.model.setProperty(r.modelBind.sFullPropertyPath,r.valueObject.value);},revertToPlainModelControls:function(g,r){jQuery.sap.log.error("Metadata loading for parameter "+r.parameterName+" failed"+JSON.stringify(r.editorMetadata));r.modelBind.isOdata=false;this.createPlainModel(g,r);this.createAppropriateControl(g,r);},getContent:function(){var t=this;var d=new jQuery.Deferred();this.DefaultParametersService.editorGetParameters().done(function(p){t.oMdlParameter=new sap.ui.model.json.JSONModel(p);t.oMdlParameter.setDefaultBindingMode("TwoWay");t.getView().setModel(t.oMdlParameter,"MdlParameter");t.oOriginalParameters=jQuery.extend(true,{},p);t.oCurrentParameters=jQuery.extend(true,{},p);t.constructControlSet(p);var l="nevermore";var g;t.aChangedParameters=[];t.oBindingContexts={};t.setPropValue=function(r){r.modelBind.model.setProperty(r.modelBind.sFullPropertyPath,r.valueObject.value);t.oBlockedParameters[r.parameterName]=false;};t.oMdlParameter.setProperty("/sUser");for(var i=0;i<t.aDisplayedUserDefaults.length;++i){var r=t.aDisplayedUserDefaults[i];r.nr=i;r.editorMetadata=r.editorMetadata||{};r.valueObject=r.valueObject||{value:""};var b=new sap.ui.comp.smartform.GroupElement({});if(l!=r.editorMetadata.groupId){var c=r.editorMetadata.groupTitle||undefined;g=new sap.ui.comp.smartform.Group({label:c,"editable":true});l=r.editorMetadata.groupId;t.sForm.addGroup(g);}g.addGroupElement(b);r.modelBind={model:undefined,sModelPath:undefined,sPropertyName:undefined,sFullPropertyPath:undefined};r.valueObject.value=r.valueObject.value||"";if(r.editorMetadata.editorInfo&&r.editorMetadata.editorInfo.propertyName){r.modelBind.isOdata=true;var u=r.editorMetadata.editorInfo.odataURL;r.modelBind.model=t.getOrCreateModelForODataService(u);b.setModel(r.modelBind.model);if(!t.oBindingContexts[u]){b.bindElement(r.editorMetadata.editorInfo.bindingPath);t.oBindingContexts[u]=r.modelBind.model.getContext(r.editorMetadata.editorInfo.bindingPath);}else{b.setBindingContext(t.oBindingContexts[u]);}r.modelBind.sPropertyName="{"+r.editorMetadata.editorInfo.propertyName+"}";r.modelBind.sFullPropertyPath=r.editorMetadata.editorInfo.bindingPath+"/"+r.editorMetadata.editorInfo.propertyName;r.modelBind.extendedModel=t.oMdlParameter;}else{t.createPlainModel(b,r);}r.valueObject.value=r.valueObject.value||"";r.modelBind.model.setProperty(r.modelBind.sFullPropertyPath,r.valueObject.value);if(r.modelBind.isOdata){t.oBlockedParameters[r.parameterName]=true;r.modelBind.model.attachMetadataLoaded(t.createAppropriateControl.bind(t,b,r));r.modelBind.model.attachMetadataFailed(t.revertToPlainModelControls.bind(t,b,r));}else{t.createAppropriateControl(b,r);}r.modelBind.model.bindTree(r.modelBind.sFullPropertyPath).attachChange(t.storeChangedData.bind(t));}t.oMdlParameter.bindTree("/").attachChange(t.storeChangedData.bind(t));d.resolve(t.getView());});return d.promise();},createAppropriateControl:function(g,r){var s,l,e,b;if(r.editorMetadata.extendedUsage){var t=this;e=new sap.m.Button({text:sap.ushell.resources.i18n.getText("userDefaultsExtendedParametersTitle"),tooltip:sap.ushell.resources.i18n.getText("userDefaultsExtendedParametersTooltip"),type:{parts:['MdlParameter>/'+r.parameterName+'/valueObject/extendedValue/Ranges'],formatter:function(R){return R&&R.length?sap.m.ButtonType.Emphasized:sap.m.ButtonType.Transparent;}},press:function(o){t.openExtendedValueDialog(o,r);}}).addStyleClass('sapUshellExtendedDefaultParamsButton');}jQuery.sap.log.debug("Creating controls for parameter"+r.parameterName+" type "+r.modelBind.isOdata);var E=g.getElements().slice();E.forEach(function(o){g.removeElement(o);});var f=g.getFields().slice();f.forEach(function(o){g.removeField(o);});l=new sap.ui.comp.smartfield.SmartLabel({width:sap.ui.Device.system.phone?"auto":"12rem",textAlign:sap.ui.Device.system.phone?'Left':'Right'});if(r.modelBind.isOdata&&r.editorMetadata.editorInfo){s=new a({value:r.modelBind.sPropertyName,name:r.parameterName});s.attachInnerControlsCreated({},this.applyFocus,this);l.setLabelFor(s);}else{s=new sap.m.Input({name:r.parameterName,value:r.modelBind.sPropertyName,type:"Text"});this.setPropValue(r);l.setText((r.editorMetadata.displayText||r.parameterName)+":");l.setTooltip(r.editorMetadata.description||r.parameterName);}s.attachChange(this.storeChangedData.bind(this));s.addStyleClass("sapUshellDefaultValuesSmartField");s.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));var i=new sap.m.FlexBox({width:sap.ui.Device.system.phone?'100%':'auto',direction:(sap.ui.Device.system.phone&&!e)?'Column':'Row',items:[s,e]});l.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));b=new sap.m.FlexBox({alignItems:sap.ui.Device.system.phone?'Start':'Center',direction:sap.ui.Device.system.phone?'Column':'Row',items:[l,i]});g.addElement(b);},openExtendedValueDialog:function(e,d){var t=this,p='/'+d.parameterName+'/valueObject/extendedValue/Ranges',m=d.modelBind.extendedModel,r=m.getProperty(p)||[],l,n;if(d.modelBind.isOdata){n=this._getMetadataNameSpace(d.editorMetadata.editorInfo.odataURL);var E=d.modelBind.model.getMetaModel().getODataEntityType(n+"."+d.editorMetadata.editorInfo.entityName);if(E){l=d.modelBind.model.getMetaModel().getODataProperty(E,d.editorMetadata.editorInfo.propertyName)["sap:label"];}}var v=new V({basicSearchText:d.editorMetadata.displayText||l||d.parameterName,title:d.editorMetadata.displayText||l||d.parameterName,supportRanges:true,supportRangesOnly:true,key:d.modelBind.sPropertyName,displayFormat:"UpperCase",descriptionKey:d.editorMetadata.displayText||l||d.parameterName,filterMode:true,stretch:sap.ui.Device.system.phone,ok:function(c){t.saveExtendedValue(c,d,m,v);},cancel:function(c){v.close();},afterClose:function(){v.destroy();}});v.setIncludeRangeOperations(this.getListOfSupportedRangeOperations());this.addTokensToValueHelpDialog(v,r,d.parameterName);var k=[];k.push({label:v.getTitle(),key:d.parameterName});v.setRangeKeyFields(k);v.open();},saveExtendedValue:function(c,d,m,v){this.aTokens=c.getParameters().tokens;var t=[],p='/'+d.parameterName+'/valueObject/extendedValue/Ranges',f,b={extendedValue:{"Ranges":[]}};jQuery.extend(this.oCurrentParameters[d.parameterName].valueObject,b);for(var e in this.aTokens){if(this.aTokens.hasOwnProperty(e)){t.push(this.aTokens[e].data("range"));}}f=t.map(function(e){return{Sign:e.exclude?'E':'I',Option:e.operation!=="Contains"?e.operation:"CP",Low:e.value1,High:e.value2||null};});if(!m.getProperty('/'+d.parameterName+'/valueObject/extendedValue')){m.setProperty('/'+d.parameterName+'/valueObject/extendedValue',{});}m.setProperty(p,f);this.oChangedParameters[d.parameterName]=true;v.close();},getListOfSupportedRangeOperations:function(){var s=Object.keys(sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation);return s.filter(function(o){return o!=="StartsWith"&&o!=='EndsWith'&&o!=='Initial';});},_getMetadataNameSpace:function(s){var b=s.split("/"),n;n=b[b.length-1];return n;},addTokensToValueHelpDialog:function(d,r,p){var t=[],f;r.forEach(function(R){if(R){f={};f.exclude=R.Sign==='E';f.keyField=p;f.operation=R.Option!=="CP"?R.Option:"Contains";f.value1=R.Low;f.value2=R.High;t.push(new sap.m.Token({}).data("range",f));}});d.setTokens(t);},sortParametersByGroupIdParameterIndex:function(u){function c(d,D){if(!(D.editorMetadata&&D.editorMetadata.groupId)){return-1;}if(!(d.editorMetadata&&d.editorMetadata.groupId)){return 1;}if(d.editorMetadata.groupId<D.editorMetadata.groupId){return-1;}if(d.editorMetadata.groupId>D.editorMetadata.groupId){return 1;}return 0;}function b(d,D){if(!(D.editorMetadata&&D.editorMetadata.parameterIndex)){return-1;}if(!(d.editorMetadata&&d.editorMetadata.parameterIndex)){return 1;}return d.editorMetadata.parameterIndex-D.editorMetadata.parameterIndex;}u.sort(function(d,D){var r=c(d,D);if(r===0){return b(d,D);}return r;});},storeChangedData:function(){var i=0,t=this,b=t.aDisplayedUserDefaults;for(i=0;i<b.length;++i){var p=b[i].parameterName;if(!t.oBlockedParameters[p]){var o={value:t.oCurrentParameters[p].valueObject&&t.oCurrentParameters[p].valueObject.value,extendedValue:t.oCurrentParameters[p].valueObject&&t.oCurrentParameters[p].valueObject.extendedValue&&t.oCurrentParameters[p].valueObject.extendedValue};if(b[i].modelBind&&b[i].modelBind.model){var m=b[i].modelBind.model;var M=b[i].modelBind.extendedModel;var P=b[i].modelBind.sFullPropertyPath;var A=m.getProperty(P);var n={value:m.getProperty(P),extendedValue:M.getProperty('/'+p+'/valueObject/extendedValue')};if(this.isValueDifferent(n,o)){t.oCurrentParameters[p].valueObject.value=A;if(n.extendedValue){jQuery.extend(t.oCurrentParameters[p].valueObject.extendedValue,n.extendedValue);}t.oChangedParameters[p]=true;}}}}},onCancel:function(){if(sap.ui.getCore().byId("saveButton")){sap.ui.getCore().byId("saveButton").setEnabled(true);}var c=Object.keys(this.oChangedParameters),d=this.aDisplayedUserDefaults,p,b,o;if(c.length>0){for(var i=0;i<d.length&&c.length>0;i++){p=d[i].parameterName;if(c.indexOf(p)>-1){o=this.oOriginalParameters[p];b=d[i].modelBind;b.model.setProperty(b.sFullPropertyPath,o.valueObject.value||"");if(o.editorMetadata&&o.editorMetadata.extendedUsage){b.extendedModel.setProperty("/"+p+"/valueObject/extendedValue",o.valueObject.extendedValue||{});}}}this.oCurrentParameters=jQuery.extend(true,{},this.oOriginalParameters);this.oChangedParameters={};}},isValueDifferent:function(v,o){var i=false,s=v?JSON.stringify(v):v,b=o?JSON.stringify(o):o,e,E;if(s===b){return false;}if(v===undefined){return false;}if(o===undefined){return false;}e=v.extendedValue?JSON.stringify(v.extendedValue):v.extendedValue;E=o.extendedValue?JSON.stringify(o.extendedValue):o.extendedValue;if((v.value===""&&o.value===undefined)||(o.value===""&&v.value===undefined)){i=true;}if(i&&(e===E)){return false;}return(!i&&(v.value!==o.value))||(e!==E);},onSave:function(){var t=this,d=new jQuery.Deferred(),i,c=Object.keys(this.oChangedParameters).sort(),s,p;for(i=0;i<c.length;i++){p=c[i];if(this.isValueDifferent(this.oOriginalParameters[p].valueObject,this.oCurrentParameters[p].valueObject)){if((this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.value===null)||(this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.value==="")){this.oCurrentParameters[p].valueObject.value=undefined;}if(this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.extendedValue&&jQuery.isArray(this.oCurrentParameters[p].valueObject.extendedValue.Ranges)&&(this.oCurrentParameters[p].valueObject.extendedValue.Ranges.length===0)){this.oCurrentParameters[p].valueObject.extendedValue=undefined;}s=sap.ushell.Container.getService("UserDefaultParameters").editorSetValue(p,this.oCurrentParameters[p].valueObject);s.done(function(P){t.oChangedParameters={};t.oOriginalParameters[P].valueObject.value=t.oCurrentParameters[P].valueObject.value;d.resolve();});s.fail(d.reject);}}return d.promise();}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/FlpSettings.controller',["sap/ui/core/mvc/Controller"],function(C){"use strict";return C.extend("sap.ushell.components.shell.MeArea.FlpSettings",{DISPLAY_MODES:{'scroll':0,'tabs':1,getName:function(v){return Object.keys(this)[v];}},onInit:function(){this.oConfModel=new sap.ui.model.json.JSONModel({});this.oConfModel.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),flexAlignItems:sap.ui.Device.system.phone?'Stretch':'Start',textAlign:sap.ui.Device.system.phone?'Begin':'End',textDirection:sap.ui.Device.system.phone?'Column':'Row',labelWidth:sap.ui.Device.system.phone?"auto":"12rem"});this.getView().setModel(this.oConfModel,"config");var r=new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties")});this.getView().setModel(r,"i18n");var i=this.getView().getViewData().initialDisplayMode;this.iCurrentMode=this.DISPLAY_MODES[i]||this.DISPLAY_MODES.scroll;},onBeforeRendering:function(){this.oConfModel.setProperty("/displayMode",this.iCurrentMode);},onSave:function(){this.iCurrentMode=this.oConfModel.getProperty("/displayMode");return this.DISPLAY_MODES.getName(this.iCurrentMode);}});});
sap.ui.predefine('sap/ushell/components/shell/MeArea/LanguageRegionSelector.controller',function(){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.LanguageRegionSelector",{onInit:function(){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){jQuery.sap.log.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.bIsSetLanguage=sap.ushell.Container.getRenderer('fiori2').getModelConfiguration().enableSetLanguage;this.isLanguageChanged=false;this.isLanguagePersonalized=this.oUser.isLanguagePersonalized();this.sLanguage=this._getFormatedLanguage(this.oUser.getLanguage());this.aLanguageList=null;var m=new sap.ui.model.json.JSONModel();var a={languageList:[{text:this.sLanguage,key:this.sLanguage}],selectedLanguage:this.sLanguage};var l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var L=sap.ui.core.LocaleData.getInstance(l);var d=L.getDatePattern("medium"),t=L.getTimePattern("medium"),T=(t.indexOf("H")===-1)?"12h":"24h";a.datePatternList=[{text:d,key:d}];a.timeFormat=T;a.selectedDatePattern=d;var h=this.oView.hourFormatSegmentedButton.getButtons();var s=(T==="12h")?h[0]:h[1];this.oView.hourFormatSegmentedButton.setSelectedButton(s);m.setData(a);this.oView.setModel(m);},getContent:function(){var d=jQuery.Deferred();var t=this;if(this.bIsSetLanguage){jQuery.sap.measure.start("FLP:LanguageRegionSelector.getContent","getContent","FLP");var a=this._getLanguagesList();a.done(function(l){if(l){if(l.length>1){if(!t.isLanguagePersonalized){t.getView().getModel().setProperty("/selectedLanguage","default");}else{t.getView().getModel().setProperty("/selectedLanguage",t.oUser.getLanguage());}t.getView().getModel().setSizeLimit(l.length);t.getView().getModel().setProperty("/languageList",l);t.oView.inputLanguage.setVisible(false);t.oView.selectLanguage.setVisible(true);t.oView.helpingText.setVisible(true);t.oView.helpingTextLabel.setVisible(true);}}jQuery.sap.measure.end("FLP:LanguageRegionSelector.getContent");d.resolve(t.getView());});a.fail(function(e){jQuery.sap.log.error(e);d.resolve(t.getView());});}else{d.resolve(t.getView());}return d.promise();},getValue:function(){var d=jQuery.Deferred();var s=this.getView().getModel().getProperty("/selectedLanguage");var u=this.oUser.getLanguage();if(s=="default"){d.resolve(this._getFormatedLanguage(u)+" | "+sap.ushell.resources.i18n.getText("timeFormatFld")+": "+this.getView().getModel().getProperty("/timeFormat"));}else{d.resolve(this._getFormatedLanguage(s)+" | "+sap.ushell.resources.i18n.getText("timeFormatFld")+": "+this.getView().getModel().getProperty("/timeFormat"));}return d.promise();},onCancel:function(){var d=jQuery.Deferred();if(this.bIsSetLanguage){this.isLanguageChanged=false;var s=this.getView().getModel().getProperty("/selectedLanguage");if(!this.isLanguagePersonalized||this.oUser.getLanguage()!=s){this._handleSelectChange(this.oUser.getLanguage(),"Cancel");d.resolve();}else{d.resolve();}}else{d.resolve();}return d.promise();},onSave:function(){var d=jQuery.Deferred();var o;var s=this.getView().getModel().getProperty("/selectedLanguage");if(this.isLanguageChanged){if(s){o=this.oUser.getLanguage();this.oUser.setLanguage(s);this.userInfoService.updateUserPreferences(this.oUser).done(function(){d.resolve();window.location.reload();}.bind(this)).fail(function(e){this.oUser.setLanguage(o);this._handleSelectChange(o,"Cancel");jQuery.sap.log.error(e);d.reject(e);}.bind(this));}}else{d.resolve();}return d.promise();},_getFormatedLanguage:function(l){if(l&&l.indexOf('-')>-1){l=l.replace('-',' (').concat(')').toUpperCase();}else if(l){l=l.toUpperCase();}return l;},_handleSelectChange:function(l,m){var L=new sap.ui.core.Locale(l);var o=sap.ui.core.LocaleData.getInstance(L);var d=o.getDatePattern("medium"),t=o.getTimePattern("medium"),T=(t.indexOf("H")===-1)?"12h":"24h";this.isLanguageChanged=true;if(m=="Cancel"){if(!this.isLanguagePersonalized){this.getView().selectLanguage.setSelectedKey("default");}else{this.getView().selectLanguage.setSelectedKey(l);}this.isLanguageChanged=false;}this.getView().comboDate.setValue(d);var h=this.getView().hourFormatSegmentedButton.getButtons();var s=(T==="12h")?h[0]:h[1];this.getView().hourFormatSegmentedButton.setSelectedButton(s);},_getLanguagesList:function(){var r=jQuery.Deferred();if(this.aLanguageList==null){jQuery.sap.measure.start("FLP:LanguageRegionSelector._getLanguagesList","_getLanguagesList","FLP");var g=this.userInfoService.getLanguageList();g.done(function(d){jQuery.sap.measure.end("FLP:LanguageRegionSelector._getLanguagesList");r.resolve(d);});g.fail(function(){r.reject("Failed to load language list.");});}else{r.resolve(this.aLanguageList);}return r.promise();}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/LanguageRegionSelector.view',function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.LanguageRegionSelector",{createContent:function(c){var i=new sap.ui.core.Item({text:"{text}",key:"{key}"});var a=sap.ushell.resources.i18n;var l="languageSelectionSelect";var d="dateFormatCombo";var f=sap.ui.Device.system.phone?'Column':'Row';var F=sap.ui.Device.system.phone?'Stretch':'Center';var t=sap.ui.Device.system.phone?'Left':'Right';var L=sap.ui.Device.system.phone?"auto":"12rem";var s=sap.ui.Device.system.phone?"auto":"16rem";var C=sap.ui.Device.system.phone?"100%":undefined;var b=new sap.m.Label('languageSelectionLabel',{text:{path:"/selectedLanguage",formatter:function(S){S=c._getFormatedLanguage(S);return a.getText(S.indexOf('(')>-1?"languageAndRegionTit":"languageRegionFld")+':';}},width:L,textAlign:t,labelFor:l});this.selectLanguage=new sap.m.Select('languageSelectionSelect',{visible:false,width:s,items:{path:"/languageList",template:i},selectedKey:"{/selectedLanguage}",change:function(e){var S=e.getParameters().selectedItem.getKey();c._handleSelectChange(S);}}).addAriaLabelledBy(b);this.inputLanguage=new sap.m.Input('languageSelectionInput',{visible:true,value:"{/selectedLanguage}",editable:false}).addAriaLabelledBy(b);var g=new sap.m.FlexBox({alignItems:F,direction:f,items:[b,this.selectLanguage,this.inputLanguage]});this.helpingTextLabel=new sap.m.Label({visible:false,text:"",width:L,textAlign:t});this.helpingText=new sap.m.Text({visible:false,text:a.getText("LanguageAndRegionHelpingText"),width:s,textAlign:"Begin"}).addStyleClass("sapUshellFlpSettingsLanguageRegionDescription");var h=new sap.m.FlexBox({alignItems:F,direction:f,items:[this.helpingTextLabel,this.helpingText]});var j=new sap.m.Label({text:a.getText("dateFormatFld")+":",width:L,textAlign:t,labelFor:d});this.comboDate=new sap.m.ComboBox('dateFormatCombo',{width:C,items:{path:"/datePatternList",template:i},selectedKey:"{/selectedDatePattern}",editable:false}).addAriaLabelledBy(j);var k=new sap.m.FlexBox({alignItems:F,direction:f,items:[j,this.comboDate]});this.hourFormatSegmentedButton=new sap.m.SegmentedButton('hoursSegmentedButton',{enabled:false,width:"10rem",buttons:[new sap.m.Button({text:a.getText("btn12h")}),new sap.m.Button({text:a.getText("btn24h")})]});var m=new sap.m.FlexBox({alignItems:F,direction:f,items:[new sap.m.Label({text:a.getText("timeFormatFld")+":",width:L,textAlign:t}),this.hourFormatSegmentedButton]});m.addStyleClass("sapUshellFlpSettingsLanguageRegionHourFormatFBox");var v=new sap.m.VBox({items:[g,h,k,m]});v.addStyleClass("sapUiSmallMargin");return v;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.LanguageRegionSelector";}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/MeArea.controller',["sap/ushell/resources","sap/m/Button","sap/m/library","sap/ushell/EventHub","sap/ushell/ui/utils"],function(r,B,M,E,u){"use strict";var a=M.ButtonType;var m=new sap.ui.model.json.JSONModel({actions:[],userPreferences:{entries:[]},apps:{recentActivities:[],frequentActivities:[]}});sap.ui.controller("sap.ushell.components.shell.MeArea.MeArea",{onInit:function(){var c=(this.getView().getViewData()?this.getView().getViewData().config:{})||{};this.aControlsWithPressHandler=[];this.getView().setModel(m,"meAreaModel");this._addActionItemToOverflowSupport();this.oResourceBundle=r.i18n;if(c.enableRecentActivity&&sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty("/enableTrackingActivity")){this.oUserRecentsSrvc=sap.ushell.Container.getService('UserRecents');}this.lastVisited=null;},onBeforeRendering:function(){if(this.oUserRecentsSrvc){if(!m.getProperty('/apps/recentActivities')||!m.getProperty('/apps/recentActivities').length){this.refreshRecentActivities();}}if(!m.getProperty('/apps/frequentActivities')||!m.getProperty('/apps/frequentActivities').length){this.refreshFrequentActivities();}},refreshRecentActivities:function(){if(this.oUserRecentsSrvc){this.oUserRecentsSrvc.getRecentActivity().done(function(A){A.forEach(function(i){i.timestamp=sap.ushell.utils.formatDate(i.timestamp);});m.setProperty('/apps/recentActivities',A);});}},refreshFrequentActivities:function(){if(this.oUserRecentsSrvc){this.oUserRecentsSrvc.getFrequentActivity().done(function(A){m.setProperty('/apps/frequentActivities',A);});}},createViewByName:function(e,n,v){var V=v?sap.ui.getCore().byId(v):null;if(!V){var s=e.getSource(),c=s.getBindingContext(),p=c?c.getPath():"",b=n||c.getModel().getProperty(p+"/viewName");v=v||c.getModel().getProperty(p+"/id");V=sap.ui.view(v,{viewName:b,type:'JS',viewData:{}});}return V;},getSettingsDialogContent:function(){var s=sap.ui.getCore().byId("userSettings");if(!s){s=sap.ui.view("userSettings",{viewName:"sap.ushell.components.shell.MeArea.UserSettings",type:'JS',viewData:this.getView().getViewData(),async:true});}s.setModel(this.getView().getModel());return s;},logout:function(){sap.ui.require(['sap/m/MessageBox'],function(b){var l=new sap.ushell.ui.launchpad.LoadingDialog({text:""}),s=true,i=false,L={};sap.ushell.Container.getGlobalDirty().done(function(d){s=false;if(i===true){l.exit();l=new sap.ushell.ui.launchpad.LoadingDialog({text:""});}var _=function(d){var L={},R=r.i18n;if(d===sap.ushell.Container.DirtyState.DIRTY){L.message=R.getText('unsaved_data_warning_popup_message');L.icon=b.Icon.WARNING;L.messageTitle=R.getText("unsaved_data_warning_popup_title");}else{L.message=R.getText('signoutConfirmationMsg');L.icon=b.Icon.QUESTION;L.messageTitle=R.getText("signoutMsgTitle");}return L;};L=_(d);b.show(L.message,L.icon,L.messageTitle,[b.Action.OK,b.Action.CANCEL],function(A){if(A===b.Action.OK){l.openLoadingScreen();l.showAppInfo(r.i18n.getText('beforeLogoutMsg'),null);sap.ushell.Container.logout();}},sap.ui.core.ElementMetadata.uid("confirm"));});if(s===true){l.openLoadingScreen();i=true;}});},_addPressHandlerToActions:function(c){var t=this;if(this.aControlsWithPressHandler.indexOf(c.getId())===-1){this.aControlsWithPressHandler.push(c.getId());c.attachPress(function(e){sap.ui.getCore().byId("viewPortContainer").switchState("Center");if(c.getId()==="userSettingsBtn"){var h=e.mParameters?e.mParameters.hotkeys:undefined;t.hotkeysParam=h;var T=t;if(!T.getView().oSettingsDialog.getModel()){T.getView().oSettingsDialog.setModel(T.getView().getModel());}var o=function(){T.getView().oSettingsDialog.open();sap.ui.getCore().byId("viewPortContainer").detachAfterSwitchStateAnimationFinished(o);};if(T.hotkeysParam){T.getView().oSettingsDialog.open();}else{var C=T.oView.getModel().getProperty('/currentState/stateName');if(C==='embedded'||C==='embedded-home'||C==='standalone'||C==='blank-home'||C==='blank'){T.getView().oSettingsDialog.open();}else{sap.ui.getCore().byId("viewPortContainer").attachAfterSwitchStateAnimationFinished(o);}}}});}},_getControlsWithPressHandler:function(){return this.aControlsWithPressHandler;},_addActionItemToOverflowSupport:function(){if(sap.m._overflowToolbarHelpers&&sap.m._overflowToolbarHelpers.OverflowToolbarAssociativePopoverControls._mSupportedControls){var s=sap.m._overflowToolbarHelpers.OverflowToolbarAssociativePopoverControls._mSupportedControls;var p=sap.m._overflowToolbarHelpers.OverflowToolbarAssociativePopoverControls.prototype;var c=["sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.EndUserFeedback","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.m.Button"];var C=function(n){return n.substring(0,1).toUpperCase()+n.substring(1);};var S={canOverflow:true,listenForEvents:["press"],noInvalidationProps:["enabled","type"]};var P=function(o){if(!o.mCustomStyleClassMap.sapUshellActionItem){return;}if(o.setActionType){o.setActionType('standard');}var t=o.getType();if(t!==a.Accept&&t!==a.Reject){o.setType(a.Transparent);}if(o.getIcon()){o.addStyleClass("sapMOTAPButtonWithIcon");}else{o.addStyleClass("sapMOTAPButtonNoIcon");}};var f=function(o){if(o.setActionType){o.setActionType('action');}};c.forEach(function(n){s[n]=S;var b=n.split(".").map(C).join("");var d='_preProcess';var e='_postProcess';p[d+b]=P;p[e+b]=f;});}},setLastVisited:function(U){this.lastVisited=U;},updateScrollBar:function(h){if(this.lastVisited&&this.lastVisited!="#"+h){jQuery('.sapUshellViewPortLeft').scrollTop(0);sap.ui.getCore().byId('meAreaIconTabBar').setSelectedKey("sapUshellIconTabBarrecentActivities");var l=sap.ui.getCore().byId('sapUshellActivityListrecentActivities'),L=l.getItems();if(L&&L.length>0){sap.ui.getCore().byId('sapUshellActivityListrecentActivities').setSelectedItem(L[0],true);}this.lastVisited=null;}},_saveButtonHandler:function(){var t=this,s=this._saveUserPrefEntries();var i=this.getView().getModel().getProperty("/userPreferences/isDetailedEntryMode");if(i){this.getView().getModel().setProperty("/userPreferences/activeEntryPath",null);}s.done(function(){t._showSaveMessageToast();});s.fail(function(f){sap.ui.require(["sap/m/MessageBox"],function(b){var e;var c="";if(f.length===1){e=t.oResourceBundle.getText("savingEntryError")+" ";}else{e=t.oResourceBundle.getText("savingEntriesError")+"\n";}f.forEach(function(d){e+=d.entry+"\n";c+="Entry: "+d.entry+" - Error message: "+d.message+"\n";});b.show(e,{icon:b.Icon.ERROR,title:t.translationBundle.getText("Error"),actions:[b.Action.OK]});jQuery.sap.log.error("Failed to save the following entries",c,"sap.ushell.ui.footerbar.UserPreferencesButton");});});},_saveUserPrefEntries:function(){var e=this.getView().getModel().getProperty("/userPreferences/entries");return u.saveUserPreferenceEntries(e);},_showSaveMessageToast:function(){sap.ui.require(["sap/m/MessageToast"],function(b){var c=r.i18n.getText("savedChanges");b.show(c,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});},createSaveButton:function(){var t=this;return new B({id:"userSettingSaveButton",text:r.i18n.getText("saveBtn"),press:function(){t._saveButtonHandler();t._handleSettingsDialogClose.apply(t);},visible:true});},_dialogCancelButtonHandler:function(){var e=this.getView().getModel().getProperty("/userPreferences/entries");for(var i=0;i<e.length;i++){if(e[i]&&e[i].onCancel){e[i].onCancel();}}},_handleSettingsDialogClose:function(){var v=this.getView(),s=this.getSettingsDialogContent();s.oMainApp.toMaster('userSettingMaster');s.oController.oMasterEntryList.removeSelections(true);v.oSettingsDialog.close();window.document.getElementById("meAreaHeaderButton").focus();},createCancelButton:function(){var t=this;return new B({id:"userSettingCancelButton",text:r.i18n.getText("cancelBtn"),press:function(){t._dialogCancelButtonHandler();t._handleSettingsDialogClose.apply(t);},visible:true});},onExit:function(){this.getView().aDanglingControls.forEach(function(c){if(c.destroyContent){c.destroyContent();}c.destroy();});}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/MeArea.view',["sap/ushell/services/AppType","sap/m/Button","sap/m/List","sap/m/Text","sap/m/VBox","sap/m/HBox","sap/m/Image","sap/m/Dialog","sap/m/Popover","sap/m/OverflowToolbar","sap/m/ScrollContainer","sap/ushell/Config","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/resources","sap/ushell/ui/launchpad/UserStatusItem","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/library","sap/ui/Device","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ui/core/service/ServiceFactoryRegistry","sap/ushell/utils/WindowUtils"],function(A,B,L,T,V,H,I,D,P,O,S,C,a,r,U,b,m,c,d,e,f,W){"use strict";var g=m.BackgroundDesign,h=m.ButtonType,j=m.ListSeparators,k=m.ListType,l=m.PlacementType,n=m.ToolbarDesign;sap.ui.jsview("sap.ushell.components.shell.MeArea.MeArea",{createContent:function(o){this.addStyleClass('sapUshellMeAreaView');this.aDanglingControls=[];var u=sap.ushell.Container.getUser().getFullName(),p,t=r.i18n,q=(this.getViewData()?this.getViewData().config:{})||{},s=q.appState,w=(s==='embedded'||s==='embedded-home'||s==='standalone'||s==='blank-home'||s==='blank'),x,y=f.get("sap.ushell.ui5service.UserStatus");if(y){var z=y.createInstance(),E=function(i){z.then(function(y){y.setStatus(i);p.close();});};}x=[new U({status:U.prototype.STATUS_ENUM.AVAILABLE,id:"userStatusItem1",isOpener:false,press:function(i){E(sap.ushell.ui5service.UserStatus.prototype.AvailableStatus.AVAILABLE);}.bind(this)}).addStyleClass('sapUserStatusContainer'),new U({status:U.prototype.STATUS_ENUM.AWAY,id:"userStatusItem2",isOpener:false,press:function(i){E(sap.ushell.ui5service.UserStatus.prototype.AvailableStatus.AWAY);}.bind(this)}).addStyleClass('sapUserStatusContainer'),new U({status:U.prototype.STATUS_ENUM.BUSY,id:"userStatusItem3",isOpener:false,press:function(i){E(sap.ushell.ui5service.UserStatus.prototype.AvailableStatus.BUSY);}.bind(this)}).addStyleClass('sapUserStatusContainer'),new U({status:U.prototype.STATUS_ENUM.APPEAR_OFFLINE,id:"userStatusItem4",isOpener:false,press:function(i){E(sap.ushell.ui5service.UserStatus.prototype.AvailableStatus.APPEAR_OFFLINE);}.bind(this)}).addStyleClass('sapUserStatusContainer')];if(!q.disableSignOut){x.push(new U({status:U.prototype.STATUS_ENUM.SIGNOUT,id:"userStatusLogout",isOpener:false,press:[o.logout,o]}).addStyleClass('sapUserStatusSignOutContainer'));}var F=new L({id:"sapUshellUserStatusItemList",showSeparators:"None",items:x});F.addCustomData(new b({key:"aria-labelledBy",value:"userStatusItem1",writeToDom:true}));p=new P("statuses",{placement:l.Bottom,showArrow:false,showHeader:false,content:F}).addStyleClass('sapUserStatusPopOver');p.addStyleClass("sapContrastPlus");p.setOffsetX(-3);x=[new T({text:u}).addStyleClass('sapUshellMeAreaUserName')];var G=new U({id:"userStatusOpener",visible:{parts:["/userStatusEnabled","/userStatusUserEnabled"],formatter:function(i,v){if(i&&v){return true;}return false;}.bind(this)},status:{path:"/userStatus",formatter:function(i){return U.prototype.STATUS_ENUM[i];}.bind(this)},tooltip:t.getText("userStatus_tooltip"),image:e.getIconURI("account"),press:function(i){var v=sap.ui.getCore().byId(i.mParameters.id);if(p.isOpen()){p.close();}else{p.openBy(v);}}.bind(this),contentList:p}).addStyleClass('sapUserStatusOpener');G.addCustomData(new b({key:"tabindex",value:"0",writeToDom:true}));G.addCustomData(new b({key:"aria-label",value:r.i18n.getText("OnlineStatus")+" "+t.getText("userStatus_tooltip"),writeToDom:true}));G.addCustomData(new b({key:"role",value:"listbox",writeToDom:true}));var J=new L({items:[G],backgroundDesign:g.Transparent});x.push(J);if(!q.disableSignOut){var K;if(!w){K=new B("logoutBtn",{visible:{parts:["/userStatusEnabled","/userStatusUserEnabled"],formatter:function(i,v){if(i&&v){return false;}return true;}.bind(this)},type:h.Transparent,icon:'sap-icon://log',text:r.i18n.getText("signoutBtn_title"),press:[o.logout,o]});x.push(K);}else{K=new sap.ushell.ui.launchpad.ActionItem("logoutBtn",{visible:true,type:h.Transparent,icon:'sap-icon://log',text:r.i18n.getText("signoutBtn_title"),press:[o.logout,o]});}}var M=new V({items:[x]}).addStyleClass("sapUshellUserArea");var N=sap.ushell.Container.getUser(),Q=N.getImage(),R;if(!Q){R=this.createPlaceHolderIcon();}else{R=this.createNewImage();}R.addStyleClass("sapUshellMeAreaUserImage");var X=new H({items:[R,M]});N.attachOnSetImage(this._updateUserImage.bind({origScope:this,oUserHBox:X,userBoxItem:R}));X.addStyleClass('sapUshellMeAreaUserInfo');X.addStyleClass('sapContrastPlus');var Y=o.createSaveButton(),Z=o.createCancelButton();this.oSettingsDialog=new D({id:"userSettingsDialog",showHeader:false,content:null,contentHeight:"42rem",contentWidth:"58rem",buttons:[Y,Z],afterClose:function(){sap.ushell.Container.getUser().resetChangedProperties();},stretch:c.system.phone}).addStyleClass("sapUshellUserSetting");this.oSettingsDialog.addContent(o.getSettingsDialogContent());this.oSettingsDialog.addEventDelegate({onkeydown:function(i){if(i.keyCode===27){if(o&&typeof o._dialogCancelButtonHandler==="function"){o._dialogCancelButtonHandler();}}}.bind(this)});this.aDanglingControls.push(Z,Y,this.oSettingsDialog);X.addEventDelegate({onsapskipback:function(i){i.preventDefault();a.setIsFocusHandledByAnotherHandler(true);a.sendFocusBackToShell(i);},onsaptabprevious:function(i){i.preventDefault();a.setIsFocusHandledByAnotherHandler(true);a.sendFocusBackToShell(i);}});var $=new O({id:"overflowActions",design:n.Transparent,content:{path:"/currentState/actions",factory:function(i,v){var e1=sap.ui.getCore().byId(v.getObject());if(e1){var f1=e1.isA("sap.ushell.ui.shell.ShellHeadItem");if(f1){return undefined;}if(e1.setActionType){e1.setActionType("action");e1.addStyleClass('sapContrastPlus');}o._addPressHandlerToActions(e1);}return e1;}}});$._getOverflowButtonSize=function(){return 82.4;};$.addCustomData(new b({key:"aria-label",value:r.i18n.getText("overflowActions_AriaLabel"),writeToDom:true}));if($._getOverflowButton){var _=$._getOverflowButton();if(_){var a1=_.onAfterRendering;_.onAfterRendering=function(){if(a1){a1.apply(this,arguments);}this.addStyleClass('sapUshellActionItem').addStyleClass('sapContrastPlus');this.setText(r.i18n.getText('meAreaMoreActions'));};}}$.updateAggregation=function(e1){var f1=this.mBindingInfos[e1],g1=this.getMetadata().getJSONKeys()[e1],h1;jQuery.each(this[g1._sGetter](),jQuery.proxy(function(i,v){this[g1._sRemoveMutator](v);},this));jQuery.each(f1.binding.getContexts(),jQuery.proxy(function(i,v){h1=f1.factory(this.getId()+"-"+i,v)?f1.factory(this.getId()+"-"+i,v).setBindingContext(v,f1.model):"";this[g1._sMutator](h1);},this));};var b1=new V("sapUshellMeAreaContent",{});this.actionBox=$;b1.addItem(X);b1.addItem($);if(q.enableRecentActivity){var c1=sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty('/currentState/showRecentActivity');if(c1===true){var d1=this.createIconTabBar(o);d1.done(function(i){b1.addItem(i);var v=sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty("/enableTrackingActivity");i.setVisible(v);});}}this.actionBox.addEventDelegate({onsaptabnext:function(i){var v=i.originalEvent,e1=v.srcElement,f1=jQuery('.sapUshellActionItem:last')[0].id,g1,h1;h1=sap.ui.getCore().byId('meAreaIconTabBar').getVisible();g1=f1===e1.id;if(g1===true&&!h1){i.preventDefault();a.setIsFocusHandledByAnotherHandler(true);a.sendFocusBackToShell(i);}},onsapskipforward:function(i){var v=sap.ui.getCore().byId('meAreaIconTabBar').getVisible();if(!v){i.preventDefault();a.setIsFocusHandledByAnotherHandler(true);a.sendFocusBackToShell(i);}}});return new S({vertical:true,horizontal:false,height:"100%",content:b1});},createIconTabBar:function(o){var R=new jQuery.Deferred(),t=this,i,p,q;sap.ui.require(['sap/m/IconTabBar','sap/m/CustomListItem','sap/m/IconTabFilter','sap/m/Text','sap/m/HBox'],function(s,u,v,T,H){i=new s('meAreaIconTabBar',{backgroundDesign:g.Transparent,expandable:false,items:[t.createIconTab("recentActivities",true,o,u,v,T,H),t.createIconTab("frequentActivities",false,o,u,v,T,H)]}).addStyleClass('sapUshellMeAreaTabBar');i.addEventDelegate({onsaptabnext:function(E){var w=E.originalEvent,x=w.srcElement,y=x.classList,z;z=jQuery.inArray('sapUshellMeAreaActivityItem',y)>-1;if(z===true){E.preventDefault();a.setIsFocusHandledByAnotherHandler(true);a.sendFocusBackToShell(E);}},onsapskipforward:function(E){E.preventDefault();a.setIsFocusHandledByAnotherHandler(true);a.sendFocusBackToShell(E);}});p=i.onAfterRendering;i.onAfterRendering=function(){if(p){p.apply(t,arguments);}q=sap.ui.getCore().byId('meAreaIconTabBar--header');if(q){q.addStyleClass('sapContrastPlus');q.addStyleClass('sapUshellTabBarHeader');}};R.resolve(i);});return R.promise();},createIconTab:function(i,s,o,p,q,T,H){var t,u,v,w,x,y,z,M,E,F;t=function(G,J){u=J.getProperty("icon");v=J.getProperty("title");w=A.getDisplayName(J.getProperty("appType"));var K=new T({text:v}).addStyleClass('sapUshellMeAreaActivityItemTitle'),N=u?new d({src:u}).addStyleClass('sapUshellMeAreaActivityItemIcon'):null,Q=new T({text:w}).addStyleClass('sapUshellMeAreaActivityItemDescription'),R=new T({text:s?J.getProperty("timestamp"):""}).addStyleClass('sapUshellMeAreaActivityItemInfo'),X=new H({items:N?[N,Q]:[Q],justifyContent:"SpaceBetween"}),Y=new H({items:s?[X,R]:[X],justifyContent:"SpaceBetween"}).addStyleClass('sapUshellMeAreaActivityItemContainer');x=new p({content:[K,Y],type:k.Active}).addStyleClass('sapUshellMeAreaActivityItem');x.addCustomData(new b({key:"aria-describedby",value:y.getId(),writeToDom:true}));return x;};y=new q({id:"sapUshellIconTabBar"+i,text:r.i18n.getText(i)});z=new L({id:"sapUshellActivityList"+i,showSeparators:j.All,items:{path:"meAreaModel>/apps/"+i,factory:t.bind(this)},noDataText:r.i18n.getText(i+'NoDataText'),itemPress:function(G){M=this.getModel('meAreaModel');F=sap.ui.getCore().byId("viewPortContainer");if(F){F.switchState("Center");}E=G.getParameter('listItem').getBindingContextPath();o.setLastVisited(M.getProperty(E).url);setTimeout(function(){if(M.getProperty(E).url[0]==='#'){hasher.setHash(M.getProperty(E).url);}else{var J=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(J){var R={title:M.getProperty(E).title,appType:A.APP,url:M.getProperty(E).url,appId:M.getProperty(E).url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(R);}W.openURL(M.getProperty(E).url,'_blank');}},200);}});y.addContent(z);return y;},onViewStateShow:function(){this.getController().refreshRecentActivities();this.getController().refreshFrequentActivities();if(this.actionBox){this.actionBox.updateAggregation("content");}this.getController().updateScrollBar(hasher.getHash());},createNewImage:function(){return new I({src:'{/userImage/personPlaceHolder}'});},createPlaceHolderIcon:function(){return new d({src:'{/userImage/personPlaceHolder}',size:'4rem'});},getControllerName:function(){return"sap.ushell.components.shell.MeArea.MeArea";},_updateUserImage:function(o){var u=(typeof o)==='string'?o:o.mParameters;this.oUserHBox.removeItem(this.userBoxItem);if((typeof u)==='string'){this.userBoxItem=this.origScope.createNewImage();}else{this.userBoxItem=this.origScope.createPlaceHolderIcon();}if(this.oUserHBox){this.oUserHBox.insertItem(this.userBoxItem,0);if(this.userBoxItem){this.userBoxItem.addStyleClass("sapUshellMeAreaUserImage");}}}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/ThemeSelector.controller',["sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component"],function(E,C,a){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.ThemeSelector",{TILE_SIZE:{Small:0,Responsive:1,getName:function(v){return Object.keys(this)[v];}},onInit:function(){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){jQuery.sap.log.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.currentThemeId=this.oUser.getTheme();this.origThemeId=this.currentThemeId;this.aThemeList=null;this.isContentLoaded=false;this.aSapThemeMap={base:"sapUshellBaseIconStyle",sap_bluecrystal:"sapUshellBlueCrystalIconStyle",sap_belize_hcb:"sapUshellHCBIconStyle",sap_belize_hcw:"sapUshellHCWIconStyle",sap_belize:"sapUshellBelizeIconStyle",sap_belize_plus:"sapUshellPlusIconStyle"};this.oPersonalizers={};},getConfigurationModel:function(){var c=new sap.ui.model.json.JSONModel({});var b=this.getView().getModel()?this.getView().getModel().getProperty("/animationMode"):undefined;this.originalAnimationModeKey=b?b:"full";this.currentAnimationModeKey=this.originalAnimationModeKey;c.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),sapUiContentIconColor:sap.ui.core.theming.Parameters.get('sapUiContentIconColor'),isContentDensitySwitchEnabled:this.isContentDensitySwitchEnabled(),flexAlignItems:'Center',textAlign:sap.ui.Device.system.phone?'Left':'Right',textDirection:'Row',labelWidth:'auto',isCozyContentMode:this.isCozyContentMode(),sizeBehaviorConfigurable:C.last("/core/home/sizeBehaviorConfigurable"),animationMode:this.currentAnimationModeKey});return c;},_getIsChangeThemePermitted:function(){return this.oUser.isSetThemePermitted();},onAfterRendering:function(){var t=this;var d=E.on("UserPreferencesDetailNavigated");d.do(function(i){if(i!=="detailuserPrefThemeSelector"){return;}d.off("UserPreferencesDetailNavigated");var l=sap.ui.getCore().byId("userPrefThemeSelector--themeList"),b=l.getItems(),I,T;l.toggleStyleClass("sapUshellThemeListDisabled",!t.isListActive());b.forEach(function(L){T=L.getCustomData()[0].getValue();I=L.getContent()[0].getItems()[0].getItems()[0];if(!t.isListActive()){L.isSelectable=function(){return false;};}if(T===t.currentThemeId){L.setSelected(true);if(!t.isListActive()){L.toggleStyleClass("sapUshellThemeListItemSelected",true);}}else{L.setSelected(false);}I.addStyleClass(t.aSapThemeMap[T]);I.toggleStyleClass("sapUshellHCBIconStyleOnHCB",T===t.currentThemeId&&T==="sap_belize_hcb");I.toggleStyleClass("sapUshellHCWIconStyleOnHCW",t.currentThemeId!=="sap_belize_hcb"&&T==="sap_belize_hcw");});var c=sap.ui.getCore().byId("userPrefThemeSelector--contentDensitySwitch");if(c){c.setState(t.currentContentDensity==="cozy");c.setEnabled(t.isContentDensitySwitchEnabled());}var e=sap.ui.getCore().byId("userPrefThemeSelector--tileSizeRaidoButtonGroup");if(e){var s=C.last("/core/home/sizeBehavior");e.setSelectedIndex(t.TILE_SIZE[s]);}jQuery('.sapUshellAppearanceTable > table').attr('role','list');});},getContent:function(){var t=this;var d=jQuery.Deferred();var r=sap.ushell.resources.getTranslationModel();this.getView().setModel(r,"i18n");this.getView().setModel(this.getConfigurationModel(),"config");if(this.isContentDensitySwitchEnabled()){this.origContentDensity=this.currentContentDensity;if(this.oUser.getContentDensity()){this.currentContentDensity=this.oUser.getContentDensity();}else{this.currentContentDensity="cozy";}}if(this.isContentLoaded===true){d.resolve(this.getView());}else{var b=this._getThemeList();b.done(function(T){if(T.length>0){T.sort(function(c,e){var f=c.name,g=e.name;if(f<g){return-1;}if(f>g){return 1;}return 0;});for(var i=0;i<T.length;i++){if(T[i].id==t.currentThemeId){T[i].isSelected=true;}else{T[i].isSelected=false;}}t.getView().getModel().setProperty("/options",T);d.resolve(t.getView());}else{d.reject();}});b.fail(function(){d.reject();});}return d.promise();},getValue:function(){var d=jQuery.Deferred();var t=this._getThemeList();var b=this;var c;t.done(function(T){b.aThemeList=T;c=b._getThemeNameById(b.currentThemeId);d.resolve(c);});t.fail(function(e){d.reject(e);});return d.promise();},onCancel:function(){this.currentThemeId=this.oUser.getTheme();if(this.isContentDensitySwitchEnabled()){this.currentContentDensity=this.oUser.getContentDensity();}this.currentAnimationModeKey=this.originalAnimationModeKey;var b=sap.ui.getCore().byId("userPrefThemeSelector--animationModeCombo");if(b){b.setSelectedKey(this.originalAnimationModeKey);}this.tileSizeChanged=false;},onSave:function(){var r=jQuery.Deferred(),w,p=[],t=0,s=0,f=0,F=[],b=this,c=function(){s++;r.notify();},d=function(){s++;r.notify();b.getView().getModel().setProperty("/animationMode",b.currentAnimationModeKey);b.originalAnimationModeKey=b.currentAnimationModeKey;},e=function(g){F.push({entry:"currEntryTitle",message:g});f++;r.notify();};var T=this.onSaveThemes();T.done(c);T.fail(e);p.push(T);if(this.currentAnimationModeKey!==this.originalAnimationModeKey){var A=this.writeToPersonalization("flp.launchpad.animation.mode","animationMode",this.currentAnimationModeKey);A.done(d);A.fail(e);p.push(A);}if(this.isContentDensitySwitchEnabled()){var o=this.onSaveContentDensity();o.done(c);o.fail(e);p.push(o);}if(this.tileSizeChanged&&this.currentTileSize){C.emit("/core/home/sizeBehavior",this.currentTileSize);if(this.currentTileSize==="Responsive"){jQuery(".sapUshellTile").removeClass("sapUshellSmall");jQuery(".sapUshellPlusTile").removeClass("sapUshellPlusTileSmall");}else{jQuery(".sapUshellTile").addClass("sapUshellSmall");jQuery(".sapUshellPlusTile").addClass("sapUshellPlusTileSmall");}this.tileSizeChanged=false;var S=this.writeToPersonalization("flp.settings.FlpSettings","sizeBehavior",this.currentTileSize);S.done(c);S.fail(e);p.push(S);}w=jQuery.when.apply(null,p);w.done(function(){r.resolve();});r.progress(function(){if(f>0&&(f+s===t)){r.reject("At least one save action failed");}});return r.promise();},onSaveThemes:function(){var d=jQuery.Deferred();var u;if(this.oUser.getTheme()!=this.currentThemeId&&this.isListActive()){if(this.currentThemeId){this.oUser.setTheme(this.currentThemeId);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.origThemeId=this.currentThemeId;this.oUser.resetChangedProperties();d.resolve();}.bind(this));u.fail(function(e){this.oUser.setTheme(this.origThemeId);this.oUser.resetChangedProperties();this.currentThemeId=this.origThemeId;jQuery.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject("Could not find theme: "+this.currentThemeId);}}else{d.resolve();}return d.promise();},_getThemeList:function(){var d=jQuery.Deferred(),t=this;if(!this.aThemeList){var g=this.userInfoService.getThemeList();g.done(function(D){t.aThemeList=D.options;if(t._getIsChangeThemePermitted()==false){t.aThemeList=[{id:t.currentThemeId,name:t._getThemeNameById(t.currentThemeId)}];}d.resolve(t.aThemeList);});g.fail(function(){d.reject("Failed to load theme list.");});}else{d.resolve(this.aThemeList);}return d.promise();},getCurrentThemeId:function(){return this.currentThemeId;},setCurrentThemeId:function(n){this.currentThemeId=n;},_getThemeNameById:function(t){if(this.aThemeList){for(var i=0;i<this.aThemeList.length;i++){if(this.aThemeList[i].id==t){return this.aThemeList[i].name;}}}return t;},onSaveContentDensity:function(){var d=jQuery.Deferred();var u;if(this.oUser.getContentDensity()!=this.currentContentDensity&&this.isContentDensitySwitchEnabled()){if(this.currentContentDensity){this.oUser.setContentDensity(this.currentContentDensity);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.oUser.resetChangedProperties();this.origContentDensity=this.currentContentDensity;sap.ui.getCore().getEventBus().publish("launchpad","toggleContentDensity",{contentDensity:this.currentContentDensity});E.emit("toggleContentDensity",{contentDensity:this.currentContentDensity});E.once("toggleContentDensity").do(function(){d.resolve();});}.bind(this));u.fail(function(e){this.oUser.setContentDensity(this.origContentDensity);this.oUser.resetChangedProperties();this.currentContentDensity=this.origContentDensity;jQuery.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject("Could not find mode: "+this.currentContentDensity);}}else{d.resolve();}return d.promise();},getCurrentContentDensity:function(){return this.currentContentDensity;},isCozyContentMode:function(){return jQuery("body.sapUiSizeCozy").length?true:false;},setCurrentContentDensity:function(e){var n=e.getSource().getState()?"cozy":"compact";this.currentContentDensity=n;},setCurrentAnimationMode:function(e){var n=e.getSource().getSelectedKey();this.currentAnimationModeKey=n;},setCurrentTileSize:function(e){var n=e.getSource().getSelectedIndex();this.currentTileSize=this.TILE_SIZE.getName(n);this.tileSizeChanged=true;},getIconFormatter:function(t){if(this.aSapThemeMap[t]){return"";}else{return"sap-icon://palette";}},onSelectHandler:function(e){var i=e.getParameters().listItem;this.setCurrentThemeId(i.getBindingContext().getProperty("id"));},isContentDensitySwitchEnabled:function(){return(sap.ui.Device.system.combi&&this.getView().getModel().getProperty("/contentDensity")&&this.oUser.isSetContentDensityPermitted())||false;},isListActive:function(){return this.getView().getModel().getProperty("/setTheme");},getUserStatusSetting:function(){var p=this._getUserSettingsPersonalizer();return p.getPersData();},writeToPersonalization:function(c,i,v){var p;try{p=this.getPersonalizer(c,i).setPersData(v);}catch(e){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(e.name+": "+e.message);p=jQuery.when(Promise.reject(e));}return p;},getPersonalizer:function(c,i){var k=c+"-"+i;if(this.oPersonalizers[k]){return this.oPersonalizers[k];}var p=sap.ushell.Container.getService("Personalization");var o=a.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};if(!this.oPersonalizers[k]){this.oPersonalizers[k]=p.getPersonalizer({container:c,item:i},s,o);}return this.oPersonalizers[k];}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/UsageAnalyticsSelector.controller',function(){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.UsageAnalyticsSelector",{onInit:function(){this.oUser=sap.ushell.Container.getUser();this.switchStateValue=this.oUser.getTrackUsageAnalytics();this.getView().oSwitchButton.setState(this.switchStateValue);},getContent:function(){var t=this,d=jQuery.Deferred();d.resolve(t.getView());return d.promise();},getValue:function(){var d=jQuery.Deferred(),i=sap.ushell.resources.i18n;d.resolve(this.switchStateValue?i.getText("trackingEnabled"):i.getText("trackingDisabled"));return d.promise();},onSave:function(){var c=this.getView().oSwitchButton.getState();this.switchStateValue=c;return sap.ushell.Container.getService("UsageAnalytics").setTrackUsageAnalytics(c);},onCancel:function(){this.getView().oSwitchButton.setState(this.switchStateValue);}});},true);
sap.ui.predefine('sap/ushell/components/shell/MeArea/UsageAnalyticsSelector.view',['sap/m/Label','sap/ushell/resources'],function(L,r){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.UsageAnalyticsSelector",{createContent:function(c){var f=sap.ui.Device.system.phone?'Start':'Center',F=sap.ui.Device.system.phone?'Wrap':'NoWrap',s=sap.ui.Device.system.phone?'Column':'Row',t=sap.ui.Device.system.phone?'Left':'Right',a=sap.ui.Device.system.phone?'Baseline':'Auto',w=sap.ui.Device.system.phone?'auto':'11.75rem';this.oLabel=new L({width:w,textAlign:t,text:r.i18n.getText("allowTracking")+":"}).addStyleClass('sapUshellUsageAnalyticsSelectorLabel');this.oSwitchButton=new sap.m.Switch("usageAnalyticsSwitchButton",{type:sap.m.SwitchType.Default}).addStyleClass('sapUshellUsageAnalyticsSelectorSwitchButton');this.oMessage=new sap.m.Text({text:sap.ushell.Container.getService("UsageAnalytics").getLegalText()}).addStyleClass('sapUshellUsageAnalyticsSelectorLegalTextMessage');this.fBox=new sap.m.HBox({alignItems:f,wrap:F,direction:s,height:"2rem",items:[this.oLabel,this.oSwitchButton],layoutData:new sap.m.FlexItemData({alignSelf:a})});this.vBox=new sap.m.VBox({items:[this.fBox,this.oMessage]});return this.vBox;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.UsageAnalyticsSelector";}});},true);
sap.ui.predefine('sap/ushell/components/shell/MeArea/UserPreferences',['sap/ushell/resources','sap/ushell/components/applicationIntegration/AppLifeCycle','sap/ushell/components/SharedComponentUtils','sap/ushell/Config','sap/ushell/EventHub'],function(r,A,s,C,E){"use strict";
function _(){return sap.ushell.Container.getRenderer("fiori2");}
function a(){return A.getElementsModel().getModel();}
function G(v,h,i,j,t,o,k,l,m,n,M,p,q){this.view=null;this.getView=function(){if(!this.view||!sap.ui.getCore().byId(v)){if(i==="xml"){this.view=sap.ui.xmlview(v,h);}else{this.view=sap.ui.jsview(v,h);}}if(M){this.view.setModel(M);}return this.view;};return{entryHelpID:j,title:t,valueResult:null,onSave:o?o.bind(this):function(){if(this.getView().getController().onSave){return this.getView().getController().onSave();}}.bind(this),onCancel:k?k.bind(this):function(){if(this.getView().getController().onCancel){return this.getView().getController().onCancel();}}.bind(this),contentFunc:l?l.bind(this):function(){if(this.getView().getController().getContent){return this.getView().getController().getContent();}}.bind(this),valueArgument:m?m.bind(this):function(){var u=new jQuery.Deferred(),w=this;setTimeout(function(){if(w.getView().getController().getValue){w.getView().getController().getValue().done(function(x){u.resolve(x);});}},0);return u.promise();}.bind(this),editable:typeof n==="function"?n():n,contentResult:null,icon:p,defaultVisibility:q};}
function c(m){return function(){return this.getView().getController()[m]();};}
function b(p){var o={entryHelpID:p.entryHelpId,title:r.i18n.getText(p.i18nTitleKey),editable:true,valueResult:null,contentResult:null,icon:p.icon,getView:function(){var h=p.viewType==="xml"?sap.ui.xmlview:sap.ui.jsview;var v=sap.ui.getCore().byId(p.viewId);if(!v){v=h(p.viewId,p.componentNamespace);}return v;}};o.valueArgument=c("getValue").bind(o);o.onSave=c("onSave").bind(o);o.onCancel=c("onCancel").bind(o);o.contentFunc=c("getContent").bind(o);return o;}
function L(){return b({entryHelpId:"language",i18nTitleKey:"languageRegionTit",icon:"sap-icon://globe",viewId:"languageRegionSelector",componentNamespace:"sap.ushell.components.shell.MeArea.LanguageRegionSelector"});}
function U(){return b({entryHelpId:"UserActivitiesEntry",i18nTitleKey:"userActivities",icon:"sap-icon://laptop",viewId:"userActivitiesHandler",componentNamespace:"sap.ushell.components.shell.MeArea.userActivitiesHandler"});}
function d(){var S=_().getShellConfig();var u=(S.enableOnlineStatus&&sap.ushell.ui5service.UserStatus.prototype.isEnabled)||S.enableUserImgConsent;var v=u?"userAccountSelector":"userAccountSetting";var h=u?"sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector":"sap.ushell.components.shell.MeArea.userAccount.UserAccountSetting";return b({entryHelpId:"userAccountEntry",i18nTitleKey:"UserAccountFld",icon:"sap-icon://account",viewId:v,componentNamespace:h,viewType:"xml"});}
function e(){var m=a(),u=sap.ushell.Container.getUser();var t=new G("userPrefThemeSelector","sap.ushell.components.shell.MeArea.ThemeSelector","xml","themes",r.i18n.getText("Appearance"),function(){var v=this.getView().getController().onSave();v.done(function(){if(m.getProperty("/enableTilesOpacity")===true){sap.ushell.utils.utils.handleTilesOpacity();}});return v;},undefined,undefined,undefined,function(){if(m.getProperty("/setTheme")!==undefined){return m.getProperty("/setTheme")&&u.isSetThemePermitted();}else{return u.isSetThemePermitted();}},m,"sap-icon://palette");var h=new G("userPrefUsageAnalyticsSelector","sap.ushell.components.shell.MeArea.UsageAnalyticsSelector","js","usageAnalytics",r.i18n.getText("usageAnalytics"),undefined,undefined,undefined,undefined,sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted());var i=new G("defaultParametersSelector","sap.ushell.components.shell.MeArea.DefaultParameters","js",undefined,r.i18n.getText("defaultsValuesEntry"),undefined,undefined,undefined,undefined,true,undefined,undefined,false);var j=new G("userProfilingView","sap.ushell.components.shell.MeArea.UserProfiling","js","userProfiling",r.i18n.getText("userProfiling"),undefined,undefined,undefined,undefined,false,m,"sap-icon://user-settings",false);var k=[new d(),t,new L()],p=[];p.push(h);var l=C.last("/core/shell/enableRecentActivity");if(l){k.push(new U());}k.push(j);if(m.getProperty("/enableNotifications")===true){var n=sap.ushell.Container.getService("Notifications")._getNotificationSettingsAvalability(),o;o=new G("notificationSettings","sap.ushell.components.shell.Notifications.Settings","js",undefined,r.i18n.getText("notificationSettingsEntry_title"),undefined,undefined,undefined,undefined,true,undefined,"sap-icon://ui-notifications",false);k.push(o);n.done(function(S){if(S.settingsAvailable){o.visible=true;m.getProperty("/userPreferences/entries").every(function(v,w){if(v.title===r.i18n.getText("notificationSettingsEntry_title")){m.setProperty("/userPreferences/entries/"+w+"/visible",true);return false;}return true;});}});}if(m.getProperty("/userDefaultParameters")){k.push(i);}var q=C.last("/core/home/enableHomePageSettings");if(q!==false){k.push(g());}return{dialogTitle:r.i18n.getText("userSettings"),isDetailedEntryMode:false,activeEntryPath:null,entries:k,profiling:p};}
function g(){var R=_(),o=r.i18n;var h;var i={title:o.getText('FlpSettings_entry_title'),entryHelpID:"flpSettingsEntry",valueArgument:function(){return jQuery.Deferred().resolve(" ");},contentFunc:function(){var D=new jQuery.Deferred();s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings").then(function(j){h=sap.ui.xmlview({viewName:"sap.ushell.components.shell.MeArea.FlpSettings",viewData:{initialDisplayMode:j||"scroll"}});D.resolve(h);});return D;},onSave:function(){var D=h.getController().onSave();var j=s.getPersonalizer("homePageGroupDisplay",R).setPersData(D);j.fail(function(k){jQuery.sap.log.error("Failed to save the anchor bar mode in personalization",k,"sap.ushell.components.flp.settings.FlpSettings");});C.emit("/core/home/homePageGroupDisplay",D);return jQuery.Deferred().resolve();},onCancel:function(){return jQuery.Deferred().resolve();},icon:"sap-icon://home"};return i;}
function f(){var u=a().getProperty("/userPreferences/entries");var D=e();D.entries=D.entries.concat(u);D.entries=_().reorderUserPrefEntries(D.entries);a().setProperty("/userPreferences",D);}
return{setModel:f};});
sap.ui.predefine('sap/ushell/components/shell/MeArea/UserSettings.controller',['sap/ushell/ui/launchpad/AccessibilityCustomData','sap/ushell/EventHub','sap/ushell/Config','sap/ui/model/json/JSONModel'],function(A,E,C,J){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.UserSettings",{onInit:function(){var v=this.getView(),t=this;this.navBackButton=new sap.m.ToggleButton({icon:sap.ui.Device.system.phone?"sap-icon://nav-back":"sap-icon://menu2",press:function(e){if(sap.ui.Device.system.phone){v.getSplitApp().backDetail();t._handleNavButton();this.setPressed(false);}else{if(v.getSplitApp().isMasterShown()){v.getSplitApp().hideMaster();this.setTooltip(sap.ushell.resources.i18n.getText("ToggleButtonShow"));this.setPressed(false);}else{v.getSplitApp().showMaster();this.setTooltip(sap.ushell.resources.i18n.getText("ToggleButtonHide"));this.setPressed(true);}}},tooltip:sap.ushell.resources.i18n.getText("ToggleButtonShow")});if(v&&v.getSplitApp()){v.getSplitApp().attachAfterMasterClose(t,function(){t._handleNavButton.apply(t);});v.getSplitApp().attachAfterMasterOpen(t,function(){t._handleNavButton.apply(t);});}var m=new J({entries:C.last("/core/shell/model/userPreferences/entries"),profiling:C.last("/core/shell/model/userPreferences/profiling")});this.getView().setModel(m,"entries");this.aDoables=[C.on("/core/shell/model/userPreferences/entries").do(function(e){m.setProperty("/entries",e);}),C.on("/core/shell/model/userPreferences/profiling").do(function(e){m.setProperty("/profiling",e);})];},_handleNavButton:function(){var v=this.getView();if(v&&v.getSplitApp()&&v.getSplitApp().getCurrentDetailPage()){if(!v.getSplitApp().isMasterShown()){v.splitAppHeaderBar.addContentLeft(this.navBackButton);}else{if(sap.ui.Device.system.phone||sap.ui.Device.orientation.landscape){v.splitAppHeaderBar.removeAllContentLeft();}}}},getOriginalDialogContent:function(){if(!this.oInitialContent){var e;e=this.getEntryListControl();this.oInitialContent=new sap.ui.layout.VerticalLayout('userPreferencesLayout',{content:[e]}).addStyleClass("sapUshellUserSettingLayout");this.aDanglingControls.push(this.oInitialContent);}return this.oInitialContent;},createDetailPage:function(e,a,t,c){var b=this,v=b.getView(),o=new sap.m.ObjectHeader({title:t,backgroundDesign:sap.m.BackgroundDesign.Solid}).addStyleClass("sapUshellUserSettingDetailHeader");if(e==="userAccountEntry"){var u=sap.ushell.Container.getUser(),d=u.getImage();if(!d){o.setIcon(sap.ui.core.IconPool.getIconURI("sap-icon://person-placeholder"));}else{o.setIcon(C.last("/core/shell/model/userImage/personPlaceHolder"));}u.attachOnSetImage(this.updateUserImage.bind({origScope:this,oObjectHeader:o}));o.setTitle(sap.ushell.Container.getUser().getFullName());}var p=new sap.m.Page('detail'+c.getId(),{content:[o,c],showHeader:false});p.addStyleClass("sapUsheUserSettingDetaildPage");p.onAfterRendering=function(){b._handleNavButton();};v.aDanglingControls.push(p);v.getModel("entries").setProperty(a+"/contentResult",p);v.getSplitApp().addDetailPage(p);b.navToDetail(p.getId());},updateUserImage:function(d){var u=(typeof d)==='string'?d:d.mParameters;var i=true;if((typeof u)==='string'){if(u){i=false;}}else{if(!jQuery.isEmptyObject(u)){i=false;}}if(!i){this.oObjectHeader.setIcon(this.origScope.getView().getModel().getProperty('/userImage/personPlaceHolder'));}else{this.oObjectHeader.setIcon(sap.ui.core.IconPool.getIconURI("sap-icon://person-placeholder"));}},emitEntryOpened:function(e){var u=E.last("UserSettingsOpened")||{};var p=e.split("/").pop();u[p]=true;E.emit("UserSettingsOpened",u);},getListPressHandler:function(s,a){var t=this,i=true,b=s.getBindingContext("entries").getPath(),v=this.getView(),c=v.getModel("entries").getProperty(b+"/contentResult"),B=null,S=true,I=false,d=v.getModel("entries").getProperty(b),f=d.contentFunc,o,k;if(sap.ui.Device.system.phone){s.setSelected(false);}if(c){t.navToDetail(c.getId(),a);t._handleNavButton();t.emitEntryOpened(b);}else{if(typeof f==="function"){o=f();o.done(function(e){S=false;if(I===true){B.destroy();}if(e instanceof sap.ui.core.Control){t.emitEntryOpened(b);t.createDetailPage.apply(t,[d.entryHelpID,b,d.title,e]);}else{i=false;}});o.fail(function(){S=false;if(I===true){B.destroy();}i=false;});o.always(function(){if(i===false){var e=new sap.m.FlexBox("userPrefErrorFlexBox",{height:"5rem",alignItems:sap.m.FlexAlignItems.Center,justifyContent:sap.m.FlexJustifyContent.Center,items:[new sap.m.Text("userPrefErrorText",{text:v.translationBundle.getText("loadingErrorMessage")})]});v.aDanglingControls.push(e);v.getModel("entries").setProperty(b+"/contentResult",e);v.getSplitApp().addDetailPage(e);t.navToDetail(e.getId());}});if(S===true){B=new sap.m.BusyIndicator('userPrefLoadingBusyIndicator',{size:"2rem"});this.aDanglingControls.push(B);I=true;}}else{d.valueArgument().done(function(V){k=t._getKeyValueContent(d,V);t.createDetailPage(d.entryHelpID,b,d.title,k);}).fail(function(e){k=t._getKeyValueContent(d);t.createDetailPage(d.entryHelpID,b,d.title,k);});}}},_getKeyValueContent:function(e,s){var k,v,b,V=s?s:" ",f=sap.ui.Device.system.phone?'Start':'Center',F=sap.ui.Device.system.phone?'Wrap':'NoWrap',a=sap.ui.Device.system.phone?'Column':'Row';k=new sap.m.Label({text:e.title+":"}).addStyleClass('sapUshellUserSettingsDetailsKey');v=new sap.m.Input({value:V,editable:false}).addStyleClass('sapUshellUserSettingsDetailsValue');b=new sap.m.FlexBox({alignItems:f,wrap:F,direction:a,items:[k,v]});return b;},createMasterPages:function(){var t=this,e=t.getUserSettingsEntryTemplate();this.aDanglingControls=this.getView().aDanglingControls;this.oMasterEntryList=new sap.m.List('userSettingEnteryList',{items:{path:"entries>/entries",template:e},mode:"SingleSelectMaster",select:function(a){t.getListPressHandler(a.getSource().getSelectedItem(),a.getId());}});var o=this.oMasterEntryList.onAfterRendering;this.oMasterEntryList.onAfterRendering=function(){var a=this.getItems();var b;o.apply(this,arguments);for(var i=0;i<a.length;i++){b=a[i].getBindingContext("entries").getPath();t._setEntryValueResult(b);}if(!sap.ui.Device.system.phone){this.setSelectedItem(this.getItems()[0]);t.getListPressHandler(this.getSelectedItem());}};var p=new sap.m.Page("userSettingMaster",{showHeader:false,content:[this.oMasterEntryList]}).addStyleClass("sapUshellUserSettingMaster");t.aDanglingControls.push(this.oMasterEntryList,p);return p;},_setEntryValueResult:function(e){var v=this.getView(),m=v.getModel("entries"),i=m.getProperty(e+"/editable"),a=m.getProperty(e+"/valueArgument"),V;if(typeof a==="function"){m.setProperty(e+"/valueResult",v.translationBundle.getText("genericLoading"));m.setProperty(e+"/editable",false);V=a();if(V){V.done(function(b){m.setProperty(e+"/editable",i);var c=true;if(m.getProperty(e+"/visible")!==undefined){c=m.getProperty(e+"/visible");}else if(m.getProperty(e+"/defaultVisibility")!==undefined){c=m.getProperty(e+"/defaultVisibility");}m.setProperty(e+"/visible",typeof(b)==='object'?!!b.value:c);m.setProperty(e+"/valueResult",typeof(b)==='object'?b.displayText:b);});V.fail(function(){m.setProperty(e+"/valueResult",v.translationBundle.getText("loadingErrorMessage"));});}}else if(!!a){m.setProperty(e+"/valueResult",a);m.setProperty(e+"/editable",i);}else{m.setProperty(e+"/valueResult",v.translationBundle.getText("loadingErrorMessage"));}},getUserSettingsEntryTemplate:function(){var i=new sap.m.StandardListItem({title:"{entries>title}",description:"{entries>valueResult}",icon:{parts:["entries>icon","/userImage/account"],formatter:function(e,u){if(e==="sap-icon://account"){e=u;}return e?e:"sap-icon://action-settings";}},type:sap.ui.Device.system.phone?"Navigation":"Inactive",visible:{parts:[{path:'entries>visible'},{path:'entries>defaultVisibility'},{path:'entries>/profiling/length'}],formatter:function(v,d){if(this.getTitle()===sap.ushell.resources.i18n.getText("userProfiling")){var p=this.getModel("entries").getProperty("/profiling");p.forEach(function(e,a){if(e.entryHelpID==="usageAnalytics"){if(!sap.ushell.Container.getService("UsageAnalytics").systemEnabled()||!sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted()){p.splice(a,1);}}},this);return(p!==undefined&&p.length>0);}else{if(v!==undefined){return v;}else{return(d!==undefined)?d:true;}}}},customData:new A({key:"aria-label",value:{parts:[{path:'entries>title'},{path:'entries>valueResult'}],formatter:function(t,v){v=v?v:"";return t+" "+v;}},writeToDom:true})}).addStyleClass("sapUshellUserSettingMasterListItem");return i;},navToDetail:function(i,e){var v=this.getView(),s=v.getSplitApp();s.toDetail(i);E.emit("UserPreferencesDetailNavigated",i);if(e==="select"){this.applyFocus(i);}if(s.getMode()==="ShowHideMode"){s.hideMaster();}},applyFocus:function(i){if(!sap.ui.Device.system.phone){var e=jQuery.sap.byId(i).firstFocusableDomRef();if(e){jQuery.sap.focus(e);}}},onExit:function(){this.aDoables.forEach(function(d){d.off();});this.getView().aDanglingControls.forEach(function(c){if(c){if(c.destroyContent){c.destroyContent();}c.destroy();}});}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/userAccount/UserAccountSelector.controller',['sap/ushell/ui5service/UserStatus','sap/ushell/ui/launchpad/AccessibilityCustomData'],function(U,A){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector",{onInit:function(){var t=this;var s=sap.ushell.Container.getRenderer("fiori2").getShellController();var S=s.getView();this.oShellConfig=(S.getViewData()?S.getViewData().config:{})||{};this.imgConsentEnabled=this.oShellConfig.enableUserImgConsent?this.oShellConfig.enableUserImgConsent:false;this.userStatusEnabled=this.oShellConfig.enableOnlineStatus&&U.prototype.isEnabled;this.userStatusEnabled=this.userStatusEnabled?this.userStatusEnabled:false;if(this.imgConsentEnabled){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){jQuery.sap.log.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.currentUserImgConsent=this.oUser.getImageConsent();this.origUserImgConsent=this.currentUserImgConsent;this.addImgConsentEnableSwitch(this.currentUserImgConsent);}if(this.userStatusEnabled){if(this.isServiceEnable()){this.originalEnableStatus=null;this.originalUserStatus=null;var o=sap.ui.core.service.ServiceFactoryRegistry.get("sap.ushell.ui5service.UserStatus");var a=o.createInstance();a.then(function(o){t.oUserStatusService=o;var p=t._getUserStatusSetting();p.then(function(u){var b=u&&u.userStatusEnabled?u.userStatusEnabled:false;var d=u&&u.userStatusDefault?u.userStatusDefault:undefined;this.originalEnableStatus=b;this.originalUserStatus=d;t.userStatusButton=t._getOnlineStatusPopOver(this.originalUserStatus);t.addUserStatusDropdown();t.addUserEnableSwitch(b);}.bind(t));},function(E){});}}},getContent:function(){var d=jQuery.Deferred();var r=sap.ushell.resources.getTranslationModel();this.getView().setModel(r,"i18n");this.getView().setModel(this.getConfigurationModel(),"config");d.resolve(this.getView());return d.promise();},getValue:function(){var d=jQuery.Deferred();d.resolve(sap.ushell.Container.getUser().getFullName());return d.promise();},onCancel:function(){if(this.userStatusEnabled){if(this.isServiceEnable()){this.oUserEnableOnlineStatusSwitch.setState(this.originalEnableStatus);this.userStatusButton.setStatus(sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM[this.originalUserStatus]);}}if(this.imgConsentEnabled){this.currentUserImgConsent=this.oUser.getImageConsent();this.oUserEnableImgConsentSwitch.setState(this.currentUserImgConsent);}},onSave:function(){var r=jQuery.Deferred(),w,u,a,p=[];if(this.userStatusEnabled){u=this.onSaveUserStatus();p.push(u);}if(this.imgConsentEnabled){a=this.onSaveUserImgConsent();p.push(a);}w=jQuery.when.apply(null,p);w.done(function(){r.resolve();});return r.promise();},onSaveUserImgConsent:function(){var d=jQuery.Deferred();var u;if(this.oUser.getImageConsent()!==this.currentUserImgConsent){if(this.currentUserImgConsent!=undefined){this.oUser.setImageConsent(this.currentUserImgConsent);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.oUser.resetChangedProperties();this.origUserImgConsent=this.currentUserImgConsent;d.resolve();}.bind(this));u.fail(function(e){this.oUser.setImageConsent(this.origUserImgConsent);this.oUser.resetChangedProperties();this.currentUserImgConsent=this.origUserImgConsent;jQuery.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject(this.currentUserImgConsent+"is undefined");}}else{d.resolve();}return d.promise();},onSaveUserStatus:function(){var d=jQuery.Deferred(),u;if(this.isServiceEnable()){if(this.originalEnableStatus!==this.oUserEnableOnlineStatusSwitch.getState()||this.originalUserStatus!==this.userStatusButton.getStatus().status){if(!this.oUserEnableOnlineStatusSwitch.getState()){u=null;this.oUserStatusService.setStatus(null);}else{u=this.userStatusButton.getStatus()?this.userStatusButton.getStatus().status:"AVAILABLE";}this._writeUserStatusSettingToPersonalization({userStatusEnabled:this.oUserEnableOnlineStatusSwitch.getState(),userStatusDefault:u});if(!this.originalEnableStatus&&this.oUserEnableOnlineStatusSwitch.getState()){this.oUserStatusService.setStatus(u);}this.originalEnableStatus=this.oUserEnableOnlineStatusSwitch.getState();this.originalUserStatus=u;}}d.resolve();return d.promise();},addUserStatusDropdown:function(){var u=sap.ui.getCore().byId("UserAccountSelector--userStatusDropDownFlexBox");u.addItem(this.userStatusButton);},addUserEnableSwitch:function(e){var u=sap.ui.getCore().byId("UserAccountSelector--userStatusEnableFlexBox");this.oUserEnableOnlineStatusSwitch=new sap.m.Switch({type:sap.m.SwitchType.Default,state:e,change:function(E){this.userStatusButton.setEnabled(E.mParameters.state);jQuery("#"+this.userStatusButton.getId()).attr("tabindex",E.mParameters.state?0:-1);}.bind(this)});this.oUserEnableOnlineStatusSwitch.addCustomData(new A({key:"aria-labelledBy",value:"UserAccountSelector--sapUshellEnableStatusLabel",writeToDom:true}));this.userStatusButton.setEnabled(e);jQuery("#"+this.userStatusButton.getId()).attr("tabindex",e?0:-1);if(!u){jQuery.sap.log.error("UserAccountSelector: addUserEnableSwitch was called before the renderer");return;}u.addItem(this.oUserEnableOnlineStatusSwitch);},isServiceEnable:function(){return U?U.prototype.isEnabled:false;},getConfigurationModel:function(){var c=new sap.ui.model.json.JSONModel({});var u=sap.ushell.Container.getUser();c.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),sapUiContentIconColor:sap.ui.core.theming.Parameters.get('sapUiContentIconColor'),isStatusEnable:this.originalEnableStatus?this.originalEnableStatus:false,flexAlignItems:sap.ui.Device.system.phone?'Stretch':'Center',textAlign:sap.ui.Device.system.phone?'Left':'Right',textDirection:sap.ui.Device.system.phone?'Column':'Row',labelWidth:sap.ui.Device.system.phone?"auto":"12rem",name:u.getFullName(),mail:u.getEmail(),server:window.location.host,imgConsentEnabled:this.imgConsentEnabled,isImageConsent:this.currentUserImgConsent,userStatusEnabled:this.userStatusEnabled});return c;},_getOnlineStatusPopOver:function(u){var p=new sap.m.Popover({placement:sap.m.PlacementType.Bottom,showArrow:true,showHeader:false,content:[new sap.ushell.ui.launchpad.UserStatusItem({status:sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.AVAILABLE,isOpener:false,press:function(e){o.setStatus(sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.AVAILABLE);p.close();}}).addStyleClass('sapUserStatusContainer'),new sap.ushell.ui.launchpad.UserStatusItem({status:sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.AWAY,isOpener:false,press:function(e){o.setStatus(sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.AWAY);p.close();}}).addStyleClass('sapUserStatusContainer'),new sap.ushell.ui.launchpad.UserStatusItem({status:sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.BUSY,isOpener:false,press:function(e){o.setStatus(sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.BUSY);p.close();}}).addStyleClass('sapUserStatusContainer'),new sap.ushell.ui.launchpad.UserStatusItem({status:sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.APPEAR_OFFLINE,isOpener:false,press:function(e){o.setStatus(sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.APPEAR_OFFLINE);p.close();}}).addStyleClass('sapUserStatusContainer')]});var o=new sap.ushell.ui.launchpad.UserStatusItem({tooltip:"{i18n>headerActionsTooltip}",enabled:false,ariaLabel:sap.ushell.Container.getUser().getFullName(),image:sap.ui.core.IconPool.getIconURI("account"),status:u?sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM[u]:sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM["AVAILABLE"],press:function(e){var b=sap.ui.getCore().byId(e.mParameters.id);p.openBy(b);}.bind(this),contentList:p}).addStyleClass('sapUserStatusOpener');return o;},_writeUserStatusSettingToPersonalization:function(u){var d,p;try{p=this._getUserSettingsPersonalizer().setPersData(u);}catch(e){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(e.name+": "+e.message);d=new jQuery.Deferred();d.reject(e);p=d.promise();}return p;},_getUserSettingsPersonalizer:function(){if(this.oUserPersonalizer===undefined){this.oUserPersonalizer=this._createUserPersonalizer();}return this.oUserPersonalizer;},_createUserPersonalizer:function(){var p=sap.ushell.Container.getService("Personalization"),c,s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true},P={container:"sap.ushell.services.UserStatus",item:"userStatusData"},o=p.getPersonalizer(P,s,c);return o;},_getUserStatusSetting:function(){var p=this._getUserSettingsPersonalizer();return p.getPersData();},addImgConsentEnableSwitch:function(e){var u=sap.ui.getCore().byId("UserAccountSelector--userImgConsentEnableFlexBox");this.oUserEnableImgConsentSwitch=new sap.m.Switch({customTextOff:sap.ushell.resources.i18n.getText("No"),customTextOn:sap.ushell.resources.i18n.getText("Yes"),type:sap.m.SwitchType.Default,state:e,change:this.setCurrentUserImgConsent.bind(this)});this.oUserEnableImgConsentSwitch.addCustomData(new A({key:"aria-labelledBy",value:"UserAccountSelector--sapUshellUserImageConsentSwitchLabel",writeToDom:true}));if(!u){jQuery.sap.log.error("UserAccountSelector: addImgConsentEnableSwitch was called before the renderer");return;}u.addItem(this.oUserEnableImgConsentSwitch);},setCurrentUserImgConsent:function(e){this.currentUserImgConsent=e.mParameters.state;},termsOfUserPress:function(){var t=sap.ui.getCore().byId("UserAccountSelector--termsOfUseTextFlexBox");var a=sap.ui.getCore().byId("UserAccountSelector--termsOfUseLink");var i=t.getVisible();if(i){t.setVisible(false);a.setText(sap.ushell.resources.i18n.getText("userImageConsentDialogShowTermsOfUse"));}else{a.setText(sap.ushell.resources.i18n.getText("userImageConsentDialogHideTermsOfUse"));t.setVisible(true);}}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/userAccount/UserAccountSelector.view',function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector",{createContent:function(c){var i=sap.ushell.resources.i18n;var f=sap.ui.Device.system.phone?'Column':'Row';var F=sap.ui.Device.system.phone?'Stretch':'Center';var t=sap.ui.Device.system.phone?'Left':'Right';var l=sap.ui.Device.system.phone?"auto":"12rem";var n=new sap.m.Label({text:i.getText("UserAccountNameFld")+":",width:l,textAlign:t});var a=new sap.m.Input("userAccountuserName",{value:"{/name}",editable:false}).addAriaLabelledBy(n);a.addEventDelegate({onfocusin:function(){jQuery("#userAccountuserName input").blur();}});var b=new sap.m.FlexBox({alignItems:F,direction:f,items:[n,a]});var e=new sap.m.Label({text:i.getText("UserAccountEmailFld")+":",width:l,textAlign:t});var d=new sap.m.FlexBox({alignItems:F,direction:f,items:[e,new sap.m.Input({value:"{/mail}",editable:false}).addAriaLabelledBy(e)]});var s=new sap.m.Label({text:i.getText("UserAccountServerFld")+":",width:l,textAlign:t});var g=new sap.m.FlexBox({alignItems:F,direction:f,items:[s,new sap.m.Input({value:"{/server}",editable:false}).addAriaLabelledBy(s)]});var v=new sap.m.VBox({items:[b,d,g]});v.addStyleClass("sapUiSmallMargin");return v;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector";}});},true);
sap.ui.predefine('sap/ushell/components/shell/MeArea/userActivitiesHandler.controller',['sap/ushell/components/applicationIntegration/AppLifeCycle'],function(A){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.userActivitiesHandler",{onInit:function(){this.oModel=A.getElementsModel().getModel();this.isTrackingEnable=this.oModel.getProperty("/enableTrackingActivity")!=undefined?this.oModel.getProperty("/enableTrackingActivity"):true;this.currentTrackingMode=this.isTrackingEnable;this.oView.trackUserActivitySwitch.setState(this.isTrackingEnable);},getContent:function(){var d=jQuery.Deferred();d.resolve(this.getView());return d.promise();},getValue:function(){return jQuery.Deferred().resolve(" ");},onCancel:function(){var d=jQuery.Deferred();if(this.currentTrackingMode!=this.isTrackingEnable){this.isTrackingEnable=!this.isTrackingEnable;this.oView.trackUserActivitySwitch.setState(this.isTrackingEnable);}d.resolve();return d.promise();},onSave:function(){var d=jQuery.Deferred();if(this.currentTrackingMode!=this.isTrackingEnable){this.oModel.setProperty("/enableTrackingActivity",this.isTrackingEnable);this.writeUserActivityModeToPersonalization(this.isTrackingEnable);this.currentTrackingMode=this.isTrackingEnable;sap.ui.getCore().byId('meAreaIconTabBar').setVisible(this.isTrackingEnable);var m=sap.ui.getCore().byId('meArea');if(this.isTrackingEnable){var a=m.getController();if(!a.oUserRecentsSrvc){a.oUserRecentsSrvc=sap.ushell.Container.getService('UserRecents');}a.refreshRecentActivities();a.refreshFrequentActivities();d.resolve();}else{d.resolve();}}else{d.resolve();}return d.promise();},writeUserActivityModeToPersonalization:function(i){var d,p;try{p=this._getPersonalizer().setPersData(i);}catch(e){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(e.name+": "+e.message);d=new jQuery.Deferred();d.reject(e);p=d.promise();}return p;},_getPersonalizer:function(){var p=sap.ushell.Container.getService("Personalization");var c=sap.ui.core.Component.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:"flp.settings.FlpSettings",item:"userActivitesTracking"};return p.getPersonalizer(P,s,c);},_handleCleanHistory:function(){sap.ushell.Container.getServiceAsync("UserRecents").then(function(s){s.clearRecentActivities();a();function a(){sap.ui.require(['sap/m/MessageToast'],function(M){var m=sap.ushell.resources.i18n.getText("savedChanges");M.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});};});},_handleTrackUserActivitySwitch:function(i){this.isTrackingEnable=i;}});},false);
sap.ui.predefine('sap/ushell/components/shell/MeArea/userActivitiesHandler.view',function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.userActivitiesHandler",{createContent:function(c){var i=sap.ushell.resources.i18n;var f=sap.ui.Device.system.phone?'Column':'Row';var F=sap.ui.Device.system.phone?'Stretch':'Center';var t=sap.ui.Device.system.phone?'Left':'Right';var C="cleanActivityButton";this.trackingLabel=new sap.m.Label('trackingLabel',{text:i.getText("trackingLabel"),textAlign:t}).addStyleClass("sapUshellCleanActivityLabel");this.trackUserActivitySwitch=new sap.m.Switch("trackUserActivitySwitch",{type:sap.m.SwitchType.Default,customTextOn:i.getText("Yes"),customTextOff:i.getText("No"),change:function(e){c._handleTrackUserActivitySwitch(e.getParameter("state"));}}).addAriaLabelledBy(this.trackingLabel);var T=new sap.m.FlexBox({alignItems:F,direction:f,items:[this.trackingLabel,this.trackUserActivitySwitch]});this.cleanActivityLabel=new sap.m.Label('cleanActivityLabel',{text:i.getText("cleanActivityLabel"),textAlign:t,labelFor:C}).addStyleClass("sapUshellCleanActivityLabel");this.cleanActivityButton=new sap.m.Button({id:"cleanActivityButton",text:i.getText("cleanActivityButton"),press:c._handleCleanHistory}).addAriaLabelledBy(this.cleanActivityLabel);var a=new sap.m.FlexBox({alignItems:F,direction:f,items:[this.cleanActivityLabel,this.cleanActivityButton]});var v=new sap.m.VBox({items:[T,a]});v.addStyleClass("sapUiSmallMargin");return v;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.userActivitiesHandler";}});},false);
sap.ui.predefine('sap/ushell/components/shell/Notifications/Component',['sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/homepage/ComponentKeysHandler','sap/ushell/renderers/fiori2/AccessKeysHandler','sap/ushell/utils','sap/ushell/ui/shell/RightFloatingContainer','sap/ushell/EventHub','sap/ui/Device'],function(r,U,C,A,u,R,E,D){"use strict";return U.extend("sap.ushell.components.shell.Notifications.Component",{metadata:{version:"1.60.40",library:"sap.ushell.components.shell.Notifications",dependencies:{libs:["sap.m"]},config:{}},createContent:function(){this.oRenderer=sap.ushell.Container.getRenderer("fiori2");this.oDefConfig={};this.bIsViewCreated=false;this.isNotificationPreviewLoaded=false;this.oNotificationsPreviewModel=undefined;this.AccessKeysHandler=A;var t=this;var a=h.bind(this);var f=function(N){var B=this.mBindingInfos[N],d=this.getMetadata().getJSONKeys()[N],e;jQuery.each(this[d._sGetter](),jQuery.proxy(function(i,v){this[d._sRemoveMutator](v);},this));jQuery.each(B.binding.getContexts(),jQuery.proxy(function(i,v){e=B.factory(this.getId()+"-"+i,v)?B.factory(this.getId()+"-"+i,v).setBindingContext(v,B.model):"";this[d._sMutator](e);},this));};this.oPreviewNotificationsContainerPlaceholder=new R({id:'notifications-preview-container-placeholder',visible:{path:'/enableNotificationsPreview',formatter:function(v){return t._handleNotificationsPreviewVisibility.apply(t,[v]);}}}).addStyleClass('sapUshellPreviewNotificationsConainer');this.oPreviewNotificationsContainer=new R({id:'notifications-preview-container',top:4,right:'1rem',actAsPreviewContainer:true,floatingContainerItems:{path:"/previewNotificationItems",factory:function(d,e){return sap.ui.getCore().byId(e.getObject().previewItemId);}},insertItemsWithAnimation:{path:'/animationMode',formatter:function(s){return s!=='minimal';}},visible:{path:'/enableNotificationsPreview',formatter:this._handleNotificationsPreviewVisibility.bind(this)}}).addStyleClass('sapContrastPlus').addStyleClass('sapContrast');this.oPreviewNotificationsContainer.updateAggregation=f;sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.Notifications","onNewNotifications",this._handleAlerts,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.Notifications","enablePreviewNotificationChanged",this._updateNotificationConfiguration,this);sap.ui.getCore().getEventBus().publish("shell","notificationsPreviewContainerCreated",{previewNotificationsContainerPlaceholder:this.oPreviewNotificationsContainerPlaceholder,previewNotificationsContainer:this.oPreviewNotificationsContainer});this.oNotificationsPreviewModel=this.oPreviewNotificationsContainer.getModel();var o=(this.getComponentData()?this.getComponentData().config:{});this.oDefConfig={view:{position:"right"},enableHeaderButton:true,enablePreview:true};var n,b;this._updateNotificationConfiguration();if(sap.ushell.Container.getService("Notifications").isEnabled()===true){sap.ushell.Container.getRenderer("fiori2").shellCtrl.getModel().setProperty("/enableNotifications",true);sap.ushell.Container.getService("Notifications").init();if(this.oRenderer.getShellConfig().enableNotificationsUI===true){sap.ushell.Container.getRenderer("fiori2").shellCtrl.getModel().setProperty("/enableNotificationsUI",true);sap.ushell.Container.getService("Notifications").registerDependencyNotificationsUpdateCallback(this.notificationsCountUpdateCallback.bind(this),true);}}this.oDefConfig=jQuery.extend(this.oDefConfig,o);n=sap.ui.getCore().byId("NotificationsCountButton");n.applySettings({icon:sap.ui.core.IconPool.getIconURI("ui-notifications"),floatingNumber:{parts:["/notificationsCount"],formatter:function(d){var j=this.getDomRef(),e="";if(j){if(d>0){e=r.i18n.getText("NotificationToggleButtonCollapsed",d);}else{e=r.i18n.getText("NotificationToggleButtonCollapsedNoNotifications");}j.setAttribute("aria-label",e);}return d;}},visible:"{/enableNotifications}",enabled:"{/enableNotifications}",selected:{path:"/currentViewPortState",formatter:function(v){if(v==='RightCenter'){return true;}return false;}},press:function(){a(this,!this.getSelected());},showSeparator:false,tooltip:r.i18n.getText("NotificationToggleButtonExpanded")},true,true).removeStyleClass("sapUshellPlaceHolders");b=n.onAfterRendering;n.onAfterRendering=function(){if(b){b.apply(this,arguments);}jQuery(this.getDomRef()).attr("aria-pressed",t.oRenderer.getNotificationsSelected());if(this.getDisplayFloatingNumber()>0){jQuery(this.getDomRef()).attr("aria-label",r.i18n.getText("NotificationToggleButtonCollapsed",this.getDisplayFloatingNumber()));}else{jQuery(this.getDomRef()).attr("aria-label",r.i18n.getText("NotificationToggleButtonCollapsedNoNotifications"));}};n.addEventDelegate({onsapskipforward:function(e){t.AccessKeysHandler.bForwardNavigation=true;e.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onsaptabnext:function(e){t.AccessKeysHandler.bForwardNavigation=true;e.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onsapskipback:function(e){if(t.AccessKeysHandler.getAppKeysHandler()){e.preventDefault();t.AccessKeysHandler.bFocusOnShell=false;}}});this.oRenderer.addShellDanglingControl(n);if(sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty("/enableNotificationsUI")===true){sap.ushell.Container.getRenderer("fiori2").oShellModel.addHeaderEndItem(["NotificationsCountButton"],false,["home","app","minimal"],true);}if(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name==="Phone"){sap.ushell.Container.getRenderer("fiori2").getShellController().handleEndItemsOverflow({name:'Phone',showOverFlowBtn:true});}E.on('showNotifications').do(function(v){a(n,v);});sap.ui.getCore().getEventBus().publish("shell","notificationsCompLoaded",{delay:1000});},_notificationsUpdateCallback:function(){var t=this,a=5,T=0,b=this.oNotificationsPreviewModel.getProperty("/previewNotificationItems"),n=[],N=[],d,e,f,g,j,i,o,k=false,m=a-b.length-1;sap.ushell.Container.getService("Notifications").getNotifications().done(function(l){if(!l){return;}var p=sap.ui.getCore().byId("notifications-preview-container"),v;if(!this.isNotificationPreviewLoaded){p.setEnableBounceAnimations(true);}if(b&&b.length){for(j=0;j<b.length;j++){var O=b[j].originalItemId,q=false;for(i=0;i<l.length;i++){if(l[i].Id===O){q=true;break;}if(b[j].originalTimestamp>l[i].CreatedAt){break;}}if(!q){b.splice(j,1);k=true;j--;}}}if(b&&b.length>0){d=b[0].originalTimestamp;e=sap.ushell.Container.getService("Notifications")._formatAsDate(d);}for(j=0;(j<l.length)&&(T<a);j++){f=l[j].CreatedAt;g=sap.ushell.Container.getService("Notifications")._formatAsDate(f);if((e?g>e:true)){n[T]=l[j];T++;}}var s=n.length;if(b&&b.length>0&&b.length<a&&l.length>b.length){d=b[b.length-1].originalTimestamp;e=sap.ushell.Container.getService("Notifications")._formatAsDate(d);T=0;for(j=0;(j<l.length)&&(T<=m);j++){f=l[j].CreatedAt;g=sap.ushell.Container.getService("Notifications")._formatAsDate(f);if(g<e){n[s+T]=l[j];T++;}}}if(n.length===0&&!k){this._disableNotificationPreviewBouncingAnimation(p);return;}for(i=0;i<n.length;i++){o=new sap.m.NotificationListItem({hideShowMoreButton:true,title:n[i].SensitiveText?n[i].SensitiveText:n[i].Text,description:n[i].SubTitle,datetime:u.formatDate(n[i].CreatedAt),priority:sap.ui.core.Priority[n[i].Priority.charAt(0)+n[i].Priority.substr(1).toLowerCase()],press:function(w){var x=this.getBindingContext().getPath(),P=x.split("/"),y="/"+P[1]+"/"+P[2],z=this.getModel().getProperty(y),S=z.NavigationTargetObject,B=z.NavigationTargetAction,F=z.NavigationTargetParams,G=z.originalItemId,H=sap.ushell.Container.getService("Notifications");u.toExternalWithParameters(S,B,F);var I=H.markRead(G);I.fail(function(){sap.ushell.Container.getService('Message').error(r.i18n.getText('notificationsFailedMarkRead'));});},close:function(w){var x=this.getBindingContext().getPath(),P=x.split("/"),y="/"+P[1]+"/"+P[2],z=this.getModel().getProperty(y),B=z.originalItemId,b=t.oNotificationsPreviewModel.getProperty("/previewNotificationItems"),F=sap.ushell.Container.getService("Notifications"),G=F.dismissNotification(B);G.done(function(){var i;for(i=0;i<b.length;i++){if(b[i].originalItemId===B){break;}}b.splice(i,1);t.oNotificationsPreviewModel.setProperty("/previewNotificationItems",b);});G.fail(function(){sap.ushell.Container.getService('Message').error(r.i18n.getText('notificationsFailedDismiss'));t.oNotificationsPreviewModel.setProperty("/previewNotificationItems",b);});}}).addStyleClass("sapUshellNotificationsListItem");N.push({previewItemId:o.getId(),originalItemId:n[i].Id,originalTimestamp:n[i].CreatedAt,NavigationTargetObject:n[i].NavigationTargetObject,NavigationTargetAction:n[i].NavigationTargetAction,NavigationTargetParams:n[i].NavigationTargetParams});v=sap.ui.getCore().byId('viewPortContainer');if(v.getCurrentState()==="RightCenter"){o.addStyleClass("sapUshellRightFloatingContainerItemBounceOut");}}if(b.length===0){t.oNotificationsPreviewModel.setProperty("/previewNotificationItems",N);this._disableNotificationPreviewBouncingAnimation(p);return;}for(j=N.length-1;j>-1;j--){if(b.length>=a){setTimeout(function(){b.pop();t.oNotificationsPreviewModel.setProperty("/previewNotificationItems",b);},1000);}if(N[j].originalTimestamp>b[0].originalTimestamp){b.unshift(N[j]);}else{b.push(N[j]);}}t.oNotificationsPreviewModel.setProperty("/previewNotificationItems",b);this._disableNotificationPreviewBouncingAnimation(p);}.bind(this)).fail(function(){});},_disableNotificationPreviewBouncingAnimation:function(n){if(!this.isNotificationPreviewLoaded){this.isNotificationPreviewLoaded=true;n.setEnableBounceAnimations(false);}},_handleNotificationsPreviewVisibility:function(e){var s=this.oRenderer.getCurrentViewportState(),i=s==='Center',n=sap.ushell.Container.getService('Notifications');e=e&&i;if(e){if(!this.bNotificationsRegistered){n.registerNotificationsUpdateCallback(this._notificationsUpdateCallback.bind(this));this.bNotificationsRegistered=true;}if(n.isFirstDataLoaded()){setTimeout(function(){if(this.oController&&this.oController._notificationsUpdateCallback){this.oController._notificationsUpdateCallback();}}.bind(this),300);}if(!this.bSubscribedToViewportStateSwitch){this.bHeadsupNotificationsInitialyVisible=this.oRenderer.getRightFloatingContainerVisibility();sap.ui.getCore().getEventBus().subscribe("launchpad","afterSwitchState",this._handleViewportStateSwitch,this);this.bSubscribedToViewportStateSwitch=true;}this._handleHeadsupNotificationsPresentation(s);}return e;},_handleViewportStateSwitch:function(s,e,d){var a=d.getParameter('to');if(a=='Center'){var n=sap.ui.getCore().byId("notifications-preview-container");if(n&&n.setFloatingContainerItemsVisiblity){n.setFloatingContainerItemsVisiblity(true);}}},_handleHeadsupNotificationsPresentation:function(s){var i=s==='Center',p=this.oPreviewNotificationsContainer.getDomRef(),H=p&&p.getBoundingClientRect(),P=H?H.bottom<0:false,S=i?P:this.bHeadsupNotificationsInitialyVisible;this.oRenderer.showRightFloatingContainer(S);},_handleAlerts:function(s,e,n){var N;if(this.oRenderer.getViewPortContainerCurrentState()!=='RightCenter'){for(N=0;N<n.length;N++){this.handleNotification(n[N]);}}},handleNotification:function(n){var a=this.oRenderer.addRightFloatingContainerItem({press:function(e){var v=sap.ui.getCore().byId('viewPortContainer');if(window.hasher.getHash()===n.NavigationTargetObject+"-"+n.NavigationTargetAction){v.switchState("Center");}else{u.toExternalWithParameters(n.NavigationTargetObject,n.NavigationTargetAction,n.NavigationTargetParams);}sap.ushell.Container.getService("Notifications").markRead(n.Id);},datetime:r.i18n.getText("notification_arrival_time_now"),title:n.SensitiveText?n.SensitiveText:n.Text,description:n.SubTitle,unread:n.IsRead,priority:"High",hideShowMoreButton:true},true,true);var t=this;setTimeout(function(){t.oRenderer.removeRightFloatingContainerItem(a.getId(),true);},3500);},notificationsCountUpdateCallback:function(d){var t=this,v=this.oRenderer.getViewPortContainerCurrentState(),i=v==="RightCenter"?true:false;if((d===undefined)||(!i)){this._updateBadge();}else{d.done(function(){t._updateBadge();});}},_updateBadge:function(){var n;sap.ushell.Container.getService("Notifications").getUnseenNotificationsCount().done(function(N){n=parseInt(N,10);sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().setProperty('/notificationsCount',n);}).fail(function(d){jQuery.sap.log.error("Shell.controller - call to notificationsService.getCount failed: ",d,"sap.ushell.renderers.lean.Shell");});},_switchToNotificationView:function(s){this.oRenderer.ViewPortContainerNavTo('rightViewPort',"notificationsView",'show');this.oRenderer.switchViewPortStateByControl(s,"RightCenter");sap.ui.getCore().getEventBus().publish("launchpad","notificationViewOpened");},_switchToNotificationViewWithPreview:function(n,a,s){if(a==='minimal'){this._switchToNotificationView(s);}else{var i=n.getFloatingContainerItems().length;setTimeout(function(){this._switchToNotificationView(s);}.bind(this),300+(i*100));}},_updateNotificationConfiguration:function(s,e,d){var o=this.oRenderer.getModelConfiguration(),n=sap.ushell.Container.getService("Notifications").isEnabled(),N=o.appState!=="embedded"&&o.appState!=="headerless"&&o.appState!=="merged"&&o.appState!=="standalone",b=true,p=true,a,f=D.system.desktop||D.system.tablet||D.system.combi,P={};if(n===true){a=sap.ushell.Container.getService("Notifications").getUserSettingsFlags();a.done(function(g){b=g.previewNotificationEnabled;P.bUserEnableNotificationsPreview=b;P.bConfigEnableNotificationsPreview=p;P.bMainFlagExists=false;if(p&&n&&f&&N){P.bMainFlagExists=true;P.bEnableNotificationsPreview=b;}sap.ui.getCore().getEventBus().publish("shell","changeNotificationPreview",P);});}},exit:function(){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.services.Notifications","onNewNotifications",this._handleAlerts,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.services.Notifications","enablePreviewNotificationChanged",this._updateNotificationConfiguration,this);if(this.bSubscribedToViewportStateSwitch){sap.ui.getCore().getEventBus().unsubscribe("launchpad","afterSwitchState",this._handleViewportStateSwitch,this);this.bSubscribedToViewportStateSwitch=false;}if(sap.ushell.Container){if(sap.ushell.Container.getService("Notifications").isEnabled()===true){sap.ushell.Container.getService("Notifications").destroy();}}this.oPreviewNotificationsContainerPlaceholder.destroy();this.oPreviewNotificationsContainer.destroy();}});
function c(o){if(o.oDefConfig.view&&o.bIsViewCreated==false){var n=sap.ui.view("notificationsView",{viewName:"sap.ushell.components.shell.Notifications.Notifications",type:'JS',viewData:{}});n.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));n.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:r.i18n.getText("NotificationToggleButtonExpanded"),writeToDom:true}));o.bIsViewCreated=true;if(o.oDefConfig.view.position==="right"){o.oRenderer.addRightViewPort(n);}else{o.oRenderer.addLeftViewPort(n);}}}
function h(s,S){S=!!S;if(s.getSelected()===S){return;}var n=sap.ui.getCore().byId("notifications-preview-container"),a=sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty('/animationMode')||'full';c(this);if(S){sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().setProperty("/notificationsCount",0);if(n){n.setFloatingContainerItemsVisiblity(false);this._switchToNotificationViewWithPreview(n,a,s);}else{this._switchToNotificationView(s);}}else{this.oRenderer.switchViewPortStateByControl(s,"Center");}sap.ushell.Container.getService("Notifications").notificationsSeen();sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().setProperty("/notificationsCount",0);s.$().attr("aria-pressed",S);s.$().attr("aria-label",r.i18n.getText("NotificationToggleButtonCollapsedNoNotifications"));}
});
sap.ui.predefine('sap/ushell/components/shell/Notifications/Notifications.controller',['sap/ushell/utils'],function(u){"use strict";sap.ui.controller("sap.ushell.components.shell.Notifications.Notifications",{oPagingConfiguration:{MAX_NOTIFICATION_ITEMS_DESKTOP:400,MAX_NOTIFICATION_ITEMS_MOBILE:100,MIN_NOTIFICATION_ITEMS_PER_BUFFER:15,NOTIFICATION_ITEM_HEIGHT:(sap.ui.Device.system.phone||sap.ui.Device.system.tablet)?130:100,TAB_BAR_HEIGHT:100},onInit:function(){var i={};this.iMaxNotificationItemsForDevice=sap.ui.Device.system.desktop?this.oPagingConfiguration.MAX_NOTIFICATION_ITEMS_DESKTOP:this.oPagingConfiguration.MAX_NOTIFICATION_ITEMS_MOBILE;this.oNotificationsService=sap.ushell.Container.getService("Notifications");this.oSortingType=this.oNotificationsService.getOperationEnum();i[this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING]=this.getInitialSortingModelStructure();i[this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING]=this.getInitialSortingModelStructure();i[this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING]=this.getInitialSortingModelStructure();i[this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING]={};this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;this.sCurrentExpandedType=undefined;var m=new sap.ui.model.json.JSONModel(i);m.setSizeLimit(1500);this.getView().setModel(m);this.getNextBuffer();this._oTopNotificationData=undefined;},shouldFetchMoreNotifications:function(){var h=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/hasMoreItemsInBackend"),l=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/listMaxReached");return h&&!l;},getNextBuffer:function(){var c=this.getItemsFromModel(this.sCurrentSorting),n,p,N;if(!this.shouldFetchMoreNotifications()){return;}N=this.getNumberOfItemsToFetchOnScroll();if(N===0){this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/hasMoreItems",false);return;}if(c!==undefined){n=c.length;}if(n===0){this.addBusyIndicatorToTabFilter(true);}this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/inUpdate",true);p=this.oNotificationsService.getNotificationsBufferBySortingType(this.sCurrentSorting,n,N);p.done(function(r){var d=this.oNotificationsService._getNotificationSettingsAvalability();if(d.state()=="pending"){this.oNotificationsService._userSettingInitialization();}this.addBufferToModel(r);}.bind(this));p.fail(function(r){if(n===0){this.handleError();}}.bind(this));},getNextBufferForType:function(){var s=this.sCurrentExpandedType,S=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,g=this.getGroupFromModel(s),c=g?g.aNotifications:undefined,n=0,p,h=g.hasMoreItems;if(!h){return;}if(c!==undefined){n=c.length;}this.getView().getModel().setProperty("/"+S+"/inUpdate",true);p=this.oNotificationsService.getNotificationsBufferInGroup(s,n,this.getBasicBufferSize());p.done(function(r){this.addTypeBufferToModel(s,r,false);}.bind(this));p.fail(function(r){this.getNextBufferFailHandler(S);}.bind(this));},addTypeHeadersToModel:function(r){var c=this.getItemsFromModel(this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING),C=c.length,R;this._oTopNotificationData=undefined;if(!r){return;}R=JSON.parse(r).value;R.forEach(function(i,a){i.hasMoreItems=true;i.aNotifications=[{"Id":"temp"}];});this.getView().getModel().setProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING+"/aGroupHeaders",R);this.getView().getModel().setProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING+"/inUpdate",false);if(C===0){this.removeBusyIndicatorToTabFilter(false);}},addBufferToModel:function(r){var c=this.getItemsFromModel(this.sCurrentSorting),C=c.length,m,h=r.length>=this.getNumberOfItemsToFetchOnScroll();this._oTopNotificationData=undefined;if(!r){this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/hasMoreItemsInBackend",false);return;}this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/hasMoreItemsInBackend",h);m=c.concat(r);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/aNotifications",m);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/inUpdate",false);if(m.length>=this.iMaxNotificationItemsForDevice){this.handleMaxReached();}if(C===0){this.removeBusyIndicatorToTabFilter(true);}},addTypeBufferToModel:function(t,r,o){var g=this.getGroupFromModel(t),G=this.getGroupIndexFromModel(t),a=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING),m;if(!r){return;}if(r.length<this.getBasicBufferSize()){g.hasMoreItems=false;}if(!g.aNotifications||o){g.aNotifications=[];}m=g.aNotifications.concat(r);a[G].aNotifications=m;a[G].Busy=false;this.getView().getModel().setProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,a);this.getView().getModel().setProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING+"/inUpdate",false);},keydownHandler:function(k){var j,n,c;if(k.keyCode===jQuery.sap.KeyCodes.DELETE){j=jQuery(document.activeElement);if(j.hasClass('sapUshellNotificationsListItem')){n=j.next();c=j.find(".sapMNLB-CloseButton")[0];sap.ui.getCore().byId(c.id).firePress();if(n){n.focus();}}}},notificationsUpdateCallback:function(d){var t=this,c,n,N;if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){this.notificationsUpdateCallbackForType();d.resolve();return;}c=this.getItemsFromModel(this.sCurrentSorting);if(c!==undefined){n=c.length;}this.cleanModel();N=this.getNumberOfItemsToFetchOnUpdate(n);this.oNotificationsService.getNotificationsBufferBySortingType(this.sCurrentSorting,0,N).done(function(a){if(!a){return;}d.resolve();t.replaceItemsInModel(a,N);}).fail(function(a){jQuery.sap.log.error("Notifications control - call to notificationsService.getNotificationsBufferBySortingType failed: ",a,"sap.ushell.components.shell.Notifications.Notifications");});},getSelectedList:function(){var s;if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){s=this.getView().oNotificationsListPriority;}else{s=this.getView().oNotificationsListDate;}return s;},isMoreCircleExist:function(){var s=this.getSelectedList(),i=s.getItems().length,l=s.getItems()[i-1];return!!i&&l.getMetadata().getName()==="sap.m.CustomListItem";},handleMaxReached:function(){var s=this.getSelectedList(),n=Math.floor(this.oNotificationsService.getNotificationsCount()),m=n-this.iMaxNotificationItemsForDevice,i=this.isMoreCircleExist();this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/moreNotificationCount",m);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/listMaxReached",m>=0);if(m>0&&!i){s.addItem(this.getView().getMoreCircle(this.sCurrentSorting));}else if(m<=0&&i){s.removeItem(this.getView().oMoreListItem);}},reAddFailedGroup:function(g){var m=this.getView().getModel(),G=m.getProperty('/notificationsByTypeDescending');G.splice(g.removedGroupIndex,0,g.oGroup);m.setProperty('/notificationsByTypeDescending',G);},removeGroupFromModel:function(g){var m=this.getView().getModel(),G=m.getProperty('/notificationsByTypeDescending'),r={oGroup:g,removedGroupIndex:undefined};G.some(function(o,i){if(o.Id===g.Id){r.removedGroupIndex=i;G.splice(i,1);m.setProperty('/notificationsByTypeDescending',G);return true;}return false;});this.sCurrentExpandedType=undefined;return r;},updateGroupHeaders:function(){var p=this.oNotificationsService.getNotificationsGroupHeaders(),t=this,g=t.getView().getModel().getProperty("/"+t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);p.fail(function(d){jQuery.sap.log.error("Notifications control - call to notificationsService.updateGroupHeaders failed: ",d,"sap.ushell.components.shell.Notifications.Notifications");});p.done(function(n){var j=JSON.parse(n),a=j.value;a.forEach(function(i,b){var f=false;g.forEach(function(c,I){if(c.Id===i.Id){g[I].GroupHeaderText=i.GroupHeaderText;g[I].CreatedAt=i.CreatedAt;f=true;}});if(!f){g.unshift(i);}});t.getView().getModel().setProperty("/"+t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,g);});},reloadGroupHeaders:function(){var p=this.oNotificationsService.getNotificationsGroupHeaders(),t=this;p.fail(function(d){jQuery.sap.log.error("Notifications control - call to notificationsService.getNotificationsGroupHeaders failed: ",d,"sap.ushell.components.shell.Notifications.Notifications");t.replaceBusyIndicatorWithNotificationsList();});p.done(function(n){var j=JSON.parse(n),a=j.value,r=[],l=-1;a.forEach(function(i,b){if(i.IsGroupHeader){i.Collapsed=true;r.push(i);l=l+1;}else if(r[l]){if(!r[l].notifications){r[l].notifications=[];}r[l].notifications.push(i);}});t.getView().getModel().setProperty("/"+t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,r);t.replaceBusyIndicatorWithNotificationsList();});},markRead:function(n){var p=this.oNotificationsService.markRead(n),t=this;p.fail(function(){sap.ushell.Container.getService('Message').error(sap.ushell.resources.i18n.getText('notificationsFailedMarkRead'));t.setMarkReadOnModel(n,false);});this.setMarkReadOnModel(n,true);},onExit:function(){this.getView().oBusyIndicator.destroy();},onBeforeRendering:function(){this.oNotificationsService.registerDependencyNotificationsUpdateCallback(this.notificationsUpdateCallback.bind(this),false);},executeAction:function(n,a){return this.oNotificationsService.executeAction(n,a);},executeBulkAction:function(n,a,A,g,N,p){var t=g,P=this.oNotificationsService.executeBulkAction(g.Id,a),m,G=A,s=this.getView().getModel().getProperty(p+"/NotificationTypeDesc"),b=this;if(s===""){s=this.getView().getModel().getProperty(p+"/NotificationTypeKey");}P.fail(function(r){this.getView().getModel().setProperty(N+"/Busy",false);t.notifications.forEach(function(i,c){this.getView().getModel().setProperty(p+"/Busy",false);}.bind(this));if(r&&r.succededNotifications&&r.succededNotifications.length){r.succededNotifications.forEach(function(c,i){this.removeNotificationFromModel(c);}.bind(this));b.cleanModel();}if(r.succededNotifications.length===1){m=sap.ushell.resources.i18n.getText("notificationsPartialSuccessExecuteBulkAction",[G,r.succededNotifications.length,r.failedNotifications.length+r.succededNotifications.length,s,r.failedNotifications.length]);sap.m.MessageToast.show(m,{duration:4000});}else if(r.succededNotifications.length>1){m=sap.ushell.resources.i18n.getText("notificationsSingleSuccessExecuteBulkAction",[G,r.succededNotifications.length,r.failedNotifications.length+r.succededNotifications.length,s,r.failedNotifications.length]);sap.m.MessageToast.show(m,{duration:4000});}else{m=sap.ushell.resources.i18n.getText("notificationsFailedExecuteBulkAction");sap.ushell.Container.getService('Message').error(m);}}.bind(this));P.done(function(){m=sap.ushell.resources.i18n.getText("notificationsSuccessExecuteBulkAction",[G,s]);sap.m.MessageToast.show(m,{duration:4000});this.removeGroupFromModel(t);this.cleanModel();}.bind(this));},dismissNotification:function(n){var t=this,r=this.removeNotificationFromModel(n),p=this.oNotificationsService.dismissNotification(n);this.cleanModel();p.fail(function(){sap.ushell.Container.getService('Message').error(sap.ushell.resources.i18n.getText('notificationsFailedDismiss'));t.addNotificationToModel(r.obj,r.index);});},dismissBulkNotifications:function(n,g){var r=this.removeGroupFromModel(g),p=this.oNotificationsService.dismissBulkNotifications(g.Id);this.cleanModel();p.fail(function(){sap.ushell.Container.getService('Message').error(sap.ushell.resources.i18n.getText('notificationsFailedExecuteBulkAction'));this.reAddFailedGroup(r);}.bind(this));},onListItemPress:function(n,s,a,p){var v=sap.ui.getCore().byId('viewPortContainer');if(v){v.switchState("Center");}u.toExternalWithParameters(s,a,p);this.markRead(n);},scrollToItem:function(t){var j=this._getJqNotificationObjects(),a=j[0],b=j[1],c=j[2],d=j[3],i,n,e,f,g;if(a.length>0&&b.length>0&&c.length>0&&d.length>0){i=d.outerHeight(true)-window.parseInt(d.css("margin-top").replace("px",""));n=this.getIndexInModelByItemId(t.topItemId);n=n?n:0;e=n*i+window.parseInt(d.css("margin-top").replace("px",""));f=window.parseInt(b.css("padding-top").replace("px",""))+window.parseInt(c.css("padding-top").replace("px",""));g=a.offset().top;a.scrollTop(e+f+g-t.offSetTop);}this._oTopNotificationData=undefined;},_getJqNotificationObjects:function(){var j=jQuery("#notificationIconTabBar-containerContent"),a=j.children(),b=a.children(),c=j.find("li").first();return[j,a,b,c];},getTopOffSet:function(){var t=0,j=this._getJqNotificationObjects()[0];if(j.children().length>0&&j.children().children().length>0){t+=j.children().outerHeight()-j.children().height();t+=j.children().children().outerHeight()-j.children().children().height();}return t;},getTopItemOnTheScreen:function(){var j=this._getJqNotificationObjects()[0],t=0,i,a=0,b=this;t=this.getTopOffSet();j.find("li").each(function(){a=jQuery(this).offset().top;if(a>=t){i=b.getItemNotificationId(this);return false;}});return{topItemId:i,offSetTop:a};},handleError:function(){this.removeBusyIndicatorToTabFilter(true);try{sap.ushell.Container.getService("Message").error(sap.ushell.resources.i18n.getText("errorOccurredMsg"));}catch(e){jQuery.sap.log.error("Getting Message service failed.");}},addBusyIndicatorToTabFilter:function(i){var t=this.getSelectedTabFilter(),I=this.getView().oIconTabBar;if(i){I.addStyleClass('sapUshellNotificationIconTabByTypeWithBusyIndicator');t.removeAllContent();t.addContent(this.getView().oBusyIndicator);}},removeBusyIndicatorToTabFilter:function(i){var t=this.getSelectedTabFilter(),s;if(t&&i){if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){s=this.getView().oNotificationsListPriority;}else{s=this.getView().oNotificationsListDate;}t.removeContent(this.getView().oBusyIndicator);t.addContent(s);}},replaceBusyIndicatorWithNotificationsList:function(){var v=this.getView(),t=v.oIconTabBar.getItems()[1];if(t.getContent()[0]===v.oBusyIndicator){t.removeContent(v.oBusyIndicator);t.addContent(v.oNotificationsListType);}},addNotificationToModel:function(n,i){var m=this.getView().getModel(),a=m.getProperty("/"+this.sCurrentSorting+"/aNotifications");a.splice(i,0,n);m.setProperty("/"+this.sCurrentSorting+"/aNotifications",a);},removeNotificationFromModel:function(n){var m=this.getView().getModel(),i,g,a,N,r={};if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING||this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING||this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){N="/"+this.sCurrentSorting+"/aNotifications";a=m.getProperty(N);a.some(function(b,i,c){if(b.Id&&b.Id===n){r.obj=c.splice(i,1)[0];r.index=i;return true;}});m.setProperty(N,a);return r;}g=m.getProperty("/notificationsByTypeDescending");for(i=0;i<g.length;i++){a=g[i].aNotifications;if(a){if(a.length===1&&a[0].Id===n){g.splice(i,1);}else{a.some(function(b,i,c){if(b.Id&&b.Id===n){r.obj=c.splice(i,1)[0];r.index=i;return true;}});g[i].aNotifications=a;}}}this.updateGroupHeaders();m.setProperty("/notificationsByTypeDescending",g);return r;},getIndexInModelByItemId:function(n){var N,i;if(this.notificationsByTypeDescending===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){N=this.getView().getModel().getProperty("/"+this.sCurrentExpandedType+"/aNotifications");}else{N=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/aNotifications");}if(N===undefined||N.length===0){return 0;}for(i=0;i<N.length;i++){if(N[i].Id===n){return i;}}},cleanModel:function(){var t=this,s=this.getView().getModel().getProperty("/");if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING||this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING){this.getView().oIconTabBar.getItems()[1].removeAllContent();this.getView().oIconTabBar.getItems()[2].removeAllContent();}else if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){this.getView().oIconTabBar.getItems()[0].removeAllContent();this.getView().oIconTabBar.getItems()[1].removeAllContent();}else{this.getView().oIconTabBar.getItems()[2].removeAllContent();this.getView().oIconTabBar.getItems()[0].removeAllContent();}jQuery.each(s,function(i,a){if(i!==t.sCurrentSorting&&i!=="notificationsByTypeDescending"){s[i]=t.getInitialSortingModelStructure();}});this.getView().getModel().setProperty("/",s);},replaceItemsInModel:function(r,n){var c=this.getItemsFromModel(this.sCurrentSorting),C=c.length,h=r.length>=n;if(C){this._oTopNotificationData=this.getTopItemOnTheScreen();}this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/hasMoreItemsInBackend",h);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/aNotifications",r);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/inUpdate",false);this.handleMaxReached();},setMarkReadOnModel:function(n,I){var m=this.getView().getModel(),p="/"+this.sCurrentSorting,N,d,g,i;d=m.getProperty(p);if(this.sCurrentSorting==="notificationsByTypeDescending"){for(i=0;i<d.length;i++){if(d[i].Id===this.sCurrentExpandedType){p=p+"/"+i;g=true;break;}}if(!g){return;}}p=p+"/aNotifications";N=m.getProperty(p);N.some(function(a){if(a.Id===n){a.IsRead=I;return true;}});m.setProperty(p,N);},getNumberOfItemsInScreen:function(){var i,h=this.getWindowSize();i=(h-this.oPagingConfiguration.TAB_BAR_HEIGHT)/this.oPagingConfiguration.NOTIFICATION_ITEM_HEIGHT;return Math.ceil(i);},getBasicBufferSize:function(){return Math.max(this.getNumberOfItemsInScreen()*3,this.oPagingConfiguration.MIN_NOTIFICATION_ITEMS_PER_BUFFER);},getWindowSize:function(){return jQuery(window).height();},getNumberOfItemsToFetchOnScroll:function(){var c=this.getItemsFromModel(this.sCurrentSorting).length,b=this.getBasicBufferSize();if(c>=this.iMaxNotificationItemsForDevice){return 0;}if(c+b>this.iMaxNotificationItemsForDevice){return this.iMaxNotificationItemsForDevice-c;}return b;},getNumberOfItemsToFetchOnUpdate:function(n){var b=this.getBasicBufferSize(),N=Math.ceil(n/b),r;r=N>0?N*b:b;return r>this.iMaxNotificationItemsForDevice?this.iMaxNotificationItemsForDevice:r;},getItemsFromModel:function(s){if(s===undefined){s=this.sCurrentSorting;}return this.getView().getModel().getProperty("/"+s+"/aNotifications");},getItemsOfTypeFromModel:function(t){var g=this.getGroupFromModel(t);if(g){return g.aNotifications?g.aNotifications:[];}return[];},getGroupFromModel:function(t){var g=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING),G;g.some(function(a,i){if(a.Id===t){G=a;return true;}});return G;},getGroupIndexFromModel:function(t){var g=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING),i;g.forEach(function(a,b){if(a.Id===t){i=b;return true;}});return i;},getItemNotificationId:function(e){var i,I;i=sap.ui.getCore().byId(e.getAttribute("Id")).getBindingContext().sPath;I=this.getView().getModel().getProperty(i+"/Id");return I;},getInitialSortingModelStructure:function(){return{hasMoreItemsInBackend:true,listMaxReached:false,aNotifications:[],inUpdate:false,moreNotificationCount:""};},getSelectedTabFilter:function(){var t;if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING||this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING){t=this.getView().oIconTabBar.getItems()[0];}else if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){t=this.getView().oIconTabBar.getItems()[2];}else{t=this.getView().oIconTabBar.getItems()[1];}return t;},triggerRetrieveMoreDataForGroupNotifications:function(){if(!this.getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING+"/inUpdate")){var n=this.getItemsOfTypeFromModel(this.sCurrentExpandedType),a=n?n.length:0,b=a?this.getBasicBufferSize():0,c=b*3/5,i=Math.floor(a-c),l=this.getView().oNotificationsListDate.getItems()[i],t=this.getTopOffSet();if(jQuery(l.getDomRef()).offset().top<=t){this.getNextBufferForType();}}},onExpandGroup:function(g){var l=this.getView().oNotificationsListType.getItems(),a=g.getId(),G=this.getView().getModel().getProperty(g.getBindingContextPath()),t=this;t.sCurrentExpandedType=G.Id;t.getView().getModel().setProperty(g.getBindingContextPath()+"/aNotifications",[]);t.getView().getModel().setProperty(g.getBindingContextPath()+"/hasMoreItems",true);l.forEach(function(i,b){if(i.getId()===a){t.getNextBufferForType();}else if(i.getId()!==a&&!i.getCollapsed()){i.setCollapsed(true);t.getView().getModel().setProperty(i.getBindingContextPath()+"/hasMoreItems",true);}});},notificationsUpdateCallbackForType:function(){var s=this.sCurrentExpandedType,S=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,g=this.getGroupFromModel(s),c=g?g.aNotifications:undefined,n=0,p;if(c!==undefined){n=c.length;}this.getView().getModel().setProperty("/"+S+"/inUpdate",true);this.updateGroupHeaders();if(s){p=this.oNotificationsService.getNotificationsBufferInGroup(s,0,this.getNumberOfItemsToFetchOnUpdate(n));p.done(function(r){this.addTypeBufferToModel(s,r,true);}.bind(this));p.fail(function(r){this.getNextBufferFailHandler(r);}.bind(this));}},handleEmptyList:function(){var i=this.getItemsFromModel(this.sCurrentSorting);if(i){this.getSelectedList().toggleStyleClass("sapContrast",!i.length);this.getSelectedList().toggleStyleClass("sapContrastPlus",!i.length);}}});},false);
sap.ui.predefine('sap/ushell/components/shell/Notifications/Notifications.view',['sap/m/NotificationListItem','sap/m/BusyIndicator','sap/m/Button','sap/m/NotificationListGroup','sap/m/List','sap/m/IconTabFilter','sap/m/IconTabBar','sap/m/Text','sap/m/VBox','sap/m/CustomListItem'],function(N,B,a,b,L,I,c,T,V,C){"use strict";sap.ui.jsview("sap.ushell.components.shell.Notifications.Notifications",{createContent:function(o){var t=this;this.oBusyIndicator=new B('notificationsByTypeBusyIndicator',{size:"1rem"});this.oPreviousTabKey="sapUshellNotificationIconTabByDate";this.oPreviousByDateSorting=undefined;this.oActionListItemTemplate=new a({text:"{ActionText}",type:{parts:["Nature"],formatter:function(n){switch(n){case"POSITIVE":return"Accept";case"NEGATIVE":return"Reject";default:return"Default";}}},press:function(E){t.actionButtonPressHandler(E);}});this.removeTabIndexFromList=function(O){var l=O.$().children().get(1);if(l){l.removeAttribute("tabindex");}};this.actionButtonPressHandler=function(E){var n=E.getSource().getBindingContext().getPath(),g=this.getModel().getProperty(n),p=n.split("/"),h=t.oIconTabBar.getSelectedKey(),P=h==='sapUshellNotificationIconTabByType'?"/"+p[1]+"/"+p[2]+"/"+p[3]+"/"+p[4]:"/"+p[1]+"/"+p[2]+"/"+p[3],j=this.getModel().getProperty(P),s=j.Id;this.oPressActionEventPath=n;this.getModel().setProperty(P+"/Busy",true);o.executeAction(s,g.ActionId).done(function(r){if(r&&r.isSucessfull){sap.ui.require(['sap/m/MessageToast'],function(M){if(r.message&&r.message.length){M.show(r.message,{duration:4000});}else{var A=this.oPressActionEventPath,k=this.getModel().getProperty(A),l=k.ActionText;M.show(sap.ushell.resources.i18n.getText("ActionAppliedToNotification",l),{duration:4000});}}.bind(this));if(r.DeleteOnReturn!==false){o.removeNotificationFromModel(s);o.cleanModel();}}else{if(r){sap.ushell.Container.getService('Message').error(r.message);}else{sap.ushell.Container.getService('Message').error(sap.ushell.resources.i18n.getText('notificationsFailedExecuteAction'));}}this.getModel().setProperty(P+"/Busy",false);}.bind(this)).fail(function(){this.getModel().setProperty(P+"/Busy",false);sap.ushell.Container.getService('Message').error(sap.ushell.resources.i18n.getText('notificationsFailedExecuteAction'));}.bind(this));};this.oActionGroupItemTemplate=new a({text:"{GroupActionText}",type:{parts:["Nature"],formatter:function(n){switch(n){case"POSITIVE":return"Accept";case"NEGATIVE":return"Reject";default:return"Default";}}},press:function(E){var n=this.getBindingContext().getPath(),g=this.getModel().getProperty(n),p=n.split("/"),P="/"+p[1]+"/"+p[2],h=this.getModel().getProperty(P),j=[];if(h.aNotifications){h.aNotifications.forEach(function(k,l){j.push(k.Id);this.getModel().setProperty(P+"/Busy",true);}.bind(this));}this.getModel().setProperty(n+"/Busy",true);o.executeBulkAction(j,g.ActionId,this.getProperty("text"),h,n,P);}});this.addStyleClass('sapUshellNotificationsView');this.oNotificationListItemTemplate=new N({press:function(E){var g=this.getBindingContext(),m=g.sPath,M=this.getModel().getProperty(m),s=M.NavigationTargetObject,A=M.NavigationTargetAction,p=M.NavigationTargetParams,n=M.Id;o.onListItemPress.call(o,n,s,A,p);},datetime:{path:"CreatedAt",formatter:sap.ushell.utils.formatDate.bind(o)},description:"{SubTitle}",title:{parts:["SensitiveText","Text"],formatter:function(s,g){return s?s:g;}},buttons:{path:"Actions",templateShareable:true,sorter:new sap.ui.model.Sorter('Nature',true),template:this.oActionListItemTemplate},unread:{parts:["IsRead"],formatter:function(g){return!g;}},close:function(E){var n=this.getBindingContext().getPath(),g=this.getModel().getProperty(n),s=g.Id;o.dismissNotification(s);},busy:{parts:["Busy"],formatter:function(g){if(g){return g;}return false;}},priority:{parts:["Priority"],formatter:function(p){if(p){p=p.charAt(0)+p.substr(1).toLowerCase();return sap.ui.core.Priority[p];}}}}).addStyleClass("sapUshellNotificationsListItem").addStyleClass('sapContrastPlus').addStyleClass('sapContrast');this.oNotificationGroupTemplate=new b({title:"{GroupHeaderText}",collapsed:"{Collapsed}",showEmptyGroup:true,enableCollapseButtonWhenEmpty:true,datetime:{path:"CreatedAt",formatter:sap.ushell.utils.formatDate.bind(o)},buttons:{path:"Actions",templateShareable:true,sorter:new sap.ui.model.Sorter('Nature',true),template:this.oActionGroupItemTemplate},items:{path:"aNotifications",template:this.oNotificationListItemTemplate,templateShareable:true},onCollapse:function(E){var g=E.getSource(),p=g.getBindingContext().getPath();if(!g.getCollapsed()){t.getModel().setProperty(p+"/Busy",true);t.expandedGroupIndex=p.substring(p.lastIndexOf("/")+1);o.onExpandGroup(g);}},close:function(E){var n=this.getBindingContext().getPath(),p=n.split("/"),P="/"+p[1]+"/"+p[2],g=this.getModel().getProperty(P),h=[];g.aNotifications.forEach(function(j,k){h.push(j.Id);});o.dismissBulkNotifications(h,g);},autoPriority:false,priority:{parts:["Priority"],formatter:function(p){if(p){p=p.charAt(0)+p.substr(1).toLowerCase();return sap.ui.core.Priority[p];}}},busy:{parts:["Busy"],formatter:function(g){if(g){return g;}return false;}}});this.oNotificationsListDate=new L({id:"sapUshellNotificationsListDate",mode:sap.m.ListMode.None,noDataText:sap.ushell.resources.i18n.getText('noNotificationsMsg'),items:{path:"/notificationsByDateDescending/aNotifications",template:this.oNotificationListItemTemplate,templateShareable:true},growing:true,growingThreshold:400,growingScrollToLoad:true}).addStyleClass("sapUshellNotificationsList");this.oNotificationsListDate.onAfterRendering=function(){o.handleEmptyList();this.oNotificationsListDate.$().parent().parent().scroll(this._triggerRetrieveMoreData.bind(t));if(o._oTopNotificationData){o.scrollToItem(o._oTopNotificationData);}this.oNotificationsListDate.addStyleClass('sapContrast sapContrastPlus');this.removeTabIndexFromList(this.oNotificationsListDate);}.bind(this);this.oNotificationsListPriority=new L({id:"sapUshellNotificationsListPriority",mode:sap.m.ListMode.None,noDataText:sap.ushell.resources.i18n.getText('noNotificationsMsg'),items:{path:"/notificationsByPriorityDescending/aNotifications",template:this.oNotificationListItemTemplate,templateShareable:true},growing:true,growingThreshold:400,growingScrollToLoad:true}).addStyleClass("sapUshellNotificationsList");this.oNotificationsListPriority.onAfterRendering=function(){o.handleEmptyList();this.oNotificationsListPriority.$().parent().parent().scroll(this._triggerRetrieveMoreData.bind(t));if(o._oTopNotificationData){o.scrollToItem(o._oTopNotificationData);}this.oNotificationsListPriority.addStyleClass('sapContrast sapContrastPlus');this.removeTabIndexFromList(this.oNotificationsListPriority);}.bind(this);this.triggerRetrieveMoreData=function(p){if(!this.getModel().getProperty("/"+p+"/inUpdate")){var n=this.getController().getItemsFromModel(p),g=n?n.length:0,h=g?this.getController().getBasicBufferSize():0,j=h*2/3,k=Math.floor(g-j),l=p==="notificationsByPriorityDescending"?this.oNotificationsListPriority.getItems()[k]:this.oNotificationsListDate.getItems()[k],m=this.getController().getTopOffSet();if(l&&l.getDomRef()&&jQuery(l.getDomRef()).offset().top<=m){this.getController().getNextBuffer(p);}}};this.triggerRetrieveMoreDataForExpandedGroup=function(){if(!this.getModel().getProperty("/notificationsByTypeDescending/inUpdate")){var g=this.getModel().getProperty("/notificationsByTypeDescending"),n=g.length,h=this.getModel().getProperty("/notificationsByTypeDescending")[this.expandedGroupIndex].aNotifications.length,j=h+n,k=j?this.getController().getBasicBufferSize():0,l=k*2/3,m=Math.floor(j-l),p=this.oNotificationsListType.getItems()[this.expandedGroupIndex].getItems()[m],q=this.getController().getTopOffSet();if(p&&p.getDomRef()&&jQuery(p.getDomRef()).offset().top<=q){o.getNextBufferForType();}}};this._triggerRetrieveMoreData=function(){this.triggerRetrieveMoreData(o.sCurrentSorting);};this.oNotificationsListType=new L({id:"sapUshellNotificationsListType",mode:sap.m.ListMode.SingleSelect,noDataText:sap.ushell.resources.i18n.getText('noNotificationsMsg'),items:{path:"/notificationsByTypeDescending",template:t.oNotificationGroupTemplate,templateShareable:true}}).addStyleClass("sapUshellNotificationsList").addStyleClass('sapContrastPlus').addStyleClass('sapContrast');this.oNotificationsListType.onAfterRendering=function(){this.oNotificationsListType.$().parent().parent().scroll(this.triggerRetrieveMoreDataForExpandedGroup.bind(t));this.removeTabIndexFromList(this.oNotificationsListType);}.bind(this);var i=new I({id:"sapUshellNotificationIconTabByDate",key:"sapUshellNotificationIconTabByDate",text:sap.ushell.resources.i18n.getText('notificationsSortByDate'),tooltip:sap.ushell.resources.i18n.getText('notificationsSortByDateDescendingTooltip')});var d=new I({id:"sapUshellNotificationIconTabByType",key:"sapUshellNotificationIconTabByType",text:sap.ushell.resources.i18n.getText('notificationsSortByType'),tooltip:sap.ushell.resources.i18n.getText('notificationsSortByTypeTooltip'),content:this.oNotificationsListType});var e=new I({id:"sapUshellNotificationIconTabByPrio",key:"sapUshellNotificationIconTabByPrio",text:sap.ushell.resources.i18n.getText('notificationsSortByPriority'),tooltip:sap.ushell.resources.i18n.getText('notificationsSortByPriorityTooltip')});this.oIconTabBar=new c('notificationIconTabBar',{backgroundDesign:sap.m.BackgroundDesign.Transparent,expandable:false,selectedKey:"sapUshellNotificationIconTabByDate",items:[i,d,e],select:function(g){var k=g.getParameter("key"),h=g.getParameter("item");if(k==="sapUshellNotificationIconTabByDate"){if(((t.oPreviousTabKey==="sapUshellNotificationIconTabByDate")&&((t.oPreviousByDateSorting===t.oController.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING)||t.oPreviousByDateSorting===undefined))||((t.oPreviousTabKey!=="sapUshellNotificationIconTabByDate")&&(t.oPreviousByDateSorting===t.oController.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING))){t.oController.sCurrentSorting=t.oController.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING;h.setTooltip(sap.ushell.resources.i18n.getText('notificationsSortByDateAscendingTooltip'));t.oNotificationsListDate.bindItems("/notificationsByDateAscending/aNotifications",t.oNotificationListItemTemplate);if(o.getItemsFromModel(o.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING).length===0){o.getNextBuffer(o.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING);}t.oPreviousByDateSorting=t.oController.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING;}else{t.oController.sCurrentSorting=t.oController.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;h.setTooltip(sap.ushell.resources.i18n.getText('notificationsSortByDateDescendingTooltip'));t.oNotificationsListDate.bindItems("/notificationsByDateDescending/aNotifications",t.oNotificationListItemTemplate);if(o.getItemsFromModel(o.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING).length===0){o.getNextBuffer(o.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING);}t.oPreviousByDateSorting=t.oController.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;}t.oPreviousTabKey="sapUshellNotificationIconTabByDate";}else if(k==="sapUshellNotificationIconTabByType"&&t.oPreviousTabKey!=="sapUshellNotificationIconTabByType"){t.oController.sCurrentSorting=t.oController.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING;t.getController().reloadGroupHeaders();h.removeAllContent();h.addContent(t.oBusyIndicator);t.oIconTabBar.addStyleClass('sapUshellNotificationIconTabByTypeWithBusyIndicator');t.oPreviousTabKey="sapUshellNotificationIconTabByType";}else{t.oController.sCurrentSorting=t.oController.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING;if(o.getItemsFromModel(o.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING).length===0){o.getNextBuffer(o.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING);}t.oPreviousTabKey="sapUshellNotificationIconTabByPrio";}t.oPreviousTabKey=k;}}).addStyleClass('sapUshellNotificationTabBar');this.oIconTabBar.addEventDelegate({onsaptabprevious:function(E){var O=E.originalEvent,s=O.srcElement,g=s.classList,h;h=jQuery.inArray('sapMITBFilter',g)>-1;if(h===true){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);}}});var f=this.oIconTabBar.onAfterRendering;this.oIconTabBar.onAfterRendering=function(){if(f){f.apply(this,arguments);}var g=sap.ui.getCore().byId('notificationIconTabBar--header');if(g){g.addStyleClass('sapContrastPlus');g.addStyleClass('sapUshellTabBarHeader');}};return[this.oIconTabBar];},getMoreCircle:function(t){var m=new T({text:sap.ushell.resources.i18n.getText('moreNotifications')}),n=new T({text:""}).addStyleClass("sapUshellNotificationsMoreCircleCount"),M=new V({items:[n,m],alignItems:sap.m.FlexAlignItems.Center}).addStyleClass("sapUshellNotificationsMoreCircle"),o=new T({text:sap.ushell.resources.i18n.getText('moreNotificationsAvailable_message'),textAlign:"Center"}).addStyleClass("sapUshellNotificationsMoreHelpingText"),d=new T({text:sap.ushell.resources.i18n.getText('processNotifications_message'),textAlign:"Center"}).addStyleClass("sapUshellNotificationsMoreHelpingText"),v=new V({items:[M,o,d]}).addStyleClass("sapUshellNotificationsMoreVBox"),l=new C({type:sap.m.ListType.Inactive,content:v}).addStyleClass("sapUshellNotificationsMoreListItem").addStyleClass('sapContrastPlus');n.setModel(this.getModel());n.bindText("/"+t+"/moreNotificationCount");this.oMoreListItem=l;return l;},getControllerName:function(){return"sap.ushell.components.shell.Notifications.Notifications";}});},false);
sap.ui.predefine('sap/ushell/components/shell/Notifications/Settings.controller',function(){"use strict";sap.ui.controller("sap.ushell.components.shell.Notifications.Settings",{onInit:function(){var t=this,s=sap.ushell.Container.getService("Notifications").readSettings(),m=new sap.ui.model.json.JSONModel(),v,n,r,d;m.setProperty("/aDitryRowsIndicator",[]);m.setProperty("/rows",[]);m.setProperty("/originalRows",[]);s.done(function(R){r=JSON.parse(R);m.setProperty("/rows",r.value);d=JSON.parse(JSON.stringify(r.value));m.setProperty("/originalRows",d);});s.fail(function(){n=t.getView().getNoDataUI();t.getView().removeAllContent();t.getView().addContent(n);});this._handleSwitchFlagsDataInitialization(m);v=this.getView();v.setModel(m);},onExit:function(){},onBeforeRendering:function(){},onAfterRendering:function(){var o=this.getView().getModel().getProperty("/flags"),r=this.getView().getModel().getProperty("/rows"),d;if(r!==undefined){d=JSON.parse(JSON.stringify(r));this.getView().getModel().setProperty("/originalRows",d);}this.getView().getModel().setProperty("/originalFlags/previewNotificationEnabled",o.previewNotificationEnabled);this.getView().getModel().setProperty("/originalFlags/highPriorityBannerEnabled",o.highPriorityBannerEnabled);this.getView().getModel().setProperty("/aDitryRowsIndicator",[]);},getContent:function(){var d=jQuery.Deferred();d.resolve(this.getView());return d.promise();},getValue:function(){var d=jQuery.Deferred();d.resolve(" ");return d.promise();},onCancel:function(){var o=this.getView().getModel().getProperty("/originalFlags"),O=this.getView().getModel().getProperty("/originalRows"),d=JSON.parse(JSON.stringify(O));this.getView().getModel().setProperty("/flags/previewNotificationEnabled",o.previewNotificationEnabled);this.getView().getModel().setProperty("/flags/highPriorityBannerEnabled",o.highPriorityBannerEnabled);this.getView().getModel().setProperty("/rows",d);this.getView().getModel().setProperty("/originalFlags",{});this.getView().getModel().setProperty("/originalRows",[]);this.getView().getModel().setProperty("/aDitryRowsIndicator",[]);},onSave:function(){var d=jQuery.Deferred(),r=this.getView().getModel().getProperty("/rows"),o=this.getView().getModel().getProperty("/originalRows"),t,T,i,D=this.getView().getModel().getProperty("/aDitryRowsIndicator");d.resolve();this._handleSwitchFlagsSave();for(i=0;i<r.length;i++){if(D[i]&&D[i]===true){t=r[i];T=o[i];if(!this._identicalRows(t,T)){sap.ushell.Container.getService("Notifications").saveSettingsEntry(t);}}}this.getView().getModel().setProperty("/aDitryRowsIndicator",[]);return d.promise();},setControlDirtyFlag:function(){var c=this.getBindingContext().sPath,i=c.substring(c.lastIndexOf("/")+1,c.length),o=this.getModel().getProperty("/aDitryRowsIndicator");if(o!==undefined){this.getModel().setProperty("/aDitryRowsIndicator/"+i,true);}},_handleSwitchFlagsDataInitialization:function(m){var s=sap.ushell.Container.getService("Notifications").getUserSettingsFlags(),M=sap.ushell.Container.getService("Notifications")._getNotificationSettingsMobileSupport();s.done(function(S){m.setProperty("/flags",{});m.setProperty("/flags/previewNotificationEnabled",S.previewNotificationEnabled);m.setProperty("/flags/highPriorityBannerEnabled",S.highPriorityBannerEnabled);m.setProperty("/flags/mobileNotificationsEnabled",M);m.setProperty("/originalFlags",{});m.setProperty("/originalFlags/previewNotificationEnabled",S.previewNotificationEnabled);m.setProperty("/originalFlags/highPriorityBannerEnabled",S.highPriorityBannerEnabled);});},_handleSwitchFlagsSave:function(){var p=this.getView().getModel().getProperty("/flags/previewNotificationEnabled"),h=this.getView().getModel().getProperty("/flags/highPriorityBannerEnabled"),o=this.getView().getModel().getProperty("/originalFlags/previewNotificationEnabled"),O=this.getView().getModel().getProperty("/originalFlags/highPriorityBannerEnabled");if((o!==p)||(O!==h)){sap.ushell.Container.getService("Notifications").setUserSettingsFlags({previewNotificationEnabled:p,highPriorityBannerEnabled:h});if(p!==o){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Notifications","enablePreviewNotificationChanged",{bPreviewEnabled:p});}this.getView().getModel().setProperty("/originalFlags/previewNotificationEnabled",p);this.getView().getModel().setProperty("/originalFlags/highPriorityBannerEnabled",h);}},_identicalRows:function(r,a){if((r.NotificationTypeId===a.NotificationTypeId)&&(r.PriorityDefault===a.PriorityDefault)&&(r.DoNotDeliver===a.DoNotDeliver)&&(r.DoNotDeliverMob===a.DoNotDeliverMob)){return true;}return false;}});},false);
sap.ui.predefine('sap/ushell/components/shell/Notifications/Settings.view',function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.Notifications.Settings",{createContent:function(c){var t=this,n,T,s,v,h,r=sap.ushell.resources.i18n;n=new sap.m.Table("notificationSettingsTable",{backgroundDesign:sap.m.BackgroundDesign.Transparent,showSeparators:sap.m.ListSeparators.All,columns:[new sap.m.Column({header:new sap.m.Text({text:r.getText("notificationType_column"),tooltip:r.getText("notificationType_columnTooltip")}),vAlign:"Middle",hAlign:"Left"}),new sap.m.Column({header:new sap.m.Text({text:r.getText("iOSNotification_column"),tooltip:r.getText("iOSNotification_columnTooltip")}),visible:"{/flags/mobileNotificationsEnabled}",minScreenWidth:"Tablet",demandPopin:true,vAlign:"Middle",hAlign:"Left"}),new sap.m.Column({header:new sap.m.Text({text:r.getText("highNotificationsBanner_column"),tooltip:r.getText("highNotificationsBanner_columnTooltip")}),minScreenWidth:"Tablet",demandPopin:true,hAlign:"Left"}),new sap.m.Column({header:new sap.m.Text({text:r.getText("Notifications_Settings_Show_Type_column"),tooltip:r.getText("notificationTypeEnable_columnTooltip")}),vAlign:"Middle",hAlign:"Left"})]});n.setFixedLayout(false);T=new sap.m.ColumnListItem({cells:[new sap.m.Label({text:"{NotificationTypeDesc}"}),new sap.m.CheckBox({selected:{parts:["DoNotDeliverMob"],formatter:function(d){return!d;}},select:function(e){t.getController().setControlDirtyFlag.apply(this);var p=e.getSource().getBindingContext().sPath;if(e.mParameters.selected===true){t.getModel().setProperty(p+"/DoNotDeliverMob",false);}else{t.getModel().setProperty(p+"/DoNotDeliverMob",true);}}}),new sap.m.CheckBox({select:function(e){t.getController().setControlDirtyFlag.apply(this);var p=e.getSource().getBindingContext().sPath;if(e.mParameters.selected===true){t.getModel().setProperty(p+"/PriorityDefault","40-HIGH");}else{t.getModel().setProperty(p+"/PriorityDefault","");}},selected:{parts:["PriorityDefault"],formatter:function(p){t.getController().setControlDirtyFlag.apply(this);if(p==="40-HIGH"){return true;}return false;}}}),new sap.m.Switch({state:{parts:["DoNotDeliver"],formatter:function(d){return!d;}},customTextOn:" ",customTextOff:" ",select:function(e){t.getController().setControlDirtyFlag.apply(this);},change:function(e){var N=e.getParameter("state"),p=e.getSource().getBindingContext().sPath;t.getModel().setProperty(p+"/DoNotDeliver",!N);t.getController().setControlDirtyFlag.apply(this);}})]});n.bindAggregation("items",{path:"/rows",template:T,sorter:new sap.ui.model.Sorter("NotificationTypeDesc")});v=new sap.m.VBox();s=this.createSwitchControlBar();h=new sap.m.VBox();h.addStyleClass("sapContrastPlus");h.addItem(s);v.addItem(h);v.addItem(n);return[v];},createSwitchControlBar:function(){var d,D,o,p,e,E,s,r=sap.ushell.resources.i18n,a=sap.ui.Device.system,b=a.desktop||a.tablet||a.combi;s=new sap.m.FlexBox('notificationSettingsSwitchBar');d=new sap.m.Switch("doNotDisturbSwitch",{tooltip:r.getText("showAlertsForHighNotifications_tooltip"),state:"{/flags/highPriorityBannerEnabled}",customTextOn:r.getText("Yes"),customTextOff:r.getText("No"),mode:sap.ui.model.BindingMode.TwoWay}).addAriaLabelledBy(D);D=new sap.m.Label("doNotDisturbLabel",{text:r.getText("Show_High_Priority_Alerts_title")});o=new sap.m.HBox("notificationDoNotDisturbHBox",{items:[d,D]});s.addItem(o);if(b===true){p=new sap.m.Switch("enablePreviewSwitch",{tooltip:r.getText("showNotificationsPreview_tooltip"),state:"{/flags/previewNotificationEnabled}",customTextOn:r.getText("Yes"),customTextOff:r.getText("No"),mode:sap.ui.model.BindingMode.TwoWay}).addAriaLabelledBy(e);e=new sap.m.Label("enablePreviewLabel",{text:r.getText("Show_Preview_in_Home_Page_title")});E=new sap.m.FlexBox({items:[p,e]});s.addItem(E);}return s;},getNoDataUI:function(){var n,N,o,a,r=sap.ushell.resources.i18n;if(n===undefined){N=new sap.ui.core.Icon("notificationSettingsNoDataIcon",{size:"5rem",src:"sap-icon://message-information"});o=new sap.m.Text("notificationSettingsNoDataTextHeader",{text:r.getText("noNotificationTypesEnabledHeader_message")}).setTextAlign(sap.ui.core.TextAlign.Center);a=new sap.m.Text("notificationSettingsNoDataText",{text:r.getText("noNotificationTypesEnabled_message")}).setTextAlign(sap.ui.core.TextAlign.Center);n=new sap.m.VBox("notificationSettingsNoDataInnerBox",{items:[N,o,a]});}return n;},getControllerName:function(){return"sap.ushell.components.shell.Notifications.Settings";}});},false);
sap.ui.predefine('sap/ushell/components/shell/Search/Component',['sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/homepage/ComponentKeysHandler','sap/ushell/utils','sap/m/Dialog','sap/m/Button','sap/m/Text'],function(r,U,C,u,D,B,T){"use strict";return U.extend("sap.ushell.components.shell.Search.Component",{metadata:{version:"1.53.0-SNAPSHOT",library:"sap.ushell.components.shell.search",dependencies:{libs:["sap.m","sap.ui.layout"]}},createContent:function(){var s=sap.ushell.Container.getRenderer("fiori2").getShellController(),S=s.getView(),o=(S.getViewData()?S.getViewData().config:{})||{};"use strict";var t=this;var b=(o.enableSearch!==false);if(b){var _=function(i){if(!t._searchShellHelperDeferred){t._searchShellHelperDeferred=jQuery.Deferred();sap.ui.require(['sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader'],function(){var c=sap.ui.require('sap/ushell/renderers/fiori2/search/SearchShellHelper');if(i){c.init();}t._searchShellHelperDeferred.resolve(c);});}return t._searchShellHelperDeferred;};var a=sap.ushell.Container.getRenderer("fiori2").addHeaderEndItem("sap.ushell.ui.shell.ShellHeadItem",{id:"sf",tooltip:"{i18n>searchbox_tooltip}",text:"{i18n>searchBtn}",ariaLabel:"{i18n>searchbox_tooltip}",icon:sap.ui.core.IconPool.getIconURI("search"),accessKey:"f",visible:true,showSeparator:false,press:function(e){_(false).done(function(c){c.onShellSearchButtonPressed(e);});}},true,false);if(o.openSearchAsDefault){_(true).done(function(c){c.setDefaultOpen(true);});}t.oHashChanger=sap.ui.core.routing.HashChanger.getInstance();t.oHashChanger.attachEvent("shellHashChanged",function(c){var h=c.mParameters;setTimeout(function(){sap.ui.require(['sap/ushell/renderers/fiori2/search/HashChangeHandler'],function(H){H.handle(h);});},6000);});a.addEventDelegate({onsapskipforward:function(e){e.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onsapskipback:function(e){e.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onAfterRendering:function(){jQuery("#sf").attr("aria-pressed",false);}});S.aDanglingControls.push(a);}sap.ui.getCore().getEventBus().publish("shell","searchCompLoaded",{delay:0});},exit:function(){}});});
sap.ui.predefine('sap/ushell/components/shell/ShellElements/Component',['sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/homepage/ComponentKeysHandler','sap/ushell/utils','sap/ushell/EventHub'],function(r,U,C,u,E){"use strict";var s=sap.ushell.Container.getRenderer("fiori2").getShellController(),S=s.getView();return U.extend("sap.ushell.components.shell.ShellElements.Component",{metadata:{version:"1.53.0-SNAPSHOT",library:"sap.ushell.components.shell.ShellElements",dependencies:{libs:["sap.m"]}},createContent:function(){var c=this.getComponentData().config;this.oDefConfig={};this.oDefConfig=jQuery.extend(this.oDefConfig,c);sap.ui.getCore().getEventBus().subscribe("shell","notificationsCompLoaded",this._handleNotificationsCompLoaded,this);sap.ui.getCore().getEventBus().subscribe("shell","userImageCompLoaded",this._handleUserImageCompLoaded,this);sap.ui.getCore().getEventBus().subscribe("shell","meAreaCompLoaded",this._handleMeAreaCompLoaded,this);this._startComponentLoadSequence();},_startComponentLoadSequence:function(){function g(){return S.getModel().getProperty('/currentState/stateName');}if(u.isNotificationsEnabled()&&g()!=="lean"){sap.ui.getCore().getEventBus().publish("shell","loadNotificationsComponent");}else{this._handleNotificationsCompLoaded(undefined,undefined,{delay:0});}},_handleNotificationsCompLoaded:function(c,e,d){function g(){return S.getModel().getProperty('/currentState/stateName');}function i(){var v=S.getViewData()||{},o=v.config||{};return o.enableUserImage&&g()!=="headerless";}if(i()){if(!d||d.delay<=0){sap.ui.getCore().getEventBus().publish("shell","loadUserImageComponent");}else{setTimeout(function(){sap.ui.getCore().getEventBus().publish("shell","loadUserImageComponent");},d.delay);}}else{this._handleUserImageCompLoaded(undefined,undefined,{delay:0});}},_handleUserImageCompLoaded:function(c,e,d){var a=S.getModel().getProperty('/currentState/stateName'),l=true;if(a==="headerless"){l=false;}if(l){if(!d||d.delay<=0){sap.ui.getCore().getEventBus().publish("shell","loadMeAreaComponent");}else{setTimeout(function(){sap.ui.getCore().getEventBus().publish("shell","loadMeAreaComponent");},d.delay);}}else{this._handleMeAreaCompLoaded(undefined,undefined,{delay:0});}},_handleMeAreaCompLoaded:function(c,e,d){E.emit("ShellComplete");},exit:function(){sap.ui.getCore().getEventBus().unsubscribe("shell","notificationsCompLoaded",this._handleNotificationsCompLoaded,this);sap.ui.getCore().getEventBus().unsubscribe("shell","userImageCompLoaded",this._handleUserImageCompLoaded,this);sap.ui.getCore().getEventBus().unsubscribe("shell","meAreaCompLoaded",this._handleMeAreaCompLoaded,this);}});});
sap.ui.predefine('sap/ushell/components/shell/UserImage/Component',['sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/homepage/ComponentKeysHandler','sap/ushell/utils','sap/m/Dialog','sap/m/Button','sap/m/Text','sap/m/Link','sap/ui/layout/VerticalLayout','sap/m/FlexBox','sap/ui/core/IconPool','sap/ui/Device','sap/base/Log'],function(r,U,C,u,D,B,T,L,V,F,I,a,l){"use strict";var s;return U.extend("sap.ushell.components.shell.UserImage.Component",{metadata:{version:"1.60.40",library:"sap.ushell.components.shell.UserImage",dependencies:{libs:["sap.m","sap.ui.layout"]}},createContent:function(){var S;s=sap.ushell.Container.getRenderer("fiori2")._oShellView;S=(s.getViewData()?s.getViewData().config:{})||{};this.loadUserImage();var o=sap.ushell.Container.getUser();if(S.enableUserImgConsent==true&&o.getImageConsent()==undefined){this._showUserConsentPopup();}sap.ui.getCore().getEventBus().publish("shell","userImageCompLoaded",{delay:0});},_showUserConsentPopup:function(){var t=this;var b=sap.ui.getCore().getConfiguration().getRTL()?'Right':'Left';var d,f,c,e;var y=new B('yesButton',{text:r.i18n.getText("DisplayImg"),type:"Emphasized",press:function(){t.updateUserImage(true);d.close();}});var n=new B('noButton',{text:r.i18n.getText("DontDisplayImg"),press:function(){t.updateUserImage(false);d.close();}});d=new D("userConsentDialog",{title:r.i18n.getText("userImageConsentDialogTitle"),modal:true,stretch:a.system.phone,buttons:[y,n],afterClose:function(){d.destroy();}}).addStyleClass('sapUshellUserConsentDialog');var g=new T({text:r.i18n.getText("userImageConsentDialogTermsOfUse")}).addStyleClass('sapUshellUserConsentDialogTerms');var h=new T({text:r.i18n.getText("userImageConsentText"),textAlign:b}).addStyleClass('sapUshellUserConsentDialogText');var i=new L({text:r.i18n.getText("userImageConsentDialogShowTermsOfUse"),textAlign:b,press:function(){var k=e.getVisible();if(k){e.setVisible(false);i.setText(r.i18n.getText("userImageConsentDialogShowTermsOfUse"));}else{i.setText(r.i18n.getText("userImageConsentDialogHideTermsOfUse"));e.setVisible(true);}}.bind(this)}).addAriaLabelledBy(h);f=new F({alignItems:'Center',direction:'Row',items:[h]}).addStyleClass('sapUshellUserConsentDialogBox');c=new F({alignItems:'Center',direction:'Row',items:[i]}).addStyleClass('sapUshellUserConsentDialogBox').addStyleClass('sapUshellUserConsentDialogLink');e=new F({alignItems:'Center',direction:'Row',items:[g]}).addStyleClass('ushellUserImgConsentTermsOfUseFlexBox');e.setVisible(false);var j=new V('userConsentDialogLayout',{content:[f,c,e]});d.addContent(j);d.open();},loadUserImage:function(){var o=sap.ushell.Container.getUser(),i=o.getImage();if(i){this._setUserImage(i);}o.attachOnSetImage(this._setUserImage.bind(this));},_setUserImage:function(p){var b=typeof p==='string'?p:p.mParameters,i=true;if(b&&typeof b==='string'){i=false;}else if(!jQuery.isEmptyObject(b)){i=false;}var c=I.getIconURI("person-placeholder"),d=I.getIconURI("account");var h={'Cache-Control':'no-cache, no-store, must-revalidate','Pragma':'no-cache','Expires':'0'};if(!i){jQuery.ajax({url:b,headers:h,success:function(){s.getModel().setProperty("/userImage/personPlaceHolder",b);s.getModel().setProperty("/userImage/account",b);},error:function(){l.error("Could not load user image from: "+b,"","sap.ushell.renderers.fiori2.Shell.view");var o=sap.ushell.Container.getUser();o.setImage("");}});}else{s.getModel().setProperty("/userImage/personPlaceHolder",c);s.getModel().setProperty("/userImage/account",d);}},updateUserImage:function(i){var o=sap.ushell.Container.getUser(),d=new jQuery.Deferred(),b;this.userInfoService=sap.ushell.Container.getService("UserInfo");if(i!=undefined){o.setImageConsent(i);b=this.userInfoService.updateUserPreferences(o);b.done(function(){o.resetChangedProperties();d.resolve();}.bind(this));}else{d.reject(i+"is undefined");}},exit:function(){}});});
sap.ui.predefine('sap/ushell/components/shell/defaults/Component',['sap/ushell/components/LifeCycleWrapper','sap/ushell/resources','sap/ui/core/Component','sap/ushell/components/homepage/ComponentKeysHandler'],function(L,r,C,a){"use strict";return C.extend("sap.ushell.components.shell.defaults.Component",{metadata:{version:"1.53.0-SNAPSHOT",library:"sap.ushell.components.shell.defaults",dependencies:{libs:["sap.m"]}},init:function(){var c=this.getComponentData().config||{};var p=[{name:"ShellElements",launchData:{on:[{sender:"shell",signal:"FLP-FMP"}]},run:{loadDefaultDependencies:false,enabled:true,ui5ComponentName:"sap.ushell.components.shell.ShellElements",url:jQuery.sap.getResourcePath("sap/ushell/components/shell/ShellElements"),applicationConfiguration:{enabled:true}}},{name:"Notifications",launchData:{excludedStates:["lean","lean-home"],on:[{sender:"shell",signal:"loadNotificationsComponent"}]},run:{loadDefaultDependencies:false,enabled:true,ui5ComponentName:"sap.ushell.components.shell.Notifications",url:jQuery.sap.getResourcePath("sap/ushell/components/shell/Notifications"),applicationConfiguration:{enabled:true}}},{name:"MeArea",launchData:{delay:60000,on:[{sender:"shell",signal:"loadMeAreaComponent"}]},run:{loadDefaultDependencies:false,enabled:true,ui5ComponentName:"sap.ushell.components.shell.MeArea",url:jQuery.sap.getResourcePath("sap/ushell/components/shell/MeArea"),applicationConfiguration:{enabled:true}}},{name:"UserImage",launchData:{on:[{sender:"shell",signal:"loadUserImageComponent"}]},run:{loadDefaultDependencies:false,enabled:true,ui5ComponentName:"sap.ushell.components.shell.UserImage",url:jQuery.sap.getResourcePath("sap/ushell/components/shell/UserImage"),applicationConfiguration:{enabled:true}}},{name:"Search",launchData:{excludedStates:["lean","lean-home"],on:[{sender:"shell",signal:"FLP-FMP"}]},run:{loadDefaultDependencies:false,enabled:true,ui5ComponentName:"sap.ushell.components.shell.Search",url:jQuery.sap.getResourcePath("sap/ushell/components/shell/Search"),applicationConfiguration:{enabled:true}}}];p.forEach(function(P){if(c[P.name]){var R=c[P.name],m;m=jQuery.extend(true,{},P,R);if(P.run.applicationConfiguration.enabled){L.createLifeCycleWrapperShell(m);}}else{L.createLifeCycleWrapperShell(P);}});},exit:function(){}});});
sap.ui.predefine('sap/ushell/components/tiles/action/ActionTile.controller',['sap/ushell/components/tiles/utils'],function(u){"use strict";sap.ui.getCore().loadLibrary("sap.m");sap.ui.controller("sap.ushell.components.tiles.action.ActionTile",{onInit:function(){var v=this.getView();var V=v.getViewData();var r=u.getResourceBundleModel();var t=V.chip;var c=u.getActionConfiguration(t);var m;var a=this;function f(s,S){var b=r.getResourceBundle(),R=b.getText("configuration.semantic_object")+":\n"+s+"\n\n"+b.getText("configuration.semantic_action")+":\n"+S;return R;}v.setModel(r,"i18n");m=new sap.ui.model.json.JSONModel({config:c,displayText:f(c.semantic_object,c.semantic_action)});v.setModel(m);if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var C=u.getConfigurationUi(a.getView(),"sap.ushell.components.tiles.action.Configuration");t.configurationUi.attachCancel(this.onCancelConfiguration.bind(null,C));t.configurationUi.attachSave(this.onSaveConfiguration.bind(this,C,f));return C;}.bind(this));v.byId("actionTile").setTooltip(r.getResourceBundle().getText("edit_configuration.tooltip"));}},onPress:function(e){var t=this.getView().getViewData().chip;if(t.configurationUi.isEnabled()){t.configurationUi.display();}},onSaveConfiguration:function(c,f){var d=jQuery.Deferred(),m=c.getModel(),t=m.getProperty("/tileModel"),T=c.getViewData().chip;function l(E){jQuery.sap.log.warning(E,null,"sap.ushell.components.tiles.action.ActionTile.controller");d.reject(E);}var r=u.checkTMInputOnSaveConfig(c);if(r){d.reject("mandatory_fields_missing");return d.promise();}if(u.tableHasDuplicateParameterNames(m.getProperty("/config/rows"))){var b=u.getResourceBundleModel().getResourceBundle();d.reject(b.getText("configuration.signature.uniqueParamMessage.text"));}else{var F=m.getProperty("/config/formFactorConfigDefault")?undefined:u.buildFormFactorsObject(m);var M=u.getMappingSignatureString(m.getProperty("/config/rows"),m.getProperty("/config/isUnknownAllowed"));var o=u.getMappingSignature(m.getProperty("/config/rows"),m.getProperty("/config/isUnknownAllowed"));var a={semantic_object:jQuery.trim(m.getProperty("/config/semantic_object"))||"",semantic_action:jQuery.trim(m.getProperty("/config/semantic_action"))||"",display_title_text:jQuery.trim(m.getProperty("/config/display_title_text"))||"",url:jQuery.trim(m.getProperty("/config/url"))||"",ui5_component:jQuery.trim(m.getProperty("/config/ui5_component"))||"",navigation_provider:jQuery.trim(m.getProperty("/config/navigation_provider")),navigation_provider_role:jQuery.trim(m.getProperty("/config/navigation_provider_role"))||"",navigation_provider_instance:jQuery.trim(m.getProperty("/config/navigation_provider_instance"))||"",target_application_id:jQuery.trim(m.getProperty("/config/target_application_id"))||"",target_application_alias:jQuery.trim(m.getProperty("/config/target_application_alias"))||"",transaction:{code:jQuery.trim(m.getProperty("/config/transaction/code"))},web_dynpro:{application:jQuery.trim(m.getProperty("/config/web_dynpro/application")),configuration:jQuery.trim(m.getProperty("/config/web_dynpro/configuration"))},target_system_alias:jQuery.trim(m.getProperty("/config/target_system_alias")),display_info_text:jQuery.trim(m.getProperty("/config/display_info_text")),form_factors:F,mapping_signature:M,signature:o};var e=T.bag.getBag('tileProperties');e.setText('display_title_text',a.display_title_text);T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(a)},function(){var C=u.getActionConfiguration(T,false);var g=u.getActionConfiguration(T,true);m=new sap.ui.model.json.JSONModel({config:C,tileModel:t});c.setModel(m);t.setData({config:g,displayText:f(g.semantic_object,g.semantic_action)},false);e.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");d.resolve();},l);},l);}return d.promise();},onCancelConfiguration:function(c){var v=c.getViewData();var m=c.getModel();var t=m.getProperty("/tileModel");var T=v.chip;var C=u.getActionConfiguration(T,false);c.getModel().setData({config:C,tileModel:t},false);}});},true);
sap.ui.predefine('sap/ushell/components/tiles/action/Configuration.controller',['sap/ushell/components/tiles/utils'],function(u){"use strict";sap.ui.controller("sap.ushell.components.tiles.action.Configuration",{sEnterValuePlaceHolder:"",sDuplicateErrorMsg:"",sDuplicateErrorTitle:"",sInvalidParmMsg:"",aDefaultObjects:[{obj:"",name:""},{obj:"*",name:"*"}],onConfigurationInputChange:function(c){u.checkTMInput(this.getView(),c);},onInit:function(){var v=this.getView();var s=v.byId("semantic_objectInput");var r=v.byId("navigation_provider_roleInput");var i=v.byId("navigation_provider_instanceInput");var a=v.byId("target_application_aliasInput");var A=v.byId("semantic_actionInput");var t=v.byId("targetTypeInput");var R=u.getResourceBundleModel();v.setModel(R,"i18n");v.setViewName("sap.ushell.components.tiles.action.Configuration");u.createSemanticObjectModel(this,s,this.aDefaultObjects);u.createRoleModel(this,r,i);u.createAliasModel(this,a);u.createActionModel(this,A);u.createNavigationProviderModel(this,t);s.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/semantic_object",V);});r.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_provider_role",V);u.updateAliasModel(v,a);});i.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_provider_instance",V);});a.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/target_application_alias",V);});var b=R.getResourceBundle();this.sEnterValuePlaceHolder=b.getText("configuration.signature.table.valueFieldLbl");this.sDuplicateErrorMsg=b.getText("configuration.signature.uniqueParamMessage.text");this.sDuplicateErrorTitle=b.getText("configuration.signature.uniqueParamMessage.title");this.sInvalidParmMsg=b.getText("configuration.signature.invalidParamMessage.text");},handleMandatoryChange:function(m){var i=m.getParameter('id');var p=sap.ui.getCore().byId(i).getParent().getCells();var I=m.getParameter('checked');if(I){p[2].setEnabled(true);p[2].setPlaceholder(this.sEnterValuePlaceHolder);p[4].setEnabled(false);p[4].setValue("");p[4].setPlaceholder("");p[3].setEnabled(true);}else{p[2].setEnabled(false);p[2].setValue("");p[2].setPlaceholder("");p[4].setEnabled(true);p[4].setPlaceholder(this.sEnterValuePlaceHolder);p[3].setEnabled(false);p[3].setChecked(false);}},addRow:function(){var v=this.getView();var m=v.getModel();var r=m.getProperty('/config/rows');var n=u.getEmptyRowObj();r.push(n);m.setProperty('/config/rows',r);},deleteRow:function(){var v=this.getView();var m=v.getModel();var r=m.getProperty('/config/rows');var t=v.byId("mappingSignatureTable");var s=t.getSelectedIndices();var S=s.sort(function(a,b){return b-a;}).slice();for(var i=0;i<S.length;i++){t.removeSelectionInterval(S[i],S[i]);r.splice(S[i],1);}m.setProperty('/config/rows',r);},checkDuplicateNames:function(c){var m=this.getView().getModel();var r=m.getProperty('/config/rows');var n=sap.ui.getCore().byId(c.getParameter('id'));var N=c.getParameter('newValue');if(N!=""&&!(/^[\w-/]+$/.test(N))){n.setValueState(sap.ui.core.ValueState.Error);sap.m.MessageBox.alert(this.sInvalidParmMsg,this.focusNameField.bind(n),this.sDuplicateErrorTitle);}if(u.tableHasDuplicateParameterNames(r)){n.setValueState(sap.ui.core.ValueState.Error);sap.m.MessageBox.alert(this.sDuplicateErrorMsg,this.focusNameField.bind(n),this.sDuplicateErrorTitle);}else{n.setValueState(sap.ui.core.ValueState.None);}},focusNameField:function(){this.focus();},onValueHelpRequest:function(e){u.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){u.actionSelectOnValueHelpRequest(this,e);},onRoleValueHelpRequest:function(e){u.roleSelectOnValueHelpRequest(this,e);},onInstanceValueHelpRequest:function(e){u.instanceSelectOnValueHelpRequest(this,e);},instanceSuggest:function(e){u.instanceSuggest(this,e);},aliasSuggest:function(e){u.aliasSuggest(this,e);},onAliasValueHelpRequest:function(e){u.applicationAliasSelectOnValueHelpRequest(this,e);},onFormFactorChange:function(){var m=this.getView().getModel();m.setProperty('/config/formFactorConfigDefault',false);},onApplicationTypeChange:function(e){var p=e.getParameters();if(p.selectedItem){u.displayApplicationTypeFields(p.selectedItem.getKey(),this.getView());}}});},true);
sap.ui.predefine('sap/ushell/components/tiles/applauncher/Configuration.controller',['sap/ushell/components/tiles/utils'],function(u){"use strict";sap.ui.controller("sap.ushell.components.tiles.applauncher.Configuration",{onConfigurationInputChange:function(c){u.checkInput(this.getView(),c);},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),t=v.byId("targetUrl"),s=v.byId("navigation_semantic_objectInput"),a=v.byId("navigation_semantic_actionInput"),r=u.getResourceBundleModel();v.setModel(r,"i18n");var b=r.getResourceBundle();v.setViewName("sap.ushell.components.tiles.applauncher.Configuration");u.createSemanticObjectModel(this,s,this.aDefaultObjects);u.createActionModel(this,a);s.attachChange(function(C){var V=C.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V);});function c(U){return!U;}t.bindProperty("enabled",{formatter:c,path:"/config/navigation_use_semantic_object"});var i=new sap.ui.core.ListItem({key:"URL",text:b.getText("configuration.tile_actions.table.target_type.url")});v.byId("targetTypeCB").addItem(i);i=new sap.ui.core.ListItem({key:"INT",text:b.getText("configuration.tile_actions.table.target_type.intent")});v.byId("targetTypeCB").addItem(i);},onAfterRendering:function(){u.updateMessageStripForOriginalLanguage(this.getView());},onValueHelpRequest:function(e){u.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){u.actionSelectOnValueHelpRequest(this,e,false);},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a);u.checkInput(this.getView(),e);},onIconValueHelpRequest:function(e){u.iconSelectOnValueHelpRequest(this,e,false);},onSelectIconClose:function(){u.onSelectIconClose(this.getView());},onSelectIconOk:function(){u.onSelectIconOk(this.getView());},handleTargetTypeChange:function(t){u.onTargetTypeChange(t);},onTileActionValueHelp:function(e){u.objectSelectOnValueHelpRequest(this,e,true);},onTileActionIconValueHelp:function(e){u.iconSelectOnValueHelpRequest(this,e,true);},addRow:function(){u.addTileActionsRow(this.getView());},deleteRow:function(){u.deleteTileActionsRow(this.getView());}});},true);
sap.ui.predefine('sap/ushell/components/tiles/applauncher/StaticTile.controller',['sap/ushell/components/tiles/utils','sap/ushell/components/tiles/utilsRT','sap/ushell/components/applicationIntegration/AppLifeCycle','sap/ushell/Config',"sap/ushell/utils/WindowUtils"],function(u,a,A,C,W){"use strict";sap.ui.getCore().loadLibrary("sap.m");sap.ui.controller("sap.ushell.components.tiles.applauncher.StaticTile",{_aDoableObject:{},onInit:function(){var s=this.getView(),v=s.getViewData(),t=v.chip,c=a.getConfiguration(t,t.configurationUi.isEnabled(),false),m,k,K,b=this,N=c.navigation_target_url,S,U,h;this.oShellModel=A.getElementsModel();S=t.url.getApplicationSystem();if(S){U=sap.ushell.Container.getService("URLParsing");if(U.isIntentUrl(N)){h=U.parseShellHash(N);if(!h.params){h.params={};}h.params["sap-system"]=S;N="#"+U.constructShellHash(h);}else{N+=((N.indexOf("?")<0)?"?":"&")+"sap-system="+S;}}this.navigationTargetUrl=N;m=new sap.ui.model.json.JSONModel({sizeBehavior:C.last("/core/home/sizeBehavior"),mode:c["display_mode"]||sap.m.GenericTileMode.ContentMode,config:c,nav:{navigation_target_url:(t.configurationUi&&t.configurationUi.isEnabled()?"":N)},search:{display_highlight_terms:[]}});s.setModel(m);this._aDoableObject=C.on("/core/home/sizeBehavior").do(function(g){m.setProperty("/sizeBehavior",g);});if(t.types){t.types.attachSetType(function(T){if(b.tileType!=T){var m=b.getView().getModel();if(T==='link'){m.setProperty('/mode',sap.m.GenericTileMode.LineMode);}else{m.setProperty('/mode',m.getProperty("/config/display_mode")||sap.m.GenericTileMode.ContentMode);}b.tileType=T;}});}if(!this.tileType){this.tileType="tile";}if(t.search){k=s.getModel().getProperty("/config/display_search_keywords");K=k.split(/[, ]+/).filter(function(n,i){return n&&n!=="";});if(c.display_title_text&&c.display_title_text!==""&&K.indexOf(c.display_title_text)===-1){K.push(c.display_title_text);}if(c.display_subtitle_text&&c.display_subtitle_text!==""&&K.indexOf(c.display_subtitle_text)===-1){K.push(c.display_subtitle_text);}if(c.display_info_text&&c.display_info_text!==""&&K.indexOf(c.display_info_text)===-1){K.push(c.display_info_text);}t.search.setKeywords(K);t.search.attachHighlight(function(H){s.getModel().setProperty("/search/display_highlight_terms",H);});}if(t.bag&&t.bag.attachBagsUpdated){t.bag.attachBagsUpdated(function(g){if(g.indexOf("tileProperties")>-1){u._updateTilePropertiesTexts(s,t.bag.getBag('tileProperties'));}});}if(t.configuration&&t.configuration.attachConfigurationUpdated){t.configuration.attachConfigurationUpdated(function(g){if(g.indexOf("tileConfiguration")>-1){u._updateTileConfiguration(s,t.configuration.getParameterValueAsString("tileConfiguration"));}});}if(t.preview){t.preview.setTargetUrl(N);t.preview.setPreviewIcon(c.display_icon_url);t.preview.setPreviewTitle(c.display_title_text);if(t.preview.setPreviewSubtitle&&typeof t.preview.setPreviewSubtitle==='function'){t.preview.setPreviewSubtitle(c.display_subtitle_text);}}if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var o=u.getConfigurationUi(s,"sap.ushell.components.tiles.applauncher.Configuration");t.configurationUi.attachCancel(b.onCancelConfiguration.bind(null,o));t.configurationUi.attachSave(b.onSaveConfiguration.bind(null,o));return o;});this.getView().getContent()[0].setTooltip(u.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}if(t.actions){var d=c.actions,e;if(d){e=d.slice();}else{e=[];}var f=a.getTileSettingsAction(m,this.onSaveRuntimeSettings.bind(this));e.push(f);t.actions.setActionsProvider(function(){return e;});}},onExit:function(){this._aDoableObject.off();},onPress:function(e){var s=this.getView(),v=s.getViewData(),t=v.chip,c=s.getModel().getProperty("/config"),r={},R=sap.ushell.Container.getRenderer("fiori2");if(e.getSource().getScope&&e.getSource().getScope()===sap.m.GenericTileScope.Display){if(t.configurationUi.isEnabled()){t.configurationUi.display();}else if(this.navigationTargetUrl){if(this.navigationTargetUrl[0]==='#'){hasher.setHash(this.navigationTargetUrl);}else{r.title=c.display_title_text;r.appType="App";r.url=c.navigation_target_url;r.appId=c.navigation_target_url;R.logRecentActivity(r);W.openURL(this.navigationTargetUrl,'_blank');}}}},onSaveRuntimeSettings:function(s){var v=s.getModel(),t=this.getView().getViewData().chip,c=this.getView().getModel().getProperty("/config");c.display_title_text=v.getProperty('/title');c.display_subtitle_text=v.getProperty('/subtitle');c.display_info_text=v.getProperty('/info');c.display_search_keywords=v.getProperty('/keywords');var b=t.bag.getBag('tileProperties');b.setText('display_title_text',c.display_title_text);b.setText('display_subtitle_text',c.display_subtitle_text);b.setText('display_info_text',c.display_info_text);b.setText('display_search_keywords',c.display_search_keywords);function l(e){jQuery.sap.log.error(e,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");}b.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");this.getView().getModel().setProperty('/config/display_title_text',c.display_title_text);this.getView().getModel().setProperty('/config/display_subtitle_text',c.display_subtitle_text);this.getView().getModel().setProperty('/config/display_info_text',c.display_info_text);this.getView().getModel().setProperty('/config/display_search_keywords',c.display_search_keywords);this.getView().getModel().refresh();}.bind(this),l);},onSaveConfiguration:function(c){var d=jQuery.Deferred();var m=c.getModel();var t=m.getProperty("/tileModel");var T=c.getViewData().chip;var b=u.tileActionsRows2TileActionsArray(m.getProperty("/config/tile_actions_rows"));var e={display_icon_url:m.getProperty("/config/display_icon_url"),navigation_use_semantic_object:m.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:m.getProperty("/config/navigation_target_url"),navigation_semantic_object:jQuery.trim(m.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:jQuery.trim(m.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:jQuery.trim(m.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:m.getProperty("/config/display_search_keywords")};var r=u.checkInputOnSaveConfig(c);if(!r){r=u.checkTileActions(c);}if(r){d.reject("mandatory_fields_missing");return d.promise();}if(e.navigation_use_semantic_object){e.navigation_target_url=a.getSemanticNavigationUrl(e);m.setProperty("/config/navigation_target_url",e.navigation_target_url);}var f=T.bag.getBag('tileProperties');f.setText('display_title_text',m.getProperty("/config/display_title_text"));f.setText('display_subtitle_text',m.getProperty("/config/display_subtitle_text"));f.setText('display_info_text',m.getProperty("/config/display_info_text"));f.setText('display_search_keywords',e.display_search_keywords);var g=T.bag.getBag('tileNavigationActions');u.populateTileNavigationActionsBag(g,b);function l(E,o){jQuery.sap.log.error(E,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");d.reject(E,o);}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(e)},function(){var o=a.getConfiguration(T,false,false),h=a.getConfiguration(T,true,false),m=new sap.ui.model.json.JSONModel({config:o,nav:{navigation_target_url:""},tileModel:t});c.setModel(m);t.setData({config:h,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(o.navigation_target_url);T.preview.setPreviewIcon(o.display_icon_url);T.preview.setPreviewTitle(o.display_title_text);if(T.preview.setPreviewSubtitle&&typeof T.preview.setPreviewSubtitle==='function'){T.preview.setPreviewSubtitle(o.display_subtitle_text);}}f.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(o.display_title_text,function(){d.resolve();},l);}else{d.resolve();}},l);g.save(function(){jQuery.sap.log.debug("property bag 'navigationProperties' saved successfully");},l);},l);return d.promise();},onCancelConfiguration:function(c){var v=c.getViewData(),m=c.getModel(),t=m.getProperty("/tileModel"),T=v.chip,o=a.getConfiguration(T,T.configurationUi.isEnabled(),false);c.getModel().setData({config:o,nav:{navigation_target_url:""},tileModel:t},false);}});},false);
sap.ui.predefine('sap/ushell/components/tiles/applauncher/StaticTile.view',["sap/m/GenericTile","sap/m/ImageContent","sap/m/Link"],function(G,I,L){"use strict";sap.ui.jsview("sap.ushell.components.tiles.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncher.StaticTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');return this.getTileControl();},getTileControl:function(){var c=this.getController();return new sap.m.GenericTile({mode:'{/mode}',header:'{/config/display_title_text}',subheader:'{/config/display_subtitle_text}',sizeBehavior:'{/sizeBehavior}',size:"Auto",tileContent:new sap.m.TileContent({size:"Auto",footer:'{/config/display_info_text}',content:new I({src:'{/config/display_icon_url}'})}),press:[c.onPress,c]});},getMode:function(){return this.getModel().getProperty("/mode");}});},false);
sap.ui.predefine('sap/ushell/components/tiles/applauncherdynamic/Configuration.controller',['sap/ushell/components/tiles/utils'],function(u){"use strict";sap.ui.controller("sap.ushell.components.tiles.applauncherdynamic.Configuration",{onConfigurationInputChange:function(c){u.checkInput(this.getView(),c);},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),a=v.byId("navigation_semantic_actionInput"),r=u.getResourceBundleModel();v.setModel(r,"i18n");var b=r.getResourceBundle();v.setViewName("sap.ushell.components.tiles.applauncherdynamic.Configuration");u.createSemanticObjectModel(this,s,this.aDefaultObjects);u.createActionModel(this,a,this.aDefaultObjects);s.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V);});a.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_action",V);});v.byId("targetUrl").bindProperty("enabled",{formatter:function(U){return!U;},path:"/config/navigation_use_semantic_object"});var i=new sap.ui.core.ListItem({key:"URL",text:b.getText("configuration.tile_actions.table.target_type.url")});v.byId("targetTypeCB").addItem(i);i=new sap.ui.core.ListItem({key:"INT",text:b.getText("configuration.tile_actions.table.target_type.intent")});v.byId("targetTypeCB").addItem(i);},onAfterRendering:function(){u.updateMessageStripForOriginalLanguage(this.getView());},onValueHelpRequest:function(e){u.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){u.actionSelectOnValueHelpRequest(this,e,false);},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a);u.checkInput(this.getView(),e);},onIconValueHelpRequest:function(e){u.iconSelectOnValueHelpRequest(this,e,false);},onSelectIconClose:function(){u.onSelectIconClose(this.getView());},onSelectIconOk:function(){u.onSelectIconOk(this.getView());},handleTargetTypeChange:function(t){u.onTargetTypeChange(t);},onTileActionValueHelp:function(e){u.objectSelectOnValueHelpRequest(this,e,true);},onTileActionIconValueHelp:function(e){u.iconSelectOnValueHelpRequest(this,e,true);},addRow:function(){u.addTileActionsRow(this.getView());},deleteRow:function(){u.deleteTileActionsRow(this.getView());}});},true);
sap.ui.predefine('sap/ushell/components/tiles/applauncherdynamic/DynamicTile.controller',["sap/ui/thirdparty/datajs","sap/ui/thirdparty/URI","sap/ushell/components/tiles/utils","sap/ushell/components/tiles/utilsRT","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/m/GenericTileMode","sap/ushell/utils/WindowUtils"],function(O,U,u,a,A,C,G,W){"use strict";sap.ui.getCore().loadLibrary("sap.m");sap.ui.controller("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{timer:null,_aDoableObject:{},oDataRequest:null,sConfigNavigationTargetUrlOld:"",REFRESH_INTERVAL_MIN:10,constructTargetUrlWithSapSystem:function(n,s){var o,h;if(s){o=sap.ushell.Container.getService("URLParsing");if(o.isIntentUrl(n)){h=o.parseShellHash(n);if(!h.params){h.params={};}h.params["sap-system"]=s;n="#"+o.constructShellHash(h);}else{n+=((n.indexOf("?")<0)?"?":"&")+"sap-system="+s;}}return n;},onInit:function(){var v=this.getView(),V=v.getViewData(),t=V.chip,c=a.getConfiguration(t,t.configurationUi.isEnabled(),false),m,k,K,b=this,N=c.navigation_target_url,s;this.sConfigNavigationTargetUrlOld=c.navigation_target_url;jQuery.sap.log.setLevel(2,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile");this.bIsRequestCompleted=false;this.oShellModel=A.getElementsModel();s=t.url.getApplicationSystem();this.navigationTargetUrl=this.constructTargetUrlWithSapSystem(N,s);m=new sap.ui.model.json.JSONModel({sizeBehavior:C.last("/core/home/sizeBehavior"),config:c,mode:c["display_mode"]||G.ContentMode,data:a.getDataToDisplay(c,{number:((t.preview&&t.preview.isEnabled())?1234:"...")}),nav:{navigation_target_url:(t.configurationUi&&t.configurationUi.isEnabled()?"":this.navigationTargetUrl)},search:{display_highlight_terms:[]}});v.setModel(m);this._aDoableObject=C.on("/core/home/sizeBehavior").do(function(S){m.setProperty("/sizeBehavior",S);});if(t.types){t.types.attachSetType(function(T){if(b.tileType!=T){var m=b.getView().getModel();if(T==='link'){m.setProperty("/mode",G.LineMode);}else{m.setProperty("/mode",m.getProperty("/config/display_mode")||G.ContentMode);}b.tileType=T;}});}if(!this.tileType){this.tileType="tile";}if(t.search){k=v.getModel().getProperty("/config/display_search_keywords");K=k.split(/[, ]+/).filter(function(n,i){return n&&n!=="";});if(c.display_title_text&&c.display_title_text!==""&&K.indexOf(c.display_title_text)===-1){K.push(c.display_title_text);}if(c.display_subtitle_text&&c.display_subtitle_text!==""&&K.indexOf(c.display_subtitle_text)===-1){K.push(c.display_subtitle_text);}if(c.display_info_text&&c.display_info_text!==""&&K.indexOf(c.display_info_text)===-1){K.push(c.display_info_text);}if(c.display_number_unit&&c.display_number_unit!==""&&K.indexOf(c.display_number_unit)===-1){K.push(c.display_number_unit);}t.search.setKeywords(K);t.search.attachHighlight(function(h){v.getModel().setProperty("/search/display_highlight_terms",h);});}if(t.bag&&t.bag.attachBagsUpdated){t.bag.attachBagsUpdated(function(g){if(g.indexOf("tileProperties")>-1){u._updateTilePropertiesTexts(v,t.bag.getBag('tileProperties'));}});}if(t.configuration&&t.configuration.attachConfigurationUpdated){t.configuration.attachConfigurationUpdated(function(g){if(g.indexOf("tileConfiguration")>-1){u._updateTileConfiguration(v,t.configuration.getParameterValueAsString("tileConfiguration"));}});}if(t.preview){t.preview.setTargetUrl(this.navigationTargetUrl);t.preview.setPreviewIcon(c.display_icon_url);t.preview.setPreviewTitle(c.display_title_text);if(t.preview.setPreviewSubtitle&&typeof t.preview.setPreviewSubtitle==='function'){t.preview.setPreviewSubtitle(c.display_subtitle_text);}}if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var o=u.getConfigurationUi(v,"sap.ushell.components.tiles.applauncherdynamic.Configuration");t.configurationUi.attachCancel(b.onCancelConfiguration.bind(null,o));t.configurationUi.attachSave(b.onSaveConfiguration.bind(null,o));return o;});this.getView().getContent()[0].setTooltip(u.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}else if(!t.preview||!t.preview.isEnabled()){if(!s){sap.ushell.Container.addRemoteSystemForServiceUrl(c.service_url);}this.bNeedsRefresh=true;this.iNrOfTimerRunning=0;}if(t.refresh){t.refresh.attachRefresh(this.refreshHandler.bind(this));}if(t.visible){t.visible.attachVisible(this.visibleHandler.bind(this));}if(t.actions){var d=c.actions,e;if(d){e=d.slice();}else{e=[];}var T=m.getProperty("/mode")===G.LineMode?"link":"tile",f=a.getTileSettingsAction(m,this.onSaveRuntimeSettings.bind(this),T);e.push(f);t.actions.setActionsProvider(function(){return e;});}sap.ui.getCore().getEventBus().subscribe("launchpad","sessionTimeout",this.stopRequests,this);},stopRequests:function(){if(this.timer){clearTimeout(this.timer);}if(this.oDataRequest){try{this.bIsAbortRequestFlow=true;this.oDataRequest.abort();}catch(e){jQuery.sap.log.warning(e.name,e.message);}this.bNeedsRefresh=true;this.bIsAbortRequestFlow=undefined;}},onExit:function(){this.stopRequests();sap.ui.getCore().getEventBus().unsubscribe("launchpad","sessionTimeout",this.stopRequests,this);this._aDoableObject.off();},onPress:function(e){var v=this.getView(),V=v.getViewData(),m=v.getModel(),t=m.getProperty("/nav/navigation_target_url"),T=V.chip,c=m.getProperty("/config"),r={},R=sap.ushell.Container.getRenderer("fiori2");if(e.getSource().getScope&&e.getSource().getScope()===sap.m.GenericTileScope.Display){if(T.configurationUi.isEnabled()){T.configurationUi.display();}else if(t){if(t[0]==='#'){hasher.setHash(t);}else{r.title=c.display_title_text;r.appType="App";r.url=c.navigation_target_url;r.appId=c.navigation_target_url;R.logRecentActivity(r);W.openURL(t,'_blank');}}}},extractData:function(d){var n,k=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];if(typeof d==="object"&&Object.keys(d).length===1){n=Object.keys(d)[0];if(jQuery.inArray(n,k)===-1){return d[n];}}return d;},onSaveRuntimeSettings:function(s){var v=this.getView(),V=v.getModel(),t=v.getViewData().chip,c=V.getProperty("/config"),S=s.getModel();c.display_title_text=S.getProperty('/title');c.display_subtitle_text=S.getProperty('/subtitle');c.display_info_text=S.getProperty('/info');c.display_search_keywords=S.getProperty('/keywords');var b=t.bag.getBag('tileProperties');b.setText('display_title_text',c.display_title_text);b.setText('display_subtitle_text',c.display_subtitle_text);b.setText('display_info_text',c.display_info_text);b.setText('display_search_keywords',c.display_search_keywords);function l(e){jQuery.sap.log.error(e,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");}b.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");V.setProperty("/config",c);V.setProperty('/data/display_title_text',c.display_title_text);V.setProperty('/data/display_subtitle_text',c.display_subtitle_text);V.setProperty('/data/display_info_text',c.display_info_text);V.refresh();},l);},onSaveConfiguration:function(c){var d=jQuery.Deferred(),m=c.getModel(),t=m.getProperty("/tileModel"),T=c.getViewData().chip,b=u.tileActionsRows2TileActionsArray(m.getProperty("/config/tile_actions_rows")),e={display_icon_url:m.getProperty("/config/display_icon_url"),display_number_unit:m.getProperty("/config/display_number_unit"),service_url:m.getProperty("/config/service_url"),service_refresh_interval:m.getProperty("/config/service_refresh_interval"),navigation_use_semantic_object:m.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:m.getProperty("/config/navigation_target_url"),navigation_semantic_object:jQuery.trim(m.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:jQuery.trim(m.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:jQuery.trim(m.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:m.getProperty("/config/display_search_keywords")};var r=u.checkInputOnSaveConfig(c);if(!r){r=u.checkTileActions(c);}if(r){d.reject("mandatory_fields_missing");return d.promise();}if(e.navigation_use_semantic_object){e.navigation_target_url=a.getSemanticNavigationUrl(e);m.setProperty("/config/navigation_target_url",e.navigation_target_url);}var f=T.bag.getBag('tileProperties');f.setText('display_title_text',m.getProperty("/config/display_title_text"));f.setText('display_subtitle_text',m.getProperty("/config/display_subtitle_text"));f.setText('display_info_text',m.getProperty("/config/display_info_text"));f.setText('display_search_keywords',e.display_search_keywords);var g=T.bag.getBag('tileNavigationActions');u.populateTileNavigationActionsBag(g,b);function l(E,o){jQuery.sap.log.error(E,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");d.reject(E,o);}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(e)},function(){var o=a.getConfiguration(T,false,false),h=a.getConfiguration(T,true,false),m=new sap.ui.model.json.JSONModel({config:o,tileModel:t});c.setModel(m);t.setData({data:h,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(o.navigation_target_url);T.preview.setPreviewIcon(o.display_icon_url);T.preview.setPreviewTitle(o.display_title_text);if(T.preview.setPreviewSubtitle&&typeof T.preview.setPreviewSubtitle==='function'){T.preview.setPreviewSubtitle(o.display_subtitle_text);}}f.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(o.display_title_text,function(){d.resolve();},l);}else{d.resolve();}},l);g.save(function(){jQuery.sap.log.debug("property bag 'navigationProperties' saved successfully");},l);},l);return d.promise();},successHandlerFn:function(r,R){var v=this.getView(),m=v.getModel(),c=m.getProperty("/config"),V=v.getViewData(),t=V.chip,s=t.url.getApplicationSystem(),d;this.oDataRequest=undefined;if(typeof R==="object"){var b=jQuery.sap.getUriParameters(r).get("$inlinecount");if(b&&b==="allpages"){R={number:R.__count};}else{R=this.extractData(R);}}else if(typeof R==="string"){R={number:R};}if(V.properties&&V.properties.info){if(typeof R==="object"){R.info=V.properties.info;}}d=a.getDataToDisplay(c,R);m.setProperty("/data",d);if(this.sConfigNavigationTargetUrlOld!==c.navigation_target_url){this.navigationTargetUrl=this.constructTargetUrlWithSapSystem(c.navigation_target_url,s);this.sConfigNavigationTargetUrlOld=this.navigationTargetUrl;}m.setProperty("/nav/navigation_target_url",a.addParamsToUrl(this.navigationTargetUrl,d));var i=c.service_refresh_interval;if(i>0){i=Math.max(i,this.REFRESH_INTERVAL_MIN);jQuery.sap.log.info("Wait "+i+" seconds before calling "+c.service_url+" again",null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");this.refeshAfterInterval(i);}},errorHandlerFn:function(m,i){var v=this.getView(),M=v.getModel(),c=M.getProperty("/config"),s=m&&m.message?m.message:m,r=u.getResourceBundleModel().getResourceBundle();this.oDataRequest=undefined;if(s==="Request aborted"){jQuery.sap.log.info("Data request from service "+c.service_url+" was aborted",null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile");}else{if(m.response){s+=" - "+m.response.statusCode+" "+m.response.statusText;}var l=i?jQuery.sap.log.warning:jQuery.sap.log.error;l("Failed to update data via service\n"+"  service URL: "+c.service_url+"\n"+"  "+s,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile");}if(!this.bIsAbortRequestFlow){M.setProperty("/data",a.getDataToDisplay(c,{number:"???",info:r.getText("dynamic_data.error"),infoState:"Critical"}));}},onCancelConfiguration:function(c,s,e){var v=c.getViewData(),m=c.getModel(),t=m.getProperty("/tileModel"),T=v.chip,o=a.getConfiguration(T,false,false);m.setData({config:o,tileModel:t},false);},prepareToLoadData:function(){var d=this.getView(),c=d.getModel().getProperty("/config"),t=d.getViewData().chip,s=c.service_url,r,g,b=this;if(!s){this.errorHandlerFn("No service URL given!",true);return;}if(/;o=([;\/?]|$)/.test(s)){s=t.url.addSystemToServiceUrl(s);}if(this.serviceUrlWithDefaults){g=new jQuery.Deferred().resolve({url:this.serviceUrlWithDefaults}).promise();}else{r=sap.ushell.Container.getService("ReferenceResolver");g=r.resolveUserDefaultParameters(s);}g.done(b.loadData.bind(b)).fail(b.errorHandlerFn.bind(b));},loadData:function(r){if(r.defaultsWithoutValue&&r.defaultsWithoutValue.length>0){this.errorHandlerFn("The service URL contains User Default(s) with no set value: "+r.defaultsWithoutValue.join(", "),true);return;}if(r.ignoredReferences&&r.ignoredReferences.length>0){this.errorHandlerFn("The service URL contains invalid Reference(s): "+r.ignoredReferences.join(", "),false);return;}var s=r.url,S,b,R,o;this.serviceUrlWithDefaults=s;R={"Cache-Control":"no-cache, no-store, must-revalidate","Pragma":"no-cache","Expires":"0","Accept-Language":(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||""};if(sap.ushell.Container){S=sap.ui.getCore().getConfiguration().getSAPLogonLanguage();if(S){R["sap-language"]=S;}b=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";o=new U(s);if(b&&!o.protocol()){R["sap-client"]=b;}}if(S&&s.indexOf("sap-language=")===-1){s=s+(s.indexOf("?")>=0?"&":"?")+"sap-language="+S;}this.oDataRequest=O.read({requestUri:s,headers:R},this.successHandlerFn.bind(this,s),this.errorHandlerFn.bind(this));},refreshTile:function(){var v=this.getView(),V=v.getViewData(),i=V.chip.visible.isVisible();if(i&&this.bNeedsRefresh){this.bNeedsRefresh=false;if(!this.oDataRequest){this.prepareToLoadData();}}},refeshAfterInterval:function(r){var t=this;this.iNrOfTimerRunning++;setTimeout(function(){t.iNrOfTimerRunning--;if(t.iNrOfTimerRunning===0){t.bNeedsRefresh=true;t.refreshTile();}},r*1000);},refreshHandler:function(){this.bNeedsRefresh=true;this.refreshTile();},visibleHandler:function(i){if(i){this.refreshTile();}else{this.stopRequests();}}});},false);
sap.ui.predefine('sap/ushell/components/tiles/applauncherdynamic/DynamicTile.view',["sap/m/GenericTile","sap/m/Link"],function(G,L){"use strict";sap.ui.jsview("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncherdynamic.DynamicTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');return this.getTileControl();},getTileControl:function(){var c=this.getController();return new G({mode:'{/mode}',header:'{/data/display_title_text}',subheader:'{/data/display_subtitle_text}',size:"Auto",sizeBehavior:'{/sizeBehavior}',tileContent:[new sap.m.TileContent({size:"Auto",footer:'{/data/display_info_text}',footerColor:{path:"/data/display_info_state",formatter:function(f){if(!sap.m.ValueColor[f]){f=sap.m.ValueColor.Neutral;}return f;}},unit:'{/data/display_number_unit}',content:[new sap.m.NumericContent({scale:'{/data/display_number_factor}',value:'{/data/display_number_value}',truncateValueTo:5,indicator:'{/data/display_state_arrow}',valueColor:{path:"/data/display_number_state",formatter:function(v){if(!sap.m.ValueColor[v]){v=sap.m.ValueColor.Neutral;}return v;}},icon:'{/data/display_icon_url}',width:'100%'})]})],press:[c.onPress,c]});},onAfterRendering:function(){var m=this.getModel(),d=m.getProperty('/data/display_info_state'),e=this.getDomRef(),a=e?e.getElementsByClassName('sapMTileCntFtrTxt')[0]:null;if(a){switch(d){case'Negative':a.classList.add('sapUshellTileFooterInfoNegative');break;case'Neutral':a.classList.add('sapUshellTileFooterInfoNeutral');break;case'Positive':a.classList.add('sapUshellTileFooterInfoPositive');break;case'Critical':a.classList.add('sapUshellTileFooterInfoCritical');break;default:return;}}},getMode:function(){return this.getModel().getProperty("/mode");}});},false);
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncher/Component',["sap/ui/core/UIComponent"],function(U){"use strict";return U.extend("sap.ushell.components.tiles.cdm.applauncher.Component",{metadata:{},createContent:function(){var c=this.getComponentData();var p=c.properties.tilePersonalization||{};var s=c.startupParameters;if(s&&s["sap-system"]){p["sap-system"]=s["sap-system"][0];}var t=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.tiles.cdm.applauncher.StaticTile",viewData:{properties:c.properties,configuration:p},async:true});t.loaded().then(function(v){this._oController=t.getController();}.bind(this));return t;},tileSetVisualProperties:function(n){if(this._oController){this._oController.updatePropertiesHandler(n);}},tileRefresh:function(){},tileSetVisible:function(i){},exit:function(){this._oController=null;}});});
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncher/StaticTile.controller',["sap/ui/core/mvc/Controller","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/utils/WindowUtils"],function(C,A,a,W){"use strict";return C.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{_aDoableObject:{},_getConfiguration:function(){var c=this.getView().getViewData();c.properties.sizeBehavior=a.last("/core/home/sizeBehavior");return c;},onInit:function(){var v=this.getView();var m=new sap.ui.model.json.JSONModel();m.setData(this._getConfiguration());v.setModel(m);this._aDoableObject=a.on("/core/home/sizeBehavior").do(function(s){m.setProperty("/properties/sizeBehavior",s);});},onExit:function(){this._aDoableObject.off();},onPress:function(e){var c=this.getView().getViewData().properties,r={},R=sap.ushell.Container.getRenderer("fiori2");if(e.getSource().getScope&&e.getSource().getScope()===sap.m.GenericTileScope.Display){var t=this._createTargetUrl();if(t.length===0){return;}if(t[0]==='#'){hasher.setHash(t);}else{r.title=c.title;r.appType="App";r.url=c.targetURL;r.appId=c.targetURL;R.logRecentActivity(r);W.openURL(t,'_blank');}}},updatePropertiesHandler:function(n){var t=this.getView().getContent()[0],T=t.getTileContent()[0];if(typeof n.title!=='undefined'){t.setHeader(n.title);}if(typeof n.subtitle!=='undefined'){t.setSubheader(n.subtitle);}if(typeof n.icon!=='undefined'){T.getContent().setSrc(n.icon);}if(typeof n.info!=='undefined'){T.setFooter(n.info);}},_createTargetUrl:function(){var t=this.getView().getViewData().properties.targetURL,s=this.getView().getViewData().configuration["sap-system"],u,h;if(t&&s){u=sap.ushell.Container.getService("URLParsing");if(u.isIntentUrl(t)){h=u.parseShellHash(t);if(!h.params){h.params={};}h.params["sap-system"]=s;t="#"+u.constructShellHash(h);}else{t+=((t.indexOf("?")<0)?"?":"&")+"sap-system="+s;}}return t;},_getCurrentProperties:function(){var t=this.getView().getContent()[0],T=t.getTileContent()[0],s=a.last("/core/home/sizeBehavior");return{title:t.getHeader(),subtitle:t.getSubheader(),info:T.getFooter(),icon:T.getContent().getSrc(),sizeBehavior:s};}});},true);
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncher/StaticTile.view',["sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/ui/core/mvc/JSView"],function(G,I,T){"use strict";return sap.ui.jsview("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncher.StaticTile";},createContent:function(c){var v=this.getViewData().properties;this.setHeight('100%');this.setWidth('100%');return new G({header:v.title,subheader:v.subtitle,size:'Auto',sizeBehavior:'{/properties/sizeBehavior}',tileContent:new T({size:"Auto",footer:v.info,content:new I({src:v.icon,width:"100%"})}),press:[c.onPress,c]});}});},true);
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncherdynamic/Component',["sap/ui/core/UIComponent"],function(U){"use strict";return U.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.Component",{metadata:{},createContent:function(){var c=this.getComponentData();var p=c.properties||{};var P=p.tilePersonalization||{};var i=p.indicatorDataSource;if(i&&i.path){P.serviceUrl=i.path;P.serviceRefreshInterval=i.refresh;}var s=c.startupParameters;if(s&&s["sap-system"]&&s["sap-system"][0]){P["sap-system"]=s["sap-system"][0];}if(P.serviceUrl&&P.serviceUrl.charAt(0)!=="/"&&p.dataSource&&p.dataSource.uri){var S=p.dataSource.uri;if(P["sap-system"]){if(S.charAt(S.length-1)==="/"){S=S.slice(0,S.length-1);}S+=";o="+P["sap-system"];}if(S.charAt(S.length-1)!=="/"){S+="/";}S+=P.serviceUrl;P.serviceUrl=S;}var t=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",viewData:{properties:p,configuration:P},async:true});t.loaded().then(function(v){this._oController=t.getController();this.tileRefresh();}.bind(this));return t;},tileSetVisualProperties:function(n){if(this._oController){this._oController.updateVisualPropertiesHandler(n);}},tileRefresh:function(){if(this._oController){this._oController.refreshHandler();}},tileSetVisible:function(i){if(this._oController){this._oController.visibleHandler(i);}},exit:function(){this._oController=null;}});});
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.controller',["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat","sap/ushell/Config","sap/ui/thirdparty/datajs","sap/ui/thirdparty/URI","sap/ushell/utils/WindowUtils"],function(C,u,N,a,O,U,W){"use strict";return C.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",{timer:null,_aDoableObject:{},oDataRequest:null,_getConfiguration:function(){var v=this.getView().getViewData(),c={},o,h;c.configuration=v.configuration;c.properties=v.properties;c.properties.info=c.properties.info||"";c.properties.number_value='...';c.properties.number_value_state='Neutral';c.properties.number_state_arrow='None';c.properties.number_factor='';c.properties.number_unit='';var s=c.configuration["sap-system"];var t=c.properties.targetURL;if(t&&s){o=sap.ushell.Container.getService("URLParsing");if(o.isIntentUrl(t)){h=o.parseShellHash(t);if(!h.params){h["params"]={};}h.params["sap-system"]=s;t="#"+o.constructShellHash(h);}else{t+=((t.indexOf("?")<0)?"?":"&")+"sap-system="+s;}c.properties.targetURL=t;}c.properties.sizeBehavior=a.last("/core/home/sizeBehavior");return c;},onInit:function(){var v=this.getView();var m=new sap.ui.model.json.JSONModel();m.setData(this._getConfiguration());v.setModel(m);this._aDoableObject=a.on("/core/home/sizeBehavior").do(function(s){m.setProperty("/properties/sizeBehavior",s);});},refreshHandler:function(){this.loadData(0);},visibleHandler:function(i){if(i){if(!this.oDataRequest){this.refreshHandler(this);}}else{this.stopRequests();}},updateVisualPropertiesHandler:function(n){var p=this.getView().getModel().getProperty("/properties");var c=false;if(typeof n.title!=='undefined'){p.title=n.title;c=true;}if(typeof n.subtitle!=='undefined'){p.subtitle=n.subtitle;c=true;}if(typeof n.icon!=='undefined'){p.icon=n.icon;c=true;}if(typeof n.targetURL!=='undefined'){p.targetURL=n.targetURL;c=true;}if(typeof n.info!=='undefined'){p.info=n.info;c=true;}if(c){this.getView().getModel().setProperty("/properties",p);}},stopRequests:function(){if(this.timer){clearTimeout(this.timer);}if(this.oDataRequest){try{this.oDataRequest.abort();}catch(e){jQuery.sap.log.warning(e.name,e.message);}}},onPress:function(e){var r={},R=sap.ushell.Container.getRenderer("fiori2");if(e.getSource().getScope&&e.getSource().getScope()===sap.m.GenericTileScope.Display){var t=this.getView().getModel().getProperty("/properties/targetURL"),T=this.getView().getModel().getProperty("/properties/title");if(!t){return;}else if(t[0]==='#'){hasher.setHash(t);}else{r.title=T;r.appType="App";r.url=t;r.appId=t;R.logRecentActivity(r);W.openURL(t,'_blank');}}},initUpdateDynamicData:function(){var v=this.getView(),s=v.getModel().getProperty("/configuration/serviceUrl"),S=v.getModel().getProperty("/configuration/serviceRefreshInterval");if(!S){S=0;}else if(S<10){jQuery.sap.log.warning("Refresh Interval "+S+" seconds for service URL "+s+" is less than 10 seconds, which is not supported. Increased to 10 seconds automatically.",null,"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile.controller");S=10;}if(s){this.loadData(S);}},extractData:function(d){var n,k=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];if(typeof d==="object"&&Object.keys(d).length===1){n=Object.keys(d)[0];if(jQuery.inArray(n,k)===-1){return d[n];}}return d;},successHandleFn:function(r){var c=this.getView().getModel().getProperty("/configuration");var d=r;this.oDataRequest=undefined;if(typeof r==="object"){var b=jQuery.sap.getUriParameters(c.serviceUrl).get("$inlinecount");if(b&&b==="allpages"){d={number:r.__count};}else{d=this.extractData(d);}}else if(typeof r==="string"){d={number:r};}this.updatePropertiesHandler(d);},errorHandlerFn:function(m){this.oDataRequest=undefined;var M=m&&m.message?m.message:m,r=u.getResourceBundleModel().getResourceBundle(),s=this.getView().getModel().getProperty("/configuration/serviceUrl");if(m.response){M+=" - "+m.response.statusCode+" "+m.response.statusText;}jQuery.sap.log.error("Failed to update data via service "+s+": "+M,null,"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile");this.updatePropertiesHandler({number:"???",info:r.getText("dynamic_data.error")});},loadData:function(s){var b=this.getView().getModel().getProperty("/configuration/serviceUrl"),S,c,r,o;if(!b){return;}r={"Cache-Control":"no-cache, no-store, must-revalidate","Pragma":"no-cache","Expires":"0","Accept-Language":(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||""};if(s>0){jQuery.sap.log.info("Wait "+s+" seconds before calling "+b+" again",null,"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile.controller");this.timer=setTimeout(this.loadData.bind(this,s,false),(s*1000));}if(!this.oDataRequest){if(sap.ushell.Container){S=sap.ui.getCore().getConfiguration().getSAPLogonLanguage();if(S){r["sap-language"]=S;}c=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";o=new U(b);if(c&&!o.protocol()){r["sap-client"]=c;}}if((S)&&(b.indexOf("sap-language=")==-1)){b=b+(b.indexOf("?")>=0?"&":"?")+"sap-language="+S;}this.oDataRequest=O.read({requestUri:b,headers:r},this.successHandleFn.bind(this),this.errorHandlerFn.bind(this));}},onExit:function(){this.stopRequests();this._aDoableObject.off();},addParamsToUrl:function(s,t){var p="",b=s.indexOf("?")!==-1,i;if(t&&t.length>0){for(i=0;i<t.length;i=i+1){p+=t[i];if(i<t.length-1){p+="&";}}}if(p.length>0){if(!b){s+="?";}else{s+="&";}s+=p;}return s;},_normalizeNumber:function(n,m,b,i){var c;if(isNaN(n)){c=n;}else{var o=sap.ui.core.format.NumberFormat.getFloatInstance({maxFractionDigits:i});if(!b){var d=Math.abs(n);if(d>=1000000000){b='B';n/=1000000000;}else if(d>=1000000){b='M';n/=1000000;}else if(d>=1000){b='K';n/=1000;}}c=o.format(n);}var e=c;var f=e[m-1];m-=(f==='.'||f===',')?1:0;e=e.substring(0,m);return{displayNumber:e,numberFactor:b};},updatePropertiesHandler:function(d){var e=u.getResourceBundleModel().getResourceBundle().getText("dynamic_data.error");var b=0,i,n,c,s,p=this.getView().getModel().getProperty("/properties"),o={title:d.title||p.title||"",subtitle:d.subtitle||p.subtitle||"",icon:d.icon||p.icon||"",targetURL:d.targetURL||p.targetURL||"",number_value:!isNaN(d.number)?d.number:"...",number_digits:d.numberDigits>=0?d.numberDigits:4,info:p.info==e?d.info||"":d.info||p.info||"",number_unit:d.numberUnit||p.number_unit||"",number_state_arrow:d.stateArrow||p.number_state_arrow||"None",number_value_state:d.numberState||p.number_value_state||"Neutral",number_factor:d.numberFactor||p.number_factor||""};var t=[];if(d.targetParams){t.push(d.targetParams);}if(d.results){for(i=0,n=d.results.length;i<n;i=i+1){c=d.results[i].number||0;if(typeof c==="string"){c=parseInt(c,10);}b=b+c;s=d.results[i].targetParams;if(s){t.push(s);}}o.number_value=b;}if(t.length>0){o.targetURL=this.addParamsToUrl(o.targetURL,t);}if(!isNaN(d.number)){if(typeof d.number==="string"){d.number=d.number.trim();}var S=this._shouldProcessDigits(d.number,d.numberDigits),m=o.icon?4:5;if(d.number&&d.number.length>=m||S){var f=this._normalizeNumber(d.number,m,d.numberFactor,d.numberDigits);o.number_factor=f.numberFactor;o.number_value=f.displayNumber;}else{var g=N.getFloatInstance({maxFractionDigits:m});o.number_value=g.format(d.number);}}if(o.number_value_state){switch(o.number_value_state){case"Positive":o.number_value_state="Good";break;case"Negative":o.number_value_state="Error";break;}}o.sizeBehavior=a.last("/core/home/sizeBehavior");this.getView().getModel().setProperty("/properties",o);},_shouldProcessDigits:function(d,D){var n;d=typeof(d)!=='string'?d.toString():d;if(d.indexOf('.')!==-1){n=d.split(".")[1].length;if(n>D){return true;}}return false;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view',['sap/m/GenericTile','sap/m/TileContent','sap/m/NumericContent'],function(G,T,N){"use strict";sap.ui.jsview("sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');return new G({size:'Auto',header:'{/properties/title}',subheader:'{/properties/subtitle}',sizeBehavior:'{/properties/sizeBehavior}',tileContent:[new T({size:'Auto',footer:'{/properties/info}',footerColor:{path:"/data/display_info_state",formatter:function(f){if(!sap.m.ValueColor[f]){f=sap.m.ValueColor.Neutral;}return f;}},unit:'{/properties/number_unit}',sizeBehavior:'{/properties/sizeBehavior}',content:[new N({truncateValueTo:5,scale:'{/properties/number_factor}',value:'{/properties/number_value}',indicator:'{/properties/number_state_arrow}',valueColor:{path:"/data/display_number_state",formatter:function(v){if(!sap.m.ValueColor[v]){v=sap.m.ValueColor.Neutral;}return v;}},icon:'{/properties/icon}',width:'100%'})]})],press:[c.onPress,c]});}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorArea/AreaChartTile.view',['sap/ui/core/mvc/JSView','sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil'],function(J,o,s){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorArea.AreaChartTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var h="Lorem ipsum";var a="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;a=t.subTitle;}var b=function(n){return new sap.suite.ui.microchart.AreaMicroChartItem({color:"Good",points:{path:"/"+n+"/data",template:new sap.suite.ui.microchart.AreaMicroChartPoint({x:"{day}",y:"{balance}"})}});};var d=function(n){return new sap.suite.ui.microchart.AreaMicroChartLabel({label:"{/"+n+"/label}",color:"{/"+n+"/color}"});};var g={subheader:a,header:h,footerNum:"",footerComp:"",scale:"",unit:"",value:8888,size:"Auto",frameType:"OneByOne",state:sap.m.LoadState.Loading};this.oNVConfContS=new sap.suite.ui.microchart.AreaMicroChart({width:"{/width}",height:"{/height}",size:"{/size}",target:b("target"),innerMinThreshold:b("innerMinThreshold"),innerMaxThreshold:b("innerMaxThreshold"),minThreshold:b("minThreshold"),maxThreshold:b("maxThreshold"),chart:b("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:d("firstXLabel"),lastXLabel:d("lastXLabel"),firstYLabel:d("firstYLabel"),lastYLabel:d("lastYLabel"),minLabel:d("minLabel"),maxLabel:d("maxLabel")});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new sap.m.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var G=new sap.ui.model.json.JSONModel();G.setData(g);this.oGenericTile.setModel(G);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualComparison/DualComparison.view',['sap/ui/core/mvc/JSView','sap/ca/ui/model/format/NumberFormat','sap/ui/model/analytics/odata4analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil'],function(J,N,o,s){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualComparison.DualComparison",{getControllerName:function(){return"tiles.indicatorDualComparison.DualComparison";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var t=this;t.tileData;t.oGenericTileData={};t.oNumericContent=new sap.m.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new sap.m.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});t.oCmprsDataTmpl=new sap.suite.ui.microchart.ComparisonMicroChartData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new sap.suite.ui.microchart.ComparisonMicroChart({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oComparisonTile=new sap.m.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new sap.m.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,t.oComparisonTile]});t.oGenericTileModel=new sap.ui.model.json.JSONModel();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualContribution/DualContribution.view',['sap/ui/core/mvc/JSView','sap/ca/ui/model/format/NumberFormat','sap/ui/model/analytics/odata4analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil'],function(J,N,o,s){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualContribution.DualContribution",{getControllerName:function(){return"tiles.indicatorDualContribution.DualContribution";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var t=this;t.oGenericTileData={};t.oNumericContent=new sap.m.NumericContent({value:"{/value}",scale:"{/scale}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new sap.m.TileContent({unit:"{/unitNumeric}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});t.oCmprsDataTmpl=new sap.suite.ui.microchart.ComparisonMicroChartData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new sap.suite.ui.microchart.ComparisonMicroChart({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oComparisonTile=new sap.m.TileContent({unit:"{/unitContribution}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new sap.m.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,t.oComparisonTile]});t.oGenericTileModel=new sap.ui.model.json.JSONModel();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.view',['sap/ui/core/mvc/JSView','sap/ca/ui/model/format/NumberFormat','sap/ui/model/analytics/odata4analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil'],function(J,N,o,s){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualDeviation.DualDeviation",{getControllerName:function(){return"tiles.indicatorDualDeviation.DualDeviation";},createContent:function(c){var t=this;this.setHeight('100%');this.setWidth('100%');var h="Lorem ipsum";var a="Lorem ipsum";var b=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(b.title&&b.subTitle){h=b.title;a=b.subTitle;}var d={subheader:a,header:h,footerNum:"",footerComp:"",frameType:"TwoByOne",state:sap.m.LoadState.Loading,scale:""};t.oNumericContent=new sap.m.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new sap.m.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});var B=new sap.suite.ui.microchart.BulletMicroChartData({value:"{value}",color:"{color}"});t.oBCTmpl=new sap.suite.ui.microchart.BulletMicroChart({size:sap.m.Size.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:B,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});var n=new sap.m.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oBCTmpl});t.oGenericTile=new sap.m.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,n]});var g=new sap.ui.model.json.JSONModel();g.setData(d);t.oGenericTile.setModel(g);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualTrend/DualTrend.view',['sap/ui/core/mvc/JSView','sap/ca/ui/model/format/NumberFormat','sap/ui/model/analytics/odata4analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil'],function(J,N,o,s){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualTrend.DualTrend",{getControllerName:function(){return"tiles.indicatorDualTrend.DualTrend";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var b=function(h){return new sap.suite.ui.microchart.AreaMicroChartItem({color:"Good",points:{path:"/"+h+"/data",template:new sap.suite.ui.microchart.AreaMicroChartPoint({x:"{day}",y:"{balance}"})}});};var a=function(h){return new sap.suite.ui.microchart.AreaMicroChartLabel({label:"{/"+h+"/label}",color:"{/"+h+"/color}"});};var g={footer:"",header:"",subheader:""};var n=new sap.suite.ui.microchart.AreaMicroChart({width:"{/width}",height:"{/height}",size:"{/size}",target:b("target"),innerMinThreshold:b("innerMinThreshold"),innerMaxThreshold:b("innerMaxThreshold"),minThreshold:b("minThreshold"),maxThreshold:b("maxThreshold"),chart:b("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:a("firstXLabel"),lastXLabel:a("lastXLabel"),firstYLabel:a("firstYLabel"),lastYLabel:a("lastYLabel"),minLabel:a("minLabel"),maxLabel:a("maxLabel")});var d=new sap.m.TileContent({unit:"{/unit}",size:"{/size}",content:n});var e=new sap.m.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});var f=new sap.m.TileContent({unit:"{/unit}",size:"{/size}",content:e});this.oGenericTile=new sap.m.GenericTile({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[f,d]});var G=new sap.ui.model.json.JSONModel();G.setData(g);this.oGenericTile.setModel(G);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.view',['sap/ui/core/mvc/JSView','sap/ui/model/analytics/odata4analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil'],function(J,o,s){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcomparison.ComparisonTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var t=this;t.tileData;t.oGenericTileData={};t.oCmprsDataTmpl=new sap.suite.ui.microchart.ComparisonMicroChartData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new sap.suite.ui.microchart.ComparisonMicroChart({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new sap.m.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNVConfS]});t.oGenericTileModel=new sap.ui.model.json.JSONModel();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorcontribution/ContributionTile.view',['sap/ui/core/mvc/JSView','sap/ui/model/analytics/odata4analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil'],function(J,o,s){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcontribution.ContributionTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var t=this;t.oGenericTileData={};t.oCmprsDataTmpl=new sap.suite.ui.microchart.ComparisonMicroChartData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new sap.suite.ui.microchart.ComparisonMicroChart({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new sap.m.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNVConfS]});t.oGenericTileModel=new sap.ui.model.json.JSONModel();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatordeviation/DeviationTile.view',['sap/ui/core/mvc/JSView','sap/ui/model/analytics/odata4analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil'],function(J,o,s){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatordeviation.DeviationTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var h="Lorem ipsum";var a="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;a=t.subTitle;}var d={subheader:a,header:h,footerNum:"",footerComp:"",frameType:"OneByOne",state:sap.m.LoadState.Loading,scale:""};var b=new sap.suite.ui.microchart.BulletMicroChartData({value:"{value}",color:"{color}"});this.oBCTmpl=new sap.suite.ui.microchart.BulletMicroChart({size:sap.m.Size.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:b,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oBCTmpl});this.oGenericTile=new sap.m.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var g=new sap.ui.model.json.JSONModel();g.setData(d);this.oGenericTile.setModel(g);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/utils',["sap/ushell/components/tiles/utilsRT","sap/ushell/resources","sap/ui/thirdparty/datajs"],function(u,r,O){"use strict";var U={};
U.isInitial=function(T){return T==="App Launcher  Static"||T==="App Launcher  Dynamic"||T==="Target Mapping";};
U.getResourceBundleModel=function(){return r.i18nModel;};
U.getEmptyRowObj=function(e){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!e,defValEnabled:true,editable:e};};
U.getEmptyTileActionsRowObj=function(e){var R=U.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:R.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:e};};
U.getTileNavigationActionsRows=function(T,e){var a=[],b=[];b=this.getTileNavigationActions(T);if(b.length){for(var i=0;i<b.length;i++){a.push(t(b[i],e));}}else{a=[this.getEmptyTileActionsRowObj(e)];}return a;};
U.getTileNavigationActions=function(T){var a=[],s='';var b=T.bag.getBag('tileNavigationActions');if(b.getPropertyNames().indexOf('tile_navigation_actions')>=0){a=JSON.parse(b.getProperty('tile_navigation_actions'));for(var i=0;i<a.length;i++){if(a[i].text){if(b.getTextNames().indexOf('action_tile_'+(i+1))>=0){s=b.getText('action_tile_'+(i+1));}a[i].text=s;}}}return a;};
var t=function(T,e){var a={},R=U.getResourceBundleModel().getResourceBundle();a.menu_title=T.text;a.icon=T.icon;if((T.targetURL).charAt(0)==="#"){a.target_type=R.getText("configuration.tile_actions.table.target_type.intent");var n=T.targetURL.split("-");a.navigation_target=n[0].substring(1,n[0].length);a.action=n[1];a.isTargetTypeIntent=true;}else{a.target_type=R.getText("configuration.tile_actions.table.target_type.url");a.navigation_target=T.targetURL;a.action="";a.isTargetTypeIntent=false;}a.editable=e;return a;};
U.tileActionsRows2TileActionsArray=function(T){var a=[];for(var i=0;i<T.length;i++){if(T[i].menu_title){a.push(c(T[i]));}}return a;};
var c=function(T){var o={};o.text=T.menu_title;o.icon=T.icon;if(T.action){o.targetURL="#"+T.navigation_target+"-"+T.action;}else{o.targetURL=T.navigation_target;}return o;};
U.populateTileNavigationActionsBag=function(a,n){a.setProperty('tile_navigation_actions',JSON.stringify(n));for(var i=0;i<n.length;i++){var A=n[i].text;a.setText('action_tile_'+(i+1),A);}};
U.getDefaultFormFactors=function(){return{"appDefault":false,"manual":{"desktop":true,"tablet":true,"phone":true},"defaultParam":true};};
U.buildFormFactorsObject=function(m){return{"appDefault":m.getProperty("/config/appFormFactor"),"manual":{"desktop":m.getProperty("/config/desktopChecked"),"tablet":m.getProperty("/config/tabletChecked"),"phone":m.getProperty("/config/phoneChecked")}};};
U.tableHasDuplicateParameterNames=function(T){var p={};for(var i=0;i<T.length;i++){var a=T[i].name;if(a!==""){if(p[a]){return true;}else{p[a]=true;}}}return false;};
U.getMappingSignatureString=function(a,b){var m="";for(var i=0;i<a.length;i++){if(a[i].name){m+=(g(a[i])+"&");}}return b?m+"*=*":m.substring(0,m.length-1);};
var g=function(a){var p="";if(a.mandatory){if(a.isRegularExpression){p="{"+a.name+"="+encodeURIComponent(a.value)+"}";}else{p=a.name+"="+encodeURIComponent(a.value);}}else{p="["+a.name+"="+encodeURIComponent(a.defaultValue)+"]";}return p;};
U.getMappingSignatureTableData=function(m,e){var p=[];var a=m.split("&");for(var i=0;i<a.length;i++){var b=a[i];if(b!=="*=*"){p.push(d(a[i],e));}}return p;};
var d=function(p,e){var a={};if(p.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";p=p.substring(1,p.length-1);a.name=p.substring(0,p.indexOf("="));a.defaultValue=decodeURIComponent(p.substring(p.indexOf("=")+1));}else{a.mandatory=true;a.defaultValue="";if(p.charAt(0)==="{"){a.isRegularExpression=true;p=p.substring(1,p.length-1);}else{a.isRegularExpression=false;}a.name=p.substring(0,p.indexOf("="));a.value=decodeURIComponent(p.substring(p.indexOf("=")+1));}a.editable=e;if(e){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory;}else{a.valEnabled=true;a.defValEnabled=true;}return a;};
U.getAllowUnknownParametersValue=function(m){if(m&&(m.substring(m.length-3,m.length)==="*=*")){return true;}else{return false;}};
U.getMappingSignature=function(R,a){var A=a?"allowed":"ignored";var o=new RegExp("%%UserDefault[.].+%%");var m=[];var M={"parameters":{},"additional_parameters":A};R.forEach(function(b){M.parameters[b.name]={"required":b.mandatory,"rename_to":b.rename_to};if(b.defaultValue){m=o.exec(b.defaultValue);if(m){b.defaultValue=m[0];}M.parameters[b.name].defaultValue={"value":b.defaultValue};}if(b.value){m=o.exec(b.value);if(m){b.value=m[0];}M.parameters[b.name].filter={"value":b.value};if(b.isRegularExpression){M.parameters[b.name].filter.format="regexp";}}});return M;};
U.getSignatureTableData=function(s,e){var p=[];var R={};var P={};var o=s.parameters;for(var k in o){P=o[k];R={};R.editable=e;R.name=k;R.mandatory=P.required;P.rename_to?R.rename_to=P.rename_to:R.rename_to=P.renameTo;if(e){R.valEnabled=R.mandatory;R.defValEnabled=!R.mandatory;}else{R.valEnabled=true;R.defValEnabled=true;}if(P.filter){R.value=P.filter.value;if(P.filter.format&&P.filter.format==="regexp"){R.isRegularExpression=true;}}if(P.defaultValue){R.defaultValue=P.defaultValue.value;}p.push(R);}return p;};
U.getTranslatedTitle=function(T){if(T.bag){var b=T.bag.getBag('tileProperties');if(b.getTextNames().indexOf("display_title_text")>=0){return b.getText('display_title_text');}}if(T.title){return T.title.getTitle();}if(T.preview){return T.preview.getTitle();}return"";};
U.getTranslatedSubtitle=function(T,C){if(T.bag){var b=T.bag.getBag('tileProperties');if(b.getTextNames().indexOf("display_subtitle_text")>=0){return b.getText('display_subtitle_text');}}if(typeof C['display_subtitle_text']==="string"){return C['display_subtitle_text'];}if(T.preview&&T.preview.getDescription&&T.preview.getDescription()){return T.preview.getDescription();}return'';};
U.getTranslatedProperty=function(T,o,p){if(T.bag){var b=T.bag.getBag('tileProperties');if(b.getTextNames().indexOf(p)>=0){return b.getText(p);}}return o[p];};
U.getActionConfiguration=function(T,a){var C=T.configuration.getParameterValueAsString('tileConfiguration');var o=JSON.parse(C||"{}"),R;if(typeof a=="undefined"){a=T.configurationUi.isEnabled();}if(a){R=U.getResourceBundleModel().getResourceBundle();}o.semantic_object=o.semantic_object||(a?"["+R.getText("configuration.semantic_object")+"]":"");o.semantic_action=o.semantic_action||(a?"["+R.getText("configuration.semantic_action")+"]":"");o.navigation_provider=o.navigation_provider||"";o.navigation_provider_role=o.navigation_provider_role||"";o.navigation_provider_instance=o.navigation_provider_instance||"";o.target_application_id=o.target_application_id||"";o.target_application_alias=o.target_application_alias||"";o.display_info_text=o.display_info_text||"";o.editable=true;if(T.configurationUi&&T.configurationUi.isReadOnly){if(T.configurationUi.isReadOnly()){o.editable=false;}}return o;};
U.getConfigurationUi=function(v,V){var o=v.getViewData();var T=o.chip;var C,s,R,i,a,A;var u=sap.ui.require("sap/ushell/components/tiles/utilsRT");var b=u.getConfiguration(T,true,true);var e=new sap.ui.model.json.JSONModel({config:b,tileModel:v.getModel()});C=new sap.ui.view({type:sap.ui.core.mvc.ViewType.XML,viewData:o,viewName:V});C.setModel(e);s=C.byId("navigation_semantic_objectInput")||C.byId("semantic_objectInput");if(s){s.getModel().setProperty("/enabled",b.navigation_use_semantic_object);s.getModel().setProperty("/value",b.semantic_object||b.navigation_semantic_object);}R=C.byId("navigation_provider_roleInput");if(R){R.getModel().setProperty("/value",b.navigation_provider_role);}i=C.byId("navigation_provider_instanceInput");if(i){i.getModel().setProperty("/value",b.navigation_provider_instance);}a=C.byId("target_application_aliasInput");if(a){a.getModel().setProperty("/value",b.target_application_alias);}A=C.byId("targetTypeInput");if(A){if(!C.getModel().getProperty("/config/transaction")){C.getModel().setProperty("/config/transaction",{});}if(!C.getModel().getProperty("/config/web_dynpro")){C.getModel().setProperty("/config/web_dynpro",{});}if(v.getModel().getProperty('/config/navigation_provider')=="LPD"){U.displayLpdCustApplicationTypeFields(C);}else if(v.getModel().getProperty('/config/navigation_provider')=="SAPUI5"||v.getModel().getProperty('/config/navigation_provider')==''){A.setSelectedKey("SAPUI5");U.displaySapui5ApplicationTypeFields(C);}else if(v.getModel().getProperty('/config/navigation_provider')=="TR"){U.displayTransactionApplicationTypeFields(C);}else if(v.getModel().getProperty('/config/navigation_provider')=="WDA"){U.displayWebDynproApplicationTypeFields(C);}else if(v.getModel().getProperty('/config/navigation_provider')=="URL"){U.displayURLApplicationTypeFields(C);}}return C;};
U._updateTilePropertiesTexts=function(v,T){var a=T.getTextNames(),m=v.getModel();a.forEach(function(p){m.setProperty('/data/'+p,T.getText(p));m.setProperty('/config/'+p,T.getText(p));});};
U._updateTileConfiguration=function(v,T){var m=v.getModel();jQuery.each(JSON.parse(T),function(p,P){m.setProperty('/data/'+p,P);m.setProperty('/config/'+p,P);if(p==="navigation_target_url"){m.setProperty('/nav/'+p,P);}});};
U.aData=[];U.aActionData=[];U.aRoleData=[];U.aAliasData=[];
U.objectSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),i,s,a;if(v!==undefined){i=e.getParameter("itemsBinding");s=new sap.ui.model.Filter("name",sap.ui.model.FilterOperator.Contains,v);a=new sap.ui.model.Filter("obj",sap.ui.model.FilterOperator.Contains,v);f.push(a);f.push(s);i.filter(new sap.ui.model.Filter(f,false));}};
U.actionSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),i,s;if(v!==undefined){i=e.getParameter("itemsBinding");s=new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,v);f.push(s);i.filter(new sap.ui.model.Filter(f,false));}};
U.roleSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),i,s,a;if(v!==undefined){i=e.getParameter("itemsBinding");s=new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.Contains,v);a=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.Contains,v);f.push(s);f.push(a);i.filter(new sap.ui.model.Filter(f,false));}};
U.instanceSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),a,R,i,s,b;a=e.getSource().getCustomData();R=a[0].getValue();if(v!==undefined){i=e.getParameter("itemsBinding");if(v!=""){b=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.Contains,v);f.push(b);}if(R!=""){s=new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.EQ,R);f.push(s);}if(f.length>0){i.filter(new sap.ui.model.Filter(f,true));}}};
U.instanceSuggest=function(C,e){var v=C.getView(),f=[],V=e.getParameter("value"),R,s,a,b,h;R=v.byId("navigation_provider_roleInput");s=R.getValue();V=e.getParameter("suggestValue");if(V!=""){h=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.Contains,V);f.push(h);}if(s!=""){b=new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.EQ,s);f.push(b);}if(f.length>0){a=e.oSource.getBinding("suggestionItems");a.filter(new sap.ui.model.Filter(f,true));}};
U.aliasSuggest=function(C,e){var v=C.getView(),f=[],V=e.getParameter("value"),i,I,s,a,b;i=v.byId("navigation_provider_instanceInput");I=i.getValue();V=e.getParameter("suggestValue");if(V!=""){b=new sap.ui.model.Filter("alias",sap.ui.model.FilterOperator.Contains,V);f.push(b);}if(I!=""){a=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.EQ,I);f.push(a);}if(f.length>0){s=e.oSource.getBinding("suggestionItems");s.filter(new sap.ui.model.Filter(f,true));}};
U.aliasSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),a,i,b,s,h;a=e.getSource().getCustomData();i=a[0].getValue();if(v!==undefined){b=e.getParameter("itemsBinding");s=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.EQ,i);if(v!=""){h=new sap.ui.model.Filter("alias",sap.ui.model.FilterOperator.Contains,v);f.push(h);}f.push(s);b.filter(new sap.ui.model.Filter(f,true));}};
U.objectSelectUpdateDialog=function(s,v){var f=[],i=s.getBinding("items"),a;if(v!==undefined){a=new sap.ui.model.Filter("name",sap.ui.model.FilterOperator.Contains,v);f.push(a);i.filter(f);}};
U.actionSelectUpdateDialog=function(s,v){var f=[],i=s.getBinding("items"),a;if(v!==undefined){a=new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,v);f.push(a);i.filter(f);}};
U.roleSelectUpdateDialog=function(s,v){var f=[],i=s.getBinding("items"),a;if(v!==undefined){a=new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.Contains,v);f.push(a);i.filter(f);}};
U.instanceSelectUpdateDialog=function(s,v){var f=[],a,i=s.getBinding("items"),b,R,e;a=s.getCustomData();R=a[0].getValue();if(v!==undefined){b=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.Contains,v);f.push(b);}if(R!==""){e=new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.EQ,R);f.push(e);}if(f.length>0){i.filter(f,true);}};
U.aliasSelectUpdateDialog=function(s,v){var f=[],a,i,b=s.getBinding("items"),e,h;a=s.getCustomData();i=a[0].getValue();if(v!==undefined){h=new sap.ui.model.Filter("alias",sap.ui.model.FilterOperator.Contains,v);f.push(h);}if(i!==""){e=new sap.ui.model.Filter("instance",sap.ui.model.FilterOperator.EQ,i);f.push(e);}if(f.length>0){b.filter(f,true);}};
U.sSelectedColor=(jQuery(".sapMStdTileIconDiv").css('color')||"#007cc0").split(" ").join("");U.sDeselectedColor=(jQuery(".sapMLabel:not(.sapFioriDropZoneText )").css('color')||"#666666").split(" ").join("");
U.iconSelect=function(i,s){i.setColor(s?U.sSelectedColor:U.sDeselectedColor);i.setActiveColor(s?U.sDeselectedColor:U.sSelectedColor);};
U.onSelectIcon=function(C,i,T,o){var m=C.getView().getModel(),s;if(i){s=m.getProperty("/config/tile_actions_selected_icon");}else{s=m.getProperty("/config/selected_icon");}if(s){U.iconSelect(s,false);}s=o.getSource();U.iconSelect(s,true);m.setProperty("/config/ok.enabled",true);if(i){m.setProperty("/config/tile_actions_selected_icon",s);}else{m.setProperty("/config/selected_icon",s);}C.byId("selectIconDialog").setTitle(s.getSrc());};
U.onSelectIconClose=function(v){v.byId("selectIconDialog").close();};
U.onSelectIconOk=function(v,T){var s=v.getModel().getProperty("/config/selected_icon");if(!T){v.getModel().setProperty("/config/display_icon_url",s.getSrc());v.byId("iconInput").setValueState(sap.ui.core.ValueState.None);}else{s=v.getModel().getProperty("/config/tile_actions_selected_icon");if(s){T.setValue(s.getSrc());T.setValueState(sap.ui.core.ValueState.None);}}U.onSelectIconClose(v);};
U.iconSelectOnValueHelpRequest=function(C,e,a){var m=C.getView().getModel();var R=C.getView().byId("icons");var b=sap.ui.core.IconPool.getIconCollectionNames();var D=C.getView().byId("selectIconDialog");var o=C.getView().byId("ok");var f,I,T,h,i,j,s,B=false;R.destroyContent();if(a){T=sap.ui.getCore().byId(e.getParameter('id'));I=T.getValue();}else{I=m.getProperty("/config/display_icon_url");}o.attachEventOnce("press",function(){U.onSelectIconOk(C.getView(),T);});b.sort();b=jQuery.grep(b,function(v){if(v==="BusinessSuiteInAppSymbols"){B=true;return false;}return true;});if(B){b.push("BusinessSuiteInAppSymbols");}for(i=0;i<b.length;i+=1){h=sap.ui.core.IconPool.getIconNames(b[i]);h.sort();for(j=0;j<h.length;j+=1){s=sap.ui.core.IconPool.getIconURI(h[j],b[i]);R.addContent(new sap.ui.core.Icon({height:"38px",press:U.onSelectIcon.bind(null,C,a,T),size:"2rem",src:s,tooltip:s,width:"38px"}));}}f=R.getContent();m.setProperty("/config/ok.enabled",false);D.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(i=0;i<f.length;i+=1){if(f[i].getSrc()===I){if(a){m.setProperty("/config/tile_actions_selected_icon",f[i]);}else{m.setProperty("/config/selected_icon",f[i]);}U.iconSelect(f[i],true);m.setProperty("/config/ok.enabled",true);D.setTitle(I);}else{U.iconSelect(f[i],false);}}D.open();};
U.objectSelectOnValueHelpRequest=function(C,e,i){var v=C.getView(),T=U.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object"),s,V,S=new sap.ui.model.json.JSONModel(),o=new sap.m.SelectDialog("semantic_object_select_dialog",{title:T,search:U.objectSelectDoSearch,liveChange:U.objectSelectDoSearch}),a=new sap.m.StandardListItem({title:"{obj}"});if(i){s=sap.ui.getCore().byId(e.getParameter('id'));}else{s=v.byId("semantic_objectInput")||v.byId("navigation_semantic_objectInput");}V=s.getValue();o.open(V);S.setData(C.aDefaultObjects.concat(U.aData));o.bindAggregation("items","/",a);o.setModel(S);U.objectSelectUpdateDialog(o,V);o.attachCancel(function(b){s.setValue(V);if(!i){s.fireChange();}o.destroy();o=null;});o.attachConfirm(function(b){var f=b.getParameter("selectedItem");if(f){s.setValue(f.getTitle());if(!i){s.fireChange();}}o.destroy();o=null;});};
U.actionSelectOnValueHelpRequest=function(C,e,i){var v=C.getView(),T=U.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action"),a,V,s=new sap.ui.model.json.JSONModel(),S=new sap.m.SelectDialog("semantic_action_select_dialog",{title:T,search:U.actionSelectDoSearch,liveChange:U.actionSelectDoSearch}),b=new sap.m.StandardListItem({title:"{text}"});if(i){a=sap.ui.getCore().byId(e.getParameter('id'));}else{a=v.byId("semantic_actionInput")||v.byId("navigation_semantic_actionInput");}V=a.getValue();S.open(V);s.setData(U.aActionData);S.bindAggregation("items","/items",b);S.setModel(s);U.actionSelectUpdateDialog(S,V);S.attachCancel(function(f){a.setValue(V);if(!i){a.fireChange();}S.destroy();S=null;});S.attachConfirm(function(f){var h=f.getParameter("selectedItem");if(h){a.setValue(h.getTitle());if(!i){a.fireChange();a.fireLiveChange({"newValue":h.getTitle()});}}S.destroy();S=null;});};
U.roleSelectOnValueHelpRequest=function(C,e){var v=C.getView(),T=U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),R,i,V,s=new sap.ui.model.json.JSONModel(),S=new sap.m.TableSelectDialog("role_select_dialog",{title:T,search:U.roleSelectDoSearch,liveChange:U.roleSelectDoSearch,columns:[new sap.m.Column({header:[new sap.m.Text({text:U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new sap.m.Column({header:[new sap.m.Text({text:U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),a=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{role}"}),new sap.m.Text({text:"{instance}"})]});R=v.byId("navigation_provider_roleInput");i=v.byId("navigation_provider_instanceInput");V=R.getValue();S.open(V);s.setData(C.aDefaultObjects.concat(U.aRoleData));S.bindAggregation("items","/",a);S.setModel(s);U.roleSelectUpdateDialog(S,V);S.attachCancel(function(b){R.setValue(V);R.fireChange();S.destroy();S=null;});S.attachConfirm(function(b){var f=b.getParameter("selectedItem");if(f){R.setValue(f.getCells()[0].getText());i.setValue(f.getCells()[1].getText());R.fireChange();i.fireChange();}S.destroy();S=null;});};
U.instanceSelectOnValueHelpRequest=function(C,e){var v=C.getView(),R,T=U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance"),i,V,s=new sap.ui.model.json.JSONModel(),S=new sap.m.SelectDialog("instance_select_dialog",{title:T,search:U.instanceSelectDoSearch,liveChange:U.instanceSelectDoSearch}),a=new sap.m.StandardListItem({title:"{instance}"});i=v.byId("navigation_provider_instanceInput");V=i.getValue();R=v.byId("navigation_provider_roleInput").getValue();S.addCustomData(new sap.ui.core.CustomData({key:"role",value:R}));S.open(V);s.setData(C.aDefaultObjects.concat(U.aRoleData));S.bindAggregation("items","/",a);S.setModel(s);U.instanceSelectUpdateDialog(S,V);S.attachCancel(function(b){i.setValue(V);i.fireChange();S.destroy();S=null;});S.attachConfirm(function(b){var f=b.getParameter("selectedItem");if(f){i.setValue(f.getTitle());i.fireChange();}S.destroy();S=null;});};
U.applicationAliasSelectOnValueHelpRequest=function(C,e){var v=C.getView(),T=U.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias"),a,V,i,s=new sap.ui.model.json.JSONModel(),S=new sap.m.SelectDialog("alias_select_dialog",{title:T,search:U.aliasSelectDoSearch,liveChange:U.aliasSelectDoSearch}),b=new sap.m.StandardListItem({title:"{alias}"});a=v.byId("target_application_aliasInput");V=a.getValue();i=v.byId("navigation_provider_instanceInput").getValue();S.addCustomData(new sap.ui.core.CustomData({key:"instance",value:i}));S.open(V);s.setData(C.aDefaultObjects.concat(U.aAliasData));S.bindAggregation("items","/",b);S.setModel(s);U.aliasSelectUpdateDialog(S,V);S.attachCancel(function(f){a.setValue(V);a.fireChange();S.destroy();S=null;});S.attachConfirm(function(f){var h=f.getParameter("selectedItem");if(h){a.setValue(h.getTitle());a.fireChange();}S.destroy();S=null;});};
U.onTargetTypeChange=function(T){var i=T.getParameter('id');var p=sap.ui.getCore().byId(i).getParent().getCells();var s=T.getSource().getSelectedKey();if(s=="INT"){p[3].setEnabled(true);p[2].setShowValueHelp(true);p[2].setValue("");}else{p[2].setShowValueHelp(false);p[2].setValue("");p[3].setEnabled(false);p[3].setValue("");}};
U.addTileActionsRow=function(C){var m=C.getModel();var a=m.getProperty('/config/tile_actions_rows');var n=this.getEmptyTileActionsRowObj();a.push(n);m.setProperty('/config/tile_actions_rows',a);};
U.deleteTileActionsRow=function(C){var m=C.getModel();var e=m.getProperty('/config/tile_actions_rows');var f=C.byId("tileActions");var s=f.getSelectedIndices();var S=s.sort(function(a,b){return b-a;}).slice();for(var i=0;i<S.length;i++){f.removeSelectionInterval(S[i],S[i]);e.splice(S[i],1);}m.setProperty('/config/tile_actions_rows',e);};
U.checkInput=function(C,o){var T=U.getResourceBundleModel().getResourceBundle(),i=C.byId("iconInput"),a=C.byId("useLpdCheckbox"),s=C.byId("navigation_semantic_objectInput")||C.byId("semantic_objectInput"),S=C.byId("navigation_semantic_actionInput")||C.byId("semantic_actionInput"),n=jQuery.trim(o.getParameter("newValue")),v=sap.ui.core.ValueState.None,V=null;switch(o.getSource()){case i:if(n!=""&&n.substring(0,11)!=="sap-icon://"){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.display_icon_url.warning");}break;case a:if(!a.getSelected()){S.setValueState(sap.ui.core.ValueState.None);s.setValueState(sap.ui.core.ValueState.None);}break;case s:if(/[\-#&? ]/.test(n)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_object.error_invalid_chars");}else if(n==""){v=sap.ui.core.ValueState.Error;}break;case S:if(/[\-#&? ]/.test(n)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_action.error_invalid_chars");}else if(n==""){v=sap.ui.core.ValueState.Error;}break;default:break;}if(v){o.getSource().setValueState(v);if(V!==null){o.getSource().setValueStateText(V||"");}}};
U.checkInputOnSaveConfig=function(C){var i=C.byId("iconInput");var s=C.byId("navigation_semantic_objectInput");var S=C.byId("navigation_semantic_actionInput");var o=C.byId("useLpdCheckbox");var T=U.getResourceBundleModel().getResourceBundle();var R=false;if(i.getValue()!=""&&!U.isIconURIValid(i.getValue())){i.setValueState(sap.ui.core.ValueState.Error);i.setValueStateText(T.getText("configuration.display_icon_url.warning"));R=true;}if(o.getSelected()&&/[\-#&? ]/.test(s.getValue())){s.setValueState(sap.ui.core.ValueState.Error);s.setValueStateText(T.getText("configuration.semantic_object.error_invalid_chars"));R=true;}else if(o.getSelected()&&s.getValue()==""){s.setValueState(sap.ui.core.ValueState.Error);R=true;}if(/[\-#&? ]/.test(S.getValue())){S.setValueState(sap.ui.core.ValueState.Error);S.setValueStateText(T.getText("configuration.semantic_action.error_invalid_chars"));R=true;}else if(o.getSelected()&&S.getValue()==""){S.setValueState(sap.ui.core.ValueState.Error);R=true;}return R;};
U.checkTileActions=function(C){var T=C.getModel().getProperty("/config/tile_actions_rows");var o=U.getResourceBundleModel().getResourceBundle();var R=false;for(var i=0;i<T.length;i++){if(!T[i].menu_title&&(T[i].navigation_target||T.length>1)){T[i].valueState=sap.ui.core.ValueState.Error;R=true;}else{T[i].valueState=sap.ui.core.ValueState.None;}if(T[i].icon){if(!U.isIconURIValid(T[i].icon)){T[i].iconValueState=sap.ui.core.ValueState.Error;T[i].iconValueStateText=o.getText("configuration.display_icon_url.warning");R=true;}}}C.getModel().setProperty("/config/tile_actions_rows",T);return R;};
U.isIconURIValid=function(i){var R=[];var C="";var I="";var v="";R=/sap-icon:\/\/(.+)\//.exec(i);if(R){C=R[1];R=/\/\/.+\/(.+)/.exec(i);R?I=R[1]:I="";v=sap.ui.core.IconPool.getIconURI(I,C);if(v!=i){return false;}}else{R=/sap-icon:\/\/(.+)/.exec(i);if(R){I=R[1];if(!sap.ui.core.IconPool.getIconInfo(I)){return false;}}else{return false;}}return true;};
U.checkTMInput=function(C,o){var T=U.getResourceBundleModel().getResourceBundle(),s=C.byId("semantic_objectInput"),S=C.byId("semantic_actionInput"),a=C.byId("target_application_descriptionInput"),b=C.byId("target_application_urlInput"),e=C.byId("target_application_componentInput"),n=C.byId("navigation_provider_roleInput"),N=C.byId("navigation_provider_instanceInput"),f=C.byId("target_application_aliasInput"),h=C.byId("target_application_idInput"),i=jQuery.trim(o.getParameter("newValue")),v=sap.ui.core.ValueState.None,V=null;switch(o.getSource()){case s:if(/[\-#&? ]/.test(i)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_object.error_invalid_chars");}if(S.getValue()==""){S.setValueState(sap.ui.core.ValueState.Error);}break;case S:if(/[\-#&? ]/.test(i)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_action.error_invalid_chars");}else if(i==""){v=sap.ui.core.ValueState.Error;}break;case a:if(i==""){v=sap.ui.core.ValueState.Error;}break;case b:if(i!=""&&!(/^[-~+,;:?%&#=/.\w]+$/.test(i))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.url.error_invalid_chars");}break;case e:if(i==""){v=sap.ui.core.ValueState.Error;}else if(i.substring(0,17)=="SAPUI5.Component="){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.component.error_invalid_input");}break;case n:if(i==""){v=sap.ui.core.ValueState.Error;}else if(!(/^[\w/]+$/.test(i))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.role.error_invalid_chars");}break;case N:if(i==""){v=sap.ui.core.ValueState.Error;}else if(!(/^[\w/]+$/.test(i))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.instance.error_invalid_chars");}break;case f:if(i==""&&h.getValue()==""){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.warning");}else if(i!=""&&h.getValue()!=""){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.warning");h.setValueState(v);h.setValueStateText(V);}else{h.setValueState(sap.ui.core.ValueState.None);}break;case h:if(i==""&&f.getValue()==""){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.warning");}else if(i!=""&&f.getValue()!=""){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.warning");f.setValueState(v);f.setValueStateText(V);}else if(i!=""&&!(/^[A-Fa-f0-9]+$/.test(i))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.error_invalid_chars");}else{f.setValueState(sap.ui.core.ValueState.None);}break;default:break;}if(v){o.getSource().setValueState(v);if(V!==null){o.getSource().setValueStateText(V||"");}}};
U.checkTMInputOnSaveConfig=function(C){var T=U.getResourceBundleModel().getResourceBundle();var s=C.byId("semantic_objectInput");var S=C.byId("semantic_actionInput");var o=C.byId("target_application_descriptionInput");var a=C.byId("target_application_urlInput");var b=C.byId("target_application_componentInput");var n=C.byId("navigation_provider_roleInput");var N=C.byId("navigation_provider_instanceInput");var e=C.byId("target_application_aliasInput");var f=C.byId("target_application_idInput");var h=C.byId("targetTypeInput");var i=C.byId("target_transactionInput");var w=C.byId("target_web_dynpro_applicationInput");var F=C.byId("desktopCB");var j=C.byId("tabletCB");var k=C.byId("phoneCB");var R=false;s.setValue(s.getValue().trim());if(/[\-#&? ]/.test(s.getValue())){s.setValueState(sap.ui.core.ValueState.Error);s.setValueStateText(T.getText("configuration.semantic_object.error_invalid_chars"));R=true;}S.setValue(S.getValue().trim());if(/[\-#&? ]/.test(S.getValue())){S.setValueState(sap.ui.core.ValueState.Error);S.setValueStateText(T.getText("configuration.semantic_action.error_invalid_chars"));R=true;}else if(S.getValue()==""){S.setValueState(sap.ui.core.ValueState.Error);R=true;}var l=C.getModel().getProperty("/config/navigation_provider");if(l==="SAPUI5"){if(o.getValue()==""){o.setValueState(sap.ui.core.ValueState.Error);R=true;}if(a.getValue()!=""&&!(/^[-~+,;:?%&#=/.\w]+$/.test(a.getValue()))){a.setValueState(sap.ui.core.ValueState.Error);a.setValueStateText(T.getText("configuration.target_application.url.error_invalid_chars"));R=true;}if(b.getValue()==""){b.setValueState(sap.ui.core.ValueState.Error);R=true;}else if(b.getValue().substring(0,17)=="SAPUI5.Component="){b.setValueState(sap.ui.core.ValueState.Error);b.setValueStateText(T.getText("configuration.target_application.component.error_invalid_input"));R=true;}}else if(l==="LPD"){if(n.getValue()==""){n.setValueState(sap.ui.core.ValueState.Error);R=true;}if(!(/^[\w]+$/.test(n.getValue()))){n.setValueState(sap.ui.core.ValueState.Error);var v=T.getText("configuration.target_application.role.error_invalid_chars");n.setValueStateText(v);R=true;}if(N.getValue()==""){N.setValueState(sap.ui.core.ValueState.Error);R=true;}if(!(/^[\w]+$/.test(N.getValue()))){N.setValueState(sap.ui.core.ValueState.Error);var v=T.getText("configuration.target_application.instance.error_invalid_chars");N.setValueStateText(v);R=true;}if(e.getValue()==""&&f.getValue()==""){var v=T.getText("configuration.target_application.alias_id.warning");e.setValueState(sap.ui.core.ValueState.Error);e.setValueStateText(v);f.setValueState(sap.ui.core.ValueState.Error);f.setValueStateText(v);R=true;}if(e.getValue()!=""&&f.getValue()!=""){var v=T.getText("configuration.target_application.alias_id.warning");e.setValueState(sap.ui.core.ValueState.Error);e.setValueStateText(v);f.setValueState(sap.ui.core.ValueState.Error);f.setValueStateText(v);R=true;}if(f.getValue()!=""&&!(/^[A-Fa-f0-9]+$/.test(f.getValue()))){f.setValueState(sap.ui.core.ValueState.Error);f.setValueStateText(T.getText("configuration.target_application.alias_id.error_invalid_chars"));R=true;}}else if(l==="TR"){if(i.getValue()==""){i.setValueState(sap.ui.core.ValueState.Error);R=true;}}else if(l==="WDA"){if(w.getValue()==""){w.setValueState(sap.ui.core.ValueState.Error);R=true;}}else if(l==="URL"){if(a.getValue()==""){a.setValueState(sap.ui.core.ValueState.Error);R=true;}else if(!(/^[-~+,;:?%&#=/.\w]+$/.test(a.getValue()))){a.setValueState(sap.ui.core.ValueState.Error);a.setValueStateText(T.getText("configuration.target_application.url.error_invalid_chars"));R=true;}}else{h.setValueState(sap.ui.core.ValueState.Error);h.setValueStateText(T.getText("configuration.navigation_provider.error_invalid_provider"));R=true;}if(!F.getSelected()&&!j.getSelected()&&!k.getSelected()){var v=T.getText("configuration.form_factor.warning");F.setValueState(sap.ui.core.ValueState.Error);F.setValueStateText(v);j.setValueState(sap.ui.core.ValueState.Error);j.setValueStateText(v);k.setValueState(sap.ui.core.ValueState.Error);k.setValueStateText(v);R=true;}return R;};
U.updateTooltipForDisabledProperties=function(C){var m=C.getModel();var i=m.getProperty("/config/isLocaleSuitable");if(!i){var a=U.getResourceBundleModel().getResourceBundle();var b=a.getText("edit_configuration.original_locale_not_fit_tooltip",[m.getProperty("/config/userLocale"),m.getProperty("/config/orgLocale")]);C.byId("titleInput").setTooltip(b);C.byId("subtitleInput").setTooltip(b);C.byId("keywordsInput").setTooltip(b);C.byId("infoInput").setTooltip(b);}};
U.updateMessageStripForOriginalLanguage=function(C){var m=C.getModel();if(m.getProperty("/config/isLocaleSuitable")===false){var M=U.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[m.getProperty("/config/orgLocale").toUpperCase(),m.getProperty("/config/userLocale").toUpperCase()]);var o=C.byId("messageStrip");o.setVisible(true);o.setText(M);o.setType(sap.ui.core.MessageType.Warning);}};
U.createSemanticObjectModel=function(C,s,D){var v=C.getView(),a="/sap/opu/odata/UI2/INTEROP/SemanticObjects",b=[{obj:"",name:""},{obj:"*",name:"*"}],e=(D||b).slice(0),S=new sap.ui.model.json.JSONModel();S.setSizeLimit(999999);S.setProperty("/value","");S.setProperty("/enabled",true);s.bindAggregation("suggestionItems","suggest>/items",new sap.ui.core.Item({text:"{suggest>obj}"}));s.setModel(S,"suggest");if(U.aData.length>0){S.setData({items:e.concat(U.aData)},true);return;}O.read({requestUri:a,headers:{"Accept":"application/json"}},function(o,R){var I,T,i;for(i=0;i<o.results.length;i=i+1){I=o.results[i].id;T=o.results[i].text;U.aData.push({obj:I,name:T||I});}S.setData({items:e.concat(U.aData)},true);},function(E){var m=E&&E.message?E.message:E;if(E.response){m+=" - "+E.response.statusCode+" "+E.response.statusText;}jQuery.sap.log.error("Could not fetch data: "+a+": "+m,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.createRoleModel=function(C,R,I){var v=C.getView(),s="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",S=new sap.ui.model.json.JSONModel(),o=new sap.ui.model.json.JSONModel();S.setSizeLimit(999999);o.setSizeLimit(999999);S.setProperty("/value","");S.setProperty("/enabled",true);o.setProperty("/value","");o.setProperty("/enabled",true);var a=new sap.m.ColumnListItem({cells:[new sap.m.Label({text:"{role}"}),new sap.m.Label({text:"{instance}"})]});R.bindAggregation("suggestionRows","/items",a);I.bindAggregation("suggestionItems","/items",new sap.ui.core.Item({text:"{instance}"}));I.setModel(o);R.setModel(S);R.attachSuggestionItemSelected(function(e){I.setValue(e.getParameter("selectedRow").getCells()[1].getText());I.fireChange();});if(U.aRoleData.length>0){S.setData({items:U.aRoleData},false);o.setData({items:U.aRoleData},false);return;}O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D,b){var e,f,i;for(i=0;i<D.results.length;i=i+1){e=D.results[i].lpdRole;f=D.results[i].instance;U.aRoleData.push({role:e,instance:f});}S.setData({items:U.aRoleData},true);o.setData({items:U.aRoleData},true);},function(e){var m=e&&e.message?e.message:e;if(e.response){m+=" - "+e.response.statusCode+" "+e.response.statusText;}jQuery.sap.log.error("Could not fetch data: "+s+": "+m,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.createAliasModel=function(C,a){var v=C.getView(),o,s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",S=new sap.ui.model.json.JSONModel();var u=sap.ui.require("sap/ushell/components/tiles/utilsRT");S.setSizeLimit(999999);S.setProperty("/value","");S.setProperty("/enabled",true);a.bindAggregation("suggestionItems","/items",new sap.ui.core.Item({text:"{alias}"}));a.setModel(S);o=u.getConfiguration(v.oViewData.chip,true,true);if(o&&o.navigation_provider_role&&o.navigation_provider_instance){if(o.navigation_provider_role!=""&&o.navigation_provider_instance!=""){s=s+"?role='"+o.navigation_provider_role+"'&instance='"+o.navigation_provider_instance+"'";}}O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D,R){var A,b,I,i,m;U.aAliasData=[];for(i=0;i<D.results.length;i=i+1){A=D.results[i].lpdApplicationAlias;b=D.results[i].lpdRole;I=D.results[i].lpdInstance;U.aAliasData.push({role:b,instance:I,alias:A});}m=S.getData();if(m){m.items=U.aAliasData;}else{m={items:U.aAliasData};}S.setData(m,false);},function(e){var m=e&&e.message?e.message:e;if(e.response){m+=" - "+e.response.statusCode+" "+e.response.statusText;}jQuery.sap.log.error("Could not fetch data: "+s+": "+m,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.updateAliasModel=function(v,a){var s,I,R,S=a.getModel();I=v.byId("navigation_provider_instanceInput").getValue();R=v.byId("navigation_provider_roleInput").getValue();s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+R+"'&instance='"+I+"'";O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D,o){var A,R,I,i,m;U.aAliasData=[];for(i=0;i<D.results.length;i=i+1){A=D.results[i].lpdApplicationAlias;R=D.results[i].lpdRole;I=D.results[i].lpdInstance;U.aAliasData.push({role:R,instance:I,alias:A});}m=S.getData();if(m){m.items=U.aAliasData;}else{m={items:U.aAliasData};}S.setData(m,false);},function(e){var m=e&&e.message?e.message:e;if(e.response){m+=" - "+e.response.statusCode+" "+e.response.statusText;}jQuery.sap.log.error("Could not fetch data: "+s+": "+m,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.createActionModel=function(C,a){var i=new sap.ui.model.json.JSONModel();var v=C.getView(),o,A;var u=sap.ui.require("sap/ushell/components/tiles/utilsRT");i.setData({"items":[{"text":"display"},{"text":"approve"},{"text":"displayFactSheet"},{"text":"manage"},{"text":"create"},{"text":"monitor"},{"text":"track"},{"text":"change"},{"text":"register"},{"text":"release"},{"text":"analyzeKPIDetails"},{"text":"lookup"},{"text":"manageLineItems"}]});U.aActionData=i.getData();o=u.getConfiguration(v.oViewData.chip,true,true);A=o.navigation_semantic_action||o.semantic_action;if(A){if(!i.getData().items.some(function(I){return I.text===A;})){i.getData().items.push({"text":A});}}a.bindAggregation("suggestionItems","items>/items",new sap.ui.core.Item({text:"{items>text}"}));a.setModel(i,"items");a.getBinding("suggestionItems").sort(new sap.ui.model.Sorter("text",false));};
U.createNavigationProviderModel=function(C,T){var i=new sap.ui.model.json.JSONModel();var R=U.getResourceBundleModel().getResourceBundle();i.setData({"items":[{"key":"SAPUI5","text":R.getText('configuration.target_application.sapui5')},{"key":"LPD","text":R.getText('configuration.target_application.lpd_cust')},{"key":"TR","text":R.getText('configuration.target_application.transaction')},{"key":"WDA","text":R.getText('configuration.target_application.web_dynpro')},{"key":"URL","text":R.getText('configuration.target_application.url')}]});T.bindItems("items>/items",new sap.ui.core.Item({key:"{items>key}",text:"{items>text}"}));T.setModel(i,"items");T.getBinding("items").sort(new sap.ui.model.Sorter("text",false));};
U.displayApplicationTypeFields=function(a,C){switch(a){case'LPD':U.displayLpdCustApplicationTypeFields(C);break;case'SAPUI5':U.displaySapui5ApplicationTypeFields(C);break;case'TR':U.displayTransactionApplicationTypeFields(C);break;case'WDA':U.displayWebDynproApplicationTypeFields(C);break;case'URL':U.displayURLApplicationTypeFields(C);break;}};
U.displaySapui5ApplicationTypeFields=function(C){C.byId('navigation_provider_role').setVisible(false);C.byId('navigation_provider_roleInput').setVisible(false);C.byId('navigation_provider_instance').setVisible(false);C.byId('navigation_provider_instanceInput').setVisible(false);C.byId('target_application_alias').setVisible(false);C.byId('target_application_aliasInput').setVisible(false);C.byId('target_application_id').setVisible(false);C.byId('target_application_idInput').setVisible(false);C.byId('application_description').setVisible(true);C.byId('target_application_descriptionInput').setVisible(true);C.byId('application_url').setVisible(true);C.byId('target_application_urlInput').setVisible(true);C.byId('application_component').setVisible(true);C.byId('target_application_componentInput').setVisible(true);C.byId('target_transaction').setVisible(false);C.byId('target_transactionInput').setVisible(false);C.byId('target_web_dynpro_application').setVisible(false);C.byId('target_web_dynpro_applicationInput').setVisible(false);C.byId('target_web_dynpro_configuration').setVisible(false);C.byId('target_web_dynpro_configurationInput').setVisible(false);C.byId('target_system_alias').setVisible(false);C.byId('target_system_aliasInput').setVisible(false);};
U.displayLpdCustApplicationTypeFields=function(C){C.byId('application_description').setVisible(false);C.byId('target_application_descriptionInput').setVisible(false);C.byId('application_url').setVisible(false);C.byId('target_application_urlInput').setVisible(false);C.byId('application_component').setVisible(false);C.byId('target_application_componentInput').setVisible(false);C.byId('navigation_provider_role').setVisible(true);C.byId('navigation_provider_roleInput').setVisible(true);C.byId('navigation_provider_instance').setVisible(true);C.byId('navigation_provider_instanceInput').setVisible(true);C.byId('target_application_alias').setVisible(true);C.byId('target_application_aliasInput').setVisible(true);C.byId('target_application_id').setVisible(true);C.byId('target_application_idInput').setVisible(true);C.byId('target_transaction').setVisible(false);C.byId('target_transactionInput').setVisible(false);C.byId('target_web_dynpro_application').setVisible(false);C.byId('target_web_dynpro_applicationInput').setVisible(false);C.byId('target_web_dynpro_configuration').setVisible(false);C.byId('target_web_dynpro_configurationInput').setVisible(false);C.byId('target_system_alias').setVisible(false);C.byId('target_system_aliasInput').setVisible(false);};
U.displayTransactionApplicationTypeFields=function(C){C.byId('application_description').setVisible(true);C.byId('target_application_descriptionInput').setVisible(true);C.byId('application_url').setVisible(false);C.byId('target_application_urlInput').setVisible(false);C.byId('application_component').setVisible(false);C.byId('target_application_componentInput').setVisible(false);C.byId('navigation_provider_role').setVisible(false);C.byId('navigation_provider_roleInput').setVisible(false);C.byId('navigation_provider_instance').setVisible(false);C.byId('navigation_provider_instanceInput').setVisible(false);C.byId('target_application_alias').setVisible(false);C.byId('target_application_aliasInput').setVisible(false);C.byId('target_application_id').setVisible(false);C.byId('target_application_idInput').setVisible(false);C.byId('target_transaction').setVisible(true);C.byId('target_transactionInput').setVisible(true);C.byId('target_web_dynpro_application').setVisible(false);C.byId('target_web_dynpro_applicationInput').setVisible(false);C.byId('target_web_dynpro_configuration').setVisible(false);C.byId('target_web_dynpro_configurationInput').setVisible(false);C.byId('target_system_alias').setVisible(true);C.byId('target_system_aliasInput').setVisible(true);};
U.displayWebDynproApplicationTypeFields=function(C){C.byId('application_description').setVisible(true);C.byId('target_application_descriptionInput').setVisible(true);C.byId('application_url').setVisible(false);C.byId('target_application_urlInput').setVisible(false);C.byId('application_component').setVisible(false);C.byId('target_application_componentInput').setVisible(false);C.byId('navigation_provider_role').setVisible(false);C.byId('navigation_provider_roleInput').setVisible(false);C.byId('navigation_provider_instance').setVisible(false);C.byId('navigation_provider_instanceInput').setVisible(false);C.byId('target_application_alias').setVisible(false);C.byId('target_application_aliasInput').setVisible(false);C.byId('target_application_id').setVisible(false);C.byId('target_application_idInput').setVisible(false);C.byId('target_transaction').setVisible(false);C.byId('target_transactionInput').setVisible(false);C.byId('target_web_dynpro_application').setVisible(true);C.byId('target_web_dynpro_applicationInput').setVisible(true);C.byId('target_web_dynpro_configuration').setVisible(true);C.byId('target_web_dynpro_configurationInput').setVisible(true);C.byId('target_system_alias').setVisible(true);C.byId('target_system_aliasInput').setVisible(true);};
U.displayURLApplicationTypeFields=function(C){C.byId('navigation_provider_role').setVisible(false);C.byId('navigation_provider_roleInput').setVisible(false);C.byId('navigation_provider_instance').setVisible(false);C.byId('navigation_provider_instanceInput').setVisible(false);C.byId('target_application_alias').setVisible(false);C.byId('target_application_aliasInput').setVisible(false);C.byId('target_application_id').setVisible(false);C.byId('target_application_idInput').setVisible(false);C.byId('application_description').setVisible(true);C.byId('target_application_descriptionInput').setVisible(true);C.byId('application_url').setVisible(true);C.byId('target_application_urlInput').setVisible(true);C.byId('application_component').setVisible(false);C.byId('target_application_componentInput').setVisible(false);C.byId('target_transaction').setVisible(false);C.byId('target_transactionInput').setVisible(false);C.byId('target_web_dynpro_application').setVisible(false);C.byId('target_web_dynpro_applicationInput').setVisible(false);C.byId('target_web_dynpro_configuration').setVisible(false);C.byId('target_web_dynpro_configurationInput').setVisible(false);C.byId('target_system_alias').setVisible(true);C.byId('target_system_aliasInput').setVisible(true);};
return U;},true);
sap.ui.predefine('sap/ushell/components/tiles/utilsRT',["sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat"],function(u,N){"use strict";var a={};
a.getConfiguration=function(t,A,E){var r;var c=t.configuration.getParameterValueAsString('tileConfiguration');try{var C=JSON.parse(c||"{}");}catch(e){jQuery.sap.log.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utilsRT");return{};}var U=sap.ui.require("sap/ushell/components/tiles/utils");C.editable=true;if(t.configurationUi&&t.configurationUi.isReadOnly){if(t.configurationUi.isReadOnly()){C.editable=false;}}var T=U.getTranslatedTitle(t);var s=U.getTranslatedSubtitle(t,C);var i=U.getTranslatedProperty(t,C,'display_info_text');var k=U.getTranslatedProperty(t,C,'display_search_keywords');if(A){r=U.getResourceBundleModel().getResourceBundle();if(E&&t.bag){var o=t.bag.getOriginalLanguage();var l=sap.ui.getCore().getConfiguration().getLocale().getSAPLogonLanguage();var b=sap.ui.getCore().getConfiguration().getLanguage();C.isLocaleSuitable=o===""||o.toLowerCase()===l.toLowerCase()||o.toLowerCase()===b.toLowerCase();C.orgLocale=o;C.userLocale=l;}}C.display_icon_url=C.display_icon_url||"";if(i!==undefined){C.display_info_text=i;}else if(C.display_info_text===undefined){if(A&&!E){C.display_info_text="["+r.getText("configuration.display_info_text")+"]";}else{C.display_info_text="";}}C.navigation_semantic_object=C.navigation_semantic_object||"";C.navigation_semantic_action=C.navigation_semantic_action||"";C.navigation_semantic_parameters=C.navigation_semantic_parameters||"";C.display_number_unit=C.display_number_unit||"";C.display_number_factor=C.display_number_factor||"";C.service_refresh_interval=C.service_refresh_interval?parseInt(C.service_refresh_interval,10):0;C.service_url=C.service_url||"";C.navigation_target_url=C.navigation_target_url||"";if(A&&U.isInitial(T)){C.display_title_text=E?"":"["+r.getText("configuration.display_title_text")+"]";C.display_subtitle_text=E?"":"["+r.getText("configuration.display_subtitle_text")+"]";}else{C.display_title_text=T||C.display_title_text||"";if(s!==undefined){C.display_subtitle_text=s;}else if(C.display_subtitle_text===undefined){C.display_subtitle_text="";}}C.navigation_use_semantic_object=(C.navigation_use_semantic_object===false?false:true);C.display_search_keywords=k||C.display_search_keywords||"";if(A){C.display_number_value=C.display_number_value||1234;}C.form_factors=C.form_factors?C.form_factors:U.getDefaultFormFactors();C.desktopChecked=C.form_factors.manual.desktop;C.tabletChecked=C.form_factors.manual.tablet;C.phoneChecked=C.form_factors.manual.phone;C.manualFormFactor=!(C.form_factors.appDefault)&&C.editable;C.appFormFactor=C.form_factors.appDefault;C.formFactorConfigDefault=C.form_factors.defaultParam?true:false;if(C.signature){C.rows=U.getSignatureTableData(C.signature,E&&C.editable);}else{C.rows=(C.mapping_signature&&C.mapping_signature!=="*=*")?U.getMappingSignatureTableData(C.mapping_signature,E&&C.editable):[U.getEmptyRowObj(C.editable)];}if(C.signature){C.isUnknownAllowed=(C.signature.additional_parameters==="allowed"||C.signature.additionalParameters==="allowed");}else{C.isUnknownAllowed=(C.mapping_signature!==undefined)?U.getAllowUnknownParametersValue(C.mapping_signature):true;}if(A){C.tile_actions_rows=U.getTileNavigationActionsRows(t,C.editable);}else{if(!C.actions){C.actions=U.getTileNavigationActions(t);}}return C;};
a.getDataToDisplay=function(c,d){var b=0,i,n,C,s,D={display_icon_url:d.icon||c.display_icon_url||"",display_title_text:d.title||c.display_title_text||"",display_number_value:!isNaN(d.number)?d.number:"...",display_number_unit:d.numberUnit||c.display_number_unit||"",display_info_text:d.info||c.display_info_text||"",display_info_state:d.infoState||"Neutral",display_subtitle_text:d.subtitle||c.display_subtitle_text||"",display_state_arrow:d.stateArrow||"None",display_number_state:d.numberState||"Neutral",display_number_digits:d.numberDigits>=0?d.numberDigits:4,display_number_factor:d.numberFactor||"",display_search_keyword:d.keywords||c.display_search_keyword||"",targetParams:[]};if(d.infoStatus){D.display_info_state=d.infoStatus;}if(d.targetParams){D.targetParams.push(d.targetParams);}if(d.results){for(i=0,n=d.results.length;i<n;i=i+1){C=d.results[i].number||0;if(typeof C==="string"){C=parseFloat(C,10);}b=b+C;s=d.results[i].targetParams;if(s){D.targetParams.push(s);}}D.display_number_value=b;}if(!isNaN(d.number)){if(typeof d.number==="string"){d.number=d.number.trim();}if(d.number===""){D.display_number_value="...";}else{var S=this._shouldProcessDigits(d.number,d.numberDigits),m=D.display_icon_url?4:5;if(d.number&&d.number.length>=m||S){var o=this._normalizeNumber(d.number,m,d.numberFactor,d.numberDigits);D.display_number_factor=o.numberFactor;D.display_number_value=o.displayNumber;}else{var e=N.getFloatInstance({maxFractionDigits:m});D.display_number_value=e.format(d.number);}}}if(D&&D.display_number_state){switch(D.display_number_state){case"Positive":D.display_number_state="Good";break;case"Negative":D.display_number_state="Error";break;}}return D;};
a.getTileSettingsAction=function(m,s,t){var u=sap.ui.require("sap/ushell/components/tiles/utils");var r=u.getResourceBundleModel().getResourceBundle();return{text:(!t||t=="tile")?r.getText('tileSettingsBtn'):r.getText('linkSettingsBtn'),press:function(){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout","sap/m/Button","sap/m/Dialog"],function(S,b,B,D){var A={showGroupSelection:false,title:m.getProperty('/config/display_title_text'),subtitle:m.getProperty('/config/display_subtitle_text')};if(!t||t=='tile'){A.info=m.getProperty('/config/display_info_text');A.icon=m.getProperty('/config/display_icon_url');A.keywords=m.getProperty('/config/display_search_keywords');}else if(t=='link'){A.showInfo=false;A.showIcon=false;A.showPreview=false;}var c=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.ui.footerbar.SaveAsTile",viewData:{appData:A}});var o=new S({id:'tileSettings',layout:b.GridLayout,content:[c]}).addStyleClass("sapUshellAddBookmarkForm");var d=new B('bookmarkOkBtn',{text:r.getText('okBtn'),press:function(){s(c);g.close();},enabled:true}),e=new B('bookmarkCancelBtn',{text:r.getText('cancelBtn'),press:function(){g.close();}});var f=function(h){d.setEnabled(h.trim()?true:false);};c.getTitleInput().attachLiveChange(function(){f(this.getValue());});var g=new D({id:'settingsDialog',title:(!t||t=="tile")?r.getText('tileSettingsDialogTitle'):r.getText('linkSettingsDialogTitle'),contentWidth:'400px',content:o,beginButton:d,endButton:e,horizontalScrolling:false,afterClose:function(){g.destroy();}});g.open();});}};};
a.getSemanticNavigationUrl=function(c){var U="#"+jQuery.trim(c.navigation_semantic_object);U+="-"+jQuery.trim(c.navigation_semantic_action);if(c.navigation_semantic_parameters&&jQuery.trim(c.navigation_semantic_parameters).length>0){U+="?"+jQuery.trim(c.navigation_semantic_parameters);}return U;};
a.addParamsToUrl=function(U,d){var p="",b=U.indexOf("?")!==-1,t=d.targetParams,i;if(t&&t.length>0){for(i=0;i<t.length;i=i+1){p+=t[i];if(i<t.length-1){p+="&";}}}if(p.length>0){if(!b){U+="?";}else{U+="&";}U+=p;}return U;};
a._normalizeNumber=function(n,m,b,i){var c;if(isNaN(n)){c=n;}else{var o=N.getFloatInstance({maxFractionDigits:i});if(!b){var d=Math.abs(n);if(d>=1000000000){b='B';n/=1000000000;}else if(d>=1000000){b='M';n/=1000000;}else if(d>=1000){b='K';n/=1000;}}c=o.format(n);}var e=c;var f=e[m-1];m-=(f==='.'||f===',')?1:0;e=e.substring(0,m);return{displayNumber:e,numberFactor:b};};
a._shouldProcessDigits=function(d,D){var n;d=typeof(d)!=='string'?d.toString():d;if(d.indexOf('.')!==-1){n=d.split(".")[1].length;if(n>D){return true;}}return false;};
return a;},true);
sap.ui.predefine('sap/ushell/components/treeview/NavTree.controller',["sap/m/GroupHeaderListItem"],function(G){"use strict";sap.ui.controller("sap.ushell.components.treeview.NavTree",{onInit:function(){var v=this.getView().getViewData(),r=v.data.items,s=v.data.serviceURL||'',t={items:[],entryObject:{}};var m=new sap.ui.model.json.JSONModel(t);this.getView().setModel(m);jQuery.getJSON(s).done(function(r){this.buidModelData(r);}.bind(this)).fail(function(j,a,e){var b=a+", "+e;jQuery.sap.log.error("Request Failed: "+b);this.buidModelData(r);}.bind(this));},buidModelData:function(r){var i,e,g=0,t={items:[],entryObject:{}};for(i in r.nodes){var a=r.nodes[i];if(a.type==='SUBMENU'){var b=a.title;for(e in a.nodes){var c=a.nodes[e];c.groupIndex=g.toString();c.groupName=b;t.items.push(c);t.entryObject[g.toString()]={title:a.title,type:a.type};}}else if(a.type==='URL'||a.type==='APP'){a.groupIndex=g.toString();a.groupName="";t.items.push(a);t.entryObject[g.toString()]={title:a.title,type:a.type,href:a.target};}g++;}var m=new sap.ui.model.json.JSONModel(t);this.getView().setModel(m);},getGroupHeader:function(g){var e=this.getView().getModel().getData().entryObject[g.key];if(e.type==="SUBMENU"){var i=new sap.ui.core.Icon({src:'slim-arrow-right',tooltip:e.title}).addStyleClass('sapUshellGroupListItemIcon');var l=new sap.m.Label({text:e.title}).addStyleClass('sapUshellNavTreeLink');return new sap.m.CustomListItem({press:[this.handleClickOnSubMenu,this],type:sap.m.ListType.Active,content:[i,l]}).addStyleClass('sapUshellNavTreeListItem sapUshellNavTreeParent');}else{return new sap.m.CustomListItem({content:new sap.m.Link({text:e.title,href:e.href}).addStyleClass('sapUshellNavTreeLink')}).addEventDelegate({onclick:this.onNavTreeTitleChange.bind(this)}).addStyleClass('sapUshellNavTreeListItem sapUshellNavTreeSingle');}},onNavTreeTitleChange:function(e){if(this._prevSelect){this._prevSelect.removeStyleClass('sapUshellNavTreeItemSelected');}var i=e.srcControl;if(e.srcControl.getContent){window.location.href=e.srcControl.getContent()[0].getHref();i.addStyleClass('sapUshellNavTreeItemSelected');this._prevSelect=i;}else{i.getParent().addStyleClass('sapUshellNavTreeItemSelected');this._prevSelect=i.getParent();}},handleClickOnSubMenu:function(e){var i=e.getSource().getContent()[0];if(i.getSrc()==='slim-arrow-down'){i.setSrc('slim-arrow-right');this.toggleSubItemsState(e,true);}else{i.setSrc('slim-arrow-down');this.toggleSubItemsState(e,false);}},toggleSubItemsState:function(e,i){if(e){var j=jQuery(e.getSource().getDomRef());if(i){j.nextUntil('.sapUshellNavTreeSingle, .sapUshellNavTreeParent').addClass("sapUshellNavTreeChildHide");}else{j.nextUntil('.sapUshellNavTreeSingle, .sapUshellNavTreeParent').removeClass("sapUshellNavTreeChildHide");}}}});},true);
sap.ui.predefine('sap/ushell/components/treeview/NavTree.view',["sap/m/List","sap/m/CustomListItem"],function(L,C){"use strict";sap.ui.jsview("sap.ushell.components.treeview.NavTree",{createContent:function(c){var l=new C({content:new sap.m.Link({text:"{title}",href:"{target}"}).addStyleClass('sapUshellNavTreeLink')}).addEventDelegate({onclick:c.onNavTreeTitleChange.bind(c)}).addStyleClass('sapUshellNavTreeListItem sapUshellNavTreeChild sapUshellNavTreeChildHide sapUshellNavTree_visual_transition');var o=new L({items:{path:'/items',groupHeaderFactory:jQuery.proxy(c.getGroupHeader,c),sorter:new sap.ui.model.Sorter("groupIndex",false,true),template:l}});var a=o.onAfterRendering;o.onAfterRendering=function(){a.apply(this,arguments);if(this.getItems().length>0){var f=this.getItems()[0];if(f.getMetadata().getName()==="sap.m.GroupHeaderListItem"&&f.getTitle&&!f.getTitle()){f.destroy();}var O=jQuery('.sapUshellNavTreeParent');O.each(function(){var q=jQuery(this);var i=sap.ui.getCore().byId(q.attr('id'));var I=i.getContent().length&&i.getContent()[0]&&i.getContent()[0].getSrc()||'';if(I==='slim-arrow-down'){q.nextUntil('.sapUshellNavTreeSingle, .sapUshellNavTreeParent').removeClass("sapUshellNavTreeChildHide");}});}};return o;},getControllerName:function(){return"sap.ushell.components.treeview.NavTree";}});},true);
sap.ui.predefine('sap/ushell/functionBindPrototype',function(){"use strict";if(!Function.prototype.bind){Function.prototype.bind=function(t){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var a=Array.prototype.slice.call(arguments,1),b=this,n=function(){},B=function(){return b.apply(this instanceof n&&t?this:t,a.concat(Array.prototype.slice.call(arguments)));};n.prototype=this.prototype;B.prototype=new n();return B;};}},false);
sap.ui.predefine('sap/ushell/iconfonts',['sap/ui/core/IconPool'],function(I){"use strict";var a={};
a.registerFiori2IconFont=function(){I.registerFont({fontFamily:"BusinessSuiteInAppSymbols",fontURI:jQuery.sap.getModulePath("sap.ushell.themes.base.fonts")});I.registerFont({fontFamily:"SAP-icons-TNT",fontURI:jQuery.sap.getModulePath("sap.tnt.themes.base.fonts")});I.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"TNTIcons",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts")});var f={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0018","e0c3"],["F0019","e0c3"],["F0020","e0c3"],["F0021","e10d"],["F0366","e129"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},F={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},A={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","E200"],["F0019","E201"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","E22F"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E213"],["F0429","E2A6"],["F0xx1","E240"],["F0xx2","E241"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},o={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E21C"],["F0251","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2BC"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"],["F0600","E38A"]]},b={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F0834","E31D"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E383"],["F0718","E384"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},c={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},d={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},e={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1030","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},g={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1563","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},h={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"],["Wifi-Online","E710"],["Wifi-Offline","E711"],["Sunrise","E712"],["Sunset","E713"],["Afternoon","E714"],["Night","E715"],["Loading Date","E715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71A"],["Heavy Rain","e71B"],["Foggy","e71C"],["Snow","e71D"],["Risk Assessment","e71E"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"],["Windy","e729"],["Oil Tank","e72A"],["Location Assets","e72B"],["Transport Systems","e72C"]]},i={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(f,F,A,h,o,b,i,c,d,e,g,s);};
a.registerFonts=function(){var o,i,j;for(i=0;i<arguments.length;i=i+1){o=arguments[i];for(j=0;j<o.icons.length;j=j+1){I.addIcon(o.icons[j][0],o.collectionName,o.fontFamily,o.icons[j][1],false,true);}}};
return a;},true);
sap.ui.predefine('sap/ushell/library',["sap/ui/core/library","sap/m/library","sap/ui/core/Core"],function(c,l,C){"use strict";C.initLibrary({name:"sap.ushell",dependencies:["sap.ui.core","sap.m"],types:["sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.components.container.ApplicationType"],interfaces:[],controls:["sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.EndUserFeedback","sap.ushell.ui.footerbar.HideGroupsButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage","sap.ushell.ui.launchpad.Fiori2LoadingDialog","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.HeaderTile","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Panel","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.ViewPortContainer","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:[],version:"1.60.40",extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});sap.ushell.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};sap.ushell.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};sap.ushell.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};sap.ushell.components.container.ApplicationType={URL:"URL",WDA:"WDA",NWBC:"NWBC",TR:"TR",WCF:"WCF"};return sap.ushell;},true);
sap.ui.predefine('sap/ushell/navigationMode',[],function(){"use strict";var e={};var _=function(E){var i=true;if(E){if(typeof E!=="object"){i=false;}else{Object.keys(E).forEach(function(k){if(["GUI","WDA","WCF"].indexOf(k)===-1){i=false;}else if(typeof E[k]!=="boolean"){i=false;}});}}if(!i){jQuery.sap.log.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(E),"sap.ushell.services.navigationMode");}};
e._isLegacyApplicationType=function(A){switch(A){case"WDA":case"TR":case"NWBC":case"WCF":return true;default:return false;}};
var a=function(A){switch(A){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined;}};var b=function(E,A){if(jQuery.isPlainObject(E)){return E[a(A)];}return false;};
e.compute=function(n,E,s,A,o){var i,l,c=["inplace","explace"];_(o);var N={};if(c.indexOf(E)>=0){N["sap-ushell-next-navmode"]=E;}if(c.indexOf(s)>=0){i=e._getInternalNavigationMode(s,n);jQuery.sap.log.debug("Navigation mode was forced to "+i,"because sap-ushell-navmode parameter was set to "+s+" for target with applicationType: "+A,"sap.ushell.navigationMode");N.navigationMode=i;N.explicitNavMode=true;return N;}l=e._isLegacyApplicationType(A)&&e._isLegacyApplicationType(n);if(b(o,n)===true&&!l){N.navigationMode="embedded";}return N;};
e._getInternalNavigationMode=function(E,A){var i={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded"},URL:{inplace:"embedded",explace:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded"}};if(!i.hasOwnProperty(A)){jQuery.sap.log.error(A+" is not a valid application type","expected one of "+Object.keys(i).join(", "),"sap.ushell.navigationMode");return null;}if(E!=="inplace"&&E!=="explace"){jQuery.sap.log.error(E+" is not a valid external navigation mode","expected one of 'inplace', 'explace'","sap.ushell.navigationMode");return null;}return i[A][E];};
e.getExternalNavigationMode=function(i){var E={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!E.hasOwnProperty(i)){jQuery.sap.log.error(i+" is not a recognized internal navigation mode","expected one of "+Object.keys(E).join(","),"sap.ushell.navigationMode");return null;}return E[i];};
var w=["NWBC","WDA","TR","WCF"];
e.getNavigationMode=function(r,c){var A=r.additionalInformation,s=r.applicationType,u,U;if(w.indexOf((c||{}).applicationType)>-1&&!(c||{}).explicitNavMode){return'newWindowThenEmbedded';}if((A===null||typeof A==="string"||typeof A==="undefined")&&(s==="URL"||s==="SAPUI5")){if(A&&A.indexOf("managed=")===0){if(A==="managed=FioriWave1"){return"embedded";}if(A==="managed="){return"newWindow";}return undefined;}if(A&&A.indexOf("SAPUI5.Component=")===0){u="[a-zA-Z0-9_]+";U=["^SAPUI5.Component=",u,"([.]",u,")*$"].join("");if(!(new RegExp(U)).test(A)){jQuery.sap.log.warning(["The UI5 component name in",A,"is not valid.","Please use names satisfying",U].join(" "));}return"embedded";}return"newWindow";}if(w.indexOf(s)>-1){return"newWindowThenEmbedded";}return undefined;};
e.computeNavigationModeForHomepageTiles=function(A,s,i){var r={applicationType:A,additionalInformation:s};if(w.indexOf(A)>-1&&i){return"embedded";}return this.getNavigationMode(r);};
return e;},true);
sap.ui.predefine('sap/ushell/override',function(){"use strict";var o={};
o.updateAggregation=function(n){if(this.isTreeBinding(n)){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments);}else{var b=this.mBindingInfos[n],B=b.binding,a=B.getContexts(),f=b.factory,A=this.getMetadata().getJSONKeys()[n],g=A._sMutator+"Group",G=B.isGrouped()&&this[g],i=0,I=[],c=jQuery.proxy(function(C){var s=this.getId()+"-"+jQuery.sap.uid(),d=f(s,C);d.setBindingContext(C,b.model);this[A._sMutator](d);},this);if(G){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments);}else{I=this[A._sGetter]();for(i=0;i<a.length;++i){if(i<I.length){I[i].setBindingContext(a[i],b.model);}else{c(a[i]);}}for(;i<I.length;++i){I[i].destroy();}I.length=a.length;}}};
o.updateAggregationGrouped=function(n){var b=this.mBindingInfos[n],B=b.binding,f=b.factory,c,N=null,g=null,G=null,t=this,I=t.getItems(),l=0,L=0,i,s,T=[];g=B.isGrouped()&&this.addItemGroup;jQuery.each(B.getContexts(),function(a,C){if(g&&B.aSorters.length>0){N=B.aSorters[0].fnGroup(C);if(typeof N==="string"){N={key:N};}if(N.key!==G){var d,h;if(b.groupHeaderFactory){d=b.groupHeaderFactory(N);}h=d||new sap.m.GroupHeaderListItem({title:N.text||N.key}).addStyleClass("sapMListHdr");t.insertAggregation("items",h,L,true);L=L+1;G=N.key;}}I=t.getItems();for(i=L;i<I.length;i=i+1){if(I[i].constructor===sap.m.GroupHeaderListItem){T.push(t.removeItem(I[i]));I=t.getItems();}}if(L<I.length){I[L].setBindingContext(C,b.model);if(I[L].aDelegates){jQuery.each(I[L].aDelegates,function(i,v){v.vThis=C;});}}else{s=t.getId()+"-"+L;c=f(s,C);c.setBindingContext(C,b.model);t.addItem(c);}L=L+1;l=L;});for(i=I.length-1;i>=l;i=i-1){T.push(t.removeItem(I[i]));}setTimeout(function(){jQuery.each(T,function(i,v){v.destroy();});},1);};
o.updateAggregatesFactory=function(n){return function(){jQuery.proxy(o.updateAggregation,this,n)();};};
return o;},true);
sap.ui.predefine('sap/ushell/plugins/BaseRTAPlugin',["sap/ui/thirdparty/jquery","sap/ui/thirdparty/hasher","sap/base/Log","sap/base/util/UriParameters","sap/ushell/plugins/BaseRTAPluginStatus","sap/ui/core/Component","sap/ui/core/BusyIndicator","sap/m/MessageBox"],function(q,h,L,U,P,C,B,M){"use strict";var S=P.STATUS_STARTING;var a=P.STATUS_STARTED;var b=P.STATUS_STOPPING;var c=P.STATUS_STOPPED;
var d=C.extend("sap.ushell.plugins.BaseRTAPlugin",{
sStatus:c,
sType:null,
oStartingPromise:null,
oStoppingPromise:null,
bValidateAppVersion:true,
_getRenderer:function(o){var D=new q.Deferred(),r;r=o.getRenderer();if(r){this.oRenderer=r;D.resolve(r);}else{this._onRendererCreated=function(e){r=e.getParameter("renderer");if(r){this.oRenderer=r;D.resolve(r);}else{D.reject("Illegal state: shell renderer not available after recieving 'rendererCreated' event.");}};o.attachRendererCreatedEvent(this._onRendererCreated,this);}return D.promise();},
init:function(m){this.mConfig=m;this.i18n=this.getModel("i18n").getResourceBundle();var f=this.getComponentData()&&this.getComponentData()['config'];if(f){if(typeof f["validateAppVersion"]==="boolean"){this.bValidateAppVersion=f["validateAppVersion"];}}var o=this._getContainer();var A=o.getService("AppLifeCycle");if(this._checkUI5App()){this._checkRestartRTA();}o.registerDirtyStateProvider(this._dirtyStateProvider.bind(this));A.attachAppLoaded(this._onAppLoaded,this);this._getRenderer(o).fail(function(e){L.error(e,undefined,this.mConfig.sComponentName);}.bind(this)).done(function(r){r.addActionButton("sap.ushell.ui.launchpad.ActionItem",{id:this.mConfig.id,text:this.i18n.getText(this.mConfig.text),icon:this.mConfig.icon,press:this._onAdapt.bind(this),visible:this.mConfig.visible&&this._checkUI5App()},true,false,[r.LaunchpadState.App]);}.bind(this));},
exit:function(){var o=this._getContainer();o.getService("AppLifeCycle").detachAppLoaded(this._onAppLoaded,this);if(this._onRendererCreated){o.detachRendererCreatedEvent(this._onRendererCreated,this);}},
_onAppLoaded:function(){if(this._checkUI5App()){this._checkRestartRTA();this._adaptButtonVisibility(this.mConfig.id,true);}else{this._adaptButtonVisibility(this.mConfig.id,false);}},
_getContainer:function(){var o=q.sap.getObject("sap.ushell.Container");if(!o){throw new Error("Illegal state: shell container not available; this component must be executed in a unified shell runtime context.");}return o;},
_onAdapt:function(){var s=((sap.ui.Device.browser.msie&&sap.ui.Device.browser.version>10)||sap.ui.Device.browser.webkit||sap.ui.Device.browser.firefox||sap.ui.Device.browser.edge);if(!s){M.error(this.i18n.getText("MSG_UNSUPPORTED_BROWSER"),{title:this.i18n.getText("ERROR_TITLE"),onClose:null});}else{this._startRta();}},
_adaptButtonVisibility:function(v,V){if(typeof v==="string"){v=sap.ui.getCore().byId(v);}if(!v){return;}v.setVisible(V);},
_checkUI5App:function(){var o=this._getCurrentRunningApplication();var u=o&&o.applicationType==="UI5";return u;},
_checkRestartRTA:function(){var u=new U(window.location.href);var s=u.get("sap-ui-layer");var l=s||this.mConfig.layer;var r=!!window.sessionStorage.getItem("sap.ui.rta.restart."+l);if(r){window.sessionStorage.removeItem("sap.ui.rta.restart."+l);this._startRta();}},
_getCurrentRunningApplication:function(){var A=this._getContainer().getService("AppLifeCycle");var o=A.getCurrentApplication();return o;},
_switchToDefaultMode:function(){if(this._oRTA){this._oRTA.destroy();this.sStatus=c;this.oStartingPromise=null;this.oStoppingPromise=null;this._oRTA=null;}sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);},
_startRta:function(){var o=this._getCurrentRunningApplication();var r=o.componentInstance;var s=this.sStatus;switch(s){case S:this.oStartingPromise=this.oStartingPromise;break;case a:this.oStartingPromise=Promise.resolve();break;case b:this.oStartingPromise=this.oStoppingPromise.then(function(){return this._triggerStartRta(r);}.bind(this));break;case c:this.oStartingPromise=this._triggerStartRta(r);break;}if(s!==S){this.oStartingPromise.then(function(){this.oStartingPromise=null;}.bind(this));}return this.oStartingPromise;},
_triggerStartRta:function(r){this.sStatus=S;return new Promise(function(R){sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);B.show(0);sap.ui.getCore().loadLibraries(["sap.ui.dt","sap.ui.rta"],{async:true}).then(function(){sap.ui.require(["sap/ui/rta/RuntimeAuthoring"],function(e){this.sOldHash=h.getHash();this._oRTA=new e({rootControl:r,validateAppVersion:this.bValidateAppVersion,flexSettings:{layer:this.mConfig.layer,developerMode:this.mConfig.developerMode}});this._oRTA.attachEvent('start',this._onStartHandler,this);this._oRTA.attachEvent('failed',this._errorHandler,this);this._oRTA.attachEvent('stop',this._switchToDefaultMode,this);this._loadPlugins(this._oRTA).then(function(){return this._oRTA.start().then(function(){B.hide();R();}).catch(this._errorHandler.bind(this));}.bind(this));}.bind(this));}.bind(this));}.bind(this)).then(function(){this.sStatus=a;}.bind(this));},
_stopRta:function(){var s=this.sStatus;switch(s){case S:this.oStoppingPromise=this.oStartingPromise.then(function(){return this._triggerStopRta.apply(this,arguments);}.bind(this));break;case a:this.oStoppingPromise=this._triggerStopRta.apply(this,arguments);break;case b:this.oStoppingPromise=this.oStoppingPromise;break;case c:this.oStoppingPromise=Promise.resolve();break;}if(s!==b){this.oStoppingPromise.then(function(){this.oStoppingPromise=null;}.bind(this));}return this.oStoppingPromise;},
_triggerStopRta:function(){this.sStatus=b;return this._oRTA.stop.apply(this._oRTA,arguments).then(function(){this._switchToDefaultMode();}.bind(this));},
_errorHandler:function(e){B.hide();if(e=="Reload triggered"){this.sStatus=c;}else{this._switchToDefaultMode();var E;var m;if(e instanceof Error){E=e.stack;m=this.i18n.getText("TECHNICAL_ERROR");}else if(typeof e==="string"){E=m=e;}L.error("Cannot start UI Adaptation: ",E);sap.ui.require(["sap/ui/rta/Utils"],function(f){M.error(m,{title:this.i18n.getText("ERROR_TITLE"),onClose:null,styleClass:f.getRtaStyleClassName()});}.bind(this));}},
_dirtyStateProvider:function(){if(this._oRTA&&this.sStatus===a){var u=this._getContainer();var o=u.getService("URLParsing");var H=h.getHash();var p=o.parseShellHash(H);var e=o.parseShellHash(this.sOldHash);this.sOldHash=H;if(p.semanticObject===e.semanticObject&&p.action===e.action&&p.appSpecificRoute!==e.appSpecificRoute){return false;}return this._oRTA.canUndo();}return false;},
_onStartHandler:function(){},
_loadPlugins:function(){return Promise.resolve();},
_onAppClosed:function(){this._stopRta(true,true);}
});
return d;},true);
sap.ui.predefine('sap/ushell/plugins/appwarmup/Component',["jquery.sap.global","sap/ui/core/Component","sap/ui/core/mvc/Controller","sap/ui/core/service/ServiceFactory","sap/ui/core/service/ServiceFactoryRegistry","./ShellUIService"],function(q,C,a,S,b,c){"use strict";var g=q.sap.getResourcePath("sap/ushell/plugins/ghostapp");var p={"name":"sap.ushell.plugins.ghostapp","manifest":true,"asyncHints":{"libs":[{"name":"sap.m"},{"name":"sap.ui.core"},{"name":"sap.f"},{"name":"sap.suite.ui.generic.template"},{"name":"sap.ui.comp"},{"name":"sap.ui.fl"},{"name":"sap.ui.generic.app"},{"name":"sap.ui.generic.template"},{"name":"sap.ui.table"},{"name":"sap.ui.unified"},{"name":"sap.uxap"},{"name":"sap.ui.layout"}],"cacheTokens":{"dataSources":{"/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/":"20180613155243"}},"requests":[{"name":"sap.ui.fl.changes","reference":"sap.ushell.plugins.ghostapp.Component"}],"waitFor":{}},"id":"sap.ushell.plugins.ghostapp","componentData":{"startupParameters":{},"technicalParameters":{}},"async":true};var s="sap.ushell.plugins.appwarmup.Component";return C.extend(s,{metadata:{version:"1.60.40",library:"sap.ushell"},doWarmUp:function(){var P=[];P.push(new Promise(function(r,d){sap.ui.require(["sap/ui/model/odata/ODataMetadata"],function(O){var o=O.prototype._loadMetadata;O.prototype._loadMetadata=function(u,e){if(this.sUrl&&this.sUrl.startsWith("/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/$metadata")){this.sUrl=g+"/metadata.xml";O.prototype._loadMetadata=o;}return o.call(this,u,e);};r();},d);}));Promise.all(P).then(function(){b.register("sap.ushell.plugins.appwarmup.ShellUIService",new S(c));return C.create(p);}).then(function(d){var h=document.createElement("div");h.style.visibility="hidden";document.body.appendChild(h);sap.ui.require(["sap/ui/core/ComponentContainer"],function(e){var f=new e();f.setComponent(d);f.placeAt(h);f.addEventDelegate({onAfterRendering:function(){setTimeout(function(){d.destroy();},5000);}});});}).catch(function(){q.sap.log.error("GhostApp component could not be created",null,this);});},init:function(){this.doWarmUp();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/AccessKeysHandler',['sap/ushell/EventHub','sap/ushell/ui/launchpad/ShortcutsHelpContainer','jquery.sap.keycodes','sap/ui/Device'],function(E,S,k,D){"use strict";var A=function(){};A.prototype={keyCodes:jQuery.sap.KeyCodes,bFocusOnShell:true,bFocusPassedToExternalHandlerFirstTime:true,isFocusHandledByAnotherHandler:false,fnExternalKeysHandler:null,sLastExternalKeysHandlerUrl:null,fnExternalShortcuts:null,isleftAltPressed:false,bForwardNavigation:true,appOpenedHandler:function(){var c=hasher.getHash();if(c!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null;}this.sLastExternalKeysHandlerUrl=c;},handleSearchKey:function(){var s=sap.ui.getCore().byId('sf');if(s&&$('#sf:visible').length===0){}jQuery(s).click();},setFocusOnSearchButton:function(e){e.preventDefault();var s=sap.ui.getCore().byId('sf');if(s){jQuery(s).focus();}},handleSearchAppFinderKey:function(e){var b=sap.ui.getCore().byId('appFinderSearch');if(!b||jQuery('#appFinderSearch:visible').length===0){return;}else if(jQuery('.sapUshellViewPortCenter').hasClass('centerClass')){jQuery(b).focus();e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();}},handleNavToMeArea:function(){var m=sap.ui.getCore().byId("mainShell");if(m&&m.getController().getModelConfiguration().appState!="headerless"){E.emit('showMeArea',Date.now());}setTimeout(function(){jQuery(".sapUshellActionItem:first").focus();},300);},handleSettingsButton:function(){var s=window.document.getElementById("userSettingsBtn"),c=sap.ushell.Container.getRenderer("fiori2").getShellConfig(),o=window.document.getElementById("endItemsOverflowBtn");if(s){s.focus();return;}if(c.moveUserSettingsActionToShellHeader){if(o){o.focus();}}else{E.emit('showMeArea',Date.now());window.setTimeout(function(){s=window.document.getElementById("userSettingsBtn");if(s){s.focus();}else{o=window.document.getElementById("overflowActions-overflowButton");if(o){o.focus();}}},300);}},handleNavToNotifications:function(){var m=sap.ui.getCore().byId("mainShell"),s;if(m){s=m.getController().getModelConfiguration().appState;}if(s!="headerless"){E.emit('showNotifications',Date.now());setTimeout(function(){jQuery("#notificationsView .sapUshellNotificationsListItem:visible:first").focus();},2000);}},handleSettings:function(){var u=sap.ui.getCore().byId('userSettingsBtn');if(u){u.firePress({"hotkeys":"ctrl_comma"});}},handleAccessOverviewKey:function(){var t=sap.ushell.resources.i18n,i=this.oModel.getProperty("/searchAvailable"),m=sap.ui.getCore().byId("mainShell"),c=[],s,d,b,o;if(D.browser.msie){document.addEventListener("help",this._cancelHelpEvent);}if(m){b=m.getController().getModelConfiguration().appState;}this.aShortcutsDescriptions.forEach(function(v){c.push(new sap.m.Label({text:v.description}));c.push(new sap.m.Text({text:v.text}));});if(i){c.push(new sap.m.Label({text:t.getText("hotkeyFocusOnSearchButton")}));c.push(new sap.m.Text({text:"Alt+F"}));}if(b!="headerless"){c.push(new sap.m.Label({text:t.getText("hotkeyFocusOnMeArea")}));c.push(new sap.m.Text({text:"Alt+M"}));c.push(new sap.m.Label({text:t.getText("hotkeyFocusOnNotifications")}));c.push(new sap.m.Text({text:"Alt+N"}));}c.push(new sap.m.Label({text:t.getText("hotkeyFocusOnSettingsButton")}));c.push(new sap.m.Text({text:"Alt+S"}));c.push(new sap.m.Label({text:t.getText("hotkeyOpenSettings")}));c.push(new sap.m.Text({text:"Ctrl+Comma"}));if(i){c.push(new sap.m.Label({text:t.getText("hotkeyFocusOnSearchField")}));c.push(new sap.m.Text({text:"Ctrl+Shift+F"}));}s=new S({content:c});o=new sap.m.Button({text:t.getText("okBtn"),press:function(){d.close();}});d=new sap.m.Dialog({id:"hotKeysGlossary",title:t.getText("hotKeysGlossary"),contentWidth:"29.6rem",leftButton:o,afterClose:function(){d.destroy();}});d.addContent(s);d.open();},handleShortcuts:function(e){var s=window.document.getElementById("shell-header"),t=this;if(e.altKey&&!e.shiftKey&&!e.ctrlKey&&s){switch(String.fromCharCode(e.keyCode)){case'M':this.handleNavToMeArea();e.preventDefault();break;case'N':this.handleNavToNotifications();e.preventDefault();break;case'S':s.setAttribute("accesskey","s");window.setTimeout(function(){t.handleSettingsButton();s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");}},0);e.preventDefault();break;case'F':this.setFocusOnSearchButton(e);e.preventDefault();break;}}if(e.ctrlKey){if(e.shiftKey){if(e.keyCode===70){this.handleSearchKey();}}else if(e.keyCode===188){this.handleSettings();}else if(e.keyCode===112){this.handleAccessOverviewKey();}else if(e.keyCode===83){this.handleSearchAppFinderKey(e);}}},registerAppKeysHandler:function(h){this.fnExternalKeysHandler=h;this.sLastExternalKeysHandlerUrl=hasher.getHash();},resetAppKeysHandler:function(){this.fnExternalKeysHandler=null;},getAppKeysHandler:function(){return this.fnExternalKeysHandler;},registerAppShortcuts:function(h,s){this.fnExternalShortcuts=h;this.aShortcutsDescriptions=s;},_handleFocusBackToMe:function(e,i){this.bFocusOnShell=true;if(i){jQuery("#"+i).focus();}else if(!e){jQuery("#meAreaHeaderButton").focus();}else if(e.shiftKey){this.bForwardNavigation=false;if(e.keyCode===jQuery.sap.KeyCodes.TAB){jQuery("#sapUshellHeaderAccessibilityHelper").focus();}else if(e.keyCode===jQuery.sap.KeyCodes.F6){e.preventDefault();jQuery("#meAreaHeaderButton").focus();}}else{this.bForwardNavigation=true;e.preventDefault();if(!jQuery("#meAreaHeaderButton").length){jQuery("#sapUshellHeaderAccessibilityHelper").focus();}else{jQuery("#meAreaHeaderButton").focus();}}this.bFocusPassedToExternalHandlerFirstTime=true;},setIsFocusHandledByAnotherHandler:function(h){this.isFocusHandledByAnotherHandler=h;},sendFocusBackToShell:function(p){var e=undefined,i=undefined;var P=typeof p;if(P==="string"){i=p;}else if(P==="object"){e=p;}this._handleFocusBackToMe(e,i);},_handleEventUsingExteranlKeysHandler:function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(this.fnExternalKeysHandler&&jQuery.isFunction(this.fnExternalKeysHandler)){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false;}}this.setIsFocusHandledByAnotherHandler(false);},_cancelHelpEvent:function(e){e.preventDefault();document.removeEventListener("help",this._cancelHelpEvent);},init:function(m){this.oModel=m;document.addEventListener("keydown",function(e){if(e.keyCode===16){return;}if(e.shiftKey){this.bForwardNavigation=false;}else{this.bForwardNavigation=true;}if(e.keyCode===this.keyCodes.TAB||e.keyCode===this.keyCodes.F6){setTimeout(function(){this._handleEventUsingExteranlKeysHandler(e);}.bind(this),0);}else{this._handleEventUsingExteranlKeysHandler(e);}if(e.keyCode===18){if(e.location===window.KeyboardEvent.DOM_KEY_LOCATION_LEFT){this.isleftAltPressed=true;}else{this.isleftAltPressed=false;}}if(this.isleftAltPressed||!e.altKey){this.handleShortcuts(e);if(this.fnExternalShortcuts){this.fnExternalShortcuts(e);}}}.bind(this),true);this._cancelHelpEvent=this._cancelHelpEvent.bind(this);}};var a=new A();E.on("AppRendered").do(A.prototype.appOpenedHandler.bind(a));return a;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/FlpMeasure',["jquery.sap.global","sap/ushell/utils/WindowUtils"],function(q,W){"use strict";var P=function(){var p=false,b={};function M(h,n,s,i){this.hash=h;this.name=n;this.start=s;this.end=0;this.duration=0;this.info=i;}function B(h,n,s,a,c){this.hash=h;this.name=n;this.scenario=a;this.sequence=c;this.start=s;this.end=0;this.percent=null;this.duration=0;this.funcs={};}this.start=function(s,a,c){var t=q.sap.now(),o;if(!p){return;}if(b[s]===undefined||b[s]===null){b[s]={};}if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]===null){o=new B(this.hash(),a,t,s,c);b[s][o.name]=o;}};this.startFunc=function(s,a,c,f,i){if(!p)return;var t=q.sap.now();var d=null;if(b[s]===undefined||b[s]===null){b[s]={};}if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]===null){d=new B(this.hash(),a,t,s,c);b[s][a]=d;}var e=new M(this.hash(),f,t,i);b[s][a].funcs[e.hash]=e;return e.hash;};this.end=function(s,a){if(!p)return;var t=q.sap.now();if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]!=null){b[s][a].end=t;b[s][a].duration=Math.round(b[s][a].end-b[s][a].start);}};this.endFunc=function(s,a,f){if(!p)return;var t=q.sap.now();if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]!=null){b[s][a].end=t;b[s][a].duration=Math.round(b[s][a].end-b[s][a].start);b[s][a].funcs[f].end=t;b[s][a].funcs[f].duration=Math.round(b[s][a].funcs[f].end-b[s][a].funcs[f].start);}};this.calc=function(){if(!p)return;return b;};this.hash=function(){if(!p)return;var v=(new Date()).valueOf().toString()+Math.random().toString();var h=5381;for(var i=0;i<v.length;i++){var c=v.charCodeAt(i);h=((h<<5)+h)+c;}return h;};this.getActive=function(){return p;};this.setActive=function(o,c){if(p===o){return;}p=o;document.addEventListener('keyup',function(e){if(e.shiftKey&&e.ctrlKey&&e.altKey&&e.keyCode==77){window.calc=JSON.stringify(q.sap.flpmeasure.calc());W.openURL(q.sap.getResourcePath("sap/ushell/renderers/fiori2/stat.html"));}},false);return p;};var m=location.href.match(/sap-flp-measure=([^\&]*)/);if(m&&m[1]){if(m[1]==="true"||m[1]==="x"||m[1]==="X"){this.setActive(true);}else{this.setActive(true,m[1]);}}};q.sap.flpmeasure=q.sap.flpmeasure||new P();return q.sap.flpmeasure;});
sap.ui.predefine('sap/ushell/renderers/fiori2/History',function(){"use strict";var H=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={};};
H.prototype.hashChange=function(n,o){var h=this._history.indexOf(n);if(h===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1);}this._history.push(n);this._historyPosition+=1;this.backwards=false;this.forwards=false;}else{this.backwards=this._historyPosition>h;this.forwards=this._historyPosition<h;this._historyPosition=h;}};
H.prototype.pop=function(){var l;if(this._history.length>0){l=this._history.pop();this._historyPosition--;}return l;};
H.prototype.isVirtualHashchange=function(n,o){return this._virtual.hasOwnProperty(o)&&this.getCurrentHash()===n&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===o;};
H.prototype.setVirtualNavigation=function(h){this._virtual[h]=true;};
H.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null;};
H.prototype.getHashIndex=function(h){return this._history.indexOf(h);};
H.prototype.getHistoryLength=function(){return this._history.length;};
return H;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Renderer',['sap/ui/core/UIComponent','./RendererExtensions','sap/ushell/ui/shell/ToolAreaItem','./FlpMeasure','sap/ushell/Config','sap/ushell/EventHub','sap/ushell/components/applicationIntegration/AppLifeCycle','sap/ui/model/json/JSONModel','sap/ushell/components/SharedComponentUtils','sap/ushell/services/AppConfiguration','sap/ushell/resources'],function(U,R,T,f,C,E,A,J,s,a,r){"use strict";
var b=U.extend("sap.ushell.renderers.fiori2.Renderer",{
metadata:{version:"1.60.40",dependencies:{version:"1.60.40",libs:["sap.ui.core","sap.m"],components:[]},routing:{config:{path:"sap.ushell.components",async:true,controlId:"viewPortContainer",clearAggregation:false,controlAggregation:"centerViewPort"},routes:[{name:"appfinder-legacy",pattern:"Shell-home&/appFinder/:menu:/:filter:"},{name:"home",pattern:["Shell-home?:hashParameters:","Shell-home&/:innerHash*:","Shell-home"],target:"home"},{name:"appfinder",pattern:["Shell-appfinder?:hashParameters:&/:innerHash*:","Shell-appfinder?:hashParameters*:","Shell-appfinder&/:innerHash*:","Shell-appfinder"],target:"appfinder"}],targets:{home:{name:"homepage",type:"Component",title:r.i18n.getText("homeBtn_tooltip"),id:"Shell-home-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},appfinder:{name:"appfinder",type:"Component",id:"Shell-appfinder-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}}}}},
init:function(){U.prototype.init.apply(this,arguments);var t=this;var o=this.getRouter();o.getRoute("home").attachMatched(function(){var h=r.i18n.getText("homeBtn_tooltip");A.switchViewState("home",false,"Shell-home");t.setCurrentCoreView("home");a.setCurrentApplication(null);A.getShellUIService().setTitle(h);A.getShellUIService().setHierarchy();A.getShellUIService().setRelatedApps();A.getAppMeta().setAppIcons();});o.getRoute("appfinder-legacy").attachMatched(function(e){o.navTo("appfinder",{},true);});o.getRoute("appfinder").attachMatched(function(e){var c=sap.ui.getCore().getComponent(t.createId("Shell-appfinder-component"));var d=e.getParameter("arguments");if(sap.ushell.Container.getRenderer("fiori2")){sap.ushell.Container.getRenderer("fiori2").setCurrentCoreView("appFinder");}a.setCurrentApplication(null);var g=c.getRouter();g.parse(d["innerHash*"]||"");A.switchViewState("app",false,"Shell-appfinder");A.getAppMeta().setAppIcons();});s.initializeAccessKeys(o);}
});
b.prototype.createContent=function(){var p=jQuery.sap.getUriParameters().get("appState")||jQuery.sap.getUriParameters().get("sap-ushell-config"),w,v=this.getComponentData()||{},o={applications:{"Shell-home":{}},rootIntent:"Shell-home"},V;w=(p==="headerless-opt")?"headerless":p;if(w){if(!v.config){v.config={};}v.config.appState=w;v.config.appStateOrig=p;v.config.inHeaderLessOpt=(p==="headerless-opt");}if(v.config){if(v.config.rootIntent===undefined){v.config.migrationConfig=true;}v.config=jQuery.extend(true,o,v.config);jQuery.extend(v.config.applications["Shell-home"],C.last("/core/home"),C.last("/core/catalog"));if(v.config.appState==="headerless"||v.config.appState==="merged"||v.config.appState==="blank"){v.config["enablePersonalization"]=false;C.emit("/core/shell/enablePersonalization",false);}else{v.config["enablePersonalization"]=C.last("/core/shell/enablePersonalization");}}f.start(0,"Creating Shell",0);if(v.config&&v.config.customViews){Object.keys(v.config.customViews).forEach(function(c){var V=v.config.customViews[c];sap.ui.view(c,{type:V.viewType,viewName:V.viewName,viewData:V.componentData});});}var S=C.createModel("/core/shell/model",J);v.shellModel=S;V=sap.ui.view('mainShell',{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.renderers.fiori2.Shell",height:"100%",viewData:v});V.setModel(S);this._oShellView=V;this.oShellModel=A.getElementsModel();V.loaded().then(function(V){sap.ushell.renderers.fiori2.utils.init(V.getController());this.shellCtrl=V.oController;}.bind(this));return V;};
b.prototype.createExtendedShellState=function(S,c){return A.shellElements().createExtendedShellState(S,c);};
b.prototype.applyExtendedShellState=function(S,c){this.oShellModel.applyExtendedShellState(S,c);};
b.prototype.showLeftPaneContent=function(i,c,S){if(c){A.shellElements().addShellModelForApplications("paneContent",typeof i==="string"?[i]:i);}else{this.oShellModel.addLeftPaneContent(typeof i==="string"?[i]:i,false,S);}};
b.prototype.showHeaderItem=function(i,c,S){if(c){A.shellElements().addShellModelForApplications("headItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addHeaderItem(typeof i==="string"?[i]:i,false,S);}};
b.prototype.showRightFloatingContainerItem=function(i,c,S){if(c){A.shellElements().addShellModelForApplications("RightFloatingContainerItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addRightFloatingContainerItem(typeof i==="string"?[i]:i,false,S);}};
b.prototype.showRightFloatingContainer=function(S){A.shellElements().setShellModelForApplications("showRightFloatingContainer",S);};
b.prototype.showToolAreaItem=function(i,c,S){if(c){A.shellElements().addShellModelForApplications("toolAreaItems",typeof aIds==="string"?[i]:i);}else{this.oShellModel.addToolAreaItem(i,false,S);}};
b.prototype.showActionButton=function(i,c,S,I){var B=[],d=[],o;if(typeof i==="string"){i=[i];}B=i.filter(function(e){o=sap.ui.getCore().byId(e);return o instanceof sap.m.Button&&!(o instanceof sap.ushell.ui.launchpad.ActionItem);});d=i.filter(function(e){o=sap.ui.getCore().byId(e);return o instanceof sap.ushell.ui.launchpad.ActionItem;});if(B.length){this.convertButtonsToActions(B,c,S,I);}if(d.length){if(c){A.shellElements().addShellModelForApplications("actions",i,I);}else{this.oShellModel.addActionButton(i,false,S,I);}}this.toggleOverFlowActions();};
b.prototype.showFloatingActionButton=function(i,c,S){if(c){A.shellElements().addShellModelForApplications("floatingActions",typeof i==="string"?[i]:i);}else{this.oShellModel.addFloatingActionButton(typeof i==="string"?[i]:i,false,S);}};
b.prototype.showHeaderEndItem=function(i,c,S){if(c){A.shellElements().addShellModelForApplications("headEndItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addHeaderEndItem(typeof i==="string"?[i]:i,false,S);}};
b.prototype.setHeaderVisibility=function(v,c,S){if(c){A.shellElements().setShellModelForApplications("headerVisible",v);}else{this.oShellModel.setHeaderVisibility(v,false,S);}};
b.prototype.showSubHeader=function(i,c,S){if(c){A.shellElements().addShellModelForApplications("subHeader",typeof i==="string"?[i]:i);}else{this.oShellModel.addSubHeader(typeof i==="string"?[i]:i,false,S);}};
b.prototype.showSignOutItem=function(c,S){if(c){A.shellElements().addShellModelForApplications("actions",["logoutBtn"],false);}else{this.oShellModel.showSignOutButton(c,S);}};
b.prototype.showSettingsItem=function(c,S){this.oShellModel.showSettingsButton(c,S);};
b.prototype.setFooter=function(F){this.shellCtrl.setFooter(F);};
b.prototype.setShellFooter=function(p){var d=new jQuery.Deferred(),t=this,c,o,e=p.controlType,g=p.oControlProperties;if(g&&g.id&&sap.ui.getCore().byId(g.id)){o=sap.ui.getCore().byId(g.id);if(o){if(this.lastFooterId){this.removeFooter();}this.lastFooterId=oInnerControl.getId();this.shellCtrl.setFooter(o);d.resolve(o);}}if(e){c=e.replace(/\./g,"/");sap.ui.require([c],function(h){o=new h(g);if(t.lastFooterId){t.removeFooter();}t.lastFooterId=o.getId();t.shellCtrl.setFooter(o);d.resolve(o);});}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return d.promise();};
b.prototype.setFooterControl=function(c,o){var d=c.replace(/\./g,"/"),e=sap.ui.require(d),g,h,i=false;if(e){i=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}h=function(o){if(c){if(i){return new e(o);}else{var j=jQuery.sap.getObject(c);return new j(o);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};g=this.createItem(o,undefined,undefined,h);if(this.lastFooterId){this.removeFooter();}this.lastFooterId=g.getId();this.shellCtrl.setFooter(g);return g;};
b.prototype.hideHeaderItem=function(i,c,S){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],c,S);}else{this.oShellModel.removeHeaderItem(i,c,S);}};
b.prototype.removeToolAreaItem=function(i,c,S){E.once("ToolAreaCreated").do(function(){if(typeof i==="string"){this.oShellModel.removeToolAreaItem([i],c,S);}else{this.oShellModel.removeToolAreaItem(i,c,S);}}.bind(this));};
b.prototype.removeRightFloatingContainerItem=function(i,c,S){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],c,S);}else{this.oShellModel.removeRightFloatingContainerItem(i,c,S);}};
b.prototype.hideActionButton=function(i,c,S){if(typeof i==="string"){this.oShellModel.removeActionButton([i],c,S);}else{this.oShellModel.removeActionButton(i,c,S);}this.toggleOverFlowActions();};
b.prototype.toggleOverFlowActions=function(){jQuery.sap.measure.start("FLP:Shell.controller.toggleMeAreaView","show or hide actionbox if no actions in me area","FLP");var m=sap.ui.getCore().byId('meArea');var B={};try{if(m){if(m.actionBox){if(m.actionBox._getControlsIds().length===0){sap.ui.getCore().byId('overflowActions').setVisible(false);}else{m.actionBox._getControlsIds().forEach(function(c){var d=sap.ui.getCore().byId(c);if(d.getVisible()){throw B;}});sap.ui.getCore().byId('overflowActions').setVisible(false);}}}}catch(e){if(e!==B){throw e;}else{sap.ui.getCore().byId('overflowActions').setVisible(true);}}jQuery.sap.measure.end("FLP:Shell.controller.toggleMeAreaView");};
b.prototype.hideLeftPaneContent=function(i,c,S){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],c,S);}else{this.oShellModel.removeLeftPaneContent(i,c,S);}};
b.prototype.hideFloatingActionButton=function(i,c,S){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],c,S);}else{this.oShellModel.removeFloatingActionButton(i,c,S);}};
b.prototype.hideHeaderEndItem=function(i,c,S){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],c,S);}else{this.oShellModel.removeHeaderEndItem(i,c,S);}};
b.prototype.hideSubHeader=function(i,c,S){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],c,S);}else{this.oShellModel.removeSubHeader(i,c,S);}};
b.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){var F=sap.ui.getCore().byId(this.lastFooterId);if(F){F.destroy();}this.lastFooterId=undefined;}};
b.prototype.getCurrentViewportState=function(){return this.shellCtrl.getCurrentViewportState();};
b.prototype.addShellSubHeader=function(p){var d=new jQuery.Deferred(),t=this,c,o,e=p.controlType,g=p.oControlProperties,i=p.bIsVisible,h=p.bCurrentState,S=p.aStates;if(g&&g.id&&sap.ui.getCore().byId(g.id)){o=sap.ui.getCore().byId(g.id);if(o){if(i){this.showSubHeader(o.getId(),h,S);}d.resolve(o);}}if(e){c=e.replace(/\./g,"/");sap.ui.require([c],function(j){o=new j(g);if(i){t.showSubHeader(o.getId(),h,S);t.oShellModel.addElementToManagedQueue(o);}d.resolve(o);});}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return d.promise();};
b.prototype.addSubHeader=function(c,o,i,d,S){var e=c.replace(/\./g,"/"),g=sap.ui.require(e),h,j,k=false;if(g){k=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}j=function(o){if(c){if(k){return new g(o);}else{var l=jQuery.sap.getObject(c);return new l(o);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};h=this.createItem(o,d,S,j);if(i){this.showSubHeader(h.getId(),d,S);}return h;};
b.prototype.addUserAction=function(p){var d=new jQuery.Deferred(),t=this,c,o,e=p.controlType,g=p.oControlProperties,i=p.bIsVisible,h=p.bCurrentState,m=h?A.shellElements().getStateModelToUpdate():this.oShellModel.getModelToUpdate(),S=p.aStates,I=p.bIsFirst||true,n;if(g){o=sap.ui.getCore().byId(g.id);}if(o){d.resolve(o);}if(e){if(e==="sap.m.Button"){e="sap.ushell.ui.launchpad.ActionItem";}c=e.replace(/\./g,"/");sap.ui.require([c],function(j){var O=h?A.shellElements().getStateModelToUpdate():t.oShellModel.getModelToUpdate();h?A.shellElements().setStateModelToUpdate(m):t.oShellModel.setModelToUpdate(m,true);o=o||new j(g);if(!o.getActionType){o=new j(g);}if(i){t.showActionButton(o.getId(),h,S,I);}h?A.shellElements().setStateModelToUpdate(O):t.oShellModel.setModelToUpdate(O,false);d.resolve(o);});}else{n="You must specify control type in order to create it";jQuery.sap.log.warning(n);d.reject(n);}return d.promise();};
b.prototype.addActionButton=function(c,o,i,d,S,I){var e,g,h,j,k=false;if(c==="sap.m.Button"){c="sap.ushell.ui.launchpad.ActionItem";}e=c.replace(/\./g,"/");g=sap.ui.require(e);if(g){k=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}j=function(o){if(c){if(k){return new g(o);}else{var l=jQuery.sap.getObject(c);return new l(o);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};h=this.createItem(o,d,S,j);if(i){this.showActionButton(h.getId(),d,S,I);}return h;};
b.prototype.addFloatingButton=function(p){var d=new jQuery.Deferred(),t=this,c,o,e=p.controlType,g=p.oControlProperties,i=p.bIsVisible,h=p.bCurrentState,S=p.aStates;if(g&&g.id&&sap.ui.getCore().byId(g.id)){o=sap.ui.getCore().byId(g.id);if(o){if(i){t.showFloatingActionButton(oItem.getId(),h,S);t.oShellModel.addElementToManagedQueue(o);}d.resolve(o);}}if(e){c=e.replace(/\./g,"/");}else{c="sap/m/Button";}sap.ui.require([c],function(j){o=new j(g);if(i){this.showFloatingActionButton(oItem.getId(),h,S);}d.resolve(o);});return d.promise();};
b.prototype.addFloatingActionButton=function(c,o,i,d,S){var e,g,h,j,k=false;if(!c){c="sap.m.Button";}e=c.replace(/\./g,"/");g=sap.ui.require(e);if(g){k=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}j=function(o){if(c){if(k){return new g(o);}else{var l=jQuery.sap.getObject(c);return new l(o);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};h=this.createItem(o,d,S,j);if(i){this.showFloatingActionButton(h.getId(),d,S);}return h;};
b.prototype.addSidePaneContent=function(p){var d=new jQuery.Deferred(),t=this,c,o,e=p.controlType,g=p.oControlProperties,i=p.bIsVisible,h=p.bCurrentState,S=p.aStates;if(g&&g.id&&sap.ui.getCore().byId(g.id)){o=sap.ui.getCore().byId(g.id);if(o){d.resolve(o);}}if(e){c=e.replace(/\./g,"/");sap.ui.require([c],function(j){o=new j(g);if(i){t.oShellModel.addElementToManagedQueue(o);t.showLeftPaneContent(oItem.getId(),h,S);}d.resolve(o);});}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return d.promise();};
b.prototype.addLeftPaneContent=function(c,o,i,d,S){var e=c.replace(/\./g,"/"),g=sap.ui.require(e),h,j,k;if(g){k=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}j=function(o){if(c){if(k){return new g(o);}else{var l=jQuery.sap.getObject(c);return new l(o);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};h=this.createItem(o,d,S,j);if(i){this.showLeftPaneContent(h.getId(),d,S);}return h;};
b.prototype.addHeaderItem=function(c,o,i,d,S){if(typeof(arguments[0])==='object'&&typeof(arguments[1])==='boolean'){o=arguments[0];i=arguments[1];d=arguments[2];S=arguments[3];}else{jQuery.sap.log.warning("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var p=o;p.showSeparator=false;var e=function(o){return new sap.ushell.ui.shell.ShellHeadItem(o);},I=this.createItem(p,d,S,e);if(i){this.showHeaderItem(I.getId(),d,S);}return I;};
b.prototype.addRightFloatingContainerItem=function(c,i,d,S){var e=function(c){return new sap.m.NotificationListItem(c);},I=this.createItem(c,d,S,e);if(i){this.showRightFloatingContainerItem(I.getId(),d,S);}return I;};
b.prototype.addToolAreaItem=function(c,i,d,S){var e=function(c){return new T(c);},I=this.createItem(c,d,S,e);E.once("ToolAreaCreated").do(function(){if(i){this.showToolAreaItem(I.getId(),d,S);}}.bind(this));return I;};
b.prototype.addHeaderEndItem=function(c,o,i,d,S){var p=o;p.showSeparator=false;var e=function(o){return new sap.ushell.ui.shell.ShellHeadItem(o);},I=this.createItem(p,d,S,e);if(i){this.showHeaderEndItem(I.getId(),d,S);}return I;};
b.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration();};
b.prototype.addEndUserFeedbackCustomUI=function(c,S){this.shellCtrl.addEndUserFeedbackCustomUI(c,S);};
b.prototype.addUserPreferencesEntry=function(e){return this.shellCtrl.addUserPreferencesEntry(e);};
b.prototype.setHeaderTitle=function(t,c,o){var d,e=null,g;if(o&&o.id&&sap.ui.getCore().byId(o.id)){e=sap.ui.getCore().byId(o.id);this.shellCtrl.setHeaderTitle(t,e);}else if(c){d=c.replace(/\./g,"/");g=sap.ui.require(d);if(g){e=new g(o);this.shellCtrl.setHeaderTitle(t,e);}else{sap.ui.require([d],function(g){e=new g(o);this.shellCtrl.setHeaderTitle(t,e);});}}else{this.shellCtrl.setHeaderTitle(t,e);}};
b.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};
b.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};
b.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};
b.prototype.setFloatingContainerContent=function(c,d,S){this.shellCtrl.setFloatingContainerContent("floatingContainerContent",[c.getId()],d,S);};
b.prototype.setFloatingContainerVisibility=function(v){this.shellCtrl.setFloatingContainerVisibility(v);};
b.prototype.getFloatingContainerState=function(){return this.shellCtrl.getFloatingContainerState();};
b.prototype.getFloatingContainerVisiblity=function(){return this.shellCtrl.getFloatingContainerVisibility();};
b.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility();};
b.prototype.setFloatingContainerDragSelector=function(e){this.shellCtrl.setFloatingContainerDragSelector(e);};
b.prototype.makeEndUserFeedbackAnonymousByDefault=function(e){this.shellCtrl.makeEndUserFeedbackAnonymousByDefault(e);};
b.prototype.showEndUserFeedbackLegalAgreement=function(S){this.shellCtrl.showEndUserFeedbackLegalAgreement(S);};
b.prototype.LaunchpadState={App:"app",Home:"home"};
b.prototype.createInspection=function(c,d,e,S){this.oShellModel.createInspection(c,d,e,S);};
b.prototype.createTriggers=function(t,c,S){this.oShellModel.createTriggers(t,c,S);};
b.prototype.convertButtonsToActions=function(i,c,S,I){var p={},B,t=this;i.forEach(function(d){B=sap.ui.getCore().byId(d);p.id=B.getId();p.text=B.getText();p.icon=B.getIcon();p.tooltip=B.getTooltip();p.enabled=B.getEnabled();p.visible=B.getVisible();if(B.mEventRegistry&&B.mEventRegistry.press){p.press=B.mEventRegistry.press[0].fFunction;}B.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,c,S,I);});};
b.prototype.createItem=function(c,d,S,e){var i;if(c&&c.id){i=sap.ui.getCore().byId(c.id);}if(!i){i=e(c);if(d){this.oShellModel.addElementToManagedQueue(i);}}return i;};
b.prototype.addEntryInShellStates=function(n,e,c,d,S){this.oShellModel.addEntryInShellStates(n,e,c,d,S);};
b.prototype.removeCustomItems=function(S,i,c,d){if(typeof i==="string"){this.oShellModel.removeCustomItems(S,[i],c,d);}else{this.oShellModel.removeCustomItems(S,i,c,d);}};
b.prototype.addCustomItems=function(S,i,c,d){if(typeof i==="string"){this.oShellModel.addCustomItems(S,[i],c,d);}else{this.oShellModel.addCustomItems(S,i,c,d);}};
b.prototype.addRightViewPort=function(v){this.shellCtrl.oViewPortContainer.addRightViewPort(v,false);};
b.prototype.addLeftViewPort=function(v){this.shellCtrl.oViewPortContainer.addLeftViewPort(v,false);};
b.prototype.getShellController=function(){return this.shellCtrl;};
b.prototype.getViewPortContainerCurrentState=function(){return this.shellCtrl.oViewPortContainer.getCurrentState();};
b.prototype.ViewPortContainerNavTo=function(n,t,c){return this.shellCtrl.oViewPortContainer.navTo(n,t,c);};
b.prototype.switchViewPortStateByControl=function(o,S){var t=this,c=false;if(o&&o.setEnabled&&typeof o.setEnabled==="function"){c=true;}if(c){o.addStyleClass("sapUshellShellHeadItemOverrideDisableStyle");o.setEnabled(false);}function d(){o.setEnabled(true);o.removeStyleClass("sapUshellShellHeadItemOverrideDisableStyle");t.shellCtrl.oViewPortContainer.detachAfterSwitchStateAnimationFinished(d);}if(c){this.ViewPortContainerAttachAfterSwitchStateAnimationFinished(d);}this.shellCtrl.oViewPortContainer.switchState(S);};
b.prototype.ViewPortContainerAttachAfterSwitchStateAnimationFinished=function(c){this.shellCtrl.oViewPortContainer.attachAfterSwitchStateAnimationFinished(c);};
b.prototype.setMeAreaSelected=function(S){this.shellCtrl.setMeAreaSelected(S);};
b.prototype.getMeAreaSelected=function(){return this.shellCtrl.getMeAreaSelected();};
b.prototype.setNotificationsSelected=function(S){this.shellCtrl.setNotificationsSelected(S);};
b.prototype.getNotificationsSelected=function(){return this.shellCtrl.getNotificationsSelected();};
b.prototype.addShellDanglingControl=function(c){this.shellCtrl.getView().addDanglingControl(c);};
b.prototype.getShellConfig=function(){return(this.shellCtrl.getView().getViewData()?this.shellCtrl.getView().getViewData().config||{}:{});};
b.prototype.getEndUserFeedbackConfiguration=function(){return this.shellCtrl.oEndUserFeedbackConfiguration;};
b.prototype.reorderUserPrefEntries=function(e){return this.shellCtrl._reorderUserPrefEntries(e);};
b.prototype.addUserProfilingEntry=function(e){this.shellCtrl.addUserProfilingEntry(e);};
b.prototype.logRecentActivity=function(o){if(!o.appType){o.appType="App";}if(!o.appId){o.appId=o.url;}return this.shellCtrl._logRecentActivity(o);};
b.prototype.setCurrentCoreView=function(c){this.currentCoreView=c;};
b.prototype.getCurrentCoreView=function(){return this.currentCoreView;};
return b;});
sap.ui.predefine('sap/ushell/renderers/fiori2/RendererExtensions',['sap/ushell/EventHub'],function(E){"use strict";
function _(C){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"});},0);E.emit("RendererLoaded",{rendererName:"fiori2"});}
function a(x,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",x,D);},0);}
sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=a;sap.ushell.renderers.fiori2.utils.init=_;
function b(I,L,x){sap.ushell.Container.getRenderer("fiori2").showSubHeader(I.getId(),false,[L,x]);}
function c(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideSubHeader(I.getId(),false,[L,x]);}
function d(I,L,x){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(I.getId(),false,[L,x]);}
function e(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(I.getId(),false,[L,x]);}
function f(B,L,x){sap.ushell.Container.getRenderer("fiori2").showActionButton(B.getId(),false,[L,x]);}
function g(B,L,x){sap.ushell.Container.getRenderer("fiori2").hideActionButton(B.getId(),false,[L,x]);}
function h(C,L,x){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(C.getId(),false,[L,x]);}
function i(L,x){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[L,x]);}
function j(I,L,x){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(I.getId(),false,[L,x]);}
function k(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(I.getId(),false,[L,x]);}
function l(I,L,x){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(I.getId(),false,[L,x]);}
function m(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(I.getId(),false,[L,x]);}
function n(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration();}
function o(I,L,T,x){var y=sap.ui.getCore().byId(I);if(x){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(y.getId(),T,[L]);}}
function p(C,S){sap.ushell.Container.getRenderer("fiori2").addEndUserFeedbackCustomUI(C,S);}
function q(x){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(x);}
function r(T){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(T);}
function s(L,V){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(L,V);}
function t(H){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(H);}
function u(F){sap.ushell.Container.getRenderer("fiori2").setFooter(F);}
function v(){sap.ushell.Container.getRenderer("fiori2").removeFooter();}
function R(){this.addHeaderItem=d;this.setHeaderItemVisibility=o;this.addSubHeader=b;this.removeSubHeader=c;this.addHeaderEndItem=l;this.removeHeaderItem=e;this.removeHeaderEndItem=m;this.addEndUserFeedbackCustomUI=p;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=g;this.setFooter=u;this.removeFooter=v;this.addUserPreferencesEntry=q;this.setHeaderTitle=r;this.setHeaderHiding=t;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=j;this.removeFloatingActionButton=k;this.setLeftPaneContent=h;this.removeLeftPaneContent=i;this.setLeftPaneVisibility=s;this.getConfiguration=n;}
var w=new R();return w;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.controller',["sap/ushell/ui5service/ShellUIService","sap/ui/Device","sap/ushell/CanvasShapesManager","./AccessKeysHandler","./History","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/services/AppConfiguration","sap/ushell/services/AppType","sap/ushell/services/Message","sap/ushell/ui/launchpad/Fiori2LoadingDialog","sap/ushell/utils","sap/ushell/resources","sap/ushell/UserActivityLog","sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component","jquery.sap.storage","sap/ushell/utils/WindowUtils"],function(S,D,C,A,H,a,b,c,M,F,u,r,U,E,d,f,g,W){"use strict";var h=true,p=false,B=false,s,j=a.getElementsModel(),m,o={embedded:0,newWindowThenEmbedded:1,newWindow:1,replace:0},n={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"},k={};sap.ui.controller("sap.ushell.renderers.fiori2.Shell",{_aDoableObjects:[],onComponentTargetDisplay:function(e){var P=e.getParameters(),i=P.control,l=P.object;i.navTo("centerViewPort",l.getId(),"show");},onInit:function(){var e=this.getView().updateShellAggregation;sap.ui.getCore().byId("shell-header").updateAggregation=e;sap.ui.getCore().byId("shell").updateAggregation=e;sap.ui.getCore().byId("right-floating-container").updateAggregation=e;sap.ui.getCore().byId("shell-split").updateAggregation=e;var R=f.getOwnerComponentFor(this.getView()).getRouter();R.getTarget("home").attachDisplay(this.onComponentTargetDisplay);R.getTarget("appfinder").attachDisplay(this.onComponentTargetDisplay);R.initialize(true);this.bEnableHashChange=true;B=false;h=true;var v=this.getView();var i=window.matchMedia("(min-width: 600px)"),l;var k=(v.getViewData()?v.getViewData().config:{})||{};a.parseStatefulContainerConfiguration(k.statefulApplicationContainer);this.oEndUserFeedbackConfiguration={showAnonymous:true,anonymousByDefault:true,showLegalAgreement:true,showCustomUIContent:true,feedbackDialogTitle:true,textAreaPlaceholder:true,customUIContent:undefined};k["enableBackGroundShapes"]=k.enableBackGroundShapes===undefined?true:k.enableBackGroundShapes;this.initShellModel(k);l=function(w){d.emit("/core/shell/model/isPhoneWidth",!w.matches);};if(i.addListener){i.addListener(l);l(i);}v.setModel(r.i18nModel,"i18n");v.oShellHeader.setModel(m);v.oShellHeader.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);this._setConfigurationToModel();this._aDoableObjects=this._registerAndCreateEventHubDoables(k);sap.ushell.Container.getService("AppLifeCycle");s.addHeaderEndItem(["NotificationsCountButton"],false,["home","app","minimal"],true);this.history=new H();this.oViewPortContainer=sap.ui.getCore().byId("viewPortContainer");a.init(k.appState,this.oViewPortContainer,k.rootIntent,k.disableHomeAppCache,{ownerComponent:this.getOwnerComponent()},k.storageSize?k.storageSize:10);this.oNotificationsCountButton=sap.ui.getCore().byId("NotificationsCountButton");this.oFiori2LoadingDialog=sap.ui.getCore().byId("Fiori2LoadingDialog");var q=function(w){this.oShellNavigation=w;this.oShellNavigation.registerExtraRouter(R);this.oShellNavigation.registerNavigationFilter(this._handleEmptyHash.bind(this));this.oShellNavigation.init(this.doHashChange.bind(this));this.oShellNavigation.registerNavigationFilter(this._disableSourceAppRouter.bind(this));this.oShellNavigation.registerNavigationFilter(this.handleDataLoss.bind(this));this.oShellNavigation.registerNavigationFilter(this._savePreviousHash.bind(this));this._previousHash=null;E.emit("ShellNavigationInitialized");}.bind(this);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("URLShortening")]).then(function(){return sap.ushell.Container.getServiceAsync("ShellNavigation");}).then(q);sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());A.init(m);window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()){if(!r.browserI18n){r.browserI18n=r.getTranslationModel(window.navigator.language).getResourceBundle();}return r.browserI18n.getText("dataLossExternalMessage");}};if(d.last("/core/shell/model/contentDensity")){a.getAppMeta()._applyContentDensityClass();}D.media.attachHandler(this.onScreenSizeChange,this,D.media.RANGESETS.SAP_STANDARD);this.onScreenSizeChange(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD));D.orientation.attachHandler(function(){var w=sap.ui.getCore().byId('viewPortContainer');if(w&&w.getCurrentState()!=="Center"){w.switchState("Center");}});this.initShellUIService();sap.ui.getCore().attachThemeChanged(this.redrawBackGroundShapes);if(k.sessionTimeoutIntervalInMinutes){var L=20000,t=this;setTimeout(function(){t._createSessionHandler(k);},L);}this.oViewPortContainer.onfocusin=function(){A.bFocusOnShell=false;A.bFocusPassedToExternalHandlerFirstTime=false;};this.oViewPortContainer.onfocusout=function(){A.bFocusOnShell=true;A.bFocusPassedToExternalHandlerFirstTime=true;};},shellUpdateAggItem:function(i,e){return sap.ui.getCore().byId(e.getObject());},_registerAndCreateEventHubDoables:function(k){var e=[E.once("CenterViewPointContentRendered").do(this._loadCoreExt.bind(this)),E.on("AppRendered").do(this.setBackGroundShapes.bind(this)),E.on("AppRendered").do(this.delayedCloseLoadingScreen.bind(this)),E.once("AppRendered").do(this._loadCoreExtNonUI5.bind(this)),E.on("toggleContentDensity").do(this.toggleContentDensity.bind(this)),E.on("ShellFloatingContainerDockedIsResized").do(this._onResizeWithDocking.bind(this)),E.on("LaunchpadCustomRouterRouteMatched").do(this._centerViewPort.bind(this)),E.once("CoreResourcesComplementLoaded").do(this._onCoreResourcesComplementLoaded.bind(this)),E.once("RendererExtensionPluginsLoaded").do(this._onRendererExtensionPluginsLoaded.bind(this)),E.join(E.once("RendererExtensionPluginsLoaded"),E.once("firstSegmentCompleteLoaded"),E.once("ShellComplete")).do(this._loadWarmupPlugins.bind(this))];if(k&&k.moveEditHomePageActionToShellHeader){e.push(E.on("showCatalog").do(this._hideEditButton.bind(this)));}return e;},initShellModel:function(k){s=j;s.init(k,a.shellElements().model());m=this.getView().getViewData().shellModel;d.emit("/core/shell/model/personalization",d.last("/core/shell/enablePersonalization"));},redrawBackGroundShapes:function(){if(k.enableBackGroundShapes){C.drawShapes();}},setBackGroundShapes:function(){var e=d.last("/core/shell/model/animationMode")!=='minimal';if(!B&&k.enableBackGroundShapes){B=true;C.drawShapes();C.enableAnimationDrawing(e);}},initShellUIService:function(){a.initShellUIService({fnOnBackNavigationChange:this.onBackNavigationChange.bind(this)});if(k.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],function(e){this.oUserStatus=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"});this.oUserStatus.attachEnabledStatusChanged(function(i){d.emit("/core/shell/model/userStatusEnabled",i.mParameters.data);}.bind(this));this.oUserStatus.attachStatusChanged(function(i){var l=i.mParameters.data;d.emit("/core/shell/model/userStatus",l);if(l===null){d.emit("/core/shell/model/userStatusUserEnabled",false);}else{d.emit("/core/shell/model/userStatusUserEnabled",true);}}.bind(this));}.bind(this));}},onBackNavigationChange:function(e){this.isBackNavigationChanged=true;var i=e.getParameters().data,l=d.last("/core/shell/model/currentState");if(i){a.service().setNavigateBack(i);if(l.stateName==='minimal'||l.stateName==='standalone'||l.stateName==='embedded'){sap.ushell.Container.getRenderer('fiori2').showHeaderItem('backBtn',true);}}else{a.service().resetNavigateBack();}},toggleContentDensity:function(e){var i=e.contentDensity==="compact";a.getAppMeta()._applyContentDensityByPriority(i);},_handleEmptyHash:function(e){e=(typeof e==="string")?e:"";e=e.split("?")[0];if(e.length===0){var v=this.getView()?this.getView().getViewData():{};k=v.config||{};if(k.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue;}if(k.rootIntent){setTimeout(function(){window.hasher.setHash(k.rootIntent);},0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_setConfigurationToModel:function(){var v=this.getView().getViewData();if(v){k=v.config||{};}if(k){if(k.states){j.extendStates(k.states);}if(k.changeEndUserFeedbackTitle!==undefined){this.oEndUserFeedbackConfiguration.feedbackDialogTitle=k.changeEndUserFeedbackTitle;}if(k.changeEndUserFeedbackPlaceholder!==undefined){this.oEndUserFeedbackConfiguration.textAreaPlaceholder=k.changeEndUserFeedbackPlaceholder;}if(k.showEndUserFeedbackAnonymousCheckbox!==undefined){this.oEndUserFeedbackConfiguration.showAnonymous=k.showEndUserFeedbackAnonymousCheckbox;}if(k.makeEndUserFeedbackAnonymousByDefault!==undefined){this.oEndUserFeedbackConfiguration.anonymousByDefault=k.makeEndUserFeedbackAnonymousByDefault;}if(k.showEndUserFeedbackLegalAgreement!==undefined){this.oEndUserFeedbackConfiguration.showLegalAgreement=k.showEndUserFeedbackLegalAgreement;}if(k.enableSetTheme!==undefined){m.setProperty("/setTheme",k.enableSetTheme);}m.setProperty("/contentDensity",k.enableContentDensity===undefined?true:k.enableContentDensity);if(k.title){m.setProperty("/title",k.title);}if(k.migrationConfig!==undefined){m.setProperty("/migrationConfig",k.migrationConfig);}if(k.enableUserDefaultParameters!==undefined){m.setProperty("/userDefaultParameters",k.enableUserDefaultParameters);}if(k.disableHomeAppCache!==undefined){m.setProperty("/disableHomeAppCache",k.disableHomeAppCache);}m.setProperty("/enableHelp",d.last("/core/extension/enableHelp"));m.setProperty("/searchAvailable",(k.enableSearch!==false));m.bindProperty('/animationMode').attachChange(this.handleAnimationModeChange.bind(this));m.setProperty("/animationMode",k.animationMode);this._getPersData({container:"flp.launchpad.animation.mode",item:"animationMode"}).then(function(e){m.setProperty("/animationMode",e?e:k.animationMode);k.animationMode=e?e:k.animationMode;});this._getPersData({container:"flp.settings.FlpSettings",item:"userActivitesTracking"}).then(function(e){if(e===undefined){e=true;}m.setProperty("/enableTrackingActivity",e);}).catch(function(e){jQuery.sap.log.error("Failed to ltracking activities state state from the personalization",e,"sap.ushell.components.flp.settings.FlpSettings");});}},_hideEditButton:function(){var e=sap.ui.getCore().byId("ActionModeBtn");if(e){e.setVisible(false);}},_getPreviousPageDirty:function(){return p;},_setPreviousPageDirty:function(e){p=e;},getModelConfiguration:function(){var v=this.getView().getViewData(),e,i;if(v){e=v.config||{};i=jQuery.extend({},e);}delete i.applications;return i;},_getLogonFrameProvider:function(){var v=this.getView();return{create:function(){return v.createIFrameDialog();},show:function(){v.showIFrameDialog();},destroy:function(){v.destroyIFrameDialog();}};},onExit:function(){this._aDoableObjects.forEach(function(l){l.off();});sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);D.media.detachHandler(this.onScreenSizeChange,this,D.media.RANGESETS.SAP_STANDARD);if(this.oShellNavigation){this.oShellNavigation.hashChanger.destroy();}var e=this.getView().aDanglingControls;if(e){e.forEach(function(l){if(l.destroyContent){l.destroyContent();}l.destroy();});}var i=this.getView().oShellHeader;if(i&&i.destroy){i.destroy();}U.deactivate();s.destroy();a.shellElements().clean();a.destroy();s=undefined;this.bEnableHashChange=true;},handleAnimationModeChange:function(){var e=d.last("/core/shell/model/animationMode"),i=e!=='minimal';C.enableAnimationDrawing(i);sap.ui.getCore().getEventBus().publish("launchpad","animationModeChange",{sActionMode:e});},getAnimationType:function(){return"show";},_getCurrentAppRouter:function(){var e=sap.ushell.Container.getService("AppLifeCycle"),i=e&&e.getCurrentApplication&&e.getCurrentApplication(),l=i&&i.componentInstance;if(l){return l.getRouter();}return null;},_disableSourceAppRouter:function(e,i){if(!this.bEnableHashChange){return this.oShellNavigation.NavigationFilterStatus.Continue;}var l=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,i);if(!l){var q=this._getCurrentAppRouter();if(q){q.stop();}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_resumeAppRouterIgnoringCurrentHash:function(){var e=this._getCurrentAppRouter();if(e){e.initialize(true);}},handleDataLoss:function(e,i){if(!this.bEnableHashChange){this.bEnableHashChange=true;this.closeLoadingScreen();return this.oShellNavigation.NavigationFilterStatus.Custom;}if(sap.ushell.Container.getDirtyFlag()){if(!r.browserI18n){r.browserI18n=r.getTranslationModel(window.navigator.language).getResourceBundle();}if(confirm(r.browserI18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);p=true;return this.oShellNavigation.NavigationFilterStatus.Continue;}this._resumeAppRouterIgnoringCurrentHash();if(this._previousHash===e){this.bEnableHashChange=false;window.hasher.setHash(i);return this.oShellNavigation.NavigationFilterStatus.Custom;}var l=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,i);var w=this.oShellNavigation.wasHistoryEntryReplaced();if(l&&w){return{status:this.oShellNavigation.NavigationFilterStatus.Custom,hash:i};}this.bEnableHashChange=false;window.history.back(1);return this.oShellNavigation.NavigationFilterStatus.Custom;}return this.oShellNavigation.NavigationFilterStatus.Continue;},_savePreviousHash:function(e,i){var l=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,i);var w=this.oShellNavigation.wasHistoryEntryReplaced();if(l&&w){return this.oShellNavigation.NavigationFilterStatus.Continue;}this._previousHash=i;return this.oShellNavigation.NavigationFilterStatus.Continue;},_isColdStart:function(){var R=sap.ushell.Container.getRenderer('fiori2');var N=!R||!R.getCurrentCoreView();if(this.history.getHistoryLength()<=1&&N){return true;}this._isColdStart=function(){return false;};return false;},_setEnableHashChange:function(v){this.bEnableHashChange=v;},_logRecentActivity:function(R){return b.addActivity(R);},_logApplicationUsage:function(e){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("UserRecents").then(function(i){i.addAppUsage(e);});}},doHashChange:function(e,i,O,l,P){jQuery.sap.measure.start("FLP:ShellController.doHashChange","doHashChange","FLP");u.addTime("ShellControllerHashChange");return this._doHashChange(this,e,i,O,l,P).then(function(){jQuery.sap.measure.end("FLP:ShellController.doHashChange");},function(v){jQuery.sap.measure.end("FLP:ShellController.doHashChange");});},_doHashChange:function(e,i,l,O,q,P){var I,t,v;if(!this.bEnableHashChange){this.bEnableHashChange=true;e.closeLoadingScreen();return jQuery.when();}if(P){e.hashChangeFailure(e.history.getHistoryLength(),P.message,null,"sap.ushell.renderers.fiori2.Shell.controller",false);return jQuery.when();}if(sap.m.InstanceManager&&h){sap.m.InstanceManager.closeAllDialogs();sap.m.InstanceManager.closeAllPopovers();}h=true;e.openLoadingScreen();if(u.getParameterValueBoolean("sap-ushell-no-ls")){e.closeLoadingScreen();}t=e.history.getHistoryLength();v=e.fixShellHash(i);e.history.hashChange(v,O);e.currentAppBeforeNav=b.getCurrentApplication();jQuery.sap.flpmeasure.end(0,"Creating Shell");jQuery.sap.flpmeasure.start(0,"targetResolution",1);return e._resolveHashFragment(v).then(function(R,w){jQuery.sap.flpmeasure.end(0,"targetResolution");jQuery.sap.flpmeasure.start(0,"CreateComponent",3);var x=w?w.semanticObject+"-"+w.action:"",k=e._getConfig(),y=!!(R&&R.componentHandle),T=R&&R.ui5ComponentName;R=e._calculateNavigationMode(w,R);if(R&&(R.navigationMode===n.newWindow||u.isNativeWebGuiNavigation(R))){e.logOpenAppAction(v,R,l);e._openAppInNewWindowAndRestore(R);return;}if(d.last("/core/shell/model/migrationConfig")){k.migrationConfig=false;e.getModel().setProperty("/migrationConfig",false);if(R&&v==='#'){k.rootIntent="";}else if(v==='#'){setTimeout(function(){window.hasher.setHash(k.rootIntent);},0);return;}}if(k&&k.applications&&k.applications[x]){R.applicationConfiguration=k.applications[x];}I=a.getInMemoryInstance(x,v);if(I.isInstanceSupported){e._initiateApplication(R,v,w,t,l);return;}else{if(y||!T){e._initiateApplication(R,v,w,t,l);return;}a.destroy(I.appId,I.container);}a.removeApplication(x);b.setApplicationInInitMode();sap.ui.getCore().getEventBus().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:T});jQuery.sap.measure.start("FLP:ShellController.UI5createComponent","UI5 createComponent","FLP");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){a.createComponent(R,w).done(function(z){jQuery.sap.measure.end("FLP:ShellController.UI5createComponent");jQuery.sap.flpmeasure.end(0,"CreateComponent");e._initiateApplication(R,v,w,t,l);}).fail(function(z){var G=r.i18n.getText("cannot_load_ui5_component_details",[v]),J="Failed to load UI5 component for navigation intent "+v;b.setCurrentApplication(e.currentAppBeforeNav);e.hashChangeFailure(t,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_ui5_component"),technicalMessage:J},{info:G,technicalMessage:z.message+"\n"+z.stack},"sap.ushell.renderers.fiori2.Shell.controller",false);});});},function(w){var x=r.i18n.getText("cannot_resolve_navigation_target_details",[v]),y="Failed to resolve navigation target: "+v+". This is most likely caused by an incorrect SAP Fiori launchpad content configuration or by missing role assignment.";e.hashChangeFailure(t,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_app_missing_configuration_or_role_assignment"),technicalMessage:y},{info:x,fixedShellHash:v,technicalMessage:w},"sap.ushell.renderers.fiori2.Shell.controller",false);});},_initiateApplication:function(R,e,P,O,i){jQuery.sap.measure.start("FLP:ShellController._initiateApplication","_initiateApplication","FLP");var l=b.getMetadata(R),q=d.last("/core/extension/SupportTicket");if(l.title){window.document.title=l.title;}else{jQuery.sap.log.debug("Shell controller._initiateApplication: the title of the window is not changed because most probably the application was resolved with undefined");}if(q){setTimeout(function(){sap.ushell.UserActivityLog.activate();},0);}var N=false;try{this.navigate(P,e,l,R);N=true;}catch(t){if(t.stack){jQuery.sap.log.error("Application initialization (Intent: \n"+e+"\n failed due to an Exception:\n"+t.stack);}this.hashChangeFailure(O,t.name,t.message,l?l.title:"",false);}if(N){this.logOpenAppAction(e,R,i);}jQuery.sap.measure.end("FLP:ShellController._initiateApplication");},_resolveHashFragment:function(e){jQuery.sap.measure.start("FLP:ShellController._resolveHashFragment","_resolveHashFragment","FLP");var R,P,i=sap.ushell.Container.getService("URLParsing").parseShellHash(e),l=new jQuery.Deferred(),k=this._getConfig();P=i&&i.params||{};if(i&&i.contextRaw&&i.contextRaw==="navResCtx"&&P&&P.additionalInformation&&(P.additionalInformation[0]||P.additionalInformation[0]==="")&&P.applicationType&&P.applicationType[0]&&P.url&&P.url[0]&&P.navigationMode&&(P.navigationMode[0]||P.additionalInformation[0]==="")){P=i.params||{};R={additionalInformation:P.additionalInformation[0],applicationType:P.applicationType[0],url:P.url[0],navigationMode:P.navigationMode[0]};if(P.title){R.text=P.title[0];}l.resolve(R,i);}else{if(window["sap-ushell-async-libs-promise-directstart"]){window["sap-ushell-async-libs-promise-directstart"].then(function(q){l.resolve(q.resolvedHashFragment,i);delete window["sap-ushell-async-libs-promise-directstart"];},function(q){l.reject(q);delete window["sap-ushell-async-libs-promise-directstart"];});return l.promise();}sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment(e).done(function(R){if(i&&(i.semanticObject+"-"+i.action)===k.rootIntent){R.navigationMode="embedded";}jQuery.sap.measure.end("FLP:ShellController._resolveHashFragment");l.resolve(R,i);}).fail(function(q){l.reject(q);});}return l.promise();},_calculateNavigationMode:function(P,R){if(!R){return undefined;}var N=R.navigationMode;if(N===n.newWindowThenEmbedded){if(this._isColdStart()||(P.contextRaw&&P.contextRaw==="navResCtx")||this.history.backwards){R.navigationMode=n.embedded;}else{R.navigationMode=n.newWindow;if(!u.isNativeWebGuiNavigation(R)){R.url=this._getCurrentLocationHash();}}return R;}if(N===n.newWindow&&this._isColdStart()){R.navigationMode=n.replace;return R;}return R;},_usesNavigationRedirect:function(e){if(!e){return new jQuery.Deferred().reject().promise();}var t=this,i=e.getInstance({});if(i&&typeof i.navigationRedirect==="function"){var l=new jQuery.Deferred();var N=i.navigationRedirect();if(N&&typeof N.then==="function"){N.then(function(q){jQuery.sap.log.warning("Performing navigation redirect to hash "+q);i.destroy();t.history.pop();sap.ushell.Container.getService("ShellNavigation").toExternal({target:{shellHash:q}},undefined,false);l.resolve(true);},function(){l.reject();});return l.promise();}}return new jQuery.Deferred().reject().promise();},navigate:function(P,e,i,R){jQuery.sap.measure.start("FLP:ShellController.navigate","navigate","FLP");var N=(jQuery.isPlainObject(R)?R.navigationMode:null),t=this;if(N===null){if(this._isColdStart()){window.hasher.setHash("");return;}this.bEnableHashChange=false;this.history.pop();this._windowHistoryBack(1);return;}R=this._calculateNavigationMode(P,R);N=(jQuery.isPlainObject(R)?R.navigationMode:null);if(N===n.embedded){var l=this._usesNavigationRedirect(R.componentHandle);l.then(null,function(){t._handleEmbeddedNavMode(e,P,i,R);if(P&&P.contextRaw==="navResCtx"){jQuery.sap.log.error(" This path will no longer be supported in 1.40");t.bEnableHashChange=false;if(P&&P.params&&P.params.original_intent&&P.params.original_intent[0]){window.hasher.replaceHash(P.params.original_intent[0]);t.history._history[0]=P.params.original_intent[0];}}});jQuery.sap.measure.end("FLP:ShellController.navigate");return;}if(N===n.replace){this.bEnableHashChange=false;this._changeWindowLocation(R.url);return;}if(N===n.newWindow){this._openAppInNewWindowAndRestore(R);return;}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderers.fiori2.Shell.controller",false);},_openAppInNewWindowAndRestore:function(R){this.bEnableHashChange=false;if(u.isNativeWebGuiNavigation(R)){try{var i=u.appendUserIdToUrl("sap-user",R.url);var l=u.getPrivateEpcm();var q=o[R.navigationMode];if(u.hasNavigationModeCapability()){l.doNavigate(i,q||o[n.embedded]);}else{l.doNavigate(i);}}catch(e){if(e.stack){jQuery.sap.log.error("Application initialization failed due to an Exception:\n"+e.stack);}this.hashChangeFailure(this.history.getHistoryLength(),e.name,e.message,R.text,false);}}else{this._openAppNewWindow(R.url);}this.history.pop();var v=R.componentHandle&&R.componentHandle.getInstance&&R.componentHandle.getInstance({});if(v){v.destroy();}this._resumeAppRouterIgnoringCurrentHash();this._windowHistoryBack(1);b.setCurrentApplication(this.currentAppBeforeNav);return;},_handleEmbeddedNavMode:function(e,P,i,R){jQuery.sap.measure.start("FLP:ShellController._handleEmbeddedNavMode","_handleEmbeddedNavMode","FLP");var l,I,q;this.resetShellUIServiceHandlers();a.getAppMeta().setAppIcons(i);l='-'+P.semanticObject+'-'+P.action;I=e==="#"||(k.rootIntent&&k.rootIntent===P.semanticObject+"-"+P.action);q=P?P.semanticObject+"-"+P.action:"";a.switchViewState(a.shellElements().calculateElementsState(I?"home":"app",R.applicationType,k.appState,R.explicitNavMode),undefined,l);if(I){a.getShellUIService().setBackNavigation();}this._handleHomeAndBackButtonsVisibility();a.handleControl(q,l,P,R,this.getWrappedApplicationWithMoreStrictnessInIntention.bind(this),this.closeLoadingScreen.bind(this),e);this.closeLoadingScreen();if(this.currentAppBeforeNav){var t=a.getStatefulContainer(this.currentAppBeforeNav.applicationType);if(t){t.onApplicationOpened(R.applicationType);}}jQuery.sap.measure.end("FLP:ShellController._handleEmbeddedNavMode");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){E.emit("loadCoreResourcesComplement");});},_centerViewPort:function(){this.oViewPortContainer.switchState("Center");},_isShellHomeIntent:function(i){return i==="#"||i===k.rootIntent;},getWrappedApplicationWithMoreStrictnessInIntention:function(i,e,l,R,q,t,v){var w,x=this;setTimeout(function(){setTimeout(function(){var y;if(d.last("/core/shell/model/currentState/stateName")==="app"){y="shellAppTitle";}A.sendFocusBackToShell(y);setTimeout(function(){x.readNavigationEnd();},500);},100);sap.ui.getCore().getEventBus().publish("launchpad","appOpening",R);jQuery.sap.log.info('app is being opened');},0);if(k.applications){R.applicationConfiguration=k.applications[i];}w=a.getAppContainer(q,R,this._isColdStart(),l,v);R.sShellHash=i;a.publishNavigationStateEvents(w,R,this.onAppAfterRendering.bind(this,R));w.addStyleClass('sapUshellApplicationPage');if(!t){w.addStyleClass("sapUShellApplicationContainerLimitedWidth");}if(this._isDock()&&window.matchMedia('(min-width: 106.4rem)').matches){w.addStyleClass("sapUShellDockingContainer");w.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}else if(this._isDock()){w.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}w.toggleStyleClass('sapUshellDefaultBackground',!e.hideLightBackground);a.getAppMeta()._applyContentDensityByPriority();a.addControl(w);setTimeout(function(){x.closeLoadingScreen();},0);jQuery.sap.measure.end("FLP:ShellController.getWrappedApplication");return w;},resetShellUIServiceHandlers:function(){a.getAppMeta().resetShellUIServiceHandlers();this.isBackNavigationChanged=false;},onAppAfterRendering:function(e){var i=a.getShellUIService();setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);jQuery.sap.log.info('app was opened');},0);var l=a._publicEventDataFromResolutionResult(e);E.emit("AppRendered",l);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",l);if(i){if(!a.getAppMeta().getIsHierarchyChanged()){i.setHierarchy();}if(!a.getAppMeta().getIsTitleChanged()){i.setTitle();}if(!a.getAppMeta().getIsRelatedAppsChanged()){i.setRelatedApps();}if(!this.isBackNavigationChanged){i.setBackNavigation();}}s.updateStateProperty("application/icon",a.getAppMeta().getAppIcon(),true);s.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_saveHomePageComponent:function(){if(this.oHomeApp){return;}var t=this,e="sap.ushell",l=function(i,q,v){t.oHomeApp=v.component;sap.ui.getCore().getEventBus().unsubscribe(e,"appComponentLoaded",l);};sap.ui.getCore().getEventBus().subscribe(e,"appComponentLoaded",l);},hashChangeFailure:function(i,v,e,l,q){if(u.isPlainObject(v)){this.reportError(v.technicalMessage,e.technicalMessage,l);this.closeLoadingScreen();sap.ushell.Container.getService("Message").show(sap.ushell.services.Message.Type.ERROR,v.message,{title:v.title,details:e});}else{this.reportError(v,e,l);this.closeLoadingScreen();this.delayedMessageError(r.i18n.getText("fail_to_start_app_try_later"));}h=false;this._resumeAppRouterIgnoringCurrentHash();if(i===0){window.hasher.setHash("");}else if(jQuery.sap.getUriParameters().get("bFallbackToShellHome")){window.hasher.setHash("");}else{this.bEnableHashChange=q;sap.ushell.Container.setDirtyFlag(p);this._windowHistoryBack(1);}},reportError:function(e,i,l){jQuery.sap.log.error(e,i,l);},delayedMessageError:function(e){setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getService("Message").error(e);}},0);},fixShellHash:function(e){if(!e){e='#';}else if(e.charAt(0)!=='#'){e='#'+e;}return e;},_openAppNewWindow:function(e){if(e.trim().indexOf("sap-nwbc://")===0&&(D.browser.edge||D.browser.msie)){window.location.href=e;}else{var i=W.openURL(e);if(!i&&!(D.browser.msie||D.browser.edge)){var l=r.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(l);}}},_windowHistoryBack:function(i){window.history.back(i);},_changeWindowLocation:function(e){window.location.href=e;},handleEndItemsOverflow:function(P){var e=d.last("/core/shell/model/currentState/headEndItems");if(e.length===1||(e.length===2&&e.indexOf("NotificationsCountButton")!=-1)){return;}function i(){s.removeHeaderEndItem(["endItemsOverflowBtn"],false,["home","app"]);var l=sap.ui.getCore().byId('headEndItemsOverflow');if(l){l.destroy();}}if(P.name==='Phone'||P.name==='Tablet'){if(e.indexOf("endItemsOverflowBtn")===-1){s.addHeaderEndItem(["endItemsOverflowBtn"],false,["home","app"]);}else{i();s.addHeaderEndItem(["endItemsOverflowBtn"],false,["home","app"]);}}else if(P.name==="Desktop"){if(P.showOverFlowBtn){if(e.indexOf("endItemsOverflowBtn")===-1){s.addHeaderEndItem(["endItemsOverflowBtn"],false,["home","app"]);}}else{i();}}},isHeadEndItemOverflow:function(){var e=0,l,q=d.last("/core/shell/model/currentState/headEndItems");if(q.indexOf("endItemsOverflowBtn")===-1){return false;}else{var t=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;var v=3;if(t==="Phone"){v=1;}for(var i=0;i<q.length;i++){l=sap.ui.getCore().byId(q[i]);if(l&&l.getVisible()){e++;}}if(sap.ui.getCore().byId("endItemsOverflowBtn").getVisible()){return e>v+1;}else{return e>v;}}},isHeadEndItemInOverflow:function(e){return e!=="ENDITEMSOVERFLOWBTN"&&!this.isHeadEndItemNotInOverflow(e);},isHeadEndItemNotInOverflow:function(e){if(this.isHeadEndItemOverflow()){if(e==="NOTIFICATIONSCOUNTBUTTON"||e==="ENDITEMSOVERFLOWBTN"){return true;}else{var i=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;if(i==="Tablet"){return e==="SF"||e==="FLOATINGCONTAINERBUTTON";}else if(i==="Desktop"){return e==="SF"||e==="FLOATINGCONTAINERBUTTON"||e==="COPILOTBTN";}else{return i!=="Phone";}}}else if(e==="ENDITEMSOVERFLOWBTN"){return false;}else{return true;}},pressEndItemsOverflow:function(e){var P=sap.ui.getCore().byId('headEndItemsOverflow');function i(){if(P.isOpen()){P.close();}}if(!P){var l=new sap.ui.model.Filter('','EQ','a');l.fnTest=this.isHeadEndItemInOverflow.bind(this);P=new sap.m.Popover("headEndItemsOverflow",{placement:sap.m.PlacementType.Bottom,showHeader:false,showArrow:false,content:{path:"/currentState/headEndItems",filters:[l],factory:function(I,q){var t=sap.ui.getCore().byId(q.getObject()).clone();t.detachPress(i);t.attachPress(i);return t;}}});P.addStyleClass("sapUshellPopupContainer sapMPopoverheadEndItemsOverflow");P.updateAggregation=this.getView().updateShellAggregation;P.setModel(m);this.getView().aDanglingControls.push(P);}if(P.isOpen()){P.close();}else{P.updateAggregation("content");P.openBy(e.getSource());}},externalSearchTriggered:function(e,i,l){d.emit("/core/shell/model/searchTerm",l.searchTerm);l.query=l.searchTerm;},onAfterNavigate:function(e){var t=e.mParameters?e.mParameters.toId:undefined;this.closeLoadingScreen();u.addTime("ShellController.onAfterNavigate");if(t==="application-"+k.rootIntent){var i=sap.ui.getCore().byId("configBtn");if(i){i.focus();}}a.onAfterNavigate(e.getParameter("fromId"),e.getParameter("from"),t);},logOpenAppAction:function(e,R,i){var l=d.last("/core/shell/enableRecentActivity")&&d.last("/core/shell/enableRecentActivityLogging");if(!l){return;}var q={};var t=b.getMetadata(R);var v=e;if(i){v+=i;}q.title=t.title;q.appType=c.APP;q.url=v;sap.ushell.Container.getServiceAsync("URLParsing").then(function(w){var P=w.parseShellHash(e);if(P){q.appId="#"+w.constructShellHash({semanticObject:P.semanticObject,action:P.action});}else{q.appId=e;}if(e.indexOf("#Action-search")>=0){q.appType=c.SEARCH;}if(d.last("/core/shell/model/enableTrackingActivity")){setTimeout(function(){this._logRecentActivity(q);}.bind(this),1500);}if(k.enableTilesOpacity&&d.last("/core/shell/enableRecentActivity")){setTimeout(function(){this._logApplicationUsage(e);}.bind(this),1500);}}.bind(this));},openLoadingScreen:function(){jQuery.sap.measure.start("FLP:ShellController.openLoadingScreen","openLoadingScreen","FLP");if(this.oFiori2LoadingDialog){var e=d.last("/core/shell/model/animationMode")||"full";this.oFiori2LoadingDialog.openLoadingScreen(e);}jQuery.sap.measure.end("FLP:ShellController.openLoadingScreen");},closeLoadingScreen:function(){if(this.oFiori2LoadingDialog){this.oFiori2LoadingDialog.closeLoadingScreen();}},readNavigationEnd:function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=r.i18n.getText("loadingComplete");setTimeout(function(){e.setAttribute("aria-live","off");e.innerHTML="";},0);}},delayedCloseLoadingScreen:function(){setTimeout(function(){this.closeLoadingScreen();}.bind(this),600);},togglePane:function(e){var i=e.getSource(),l=i.getSelected();sap.ui.getCore().getEventBus().publish("launchpad","togglePane",{currentContent:d.last("/core/shell/model/currentState/paneContent")});if(e.getParameter("id")==="categoriesBtn"){i.getModel().setProperty("/currentState/showCurtainPane",!l);}else{i.getModel().setProperty("/currentState/showPane",!l);}},_switchViewPortStateByControl:function(O,e){var i=false,v=this.oViewPortContainer;if(O&&O.setEnabled&&typeof O.setEnabled==="function"){i=true;}if(i){O.addStyleClass("sapUshellShellHeadItemOverrideDisableStyle");O.setEnabled(false);}function l(){O.setEnabled(true);O.removeStyleClass("sapUshellShellHeadItemOverrideDisableStyle");v.detachAfterSwitchStateAnimationFinished(l);}if(i){v.attachAfterSwitchStateAnimationFinished(l);}v.switchState(e);},onScreenSizeChange:function(P){this.validateShowLogo(P);this.handleNavMenuTitleVisibility(P);this._handleHomeAndBackButtonsVisibility();this.handleEndItemsOverflow(P);},_handleHomeAndBackButtonsVisibility:function(){var i=jQuery("#mainShell").width()<1024&&jQuery(".sapUshellContainerDocked").length>0,I=d.last("/core/shell/model/currentViewPortState")==="Center",e=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name,l=sap.ui.getCore().byId("homeBtn"),q=sap.ui.getCore().byId("backBtn"),t=e==="Desktop",v=e!=="Phone"||I;if(i){if(l){t=false;}}if(l){l.setVisible(t);}if(q){q.setVisible(v);}},validateShowLogo:function(P){var e;var i=d.last("/core/shell/model/currentState/stateName");var I=i==='merged'||i==='headerless';if(P){e=P.name;}else{e=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;}var l=true;if(e==="Phone"&&!this.getMeAreaSelected()||I){l=false;}s.updateStateProperty("showLogo",l,false,["home","app","blank","blank-home","minimal","lean"],true);},handleNavMenuTitleVisibility:function(P){this.bNavMenuTitleVisible=false;if(P.name!=="Desktop"){this.bNavMenuTitleVisible=true;}s.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},navigateFromShellApplicationNavigationMenu:function(i){if(window.hasher.getHash()!==i.substr(1)){this.oViewPortContainer.switchState("Center");window.hasher.setHash(i);}var e=sap.ui.getCore().byId("shellAppTitle");if(e){e.close();}},_loadCoreExtNonUI5:function(e,i,l){if(l&&(l.applicationType=="NWBC"||l.applicationType=="TR")){setTimeout(this._loadCoreExt.bind(this),2000);}},_onRendererExtensionPluginsLoaded:function(){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(e){e.init(r.i18n.getText("usageAnalytics"),r.i18n.getText("i_agree"),r.i18n.getText("i_disagree"),r.i18n.getText("remind_me_later"));});},_onCoreResourcesComplementLoaded:function(){var v=this.getView();if(v){v.createPostCoreExtControls();}function e(P){var V=this.getView()?this.getView().getViewData():{},k=V.config||{},i=jQuery.sap.getUriParameters().get("sap-ushell-xx-pluginmode")==="delayed",t=this;function l(){t._publishCoreExtLoadedEvent();E.emit("RendererExtensionPluginsLoaded");}function L(){P.loadPlugins("RendererExtensions").always(l);}if(!P.getRegisteredPlugins().RendererExtensions.init){P.registerPlugins({init:{component:"sap.ushell.components.shell.defaults",url:jQuery.sap.getResourcePath("sap/ushell/components/shell/defaults")}});}jQuery.sap.log.info("Triggering load of 'RendererExtension' plug-ins after loading core-ext module",null,"sap.ushell.renderers.fiori2.Shell");if(!k.inHeaderLessOpt){if(i){setTimeout(L,5000);}else{L();}}else{l();}}sap.ushell.Container.getServiceAsync("PluginManager").then(e.bind(this));},_loadWarmupPlugins:function(){sap.ushell.Container.getService("PluginManager").loadPlugins("AppWarmup").always(function(){jQuery.sap.log.debug("WARMUP plugins loaded",null,"sap.ushell.renderers.fiori2.Shell");});},_loadCoreExt:function(){jQuery.sap.measure.end("FLP:Container.InitLoading");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){E.emit("loadCoreResourcesComplement");});},_publishCoreExtLoadedEvent:function(){setTimeout(function(){sap.ui.getCore().getEventBus().publish("shell","FLP-FMP");},3000);},getCurrentViewportState:function(){return d.last("/core/shell/model/currentViewPortState");},makeEndUserFeedbackAnonymousByDefault:function(e){this.oEndUserFeedbackConfiguration.anonymousByDefault=e;},showEndUserFeedbackLegalAgreement:function(e){this.oEndUserFeedbackConfiguration.showLegalAgreement=e;},_activateFloatingUIActions:function(w){if(w<417){this.oFloatingUIActions.disable();}else{this.oFloatingUIActions.enable();}},setFloatingContainerDragSelector:function(e){jQuery(e).addClass("sapUshellShellFloatingContainerSelector");sap.ui.require(["sap/ushell/UIActions"],function(i){if(!this.oFloatingUIActions){this.oFloatingUIActions=new sap.ushell.UIActions({containerSelector:".sapUiBody",wrapperSelector:'.sapUshellShellFloatingContainerWrapper',draggableSelector:'.sapUshellShellFloatingContainerWrapper',rootSelector:".sapUiBody",cloneClass:"sapUshellFloatingContainer-clone",dragCallback:this._handleFloatingContainerUIStart.bind(this),endCallback:this._handleFloatingContainerDrop.bind(this),moveTolerance:3,onDragStartUIHandler:this._onDragStartUI.bind(this),onDragEndUIHandler:this._setFloatingContainerHeight.bind(this),dragAndScrollCallback:this._doDock.bind(this),switchModeDelay:1000,isLayoutEngine:false,isTouch:false,elementToCapture:e,defaultMouseMoveHandler:function(){},debug:jQuery.sap.debug()});}else{this.oFloatingUIActions.elementsToCapture=jQuery(e);}this._activateFloatingUIActions(jQuery(window).width());var t;jQuery(window).bind("resize",function(){clearTimeout(t);t=setTimeout(this._activateFloatingUIActions(jQuery(window).width()),300);}.bind(this));}.bind(this));},_doDock:function(e){jQuery.sap.measure.start("FLP:Shell.controller._doDock","dragging co-pilot element","FLP");var i=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(i.name==="Desktop"){var w=jQuery(window).width();if(e){e.docked={};var l=e.docked;if(e.moveX>=w-64){l.dockPos="right";l.setIsDockingAreaOpen=true;this._openDockingArea(e);}else if(e.moveX<64){l.dockPos="left";l.setIsDockingAreaOpen=true;this._openDockingArea(e);}else{if(this._isDockingAreaOpen()){this._closeDockingArea(e);}if(jQuery("#canvas").hasClass('sapUshellContainerDocked')){this._handleCloseCanvas(e);}}}}jQuery.sap.measure.end("FLP:Shell.controller._doDock");},_finishDoDock:function(e){this._openDockingArea(false);var i=jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","docked:"+e.dockPos);this._handleOpenCanvas(e);var w=jQuery('#sapUshellFloatingContainerWrapper');w.css("height","100%");jQuery("#shell-floatingContainer").addClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsDocked",e.dockPos);if(jQuery(".sapUShellApplicationContainerLimitedWidth").length>0){jQuery('#application-Action-toappnavsample').removeClass("sapUShellApplicationContainerLimitedWidth");jQuery('#application-Action-toappnavsample').addClass("sapUShellDockingContainer");}},_onResizeWithDocking:function(){this.onScreenSizeChange(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD));setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appFinderWithDocking");},300);},_onDragStartUI:function(e){jQuery.sap.measure.start("FLP:Shell.controller._onDragStartUI","start drag","FLP");if(this._isDock()){var i=jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","floating");jQuery("#sapUshellFloatingContainerWrapper").removeClass('sapUshellContainerDocked');jQuery(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDocked");jQuery("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");jQuery("#sapUshellFloatingContainerWrapper").addClass('sapUshellContainerDockedMinimizeCoPilot');jQuery(jQuery(".sapUshellContainerDockedMinimizeCoPilot")).on('webkitAnimationEnd oanimationend msAnimationEnd animationend',this._handleAnimations(false));this._handleCloseCanvas(e);}jQuery.sap.measure.end("FLP:Shell.controller._onDragStartUI");},_handleAnimations:function(i,e){var l="sapUshellContainerDockedLaunchpad";var q=jQuery('#canvas');var w=jQuery('#sapUshellFloatingContainerWrapper');function t(x,T){jQuery(l).toggleClass(x,T);}if(i){jQuery('#canvas,#shell-header').addClass(l);if(q.hasClass('sapUshellContainer-Narrow-Right')||e=="right"){t("closeRight",true);}else{t("closeLeft",true);}w.addClass("sapUshellContainerDockedExtendCoPilot");setTimeout(function(){if(q.hasClass('sapUshellContainer-Narrow-Right')||e=="right"){t("closeRight",false);t("openRight",true);}else if(q.hasClass('sapUshellContainer-Narrow-Left')||e=="left"){t("closeLeft",false);t("openLeft",true);}},300);this._onResizeWithDocking();}else{jQuery("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedExtendCoPilot");if(q.hasClass('sapUshellContainer-Narrow-Right')||e=="right"){t("openRight",false);}else{t("openLeft",false);}setTimeout(function(){jQuery(l).removeClass(l+" closeLeft openLeft closeRight openRight");},550);}var v=sap.ui.getCore().byId('shell-header');v._handleResizeChange();},_openDockingArea:function(e){var i=e?e.docked:false;var I=i?i.setIsDockingAreaOpen:false;if(I&&jQuery("#DockinaAreaDiv").length==0){var l=sap.ui.getCore().getConfiguration().getRTL();if((i.dockPos==="right"&&e.clone&&!l)||(i.dockPos==="left"&&e.clone&&l)){jQuery('<div id="DockinaAreaDiv"  class="sapUshellShellDisplayDockingAreaRight">').appendTo(e.clone.parentElement);}else if((i.dockPos==="left"&&e.clone&&!l)||(i.dockPos==="right"&&e.clone&&l)){jQuery('<div id="DockinaAreaDiv"  class="sapUshellShellDisplayDockingAreaLeft">').appendTo(e.clone.parentElement);}e.clone.oDockedProp={};e.clone.oDockedProp.dockPos=i.dockPos;}else if(!I){this._closeDockingArea();}},_closeDockingArea:function(e){setTimeout(function(){jQuery('.sapUshellShellDisplayDockingAreaRight').remove();jQuery('.sapUshellShellDisplayDockingAreaLeft').remove();},150);var i=sap.ui.getCore().byId('shell-header');if(i){i._handleResizeChange();}},_isDock:function(){return jQuery('.sapUshellContainerDocked').size()!==0;},_isDockingAreaOpen:function(){return jQuery('.sapUshellShellDisplayDockingAreaRight').size()!==0||jQuery('.sapUshellShellDisplayDockingAreaLeft').size()!==0;},_handleOpenCanvas:function(e){var i=jQuery('#canvas');var l=jQuery('.sapUshellShellHead');var I=sap.ui.getCore().getConfiguration().getRTL();if((e.dockPos==="right"&&!I)||(e.dockPos==="left"&&I)){i.addClass('sapUshellContainer-Narrow-Right sapUshellContainerDocked ');l.addClass('sapUshellContainerDocked');}if((e.dockPos==="left"&&!I)||(e.dockPos==="right"&&I)){i.addClass('sapUshellContainer-Narrow-Left sapUshellContainerDocked ');l.addClass('sapUshellContainerDocked');}var v=sap.ui.getCore().byId("viewPortContainer");if(v){v._handleSizeChange();}},_handleCloseCanvas:function(e){var i=jQuery('#canvas');var l=jQuery('.sapUshellShellHead');if(e){e.docked.setIsDockingAreaOpen=false;}if(i.hasClass('sapUshellContainer-Narrow-Right')){i.removeClass('sapUshellContainer-Narrow-Right sapUshellContainerDocked sapUshellMoveCanvasRight');l.removeClass('sapUshellContainerDocked');this._openDockingArea(e);this._setFloatingContainerHeight();}if(i.hasClass('sapUshellContainer-Narrow-Left')){i.removeClass('sapUshellContainer-Narrow-Left sapUshellContainerDocked sapUshellMoveCanvasLeft');l.removeClass('sapUshellContainerDocked');this._openDockingArea(e);this._setFloatingContainerHeight();}if(jQuery(".sapUShellDockingContainer").length>0){jQuery('#application-Action-toappnavsample').removeClass("sapUShellDockingContainer");jQuery('#application-Action-toappnavsample').addClass("sapUShellApplicationContainerLimitedWidth");}this._onResizeWithDocking();var v=sap.ui.getCore().byId("viewPortContainer");if(v){v._handleSizeChange();}},_setFloatingContainerHeight:function(e){var w=jQuery(window).width();var i=jQuery('#sapUshellFloatingContainerWrapper');if(this._isDock()){if(e&&(e.clientX>=w-64||e.clientX<64)){i.addClass(' sapUshellContainerDocked');i.addClass("sapUshellContainerDockedMinimizeCoPilot");jQuery(i).on('webkitAnimationEnd oanimationend msAnimationEnd animationend',this._handleAnimations(true));}}else if(!this._isDock()){jQuery("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");}},_handleFloatingContainerDrop:function(e,i,l){jQuery.sap.measure.start("FLP:Shell.controller._handleFloatingContainerDrop","drop floating container","FLP");var q=i.firstChild?sap.ui.getCore().byId(i.firstChild.id):undefined,t=jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"),w=jQuery(window).width(),v=jQuery(window).height(),P=l.deltaX/w,x=l.deltaY/v,O=i.style.visibility,y=i.style.display,z=parseFloat(i.style.left.replace("%","")),G=parseFloat(i.style.top.replace("%",""));i.style.visibility='hidden';i.style.display='block';if(typeof(z)==='number'){P=z+100*l.deltaX/w;}if(typeof(G)==='number'){x=G+100*l.deltaY/v;}if(this._isDockingAreaOpen()){x=0;}i.setAttribute("style","left:"+P+"%;top:"+x+"%;position:absolute;");i.visibility=O;i.display=y;t.put("floatingContainerStyle",i.getAttribute("style"));if(q){q.handleDrop();if(!!l.clone.oDockedProp&&this._isDockingAreaOpen()){this._finishDoDock(l.clone.oDockedProp);}}jQuery.sap.measure.end("FLP:Shell.controller.handleFloatingContainerDrop");},_handleFloatingContainerUIStart:function(i,l){jQuery.sap.measure.start("FLP:Shell.controller._handleFloatingContainerUIStart","starts dragging floating container","FLP");var q=l;q.style.display="none";if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges();}catch(e){}}jQuery.sap.measure.end("FLP:Shell.controller._handleFloatingContainerUIStart");},getFloatingContainerState:function(){var e=jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");var l="floating";if(e!=null){l=e.get("lastState");if(l==null){l="floating";}}return l;},setFloatingContainerVisibility:function(v){var l=this.getFloatingContainerState();if(l){if(l=="floating"){this.getView().getOUnifiedShell().setFloatingContainerVisible(v);}else if(l.indexOf("docked")!=-1){var V=sap.ui.getCore().byId("viewPortContainer");if(v==true){var e=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(e.name=="Desktop"){var w=jQuery('#sapUshellFloatingContainerWrapper');w.addClass("sapUshellContainerDocked");jQuery("#canvas, .sapUshellShellHead").addClass("sapUshellContainerDocked");w.css("height","100%");sap.ui.getCore().byId("shell-floatingContainer").addStyleClass("sapUshellShellFloatingContainerFullHeight");if(V){V._handleSizeChange();}if(sap.ui.getCore().getConfiguration().getRTL()){if(l.indexOf("right")!=-1){jQuery("#canvas").addClass('sapUshellContainer-Narrow-Left');this._handleAnimations(true,"left");}else{jQuery("#canvas").addClass('sapUshellContainer-Narrow-Right');this._handleAnimations(true,"right");}}else if(l.indexOf("right")!=-1){jQuery("#canvas").addClass('sapUshellContainer-Narrow-Right');this._handleAnimations(true,"right");}else{jQuery("#canvas").addClass('sapUshellContainer-Narrow-Left');this._handleAnimations(true,"left");}setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(v);}.bind(this),400);}else{jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.local.CopilotLastState").put("lastState","floating");this.getView().getOUnifiedShell().setFloatingContainerVisible(v);}if(jQuery(".sapUShellApplicationContainerLimitedWidth").length>0){jQuery('#application-Action-toappnavsample').removeClass("sapUShellApplicationContainerLimitedWidth");jQuery('#application-Action-toappnavsample').addClass("sapUShellDockingContainer");}}else{if(sap.ui.getCore().getConfiguration().getRTL()){if(l.indexOf("right")!=-1){this._handleAnimations(false,"left");}else{this._handleAnimations(false,"right");}}else if(l.indexOf("right")!=-1){this._handleAnimations(false,"right");}else{this._handleAnimations(false,"left");}if(V){V._handleSizeChange();}setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(v);}.bind(this),400);if(jQuery(".sapUShellDockingContainer").length>0){jQuery('#application-Action-toappnavsample').removeClass("sapUShellDockingContainer");jQuery('#application-Action-toappnavsample').addClass("sapUShellApplicationContainerLimitedWidth");}}jQuery("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();if(V){V._handleSizeChange();}}}},getFloatingContainerVisibility:function(){return this.getView().getOUnifiedShell().getFloatingContainerVisible();},setFloatingContainerContent:function(P,i,e,l){s.setFloatingContainerContent(P,i,e,l);},getRightFloatingContainerVisibility:function(){var R=this.getView().getOUnifiedShell().getRightFloatingContainer(),e=R&&R.getVisible();return e;},setHeaderTitle:function(t,i){if(typeof t!=="string"){throw new Error("sTitle type is invalid");}this.getView().getOUnifiedShell().getHeader().setTitleControl(t,i);},addEndUserFeedbackCustomUI:function(e,i){if(e){this.oEndUserFeedbackConfiguration.customUIContent=e;}if(i===false){this.oEndUserFeedbackConfiguration.showCustomUIContent=i;}},setFooter:function(e){var i=this.getView().getOUnifiedShell();if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid");}if(i.getFooter()!==null){jQuery.sap.log.warning("You can only set one footer. Replacing existing footer: "+i.getFooter().getId()+", with the new footer: "+e.getId()+".");}i.setFooter(e);},removeFooter:function(){this.getView().getOUnifiedShell().setFooter(null);},addUserPreferencesEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateUserPrefModel(e);},addUserProfilingEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateProfilingModel(e);},_validateUserPrefEntryConfiguration:function(e){if((!e)||(typeof e!=="object")){throw new Error("object oConfig was not provided");}if(!e.title){throw new Error("title was not provided");}if(!e.value){throw new Error("value was not provided");}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid");}else if(e.entryHelpID===""){throw new Error("entryHelpID type is invalid");}var i=sap.ui.getCore().byId('shell-header');i._handleResizeChange();}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid");}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid");}if(e.onSave&&typeof e.onSave!=="function"){throw new Error("onSave type is invalid");}if(e.content&&typeof e.content!=="function"){throw new Error("content type is invalid");}if(e.onCancel&&typeof e.onCancel!=="function"){throw new Error("onCancel type is invalid");}},_createSessionHandler:function(k){var t=this;sap.ui.require(["sap/ushell/SessionHandler"],function(e){t.oSessionHandler=new e();t.oSessionHandler.init({oModel:t.getModel(),keepSessionAlivePopupText:k.keepSessionAlivePopupText,pageReloadPopupText:k.pageReloadPopupText,preloadLibrariesForRootIntent:k.preloadLibrariesForRootIntent,sessionTimeoutReminderInMinutes:k.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:k.sessionTimeoutIntervalInMinutes,enableAutomaticSignout:k.enableAutomaticSignout});});},_getSessionHandler:function(){return this.oSessionHandler;},_navBack:function(){this.setMeAreaSelected(false);a.service().navigateBack();},_updateUserPrefModel:function(e){var i=this._getModelEntryFromEntryObject(e),l=d.last("/core/shell/model/userPreferences/entries");l.push(i);l=this._reorderUserPrefEntries(l);m.setProperty("/userPreferences/entries",l);},_updateProfilingModel:function(e){var i=this._getModelEntryFromEntryObject(e),l=d.last("/core/shell/model/userPreferences/profiling")||[];l.push(i);m.setProperty("/userPreferences/profiling",l);},_getModelEntryFromEntryObject:function(e){return{"entryHelpID":e.entryHelpID,"title":e.title,"editable":e.content?true:false,"valueArgument":e.value,"valueResult":null,"onSave":e.onSave,"onCancel":e.onCancel,"contentFunc":e.content,"contentResult":null,"icon":e.icon};},_reorderUserPrefEntries:function(e){var l,t;for(var i=0;i<e.length;i++){if(e[i].entryHelpID==="flpSettingsEntry"){l=i;}else if(e[i].entryHelpID==="themes"){t=i;}if(l!=undefined&&t!=undefined){var q=e.splice(l,1);e.splice(t+1,0,q[0]);break;}}return e;},onAfterViewPortSwitchState:function(e){var t=e.getParameter("to");var i=sap.ui.getCore().byId("shellAppTitle");m.setProperty("/currentViewPortState",t);if(this.applicationKeyHandler){A.registerAppKeysHandler(this.applicationKeyHandler);this.applicationKeyHandler=undefined;}sap.ui.getCore().getEventBus().publish("launchpad","afterSwitchState",e);if(t==="Center"){i.setVisible(true);}else{i.setVisible(false);if(t=="RightCenter"){this.applicationKeyHandler=A.getAppKeysHandler();A.bFocusOnShell=false;if(sap.ui.getCore().byId("notificationsView")){A.registerAppKeysHandler(sap.ui.getCore().byId("notificationsView").getController().keydownHandler.bind(sap.ui.getCore().byId("notificationsView")));}}}this.validateShowLogo();this._handleHomeAndBackButtonsVisibility();},getModel:function(){return m;},_getConfig:function(){return k?k:{};},_getPersData:function(P){var e=sap.ui.core.Component.getOwnerComponentFor(this.getView());return new Promise(function(i,l){sap.ushell.Container.getServiceAsync("Personalization").then(function(q){var t={keyCategory:q.constants.keyCategory.FIXED_KEY,writeFrequency:q.constants.writeFrequency.LOW,clientStorageAllowed:true};var v=q.getPersonalizer(P,t,e);v.getPersData().then(i).fail(l);});});},_getCurrentLocationHash:function(){return window.location.hash;},setMeAreaSelected:function(e){E.emit('showMeArea',e);},getMeAreaSelected:function(){return d.last("/core/shell/model/currentViewPortState")==="LeftCenter";},setNotificationsSelected:function(e){E.emit('showNotifications',e);},getNotificationsSelected:function(){return d.last("/core/shell/model/currentViewPortState")==='RightCenter';},isAnimationModeNotMinimal:function(e){return e!=='minimal';}});},false);
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.view',['sap/ui/core/IconPool','sap/ui/Device','sap/ui/core/CustomData','sap/ui/core/theming/Parameters','sap/ui/core/HTML','sap/ushell/UserActivityLog','sap/ushell/ui/launchpad/ActionItem','sap/ushell/ui/launchpad/Fiori2LoadingDialog','sap/ushell/ui/shell/ShellHeadItem','sap/ushell/ui/shell/ShellNavigationMenu','sap/ushell/ui/shell/ToolArea','sap/ushell/ui/shell/NavigationMiniTile','sap/ushell/ui/footerbar/ContactSupportButton','sap/ushell/ui/launchpad/AccessibilityCustomData','sap/ushell/renderers/fiori2/AccessKeysHandler','sap/m/StandardListItem','sap/m/Button','sap/m/Dialog','sap/ushell/resources','sap/ushell/utils','sap/ushell/Config','sap/ushell/EventHub'],function(I,D,C,T,H,U,A,F,S,a,b,N,c,d,e,f,B,g,r,u,h,E){"use strict";
function s(i,o){return sap.ui.getCore().byId(o.getObject());}
sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{createContent:function(o){this.oController=o;this.oShellAppTitleStateEnum={SHELL_NAV_MENU_ONLY:0,ALL_MY_APPS_ONLY:1,SHELL_NAV_MENU:2,ALL_MY_APPS:3};var v=this.getViewData()||{},i=v.config||{},j=(i.appState==="embedded")?true:false,k,l=new S({id:"configBtn",tooltip:"{i18n>showGrpsBtn_tooltip}",ariaLabel:"{i18n>showGrpsBtn_tooltip}",icon:I.getIconURI("menu2"),selected:{path:"/currentState/showPane"},press:[o.togglePane,o]}),m=sap.ui.getCore().getConfiguration().getRTL()?"feeder-arrow":"nav-back",n=new S({id:"homeBtn",tooltip:"{i18n>homeBtn_tooltip}",ariaLabel:"{i18n>homeBtn_tooltip}",icon:I.getIconURI("home"),target:i.rootIntent?"#"+i.rootIntent:"#"}),p=new S({id:"backBtn",tooltip:"{i18n>backBtn_tooltip}",ariaLabel:"{i18n>backBtn_tooltip}",icon:I.getIconURI(m),press:o._navBack.bind(o)}),q,M,t=h.last("/core/extension/enableHelp");this._allowUpToThreeActionInShellHeader(i);p.setShowSeparator(false);n.setShowSeparator(false);n.addCustomData(new d({key:"aria-disabled",value:"false",writeToDom:true}));this.oConfig=i;n.addEventDelegate({onsapskipback:function(W){if(e.getAppKeysHandler()){W.preventDefault();e.bFocusOnShell=false;}},onsapskipforward:function(W){if(e.getAppKeysHandler()){W.preventDefault();e.bFocusOnShell=false;}}});l.addEventDelegate({onsapskipforward:function(W){if(e.getAppKeysHandler()){W.preventDefault();e.bFocusOnShell=false;}},onfocusin:function(){e.bFocusOnShell=true;e.bFocusPassedToExternalHandlerFirstTime=true;}});this.aDanglingControls=[];if(!i.preventLoadingDialogAtStartup){k=new F({id:"Fiori2LoadingDialog",text:""});this.aDanglingControls.push(k);}if(u.isNotificationsEnabled()){q=new S({id:"NotificationsCountButton",icon:sap.ui.core.IconPool.getIconURI("ui-notifications"),accessKey:"n",visible:true,enabled:false}).addStyleClass("sapUshellPlaceHolders");q.setShowSeparator(false);this.aDanglingControls.push(q);}M=new S({id:"meAreaHeaderButton",icon:'{/userImage/personPlaceHolder}',accessKey:"m",visible:true,enabled:false}).addStyleClass("sapUshellPlaceHolders");M.setShowSeparator(false);this.aDanglingControls.push(M);if(i.enablePersonalization!==false){var w;var x="openCatalogBtn";var y=r.i18n.getText("open_appFinderBtn");var z='sap-icon://sys-find';var G="#Shell-home&/appFinder/catalog";var J="Shell";var K="appfinder";var L=function(){jQuery.sap.measure.start("FLP:AppFinderLoadingStartToEnd","AppFinderLoadingStartToEnd","FLP");sap.ushell.Container.getServiceAsync("URLParsing").then(function(W){if(W){w=W.parseShellHash(window.hasher.getHash());w.action=K;w.semanticObject=J;G="#"+W.constructShellHash(w);}setTimeout(function(){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(X){X.toExternal({target:{shellHash:G}});});},D.system.desktop?0:500);}.bind(this));};var O=!i.disableAppFinder;if(i.moveAppFinderActionToShellHeader){if(!this.oOpenCatalogItem){this.oOpenCatalogItem=new S(x,{icon:z,tooltip:y,text:y,press:L,showSeparator:false,visible:O});this.oOpenCatalogItem.data("isShellHeader",true);}}else if(!this.oOpenCatalogItem){this.oOpenCatalogItem=new A(x,{text:y,icon:z,actionType:'action',press:L,visible:O});}if(t){this.oOpenCatalogItem.addStyleClass('help-id-openCatalogActionItem');}this.aDanglingControls.push(this.oOpenCatalogItem);if(i.moveEditHomePageActionToShellHeader){jQuery.sap.measure.start("FLP:Shell.view.createContent","create the edit home page button as shell head enditem","FLP");if(!this.oTileActionsButton){this.oTileActionsButton=new S("ActionModeBtn",{icon:'sap-icon://edit',visible:false,showSeparator:false});this.oTileActionsButton.data("isShellHeader",true);if(t){this.oTileActionsButton.addStyleClass('help-id-openCatalogActionItem');}}this.aDanglingControls.push(this.oTileActionsButton);jQuery.sap.measure.end("FLP:Shell.view.createContent");}}var P=new S({id:"endItemsOverflowBtn",tooltip:"{i18n>shellHeaderOverflowBtn_tooltip}",ariaLabel:"{i18n>shellHeaderOverflowBtn_tooltip}",icon:"sap-icon://overflow",press:[o.pressEndItemsOverflow,o],visible:true,showSeparator:false});this.aDanglingControls.push(P);var Q,R;Q=sap.ui.xmlfragment("sap.ushell.renderers.fiori2.ShellHeader",o);Q.setAccessKeyHandler(e);this.oShellHeaderAppTitle=Q.getAppTitle();this.oShellHeaderAppTitle.addEventDelegate({onsapskipforward:function(W){if(e.getAppKeysHandler()){W.preventDefault();e.bFocusOnShell=false;}}});this.oShellHeader=Q;this.addEventDelegate({"onBeforeRendering":function(){this.oShellHeader.createUIArea(this.getUIArea().getId());}},this);R=sap.ui.xmlfragment("sap.ushell.renderers.fiori2.ShellLayout",o);R.setHeader(Q);R._setStrongBackground(true);var V;E.once("ToolAreaItemCreated").do(function(W){V=this._createToolArea();R.setToolArea(V);V.updateAggregation=this.updateShellAggregation;}.bind(this));this.setOUnifiedShell(R);Q.setShellLayout(R);if(j){Q.setLogo(sap.ui.resource('sap.ui.core','themes/base/img/1x1.gif'));}else{this.initShellBarLogo(Q);}this.setDisplayBlock(true);this.aDanglingControls=this.aDanglingControls.concat([sap.ui.getCore().byId('viewPortContainer'),n,p,l]);this.logonIFrameReference=null;u.setPerformanceMark("FLP - Shell.view rendering started!");return R;},_createToolArea:function(){var o=new b({id:'shell-toolArea',toolAreaItems:{path:"/currentState/toolAreaItems",factory:s}});return o;},_allowUpToThreeActionInShellHeader:function(o){if(Object.keys(o).length!=0){var i=[o.moveAppFinderActionToShellHeader,o.moveUserSettingsActionToShellHeader,o.moveGiveFeedbackActionToShellHeader,o.moveContactSupportActionToShellHeader,o.moveEditHomePageActionToShellHeader];var j=0;for(var k=0;k<5;k++){if(j===3){i[k]=false;}else if(i[k]){j++;}}o.moveAppFinderActionToShellHeader=i[0];o.moveUserSettingsActionToShellHeader=i[1];o.moveGiveFeedbackActionToShellHeader=i[2];o.moveContactSupportActionToShellHeader=i[3];o.moveEditHomePageActionToShellHeader=i[4];}},_createPostCoreExtControls:function(j,k){var o=this.oController,l=this.oConfig,m=sap.ui.getCore().byId("shell");if(!m){return;}var n=function(w,x){var y=x.getProperty("icon");var z=x.getProperty("title");var G=x.getProperty("subtitle");var J=x.getProperty("intent");if(!y){y="sap-icon://circle-task-2";}var L=(new f({type:"Active",title:z,description:G,icon:y,customData:[new C({key:"intent",value:J})],press:function(K){var M=K.getSource().getCustomData();if(M&&M.length>0){for(var i=0;i<M.length;i++){if(M[i].getKey()==="intent"){var O=M[i].getValue();if(O&&O[0]==="#"){o.navigateFromShellApplicationNavigationMenu(O);return;}}}}}})).addStyleClass("sapUshellNavigationMenuListItems");return L;};var R=function(i,w){var x=w.getProperty("icon");var y=w.getProperty("title");var z=w.getProperty("subtitle");var G=w.getProperty("intent");return new N({title:y,subtitle:z,icon:x,intent:G,press:function(){var J=this.getIntent();if(J&&J[0]==='#'){o.navigateFromShellApplicationNavigationMenu(J);}}});};var p=new a("shellNavigationMenu",{title:"{/currentState/application/title}",icon:"{/currentState/application/icon}",showTitle:{path:"/currentState/application/showNavMenuTitle"},showRelatedApps:(l.appState==="lean")?false:true,items:{path:"/currentState/application/hierarchy",factory:n.bind(this)},miniTiles:{path:"/currentState/application/relatedApps",factory:R.bind(this)},visible:{path:'/ShellAppTitleState',formatter:function(i){return i===this.oShellAppTitleStateEnum.SHELL_NAV_MENU;}.bind(this)}});p.setModel(this.getModel());this.oShellHeaderAppTitle.setNavigationMenu(p);var q=new j({id:'shell-floatingContainer',content:{path:"/currentState/floatingContainerContent",factory:s}});q.addCustomData(new d({key:"tabindex",value:"-1",writeToDom:true}));q.addEventDelegate({onsapskipforward:function(i){i.preventDefault();e.setIsFocusHandledByAnotherHandler(true);e.sendFocusBackToShell(i);},onsapskipback:function(i){if(e.getAppKeysHandler()){i.preventDefault();e.bFocusOnShell=false;}}});q.setModel(m.getModel());this.aDanglingControls.push(q);var t=new k({id:'shell-floatingActions',floatingActions:{path:"/currentState/floatingActions",factory:s}});t.updateAggregation=this.updateShellAggregation;var v=this.getOUnifiedShell();v.setFloatingContainer(q);v.setFloatingActionsContainer(t);this._createAllMyAppsView();},createPostCoreExtControls:function(){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ushell/ui/shell/ShellFloatingActions"],this._createPostCoreExtControls.bind(this));},_createAllMyAppsView:function(){var o=function(i){if(i.isEnabled()){this.oAllMyAppsView=sap.ui.view("allMyAppsView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps",viewData:{_fnGetShellModel:this.getModel.bind(this)},async:true,height:"100%",visible:{path:'/ShellAppTitleState',formatter:function(j){return j!==this.oShellAppTitleStateEnum.SHELL_NAV_MENU;}.bind(this)}}).addStyleClass("sapUshellAllMyAppsView");this.oAllMyAppsView.addCustomData(new d({key:"aria-label",value:r.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.getOUnifiedShell().getHeader().getAppTitle().setAllMyApps(this.oAllMyAppsView);}}.bind(this);sap.ushell.Container.getServiceAsync("AllMyApps").then(o);},getOUnifiedShell:function(){return this.oUnifiedShell;},setOUnifiedShell:function(o){this.oUnifiedShell=o;},initShellBarLogo:function(o){function i(k){var m=/url[\s]*\('?"?([^\'")]*)'?"?\)/.exec(k);return m?m[1]:null;}function j(){if(!o.bIsDestroyed){var k=i(T.get("sapUiGlobalLogo"));o.setLogo(k||jQuery.sap.getModulePath("sap.ushell")+'/themes/base/img/sap_55x27.png');}}if(sap.ui.getCore().isThemeApplied()){j();}sap.ui.getCore().attachThemeChanged(j);u.setPerformanceMark("FLP-TimeToFirstMeaningfullPaint_setLogo");},updateShellAggregation:function(n){var o=this.mBindingInfos[n],j=this.getMetadata().getJSONKeys()[n],k;jQuery.each(this[j._sGetter](),jQuery.proxy(function(i,v){this[j._sRemoveMutator](v);},this));jQuery.each(o.binding.getContexts(),jQuery.proxy(function(i,v){k=o.factory(this.getId()+"-"+i,v)?o.factory(this.getId()+"-"+i,v).setBindingContext(v,o.model):"";this[j._sMutator](k);},this));},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell";},createIFrameDialog:function(){var o=null,l=this.logonIFrameReference,i;var _=function(){if(l){l.remove();}return jQuery('<iframe id="SAMLDialogFrame" src="" frameborder="0" height="100%" width="100%"></iframe>');};var j=function(){o.addStyleClass('sapUshellSamlDialogHidden');jQuery('#sap-ui-blocklayer-popup').addClass('sapUshellSamlDialogHidden');};this.destroyIFrameDialog();var k=new B({text:r.i18n.getText("samlCloseBtn"),press:function(){sap.ushell.Container.cancelLogon();}});var m=new H("SAMLDialogFrame");this.logonIFrameReference=_();m.setContent(this.logonIFrameReference.prop('outerHTML'));o=new g({id:"SAMLDialog",title:r.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",rightButton:k}).addStyleClass("sapUshellIframeDialog");i=h.last("/core/extension/SupportTicket");if(i){var n=new c();n.setWidth('150px');n.setIcon('');o.setLeftButton(n);}o.addContent(m);o.open();j();this.logonIFrameReference=jQuery('#SAMLDialogFrame');return this.logonIFrameReference[0];},destroyIFrameDialog:function(){var i=sap.ui.getCore().byId('SAMLDialog');if(i){i.destroy();}this.logonIFrameReference=null;},showIFrameDialog:function(){var o=sap.ui.getCore().byId('SAMLDialog');if(o){o.removeStyleClass('sapUshellSamlDialogHidden');jQuery('#sap-ui-blocklayer-popup').removeClass('sapUshellSamlDialogHidden');}},addDanglingControl:function(o){this.aDanglingControls.push(o);}});},false);
sap.ui.predefine('sap/ushell/renderers/fiori2/allMyApps/AllMyApps.controller',["sap/ushell/renderers/fiori2/allMyApps/AllMyAppsManager","sap/ushell/utils/WindowUtils"],function(A,W){"use strict";var s=false,K=function(v){this.init(v);};sap.ui.controller("sap.ushell.renderers.fiori2.allMyApps.AllMyApps",{oStateEnum:{FIRST_LEVEL:0,SECOND_LEVEL:1,DETAILS:2,FIRST_LEVEL_SPREAD:3},iNumberOfProviders:0,onInit:function(){this.bFirstLoadOfAllMyApps=true;var a=new sap.ui.model.json.JSONModel();a.setSizeLimit(10000);a.setProperty("/AppsData",[]);this.getView().setModel(a,'allMyAppsModel');sap.ui.getCore().getEventBus().subscribe("launchpad","allMyAppsFirstCatalogLoaded",this.updateMasterFocusAndDetailsContext,this);sap.ui.getCore().getEventBus().subscribe("launchpad","allMyAppsFirstCatalogLoaded",this.onDetailLoad,this);sap.ui.getCore().getEventBus().subscribe("launchpad","allMyAppsMasterLoaded",this.onMasterLoad,this);sap.ui.getCore().getEventBus().subscribe("launchpad","allMyAppsNoCatalogsLoaded",this.onNoCatalogsLoaded,this);},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","allMyAppsFirstCatalogLoaded",this.updateMasterFocusAndDetailsContext);sap.ui.getCore().getEventBus().unsubscribe("launchpad","allMyAppsFirstCatalogLoaded",this.onDetailLoad,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","allMyAppsMasterLoaded",this.onMasterLoad,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","allMyAppsNoCatalogsLoaded",this.onNoCatalogsLoaded,this);},onAfterRendering:function(){var t=this,v=this.getView(),a=v.getModel("allMyAppsModel"),S=v.oSplitApp;if(!this.bAfterInitialLoading){S.toMaster("allMyAppsMasterBusyIndicator","show");if(!sap.ui.Device.system.phone){S.toDetail("allMyAppsDetailBusyIndicator","show");}}if(this.bFirstLoadOfAllMyApps){a.setProperty("/AppsData",[]);}else{var m=a.getProperty("/AppsData");a.setProperty("/AppsData",m);}setTimeout(function(){t._getAllMyAppsManager().loadAppsData(a,t._getPopoverObject(),t.bFirstLoadOfAllMyApps);s=t._isSingleDataSource();t.switchToInitialState();t.bFirstLoadOfAllMyApps=false;},0);},switchToInitialState:function(){var v=this.getView(),S=v.getModel(),b,o,a=v.getModel().getProperty("/ShellAppTitleState");if(this._isSingleDataSource()){S.setProperty('/allMyAppsMasterLevel',this.oStateEnum.FIRST_LEVEL_SPREAD);v.oDataSourceList.bindItems("allMyAppsModel>/AppsData/0/groups",v.oDataSourceListTemplate);}else{S.setProperty('/allMyAppsMasterLevel',this.oStateEnum.FIRST_LEVEL);v.oDataSourceList.bindItems("allMyAppsModel>/AppsData",v.oDataSourceListTemplate);}if(sap.ui.Device.system.phone){o=this.getView().oSplitApp;o.toMaster("sapUshellAllMyAppsMasterPage","show");}v.oDataSourceList.rerender();this.updateMasterFocusAndDetailsContext(undefined,undefined,{bFirstCatalogLoadedEvent:true});this._getPopoverHeaderLabel().setText(sap.ushell.resources.i18n.getText("allMyApps_headerTitle"));b=this._getPopoverHeaderBackButton();if(a===this._getShellAppTitleStateEnum().ALL_MY_APPS_ONLY){b.setVisible(false);}else{b.setVisible(true);}},handleSwitchToMasterAreaOnPhone:function(){var S=this.getView().oSplitApp,o=this.getView().getModel(),a=this._getDataSourcesSelectedPath(),p=a.split('/'),b=this.getView().getModel().getProperty("/ShellAppTitleState"),B=this._getPopoverHeaderBackButton();S.toMaster("sapUshellAllMyAppsMasterPage","show");if(this._isSingleDataSource()){o.setProperty('/allMyAppsMasterLevel',this.oStateEnum.FIRST_LEVEL_SPREAD);if(b===this._getShellAppTitleStateEnum().ALL_MY_APPS_ONLY){B.setVisible(false);}}else if(p.length===3){o.setProperty('/allMyAppsMasterLevel',this.oStateEnum.FIRST_LEVEL);if(b===this._getShellAppTitleStateEnum().ALL_MY_APPS_ONLY){B.setVisible(false);}}else{o.setProperty('/allMyAppsMasterLevel',this.oStateEnum.SECOND_LEVEL);}},handleMasterListItemPress:function(o){var c=this._getClickedDataSourceItemPath(o),v=this.getView(),a=v.getModel('allMyAppsModel'),C=a.getProperty(c+"/type"),S=v.getModel(),b=S.getProperty('/allMyAppsMasterLevel'),i=(C===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG),t=this.getShellAppTitleToggleListButton(),B;this.lastPressedMasterItem=o.getParameter('listItem');if(i||(b===this.oStateEnum.FIRST_LEVEL_SPREAD)||(b===this.oStateEnum.SECOND_LEVEL)){B=this.handleMasterListItemPress_toDetails(o);}else{B=this.handleMasterListItemPress_toSecondLevel(o);}v.oCustomLabel.setBindingContext(B,'allMyAppsModel');v.oCustomLink.setBindingContext(B,'allMyAppsModel');v.oCustomPanel.setBindingContext(B,'allMyAppsModel');if(t.getVisible()){t.firePress();t.setPressed(false);t.focus();}},handleMasterListItemPress_toSecondLevel:function(o){var c=this._getClickedDataSourceItemPath(o),v=this.getView(),b,S=v.getModel().getProperty("/ShellAppTitleState"),a=v.getModel('allMyAppsModel'),C=a.getProperty(c+"/type"),d=a.getProperty(c+"/title"),e=v.getModel(),f=this.getView().oSplitApp,B,g;if(!sap.ui.Device.system.phone){f.toDetail("sapUshellAllMyAppsDetailsPage");}v.oDataSourceList.bindItems('allMyAppsModel>'+c+"/groups",v.oDataSourceListTemplate);e.setProperty('/allMyAppsMasterLevel',this.oStateEnum.SECOND_LEVEL);if(S===this._getShellAppTitleStateEnum().ALL_MY_APPS_ONLY){b=this._getPopoverHeaderBackButton();b.setVisible(true);}B=this._setBindingContext(c+"/groups/0",v.oItemsContainer);v.oDataSourceList.rerender();v.oDataSourceList.setSelectedItem(v.oDataSourceList.getItems()[0]);g=v.oDataSourceList.getSelectedItem();if(g){g.focus();}if(C===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().HOME){this._getPopoverHeaderLabel().setText(sap.ushell.resources.i18n.getText("allMyApps_homeEntryTitle"));}else if(C===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().EXTERNAL){this._getPopoverHeaderLabel().setText(d);}this._getDetailsHeaderLabel().setText(a.getProperty(c+"/groups/0/title"));return B;},handleMasterListItemPress_toDetails:function(c){var C=this._getClickedDataSourceItemPath(c),v=this.getView(),S=v.getModel(),a=v.getModel('allMyAppsModel'),o=v.oSplitApp,b=this._getPopoverHeaderBackButton(),B=this._setBindingContext(C,v.oItemsContainer);this._getDetailsHeaderLabel().setText(a.getProperty(C+"/title"));if(sap.ui.Device.system.phone){o.toDetail("sapUshellAllMyAppsDetailsPage");S.setProperty('/allMyAppsMasterLevel',this.oStateEnum.DETAILS);b.setVisible(true);}return B;},onMasterLoad:function(){var v=this.getView(),S=v.oSplitApp,b=this._getPopoverHeaderBackButton();this.bAfterInitialLoading=true;if(S.getCurrentMasterPage()==v.oMasterBusyIndicator){S.toMaster("sapUshellAllMyAppsMasterPage","show");}b.focus();s=this._isSingleDataSource();this.updateMasterFocusAndDetailsContext(undefined,undefined,{bFirstCatalogLoadedEvent:false});},onDetailLoad:function(){var v=this.getView(),S=v.oSplitApp;this.bAfterInitialLoading=true;if(!sap.ui.Device.system.phone){S.toDetail("sapUshellAllMyAppsDetailsPage","show");}},onNoCatalogsLoaded:function(){var v=this.getView(),S=v.oSplitApp;if((!sap.ui.Device.system.phone)&&(!s)){S.toDetail("sapUshellAllMyAppsEmptyDetailsPage","show");}else if((!sap.ui.Device.system.phone)&&s){S.toDetail("sapUshellAllMyAppsDetailsPage");}},updateMasterFocusAndDetailsContext:function(c,e,d){var v=this.getView(),a=v.getModel('allMyAppsModel'),f=this._getInitialFirstLevelSelectionIndex(),b,B,S;if(s===true){b=a.createBindingContext("/AppsData/0/groups/0");B=a.getProperty(b.sPath);}else{b=a.createBindingContext("/AppsData/"+f);B=a.getProperty(b.sPath);}v.oItemsContainer.setBindingContext(b,'allMyAppsModel');v.oCustomLabel.setBindingContext(b,'allMyAppsModel');v.oCustomLink.setBindingContext(b,'allMyAppsModel');v.oCustomPanel.setBindingContext(b,'allMyAppsModel');if(B!==undefined){this._getDetailsHeaderLabel().setText(B.title);}if(d.bFirstCatalogLoadedEvent===true){v.oDataSourceList.rerender();}if(d.bFirstCatalogLoadedEvent===false&&f===0){this.onNoCatalogsLoaded();}v.oDataSourceList.setSelectedItem(v.oDataSourceList.getItems()[f]);S=v.oDataSourceList.getSelectedItem();if(S){S.focus();}if(d.bFirstCatalogLoadedEvent){jQuery.sap.measure.end("FLP:ShellAppTitle.onClick");jQuery.sap.measure.end("FLP:ShellNavMenu.footerClick");}},handleGroupPress:function(e){var d=this.getView().oCustomLink.getBindingContext("allMyAppsModel").getObject();if(d.handlePress){d.handlePress(e,d);}},toggleMasterArea:function(){var S=this.getView().oSplitApp;!this.bMasterShown?S.showMaster():S.hideMaster();this.bMasterShown=!this.bMasterShown;},onAppItemClick:function(c){var a=this.getView().getModel('allMyAppsModel'),C=c.getBindingContext("allMyAppsModel").sPath,u=a.getProperty(C+"/url");if(u){if(u[0]==='#'){hasher.setHash(u);setTimeout(function(){this.getView().getParent().close();}.bind(this),50);}else{W.openURL(u,'_blank');}}},getCurrentState:function(){var S=this.getView().getModel();return S.getProperty('/allMyAppsMasterLevel');},getStateEnum:function(){return this.oStateEnum;},_isSingleDataSource:function(){var a=sap.ushell.Container.getService("AllMyApps");if(a.isCatalogAppsEnabled()){return false;}if(!a.isExternalProviderAppsEnabled()&&a.isHomePageAppsEnabled()){return true;}if(a.isExternalProviderAppsEnabled()&&Object.keys(a.getDataProviders()).length===1&&!a.isHomePageAppsEnabled()){return true;}return false;},_getInitialFirstLevelSelectionIndex:function(){var v=this.getView(),a=v.getModel('allMyAppsModel'),d=a.getProperty("/AppsData"),i,t;for(i=0;i<d.length;i++){t=d[i];if(t.type===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG){return i;}}return 0;},_getPopoverHeaderBackButton:function(){return this._getPopoverHeaderContent(0);},getShellAppTitleToggleListButton:function(){return this._getPopoverHeaderContent(1);},_getPopoverHeaderContent:function(c){var C,h,b;C=this._getPopoverObject().getCustomHeader();h=C.getContentLeft();b=h[c];return b;},_getPopoverHeaderLabel:function(){var c,C;c=this._getPopoverObject().getCustomHeader();C=c.getContentMiddle();return C[0];},_getPopoverObject:function(){return this.getView().getParent();},_getDetailsHeaderLabel:function(){return this.getView().oDetailsHeaderLabel;},_setBindingContext:function(b,B){var a=this.getView().getModel("allMyAppsModel"),o=a.createBindingContext(b);B.setBindingContext(o,"allMyAppsModel");return o;},_getClickedDataSourceItemPath:function(o){var c=o.getParameter("listItem");return c.getBindingContext('allMyAppsModel').sPath;},_getAllMyAppsManager:function(){return A;},_getDataSourcesSelectedPath:function(){return this.lastPressedMasterItem.getBindingContextPath();},_getShellAppTitleStateEnum:function(){var S=sap.ui.getCore().byId("shellAppTitle");return S.getStateEnum();},initKeyBoardNavigationHandling:function(){if(this.keyboardNavigation){this.keyboardNavigation.destroy();}this.keyboardNavigation=new K(this.getView());}});
K.prototype.init=function(v){this.keyCodes=jQuery.sap.KeyCodes;v.oDataSourceList.addEventDelegate({onsaptabnext:function(e){var d=jQuery('.sapUshellAllMyAppsListItem');this.jqDetailAreaElement=v.oItemsContainer.$();this.jqDetailAreaElement.on('keydown.keyboardNavigation',this.keydownHandler.bind(this));this._setItemFocus(e,d[0]);}.bind(this)});v.oItemsContainer.addEventDelegate({onsaptabprevious:function(e){var c=jQuery('.sapUshellAllMyAppsListItem[tabindex="0"]')[0];jQuery(c).attr('tabindex',-1);},onsaptabnext:function(e){var c=jQuery('.sapUshellAllMyAppsCustomPanel'),C=jQuery('.sapUshellAllMyAppsListItem[tabindex="0"]')[0];if(c.length===0){jQuery(C).attr('tabindex',-1);}}});v.oCustomPanel.addEventDelegate({onsaptabnext:function(e){var c=jQuery('.sapUshellAllMyAppsListItem[tabindex="0"]')[0];jQuery(c).attr('tabindex',-1);}});};
K.prototype.keydownHandler=function(e){switch(e.keyCode){case this.keyCodes.ARROW_UP:this.arrowKeyHandler(e,-2);break;case this.keyCodes.ARROW_DOWN:this.arrowKeyHandler(e,2);break;case this.keyCodes.ARROW_LEFT:this.arrowKeyHandler(e,-1);break;case this.keyCodes.ARROW_RIGHT:this.arrowKeyHandler(e,1);break;default:break;}};
K.prototype.arrowKeyHandler=function(e,d){var D=jQuery('.sapUshellAllMyAppsListItem').toArray(),c=jQuery('.sapUshellAllMyAppsListItem[tabindex="0"]')[0],C=D.indexOf(c),E=D[C+d];if(E){jQuery(c).attr('tabindex',-1);this._setItemFocus(e,E);}};
K.prototype._setItemFocus=function(e,E){if(E){e.preventDefault();e.stopImmediatePropagation();jQuery(E).attr('tabindex',0);E.focus();}};
K.prototype.destroy=function(){if(this.jqDetailAreaElement){this.jqDetailAreaElement.off(".keyboardNavigation");}delete this.jqDetailAreaElement;};
},false);
sap.ui.predefine('sap/ushell/renderers/fiori2/allMyApps/AllMyApps.view',['sap/ui/Device','sap/m/BusyIndicator','sap/m/SplitApp','sap/m/Label','sap/m/Link','sap/m/Text','sap/m/Page','sap/m/StandardListItem','sap/m/CustomListItem','sap/m/List','sap/m/VBox','sap/m/Bar','sap/m/ScrollContainer','sap/m/library','sap/ui/core/library','sap/ushell/ui/launchpad/AccessibilityCustomData'],function(D,B,S,L,a,T,P,b,C,c,V,d,f,m,g,A){"use strict";var h=m.BarDesign,i=m.ListMode,j=m.ListType,k=m.SplitAppMode,l=g.TextAlign;sap.ui.jsview("sap.ushell.renderers.fiori2.allMyApps.AllMyApps",{createContent:function(o){this.oMasterBusyIndicator=new B('allMyAppsMasterBusyIndicator',{size:"1rem"}).addStyleClass("sapUshellAllMyAppsBusyIndicator");this.oDetailBusyIndicator=new B('allMyAppsDetailBusyIndicator',{size:"1rem"}).addStyleClass("sapUshellAllMyAppsBusyIndicator");this.oSplitApp=new S("sapUshellAllMyAppsMasterDetail",{masterPages:[this.oMasterBusyIndicator,this.getMasterPartContent(o)],detailPages:[this.oDetailBusyIndicator,this.getEmptyDetailsContent(),this.getDetailsPartContent(o)],mode:{path:'/isPhoneWidth',formatter:function(I){return I?k.ShowHideMode:k.StretchCompressMode;}}}).addStyleClass("sapUshellAllMyAppsView");this.bAfterOpenHandlerCalled=false;return this.oSplitApp;},getEmptyDetailsContent:function(){var t,e;t=new L({text:sap.ushell.resources.i18n.getText('AllMyAppsEmptyText'),textAlign:l.Center}).addStyleClass('sapUshellAllMyAppsEmptyDetailsPageText');e=new P('sapUshellAllMyAppsEmptyDetailsPage',{content:[t],showHeader:false,enableScrolling:false});return e;},getMasterPartContent:function(o){var e;if(!this.oDataSourceList){this.oDataSourceListTemplate=new b({type:{parts:['allMyAppsModel>type','/allMyAppsMasterLevel'],formatter:function(t,n){var s=D.system.phone||((n===this.getController().oStateEnum.FIRST_LEVEL)&&(t!==sap.ushell.Container.getService('AllMyApps').getProviderTypeEnum().CATALOG));return s?j.Navigation:j.Active;}.bind(this)},title:'{allMyAppsModel>title}'});this._addCustomData(this.oDataSourceListTemplate,"aria-controls","sapUshellAllMyAppsDetailsPage");this.oDataSourceList=new c('sapUshellAllMyAppsDataSourcesList',{tooltip:'{i18n>catalogSelect_tooltip}',rememberSelections:true,mode:D.system.phone?i.None:i.SingleSelectMaster,items:{path:'allMyAppsModel>/AppsData',template:this.oDataSourceListTemplate},growingThreshold:100,showNoData:false,itemPress:[o.handleMasterListItemPress,o]});this._addCustomData(this.oDataSourceList,"role","navigation");}e=new P("sapUshellAllMyAppsMasterPage",{showHeader:false});e.addContent(this.oDataSourceList);return e;},getDetailsPartContent:function(o){var n=new V(),t=new L({text:'{allMyAppsModel>title}'}),s=new L({text:'{allMyAppsModel>subTitle}',visible:{parts:['allMyAppsModel>subTitle'],formatter:function(e){return e?true:false;}}}),I,p,q;t.addStyleClass("sapUshellAllMyAppsItemTitle");s.addStyleClass("sapUshellAllMyAppsItemSubTitle");n.addItem(t);n.addItem(s);I=new C({content:n,type:j.Active,press:function(){o.onAppItemClick(this);}});I.addStyleClass("sapUshellAllMyAppsListItem");I.addEventDelegate({onsapenter:function(e){o.onAppItemClick(e.srcControl);},onsapspace:function(e){o.onAppItemClick(e.srcControl);}});this.oDetailsHeaderLabel=new L("sapUshellAllMyAppsDetailsHeaderLabel",{});p=new d("sapUshellDetailsPageHeaderBar",{contentLeft:this.oDetailsHeaderLabel,contentRight:[],contentMiddle:[],design:h.Header});this.oItemsContainerlist=new c("oItemsContainerlist",{items:{path:"allMyAppsModel>apps",template:I}});this.oItemsContainer=new f("allMyAppsScrollContainer",{horizontal:false,vertical:true,content:this.oItemsContainerlist}).addStyleClass("sapUshellAllMyAppsDetailsItemContainer");this.oCustomLink=new a({text:{path:"allMyAppsModel>sCustomLink"},press:function(e){o.handleGroupPress(e);}});this.oCustomLabel=new T({text:{path:"allMyAppsModel>sCustomLabel"}});this.oCustomPanel=new V({visible:{parts:[{path:"allMyAppsModel>numberCustomTiles"}],formatter:function(e){return!!e;}},items:[this.oCustomLabel,this.oCustomLink]});this.oCustomPanel.addStyleClass("sapUshellAllMyAppsCustomPanel");q=new P("sapUshellAllMyAppsDetailsPage",{content:[p,this.oItemsContainer,this.oCustomPanel],showHeader:false,enableScrolling:true});this._addCustomData(q,"role","applications");return q;},_afterOpen:function(){if(!this.bAfterOpenHandlerCalled){this.bAfterOpenHandlerCalled=true;if(D.system.desktop){this.getController().initKeyBoardNavigationHandling();}}},_addCustomData:function(I,K,v){I.addCustomData(new A({key:K,value:v,writeToDom:true}));},getControllerName:function(){return"sap.ushell.renderers.fiori2.allMyApps.AllMyApps";}});},false);
sap.ui.predefine('sap/ushell/renderers/fiori2/allMyApps/AllMyAppsManager',[],function(){"use strict";var A=function(){};
A.prototype.loadAppsData=function(m,p,l){var a=sap.ushell.Container.getService("AllMyApps");this.oPopover=p;if(!a.isEnabled()){return;}else{this.iNumberOfProviders=0;this.oModel=m;if(a.isHomePageAppsEnabled()){this._handleGroupsData();}if(a.isExternalProviderAppsEnabled()){this._handleExternalProvidersData(m);}if(a.isCatalogAppsEnabled()){this._handleCatalogs(l);}if(!a.isCatalogAppsEnabled()||(a.isCatalogAppsEnabled()&&l)){var e=sap.ui.getCore().getEventBus();e.publish("launchpad","allMyAppsMasterLoaded");}}};
A.prototype._handleGroupsData=function(){var t=this,g=this._getGroupsData(),h={title:sap.ushell.resources.i18n.getText("allMyApps_homeEntryTitle")},p;g.done(function(G){h.groups=G;h.type=sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().HOME;if(G.length===0){return;}p=t.oModel.getProperty("/AppsData");if(p){var i=t._getIndexByType(p,h.type);if(i!==undefined){p[i]=h;}else{p.unshift(h);}}t.oModel.setProperty("/AppsData",p);t.iNumberOfProviders+=1;});};
A.prototype._getIndexByType=function(p,a){if(p.length<=0){return 0;}for(var i=0;i<p.length;i++){if(p[i].type===a){return i;}}};
A.prototype._getGroupsData=function(){var t=this,l=sap.ushell.Container.getService("LaunchPage"),d=new jQuery.Deferred(),g=l.getGroups(),D=l.getDefaultGroup(),p=[],G=[],i,T,o,s,a,b,c,e,n;t.oDefaultGroup=undefined;p.push(D);p.push(g);jQuery.when(p).then(function(f){p[0].done(function(h){t.oDefaultGroup=h;});p[1].done(function(h){for(i=0;i<h.length;i++){n=0;T=h[i];if(l.isGroupVisible(T)===false){continue;}if(l.getGroupId(T)===l.getGroupId(t.oDefaultGroup)){s=sap.ushell.resources.i18n.getText("my_group");}else{s=l.getGroupTitle(T);}o={};o.title=s;o.apps=[];a=l.getGroupTiles(T);for(b=0;b<a.length;b++){c=a[b];if(l.isTileIntentSupported(c)){e=t._getAppEntityFromTile(c);if(e){o.apps.push(e);}else{n++;}}}o.numberCustomTiles=n;if(n===1){o.sCustomLabel=sap.ushell.resources.i18n.getText("allMyApps_customStringSingle");o.sCustomLink=sap.ushell.resources.i18n.getText("allMyApps_customLinkHomePageSingle");}else{o.sCustomLabel=sap.ushell.resources.i18n.getText("allMyApps_customString",[n]);o.sCustomLink=sap.ushell.resources.i18n.getText("allMyApps_customLinkHomePage");}o.handlePress=function(j,k){window.hasher.setHash("#Shell-home");this.oPopover.close();var B=sap.ui.getCore().getEventBus();B.subscribe("launchpad","dashboardModelContentLoaded",function(){B.publish("launchpad","scrollToGroupByName",{groupName:k.title,isInEditTitle:false});},this);B.publish("launchpad","scrollToGroupByName",{groupName:k.title,isInEditTitle:false});}.bind(t);if(o.apps.length>0||o.numberCustomTiles>0){G.push(o);}}d.resolve(G);});});return d.promise();};
A.prototype._handleExternalProvidersData=function(){var t=this,e=sap.ushell.Container.getService("AllMyApps").getDataProviders(),E=Object.keys(e),s,o,a,b,i,c;if(E.length>0){for(i=0;i<E.length;i++){s=E[i];o=e[s];a=o.getTitle();b={};b.title=a;c=o.getData();c.done(function(p){if(p&&(p.length>0)){b.groups=p;b.type=sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().EXTERNAL;t.oModel.setProperty("/AppsData/"+t.iNumberOfProviders,b);t.iNumberOfProviders+=1;var d=sap.ui.getCore().getEventBus();d.publish("launchpad","allMyAppsMasterLoaded");}});}}};
A.prototype._handleNotFirstCatalogsLoad=function(){var m=this.oModel.getProperty("/AppsData"),c=sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG;if(m.length&&m[m.length-1].type===c){this.bFirstCatalogLoaded=true;sap.ui.getCore().getEventBus().publish("launchpad","allMyAppsFirstCatalogLoaded",{bFirstCatalogLoadedEvent:true});}};
A.prototype._handleCatalogs=function(l){if(!l){this._handleNotFirstCatalogsLoad();}else{this.bFirstCatalogLoaded=false;this.aPromises=[];sap.ushell.Container.getService("LaunchPage").getCatalogs().done(function(c){jQuery.when.apply(jQuery,this.aPromises).then(this._onDoneLoadingCatalogs.bind(this));}.bind(this)).fail(function(a){this._onGetCatalogsFail(sap.ushell.resources.i18n.getText("fail_to_load_catalog_msg"));}.bind(this)).progress(this._addCatalogToModel.bind(this));}};
A.prototype._addCatalogToModel=function(c){var p={apps:[],numberCustomTiles:0,type:sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG},t=this,P,i,a,o,l=sap.ushell.Container.getService("LaunchPage"),C=l.getCatalogTiles(c);this.aPromises.push(C);C.done(function(b){if(b.length===0){return;}var s=l.getCatalogTitle(c);P=t.oModel.getProperty("/AppsData");for(i=0;i<P.length;i++){if((P[i].type===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG)&&(P[i].title===s)){p=P[i];break;}}p.title=l.getCatalogTitle(c);for(a=0;a<b.length;a++){if(l.isTileIntentSupported(b[a])){o=t._getAppEntityFromTile(b[a]);if(o){p.apps.push(o);}else{p.numberCustomTiles++;}}}if(p.numberCustomTiles===1){p.sCustomLabel=sap.ushell.resources.i18n.getText("allMyApps_customStringSingle");p.sCustomLink=sap.ushell.resources.i18n.getText("allMyApps_customLinkAppFinderSingle");}else{p.sCustomLabel=sap.ushell.resources.i18n.getText("allMyApps_customString",[p.numberCustomTiles]);p.sCustomLink=sap.ushell.resources.i18n.getText("allMyApps_customLinkAppFinder");}p.handlePress=function(e,d){this.oPopover.close();window.hasher.setHash("#Shell-home&/appFinder/catalog/"+JSON.stringify({catalogSelector:d.title,tileFilter:"",tagFilter:"[]",targetGroup:""}));}.bind(t);if(p.apps.length>0||p.numberCustomTiles>0){t.oModel.setProperty("/AppsData/"+i,p);if(t.bFirstCatalogLoaded===false){sap.ui.getCore().getEventBus().publish("launchpad","allMyAppsFirstCatalogLoaded",{bFirstCatalogLoadedEvent:true});t.bFirstCatalogLoaded=true;}t.iNumberOfProviders+=1;}});};
A.prototype._onGetCatalogsFail=function(m){sap.ushell.Container.getService('Message').show(sap.ushell.services.Message.Type.INFO,m);};
A.prototype._onDoneLoadingCatalogs=function(){var e=sap.ui.getCore().getEventBus();if(!this.bFirstCatalogLoaded){e.publish('launchpad','allMyAppsNoCatalogsLoaded');}};
A.prototype._getAppEntityFromTile=function(c){var a,l=sap.ushell.Container.getService("LaunchPage"),t=l.getCatalogTilePreviewTitle(c),T=l.getCatalogTilePreviewSubtitle(c),s=l.getCatalogTileTargetURL(c);if(s&&(t||T)){a={};a.url=s;if(t){a.title=t;a.subTitle=T;}else{a.title=T;}return a;}};
return new A();},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchNavigationObject',['sap/ushell/renderers/fiori2/search/eventlogging/EventLogger','sap/ushell/renderers/fiori2/search/SearchHelper'],function(E,S){"use strict";return sap.ui.base.Object.extend("sap.ushell.renderers.fiori2.search.SearchNavigationObject",{constructor:function(p){this._model=sap.ushell.renderers.fiori2.search.getModelSingleton();if(p){this.setHref(p.href);this.setText(p.text);this.setTarget(p.target);this.setLoggingType(p.loggingType);this.setPositionInList(p.positionInList);}if(this._model.eventLogger===undefined){this._model.eventLogger=E.newInstance({sinaNext:this._model.sinaNext});}if(typeof this._loggingType==='undefined'){this.setLoggingType(this._model.eventLogger.RESULT_LIST_ITEM_NAVIGATE);}},getPositionInList:function(){return this._positionInList;},setPositionInList:function(p){this._positionInList=p;},getHref:function(){return this._href;},setHref:function(h){this._href=h;},getText:function(){return this._text;},setText:function(t){this._text=t;},getTarget:function(){return this._target;},setTarget:function(t){this._target=t;},getLoggingType:function(){return this._loggingType;},setLoggingType:function(l){this._loggingType=l;},performNavigation:function(p){this.trackNavigation(p);if(!this._target){S.openURL(this._href);}else{S.openURL(this._href,this._target);}},trackNavigation:function(p){this._model.eventLogger.logEvent({type:(p&&p.loggingType)||this.getLoggingType(),targetUrl:this.getHref(),positionInList:this.getPositionInList(),executionId:this.getResultSetId()});},getResultSetId:function(){return'';},isEqualTo:function(o){if(!o){return false;}return this.getHref()==o.getHref();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/App.controller',['sap/m/MessageToast','sap/ushell/renderers/fiori2/search/SearchShellHelper'],function(M,S){"use strict";return sap.ui.controller("sap.ushell.renderers.fiori2.search.container.App",{onInit:function(){this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.hashChanger.attachEvent("hashChanged",this.hashChanged);if(S.oSearchFieldGroup===undefined){S.init();}S.setSearchState('EXP_S');},hashChanged:function(e){var m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.parseURL();},onExit:function(){this.oShellNavigation.hashChanger.detachEvent("hashChanged",this.hashChanged);if(sap.ui.getCore().byId('searchContainerResultsView')&&sap.ui.getCore().byId('searchContainerResultsView').oTablePersoController&&sap.ui.getCore().byId('searchContainerResultsView').oTablePersoController.getTablePersoDialog()){sap.ui.getCore().byId('searchContainerResultsView').oTablePersoController.getTablePersoDialog().destroy();}if(S.getDefaultOpen()!==true){S.setSearchStateSync('COL');}else{S.setSearchState('EXP');}if(this.oView.oPage.oFacetDialog){this.oView.oPage.oFacetDialog.destroy();}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/App.view',['sap/ushell/renderers/fiori2/search/SearchModel','sap/ushell/renderers/fiori2/search/SearchShellHelper','sap/m/Bar','sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/controls/SearchFilterBar'],function(S,a,B,b,c){"use strict";return sap.ui.jsview("sap.ushell.renderers.fiori2.search.container.App",{createContent:function(){var t=this;if(!this.oModel){this.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();}this.setModel(sap.ushell.resources.i18nModel,"i18n");this.oSearchResults=sap.ui.view({id:"searchContainerResultsView",tooltip:"{i18n>searchResultsView_tooltip}",viewName:"sap.ushell.renderers.fiori2.search.container.Search",type:sap.ui.core.mvc.ViewType.JS});this.oSearchResults.setModel(t.oModel);this.oSearchResults.setAppView(t);var s=new sap.m.Bar({contentLeft:[t.oSearchResults.assembleFilterButton(),t.oSearchResults.assembleDataSourceTapStrips()],contentRight:t.oSearchResults.assembleSearchToolbar()});s.addStyleClass('sapUshellSearchBar');var f=new sap.ushell.renderers.fiori2.search.controls.SearchFilterBar({visible:{parts:[{path:'/facetVisibility'},{path:'/uiFilter/rootCondition'}],formatter:function(d,r){if(!d&&r&&r.hasFilters()){return true;}else{return false;}}}});this.oModel.parseURL();this.oPage=this.pageFactory("searchPage",this.oSearchResults,s,f);this.oSearchResults.reorgTabBarSequence();this.oPage.addEventDelegate({onAfterRendering:function(e){window.onbeforeunload=function(){t.oModel.eventLogger.logEvent({type:t.oModel.eventLogger.LEAVE_PAGE});};}});return this.oPage;},beforeExit:function(){},pageFactory:function(i,C,h,s){var t=this;var p=new sap.m.Page({id:i,customHeader:h,subHeader:s,content:[C],enableScrolling:true,showFooter:{parts:['/multiSelectionAvailable','/multiSelectionActions','/errors/length'],formatter:function(m,f,n){return m||n>0;}},showHeader:true,showSubHeader:{parts:[{path:'/facetVisibility'},{path:'/uiFilter/rootCondition'}],formatter:function(f,r){if(!f&&r&&r.hasFilters()){return true;}else{return false;}}}});p.setModel(t.oModel);var e=["onAfterHide","onAfterShow","onBeforeFirstShow","onBeforeHide","onBeforeShow"];var d={};t.createFooter(p);jQuery.each(e,function(I,E){d[E]=jQuery.proxy(function(f){jQuery.each(this.getContent(),function(I,C){C._handleEvent(f);});},p);});p.addEventDelegate(d);if(!sap.ui.Device.system.desktop){p._bUseIScroll=true;}return p;},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.container.App";},createFooter:function(p){var t=this;if(jQuery.device.is.phone){return;}var m=new sap.m.ToggleButton({icon:"sap-icon://multi-select",tooltip:sap.ushell.resources.i18n.getText("toggleSelectionModeBtn"),press:function(){var d=t.oBar.getContent();var i,g;if(this.getPressed()){t.oSearchResults.resultList.enableSelectionMode();t.oModel.setProperty("/multiSelectionEnabled",true);for(i=0;i<d.length;i++){g=d[i];if(g.hasStyleClass("sapUshellSearchResultList-multiSelectionActionButton")){t.oBar.removeContent(g);}}var h=t.oModel.getDataSource();var k=t.oModel.config.getDataSourceConfig(h);var s=new k.searchResultListSelectionHandlerControl();var l=s.actionsForDataSource();t.oModel.setProperty("/multiSelectionActions",l);for(i=0;i<l.length;i++){var n=l[i];var o=new sap.m.Button({text:n.text,press:function(){var r=t.oModel.getProperty("/results");var j=[];for(var i=0;i<r.length;i++){var u=r[i];if(u.selected){j.push(u);}}n.action(j);},visible:{parts:[{path:'/multiSelectionEnabled'}],mode:sap.ui.model.BindingMode.OneWay}});o.setModel(t.oModel);o.addStyleClass("sapUshellSearchResultList-multiSelectionActionButton");t.oBar.insertContent(o,2);}}else{var q=t.oSearchResults.resultList.disableSelectionMode();q.done(function(){t.oModel.setProperty("/multiSelectionEnabled",false);t.oModel.setProperty("/multiSelectionActions",undefined);var r=t.oModel.getProperty("/boResults");if(r){for(var j=0;j<r.length;j++){var u=r[j];u.selected=false;}}for(i=0;i<d.length;i++){g=d[i];if(g.hasStyleClass("sapUshellSearchResultList-multiSelectionActionButton")){t.oBar.removeContent(g);}}});}},visible:{parts:[{path:'/multiSelectionAvailable'}],mode:sap.ui.model.BindingMode.OneWay}});m.setModel(this.oModel);m.addStyleClass("sapUshellSearchResultList-toggleMultiSelectionButton");var e=new sap.m.MessagePopover({placement:"Top"});e.setModel(this.oModel);e.bindAggregation("items","/errors",function(i,C){var g=new sap.m.MessagePopoverItem({title:"{title}",description:"{description}"});switch(C.oModel.getProperty(C.sPath).type.toLowerCase()){case"error":g.setType(sap.ui.core.MessageType.Error);break;case"warning":g.setType(sap.ui.core.MessageType.Warning);break;default:g.setType(sap.ui.core.MessageType.Information);}return g;});var E=new sap.m.Button("searchErrorButton",{icon:sap.ui.core.IconPool.getIconURI("alert"),text:{parts:[{path:'/errors/length'}],formatter:function(l){return l;}},visible:{parts:[{path:'/errors/length'}],formatter:function(l){return l>0;},mode:sap.ui.model.BindingMode.OneWay},type:sap.m.ButtonType.Emphasized,tooltip:sap.ushell.resources.i18n.getText('errorBtn'),press:function(){e.openBy(E);}});E.addDelegate({onAfterRendering:function(){if(!t.oModel.getProperty('/isErrorPopovered')){E.firePress();t.oModel.setProperty('/isErrorPopovered',true);}}});E.setLayoutData(new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow}));m.setLayoutData(new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow}));var d=[E,new sap.m.ToolbarSpacer(),m];t.oBar=new sap.m.OverflowToolbar({content:d}).addStyleClass("MyBar");var f=p.getFooter();if(f&&f.destroy){f.destroy();}p.setFooter(t.oBar);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/Search.controller',["sap/ushell/renderers/fiori2/search/SearchModel"],function(S){"use strict";return sap.ui.controller("sap.ushell.renderers.fiori2.search.container.Search",{onInit:function(){var t=this;sap.ui.getCore().getEventBus().subscribe("allSearchStarted",t.getView().onAllSearchStarted,t.getView());sap.ui.getCore().getEventBus().subscribe("allSearchFinished",t.getView().onAllSearchFinished,t.getView());},onExit:function(){var t=this;sap.ui.getCore().getEventBus().unsubscribe("allSearchStarted",t.getView().onAllSearchStarted,t.getView());sap.ui.getCore().getEventBus().unsubscribe("allSearchFinished",t.getView().onAllSearchFinished,t.getView());}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/Search.view',['sap/ushell/renderers/fiori2/search/controls/SearchLayout','sap/ushell/renderers/fiori2/search/controls/SearchResultListContainer','sap/ushell/renderers/fiori2/search/controls/SearchResultList','sap/ushell/renderers/fiori2/search/controls/SearchResultTable','sap/ushell/renderers/fiori2/search/controls/SearchSpreadsheet','sap/ushell/renderers/fiori2/search/controls/SearchNoResultScreen','sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/controls/SearchLabel','sap/ushell/renderers/fiori2/search/controls/SearchLink','sap/ushell/renderers/fiori2/search/controls/SearchResultMap','sap/ushell/renderers/fiori2/search/controls/SearchResultListItem','sap/ushell/renderers/fiori2/search/controls/CustomSearchResultListItem','sap/ushell/renderers/fiori2/search/controls/SearchFacetFilter','sap/ushell/renderers/fiori2/search/controls/DivContainer','sap/ushell/renderers/fiori2/search/controls/SearchTilesContainer','sap/ushell/renderers/fiori2/search/controls/SearchFilterBar','sap/ushell/services/Personalization','sap/m/TablePersoController','sap/ui/vbm/AnalyticMap','sap/ui/vbm/Spot','sap/m/BusyDialog'],function(S,a,b,c,d,f,g,h,j,k,l,C){"use strict";return sap.ui.jsview("sap.ushell.renderers.fiori2.search.container.Search",{createContent:function(o){var t=this;t.totalCountHiddenElement=t.assembleCountHiddenElement();t.centerArea=t.assembleCenterArea();var r=new a({centerAreaHeader:null,centerArea:t.centerArea,totalCountBar:t.assembleCountLabel(),noResultScreen:new f({searchBoxTerm:{parts:[{path:'/queryFilter/searchTerm'}],formatter:function(s){return s;}},visible:{parts:[{path:'/count'},{path:'/isBusy'},{path:'/firstSearchWasExecuted'}],formatter:function(e,i,m){return e===0&&!i&&m;}}}),totalCountHiddenElement:t.totalCountHiddenElement});t.searchLayout=new S({resultListContainer:r,busyIndicator:new sap.m.BusyDialog(),isBusy:'{/isBusy}',showFacets:{parts:[{path:'/count'},{path:'/facetVisibility'},{path:'/uiFilter/rootCondition'}],formatter:function(e,i,m){if(!i){return false;}var n=m&&m.conditions&&m.conditions.length>0;if(e===0&&!n){return false;}return true;}},vertical:false,facets:new sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter()});t.searchLayout.addStyleClass('sapUshellSearchLayout');sap.ui.getCore().byId('ushell-search-result-count-label').setLabelFor(t.searchLayout);t.searchContainer=new sap.ushell.renderers.fiori2.search.controls.DivContainer({content:[t.searchLayout],cssClass:'sapUshellSearchContainer'});t.oFocusHandler=new g.SearchFocusHandler(t);return t.searchContainer;},assembleFilterButton:function(){var t=this;var e=new sap.m.ToggleButton({icon:sap.ui.core.IconPool.getIconURI("filter"),tooltip:{parts:[{path:'/facetVisibility'}],formatter:function(i){return i?sap.ushell.resources.i18n.getText("hideFacetBtn_tooltip"):sap.ushell.resources.i18n.getText("showFacetBtn_tooltip");}},pressed:'{/facetVisibility}',press:function(){if(this.getPressed()){t.getModel().setFacetVisibility(true);}else{t.getModel().setFacetVisibility(false);}},visible:{parts:[{path:'/businessObjSearchEnabled'},{path:'/count'}],formatter:function(i,m){if(m===0){return false;}return!sap.ui.Device.system.phone&&i;}}});e.addStyleClass('searchBarFilterButton');return e;},searchToolbarEntryVisibility:{parts:[{path:'/count'}],formatter:function(e){return e!==0&&!sap.ui.Device.system.phone;}},assembleCountLabel:function(){var e=new sap.m.Label('ushell-search-result-count-label',{visible:{parts:[{path:'/count'}],formatter:function(i){return i!==0;}},text:{parts:[{path:'/count'},{path:'/nlqSuccess'},{path:'/nlqDescription'}],formatter:function(i,n,m){if(n){return m;}if(typeof i!=='number'){return"";}var o=g.formatInteger(i);return sap.ushell.resources.i18n.getText("results")+' ('+o+')';}}});e.addStyleClass('sapUshellSearchTotalCountSelenium');return e;},assembleCountHiddenElement:function(){var t=new sap.ui.core.InvisibleText({visible:{parts:[{path:'/count'}],formatter:function(e){return e!==0;}},text:{parts:[{path:'/count'},{path:'/nlqSuccess'},{path:'/nlqDescription'}],formatter:function(e,n,i){if(n){return i;}if(typeof e!=='number'){return"";}return sap.ushell.resources.i18n.getText("results_count_for_screenreaders",[e]);}}});return t;},assembleSearchToolbar:function(w){var t=this;var e=t.assembleDisplaySwitchTapStrips();var i=new sap.m.Button({icon:"sap-icon://sort",tooltip:"{i18n>sortTable}",type:sap.m.ButtonType.Transparent,visible:{parts:[{path:'/displaySwitchVisibility'},{path:'/count'},{path:'/tableSortableColumns'}],formatter:function(o,p,q){return o&&p!==0&&q.length>1;}},press:function(o){t.tableSortDialog.open();}});e.addEventDelegate({onAfterRendering:function(E){var D=E.srcControl;if(D.getItems().length===2&&t.determineIfMaps(t)){D.addItem(new sap.m.SegmentedButtonItem({icon:"sap-icon://map",tooltip:sap.ushell.resources.i18n.getText("displayMap"),key:"map"}));}else if(D.getItems().length===3&&!t.determineIfMaps(t)){D.removeItem(D.getItems()[2]);if(t.getModel().getProperty('/resultToDisplay')==="searchResultMap"){t.getModel().setProperty('/resultToDisplay',"searchResultList");}}}});e.addStyleClass("sapUshellSearchResultDisplaySwitch");i.addStyleClass("sapUshellSearchTableSortButton");var m=new sap.m.Button("tablePersonalizeButton",{icon:"sap-icon://action-settings",tooltip:"{i18n>personalizeTable}",type:sap.m.ButtonType.Transparent,visible:{parts:[{path:'/resultToDisplay'}],formatter:function(r){return r==="searchResultTable";}},press:function(o){t.oTablePersoController.openDialog();}});m.addStyleClass("sapUshellSearchTablePersonalizeButton");var n=new sap.m.Button("dataExportButton",{icon:"sap-icon://download",tooltip:"{i18n>exportData}",type:sap.m.ButtonType.Transparent,visible:{parts:[{path:'/displaySwitchVisibility'},{path:'/count'}],formatter:function(o,p){return o&&p!==0;}},press:function(){if(t.searchSpreadsheet===undefined){t.searchSpreadsheet=new d("ushell-search-spreadsheet");}t.searchSpreadsheet.onExport();}});if(!w){var s=this.assembleShareButton();return[n,m,i,s,e];}else{return[n,m,i,e];}},assembleShareButton:function(){var t=this;var B=new sap.ushell.ui.footerbar.AddBookmarkButton({beforePressHandler:function(){var o={url:document.URL,title:t.getModel().getDocumentTitle(),icon:sap.ui.core.IconPool.getIconURI("search")};B.setAppData(o);}});B.setWidth('auto');var e=new sap.m.Button();e.setIcon("sap-icon://email");e.setText(sap.ushell.resources.i18n.getText("eMailFld"));e.attachPress(function(){sap.m.URLHelper.triggerEmail(null,t.getModel().getDocumentTitle(),document.URL);});e.setWidth('auto');var A=new sap.m.ActionSheet({placement:'Bottom',buttons:[B,e]});var s=new sap.m.Button({icon:'sap-icon://action',tooltip:sap.ushell.resources.i18n.getText('shareBtn'),press:function(){A.openBy(s);}});return s;},assembleDataSourceTapStrips:function(){var t=this;var e=new sap.m.OverflowToolbar({design:sap.m.ToolbarDesign.Transparent,visible:{parts:[{path:'/facetVisibility'},{path:'/count'},{path:'/businessObjSearchEnabled'}],formatter:function(i,n,o){return!i&&n>0&&o;}}});e.data("sap-ui-fastnavgroup","false",true);e.addStyleClass('searchTabStrips');t.tabBar=e;var m=new sap.ui.core.InvisibleText({text:"Data Sources"}).toStatic();e.addDependent(m);e.addAriaLabelledBy(m);e.bindAggregation('content','/tabStrips/strips',function(I,o){var n=new sap.m.ToggleButton({text:'{labelPlural}',type:{parts:[{path:'/tabStrips/selected'}],formatter:function(s){var i=this.getBindingContext().getObject();if(i===s){return sap.m.ButtonType.Transparent;}else{return sap.m.ButtonType.Transparent;}}},pressed:{parts:[{path:'/tabStrips/selected'}],formatter:function(s){var i=this.getBindingContext().getObject();return i===s;}},press:function(q){if(t.getModel().config.searchScopeWithoutAll){return;}this.setType(sap.m.ButtonType.Transparent);if(this.getBindingContext().getObject()===t.getModel().getProperty('/tabStrips/selected')){this.setPressed(true);return;}var B=t.tabBar.getContent();for(var i=0;i<B.length;i++){if(B[i].getId()!==this.getId()){B[i].setType(sap.m.ButtonType.Transparent);if(B[i].getPressed()===true){B[i].setPressed(false);}}}t.getModel().setDataSource(this.getBindingContext().getObject());}});var p=new sap.ui.core.InvisibleText({text:o.getProperty("labelPlural")+", "+sap.ushell.resources.i18n.getText("dataSource")}).toStatic();n.addAriaLabelledBy(p);n.addDependent(p);return n;});e._setupItemNavigation=function(){if(!this.theItemNavigation){this.theItemNavigation=new sap.ui.core.delegate.ItemNavigation();this.addDelegate(this.theItemNavigation);}this.theItemNavigation.setCycling(false);this.theItemNavigation.setRootDomRef(this.getDomRef());var n=[];var o=this.getContent();for(var i=0;i<o.length;i++){if(!$(o[i].getDomRef()).attr("tabindex")){var p="-1";if(o[i].getPressed&&o[i].getPressed()){p="0";}$(o[i].getDomRef()).attr("tabindex",p);}n.push(o[i].getDomRef());}var q=this.getAggregation("_overflowButton");if(q&&q.getDomRef){var _=q.getDomRef();n.push(_);$(_).attr("tabindex","-1");}this.theItemNavigation.setItemDomRefs(n);};e.addEventDelegate({onAfterRendering:function(E){var t=this;t.getAggregation("_overflowButton").addEventDelegate({onAfterRendering:function(E){t._setupItemNavigation();}},t.getAggregation("_overflowButton"));var i=$(t.getDomRef());i.attr("role","tablist");i.children("button").attr("role","tab");t._setupItemNavigation();}},e);return e;},reorgTabBarSequence:function(){if(!this.tabBar){return;}var e=new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.High});var n=new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow});var B=this.tabBar.getContent();for(var i=0;i<B.length;i++){if(this.getModel().getProperty('/tabStrips/selected')===B[i].getBindingContext().getObject()){B[i].setLayoutData(n);}else{B[i].setLayoutData(e);}}},determineIfMaps:function(o){var I=false;if(o.getModel()){if(o.getModel().config.maps){I=true;}var e=o.getModel().getDataSource();if(typeof e!=='undefined'&&e.attributesMetadata){var m=e.attributesMetadata;for(var i=0;i<m.length;i++){var t=m[i].type;if(t==="GeoJson"){I=true;break;}}}}return I;},assembleDisplaySwitchTapStrips:function(){var t=this;var i=[new sap.m.SegmentedButtonItem({icon:"sap-icon://list",tooltip:sap.ushell.resources.i18n.getText("displayList"),key:"list"}),new sap.m.SegmentedButtonItem({icon:"sap-icon://table-view",tooltip:sap.ushell.resources.i18n.getText("displayTable"),key:"table"})];if(t.determineIfMaps(t)){i.push(new sap.m.SegmentedButtonItem({icon:"sap-icon://map",tooltip:sap.ushell.resources.i18n.getText("displayMap"),key:"map"}));}var s=new sap.m.SegmentedButton('ResultViewType',{selectedKey:{parts:[{path:'/resultToDisplay'}],formatter:function(r){var e="list";if(r==="searchResultTable"){e="table";}else if(r==="searchResultList"){e="list";}else if(r==="searchResultMap"){e="map";}return e;}},items:i,visible:{parts:[{path:'/displaySwitchVisibility'},{path:'/count'}],formatter:function(e,m){return e&&m!==0;}},select:function(e){var m=e.mParameters.key;var n=t.getModel();switch(m){case"list":n.setProperty('/resultToDisplay',"searchResultList");t.showMoreFooter.setVisible(t.isShowMoreFooterVisible());t.searchResultMap.setVisible(false);break;case"table":n.setProperty('/resultToDisplay',"searchResultTable");t.showMoreFooter.setVisible(t.isShowMoreFooterVisible());t.searchResultMap.setVisible(false);break;case"map":n.setProperty('/resultToDisplay',"searchResultMap");t.showMoreFooter.setVisible(t.isShowMoreFooterVisible());break;default:n.setProperty('/resultToDisplay',"searchResultList");t.showMoreFooter.setVisible(t.isShowMoreFooterVisible());}n.enableOrDisableMultiSelection();}.bind(this)});s.addStyleClass("sapUshellSearchDisplaySwitchTapStrips");return s;},isShowMoreFooterVisible:function(){var m=this.getModel();return m.getProperty("/boCount")>m.getProperty("/boResults").length;},assembleCenterArea:function(){var t=this;t.tableSortDialog=t.assembleSearchResultSortDialog();var s=t.assembleSearchResultList();t.searchResultTable=t.assembleSearchResultTable();t.searchResultTable.addDelegate({onBeforeRendering:function(){t.updateTableLayout();}});t.searchResultMap=t.assembleSearchResultMap();t.searchResultMap.setVisible(false);t.appSearchResult=t.assembleAppSearch();t.showMoreFooter=t.assembleShowMoreFooter();return[t.tableSortDialog,s,t.searchResultTable,t.searchResultMap,t.appSearchResult,t.showMoreFooter];},assembleSearchResultSortDialog:function(){var t=this;var e=new sap.m.ViewSettingsDialog({sortDescending:{parts:[{path:"/orderBy"}],formatter:function(o){return jQuery.isEmptyObject(o)||o.sortOrder==="DESC";}},confirm:function(i){var p=[];p=i.getParameters();if(p.sortItem){var o=t.getModel();if(p.sortItem.getKey()==="searchSortableColumnKeyDefault"){o.resetOrderBy();e.setSortDescending(true);}else{o.setOrderBy({orderBy:p.sortItem.getBindingContext().getObject().attributeId,sortOrder:p.sortDescending===true?"DESC":"ASC"});}}},cancel:function(i){var m=t.getModel().getOrderBy().orderBy===undefined?"searchSortableColumnKeyDefault":t.getModel().getOrderBy().orderBy;this.setSelectedSortItem(m);}});e.bindAggregation("sortItems","/tableSortableColumns",function(p,D){return new sap.m.ViewSettingsItem({key:"{key}",text:"{name}",selected:"{selected}"});});return e;},assembleSearchResultTable:function(){var t=this;var r=new c("ushell-search-result-table",{mode:{parts:[{path:'/multiSelectionEnabled'}],formatter:function(m){return m===true?sap.m.ListMode.MultiSelect:sap.m.ListMode.None;}},noDataText:'{i18n>noCloumnsSelected}',visible:{parts:[{path:'/resultToDisplay'},{path:'/count'}],formatter:function(e,i){return e==="searchResultTable"&&i!==0;}},contextualWidth:"Auto",popinLayout:sap.m.PopinLayout.GridLarge,rememberSelections:false});r.bindAggregation("columns","/tableColumns",function(p,D){var e=D.getObject();var i=new sap.m.Column(e.key,{header:new sap.m.Label({text:"{name}",tooltip:"{name}"}),visible:{parts:[{path:'index'}],formatter:function(m){return m<5;}}});return i;});r.bindAggregation("items","/tableResults",function(p,D){return t.assembleTableItems(D);});r.addEventDelegate({onAfterRendering:function(){t.updatePersoServiceAndController();}});return r;},assembleTableItems:function(D){var t=this;var o=D.getObject();if(o.type==='footer'){return new sap.m.CustomListItem({visible:false});}else{return t.assembleTableMainItems(o,D.getPath());}},assembleTableMainItems:function(D,p){var s=p+"/cells";var e=new sap.m.ColumnListItem({selected:"{selected}"});e.bindAggregation("cells",s,function(s,m){if(m.getObject().isTitle){var t="";var n;var o=m.getObject().titleNavigation;if(o){t=o.getHref();n=o.getTarget();}var q=(t&&t.length>0)?true:false;var r=new j({text:"{value}",enabled:q,href:t,press:function(){var o=m.getObject().titleNavigation;if(o){o.performNavigation({trackingOnly:true});}}});r.addStyleClass("sapUshellSearchResultListItem-MightOverflow");if(n){r.setTarget(n);}return r;}else if((m.getObject().isRelatedApps)){var u=m.getObject().navigationObjects;var v=[];var w={};var x=function(z,y){y.performNavigation();};for(var i=0;i<u.length;i++){var y=u[i];w=new sap.m.Button({text:y.getText(),tooltip:y.getText()});w.attachPress(y,x);v.push(w);}return new sap.m.Button({icon:"sap-icon://action",press:function(){var z=new sap.m.ActionSheet({buttons:v});z.openBy(this);}});}else{return new h({text:"{value}"}).addStyleClass("sapUshellSearchResultListItem-MightOverflow");}});return e;},onRegionClick:function(e){},onRegionContextMenu:function(e){},assembleSearchResultMap:function(){var s=new k({visible:{parts:[{path:'/resultToDisplay'},{path:'/count'}],formatter:function(r,e){return r==="searchResultMap"&&e!==0;}}});return s;},assembleShowMoreFooter:function(){var t=this;var e=new sap.m.Button({text:"{i18n>showMore}",type:sap.m.ButtonType.Transparent,press:function(){var o=t.getModel();o.setProperty('/focusIndex',o.getTop());var n=o.getTop()+o.pageSize;o.setTop(n);o.eventLogger.logEvent({type:o.eventLogger.SHOW_MORE});}});e.addStyleClass('sapUshellResultListMoreFooter');var i=new sap.m.FlexBox({visible:{parts:[{path:'/boCount'},{path:'/boResults'}],formatter:function(m,n){return n.length<m;}},justifyContent:sap.m.FlexJustifyContent.Center});i.addStyleClass('sapUshellResultListMoreFooterContainer');i.addItem(e);return i;},assembleSearchResultList:function(){var t=this;t.resultList=new b({mode:sap.m.ListMode.None,width:"auto",showNoData:false,visible:{parts:[{path:'/resultToDisplay'},{path:'/count'}],formatter:function(r,e){return r==="searchResultList"&&e!==0;}}});t.resultList.bindAggregation("items","/results",function(p,o){return t.assembleListItem(o);});return t.resultList;},assembleAppSearch:function(){var t=this;var e=new sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer("AppSearchContainer",{addAccInformation:true,maxRows:99999,totalLength:'{/appCount}',visible:{parts:[{path:'/resultToDisplay'},{path:'/count'}],formatter:function(r,i){return r==="appSearchResult"&&i!==0;}},highlightTerms:'{/uiFilter/searchTerm}',showMore:function(){var m=t.getModel();m.setProperty('/focusIndex',e.getNumberDisplayedTiles()-1);var n=m.getTop()+m.pageSize*e.getTilesPerRow();m.setTop(n);}});e.bindAggregation('tiles','/appResults',function(i,o){if(t.getModel().getResultToDisplay()==="appSearchResult"){return o.getObject().getView();}else{return new sap.m.Text({text:""});}});e.addStyleClass('sapUshellSearchTileResultList');sap.ui.getCore().getEventBus().subscribe('searchLayoutChanged',function(){e.delayedRerender();},this);return e;},assembleTitleItem:function(D){var i=new sap.m.CustomListItem();var t=new sap.m.Label({text:"{title}"});t.addStyleClass('bucketTitle');i.addStyleClass('bucketTitleContainer');i.addContent(new sap.m.HBox({items:[t]}));return i;},assembleAppContainerResultListItem:function(D,p){var t=this;var e=new sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer("AppSearchContainerResultListItem",{maxRows:sap.ui.Device.system.phone?2:1,totalLength:'{/appCount}',highlightTerms:'{/uiFilter/searchTerm}',enableKeyHandler:false,resultList:t.resultList,showMore:function(){var m=t.getModel();m.setDataSource(m.appDataSource);}});e.bindAggregation('tiles','tiles',function(I,o){if(t.getModel().getResultToDisplay()!=="appSearchResult"){return o.getObject().getView();}else{return new sap.m.Text({text:""});}});var i=new sap.m.CustomListItem({content:e});i.addStyleClass('sapUshellSearchResultListItem');i.addStyleClass('sapUshellSearchResultListItemApps');i.addEventDelegate({onAfterRendering:function(E){var m=$(i.getDomRef());m.removeAttr("tabindex");m.removeAttr("role");m.attr("aria-hidden","true");}},i);sap.ui.getCore().getEventBus().subscribe('searchLayoutChanged',function(){e.delayedRerender();},this);return i;},assembleResultListItem:function(D,p){var t=this;var e=this.getModel().config.getDataSourceConfig(D.dataSource);var s={title:"{title}",titleDescription:"{titleDescription}",titleNavigation:"{titleNavigation}",type:"{dataSourceName}",imageUrl:"{imageUrl}",imageFormat:"{imageFormat}",imageNavigation:"{imageNavigation}",geoJson:"{geoJson}",attributes:"{itemattributes}",navigationObjects:"{navigationObjects}",selected:"{selected}",expanded:"{expanded}",positionInList:"{positionInList}",resultSetId:"{resultSetId}",layoutCache:"{layoutCache}"};var i;if(e.searchResultListItemControl){i=new e.searchResultListItemControl(s);}else if(e.searchResultListItemContentControl){s.content=new e.searchResultListItemContentControl();i=new C(s);}else{i=new l(s);}if(i.setTotalCountHiddenElement){i.setTotalCountHiddenElement(t.totalCountHiddenElement);}var m=new sap.m.CustomListItem({content:i,type:sap.m.ListType.Inactive});m.addStyleClass('sapUshellSearchResultListItem');if(i.setParentListItem){i.setParentListItem(m);}return m;},assembleListItem:function(o){var t=this;var D=o.getObject();if(D.type==='title'){return t.assembleTitleItem(D);}else if(D.type==='footer'){return new sap.m.CustomListItem();}else if(D.type==='appcontainer'){return t.assembleAppContainerResultListItem(D,o.getPath());}else{return t.assembleResultListItem(D,o.getPath());}},onAllSearchStarted:function(){},onAllSearchFinished:function(){var t=this;t.reorgTabBarSequence();t.oFocusHandler.setFocus();var v=sap.ui.getCore().byId('viewPortContainer');if(v&&v.switchState){v.switchState('Center');}},updatePersoServiceAndController:function(){var t=this;var m=t.getModel();var e=m.getDataSource().id;var s='search-result-table-state-'+e;if(!t.oTablePersoController){var p=m.getPersonalizationStorageInstance();t.oTablePersoController=new sap.m.TablePersoController({table:sap.ui.getCore().byId("ushell-search-result-table"),persoService:p.getPersonalizer(s)}).activate();t.oTablePersoController.refresh();}if(t.oTablePersoController&&t.oTablePersoController.getPersoService().getKey()!==s){t.oTablePersoController.setPersoService(m.getPersonalizationStorageInstance().getPersonalizer(s));t.oTablePersoController.refresh();}},updateTableLayout:function(){var t=this;if(t.searchResultTable&&t.oTablePersoController){var e=t.getModel().getDataSource().id;var s='search-result-table-state-'+e;t.oTablePersoController.getPersoService(s).getPersData().then(function(p){if(p&&p.aColumns){var m=p.aColumns;var n=this.searchResultTable.getColumns();var v=0;for(var i=0;i<m.length;i++){var o=m[i].id.split('table-searchColumnKey').pop();var q=n[parseInt(o,10)];if(q){q.setDemandPopin(false);if(m[i].visible){v++;q.setDemandPopin(true);q.setPopinDisplay(sap.m.PopinDisplay.Inline);var r=12*v;q.setMinScreenWidth(r+"rem");}}}if(v<=3){this.searchResultTable.setFixedLayout(false);}else{this.searchResultTable.setFixedLayout(true);}}}.bind(this));}},setAppView:function(A){var t=this;t.oAppView=A;if(t.oTilesContainer){t.oTilesContainer.setAppView(A);}},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.container.Search";}});});
sap.ui.predefine('sap/ushell/resources',['sap/ui/model/resource/ResourceModel'],function(R){"use strict";var r={};
r.getTranslationModel=function(l){var t=new R({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties"),bundleLocale:l});return t;};
r.i18nModel=r.getTranslationModel(sap.ui.getCore().getConfiguration().getLanguage());r.i18n=r.i18nModel.getResourceBundle();return r;},true);
sap.ui.predefine('sap/ushell/services/AllMyApps',[],function(){"use strict";
function A(c,p,s){var S=s&&s.config,e=false,d={},P={HOME:0,EXTERNAL:1,CATALOG:2};this.isEnabled=function(){e=(!S||(S.enabled!==false))?true:false;return e;};this.isHomePageAppsEnabled=function(){return(!S||(S.showHomePageApps!==false))?true:false;};this.isCatalogAppsEnabled=function(){return(!S||(S.showCatalogApps!==false))?true:false;};this.isExternalProviderAppsEnabled=function(){return(!S||(S.showExternalProviders!==false))?true:false;};this.registerExternalProvider=function(a,o){if(!a||(a==="")){return;}if(!o.getTitle||!o.getData){return;}d[a]=o;};this.getDataProviders=function(){return d;};this.getProviderTypeEnum=function(){return P;};this.init=function(){};}
A.hasNoAdapter=true;return A;},true);
sap.ui.predefine('sap/ushell/services/AppConfiguration',["sap/ushell/utils","sap/ushell/EventHub"],function(u,E){"use strict";
function A(){var m={},a=true,c=null,I=[],b=[];E.on("AppRendered").do(d.bind(this));function d(C,s,D){a=false;if(b.length){for(var i=0;i<b.length;i++){b[i]();}b.length=0;}}this.addActivity=function(r){var U=sap.ushell.Container.getService("UserRecents");return U.addActivity(r);};this.setApplicationInInitMode=function(){a=true;};this.getApplicationRequestQueue=function(){return b;};this.getCurrentAppliction=function(){return c;};this.getCurrentApplication=this.getCurrentAppliction;this.getMetadata=function(o){if(!o){o=c;}if(o){var h=hasher&&hasher.getHash?hasher.getHash():'',k=this._processKey(h);if(!(m.hasOwnProperty(k))||!m[k].complete){this.addMetadata(o,k);}if(!m[k]){m[k]={complete:false};}if(!m[k].title){m[k].title=o.text||sap.ushell.resources.i18n.getText("default_app_title");}return m[k];}return{};};this._processKey=function(C){var i=C.split('?')[0],p=C.split('?')[1],s,P={},S,f='',g='',o;if(p){s=p.split('&');s.forEach(function(h){var j=h.split('=');P[j[0]]=j[1];});S=Object.keys(P).sort();S.forEach(function(k,h){g=h?'&':'?';f+=g+k+'='+P[k];});return i+f;}o=sap.ushell.Container.getService("URLParsing").parseShellHash(C);i=o?o.semanticObject+"-"+o.action:"";return i;};this.setCurrentApplication=function(o){c=o;if(b.length){b.length=0;}};this.setHeaderHiding=function(){jQuery.sap.log.warning("Application configuration headerHiding property is deprecated and has no effect");};this.addApplicationSettingsButtons=function(B){if(a){b.push(function(){e(B);});}else{e(B);}};function e(B){var i,f=[],r=sap.ushell.Container.getRenderer("fiori2");for(i=0;i<B.length;i++){var C=B[i];f.push(C.getId());C.setIcon(C.getIcon()||sap.ui.core.IconPool.getIconURI('customize'));if(sap.ushell.resources.i18n.getText("userSettings")===C.getProperty("text")){C.setProperty("text",sap.ushell.resources.i18n.getText("userAppSettings"));}C.setType(sap.m.ButtonType.Unstyled);}if(sap.ushell.Container&&r){if(I.length){r.hideActionButton(I,true);}I=f;r.showActionButton(f,true,undefined,true);}}this.setWindowTitle=function(t){window.document.title=t;};this.setIcons=function(i){jQuery.sap.setIcons(i);};this.setApplicationFullWidth=function(v){sap.ushell.components.applicationIntegration.AppLifeCycle.setApplicationFullWidth(v);};this.getSettingsControlAsync=function(){var D=new jQuery.Deferred();sap.ui.require(["sap/ushell/ui/footerbar/SettingsButton"],function(S){D.resolve(new S());});return D.promise();};this.getSettingsControl=function(){var s="sap/ushell/ui/footerbar/SettingsButton",o="sap.ushell.ui.footerbar.SettingsButton",S=sap.ui.require(s);if(S){return new S();}jQuery.sap.require(o);S=jQuery.sap.getObject(o);return new S();};this.getApplicationName=function(o){var M,s=(o&&o.additionalInformation)||null;if(s){M=/^SAPUI5\.Component=(.+)$/i.exec(s);if(M){return M[1];}}return null;};this.getApplicationUrl=function(o){var U=(o&&o.url)||null,s="P_TCODE",i;if(U){if(o.applicationType==="NWBC"&&U.indexOf(s)){return U;}i=U.indexOf("?");if(i>=0){U=U.slice(0,i);}if(U.slice(-1)!=='/'){U+='/';}}return U;};this.getPropertyValueFromConfig=function(C,p,r){var v;if(r&&C.hasOwnProperty(p+"Resource")){v=r.getText(C[p+"Resource"]);}else if(C.hasOwnProperty(p)){v=C[p];}return v;};this.getPropertyValueFromManifest=function(l,p,P){var M=p[P].manifestEntryKey,s=p[P].path,o=l.getManifestEntry(M);return jQuery.sap.getObject(s,undefined,o);};this.addMetadata=function(o,k){try{var C=this.getApplicationName(o),U=this.getApplicationUrl(o),l,f,p={"fullWidth":{"manifestEntryKey":"sap.ui","path":"fullWidth"},"hideLightBackground":{"manifestEntryKey":"sap.ui","path":"hideLightBackground"},"title":{"manifestEntryKey":"sap.app","path":"title"},"icon":{"manifestEntryKey":"sap.ui","path":"icons.icon"},"favIcon":{"manifestEntryKey":"sap.ui","path":"icons.favIcon"},"homeScreenIconPhone":{"manifestEntryKey":"sap.ui","path":"icons.phone"},"homeScreenIconPhone@2":{"manifestEntryKey":"sap.ui","path":"icons.phone@2"},"homeScreenIconTablet":{"manifestEntryKey":"sap.ui","path":"icons.tablet"},"homeScreenIconTablet@2":{"manifestEntryKey":"sap.ui","path":"icons.tablet@2"},"startupImage320x460":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x920":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x1096":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x1096"},"startupImage768x1004":{"manifestEntryKey":"sap.ui","path":"icons.startupImage768x1004"},"startupImage748x1024":{"manifestEntryKey":"sap.ui","path":"icons.startupImage748x1024"},"startupImage1536x2008":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1536x2008"},"startupImage1496x2048":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1496x2048"},"compactContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.compact"},"cozyContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.cozy"}},g,s,i,M,P,h,r,j=o&&o.componentHandle;if(k){if(!(m.hasOwnProperty(k))){m[k]={complete:false};}if(!m[k].complete){if(j){l=j.getMetadata();}else if(C){jQuery.sap.log.warning("No component handle available for '"+C+"'; SAPUI5 component metadata is incomplete",null,"sap.ushell.services.AppConfiguration");return;}if(l){f=l.getConfig();M=(l.getManifest()!==undefined);m[k].complete=true;if(f){h=f.resourceBundle||"";if(h){if(h.slice(0,1)!=='/'){h=U+h;}r=jQuery.sap.resources({url:h,locale:sap.ui.getCore().getConfiguration().getLanguage()});}}for(P in p){if(p.hasOwnProperty(P)){if(M){m[k][P]=this.getPropertyValueFromManifest(l,p,P);}if(f&&m[k][P]===undefined){m[k][P]=this.getPropertyValueFromConfig(f,P,r);}}}m[k].version=l.getVersion();m[k].technicalName=l.getComponentName();}else if(u.isApplicationTypeEmbeddedInIframe(o.applicationType)){var w="/~canvas;window=app/wda/",n=o.url.indexOf(w),W="/bc/gui/sap/its/webgui",q=o.url.indexOf(W);if(n>=0){m[k].technicalName=o.url.substring((n+w.length),o.url.indexOf("/",(n+w.length)));}m[k].complete=true;if(q>=0){var t="etransaction=",v=o.url.indexOf(t,q+W.length),x=o.url.indexOf("&",v),y=(x>=0)?x:o.url.length;m[k].technicalName=o.url.substring(v+t.length,y)+" (TCODE)";}}else{jQuery.sap.log.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration");}}g=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];s=(U&&U[U.length-1]==='/')?U.substring(0,U.length-1):U;i=function(U){if(U.match(/^https?:\/\/.*/)){return false;}return U&&U[0]!=='/';};g.forEach(function(B){var O=m[k][B],F=null;if(O){F=i(O)?s+"/"+O:O;}m[k][B]=F;});}}catch(z){jQuery.sap.log.warning("Application configuration could not be parsed");}};}
return new A();},true);
sap.ui.predefine('sap/ushell/services/AppLifeCycle',["sap/ui/base/EventProvider","sap/ushell/TechnicalParameters"],function(E,T){"use strict";var S="appLoaded";
function A(a,c,p,C){var o,e,v;this.getCurrentApplication=function(){return o;};this.attachAppLoaded=function(d,f,l){e.attachEvent(S,d,f,l);};this.detachAppLoaded=function(f,l){e.detachEvent(S,f,l);};this.prepareCurrentAppObject=function(b,d,h,f){s(b,d,h,f);};e=new E();if(sap.ushell.Container.runningInIframe===undefined||sap.ushell.Container.runningInIframe()===false){r();}function r(){v=sap.ui.getCore().byId("viewPortContainer");if(!v||typeof v.attachAfterNavigate!=="function"){jQuery.sap.log.error("Error during instantiation of AppLifeCycle service","Could not attach to afterNavigate event","sap.ushell.services.AppLifeCycle");return;}v.attachAfterNavigate(function(b){var d,f,g,h,i,H=false;if(b.mParameters.toId.indexOf("applicationShellPage")===0){f=b.mParameters.to.getApp();}else if(b.mParameters.toId.indexOf("application")===0){f=b.mParameters.to;}if(f&&typeof f.getComponentHandle==="function"&&f.getComponentHandle()){h=f.getComponentHandle().getInstance();}else if(f){d=f.getAggregation("child");if(d){h=d.getComponentInstance();}}else{h=sap.ui.getCore().getComponent(b.mParameters.to.getComponent());}if(h){i=h.getId();H=i.indexOf("Shell-home-component")!==-1||i.indexOf("Shell-appfinder-component")!==-1;}g=f&&typeof f.getApplicationType==="function"&&f.getApplicationType();if((!g||g==="URL")&&h){g="UI5";}s(g,h,H,f);});}function s(b,d,h,f){o={applicationType:b,componentInstance:d,homePage:h,getTechnicalParameter:function(P){return T.getParameterValue(P,d,f,b);}};setTimeout(function(){e.fireEvent(S,o);},0);}}
A.hasNoAdapter=true;return A;},true);
sap.ui.predefine('sap/ushell/services/AppState',["sap/ushell/services/_AppState/WindowAdapter","sap/ushell/services/_AppState/SequentializingAdapter","sap/ushell/services/_AppState/AppState","sap/ushell/services/_AppState/Sequentializer","sap/ushell/utils"],function(W,S,A,a,u){"use strict";
function g(c){return u.isDefined(c)&&u.isDefined(c.transient)?!!c.transient:true;}
function b(o,c,p,C){this._oConfig=C&&C.config;this._sSessionKey="";this._oAdapter=new S(o);this._oAdapter=new W(this,this._oAdapter,C);}
b.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey();}return this._sSessionKey;};
b.prototype.getAppState=function(k){var d=new jQuery.Deferred(),t=this,o;this._loadAppState(k).done(function(k,D){o=new A(t,k,false,D);d.resolve(o);}).fail(function(m){o=new A(t,k);d.resolve(o);});return d.promise();};
b.prototype._getGeneratedKey=function(){var s=sap.ushell.Container.getService("Personalization").getGeneratedKey();s=("AS"+s).substring(0,40);return s;};
b.prototype.createEmptyAppState=function(c,t){var k=this._getGeneratedKey(),o,s="",d="",U=u.isDefined(t)?t:g(this._oConfig);if(c){if(!(c instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}if(c.getMetadata&&c.getMetadata()&&typeof c.getMetadata().getName==="function"){s=c.getMetadata().getName()||"";}if(!s&&c.getMetadata&&c.getMetadata().getComponentName){s=c.getMetadata().getComponentName();}if(c.getMetadata&&c.getMetadata()&&typeof c.getMetadata().getManifest==="function"&&typeof c.getMetadata().getManifest()==="object"&&typeof c.getMetadata().getManifest()["sap.app"]==="object"){d=c.getMetadata().getManifest()["sap.app"].ach||"";}}o=new A(this,k,true,undefined,s,d,U);return o;};
b.prototype.createEmptyUnmodifiableAppState=function(c){var k=this._getGeneratedKey(),o;o=new A(this,k,false);return o;};
b.prototype._saveAppState=function(k,d,s,c,t){var e=this._getSessionKey(),U=u.isDefined(t)?t:g(this._oConfig);return this._oAdapter.saveAppState(k,e,d,s,c,U);};
b.prototype._loadAppState=function(k){return this._oAdapter.loadAppState(k);};
b._getSequentializer=function(){return new a();};
b.WindowAdapter=W;b.hasNoAdapter=false;return b;},true);
sap.ui.predefine('sap/ushell/services/AppType',["sap/ushell/resources"],function(r){"use strict";return{OVP:"OVP",SEARCH:"Search",FACTSHEET:"FactSheet",COPILOT:"Co-Pilot",APP:"Application",getDisplayName:function(a){switch(a){case this.OVP:return r.i18n.getText("Apptype.OVP");case this.SEARCH:return r.i18n.getText("Apptype.SEARCH");case this.FACTSHEET:return r.i18n.getText("Apptype.FACTSHEET");case this.COPILOT:return r.i18n.getText("Apptype.COPILOT");default:return r.i18n.getText("Apptype.APP");}}};});
sap.ui.predefine('sap/ushell/services/Bookmark',[],function(){"use strict";
function B(){var l=sap.ushell.Container.getService("LaunchPage");this._isMatchingRemoteCatalog=function(c,r){var C=l.getCatalogData(c);return C.remoteId===r.remoteId&&C.baseUrl.replace(/\/$/,"")===r.baseUrl.replace(/\/$/,"");};this.addBookmark=function(p,g){var P=l.addBookmark(p,g);P.done(function(t){var d={tile:t,group:g};sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileAdded",d);});return P;};this._doAddCatalogTileToGroup=function(d,c,C,g){var e,f=d.reject.bind(d);function i(c,o){var I=l.getCatalogTileId(o);if(I===undefined){return false;}return I.indexOf(c)===0;}function a(G){l.getCatalogTiles(C).fail(f).done(function(b){var g=l.getGroupId(G),t=b.some(function(o){if(i(c,o)){l.addTile(o,G).fail(f).done(function(){d.resolve();sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","catalogTileAdded",g);});return true;}});if(!t){e="No tile '"+c+"' in catalog '"+l.getCatalogId(C)+"'";jQuery.sap.log.error(e,null,"sap.ushell.services.Bookmark");f(e);}});}if(g){l.getGroups().fail(f).done(function(G){var b=G.some(function(o){if(l.getGroupId(o)===g){a(o);return true;}});if(!b){e="Group '"+g+"' is unknown";jQuery.sap.log.error(e,null,"sap.ushell.services.Bookmark");f(e);}});}else{l.getDefaultGroup().fail(f).done(a);}return d.promise();};this.addCatalogTileToGroup=function(c,g,C){var d=new jQuery.Deferred(),e,f=d.reject.bind(d),m,L="X-SAP-UI2-HANA:hana?remoteId=HANA_CATALOG",t=this;function i(o){return l.getCatalogId(o)===L;}m=C?this._isMatchingRemoteCatalog:i;C=C||{id:L};l.onCatalogTileAdded(c);l.getCatalogs().fail(f).done(function(a){var s;a.forEach(function(o){if(m(o,C)){if(!s){s=o;}else{jQuery.sap.log.warning("More than one matching catalog: "+JSON.stringify(C),null,"sap.ushell.services.Bookmark");}}});if(s){t._doAddCatalogTileToGroup(d,c,s,g);}else{e="No matching catalog found: "+JSON.stringify(C);jQuery.sap.log.error(e,null,"sap.ushell.services.Bookmark");d.reject(e);}});return d.promise();};this.countBookmarks=function(u){return l.countBookmarks(u);};this.deleteBookmarks=function(u){var p=l.deleteBookmarks(u);p.done(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileDeleted",u);});return p;};this.updateBookmarks=function(u,p){return l.updateBookmarks(u,p);};}
;B.hasNoAdapter=true;return B;},true);
sap.ui.predefine('sap/ushell/services/ClientSideTargetResolution',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/AppConfiguration","sap/ushell/services/_ClientSideTargetResolution/InboundProvider","sap/ushell/services/_ClientSideTargetResolution/InboundIndex","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Search","sap/ushell/services/_ClientSideTargetResolution/StagedLogger","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/navigationMode","sap/ushell/Config","sap/ushell/ApplicationType","sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/systemAlias","sap/ushell/TechnicalParameters"],function(u,c,a,I,b,V,s,l,f,p,n,C,A,U,S,T){"use strict";
function d(o,e,P,g){this._init.apply(this,arguments);}
d.prototype._init=function(o,e,P,g){this._iLogId=0;sap.ui.lazyRequire("sap/ui/generic/app/navigation/service/SelectionVariant");if(!this._implementsServiceInterface(o)){jQuery.sap.log.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return;}this._oInboundProvider=new I(o.getInbounds.bind(o));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._oServiceConfiguration=g;this._oAdapter=o;};
d.prototype._implementsServiceInterface=function(o){if(typeof o.getInbounds==="function"){return true;}return false;};
d.prototype._getURLParsing=function(){if(!this._oURLParsing){this._oURLParsing=sap.ushell.Container.getService("URLParsing");}return this._oURLParsing;};
d.prototype._hasRenameTo=function(m){return m.inbound&&m.inbound.signature&&m.inbound.signature.parameters&&Object.keys(m.inbound.signature.parameters).some(function(k){return!!(m.inbound.signature.parameters[k].renameTo);});};
d.prototype._removeUnusedComplexParameterValuesFromDefaultList=function(m){m.defaultedParamNames=m.defaultedParamNames.filter(function(N){if(m.intentParamsPlusAllDefaults[N]&&!jQuery.isArray(m.intentParamsPlusAllDefaults[N])){if(!(m.resolutionResult.oNewAppStateMembers&&m.resolutionResult.oNewAppStateMembers[N])){return false;}}return true;});};
d.prototype._mapDefaultParameterNames=function(m){var P=jQuery.sap.getObject("inbound.signature.parameters",undefined,m)||{},M={};m.defaultedParamNames.forEach(function(N){var e=(P[N]&&P[N].renameTo)||N;if(M[e]){jQuery.sap.log.error("renaming of defaultedParamNames creates duplicates"+N+"->"+e);}else{M[e]=true;}});m.mappedDefaultedParamNames=Object.keys(M).sort();};
d.prototype._mixAppStateIntoResolutionResultAndRename=function(m,o){var D=new jQuery.Deferred(),t=this,N,e,g;var r=m.resolutionResult;function h(w){var x;t._removeUnusedComplexParameterValuesFromDefaultList(w);t._mapDefaultParameterNames(w);x=n.compute(jQuery.sap.getObject("inbound.resolutionResult.applicationType",undefined,w),(w.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(w.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(a.getCurrentApplication()||{}).applicationType,C.last("/core/navigation/enableInPlaceForClassicUIs"));u.shallowMergeObject(w.resolutionResult,x);delete w.resolutionResult.oNewAppStateMembers;D.resolve(w);}function i(r){return(r.oNewAppStateMembers&&!jQuery.isEmptyObject(r.oNewAppStateMembers));}function j(L,P){return jQuery.isArray(L)&&L.some(function(w){return(P.indexOf(w)!==-1);});}function k(w,P){var x,y,z;if(w&&w.selectionVariant){x=new sap.ui.generic.app.navigation.service.SelectionVariant(JSON.stringify(w.selectionVariant));z=x.getSelectOptionsPropertyNames()||[];y=x.getParameterNames()||[];if(j(z,P)||j(y,P)){return true;}}return false;}function q(w,R,P,x){var y=new sap.ui.generic.app.navigation.service.SelectionVariant(),z=w.getParameterNames()||[],B=w.getSelectOptionsPropertyNames()||[],E,F;z.forEach(function(G){E=w.getParameter(G);if(x&&!P[G]){R.deleted=true;return;}if(P[G]&&P[G].renameTo){if((y.getParameter(P[G].renameTo)===undefined)&&(y.getSelectOption(P[G].renameTo)===undefined)){y.addParameter(P[G].renameTo,E);R.changed=true;}else{jQuery.sap.log.error("renaming of appstate creates duplicates "+G+"->"+P[G].renameTo);}}else{if((y.getParameter(G)===undefined)&&(y.getSelectOption(G)===undefined)){y.addParameter(G,E);}}});B.forEach(function(G){F=w.getSelectOption(G);if(x&&!P[G]){R.deleted=true;return;}if(P[G]&&P[G].renameTo){if((y.getSelectOption(P[G].renameTo)===undefined)&&(y.getParameter(P[G].renameTo)===undefined)){y.massAddSelectOption(P[G].renameTo,F);R.changed=true;}else{jQuery.sap.log.error("renaming of appstate creates duplicates "+G+"->"+P[G].renameTo);}}else{if((y.getSelectOption(G)===undefined)&&(y.getParameter(G)===undefined)){y.massAddSelectOption(G,F);}}});z.forEach(function(G){w.removeParameter(G);});B.forEach(function(G){w.removeSelectOption(G);});y.getParameterNames().forEach(function(G){w.addParameter(G,y.getParameter(G));});y.getSelectOptionsPropertyNames().forEach(function(G){w.massAddSelectOption(G,y.getSelectOption(G));});return w;}function v(w){if(w===undefined||jQuery.isPlainObject(w)){return false;}return true;}function M(w){var x=w.getData()||{},y,z={};var B=m.inbound.signature;if(x.selectionVariant){y=new sap.ui.generic.app.navigation.service.SelectionVariant(JSON.stringify(x.selectionVariant));}else{y=new sap.ui.generic.app.navigation.service.SelectionVariant();}if(i(r)){Object.keys(r.oNewAppStateMembers).forEach(function(F){y.massAddSelectOption(F,r.oNewAppStateMembers[F].Ranges);});}var E=B.additionalParameters==="ignored";y=q(y,z,B.parameters,E);if(y.getParameterNames().length!==0||y.getSelectOptionsPropertyNames().length!==0||z.deleted){x.selectionVariant=y.toJSONObject();}if(!z.changed&&!z.deleted&&!i(r)){h(m);return;}w.setData(x);w.save().done(function(){m.intentParamsPlusAllDefaults["sap-xapp-state"]=[w.getKey()];m.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[w.getKey()];h(m);});}if(!i(r)&&!t._hasRenameTo(m)){h(m);}else{e=m.intentParamsPlusAllDefaults["sap-xapp-state"]&&m.intentParamsPlusAllDefaults["sap-xapp-state"][0];if(e){o.getAppState(e).done(function(w){var P=c.constructParameterDominatorMap(m.inbound.signature.parameters);g=w.getData();if(v(g)){delete r.oNewAppStateMembers;h(m);}if(r.oNewAppStateMembers){Object.keys(r.oNewAppStateMembers).forEach(function(x){var y=P[x].dominatedBy;if(k(g,y)){delete r.oNewAppStateMembers[x];}});}if(!i(r)&&!t._hasRenameTo(m)){h(m);}else{N=o.createEmptyAppState(undefined,true);if(N){N.setData(w.getData());M(N);}}});}else if(i(r)){M(o.createEmptyAppState(undefined,true));}else{h(m);}}return D.promise();};
d.prototype._extractInboundFilter=function(o){if(!this._oAdapter.hasSegmentedAccess){return undefined;}if(typeof o!=="string"){return undefined;}var F=o.indexOf("#")===0?o:"#"+o;var e=this._getURLParsing().parseShellHash(F);if(!e||!e.semanticObject||!e.action){return undefined;}return[{semanticObject:e.semanticObject,action:e.action}];};
d.prototype.resolveHashFragment=function(h){var t=this,D=new jQuery.Deferred(),B=this._oAdapter.resolveHashFragmentFallback&&this._oAdapter.resolveHashFragmentFallback.bind(this._oAdapter),e=this._extractInboundFilter(h);this._oInboundProvider.getInbounds(e).then(function(i){t._resolveHashFragment(h,B,i).done(function(o){return D.resolve(o);}).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype.resolveTileIntent=function(h){var t=this,D=new jQuery.Deferred(),e=this._extractInboundFilter(h);this._oInboundProvider.getInbounds(e).then(function(i){t._resolveTileIntent(h,undefined,i).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype.resolveTileIntentInContext=function(i,h){var o,D=new jQuery.Deferred();o=b.createIndex(i.concat(V.getInbounds()));this._resolveTileIntent(h,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));return D.promise();};
d.prototype._resolveHashFragment=function(h,B,i){var e=this._getURLParsing(),t=this,D=new jQuery.Deferred(),F=h.indexOf("#")===0?h:"#"+h,g=e.parseShellHash(F);if(g===undefined){jQuery.sap.log.error("Could not parse shell hash '"+h+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject().promise();}g.formFactor=u.getFormFactor();this._getMatchingInbounds(g,i,{bExcludeTileInbounds:true}).fail(function(E){jQuery.sap.log.error("Could not resolve "+h,"_getMatchingInbounds promise rejected with: "+E,"sap.ushell.services.ClientSideTargetResolution");D.reject(E);}).done(function(m){var M;if(m.length===0){jQuery.sap.log.warning("Could not resolve "+h,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");D.reject("Could not resolve navigation target");return;}M=m[0];c.whenDebugEnabled(function(){function j(K,v){return this[K]===undefined?"<undefined>":v;}function r(o,v){return(o==="_original")?undefined:j.call(this,o,v);}var k=JSON.stringify(M,r,"   ");jQuery.sap.log.debug("The following target will now be resolved",k,"sap.ushell.services.ClientSideTargetResolution");});t._resolveSingleMatchingTarget(M,B,F).done(function(o){D.resolve(o);}).fail(D.reject.bind(D));});return D.promise();};
d.prototype._resolveSingleMatchingTarget=function(m,B,F){var t=this,D=new jQuery.Deferred(),o=this._getURLParsing(),i=o.parseShellHash(F),e=[i.semanticObject,i.action].join("-"),g=(m.inbound.resolutionResult||{}).applicationType;var E;if(this._oAdapter.resolveSystemAlias){E=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}var h=A.getEasyAccessMenuResolver(e);if(h){h(i,m,E).then(function(R){var N=n.compute(jQuery.sap.getObject("inbound.resolutionResult.applicationType",undefined,m),(m.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(m.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(a.getCurrentApplication()||{}).applicationType,C.last("/core/navigation/enableInPlaceForClassicUIs"));u.shallowMergeObject(R,N);D.resolve(R);},function(j){D.reject(j);});return D.promise();}var r=c.extractParameters(T.getParameterNames(),m.intentParamsPlusAllDefaults);p.mapParameterNamesAndRemoveObjects(m);this._mixAppStateIntoResolutionResultAndRename(m,sap.ushell.Container.getService("AppState")).done(function(m){var R=function(){return t._constructFallbackResolutionResult.call(t,m,B,F);};if(A[g]){R=A[g].generateResolutionResult;}delete m.intentParamsPlusAllDefaults["sap-tag"];delete m.mappedIntentParamsPlusSimpleDefaults["sap-tag"];m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(P){return P!=="sap-tag";});var j=jQuery.sap.getObject('inbound.resolutionResult.url',undefined,m);R(m,j,E).then(function(k){k.reservedParameters=r;return k;}).then(function(k){jQuery.sap.log.debug("Intent was resolved to the following target",JSON.stringify(m.resolutionResult,null,3),"sap.ushell.services.ClientSideTargetResolution");u.shallowMergeObject(m.resolutionResult,k);D.resolve(m.resolutionResult);},function(M){if(typeof M==="string"&&M.indexOf("fallback:")>=0){t._constructFallbackResolutionResult.call(this,m,B,F).then(function(k){u.shallowMergeObject(m.resolutionResult,k);D.resolve(m.resolutionResult);},D.reject.bind(D));}else{D.reject(M);}});});return D.promise();};
d.prototype._resolveTileIntent=function(h,B,i){var o=this._getURLParsing(),t=this,D=new jQuery.Deferred(),F=h.indexOf("#")===0?h:"#"+h,e=o.parseShellHash(F);if(e===undefined){jQuery.sap.log.error("Could not parse shell hash '"+h+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject("Cannot parse shell hash").promise();}e.formFactor=u.getFormFactor();this._getMatchingInbounds(e,i,{bExcludeTileInbounds:false}).fail(function(E){jQuery.sap.log.error("Could not resolve "+h,"_getMatchingInbounds promise rejected with: "+E,"sap.ushell.services.ClientSideTargetResolution");D.reject(E);}).done(function(m){var M;if(m.length===0){jQuery.sap.log.warning("Could not resolve "+h,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");D.reject("No matching targets found");return;}M=m[0];t._resolveSingleMatchingTileIntent(M,B,F).done(D.resolve.bind(D)).fail(D.reject.bind(D));});return D.promise();};
d.prototype._resolveSingleMatchingTileIntent=function(m,B,F){var D=new jQuery.Deferred(),e=(m.inbound.resolutionResult||{}).applicationType,t=this;var E;if(this._oAdapter.resolveSystemAlias){E=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}p.mapParameterNamesAndRemoveObjects(m);this._mixAppStateIntoResolutionResultAndRename(m,sap.ushell.Container.getService("AppState")).done(function(m){var r=function(){return t._constructFallbackResolutionResult.call(t,m,B,F);};if(A[e]){r=A[e].generateResolutionResult;}delete m.intentParamsPlusAllDefaults["sap-tag"];delete m.mappedIntentParamsPlusSimpleDefaults["sap-tag"];m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(P){return P!=="sap-tag";});var g=jQuery.sap.getObject('inbound.resolutionResult.url',undefined,m);r(m,g,E).then(function(R){u.shallowMergeObject(m.resolutionResult,R);var o=jQuery.extend(true,{},m.inbound.tileResolutionResult);o.startupParameters=m.effectiveParameters;o.navigationMode=m.resolutionResult.navigationMode;if(!o.navigationMode){o.navigationMode=n.getNavigationMode(m.resolutionResult);}D.resolve(o);jQuery.sap.log.debug("Tile Intent was resolved to the following target",JSON.stringify(o,null,3),"sap.ushell.services.ClientSideTargetResolution");},function(M){D.reject(M);});});return D.promise();};
d.prototype._constructFallbackResolutionResult=function(m,B,F){var e={},D;Object.keys(m.intentParamsPlusAllDefaults).forEach(function(P){if(jQuery.isArray(m.intentParamsPlusAllDefaults[P])){e[P]=m.intentParamsPlusAllDefaults[P];}});D=m.mappedDefaultedParamNames||m.defaultedParamNames;if(D.length>0){e["sap-ushell-defaultedParameterNames"]=[JSON.stringify(D)];}if(typeof B!=="function"){jQuery.sap.log.error("Cannot resolve hash fragment",F+" has matched an inbound that cannot be resolved client side"+" and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter","sap.ushell.services.ClientSideTargetResolution");return Promise.reject("Cannot resolve hash fragment: no fallback provided.");}jQuery.sap.log.warning("Cannot resolve hash fragment client side",F+" has matched an inbound that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");return new Promise(function(r,R){B(F,jQuery.extend(true,{},m.inbound),e).done(function(o){var g={};["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(function(P){if(o.hasOwnProperty(P)){g[P]=o[P];}});r(g);}).fail(R.bind(null));});};
d.prototype.getDistinctSemanticObjects=function(){var D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(i){var o={};i.getAllInbounds().forEach(function(e){if(typeof e.semanticObject==="string"&&e.semanticObject!=="*"&&!e.hideIntentLink&&e.semanticObject.length>0){o[e.semanticObject]=true;}});D.resolve(Object.keys(o).sort());},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype.getLinks=function(o){var N,t=this,e,P,i,D=new jQuery.Deferred(),g;if(arguments.length===1&&jQuery.isPlainObject(arguments[0])){N=arguments[0];g=jQuery.extend(true,{},N);["action","semanticObject"].forEach(function(h){if(N.hasOwnProperty(h)){g[h]=N[h];}});if(g.appStateKey){g.params=g.params||{};g.params["sap-xapp-state"]=[g.appStateKey];delete g.appStateKey;}}else if(arguments.length<=3){jQuery.sap.log.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");e=arguments[0];P=arguments[1];i=arguments[2];g={semanticObject:e,params:P,ignoreFormFactor:i};}else{return D.reject("invalid arguments for getLinks").promise();}this._oInboundProvider.getInbounds().then(function(h){t._getLinks(g,h).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype._validateGetSemanticObjectLinksArgs=function(o){var e=o.semanticObject,g=o.action,i=!o.hasOwnProperty("action");if(typeof e!=="undefined"||i){if(typeof e!=="string"){jQuery.sap.log.error("invalid input for _getLinks","the semantic object must be a string, got "+Object.prototype.toString.call(e)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(i&&e.match(/^\s+$/)){jQuery.sap.log.error("invalid input for _getLinks","the semantic object must be a non-empty string, got '"+e+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(!i&&e.length===0){jQuery.sap.log.error("invalid input for _getLinks","the semantic object must not be an empty string, got '"+e+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}}if(typeof g!=="undefined"){if(typeof g!=="string"){jQuery.sap.log.error("invalid input for _getLinks","the action must be a string, got "+Object.prototype.toString.call(g)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}if(g.length===0){jQuery.sap.log.error("invalid input for _getLinks","the action must not be an empty string, got '"+g+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}}return undefined;};
d.prototype._getLinks=function(o,i){var e=o.semanticObject,g=o.action,P=o.params,w=!!o.withAtLeastOneUsedParam,t=!!o.treatTechHintAsFilter,h=o.ignoreFormFactor,j=o.hasOwnProperty("sortResultsBy")?o.sortResultsBy:"intent";if(o.hasOwnProperty("sortResultOnTexts")){jQuery.sap.log.warning("the parameter 'sortResultOnTexts' was experimantal and is no longer supported","getLinks results will be sorted by '"+j+"'","sap.ushell.services.ClientsideTargetResolution");}var k={bExcludeTileInbounds:true};var E=this._validateGetSemanticObjectLinksArgs(o);if(o.tags){k.tags=o.tags;}if(E){return new jQuery.Deferred().reject(E).promise();}if(e==="*"){return jQuery.when([]);}function m(q,P){var B=q.paramsToString(P);return B?"?"+B:"";}var q=this._getURLParsing(),D=new jQuery.Deferred(),F=u.getFormFactor(),r=q.parseParameters(m(q,P)),v={semanticObject:(e===""?undefined:e),action:g,formFactor:(h?undefined:F),params:r};if(t){v.treatTechHintAsFilter=true;}this._getMatchingInbounds(v,i,k).done(function(M){var x={},R=M.map(function(z){var B=e||z.inbound.semanticObject,G="#"+B+"-"+z.inbound.action,N;if(B==="*"){return undefined;}if(z.inbound.action==="*"){return undefined;}if(z.inbound&&z.inbound.hasOwnProperty("hideIntentLink")&&z.inbound.hideIntentLink===true){return undefined;}if(!x.hasOwnProperty(G)){x[G]={matchingInbound:z.inbound,count:1};if(z.inbound.signature.additionalParameters==="ignored"){N=c.filterObjectKeys(r,function(Q){return(Q.indexOf("sap-")===0)||z.inbound.signature.parameters.hasOwnProperty(Q);},false);}else{N=r;}if(w){var J=Object.keys(N).some(function(Q){return Q.indexOf("sap-")!==0;});if(!J){x[G].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined;}}var K=c.inboundSignatureMeetsParameterOptions(z.inbound.signature.parameters,o.paramsOptions||[]);if(!K){x[G].hideReason="inbound signature does not meet the requested parameter filter options";return undefined;}var L={"intent":G+m(q,N),"text":z.inbound.title};if(z.inbound.icon){L.icon=z.inbound.icon;}if(z.inbound.subTitle){L.subTitle=z.inbound.subTitle;}if(z.inbound.shortTitle){L.shortTitle=z.inbound.shortTitle;}var O=jQuery.sap.getObject('inbound.signature.parameters.sap-tag.defaultValue.value',undefined,z);if(O){L.tags=[O];}return L;}else{x[G].count++;}return undefined;}).filter(function(z){return typeof z==="object";});if(j!=="priority"){R.sort(function(G,z){return G[j]<z[j]?-1:1;});}if(R.length===0){jQuery.sap.log.debug("_getLinks returned no results");}else if(jQuery.sap.log.getLevel()>=jQuery.sap.log.Level.DEBUG){if(jQuery.sap.log.getLevel()>=jQuery.sap.log.Level.TRACE){var y=[];var H=[];R.forEach(function(z){var B=z.intent.split("?")[0];if(x[B].hideReason){H.push(["-",B+"("+x[B].hideReason+")\n"," text:",z.text+"\n"," full intent:",z.intent].join(" "));}else{y.push(["-",B,x[B].count>1?"("+(x[B].count-1)+" others matched)\n":"\n","text:",z.text+"\n","full intent:",z.intent].join(" "));}});jQuery.sap.log.debug("_getLinks filtered to the following unique intents:","\n"+y.join("\n"),"sap.ushell.services.ClientSideTargetResolution");jQuery.sap.log.debug("_getLinks would have also returned the following unique intents, but something prevented this:",H.join("\n"),"sap.ushell.services.ClientSideTargetResolution");}else{jQuery.sap.log.debug("_getLinks filtered to unique intents.","Reporting histogram: \n - "+Object.keys(x).join("\n - "),"sap.ushell.services.ClientSideTargetResolution");}}D.resolve(R);}).fail(D.reject.bind(D));return D.promise();};
d.prototype._getMatchingInbounds=function(o,i,e){var t=this,g,h,L,j,k,E,P,D=new jQuery.Deferred();if(e){g=e.tags;E=e.bExcludeTileInbounds;}c.whenDebugEnabled(function(){L=++t._iLogId;});l.begin(function(){function m(M){var r=M.action||(typeof M.action==="undefined"?"<any>":"<invalid-value>");var v=M.semanticObject||(typeof M.semanticObject==="undefined"?"<any>":"<invalid-value>");return t._getURLParsing().constructShellHash({semanticObject:v,action:r,params:M.params});}var q=m(o);return{logId:L,title:"Matching Intent '"+q+"' to inbounds (form factor: "+(o.formFactor||'<any>')+")",moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]};});k=o.semanticObject;h=o.action;j=g?i.getSegmentByTags(g):i.getSegment(k,h);if(E){P=j.filter(function(m){return!m.tileResolutionResult||!m.tileResolutionResult.isCustomTile;});}else{P=j;}s.match(o,P,{},c.isDebugEnabled()).then(function(m){l.log(function(){return{logId:L,stage:1,prefix:"\u2718",lines:Object.keys(m.noMatchReasons||{}).map(function(q){return q+" "+m.noMatchReasons[q];})};});l.log(function(){var q=m.matchResults.map(function(v){return f.formatInbound(v.inbound);});return{logId:L,stage:1,prefix:q.length>0?"\u2705":"\u2718",lines:q.length>0?q:["No inbound was matched"]};});var M=Object.keys(m.missingReferences||[]);if(M.length===0){l.log(function(){return{logId:L,stage:2,prefix:"\u2705",line:"No need to resolve references"};});return new jQuery.Deferred().resolve({matchResults:m.matchResults,referencesToInclude:null}).promise();}l.log(function(){return{logId:L,stage:2,line:"@ Must resolve the following references:",prefix:"\u2022",lines:M};});var r=new jQuery.Deferred();sap.ushell.Container.getService("ReferenceResolver").resolveReferences(M).done(function(R){l.log(function(){return{logId:L,stage:2,line:"\u2705 resolved references with the following values:",prefix:"\u2022",lines:Object.keys(R).map(function(q){return q+": '"+R[q]+"'";})};});r.resolve({matchResults:m.matchResults,referencesToInclude:R});}).fail(function(q){l.log(function(){return{logId:L,stage:2,prefix:"\u274c",line:"Failed to resolve references: "+q};});D.resolve([]);});return r.promise();}).then(function(m){var M,q,r=m.referencesToInclude;if(!r){l.log(function(){return{logId:L,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"\u2705"};});return new jQuery.Deferred().resolve(m).promise();}q=m.matchResults;M=q.map(function(v){return v.inbound;});return s.match(o,M,r,0).then(function(F){l.log(function(){var q=F.matchResults||[];if(q.length>=1){return{logId:L,stage:3,line:"The following inbounds re-matched:",lines:q.map(function(v){return f.formatInbound(v.inbound);}),prefix:"\u2705"};}return{logId:L,stage:3,line:"No inbounds re-matched",prefix:"-"};});return F;});}).then(function(F){var m=F.matchResults||[];if(m.length<=1){l.log(function(){return{logId:L,stage:4,line:"Nothing to sort"};});D.resolve(m);return;}var q=s.sortMatchingResultsDeterministic(F.matchResults||[]);l.log(function(){var r=q.map(function(M){return f.formatInbound(M.inbound||{})+(M.matchesVirtualInbound?" (virtual)":"")+"\n[ Sort Criteria ] "+"\n * 1 * sap-priority: '"+M["sap-priority"]+"'"+"\n * 2 * Sort string: '"+M.priorityString+"\n * 3 * Deterministic blob: '"+s.serializeMatchingResult(M)+"'";});return{logId:L,stage:4,line:"Sorted inbounds as follows:",lines:r,prefix:".",number:true};});D.resolve(q);});return D.promise().then(function(m){l.end(function(){return{logId:L};});return m;});};
d.prototype._isIntentSupportedOne=function(i,o){var D=new jQuery.Deferred(),e=this._getURLParsing().parseShellHash(i);if(i==="#"){D.resolve(true);return D.promise();}if(e===undefined){return D.reject("Could not parse shell hash '"+i+"'").promise();}e.formFactor=u.getFormFactor();this._getMatchingInbounds(e,o,{bExcludeTileInbounds:true}).done(function(t){D.resolve(t.length>0);}).fail(function(){D.reject();});return D.promise();};
d.prototype.isIntentSupported=function(i){var t=this,D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(o){t._isIntentSupported(i,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype._isIntentSupported=function(i,o){var t=this,D=new jQuery.Deferred(),m={};D.resolve();function e(g,h){m[g]={supported:h};}var r=[];i.forEach(function(g){var N=t._isIntentSupportedOne(g,o);N.fail(function(E){r.push(E);});N.done(function(h){e(g,h);});D=jQuery.when(D,N);});var R=new jQuery.Deferred();D.done(function(){R.resolve(m);}).fail(function(){R.reject("One or more input intents contain errors: "+r.join(", "));});return R.promise();};
d.prototype.getUserDefaultParameterNames=function(){var t=this,D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(i){var r;try{r=t._getUserDefaultParameterNames(i.getAllInbounds());D.resolve(r);}catch(e){D.reject("Cannot get user default parameters from inbounds: "+e);}},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype._getUserDefaultParameterNames=function(i){var r={simple:{},extended:{}};i.forEach(function(t){var o=t.signature&&t.signature.parameters||[];Object.keys(o).forEach(function(P){var e=o[P],R,E,g,h;if(e){if(e.filter&&e.filter.format==="reference"){g=e.filter.value;}else if(e.defaultValue&&e.defaultValue.format==="reference"){g=e.defaultValue.value;}if(typeof g==="string"){h=sap.ushell.Container.getService("ReferenceResolver");R=h.extractUserDefaultReferenceName(g);if(typeof R==="string"){r.simple[R]={};}E=h.extractExtendedUserDefaultReferenceName(g);if(typeof E==="string"){r.extended[E]={};}}}});});return r;};
d.prototype.getEasyAccessSystems=function(m){var r={},o,v,D;m=m||"sapMenu";if(this._oHaveEasyAccessSystemsDeferreds[m]){return this._oHaveEasyAccessSystemsDeferreds[m].promise();}this._oHaveEasyAccessSystemsDeferreds[m]=new jQuery.Deferred();D=this._oHaveEasyAccessSystemsDeferreds[m];function i(e,g,v){if(!e){return false;}var h=[e.semanticObject,e.action].join("-");return v[m][h]&&e.deviceTypes&&g!==undefined&&e.deviceTypes[g];}o=A.getEasyAccessMenuDefinitions().reduce(function(o,e){var E=e.easyAccessMenu.intent.split("-")[1];o[E]={appType:e.type,priority:e.easyAccessMenu.systemSelectionPriority};return o;},{});v={userMenu:A.getEasyAccessMenuDefinitions().reduce(function(e,E){var g=E.easyAccessMenu.intent;e[g]=E.easyAccessMenu.showSystemSelectionInUserMenu;return e;},{}),sapMenu:A.getEasyAccessMenuDefinitions().reduce(function(e,E){var g=E.easyAccessMenu.intent;e[g]=E.easyAccessMenu.showSystemSelectionInSapMenu;return e;},{})};this._oInboundProvider.getInbounds().then(function(e){var L={};e.getAllInbounds().filter(function(g){return i(g,u.getFormFactor(),v);}).forEach(function(E){var g;if(jQuery.isPlainObject(E.signature.parameters["sap-system"])&&E.signature.parameters["sap-system"].hasOwnProperty("filter")){g=jQuery.sap.getObject("signature.parameters.sap-system.filter.value",undefined,E);}if(typeof g==="string"){var h=o[E.action].priority;var j=o[E.action].appType;if(!r[g]){L[g]=-1;r[g]={appType:{}};}if(L[g]<h){r[g].text=E.title;L[g]=h;}r[g].appType[j]=true;}else{jQuery.sap.log.warning("Cannot extract sap-system from easy access menu inbound: "+f.formatInbound(E),"This parameter is supposed to be a string. Got '"+g+"' instead.","sap.ushell.services.ClientSideTargetResolution");}});D.resolve(r);},function(){D.reject.apply(D,arguments);});return D.promise();};
d.hasNoAdapter=false;return d;},true);
sap.ui.predefine('sap/ushell/services/CommonDataModel',["sap/ushell/services/_CommonDataModel/PersonalizationProcessor"],function(P){"use strict";var S="sap.ushell.services.CommonDataModel";
function C(a,c,p,s){var t=this,o=new jQuery.Deferred();function f(m){o.reject(m);}this._oAdapter=a;this._oPersonalizationProcessor=new P();this._oSitePromise=o.promise();this._oContentProviderIndex={};a.getSite().done(function(b){t._oOriginalSite=jQuery.extend(true,{},b);a.getPersonalization().done(function(d){t._oPersonalizationProcessor.mixinPersonalization(b,d).done(function(e){t._oPersonalizedSite=t._ensureCompleteSite(e);o.resolve(t._oPersonalizedSite);}).fail(f);}).fail(f);}).fail(f);}
C.prototype.getHomepageGroups=function(){var d=new jQuery.Deferred();this._oSitePromise.then(function(s){var g=(s&&s.site&&s.site.payload&&s.site.payload.groupsOrder)?s.site.payload.groupsOrder:[];d.resolve(g);});return d.promise();};
C.prototype.getGroups=function(){var d=new jQuery.Deferred();this._oSitePromise.then(function(s){var g=[];Object.keys(s.groups).forEach(function(k){g.push(s.groups[k]);});d.resolve(g);});return d.promise();};
C.prototype.getGroup=function(i){var d=new jQuery.Deferred();this._oSitePromise.then(function(s){var g=s.groups[i];if(g){d.resolve(g);}else{d.reject("Group "+i+" not found");}});return d.promise();};
C.prototype.getSite=function(){return this._oSitePromise;};
C.prototype.getGroupFromOriginalSite=function(g){var d=new jQuery.Deferred();if(typeof g==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[g]){d.resolve(jQuery.extend(true,{},this._oOriginalSite.groups[g]));}else{d.reject("Group does not exist in original site.");}return d.promise();};
C.prototype.save=function(){var d=new jQuery.Deferred(),t=this;this._oPersonalizationProcessor.extractPersonalization(this._oPersonalizedSite,this._oOriginalSite).done(function(e){if(e){t._oAdapter._storePersonalizationData(e).done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}});return d.promise();};
function l(){var p=sap.ushell.Container.getService("PluginManager");return p.loadPlugins("ContentProvider");}
C.prototype._getUnreferencedCatalogApplications=function(e){var u={};var a=Object.keys(e.applications).map(function(A){return e.applications[A]["sap.app"].id;}).reduce(function(i,A){i[A]=true;return i;},{});var c=e.catalogs;Object.keys(c).forEach(function(s){var A=c[s].payload.appDescriptors;A.map(function(o){return o.id;}).filter(function(b){return!a[b];}).forEach(function(b){if(!u.hasOwnProperty(s)){u[s]={};}u[s][b]=true;});});return u;};
C.prototype._formatUnreferencedApplications=function(c,u){return"One or more apps from "+c+" content provider are not listed among the applications section of the extended site and will be discarded - "+Object.keys(u).map(function(s){var b=Object.keys(u[s]).map(function(U){return"'"+U+"'";});return"From catalog '"+s+"': "+b.join(", ");}).join("; ");};
C.prototype._removeUnreferencedApplications=function(e,u){Object.keys(e.catalogs).forEach(function(c){var o=e.catalogs[c].payload;var a=o.appDescriptors;o.appDescriptors=a.filter(function(A){return u[c]&&!u[c][A.id];});});};
C.prototype.getExtensionSites=function(){var t=this;var d=new jQuery.Deferred();l().done(function(){var c=Object.keys(t._oContentProviderIndex),T=c.length;if(T===0){d.resolve([]);return;}var g=c.map(function(s,i){var o=t._oContentProviderIndex[s];var G;try{G=o.getSite();if(!G||typeof G.then!=="function"){throw"getSite does not return a Promise";}}catch(e){G=Promise.reject("call to getSite failed: "+e);}return G.then(function(s,E){var a=jQuery.extend(true,{},E);var u=t._getUnreferencedCatalogApplications(E);if(Object.keys(u).length>0){var b=t._formatUnreferencedApplications(s,u);jQuery.sap.log.error(b,null,S);t._removeUnreferencedApplications(a,u);}var L={providerId:s,success:true,site:a};d.notify(L);return L;}.bind(null,s),function(s,E){return{providerId:s,success:false,error:E};}.bind(null,s));});Promise.all(g).then(function(L){d.resolve(L);});});return d.promise();};
C.prototype.registerContentProvider=function(i,s){if(this._oContentProviderIndex[i]){jQuery.sap.log.error("a content provider with ID '"+i+"' is already registered",null,S);return;}this._oContentProviderIndex[i]=s;jQuery.sap.log.debug("ContentProvider '"+i+"' was registered",null,S);};
C.prototype._ensureCompleteSite=function(p){if(p.groups){var g=p.groups;Object.keys(g).forEach(function(k){if(!g[k]){delete g[k];}else{if(!g[k].payload){g[k].payload={};}if(!g[k].payload.links){g[k].payload.links=[];}if(!g[k].payload.tiles){g[k].payload.tiles=[];}if(!g[k].payload.groups){g[k].payload.groups=[];}}});}return p;};
C.prototype.getPlugins=(function(){var d,e,p;e=function(s,o){var a,n=Object.keys(o).length;if(n===0){return{};}if(!o.hasOwnProperty("Shell-plugin")){jQuery.sap.log.error("Cannot find inbound with id 'Shell-plugin' for plugin '"+s+"'","plugin startup configuration cannot be determined correctly",S);return{};}if(n>1){jQuery.sap.log.warning("Multiple inbounds are defined for plugin '"+s+"'","plugin startup configuration will be determined using "+"the signature of 'Shell-plugin' inbound.",S);}a=jQuery.sap.getObject("signature.parameters",undefined,o["Shell-plugin"])||{};return Object.keys(a).reduce(function(r,N){var D=jQuery.sap.getObject(N+".defaultValue.value",undefined,a);if(typeof D==="string"){r[N]=D;}return r;},{});};d=function(o){Object.keys(o).filter(function(s){return typeof o[s]==="object";}).forEach(function(s){o[s]=d(o[s]);});return Object.freeze(o);};return function(o){if(o!==undefined){p=o;}if(p){return jQuery.when(p);}p={};return this.getSite().then(function(s){var a=s.applications||{};Object.keys(a).filter(function(A){return"plugin"===jQuery.sap.getObject("type",undefined,this[A]["sap.flp"]);},a).forEach(function(b){var c,f,g=this[b],h={};if(!jQuery.isPlainObject(g["sap.platform.runtime"])){jQuery.sap.log.error("Cannot find 'sap.platform.runtime' section for plugin '"+b+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else if(!jQuery.isPlainObject(g["sap.platform.runtime"].componentProperties)){jQuery.sap.log.error("Cannot find 'sap.platform.runtime/componentProperties' section for plugin '"+b+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else{h=g["sap.platform.runtime"].componentProperties;}p[b]={url:h.url,component:g["sap.ui5"].componentName};var i=jQuery.sap.getObject("crossNavigation.inbounds",undefined,g["sap.app"])||{};f=e(b,i);c=jQuery.extend(h.config||{},f);if(c){p[b].config=c;}if(h.asyncHints){p[b].asyncHints=h.asyncHints;}},a);return d(p);},function(E){return E;});};})();C.hasNoAdapter=false;return C;},true);
sap.ui.predefine('sap/ushell/services/Configuration',["sap/ushell/Config"],function(C){"use strict";
function a(){this.attachSizeBehaviorUpdate=function(c){var d=C.on("/core/home/sizeBehavior");d.do(c);return{detach:d.off};};}
a.hasNoAdapter=true;return a;},false);
sap.ui.predefine('sap/ushell/services/Container',['sap/ushell/utils','sap/ushell/System','sap/ushell/Ui5ServiceFactory','sap/ui/base/EventProvider','sap/ui/core/service/ServiceFactoryRegistry','sap/ui/core/Control','jquery.sap.global','jquery.sap.mobile'],function(u,S,U,E,a,C,q){"use strict";var b="sap.ushell.services.Container",c="sap.ushell.Container.dirtyState.",o,p,f;
function d(){close();}
function r(){document.location="about:blank";}
function g(P){if(p&&p[P]){return p[P];}return"sap.ushell.adapters."+P;}
function h(s){return(o.services&&o.services[s])||{};}
function j(n,s,P,A){var e=h(n).adapter||{},i=e.module||g(s.getPlatform())+"."+n+"Adapter";function m(){return new(q.sap.getObject(i))(s,P,{config:e.config||{}});}if(A){return new Promise(function(t,v){var M=i.replace(/\./g,'/');sap.ui.require([M],function(){try{t(m());}catch(w){v(w);}});});}else{q.sap.require(i);return m();}}
function k(A){var m=new E(),n=false,R=[],s={},t="sap.ushell.Container."+A.getSystem().getPlatform()+".remoteSystem.",v={},G,w,L=u.getLocalStorage(),x=new u.Map(),y="sap.ushell.Container."+A.getSystem().getPlatform()+".sessionTermination",z=this;this.cancelLogon=function(){if(this.oFrameLogonManager){this.oFrameLogonManager.cancelLogon();}};this.createRenderer=function(e,i){var F,H,I;q.sap.measure.start("FLP:Container.InitLoading","Initial Loading","FLP");u.setPerformanceMark("FLP - renderer created");e=e||o.defaultRenderer;if(!e){throw new Error("Missing renderer name");}I=(o.renderers&&o.renderers[e])||{};H=I.module||(e.indexOf(".")<0?"sap.ushell.renderers."+e+".Renderer":e);if(I.componentData&&I.componentData.config){F={config:I.componentData.config};}function J(){var K=new(q.sap.getObject(H))({componentData:F});var M=K instanceof sap.ui.core.UIComponent?new sap.ui.core.ComponentContainer({component:K,height:"100%",width:"100%"}):K;if(!(M instanceof C)){throw new Error("Unsupported renderer type for name "+e);}M.placeAt=function(N,P){var O=N,Q="canvas",T=document.body;if(N===T.id){O=document.createElement("div");O.setAttribute("id",Q);O.classList.add("sapUShellFullHeight");switch(P){case"first":if(T.firstChild){T.insertBefore(O,T.firstChild);break;}case"only":T.innerHTML='';default:T.appendChild(O);}N=Q;P='';}C.prototype.placeAt.call(this,N,P);};s[e]=K;m.fireEvent("rendererCreated",{renderer:K});return M;}if(i){return new Promise(function(K,M){var N=H.replace(/\./g,'/');sap.ui.require([N],function(){try{K(J());}catch(O){M(O);}});});}else{q.sap.require(H);return J();}};this.getRenderer=function(e){var i,F;e=e||o.defaultRenderer;if(e){i=s[e];}else{F=Object.keys(s);if(F.length===1){i=s[F[0]];}else{q.sap.log.warning("getRenderer() - cannot determine renderer, because no default renderer is configured and multiple instances exist.",undefined,b);}}if(i instanceof sap.ui.core.ComponentContainer){return i.getComponentInstance();}return i;};this.DirtyState={CLEAN:"CLEAN",DIRTY:"DIRTY",MAYBE_DIRTY:"MAYBE_DIRTY",PENDING:"PENDING",INITIAL:"INITIAL"};this.getGlobalDirty=function(){var i,F=new q.Deferred(),H=q.sap.uid(),I,P=0,J=this.DirtyState.CLEAN;function K(){if(P===0||J===z.DirtyState.DIRTY){F.resolve(J);q.sap.log.debug("getGlobalDirty() Resolving: "+J,null,"sap.ushell.Container");}}function M(N){if(N.key.indexOf(c)===0&&N.newValue!==z.DirtyState.INITIAL&&N.newValue!==z.DirtyState.PENDING){q.sap.log.debug("getGlobalDirty() Receiving event key: "+N.key+" value: "+N.newValue,null,"sap.ushell.Container");if(N.newValue===z.DirtyState.DIRTY||N.newValue===z.DirtyState.MAYBE_DIRTY){J=N.newValue;}P-=1;K();}}try{L.setItem(H,"CHECK");L.removeItem(H);}catch(e){q.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.Container");return F.resolve(this.DirtyState.MAYBE_DIRTY).promise();}if(G){throw new Error("getGlobalDirty already called!");}G=F;window.addEventListener('storage',M);F.always(function(){window.removeEventListener('storage',M);G=undefined;});for(i=L.length-1;i>=0;i-=1){I=L.key(i);if(I.indexOf(c)===0){if(L.getItem(I)==='PENDING'){L.removeItem(I);q.sap.log.debug("getGlobalDirty() Cleanup of unresolved 'PENDINGS':"+I,null,"sap.ushell.Container");}else{P+=1;u.localStorageSetItem(I,this.DirtyState.PENDING,true);q.sap.log.debug("getGlobalDirty() Requesting status for: "+I,null,"sap.ushell.Container");}}}K();setTimeout(function(){if(F.state()!=="resolved"){F.resolve('MAYBE_DIRTY');q.sap.log.debug("getGlobalDirty() Timeout reached, - resolved 'MAYBE_DIRTY'",null,"sap.ushell.Container");}},P*2000);return F.promise();};this.getLogonSystem=function(){return A.getSystem();};this.getUser=function(){return A.getUser();};this.getDirtyFlag=function(){for(var i=0;i<R.length;i++){n=n||R[i].call();}return n;};this.setDirtyFlag=function(i){n=i;};this.sessionKeepAlive=function(){if(A.sessionKeepAlive){A.sessionKeepAlive();}};this.registerDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function");}R.push(e);};this.getService=function(e,P,i){var F={},M,K,H,I,J,N;function O(V){var W=new q.Deferred();if(!V){throw new Error("Missing system");}W.resolve(j(e,V,P));sap.ushell.Container.addRemoteSystem(V);return W.promise();}if(!e){throw new Error("Missing service name");}if(e.indexOf(".")>=0){throw new Error("Unsupported service name");}J=h(e);M=J.module||"sap.ushell.services."+e;K=M+"/"+(P||"");N={config:J.config||{}};function Q(V,I){F.createAdapter=O;return new V(I,F,P,N);}function T(H,i){var V;if(H.hasNoAdapter){V=new H(F,P,N);}else{I=j(e,A.getSystem(),P,i);if(i){return I.then(function(W){var V=Q(H,W);x.put(K,V);return V;});}else{V=Q(H,I);}}x.put(K,V);return i?Promise.resolve(V):V;}if(!x.containsKey(K)){if(i){return new Promise(function(V){sap.ui.require([M.replace(/[.]/g,"/")],function(W){V(T(W,true));});});}else{H=sap.ui.requireSync(M.replace(/[.]/g,"/"));return T(H);}}if(i){return Promise.resolve(x.get(K));}else{return x.get(K);}};this.getServiceAsync=function(e,P){return Promise.resolve(this.getService(e,P,true));};function B(){var F,H,i,K;for(i=L.length-1;i>=0;i-=1){K=L.key(i);if(K.indexOf(t)===0){try{F=K.substring(t.length);H=JSON.parse(L.getItem(K));v[F]=new S(H);}catch(e){L.removeItem(K);}}}return v;}function D(){if(typeof OData==='undefined'){return;}function e(i,F,H){q.sap.log.warning(i,null,"sap.ushell.Container");if(H){setTimeout(H.bind(null,i),5000);}return{abort:function(){return;}};}OData.read=function(i,F,H){return e("OData.read('"+(i&&i.Uri?i.requestUri:i)+"') disabled during logout processing",F,H);};OData.request=function(i,F,H){return e("OData.request('"+(i?i.requestUri:"")+"') disabled during logout processing",F,H);};}this.addRemoteSystem=function(e){var i=e.getAlias(),O=v[i];if(O){if(O.toString()===e.toString()){return;}q.sap.log.warning("Replacing "+O+" by "+e,null,"sap.ushell.Container");}else{q.sap.log.debug("Added "+e,null,"sap.ushell.Container");}v[i]=e;u.localStorageSetItem(t+i,e);};this.addRemoteSystemForServiceUrl=function(e){var M,i={baseUrl:";o="};if(!e||e.charAt(0)!=='/'||e.indexOf('//')===0){return;}M=/^[^?]*;o=([^\/;?]*)/.exec(e);if(M&&M.length>=2){i.alias=M[1];}e=e.replace(/;[^\/?]*/g,"");if(/^\/sap\/(bi|hana|hba)\//.test(e)){i.platform="hana";i.alias=i.alias||"hana";}else if(/^\/sap\/opu\//.test(e)){i.platform="abap";}if(i.alias&&i.platform){this.addRemoteSystem(new S(i));}};this.attachLogoutEvent=function(F){m.attachEvent("Logout",F);};this.detachLogoutEvent=function(F){m.detachEvent("Logout",F);};this.attachRendererCreatedEvent=function(F){m.attachEvent("rendererCreated",F);};this.detachRendererCreatedEvent=function(F){m.detachEvent("rendererCreated",F);};this.logout=function(){var i=new q.Deferred();function F(){A.logout(true).always(function(){L.removeItem(y);i.resolve();});}function H(){if(m.fireEvent("Logout",true)){F();}else{setTimeout(F,1000);}}function I(){var v,J=[];if(w){window.removeEventListener('storage',w);}u.localStorageSetItem(y,"pending");z._suppressOData();v=z._getRemoteSystems();Object.keys(v).forEach(function(K){try{J.push(j("Container",v[K]).logout(false));}catch(e){q.sap.log.warning("Could not create adapter for "+K,e.toString(),"sap.ushell.Container");}L.removeItem(t+K);});q.when.apply(q,J).done(H);}if(typeof A.addFurtherRemoteSystems==='function'){A.addFurtherRemoteSystems().always(I);}else{I();}return i.promise();};this.setLogonFrameProvider=function(e){if(this.oFrameLogonManager){this.oFrameLogonManager.logonFrameProvider=e;}};this.setXhrLogonTimeout=function(P,T){if(this.oFrameLogonManager){this.oFrameLogonManager.setTimeout(P,T);}};this.getFLPUrl=function(i){var e=u.getLocationHref(),H=e.indexOf(this.getService("URLParsing").getShellHash(e));if(H===-1||i===true){return e;}return e.substr(0,H-1);};this._closeWindow=d;this._redirectWindow=r;this._getRemoteSystems=B;this._suppressOData=D;sap.ui.getCore().getEventBus().subscribe("sap.ushell.Container","addRemoteSystemForServiceUrl",function(e,i,F){z.addRemoteSystemForServiceUrl(F);});if(typeof A.logoutRedirect==='function'){w=function(e){function i(){z._closeWindow();z._redirectWindow();}if(sap.ushell.Container!==z){return;}if(e.key.indexOf(t)===0&&e.newValue&&e.newValue!==L.getItem(e.key)){u.localStorageSetItem(e.key,e.newValue);}if(e.key===y){if(e.newValue==="pending"){z._suppressOData();if(m.fireEvent("Logout",true)){i();}else{setTimeout(i,1000);}}}};window.addEventListener('storage',w);}this._getFunctionsForUnitTest=function(){return{createAdapter:j};};}
function l(s){s.forEach(function(e){var i=U.createServiceFactory(e);a.register("sap.ushell.ui5service."+e,i);});}
sap.ushell.bootstrap=function(P,A){var e,D=new q.Deferred();q.sap.initMobile();if(sap.ushell.Container!==undefined){e=new Error("Unified shell container is already initialized - cannot initialize twice.\nStacktrace of first initialization:"+f);q.sap.log.error(e,e.stack,b);throw e;}f=(new Error()).stack;o=q.extend({},true,window["sap-ushell-config"]||{});p=A;if(typeof window["sap.ushell.bootstrap.callback"]==="function"){setTimeout(window["sap.ushell.bootstrap.callback"]);}if(o.modulePaths){Object.keys(o.modulePaths).forEach(function(m){q.sap.registerModulePath(m,o.modulePaths[m]);});}l(["Personalization","URLParsing","CrossApplicationNavigation","Configuration"]);var s=new S({alias:"",platform:o.platform||P});j("Container",s,null,true).then(function(i){i.load().then(function(){function _(){var n,t;var v=window["sap-ushell-config"];if(!v||!v.services){return false;}n=v.services.PluginManager;t=n&&n.config;return t&&t.loadPluginsFromSite;}sap.ushell.Container=new k(i);var m=[sap.ushell.Container.getServiceAsync("PluginManager")];if(_()){m.push(sap.ushell.Container.getServiceAsync("CommonDataModel"));}Promise.all(m).then(function(n){var t=n[0],v=n[1];var w=v?v.getPlugins():q.when({});w.then(function(x){var y=q.extend(true,{},o.bootstrapPlugins,x);t.registerPlugins(y);});});D.resolve();});});return D.promise();};
});
sap.ui.predefine('sap/ushell/services/ContentExtension',[],function(){"use strict";var S="sap.ushell.services.ContentExtension";
function C(a,c,p,s){}
C.Type={SITE:"site"};
C.prototype.registerContentProvider=function(p){var c;function l(E){jQuery.sap.log.error("An error occurred when calling #registerContentProvider",E,S)}if(p===null||typeof p!=="object"||Object.keys(p).length===0){l("parameters must be provided and must be a non-empty object");return;}if(typeof p.id!=="string"||p.id.length===0){l("id parameter should be a non-empty string");return;}if(typeof p.provider!=="object"||p.provider===null){l("provider member must be of type 'object' and not null");return;}if(p.type===C.Type.SITE){if(typeof p.provider.getSite!=="function"){l("Provider must expose a getSite member of type 'function', got '"+(typeof p.provider.getSite)+"' instead");return;}try{c=sap.ushell.Container.getService("CommonDataModel");}catch(e){l(e+"");}if(c){c.registerContentProvider(p.id,p.provider);}return;}l("Unknown type parameter. It should be one should be one of ["+Object.keys(C.Type).map(function(t){return"ContentExtension."+t;}).join(", ")+"] but '"+p.type+"' was provided");};
C.hasNoAdapter=true;return C;},true);
sap.ui.predefine('sap/ushell/services/CrossApplicationNavigation',['sap/ushell/services/AppConfiguration','sap/ushell/services/_CrossApplicationNavigation/utils'],function(a,u){"use strict";
function C(c,p,s){var A,S;if(s&&s.config){S=s.config;}function g(t,o){var r,d,e,f,h,i;if(typeof t!=="string"&&!jQuery.isPlainObject(t)&&t!==undefined){jQuery.sap.log.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined;}if(t===undefined){return undefined;}var n;if(o){if(typeof o.getComponentData!=="function"||!jQuery.isPlainObject(o.getComponentData())||!o.getComponentData().startupParameters||!jQuery.isPlainObject(o.getComponentData().startupParameters)){jQuery.sap.log.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.CrossApplicationNavigation");}else{i=o.getComponentData().startupParameters;if(i.hasOwnProperty("sap-system")){e=i["sap-system"][0];}if(i.hasOwnProperty("sap-ushell-next-navmode")){n=i["sap-ushell-next-navmode"][0];}}}else{r=a.getCurrentApplication();if(r&&r["sap-system"]){e=r["sap-system"];}else if(r&&r.url){e=jQuery.sap.getUriParameters(r.url).get("sap-system");}if(r&&r["sap-ushell-next-navmode"]){n=r["sap-ushell-next-navmode"];}else if(r&&r.url){n=jQuery.sap.getUriParameters(r.url).get("sap-ushell-next-navmode");}}if(jQuery.isPlainObject(t)){f=jQuery.extend(true,{},t);if(!e&&!n){return f;}if(f.target&&f.target.shellHash){if(typeof f.target.shellHash==="string"){f.target.shellHash=g(f.target.shellHash,o);}return f;}f.params=f.params||{};if(e&&!Object.prototype.hasOwnProperty.call(f.params,"sap-system")){f.params["sap-system"]=e;}if(n&&!Object.prototype.hasOwnProperty.call(f.params,"sap-ushell-navmode")){f.params["sap-ushell-navmode"]=[n];}return f;}else{h=t;if(!(e||n)){return h;}if(e&&!/[?&]sap-system=/.test(h)){d=(h.indexOf("?")>-1)?"&":"?";h+=d+"sap-system="+e;}if(n&&!/[?&]sap-ushell-navmode=/.test(h)){d=(h.indexOf("?")>-1)?"&":"?";h+=d+"sap-ushell-navmode="+n;}return h;}}function b(t){var d,o,e;if(localStorage&&localStorage["sap-ushell-enc-test"]==="false"){return t;}if(!S||!S["sap-ushell-enc-test"]){if(localStorage&&localStorage["sap-ushell-enc-test"]!=="true"){return t;}}if(typeof t!=="string"&&!jQuery.isPlainObject(t)&&t!==undefined){jQuery.sap.log.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined;}if(t===undefined){return undefined;}if(jQuery.isPlainObject(t)){o=jQuery.extend(true,{},t);if(o.target&&o.target.shellHash){if(typeof o.target.shellHash==="string"){if(o.target.shellHash!=="#"&&o.target.shellHash!==""){o.target.shellHash=b(o.target.shellHash);}}return o;}o.params=o.params||{};o.params["sap-ushell-enc-test"]=["A B%20C"];return o;}else{e=t;if(!/[?&]sap-system=/.test(e)){d=(e.indexOf("?")>-1)?"&":"?";e+=d+"sap-ushell-enc-test="+encodeURIComponent("A B%20C");}return e;}}this._extractInnerAppRoute=function(i){var t=this,P,I;if(typeof i==="string"){P=i.split("&/");I=P.shift();return{intent:I,innerAppRoute:P.length>0?"&/"+P.join("&/"):""};}if(Object.prototype.toString.apply(i)==="[object Object]"){var d=jQuery.sap.getObject("target.shellHash",undefined,i);if(typeof d==="string"){var r=t._extractInnerAppRoute(d);i.target.shellHash=r.intent;return{intent:i,innerAppRoute:r.innerAppRoute};}if(i.hasOwnProperty("appSpecificRoute")){var v=i.appSpecificRoute;delete i.appSpecificRoute;var e=typeof v==="string"&&v.indexOf("&/")!==0&&v.length>0;return{innerAppRoute:e?"&/"+v:v,intent:i};}return{intent:i,innerAppRoute:""};}jQuery.sap.log.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:i};};this._injectInnerAppRoute=function(i,I){var d,t=this;if(!I){return i;}if(typeof i==="string"){return i+I;}if(Object.prototype.toString.apply(i)==="[object Object]"){d=jQuery.sap.getObject("target.shellHash",undefined,i);if(typeof d==="string"){i.target.shellHash=t._injectInnerAppRoute(d,I);return i;}i.appSpecificRoute=I;}return i;};this.hrefForExternal=function(o,d,e){var f,E,i;if(sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){f=jQuery.sap.extend(true,{},o);E=this._extractInnerAppRoute(f);i=E.intent;u.addXAppStateFromParameter(i,"sap-xapp-state-data");f=g(i,d);f=b(f);f=this._injectInnerAppRoute(f,E.innerAppRoute);return sap.ushell.Container.getService("ShellNavigation").hrefForExternal(f,undefined,d,e);}jQuery.sap.log.debug("Shell not available, no Cross App Navigation");if(e){return(new jQuery.Deferred()).resolve("").promise();}return"";};this.expandCompactHash=function(h){return sap.ushell.Container.getService("NavTargetResolution").expandCompactHash(h);};this.backToPreviousApp=function(){if(this.isInitialNavigation()){this.toExternal({target:{shellHash:"#"},writeHistory:false});return;}this.historyBack();};this.historyBack=function(i){var d=-1;if(i&&typeof i==="number"){if(i<=0){jQuery.sap.log.warning("historyBack called with an argument <= 0 and will result in a forward navigation or refresh","expected was an argument > 0","sap.ushell.services.CrossApplicationNavigation#historyBack");}d=i*-1;}window.history.go(d);};this.isInitialNavigation=function(){var o=sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation");if(!o){jQuery.sap.log.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true;}var i=o.isInitialNavigation();if(typeof i==="undefined"){return true;}return i;};this.toExternal=function(o,d){var e,E,i,w=o.writeHistory;if(sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){e=jQuery.sap.extend(true,{},o);E=this._extractInnerAppRoute(e);i=E.intent;u.addXAppStateFromParameter(i,"sap-xapp-state-data");e=g(i,d);e=b(e);delete e.writeHistory;e=this._injectInnerAppRoute(e,E.innerAppRoute);sap.ushell.Container.getService("ShellNavigation").toExternal(e,d,w);return;}jQuery.sap.log.debug("Shell not avialable, no Cross App Navigation");return;};this.hrefForAppSpecificHash=function(d){if(sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){return sap.ushell.Container.getService("ShellNavigation").hrefForAppSpecificHash(d);}jQuery.sap.log.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(d);};this.getPrimaryIntent=function(d,P){var q={};var f;var r=/^#\w+-displayFactSheet(?:$|\?.)/;q.tags=["primaryAction"];q.semanticObject=d;if(P){q.params=P;}return this.getLinks(q).then(function(l){if(l.length===0){delete q.tags;q.action="displayFactSheet";f=function(L,o){var e;if(L.intent===o.intent){return 0;}e=r.test(L.intent)^r.test(o.intent);if(e){return r.test(L.intent)?-1:1;}return L.intent<o.intent?-1:1;};return this.getLinks(q);}f=function(L,o){if(L.intent===o.intent){return 0;}return L.intent<o.intent?-1:1;};return l;}.bind(this)).then(function(l){return l.length===0?null:l.sort(f)[0];});};this.getSemanticObjectLinks=function(d,P,i,o,e,f){var m,h,E;m=g({params:P},o).params;m=b({params:m}).params;h=sap.ushell.Container.getService("NavTargetResolution");var v;if(jQuery.isArray(d)){v=[];d.forEach(function(j){v.push([{semanticObject:j[0],params:j[1],ignoreFormFactor:!!j[2],ui5Component:j[3],appStateKey:j[4],compactIntents:!!(j[5])}]);});}else{v={semanticObject:d,params:m,ignoreFormFactor:i,ui5Component:o,appStateKey:e,compactIntents:!!f};}E=sap.ushell.utils.invokeUnfoldingArrayArguments(h.getLinks.bind(h),[v]);return E;};this.getLinks=function(v){var e;e=sap.ushell.utils.invokeUnfoldingArrayArguments(this._getLinks.bind(this),[v]);return e;};this._getLinks=function(n){var N,P,m,o=sap.ushell.Container.getService("NavTargetResolution");if(typeof n==="undefined"){n={};}N=jQuery.extend(true,{},n);N.compactIntents=!!N.compactIntents;N.action=N.action||undefined;N.paramsOptions=u.extractGetLinksParameterOptions(N.params);P=N.params?u.extractGetLinksParameterDefinition(N.params):N.params;m=g({params:P},N.ui5Component).params;m=b({params:m}).params;if(N.appStateKey){m["sap-xapp-state"]=[N.appStateKey];delete N.appStateKey;}N.params=m;return o.getLinks(N);};this.getDistinctSemanticObjects=function(){var o=sap.ushell.Container.getService("NavTargetResolution");return o.getDistinctSemanticObjects();};this.isIntentSupported=function(i,o){var d=new jQuery.Deferred(),O={},e=i.map(function(I){var f=g(I,o);O[f]=I;return f;});sap.ushell.Container.getService("NavTargetResolution").isIntentSupported(e).done(function(I){var m={};Object.keys(I).forEach(function(k){m[O[k]]=I[k];});d.resolve(m);}).fail(d.reject.bind(d));return d.promise();};this.isNavigationSupported=function(i,o){var d=i.map(function(I){return g(I,o);});return sap.ushell.Container.getService("NavTargetResolution").isNavigationSupported(d);};this.isUrlSupported=function(U){var d=new jQuery.Deferred(),o,h;if(typeof U!=="string"){d.reject();return d.promise();}o=sap.ushell.Container.getService("URLParsing");if(o.isIntentUrl(U)){h=o.getHash(U);this.isIntentSupported(["#"+h]).done(function(r){if(r["#"+h]&&r["#"+h].supported){d.resolve();}else{d.reject();}}).fail(function(){d.reject();});}else{d.resolve();}return d.promise();};this.createComponentInstance=function(i,o,O){var d,U,e,f;if(!o){o={};}else{f=Object.keys(o).length;if(f>1||(f===1&&!o.componentData)){throw"`oConfig` argument should either be an empty object or contain only the `componentData` property.";}}if(o.componentData){delete o.componentData.startupParameters;delete o.componentData.config;delete o.componentData["sap-xapp-state"];}d=sap.ushell.Container;U=d.getService("URLParsing");e=U.constructShellHash(U.parseShellHash(i));if(!e){return new jQuery.Deferred(function(D){D.reject("Navigation intent invalid!");}).promise();}return d.getService("NavTargetResolution").resolveHashFragment("#"+e).then(function(r){if(r.applicationType!==sap.ushell.components.container.ApplicationType.URL&&!(/^SAPUI5\.Component=/.test(r.additionalInformation))){return new jQuery.Deferred(function(D){D.reject("The resolved target mapping is not of type UI5 component.");}).promise();}r=jQuery.extend(true,{},r,o);if(!r.ui5ComponentName&&r.additionalInformation){r.ui5ComponentName=r.additionalInformation.replace(/^SAPUI5\.Component=/,"");}return new jQuery.Deferred(function(D){var h=d.getService("Ui5ComponentLoader");if(O){O.runAsOwner(function(){j(r);});}else{j(r);}function j(k){k.loadDefaultDependencies=false;h.createComponent(k).then(function(l){D.resolve(l.componentHandle.getInstance());},function(E){E=E||"";jQuery.sap.log.error("Cannot create UI5 component: "+E,E.stack,"sap.ushell.services.CrossApplicationNavigation");D.reject(E);});}}).promise();});};this.createEmptyAppState=function(o,t){if(!A){A=sap.ushell.Container.getService("AppState");}if(!(o instanceof sap.ui.core.UIComponent)){throw new Error("oAppComponent passed must be a UI5 Component");}return A.createEmptyAppState(o,t);};this.getStartupAppState=function(o){this._checkComponent(o);var d=o.getComponentData()&&o.getComponentData()["sap-xapp-state"]&&o.getComponentData()["sap-xapp-state"][0];return this.getAppState(o,d);};this._checkComponent=function(o){if(!(o instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}};this.getAppState=function(o,d){var e,D=new jQuery.Deferred();this._checkComponent(o);if(!A){A=sap.ushell.Container.getService("AppState");}if(typeof d!=="string"){if(d!==undefined){jQuery.sap.log.error("Illegal Argument sAppStateKey ");}setTimeout(function(){e=A.createEmptyUnmodifiableAppState(o);D.resolve(e);},0);return D.promise();}return A.getAppState(d);};this.getAppStateData=function(d){return sap.ushell.utils.invokeUnfoldingArrayArguments(this._getAppStateData.bind(this),[d]);};this._getAppStateData=function(d){var D=new jQuery.Deferred();if(!A){A=sap.ushell.Container.getService("AppState");}if(typeof d!=="string"){if(d!==undefined){jQuery.sap.log.error("Illegal Argument sAppStateKey ");}setTimeout(function(){D.resolve(undefined);},0);}else{A.getAppState(d).done(function(o){D.resolve(o.getData());}).fail(D.resolve.bind(D,undefined));}return D.promise();};this.saveMultipleAppStates=function(d){var r=[],D=new jQuery.Deferred();d.forEach(function(o){r.push(o.save());});jQuery.when.apply(this,r).done(function(){D.resolve(r);}).fail(function(){D.reject("save failed");});return D.promise();};}
C.hasNoAdapter=true;return C;},true);
sap.ui.predefine('sap/ushell/services/EndUserFeedback',["sap/ushell/Config","sap/ui/thirdparty/URI"],function(C,U){"use strict";
function g(p,o){return jQuery.sap.getObject(p,undefined,o)||"";}
function E(a,c,p,s){this.sendFeedback=function(e){var u,n,A,b,o,f,d,h,i;u=g("clientContext.navigationData.applicationInformation.url",e);n=g("clientContext.navigationData.navigationHash",e);A=g("clientContext.navigationData.applicationInformation.additionalInformation",e);b=g("clientContext.navigationData.applicationInformation.applicationType",e);f=g("clientContext.navigationData.formFactor",e);d=g("clientContext.userDetails.userId",e);h=g("clientContext.userDetails.eMail",e);i=e.feedbackText||"";o={feedbackText:i.slice(0,2000),ratings:e.ratings||{},additionalInformation:A,applicationType:b,url:u?this.getPathOfURL(u):"",navigationIntent:n.replace(/\?.*$/,''),formFactor:f,isAnonymous:e.isAnonymous||false,userId:e.isAnonymous?"":d,eMail:e.isAnonymous?"":h};return a.sendFeedback(o);};this.getLegalText=function(){return a.getLegalText();};this.isEnabled=function(){var d=new jQuery.Deferred(),i=C.last("/core/extension/EndUserFeedback");if(!i){setTimeout(function(){d.reject();},0);return d.promise();}a.isEnabled().done(function(l){d.resolve();}).fail(function(e){d.reject();});return d.promise();};this.getPathOfURL=function(u){var o=new U(u);return o.pathname();};}
;E.hasNoAdapter=false;return E;},true);
sap.ui.predefine('sap/ushell/services/LaunchPage',[],function(){"use strict";
function L(a,c){var t=this,T=[];this.getGroups=function(){var p=a.getGroups();p.fail(function(){jQuery.sap.log.error("getGroups failed");});return p;};this.getGroupsForBookmarks=function(){var d=jQuery.Deferred();Promise.all([this.getGroups(),this.getDefaultGroup()]).then(function(r){var g=r[0],D=r[1];if(g.length>0){g=g.filter(function(b){return(!t.isGroupLocked(b)&&t.isGroupVisible(b));}).map(function(b){return{title:(b===D&&sap.ushell.resources.i18n.getText("my_group"))||t.getGroupTitle(b),object:b};});}d.resolve(g);}).catch(function(e){jQuery.sap.log.error("getGroupsForBookmarks failed: "+e.message);});return d.promise();};this.getDefaultGroup=function(){var p=a.getDefaultGroup();p.fail(function(){jQuery.sap.log.error("getDefaultGroup failed");});return p;};this.getGroupTitle=function(g){return a.getGroupTitle(g);};this.getGroupId=function(g){return a.getGroupId(g);};this.getGroupTiles=function(g){return a.getGroupTiles(g);};this.getLinkTiles=function(g){return a.getLinkTiles(g);};this.addGroupAt=function(s,i){var p,b=i;if(a.addGroupAt){p=a.addGroupAt(s,i);p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");});}else{var d=new jQuery.Deferred();p=a.addGroup(s);p.done(function(n,g){var m=this.moveGroup(n,b),e=n;m.done(function(){d.resolve(e);});m.fail(function(){d.reject();});}.bind(this));p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");d.reject();});return d.promise();}return p;};this.addGroup=function(s){var p=a.addGroup(s);p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");});return p;};this.removeGroup=function(g,i){var p=a.removeGroup(g,i);p.fail(function(){jQuery.sap.log.error("Fail to removeGroup "+t.getGroupTitle(g));});return p;};this.resetGroup=function(g,i){var p=a.resetGroup(g,i);p.fail(function(){jQuery.sap.log.error("Fail to resetGroup "+t.getGroupTitle(g));});return p;};this.isGroupRemovable=function(g){return a.isGroupRemovable(g);};this.isGroupLocked=function(g){if(typeof a.isGroupLocked==="function"){return a.isGroupLocked(g);}return false;};this.moveGroup=function(g,n){var p=a.moveGroup(g,n);p.fail(function(){jQuery.sap.log.error("Fail to moveGroup "+t.getGroupTitle(g));});return p;};this.setGroupTitle=function(g,s){var p=a.setGroupTitle(g,s);p.fail(function(){jQuery.sap.log.error("Fail to set Group title: "+t.getGroupTitle(g));});return p;};this.hideGroups=function(h){var d=jQuery.Deferred();if(typeof a.hideGroups!=="function"){d.reject('hideGroups() is not implemented in the Adapter.');}else{a.hideGroups(h).done(function(){d.resolve();}).fail(function(m){jQuery.sap.log.error("Fail to store groups visibility."+m);d.reject();});}return d.promise();};this.isGroupVisible=function(g){if(typeof a.isGroupVisible==="function"){return a.isGroupVisible(g);}return true;};this.addTile=function(C,g){var p=a.addTile(C,g);p.fail(function(){jQuery.sap.log.error("Fail to add Tile: "+t.getCatalogTileId(C));});return p;};this.removeTile=function(g,o,i){var p=a.removeTile(g,o,i);p.fail(function(){jQuery.sap.log.error("Fail to remove Tile: "+t.getTileId(o));});return p;};this.moveTile=function(o,s,i,S,b,n){var p=a.moveTile(o,s,i,S,b,n);p.fail(function(){jQuery.sap.log.error("Fail to move Tile: "+t.getTileId(o));});return p;};this.isLinkPersonalizationSupported=function(o){if(typeof a.isLinkPersonalizationSupported==="function"){return a.isLinkPersonalizationSupported(o);}return false;};this.getTileId=function(o){return a.getTileId(o);};this.getTileTitle=function(o){return a.getTileTitle(o);};this.getTileType=function(o){if(a.getTileType){return a.getTileType(o);}return'tile';};this.getTileView=function(o){var d=a.getTileView(o);if(!jQuery.isFunction(d.promise)){d=jQuery.Deferred().resolve(d).promise();}return d;};this.getAppBoxPressHandler=function(o){if(a.getAppBoxPressHandler){return a.getAppBoxPressHandler(o);}return undefined;};this.getTileSize=function(o){return a.getTileSize(o);};this.getTileTarget=function(o){return a.getTileTarget(o);};this.getTileDebugInfo=function(o){if(typeof a.getTileDebugInfo==="function"){return a.getTileDebugInfo(o);}return undefined;};this.isTileIntentSupported=function(o){if(typeof a.isTileIntentSupported==="function"){return a.isTileIntentSupported(o);}return true;};this.refreshTile=function(o){a.refreshTile(o);};this.setTileVisible=function(o,n){return a.setTileVisible(o,n);};this.registerTileActionsProvider=function(p){if(typeof p!=='function'){throw new Error("Tile actions Provider is not a function");}T.push(p);};this.getTileActions=function(o){var b=[];var A;if(typeof a.getTileActions==='function'){A=a.getTileActions(o);if(A&&A.length&&A.length>0){b.push.apply(b,A);}}for(var i=0;i<T.length;i++){A=T[i](o);if(A&&A.length&&A.length>0){b.push.apply(b,A);}}return b;};this.getCatalogs=function(){return a.getCatalogs();};this.isCatalogsValid=function(){return a.isCatalogsValid();};this.getCatalogData=function(C){if(typeof a.getCatalogData!=="function"){jQuery.sap.log.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(C)};}return a.getCatalogData(C);};this.getCatalogError=function(C){return a.getCatalogError(C);};this.getCatalogId=function(C){return a.getCatalogId(C);};this.getCatalogTitle=function(C){return a.getCatalogTitle(C);};this.getCatalogTiles=function(C){var p=a.getCatalogTiles(C);p.fail(function(){jQuery.sap.log.error("Fail to get Tiles of Catalog: "+t.getCatalogTitle(C));});return p;};this.getCatalogTileId=function(o){return a.getCatalogTileId(o);};this.getCatalogTileTitle=function(C){return a.getCatalogTileTitle(C);};this.getCatalogTileSize=function(C){return a.getCatalogTileSize(C);};this.getCatalogTileViewControl=function(C){if(typeof a.getCatalogTileViewControl==="function"){return a.getCatalogTileViewControl(C);}else{var d=new jQuery.Deferred(),r=this.getCatalogTileView(C);d.resolve(r);return d.promise();}};this.getCatalogTileView=function(C){return a.getCatalogTileView(C);};this.getCatalogTileTargetURL=function(C){return a.getCatalogTileTargetURL(C);};this.getCatalogTileTags=function(C){if(typeof a.getCatalogTileTags==="function"){return a.getCatalogTileTags(C);}return[];};this.getCatalogTileKeywords=function(C){return a.getCatalogTileKeywords(C);};this.getCatalogTilePreviewTitle=function(C){return a.getCatalogTilePreviewTitle(C);};this.getCatalogTilePreviewSubtitle=function(C){if(a.getCatalogTilePreviewSubtitle){return a.getCatalogTilePreviewSubtitle(C);}};this.getCatalogTilePreviewIcon=function(C){return a.getCatalogTilePreviewIcon(C);};this.addBookmark=function(p,g){var P,d,m;if(!p.title){jQuery.sap.log.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration");}if(!p.url){jQuery.sap.log.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration");}if(g&&this.isGroupLocked(g)){d=new jQuery.Deferred();P=d.promise();m='Tile cannot be added, target group ('+this.getGroupTitle(g)+')is locked!';d.reject(m);jQuery.sap.log.error(m);}else{P=a.addBookmark(p,g);P.fail(function(){jQuery.sap.log.error("Fail to add bookmark for URL: "+p.url+" and Title: "+p.title);});}return P;};this.countBookmarks=function(u){if(!u||typeof u!=="string"){jQuery.sap.log.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL");}var p=a.countBookmarks(u);p.fail(function(){jQuery.sap.log.error("Fail to count bookmarks");});return p;};this.deleteBookmarks=function(u){if(!u||typeof u!=="string"){throw new Error("Missing URL");}var p=a.deleteBookmarks(u);p.fail(function(){jQuery.sap.log.error("Fail to delete bookmark for: "+u);});return p;};this.updateBookmarks=function(u,p){if(!u||typeof u!=="string"){jQuery.sap.log.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL");}if(!p||typeof p!=="object"){jQuery.sap.log.error("Fail to update bookmark. No valid parameters, URL is: "+u);throw new Error("Missing parameters");}var P=a.updateBookmarks(u,p);P.fail(function(){jQuery.sap.log.error("Fail to update bookmark for: "+u);});return P;};this.onCatalogTileAdded=function(s){return a.onCatalogTileAdded(s);};}
;L.hasNoAdapter=false;return L;},true);
sap.ui.predefine('sap/ushell/services/Message',["sap/m/MessageBox","sap/ushell/Config","sap/ushell/resources","sap/m/Dialog","sap/m/Text","sap/m/Link","sap/m/Button","sap/m/VBox","sap/m/FormattedText"],function(M,C,r,D,T,L,B,V,F){"use strict";
function a(){var s;this.init=function(S){s=S;return this;};this.show=function(t,m,p){if(!m){jQuery.sap.log.error("Message must not be empty.");return;}if(s&&typeof s==="function"){s(t,m,p||{});}else{this.buildMessage(t,m,p||{});}};this.buildMessage=function(t,m,p){var o={title:p.title,actions:p.actions,details:p.details,onClose:p.callback},b;switch(t){case a.Type.ERROR:var d=this.createErrorDialog(m,o);d.open();return;case a.Type.CONFIRM:if(!p.actions){b="confirm";}else{o.icon=M.Icon.QUESTION;b="show";}break;case a.Type.INFO:b="info";this.buildAndSendMessageToast(m,p.duration||3000);return;default:o={duration:p.duration||3000};b="show";break;}this.sendMessageBox(m,b,o);};this.createErrorDialog=function(m,c){function b(t){var q=document.createElement("textarea");try{q.contentEditable=true;q.readonly=false;q.innerText=t;document.documentElement.appendChild(q);if(navigator.userAgent.match(/ipad|iphone/i)){var R=document.createRange();R.selectNodeContents(q);window.getSelection().removeAllRanges();window.getSelection().addRange(R);q.setSelectionRange(0,999999);}else{jQuery(q).select();}document.execCommand("copy");sap.m.MessageToast.show(r.i18n.getText("CopyWasSuccessful"));}catch(E){sap.m.MessageToast.show(r.i18n.getText("CopyWasNotSuccessful"));}finally{jQuery(q).remove();}}function g(q){var t=new B({text:r.i18n.getText(q),press:function(){var u=c.details;if(typeof c.details==="object"){u=JSON.stringify(c.details,null,'\t');}var w=[];w.push("Title: "+(l||"-"));w.push("Message: "+(m||"-"));w.push("Details: "+(u||"-"));b(w.join("\n"));}});t.setTooltip(r.i18n.getText("CopyToClipboardBtn_tooltip"));return t;}function d(q){var t=new B({text:r.i18n.getText(q),press:function(){sap.ui.require(['sap/ushell/ui/footerbar/ContactSupportButton'],function(u){var w=new u();if(w){w.showContactSupportDialog();w.destroy();}});o.destroy();}});t.setTooltip(r.i18n.getText("contactSupportBtn_tooltip"));return t;}function e(q){switch(q){case"contactSupportBtn":return d(q);case"CopyToClipboardBtn":return g(q);default:return new B({text:r.i18n.getText(q),press:function(){o.destroy();}});}}function f(H){var q=[],p=[];if(H){q.push("contactSupportBtn");}else{q.push("okDialogBtn");}q.push("CopyToClipboardBtn");q.push("cancelDialogBtn");q.forEach(function(t){p.push(e(t));});return p;}function h(o,p){p.forEach(function(q){o.addButton(q);});}function i(v){var t=new T({text:m});if(c.details){t.addStyleClass("sapUiSmallMarginBottom");}v.addItem(t);}function j(v){var q=c.details;if(typeof c.details==="object"){q=c.details.info;}var t=new L({text:r.i18n.getText("ViewDetails"),press:function(){var u=v.indexOfItem(t);v.removeItem(u);v.insertItem(new F({htmlText:q}),u);}});v.addItem(t);}function k(){var v=new V({renderType:sap.m.FlexRendertype.Bare});i(v);if(c.details){j(v);}return v;}var l=c.title||r.i18n.getText("error");var o=new D({state:sap.ui.core.ValueState.Error,title:l,type:sap.m.DialogType.Message,contentWidth:"30rem"});var n=C.last("/core/extension/SupportTicket"),H=sap.ushell.Container&&n&&m!==r.i18n.getText("supportTicketCreationFailed");var p=f(H);h(o,p);var v=k();o.addContent(v);return o;};this.buildAndSendMessageToast=function(m,d){sap.ui.require(["sap/m/MessageToast"],function(b){b.show(m,{duration:d});});};this.sendMessageBox=function(m,t,c){if(M.hasOwnProperty(t)&&typeof M[t]==="function"){M[t](m,c);}else{jQuery.sap.log.error("Unknown Message type: "+t);}};this.info=function(m,d){this.show(a.Type.INFO,m,{duration:d||3000});};this.error=function(m,t){m=(t!==undefined)?t+" , "+m:m;jQuery.sap.log.error(m);this.show(a.Type.ERROR,m,{title:t});};this.confirm=function(m,c,t,A){this.show(a.Type.CONFIRM,m,{title:t,callback:c,actions:A});};}
a.Type={INFO:0,ERROR:1,CONFIRM:2};a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/NavTargetResolution',["sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/navigationMode","sap/ui/thirdparty/URI"],function(b,u,n,U){"use strict";
function N(A,c,p,s){var S=s&&s.config,I=function(){return!!(S&&S.enableClientSideTargetResolution);},r=function(h){var o=I()?this._resolveHashFragmentClientSide(h):A.resolveHashFragment(h);return o;},l,R=[{name:"DefaultAdapter",isApplicable:function(){return true;},resolveHashFragment:r.bind(this)}],C;this._isClientSideTargetResolutionEnabled=I;this._nextResolveHashFragment=function(a,h){var o,f;o=a.pop();if(o.isApplicable(h)){jQuery.sap.log.info("NavTargetResolution: custom resolver "+o.name+" resolves "+h);f=this._nextResolveHashFragment.bind(this,a);return o.resolveHashFragment(h,f);}return this._nextResolveHashFragment(a,h);};this._resolveHashFragmentClientSide=function(h){var H=this._validateHashFragment(h),f;if(!H.success){return new jQuery.Deferred().reject(h+" is not a valid hash fragment").promise();}f=H.hashFragmentWithoutHash;return this._resolveHashFragmentClientSideAndFixApplicationType(f);};this._resolveHashFragmentClientSideAndFixApplicationType=function(f){var d=new jQuery.Deferred();sap.ushell.Container.getService("ClientSideTargetResolution").resolveHashFragment(f).done(function(o){if(o&&o.applicationType==="SAPUI5"){o.applicationType="URL";}d.resolve(o);}).fail(function(){d.reject.apply(d,arguments);});return d.promise();};this._validateHashFragment=function(h){var H="",v={success:false};if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected in _validateHashFragment","sap.ushell.services.NavTargetResolution");}H=h.substring(1);if(H){v.success=true;}v.hashFragmentWithoutHash=H;return v;};this.expandCompactHash=function(h){var o=sap.ushell.Container.getService("URLParsing"),P,d=new jQuery.Deferred();P=o.parseShellHash(h);if(P&&P.params&&P.params["sap-intent-param"]){sap.ushell.Container.getService("AppState").getAppState(P.params["sap-intent-param"][0]).done(function(a){var v=a.getData("sap-intent-param"),H=h;if(v){H=sap.ushell.Container.getService("URLShortening").expandParamGivenRetrievalFunction(h,"sap-intent-param",function(){return v;});}d.resolve(H);}).fail(function(){d.resolve(h);});}else{d.resolve(h);}return d.promise();};var w=["NWBC","WDA","TR"];this._adjustResolutionResultForUi5Components=function(o){var m,a;if(typeof o!=="object"){return;}delete o["sap.platform.runtime"];if(o&&o.applicationType&&o.applicationType==="SAPUI5"){o.applicationType="URL";}if(o.applicationType==="URL"){m=/^SAPUI5\.Component=(.*)/.exec(o.additionalInformation);a=m&&m[1];if(a){o.ui5ComponentName=a;}}};this._getSapSystem=function(h,o){var a;if(o&&o["sap-system"]){return o["sap-system"];}if(o&&o.url){a=jQuery.sap.getUriParameters(o.url).get("sap-system");if(a){return a;}}if(w.indexOf(o.applicationType)>=0&&h&&h.substring(1)){a=jQuery.sap.getUriParameters(h.substring(1)).get("sap-system");if(a){return a;}}return undefined;};this.resolveHashFragment=function(h){var d=new jQuery.Deferred(),a=/sap-ushell-enc-test=([^&]*)(&.*)?$/,m,e,f,t=this;u.addTime("resolveHashFragment");jQuery.sap.measure.average("sap.ushell.navigation.resolveHashFragment");this.expandCompactHash(h).done(function(H){if(H.indexOf("sap-ushell-enc-test")>=0){m=a.exec(H);if(m){e=m[1];if(e!=="A%20B%2520C"){sap.ushell.Container.getService("Message").error("This navigation is flagged as erroneous because"+" (likely the calling procedure) generated a wrong encoded hash."+" Please track down the encoding error and make sure to use the CrossApplicationNavigation service for navigation.","Navigation encoding wrong");}H=H.replace(/sap-ushell-enc-test=([^&]*)&/,"");H=H.replace(/(&|\?)sap-ushell-enc-test=([^&]*)$/,"");}}var P=t._invokeResolveHashChain(H);if(typeof A.processPostResolution==="function"){P=A.processPostResolution(H,P);}P.done(function(o){t._adjustResolutionResultForUi5Components(o);if(jQuery.isPlainObject(o)){if(!o.hasOwnProperty("navigationMode")){o.navigationMode=n.getNavigationMode(o,b.getCurrentAppliction());}o.targetNavigationMode=n.getExternalNavigationMode(o.navigationMode);}if(jQuery.isPlainObject(o)&&!o.hasOwnProperty("sap-system")){f=t._getSapSystem(h,o);if(f){o["sap-system"]=f;}}jQuery.sap.measure.end("sap.ushell.navigation.resolveHashFragment");b.setCurrentApplication(o);d.resolve(o);}).fail(function(M){d.reject(M);});}).fail(function(M){d.reject(M);});return d.promise();};this._invokeResolveHashChain=function(h){var o=R.map(function(a){return a;});return this._nextResolveHashFragment(o,h).done(function(a){C=a;});};this.baseResolveHashFragment=r.bind(this);this._getGetLinksResolver=function(a){var g;if(this._isClientSideTargetResolutionEnabled()){g=this._getLinksClientSide.bind(this);return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}if(Object.prototype.toString.apply(a.paramsOptions)==="[object Array]"&&a.paramsOptions.length>0){jQuery.sap.log.warning("Parameter options supplied to #getLinks will be ignored because FLP is not configured to use sap.ushell.services.ClientSideTargetResolution for target resolution","provided parameters options: "+JSON.stringify(a.paramsOptions,null,4),"sap.ushell.services.NavTargetResolution");}g=A&&A.getLinks&&A.getLinks.bind(A);if(g){return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}g=A&&A.getSemanticObjectLinks&&A.getSemanticObjectLinks.bind(A);if(g){return{resolver:g,warning:a.hasOwnProperty("action")?"the action argument was given, however, NavTargetResolutionAdapter does not implement getLinks method. Action will be ignored.":undefined,isGetSemanticObjectLinksCall:true};}return{resolver:undefined,warning:"Cannot determine resolver for getLinks method",isGetSemanticObjectLinksCall:undefined};};this.getLinks=function(a){var t=this,d=a.semanticObject,P=a.params,i=a.ignoreFormFactor,o=a.ui5Component,e=a.appStateKey,f=a.compactIntents,g,h,j=new jQuery.Deferred(),k,m;if(/\?/.test(d)){throw new Error("Parameter must not be part of semantic object");}g=(P===undefined)?undefined:JSON.parse(JSON.stringify(P));if(e){g=g||{};g["sap-xapp-state"]=encodeURIComponent(e);}k=sap.ushell.Container.getService("ShellNavigation");var q=t._getGetLinksResolver(a),H,v;if(q.warning){jQuery.sap.log.warning("A problem occurred while determining the resolver for getLinks",q.warning,"sap.ushell.services.NavTargetResolution");}m=q.resolver;if(m){H=function(E){j.reject(E);};v=function(x){if(f){t._shortenGetSemanticObjectLinksResults(x,o).done(function(y){j.resolve(y);});}else{j.resolve(x);}};if(q.isGetSemanticObjectLinksCall){h={target:{semanticObject:d,action:"dummyAction"},params:g};k.hrefForExternal(h,true,o,true).done(function(x){var M=x.params||g;m(d,M,i).done(v).fail(H);}).fail(function(M){j.reject(M);});}else{m(a).done(v).fail(H);}}else{j.resolve([]);}return j.promise();};this.getDistinctSemanticObjects=function(){if(this._isClientSideTargetResolutionEnabled()){var o=sap.ushell.Container.getService("ClientSideTargetResolution");return o.getDistinctSemanticObjects();}if(A&&A.getDistinctSemanticObjects){return A.getDistinctSemanticObjects.call(A);}jQuery.sap.log.error("Cannot execute getDistinctSemanticObjects method","ClientSideTargetResolution must be enabled or NavTargetResolutionAdapter must implement getDistinctSemanticObjects method","sap.ushell.services.NavTargetResolution");return new jQuery.Deferred().reject("Cannot execute getDistinctSemanticObjects").promise();};this._getLinksClientSide=function(a){var d=new jQuery.Deferred(),e,o=new jQuery.Deferred(),f=sap.ushell.Container.getService("URLParsing");if((a.params||{}).hasOwnProperty("sap-intent-param")){e="#"+a.semanticObject+"-"+"dummyAction?"+f.paramsToString(a.params);this.expandCompactHash(e).done(function(E){o.resolve(f.parseShellHash(E).params);}).fail(d.reject.bind(d));}else{o.resolve(a.params);}o.done(function(E){sap.ushell.Container.getService("ClientSideTargetResolution").getLinks(a).done(d.resolve.bind(d)).fail(d.reject.bind(d));});return d.promise();};this._shortenGetSemanticObjectLinksResults=function(g,o){var t=this,a=[],i=0,P=g.length,d=sap.ushell.Container.getService("URLParsing"),e=sap.ushell.Container.getService("ShellNavigation"),D=new jQuery.Deferred();g.forEach(function(f){var h=d.parseShellHash(f.intent),j=e.compactParams(h.params,undefined,o);a.push(j);a[i].done(function(k,m){a[k]={text:f.text,intent:"#"+h.semanticObject+"-"+h.action+"?"+d.paramsToString(m)};}.bind(t,i)).fail(function(k,m){jQuery.sap.log.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+m+"; intent had title ''"+f.title+"'' and link ''"+f.intent+"'","sap.ushell.services.NavTargetResolution");a[k]={text:f.text,intent:f.intent};}.bind(t,i)).always(function(){P--;if(P===0){D.resolve(a);}});i++;});return D.promise();};this.isIntentSupported=function(i){var m={},o;if(this._isClientSideTargetResolutionEnabled()){o=sap.ushell.Container.getService("ClientSideTargetResolution");return o.isIntentSupported(i);}if(A.isIntentSupported){return A.isIntentSupported(i);}i.forEach(function(a){m[a]={supported:undefined};});return(new jQuery.Deferred()).resolve(m).promise();};this.isNavigationSupported=function(i){var o=sap.ushell.Container.getService("URLParsing"),d=new jQuery.Deferred(),a=[];a=i.map(function(e){if(typeof e==="string"){return e;}return"#"+o.constructShellHash(e);});this.isIntentSupported(a).done(function(e){var f=a.map(function(g){return e[g]||{supported:false};});d.resolve(f);}).fail(d.reject.bind(d));return d.promise();};this.registerCustomResolver=function(o){if(typeof o.name!=="string"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have name {string} member");return false;}if(typeof o.isApplicable!=="function"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false;}if(typeof o.resolveHashFragment!=="function"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have \"resolveHashFragment\" member");return false;}R.push(o);return true;};if(S&&jQuery.isArray(S.resolveLocal)){l=S.resolveLocal.map(function(a){return a.linkId;});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(h){if(h===""){return"#";}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return"#";}h="#"+a.semanticObject+"-"+a.action;return h;},_getIndex:function(o){var h=this.cleanHash(o);return l.indexOf(h.substring(1));},isApplicable:function(o){return this._getIndex(o)>=0;},resolveHashFragment:function(h){var d,i=this._getIndex(h),o,a,e,f;d=new jQuery.Deferred();o=JSON.parse(JSON.stringify(S.resolveLocal[i].resolveTo));a=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(a&&a.params){f=sap.ushell.Container.getService("URLParsing").paramsToString(a.params);if(f){e=o.url.indexOf('?')>=0;o.url=o.url+(e?"&":"?")+f;}}d.resolve(o);return d.promise();}});}this.registerCustomResolver({name:"StandaloneLocalResolver",aElement:undefined,cleanHash:function(h){if(h===""){return undefined;}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return undefined;}h="#"+a.semanticObject+"-"+a.action;return h;},isRunStandaloneHash:function(h){return typeof h==="string"&&h.indexOf("#Shell-runStandaloneApp")===0;},isApplicable:function(h){h=this.cleanHash(h);if(!h){return false;}return h==="#Test-url"||h==="#Test-local1"||h==="#Test-local2"||h==="#Test-config"||h==="#Test-clear"||this.isRunStandaloneHash(h);},parseUrl:function(a){if(!this.aElement){this.aElement=window.document.createElement('a');}this.aElement.href=a;return this.aElement;},resolveHashFragment:function(h){var d=new jQuery.Deferred(),e=null,t=this,f,P,L,g,i,j,k,o,F=h,m;h=this.cleanHash(h);if(!h){return false;}e={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},"none":{applicationType:"URL",url:"",additionalInformation:""}};function q(K){if(localStorage){return localStorage[K];}return undefined;}function v(o,K){var f={},a;for(a in o){if(o.hasOwnProperty(a)){if(a!==K){f[a]=o[a];}}}return f;}function x(a){if(u.calculateOrigin(t.parseUrl(a))!==u.calculateOrigin(window.location)){return undefined;}var D=(new U(t.parseUrl(a).href)).normalizePathname().pathname(),E=jQuery.sap.getObject("runStandaloneAppFolderWhitelist",0,S),G;if(!E){return undefined;}for(G in E){if(E.hasOwnProperty(G)){if(E[G]){if(G==="*"||D.indexOf((new U(t.parseUrl(G).href)).normalizePathname().pathname())===0){return a;}}}}return undefined;}function y(K){return jQuery.sap.getUriParameters().get(K);}function z(a,K){return(a.params&&a.params[K]&&a.params[K][0])||y(K);}function B(K,V){if(localStorage){localStorage[K]=V;}}if(e[h]){f=e[h];}else if(h==="#Test-clear"){B("sap.ushell.#Test-local1",undefined);B("sap.ushell.#Test-local2",undefined);jQuery.sap.log.info("NavTargetResolution: Local storage keys for #Test have been cleared");f=e["#Test-config"];}else if(this.isRunStandaloneHash(h)){L={applicationType:"URL"};P=sap.ushell.Container.getService("URLParsing").parseShellHash(F);g=(z(P,"sap-ushell-SAPUI5.Component")&&"SAPUI5.Component="+z(P,"sap-ushell-SAPUI5.Component"))||(z(P,"sap-ushell-additionalInformation"));m=z(P,"sap-ushell-url")||"";o=v(P.params,"sap-ushell-SAPUI5.Component");o=v(o,"sap-ushell-additionalInformation");o=v(o,"sap-ushell-url");j=sap.ushell.Container.getService("URLParsing").paramsToString(o);k=m.indexOf('?')>=0;if(j){m=m+(k?(((m[m.length-1]!=="&")&&"&")||""):"?")+j;}L.url=x(m);L.additionalInformation=g;f=L;}else if(h==="#Test-local1"||h==="#Test-local2"||h==="#Test-url"){f=q("sap.ushell."+h);if(!f||f==="undefined"){L={applicationType:"URL"};}else{L=JSON.parse(f);}if((window.location.hostname==="localhost")||(S&&S.allowTestUrlComponentConfig)){i="sap-ushell-test-"+h.substring(6);g=y(i+"-additionalInformation");if(g){L.additionalInformation=g;}m=y(i+"-url");if(m){L.url=x(m);}}if(!L.url){jQuery.sap.log.info("NavTargetResolution: No configured app for "+h+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");jQuery.sap.log.info("NavTargetResolution: Defaulting to config app ...\n");d.reject("URL is not resolvable");return d.promise();}L.url=x(L.url);f=L;}if(f.url===undefined){d.reject("URL is not resolvable");return d.promise();}jQuery.sap.log.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent((f&&f.url)||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent((f&&f.additionalInfo)||"")+"#Test-local1");jQuery.sap.log.info("NavTargetResolution: Resolving "+h+" to "+JSON.stringify(f));d.resolve(f);return d.promise();}});this.getCurrentResolution=function(){return C;};}
;N.hasNoAdapter=false;return N;},true);
sap.ui.predefine('sap/ushell/services/Notifications',["sap/ui/thirdparty/datajs","sap/ui/core/ws/SapPcpWebSocket"],function(O,S){"use strict";
function N(c,p,s){var m=new sap.ui.model.json.JSONModel(),t=new Date(),o=s&&s.config,r={getNotifications:{},getNotificationsByType:{},getNotificationsInGroup:{},getBadgeNumber:{},resetBadgeNumber:{},getNotificationTypesSettings:{},getNotificationsGroupHeaders:{},getMobileSupportSettings:{},getWebSocketValidity:{},getNotificationCount:{}},w,W=o.webSocketUrl||"/sap/bc/apc/iwngw/notification_push_apc",P=o.pollingIntervalInSeconds||60,i=undefined,a=undefined,b=undefined,u=[],U=[],d=[],I=false,C=[],f=false,g=false,E=true,h,D,j=5000,k=6000,l=false,n={NOTIFICATIONS:0,NOTIFICATIONS_BY_TYPE:1,GET_BADGE_NUMBER:2,RESET_BADGE_NUMBER:3,GET_SETTINGS:4,GET_MOBILE_SUPPORT_SETTINGS:5,NOTIFICATIONS_GROUP_HEADERS:6,NOTIFICATIONS_IN_GROUP:7,GET_NOTIFICATIONS_COUNT:8,VALIDATE_WEBSOCKET_CHANNEL:9,NOTIFICATIONS_BY_DATE_DESCENDING:"notificationsByDateDescending",NOTIFICATIONS_BY_DATE_ASCENDING:"notificationsByDateAscending",NOTIFICATIONS_BY_PRIORITY_DESCENDING:"notificationsByPriorityDescending",NOTIFICATIONS_BY_TYPE_DESCENDING:"notificationsByTypeDescending"},M={PACKAGED_APP:0,FIORI_CLIENT:1,WEB_SOCKET:2,POLLING:3},q,F=false,v,z=true,A=false,H=true,B=false,G=new jQuery.Deferred(),J=new jQuery.Deferred(),K,L=G.promise(),Q=false,R={},T=10,V=false,X=false;this.isEnabled=function(){if(!o.enabled||!o.serviceUrl){E=false;if(o.enabled&&!o.serviceUrl){jQuery.sap.log.warning("No serviceUrl was found in the service configuration");}}else{E=true;}return E;};this.init=function(){if((!f)&&(this.isEnabled())){sap.ui.getCore().getEventBus().subscribe("launchpad","sessionTimeout",this.destroy,this);this.lastNotificationDate=new Date();z=o.enableNotificationsPreview;this._setWorkingMode();f=true;this.bUpdateDependencyInitiatorExists=false;this._userSettingInitialization();}};this.getUnseenNotificationsCount=function(){var e=jQuery.Deferred();e.resolve(m.getProperty("/UnseenCount"));return e.promise();};this.getNotificationsCount=function(){return m.getProperty("/NotificationsCount")?m.getProperty("/NotificationsCount"):"0";};this.getNotificationsByTypeWithGroupHeaders=function(){var e,x,y=new jQuery.Deferred(),Y=this._getRequestURI(n.NOTIFICATIONS_BY_TYPE);x={requestUri:Y};if(!this._getHeaderXcsrfToken()){e={};e["X-CSRF-Token"]="fetch";x.headers=e;}O.request(x,function(Z){y.resolve(Z);},function(Z){if(Z.response&&Z.response.statusCode===200&&Z.response.body){y.resolve(Z.response.body);}else{y.reject(Z);jQuery.sap.log.error("Notification service - oData executeAction failed: ",Z,"sap.ushell.services.Notifications");}});return y.promise();};this.getNotificationsGroupHeaders=function(){var e,x,y=new jQuery.Deferred(),Y=this._getRequestURI(n.NOTIFICATIONS_GROUP_HEADERS);x={requestUri:Y};if(!this._getHeaderXcsrfToken()){e={};e["X-CSRF-Token"]="fetch";x.headers=e;}O.request(x,function(Z){y.resolve(Z);},function(Z){if(Z.response&&Z.response.statusCode===200&&Z.response.body){y.resolve(Z.response.body);}else{y.reject();jQuery.sap.log.error("Notification service - oData executeAction failed: ",Z,"sap.ushell.services.Notifications");}});return y.promise();};this.getNotificationsBufferInGroup=function(e,x,y){var Y=this,Z,$,_=new jQuery.Deferred(),a1={group:e,skip:x,top:y},b1,c1,d1=this._getRequestURI(n.NOTIFICATIONS_IN_GROUP,a1);if(Q===true){b1=R[n.NOTIFICATIONS_IN_GROUP].slice(x,x+y);c1=JSON.stringify({"@odata.context":"$metadata#Notifications","value":b1});setTimeout(function(){_.resolve(c1);},1000);}else{$={requestUri:d1};if(!this._getHeaderXcsrfToken()){Z={};Z["X-CSRF-Token"]="fetch";$.headers=Z;}O.request($,function(e1){Y._updateCSRF(e1.response);_.resolve(e1.value);},function(e1){if(e1.response&&e1.response.statusCode===200&&e1.response.body){Y._updateCSRF(e1.response);_.resolve(JSON.parse(e1.response.body).value);}else{_.reject();jQuery.sap.log.error("Notification service - oData executeAction failed: ",e1,"sap.ushell.services.Notifications");}});}return _.promise();};this.getNotificationsBufferBySortingType=function(e,x,y){var Y=this,Z,$,_=new jQuery.Deferred(),a1={skip:x,top:y},b1,c1,d1=this._getRequestURI(e,a1);if(Q===true){b1=R[e].slice(x,x+y);c1=JSON.stringify({"@odata.context":"$metadata#Notifications","value":b1});setTimeout(function(){_.resolve(c1);},1000);}else{$={requestUri:d1};if(!this._getHeaderXcsrfToken()){Z={};Z["X-CSRF-Token"]="fetch";$.headers=Z;}O.request($,function(e1){Y._updateCSRF(e1.response);_.resolve(e1.value);},function(e1){if(e1.response&&e1.response.statusCode===200&&e1.response.body){Y._updateCSRF(e1.response);_.resolve(JSON.parse(e1.response.body).value);}else{_.reject();jQuery.sap.log.error("Notification service - oData executeAction failed: ",e1,"sap.ushell.services.Notifications");}});}return _.promise();};this.getNotifications=function(){var e,x=jQuery.Deferred();if((q===M.FIORI_CLIENT)||(q===M.PACKAGED_APP)){e=this._readNotificationsData(false);e.done(function(){x.resolve(m.getProperty("/Notifications"));}).fail(function(y){x.reject();});}else{x.resolve(m.getProperty("/Notifications"));}return x.promise();};this.executeBulkAction=function(e,x){var y=new jQuery.Deferred(),Y=[],Z=[],$={succededNotifications:Y,failedNotifications:Z},_=this;_.sendBulkAction(e,x).done(function(a1){a1.forEach(function(b1,c1){var d1=b1.NotificationId,e1=b1.Success;if(e1){Y.push(d1);}else{Z.push(d1);}});if(Z.length){y.reject($);}else{y.resolve($);}}).fail(function(){y.reject($);});return y.promise();};this.dismissBulkNotifications=function(e){var x=new jQuery.Deferred(),y=this;y.sendBulkDismiss(e).done(function(){x.resolve();}).fail(function(){x.reject();});return x.promise();};this.executeAction=function(e,x){var y=this,Y=o.serviceUrl+"/ExecuteAction",Z={NotificationId:e,ActionId:x},$={requestUri:Y,method:"POST",data:Z,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":h}},_=jQuery.Deferred();O.request($,function(a1){var b1,c1={isSucessfull:true,message:""};if(a1&&a1.response&&a1.response.statusCode===200&&a1.response.body){b1=JSON.parse(a1.response.body);c1.isSucessfull=b1.Success;c1.message=b1.MessageText;}_.resolve(c1);},function(a1){var b1,c1={isSucessfull:false,message:""};if(a1.response&&a1.response.statusCode===200&&a1.response.body){b1=JSON.parse(a1.response.body);c1.isSucessfull=b1.Success;c1.message=b1.MessageText;_.resolve(c1);}else if(y._csrfTokenInvalid(a1)&&(V===false)){y._invalidCsrfTokenRecovery(_,y.executeAction,[e,x]);}else{_.reject(a1);jQuery.sap.log.error("Notification service - oData executeAction failed: ",a1,"sap.ushell.services.Notifications");}});return _.promise();};this.sendBulkAction=function(e,x){var y=this,Y=o.serviceUrl+"/BulkActionByHeader",Z={ParentId:e,ActionId:x},$={requestUri:Y,method:"POST",data:Z,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":h}},_=jQuery.Deferred();O.request($,function(a1){var b1,c1;if(a1&&a1.response&&a1.response.statusCode===200&&a1.response.body){b1=JSON.parse(a1.response.body);c1=b1.value;}_.resolve(c1);},function(a1){var b1,c1;if(a1.response&&a1.response.statusCode===200&&a1.response.body){b1=JSON.parse(a1.response.body);c1=b1.value;_.resolve(c1);}else if(y._csrfTokenInvalid(a1)&&(V===false)){y._invalidCsrfTokenRecovery(_,y.sendBulkAction,[e,x]);}else{_.reject();jQuery.sap.log.error("Notification service - oData executeBulkAction failed: ",a1.message,"sap.ushell.services.Notifications");}});return _.promise();};this.sendBulkDismiss=function(e){var x=this,y=o.serviceUrl+"/DismissAll",Y={ParentId:e},Z={requestUri:y,method:"POST",data:Y,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":h}},$=jQuery.Deferred();O.request(Z,function(_){$.resolve();},function(_){if(_.response&&_.response.statusCode===200){$.resolve();}else if(x._csrfTokenInvalid(_)&&(V===false)){x._invalidCsrfTokenRecovery($,x.sendBulkDismiss,[e]);}else{$.reject();jQuery.sap.log.error("Notification service - oData executeBulkAction failed","sap.ushell.services.Notifications");}});return $.promise();};this.markRead=function(e){var x=this,y=o.serviceUrl+"/MarkRead",Y={NotificationId:e},Z={requestUri:y,method:"POST",data:Y,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":h}},$=jQuery.Deferred();O.request(Z,function(_){$.resolve();},function(_){if(x._csrfTokenInvalid(_)&&(V===false)){x._invalidCsrfTokenRecovery($,x.markRead,[e]);}else{jQuery.sap.log.error("Notification service - oData reset badge number failed: ",_,"sap.ushell.services.Notifications");$.reject(_);}});return $.promise();};this.dismissNotification=function(e){var x=o.serviceUrl+"/Dismiss",y=this,Y={NotificationId:e},Z={requestUri:x,method:"POST",data:Y,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":h}},$=jQuery.Deferred();O.request(Z,function(_){$.resolve();},function(_){if(y._csrfTokenInvalid(_)&&(V===false)){y._invalidCsrfTokenRecovery($,y.dismissNotification,[e]);}else{$.reject(_);jQuery.sap.log.error("Notification service - oData dismiss notification failed: ",_,"sap.ushell.services.Notifications");}});return $.promise();};this.registerNotificationsUpdateCallback=function(e){u.push(e);};this.registerDependencyNotificationsUpdateCallback=function(e,x){if(x===false){this.bUpdateDependencyInitiatorExists=true;}U.push({callback:e,dependent:x});};this.registerNotificationCountUpdateCallback=function(e){d.push(e);};this.notificationsSeen=function(){this._setNotificationsAsSeen();};this.isFirstDataLoaded=function(){return F;};this.readSettings=function(){var e;e=this._readSettingsFromServer();return e;};this.saveSettingsEntry=function(e){var x;x=this._writeSettingsEntryToServer(e);return x;};this.getUserSettingsFlags=function(){var e=new jQuery.Deferred();if(B===true){e.resolve({previewNotificationEnabled:A,highPriorityBannerEnabled:H});}else{L.done(function(){e.resolve({previewNotificationEnabled:A,highPriorityBannerEnabled:H});});}return e.promise();};this.setUserSettingsFlags=function(e){A=e.previewNotificationEnabled;H=e.highPriorityBannerEnabled;this._writeUserSettingsFlagsToPersonalization(e);};this._getNotificationSettingsMobileSupport=function(){return K;};this.getPreviewNotificationEnabledConfig=function(){return z;};this.destroy=function(){g=true;if(i){clearTimeout(i);}else if(a){clearTimeout(a);}else if(b){clearTimeout(b);}if((q===M.WEB_SOCKET)&&w){w.close();}sap.ui.getCore().getEventBus().unsubscribe("launchpad","sessionTimeout",this.destroy,this);};this._readUnseenNotificationsCount=function(e){var x=this,y=new jQuery.Deferred(),Y=this._getRequestURI(n.GET_BADGE_NUMBER),Z={requestUri:Y};O.read(Z,function($,_){m.setProperty("/UnseenCount",_.data.GetBadgeNumber.Number);x._setNativeIconBadge(_.data.GetBadgeNumber.Number);y.resolve(_.data.GetBadgeNumber.Number);},function($){if($.response&&$.response.statusCode===200&&$.response.body){var _=JSON.parse($.response.body);m.setProperty("/UnseenCount",_.value);x._setNativeIconBadge(_.value);y.resolve(_.value);}else{jQuery.sap.log.error("Notification service - oData read unseen notifications count failed: ",$.message,"sap.ushell.services.Notifications");y.reject($);}});return y.promise();};this.readNotificationsCount=function(){var e=new jQuery.Deferred(),x=this._getRequestURI(n.GET_NOTIFICATIONS_COUNT),y={requestUri:x};O.read(y,function(Y,Z){e.resolve(Z.data);},function(Y){if(Y.response&&Y.response.statusCode===200&&Y.response.body){var Z=JSON.parse(Y.response.body);e.resolve(Z.value);}else{jQuery.sap.log.error("Notification service - oData read notifications count failed: ",Y.message,"sap.ushell.services.Notifications");e.reject(Y);}});return e.promise();};this._getNotificationSettingsAvalability=function(){return J.promise();};this._setNotificationsAsSeen=function(){var e=this,x=jQuery.Deferred(),y=this._getRequestURI(n.RESET_BADGE_NUMBER),Y={requestUri:y,method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":h}};if(this._isFioriClientMode()===true||this._isPackagedMode()===true){this._setNativeIconBadge(0);}O.request(Y,function(Z,$){x.resolve();},function(Z){if(e._csrfTokenInvalid(Z)&&(V===false)){e._invalidCsrfTokenRecovery(x,e._setNotificationsAsSeen);}else{jQuery.sap.log.error("Notification service - oData reset badge number failed: ",Z,"sap.ushell.services.Notifications");x.reject(Z);}});return x.promise();};this._readNotificationsData=function(e){var x=this,y,Y,Z,$=new jQuery.Deferred(),_=[];y=this._readUnseenNotificationsCount(e);_.push(y);Z=this.readNotificationsCount();Z.done(function(a1){m.setProperty("/NotificationsCount",a1);});Y=this.getNotificationsBufferBySortingType(n.NOTIFICATIONS_BY_DATE_DESCENDING,0,T);_.push(Y);jQuery.when.apply(jQuery,_).then(function(a1){_[0].done(function(b1){if(e===true){x._updateNotificationsCountConsumers();}});_[1].done(function(b1){jQuery.sap.flpmeasure.start(0,"Notifications (services + rendering)",7);m.setProperty("/Notifications",b1);x._notificationAlert(b1);if(e===true){x._updateNotificationsConsumers();x._updateDependentNotificationsConsumers();}$.resolve();});});return $.promise();};this._getHeaderXcsrfToken=function(){return h;};this._getDataServiceVersion=function(){return D;};this._getRequestURI=function(e,x){var y,Y=encodeURI(this._getConsumedIntents(e));switch(e){case n.NOTIFICATIONS:if(r.getNotifications.basic===undefined){r.getNotifications.basic=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$filter=IsGroupHeader%20eq%20false";}if(this._isIntentBasedConsumption()){if(r.getNotifications.byIntents===undefined){r.getNotifications.byIntents=r.getNotifications.basic.concat("&intents%20eq%20"+Y);}return r.getNotifications.byIntents;}return r.getNotifications.basic;case n.NOTIFICATIONS_BY_TYPE:if(r.getNotificationsByType.basic===undefined){r.getNotificationsByType.basic=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams";}if(this._isIntentBasedConsumption()){if(r.getNotificationsByType.byIntents===undefined){r.getNotificationsByType.byIntents=r.getNotificationsByType.basic.concat("&$filter=intents%20eq%20"+Y);}return r.getNotificationsByType.byIntents;}return r.getNotificationsByType.basic;case n.NOTIFICATIONS_GROUP_HEADERS:if(r.getNotificationsGroupHeaders.basic===undefined){r.getNotificationsGroupHeaders.basic=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$filter=IsGroupHeader%20eq%20true";}if(this._isIntentBasedConsumption()){if(r.getNotificationsGroupHeaders.byIntents===undefined){r.getNotificationsGroupHeaders.byIntents=r.getNotificationsGroupHeaders.basic.concat("&intents%20eq%20"+Y);}return r.getNotificationsGroupHeaders.byIntents;}return r.getNotificationsGroupHeaders.basic;case n.NOTIFICATIONS_IN_GROUP:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt desc&$filter=IsGroupHeader eq false and ParentId eq "+x.group+"&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+Y);}break;case n.GET_BADGE_NUMBER:if(r.getBadgeNumber.basic===undefined){r.getBadgeNumber.basic=o.serviceUrl+"/GetBadgeNumber()";}if(this._isIntentBasedConsumption()){if(r.getBadgeNumber.byIntents===undefined){r.getBadgeNumber.byIntents=o.serviceUrl+"/GetBadgeCountByIntent("+Y+")";}return r.getBadgeNumber.byIntents;}return r.getBadgeNumber.basic;case n.GET_NOTIFICATIONS_COUNT:if(r.getNotificationCount.basic===undefined){r.getNotificationCount.basic=o.serviceUrl+"/Notifications/$count";}return r.getNotificationCount.basic;case n.RESET_BADGE_NUMBER:if(r.resetBadgeNumber.basic===undefined){r.resetBadgeNumber.basic=o.serviceUrl+"/ResetBadgeNumber";}return r.resetBadgeNumber.basic;case n.GET_SETTINGS:if(r.getNotificationTypesSettings.basic===undefined){r.getNotificationTypesSettings.basic=o.serviceUrl+"/NotificationTypePersonalizationSet";}return r.getNotificationTypesSettings.basic;case n.GET_MOBILE_SUPPORT_SETTINGS:if(r.getMobileSupportSettings.basic===undefined){r.getMobileSupportSettings.basic=o.serviceUrl+"/Channels(ChannelId='SAP_SMP')";}return r.getMobileSupportSettings.basic;case n.VALIDATE_WEBSOCKET_CHANNEL:if(r.getWebSocketValidity.basic===undefined){r.getWebSocketValidity.basic=o.serviceUrl+"/Channels('SAP_WEBSOCKET')";}return r.getWebSocketValidity.basic;case n.NOTIFICATIONS_BY_DATE_DESCENDING:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt%20desc&$filter=IsGroupHeader%20eq%20false&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+Y);}break;case n.NOTIFICATIONS_BY_DATE_ASCENDING:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt%20asc&$filter=IsGroupHeader%20eq%20false&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+Y);}break;case n.NOTIFICATIONS_BY_PRIORITY_DESCENDING:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=Priority%20desc&$filter=IsGroupHeader%20eq%20false&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+Y);}break;default:y="";}return y;};this._readSettingsFromServer_noConnection=function(){var e=jQuery.Deferred(),x=[{NotificationTypeId:"type1",NotificationTypeDesc:"aaaaabbbbb-cccccddddd",PriorityDefault:"40-HIGH",DoNotDeliver:false,DoNotDeliverMob:true},{NotificationTypeId:"type2",NotificationTypeDesc:"cccccdddddccc-aaaaabbbbb",PriorityDefault:"10-LOW",DoNotDeliver:true,DoNotDeliverMob:true}];e.resolve(JSON.stringify({"@odata.context":"$metadata#NotificationTypePersonalizationSet","value":x}));return e.promise();};this._readSettingsFromServer_noData=function(){var e=jQuery.Deferred();e.resolve(JSON.stringify({"@odata.context":"$metadata#NotificationTypePersonalizationSet","value":{}}));return e.promise();};this._readSettingsFromServer=function(){var e=this._getRequestURI(n.GET_SETTINGS),x={requestUri:e},y=jQuery.Deferred();O.request(x,function(Y){y.resolve(Y.results);},function(Y){if(Y.response&&Y.response.statusCode===200&&Y.response.body){y.resolve(Y.response.body);}else{y.reject(Y);jQuery.sap.log.error("Notification service - oData get settings failed: ",Y,"sap.ushell.services.Notifications");}});return y.promise();};this._readMobileSettingsFromServer=function(){var e=this._getRequestURI(n.GET_MOBILE_SUPPORT_SETTINGS),x={requestUri:e},y=jQuery.Deferred(),Y,Z;O.request(x,function($){if(typeof($.results)==="string"){Y=JSON.parse($.results);Y.successStatus=true;Z=JSON.stringify(Y);y.resolve(Z);}else{$.results.successStatus=true;y.resolve($.results);}},function($){if($.response&&$.response.statusCode===200&&$.response.body){Y=JSON.parse($.response.body);Y.successStatus=true;Z=JSON.stringify(Y);y.resolve(Z);}else{y.resolve(JSON.stringify({successStatus:false}));jQuery.sap.log.error("Notification service - oData get settings failed: ",$,"sap.ushell.services.Notifications");}});return y.promise();};this._checkWebSocketActivity=function(){var e=this._getRequestURI(n.VALIDATE_WEBSOCKET_CHANNEL),x={requestUri:e},y=jQuery.Deferred(),Y;O.request(x,function(Z){if(typeof(Z.results)==="string"){Y=JSON.parse(Z.results);y.resolve(Y.IsActive);}else{y.resolve(false);}},function(Z){if(Z.response&&Z.response.statusCode===200&&Z.response.body){Y=JSON.parse(Z.response.body);y.resolve(Y.IsActive);}else{y.resolve(false);jQuery.sap.log.error("Notification service - oData get settings failed: ",Z,"sap.ushell.services.Notifications");}});return y.promise();};this._writeSettingsEntryToServer=function(e){var x=this,y,Y=this._getRequestURI(n.GET_SETTINGS)+"(NotificationTypeId="+e.NotificationTypeId+")",Z={requestUri:Y,method:"PUT",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":h}};Z.data=JSON.parse(JSON.stringify(e));Z.data["@odata.context"]="$metadata#NotificationTypePersonalizationSet/$entity";y=new jQuery.Deferred();O.request(Z,function($){y.resolve($);},function($){if($.response&&$.response.statusCode===200&&$.response.body){y.resolve($.response.body);}else if(x._csrfTokenInvalid($)&&(V===false)){x._invalidCsrfTokenRecovery(y,x._writeSettingsEntryToServer,[e]);}else{y.reject($);jQuery.sap.log.error("Notification service - oData set settings entry failed: ",$,"sap.ushell.services.Notifications");}});return y.promise();};this._updateNotificationsConsumers=function(){u.forEach(function(e){e();});};this._updateDependentNotificationsConsumers=function(){var e=this,x=new jQuery.Deferred();U.forEach(function(y){if(e.bUpdateDependencyInitiatorExists===false){y.callback();}else{y.dependent===true?y.callback(x.promise()):y.callback(x);}});};this._updateNotificationsCountConsumers=function(){d.forEach(function(e){e();});};this._updateAllConsumers=function(){this._updateNotificationsConsumers();this._updateNotificationsCountConsumers();this._updateDependentNotificationsConsumers();};this._getModel=function(){return m;};this._getMode=function(){return q;};this._setWorkingMode=function(){var e;if(o.intentBasedConsumption===true){C=this._getIntentsFromConfiguration(o.consumedIntents);if(C.length>0){I=true;}}if(this._isPackagedMode()){q=M.PACKAGED_APP;e=this._getIntentsFromConfiguration(window.fiori_client_appConfig.applications);if(e.length>0){C=e;}if(C.length>0){I=true;}this._registerForPush();this._readNotificationsData(true);this._setNativeIconBadgeWithDelay();return;}this._performFirstRead();};this._performFirstRead=function(){var e=this,x,y=this._readNotificationsData(true);y.done(function(){x=e._getFioriClientRemainingDelay();if(x<=0){e._fioriClientStep();}else{i=setTimeout(function(){e._fioriClientStep();},x);}F=true;}).fail(function(Y){jQuery.sap.log.error("Notifications oData read failed. Error: "+Y);return;});};this._fioriClientStep=function(){var e=this,x;if(this._isFioriClientMode()){q=M.FIORI_CLIENT;this._addPushNotificationHandler();x=this.getUnseenNotificationsCount();x.done(function(y){e._setNativeIconBadge(y,function(){});}).fail(function(){});}else{this._webSocketStep();}};this._webSocketStep=function(){q=M.WEB_SOCKET;this._establishWebSocketConnection();};this._webSocketRecoveryStep=function(){if(l===false){l=true;a=setTimeout(function(){this._webSocketStep();}.bind(this),j);}else{this._activatePollingAfterInterval();}};this._activatePollingAfterInterval=function(){var e=this;b=setTimeout(function(){e._activatePolling();},P*1000);};this._activatePolling=function(){var e=this;q=M.POLLING;this._readNotificationsData(true);b=setTimeout(e._activatePolling.bind(e,P,false),(P*1000));};this._formatAsDate=function(e){return new Date(e);};this._notificationAlert=function(e){if(H===false){return;}var x,y=[],Y=0;for(x in e){if(this.lastNotificationDate&&this._formatAsDate(e[x].CreatedAt)>this.lastNotificationDate){if(e[x].Priority==="HIGH"){y.push(e[x]);}}if(Y<this._formatAsDate(e[x].CreatedAt)){Y=this._formatAsDate(e[x].CreatedAt);}}if(this.lastNotificationDate&&y&&y.length>0){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Notifications","onNewNotifications",y);}this.lastNotificationDate=Y;};this._getFioriClientRemainingDelay=function(){return k-(new Date()-t);};this._establishWebSocketConnection=function(){var x=this,y=false,Y;try{w=this._getWebSocketObjectObject(W,[S.SUPPORTED_PROTOCOLS.v10]);w.attachMessage(this,function(Z){Y=Z.getParameter("pcpFields");if((Y)&&(Y.Command)&&(Y.Command==="Notification")){x._readNotificationsData(true);}});w.attachOpen(this,function(){x._checkWebSocketActivity().done(function(Z){if(!Z){y=true;w.close();x._activatePollingAfterInterval();}});jQuery.sap.log.info("Notifications UShell service WebSocket: webSocket connection opened");});w.attachClose(this,function(Z,$){jQuery.sap.log.warning("Notifications UShell service WebSocket: attachClose called with code: "+Z.mParameters.code+" and reason: "+Z.mParameters.reason);if((!g)&&(!y)){x._webSocketRecoveryStep();}});w.attachError(this,function(Z,$){jQuery.sap.log.warning("Notifications UShell service WebSocket: attachError called!");});}catch(e){jQuery.sap.log.error("Exception occurred while creating new sap.ui.core.ws.SapPcpWebSocket. Message: "+e.message);}};this._isFioriClientMode=function(){return!(sap.FioriClient===undefined);};this._isPackagedMode=function(){return(window.fiori_client_appConfig&&window.fiori_client_appConfig.prepackaged===true);};this._setNativeIconBadge=function(e){if((sap.Push!==undefined)&&(sap.Push.setBadgeNumber!==undefined)){sap.Push.setBadgeNumber(e,function(){});}};this._setNativeIconBadgeWithDelay=function(){var e=this,x;setTimeout(function(){x=e.getUnseenNotificationsCount();x.done(function(y){e._setNativeIconBadge(y);}).fail(function(){});},4000);};this._getIntentsFromConfiguration=function(e){var x=[],y,Y;if(e&&e.length>0){for(Y=0;Y<e.length;Y++){y=e[Y].intent;x.push(y);}}return x;};this._handlePushedNotification=function(e){var x,y,Y,Z,$=[],_;if(e!==undefined){if((e.additionalData===undefined)||(e.additionalData.foreground===true)){this._readNotificationsData(true);}else{if(e.additionalData&&e.additionalData.NavigationTargetObject){y=e.additionalData.NavigationTargetObject;}else{y=e.NavigationTargetObject;}if(e.additionalData&&e.additionalData.NavigationTargetAction){Y=e.additionalData.NavigationTargetAction;}else{Y=e.NavigationTargetAction;}if(e.additionalData&&e.additionalData.NavigationTargetParam){Z=e.additionalData.NavigationTargetParam;}else{Z=e.NavigationTargetParam;}if(Z){if(typeof Z==='string'||Z instanceof String){$[0]=Z;}else if(Array.isArray(Z)===true){$=Z;}}x=e.NotificationId;if((typeof hasher!=="undefined")&&(hasher.getHash()===y+"-"+Y)){_=sap.ui.getCore().byId('viewPortContainer');if(_){_.switchState("Center");}}sap.ushell.utils.toExternalWithParameters(y,Y,$);this.markRead(x);this._readNotificationsData(true);}}};this._registerForPush=function(){sap.Push.initPush(this._handlePushedNotification.bind(this));};this._addPushNotificationHandler=function(){document.addEventListener("deviceready",this._registerForPush.bind(this),false);};this._isIntentBasedConsumption=function(){return I;};this._getConsumedIntents=function(e){var x="",y;if(!this._isIntentBasedConsumption()){return x;}if(C.length>0){if(e!==n.GET_BADGE_NUMBER){x="&";}for(y=0;y<C.length;y++){if(e===n.GET_BADGE_NUMBER){if(y===0){x=C[y];}else{x=x+","+C[y];}}else{x=x+"NavigationIntent%20eq%20%27"+C[y]+"%27";}}}return x;};this._revalidateCsrfToken=function(){var e;h=undefined;X=false;e=this.getNotificationsBufferBySortingType(n.NOTIFICATIONS_BY_DATE_DESCENDING,0,1);return e.promise();};this._csrfTokenInvalid=function(e){return(e.response&&(e.response.statusCode===403)&&(e.response.headers["x-csrf-token"]==="Required"));};this._invalidCsrfTokenRecovery=function(x,y,Y){var Z=this,$=this._revalidateCsrfToken(),_;V=true;$.done(function(){_=y.apply(Z,Y);_.done(function(e){V=false;x.resolve(e);});_.fail(function(e){V=false;if(e.response&&e.response.statusCode===200&&e.response.body){x.resolve(e.response.body);}else{x.reject(e);}});});$.fail(function(e){V=false;x.reject(e);jQuery.sap.log.error("Notification service - oData markRead failed: ",e.message,"sap.ushell.services.Notifications");});};this._notificationsAscendingSortBy=function(e,Y){e.sort(function(x,y){var Z=x[Y],$=y[Y];if(Z===$){Z=x.id;$=y.id;}return $>Z?-1:1;});return e;};this._getWebSocketObjectObject=function(W,e){return new S(W,e);};this._notificationsDescendingSortBy=function(e,Y){e.sort(function(x,y){var Z=x[Y],$=y[Y];if(Z===$){Z=x.id;$=y.id;return Z>$?-1:1;}if(Y==="Priority"){if(Z==="HIGH"){return-1;}if($==="HIGH"){return 1;}if(Z==="MEDIUM"){return-1;}return 1;}return Z>$?-1:1;});return e;};this.getOperationEnum=function(){return n;};this._readUserSettingsFlagsFromPersonalization=function(){var e=this,x,y;try{y=this._getUserSettingsPersonalizer().getPersData();}catch(Y){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(Y.name+": "+Y.message);x=new jQuery.Deferred();x.reject(Y);y=x.promise();}y.done(function(Z){if(Z===undefined){e._writeUserSettingsFlagsToPersonalization({previewNotificationEnabled:A,highPriorityBannerEnabled:H});}else{A=Z.previewNotificationEnabled;H=Z.highPriorityBannerEnabled;}B=true;G.resolve();});y.fail(function(){jQuery.sap.log.error("Reading User Settings flags from Personalization service failed");});};this._writeUserSettingsFlagsToPersonalization=function(e){var x,y;try{y=this._getUserSettingsPersonalizer().setPersData(e);}catch(Y){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(Y.name+": "+Y.message);x=new jQuery.Deferred();x.reject(Y);y=x.promise();}return y;};this._getUserSettingsPersonalizer=function(){if(v===undefined){v=this._createUserSettingsPersonalizer();}return v;};this._createUserSettingsPersonalizer=function(){var e=sap.ushell.Container.getService("Personalization"),x,y={keyCategory:e.constants.keyCategory.FIXED_KEY,writeFrequency:e.constants.writeFrequency.LOW,clientStorageAllowed:true},Y={container:"sap.ushell.services.Notifications",item:"userSettingsData"},Z=e.getPersonalizer(Y,y,x);return Z;};this._updateCSRF=function(e){if((X===true)||(e.headers===undefined)){return;}if(!this._getHeaderXcsrfToken()){h=e.headers["x-csrf-token"]||e.headers["X-CSRF-Token"]||e.headers["X-Csrf-Token"];}if(!this._getDataServiceVersion()){D=e.headers.DataServiceVersion||e.headers["odata-version"];}X=true;};this._userSettingInitialization=function(){var e,x,y={settingsAvailable:false,mobileAvailable:false},Y,Z,$;this._readUserSettingsFlagsFromPersonalization();e=this._readSettingsFromServer();x=this._readMobileSettingsFromServer();Y=[e,x];e.done(function(){y.settingsAvailable=true;});e.fail(function(){A=true;});x.done(function(_){Z=JSON.parse(_);$=Z.successStatus;if($){K=_?Z.IsActive:false;y.mobileAvailable=K;}else{K=false;y.mobileAvailable=false;}});jQuery.when.apply(jQuery,Y).then(function(_){J.resolve(y);});};}
;N.hasNoAdapter=true;return N;},true);
sap.ui.predefine('sap/ushell/services/PageBuilding',["sap/ui2/srvc/factory","sap/ui2/srvc/page"],function(f,p){"use strict";
function P(a,c){this.getFactory=function(){return a.getFactory();};this.getPage=function(s){return a.getFactory().createPage(s);};this.getPageSet=function(i){var d=new jQuery.Deferred();a.getFactory().createPageSet(i,d.resolve.bind(d),d.reject.bind(d));return d.promise();};}
P.hasNoAdapter=false;return P;},true);
sap.ui.predefine('sap/ushell/services/Personalization',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/ContextContainer","sap/ushell/services/_Personalization/WindowAdapter","sap/ushell/services/_Personalization/TransientPersonalizer","sap/ushell/services/_Personalization/PersonalizationContainer","sap/ushell/services/_Personalization/Personalizer","sap/ushell/services/_Personalization/VariantSetAdapter","sap/ushell/services/_Personalization/Variant","sap/ushell/services/_Personalization/VariantSet","sap/ushell/services/_Personalization/WindowAdapterContainer","sap/ui/base/ManagedObject"],function(u,p,a,C,W,T,P,b,V,c,d,e,M){"use strict";
function f(A,o,s,g){this._oConfig=(g&&g.config)||{};this._seed=(g&&g.config&&typeof g.config.seed==="string"&&g.config.seed)||"12345678901AFERANDOMBETTER";while(this._seed.length<40){this._seed=this._seed+this._seed;}this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new W(this,A)};this._oAdapterWindowOnly={lazy:false,instance:new W(this,undefined)};this._oContainerMap=new u.Map();this._oPendingOperationsMap=new u.Map();}
f.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseeded by subsequent save";f.prototype.constants=a;
f.prototype._configureAppVariantStorage=function(A){var t=this,D="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!A){A={adapter:{module:D}};}if(Object.keys(A).length===0||A.enabled===false){return;}var s=(A.adapter&&A.adapter.module)||D;var g=s.split(".").join("/");var h=function(){t._oAppVariantAdapterLoadPromise=t._oAppVariantAdapterLoadPromise||(function(){var o=new jQuery.Deferred();try{sap.ui.require([g],R);}catch(r){o.reject(r);}function R(i){try{var j=new i();var w=new W(t,j);o.resolve(w);}catch(E){o.reject(E);}}return o.promise();})();return t._oAppVariantAdapterLoadPromise;};return{lazy:true,create:h};};
f.prototype.getGeneratedKey=function(){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",g=s.length,r="",t=this;var R=function(i){return(t._seed.charCodeAt(i)+Math.floor(Math.random()*g))%g;};if(window&&window.crypto&&window.crypto.getRandomValues){var h=new Uint32Array(40);window.crypto.getRandomValues(h);R=function(i){return(h[i]+t._seed.charCodeAt(i))%s.length;};}var j=function(i){return s[R(i)];};while(r.length<40){r+=j(r.length);}return r;};
f.prototype.getPersonalizer=function(o,s,g){g=g||this._getApplicationComponent();return new b(this,this._oAdapterWithBackendAdapter.instance,o,s,g);};
f.prototype._getApplicationComponent=function(){var o;var O=M._sOwnerId;if(O){o=sap.ui.getCore().getComponent(O);if(o instanceof sap.ui.core.UIComponent){return o;}}return undefined;};
f.prototype.getTransientPersonalizer=function(){return new T();};
f.prototype.getContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,false,o);};
f.prototype.createEmptyContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,true,o);};
f.prototype._createContainer=function(s,S,g,o){var t=this,l,h,i,j,A,k,U,D=new jQuery.Deferred();if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}l=p.isLaunchpadReload();U=!!(p.isAppVariant(o)&&(!S||!S.shared)&&this._oAppVariantAdapterWithBackendAdapter);A=p.adjustScope(S,l);if(U){var m=o.getManifestObject();A.component=o;A.appVarId=m.getEntry("/sap.ui5/appVariantId");A.appVersion=m.getEntry("/sap.app/applicationVersion/version");}k=p.addContainerPrefix(s);i=U?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;h=t._oAdapterWindowOnly;j=p.pickAdapter(S,l,h,i);p.loadAdapter(j).then(function(L){var n;var q=new C(t,L,k,A,o);var r=L&&L.supportsGetWithoutSubsequentLoad===true;if(g&&r){n=new jQuery.Deferred();n.resolve(q);}else{n=q.load();}n.fail(function(){D.reject();}).done(function(){if(g||q._isExpired()){q.clear();}D.resolve(q);});},function(E){D.reject(E);});return D.promise();};
f.prototype.delContainer=function(s,S){var D={},o,g="",t=this;S=t._adjustScope(S,false);g=p.addContainerPrefix(s);D=new jQuery.Deferred();o=t._pendingContainerOperations_cancelAddNext(s,null);o.always(function(){t.getContainer(s,S).fail(function(){t._pendingContainerOperations_cancelAddNext(s,D);D.reject();}).done(function(h){var A;t._pendingContainerOperations_cancelAddNext(s,D);A=S.validity===0?t._oAdapterWindowOnly:t._oAdapterWithBackendAdapter;p.loadAdapter(A).then(function(l){l.delAdapterContainer(g,S).fail(function(){D.reject();}).done(function(){D.resolve();});},function(){D.reject();});});});return D.promise();};
f.prototype._pendingContainerOperations_flushAddNext=function(s,D){var o,S;o=this._oPendingOperationsMap.get(s);if(!o){o=new jQuery.Deferred();o.resolve();}if(D!==null){this._oPendingOperationsMap.put(s,D);}if(!o||o.state()!=="pending"){return o;}clearTimeout(o._sapTimeoutId);o._sapTimeoutId=undefined;if(typeof o._sapFnSave==="function"){S=o._sapFnSave;o._sapFnSave=undefined;S();}return o;};
f.prototype._pendingContainerOperations_cancelAddNext=function(s,D){var o;o=this._oPendingOperationsMap.get(s);if(!o){o=new jQuery.Deferred();o.resolve();}if(D!==null){this._oPendingOperationsMap.put(s,D);}if(!o||o.state()!=="pending"){return o;}if(o._sapTimeoutId){clearTimeout(o._sapTimeoutId);o._sapTimeoutId=undefined;o.resolve(f.prototype.SAVE_DEFERRED_DROPPED);}return o;};
f.prototype.getPersonalizationContainer=function(s){var g="",o={},D={};if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}g=p.addContainerPrefix(s);if(this._oContainerMap.containsKey(g)){return this._oContainerMap.get(g).promise();}D=new jQuery.Deferred();o=new P(this._oAdapterWithBackendAdapter.instance,g);o.done(function(h){D.resolve(h);}).fail(function(h){D.reject(h);});this._oContainerMap.put(g,D);return D.promise();};
f.prototype.delPersonalizationContainer=function(s){var D={},g="",t=this;g=p.addContainerPrefix(s);D=new jQuery.Deferred();this.getPersonalizationContainer(s).fail(function(){D.reject();}).done(function(o){t._oAdapterWithBackendAdapter.instance.delAdapterContainer(g).fail(function(){D.reject();}).done(function(){t._oContainerMap.remove(g);D.resolve();});});return D.promise();};
f.prototype._adjustScope=p.adjustScope;f.hasNoAdapter=false;f.ContextContainer=C;f.Variant=c;f.VariantSet=d;f.VariantSetAdapter=V;f.WindowAdapter=W;f.WindowAdapterContainer=e;return f;},true);
sap.ui.predefine('sap/ushell/services/PluginManager',[],function(){"use strict";var S="sap.ushell.services.PluginManager",a="sap-ushell-plugin-type",b="RendererExtensions",c="sap.ushell.components.shell.defaults",s=[b,"UserDefaults","UserImage","ContentProvider","AppWarmup"];
function P(){var t=this;this._oPluginCollection={};this._oCategoryLoadingProgress={};this._mInitializedComponentPromise={};s.forEach(function(p){t._oPluginCollection[p]={};t._oCategoryLoadingProgress[p]=new jQuery.Deferred();});this._handlePluginCreation=function(C,p,o){var t=this,d=(t._oPluginCollection[C])[p];try{if(d.hasOwnProperty("component")){if(t._mInitializedComponentPromise.hasOwnProperty(d.component)){t._mInitializedComponentPromise[d.component].then(function(){t._instantiateComponent(d,o);},function(){t._instantiateComponent(d,o);});}else{t._mInitializedComponentPromise[d.component]=t._instantiateComponent(d,o);}}else{jQuery.sap.log.error("Invalid plugin configuration. The plugin "+p+" must contain a <component> key",S);}}catch(e){jQuery.sap.log.error("Error while loading bootstrap plugin: "+d.component||"",S);if(o){o.reject(e);}}};this._getFileNameForXhrAuth=function(){return"Component-preload.js";};this._handleXhrAuthentication=function(A,C){var x;if(A&&["true",true,"X"].indexOf(A["sap-ushell-xhr-authentication"])>-1){if(!C){jQuery.sap.log.error(["Illegal state: configuration parameter 'sap-ushell-xhr-authentication-timeout' set, but no component URL specified.","XHR authentication request will not be sent. Please check the target mapping definitions for plug-ins","and the application index."].join(" "),undefined,S);return jQuery.when();}if(A.hasOwnProperty("sap-ushell-xhr-authentication-timeout")){x=parseInt(A["sap-ushell-xhr-authentication-timeout"],10);if(isNaN(x)){jQuery.sap.log.error(["Invalid value for configuration parameter 'sap-ushell-xhr-authentication-timeout' for plug-in component with URL '",C,"': '",A["sap-ushell-xhr-authentication-timeout"],"' is not a number. Timeout will be ignored."].join(""),undefined,S);}else{sap.ushell.Container.setXhrLogonTimeout(C,x);}}return jQuery.ajax(C+"/"+this._getFileNameForXhrAuth());}else{return jQuery.when();}};this._instantiateComponent=function(p,o){var d=new jQuery.Deferred(),C=jQuery.extend(true,{},p),A={ui5ComponentName:C.component,url:C.url};function g(e){return function(E){e=e||"Cannot create UI5 plugin component: (componentId/appdescrId :"+A.ui5ComponentName+")\n"+E+" properties "+JSON.stringify(A)+"\n This indicates a plugin misconfiguration, see e.g. Note 2316443.";E=E||"";jQuery.sap.log.error(e,E.stack,S);if(o){o.reject.apply(this,arguments);}d.reject.apply(this,arguments);};}function l(){sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(A).done(function(L){if(o){o.resolve();}d.resolve.apply(this,arguments);}).fail(g());}C.name=C.component;delete C.component;A.applicationDependencies=C;if(C.config){A.applicationConfiguration=C.config;delete C.config;}A.loadDefaultDependencies=false;this._handleXhrAuthentication(A.applicationConfiguration,C.url).done(l).fail(g("XHR logon for FLP plugin failed"));return d.promise();};this.getSupportedPluginCategories=function(){return jQuery.extend(true,[],s);};this.getRegisteredPlugins=function(){return jQuery.extend(true,{},this._oPluginCollection);};this.registerPlugins=function(p){var t=this,C,o;if(!p){return;}sap.ushell.utils.addTime("PluginManager.registerPlugins");Object.keys(p).sort().forEach(function(d){C=p[d]||{};o=C.config||{};if(C.enabled===false){return;}if(C.enabled===undefined){C.enabled=true;}if(C&&C.hasOwnProperty("module")){jQuery.sap.log.error("Plugin "+d+" cannot get registered, because the module mechanism for plugins is not valid anymore. Plugins need to be defined as SAPUI5 components.",S);jQuery.sap.require(C.module);return;}if(o&&o.hasOwnProperty(a)){if(jQuery.inArray(o[a],s)!==-1){(t._oPluginCollection[o[a]])[d]=jQuery.extend(true,{},p[d]);}else{jQuery.sap.log.warning("Plugin "+d+" will not be inserted into the plugin collection of the PluginManager, because of unsupported category "+o[a],S);}}else{(t._oPluginCollection[b])[d]=jQuery.extend(true,{},p[d]);}});};this.getPluginLoadingPromise=function(p){if(this._oCategoryLoadingProgress.hasOwnProperty(p)){return this._oCategoryLoadingProgress[p].promise();}};this.loadPlugins=function(p){var t=this,d,o,e;sap.ushell.utils.setPerformanceMark("FLP -- PluginManager.startLoadPlugins");sap.ushell.utils.addTime("PluginManager.startLoadPlugins["+p+"]");if(jQuery.inArray(p,s)!==-1){if(t._oCategoryLoadingProgress[p].pluginLoadingTriggered!==undefined){return t._oCategoryLoadingProgress[p].promise();}else{t._oCategoryLoadingProgress[p].pluginLoadingTriggered=true;}if(Object.keys(t._oPluginCollection[p]).length>0){d=[];e=Object.keys(t._oPluginCollection[p]);if(jQuery.sap.getUriParameters().get("sap-ushell-xx-pluginmode")==="discard"&&p==="RendererExtensions"){e=e.filter(function(i){return t._oPluginCollection[p][i].component===c;});}e.forEach(function(f){o=new jQuery.Deferred();d.push(o.promise());t._handlePluginCreation(p,f,o);});jQuery.when.apply(undefined,d).done(function(){sap.ushell.utils.addTime("PluginManager.endLoadPlugins["+p+"]");sap.ushell.utils.setPerformanceMark("FLP -- PluginManager.endLoadPlugins");t._oCategoryLoadingProgress[p].resolve();}).fail(t._oCategoryLoadingProgress[p].reject.bind());}else{t._oCategoryLoadingProgress[p].resolve();}}else{jQuery.sap.log.error("Plugins with category "+p+" cannot be loaded by the PluginManager",S);t._oCategoryLoadingProgress[p].reject("Plugins with category "+p+" cannot be loaded by the PluginManager");}return t._oCategoryLoadingProgress[p].promise();};}
P.hasNoAdapter=true;return P;},true);
sap.ui.predefine('sap/ushell/services/ReferenceResolver',["sap/ushell/User","sap/ui/model/odata/ODataUtils"],function(U,O){"use strict";
function a(){this.getValue=function(r){var d=new jQuery.Deferred();var v;if(r==="User.env.sap-ui-legacy-date-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyDateFormat();}if(r==="User.env.sap-ui-legacy-number-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyNumberFormat();}if(r==="User.env.sap-ui-legacy-time-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyTimeFormat();}if(r==="User.env.sap-language"){v=sap.ushell.Container.getUser().getLanguage();}if(r==="User.env.sap-languagebcp47"){v=sap.ushell.Container.getUser().getLanguageBcp47();}if(r==="User.env.sap-accessibility"){v=(sap.ushell.Container.getUser().getAccessibilityMode())?'X':undefined;}if(r==="User.env.sap-statistics"){v=(sap.ui.getCore().getConfiguration().getStatistics())?"true":undefined;}if(r==="User.env.sap-theme"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}if(r==="User.env.sap-theme-name"){v=sap.ushell.Container.getUser().getTheme();}if(r==="User.env.sap-theme-NWBC"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.NWBC);}d.resolve({"value":v});return d.promise();};}
function R(c,p,C){this._getUserEnvReferenceResolver=function(){if(!this.oUserEnvReferenceResolver){this.oUserEnvReferenceResolver=new a();}return this.oUserEnvReferenceResolver;};this.resolveReferences=function(r){var t=this,d=new jQuery.Deferred(),u,b=[],A=true,D={},o={},e;var g=r.map(function(s){var h;if(s.indexOf("User.env.")===0){h=s;o[h]=1;}if(s.indexOf("UserDefault.")===0){h=t._extractAnyUserDefaultReferenceName(s);D[h]=1;}if(typeof h!=="string"){A=false;jQuery.sap.log.error("'"+s+"' is not a legal reference name","sap.ushell.services.ReferenceResolver");}return{full:s,name:h};});if(!A){return d.reject("One or more references could not be resolved").promise();}Object.keys(D).forEach(function(n){u=u||sap.ushell.Container.getService("UserDefaultParameters");b.push(u.getValue(n));});Object.keys(o).forEach(function(n){e=e||t._getUserEnvReferenceResolver();b.push(e.getValue(n));});jQuery.when.apply(jQuery,b).done(function(){var k={};var i=0,h=arguments;Object.keys(D).forEach(function(n){D[n]=h[i];i=i+1;});Object.keys(o).forEach(function(n){o[n]=h[i];i=i+1;});g.forEach(function(j){var m;if(j.full.indexOf("UserDefault.extended.")===0){m=t.mergeSimpleAndExtended(D[j.name]);if(!jQuery.isEmptyObject(m)){k[j.full]=m;}else{k[j.full]=undefined;}}else if(j.full.indexOf("UserDefault.")===0){k[j.full]=D[j.name].value;}else if(j.full.indexOf("User.env.")===0){k[j.full]=o[j.name].value;}});d.resolve(k);});return d.promise();};this._extractAnyUserDefaultReferenceName=function(r){var P=this.extractExtendedUserDefaultReferenceName(r);if(typeof P==="string"){return P;}return this.extractUserDefaultReferenceName(r);};this.extractExtendedUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.extended.")!==0){return undefined;}return r.replace(/^UserDefault[.]extended[.]/,"");};this.extractUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.")!==0||r.indexOf("UserDefault.extended.")===0){return undefined;}return r.replace(/^UserDefault[.]/,"");};this.mergeSimpleAndExtended=function(v){var m=jQuery.extend(true,{},v.extendedValue);if(typeof v.value==="string"){if(!jQuery.isArray(m.Ranges)){m.Ranges=[];}m.Ranges.push({"Sign":"I","Option":"EQ","Low":v.value,"High":null});}return m;};function f(u){var r=/{([^}%]*%%[^%]+%%)}?/g,b=/([^%]*)%%/,d=/%%([^%]+)%%/,o,e,g,F=[];o=r.exec(u);while(o){e=b.exec(o[1]);g=d.exec(o[1]);F.push({edmType:e[1],name:g[1]});o=r.exec(u);}return F;}this.resolveUserDefaultParameters=function(u){var d=new jQuery.Deferred(),r,s,i=[],o;o=/[^\(\?]*/.exec(u);r=(o===null)?[]:f(o[0]);r.forEach(function(g){i.push(g.name);});o=/[\(\?][^]*/.exec(u);r=(o===null)?[]:f(o[0]);var b=[],e={};r.forEach(function(g){b.push(g.name);e[g.name]=g.edmType;});s=b.filter(function(g){if(/^UserDefault\.(?!extended\.).+/.test(g)){return true;}i.push(g);return false;});if(s.length>0){this.resolveReferences(s).done(function(g){var h=u,D=[];Object.keys(g).forEach(function(j){var k,l=false;while(k!=h){k=h;if(g[j]!==undefined){var F=O.formatValue(g[j],e[j]);h=h.replace("{"+e[j]+"%%"+j+"%%}",window.encodeURIComponent(F));}else{l=true;h=h.replace("{"+e[j]+"%%"+j+"%%}","");}}if(l){D.push(j);}});d.resolve({url:h,defaultsWithoutValue:D,ignoredReferences:i});});}else{d.resolve({url:u,defaultsWithoutValue:[],ignoredReferences:i});}return d.promise();};}
R.hasNoAdapter=true;return R;},true);
sap.ui.predefine('sap/ushell/services/Search',["jquery.sap.global",'sap/ushell/renderers/fiori2/search/appsearch/AppSearch'],function($,A){"use strict";
function S(a,c){this.init.apply(this,arguments);}
S.prototype={init:function(a,c,p,s){this.oAdapter=a;this.oContainerInterface=c;this.oLpdService=sap.ushell.Container.getService("LaunchPage");var b={optimizedAppSearch:false};if(s&&s.config&&s.config.optimizedAppSearch!==undefined){b.optimizedAppSearch=s.config.optimizedAppSearch;}this.appSearch=new A(b);},isSearchAvailable:function(){return this.oAdapter.isSearchAvailable();},getSina:function(){return this.oAdapter.getSina();},prefetch:function(){return this.appSearch.prefetch();},queryApplications:function(q){q.top=q.top||10;q.skip=q.skip||0;return this.appSearch.search(q).then(function(s){return{totalResults:s.totalCount,searchTerm:q.searchTerm,getElements:function(){return s.tiles;}};}.bind(this));}};S.hasNoAdapter=false;return S;},true);
sap.ui.predefine('sap/ushell/services/ShellNavigation',["sap/ushell/services/ShellNavigationHashChanger"],function(S){"use strict";
function a(c,p,s){function r(){sap.ui.require(['sap/m/MessageBox'],function(M){M.show("Due to a configuration change on the server,\nclient and server are out of sync.\n We strongly recommend to reload the page soon.\nReload page now?",{icon:sap.m.MessageBox.Icon.ERROR,title:"Client out of sync with server.",actions:[sap.m.MessageBox.Action.YES,sap.m.MessageBox.Action.NO],onClose:function(A){if(A===sap.m.MessageBox.Action.YES){window.setTimeout(function(){window.location.reload();},0);}}});});}var o=s&&s.config;this.hashChanger=new S(o);this._navigationFilterForForwardingToRegisteredRouters=function(h){var m=this._aRouters.some(function(R){return R.match(h);});if(m){var A=sap.ushell.Container.getService("AppLifeCycle"),C=A.getCurrentApplication(),i=C&&C.componentInstance&&!C.homePage,b;if(i){b=C.componentInstance.getRouter();if(b){b.stop();}}return this.NavigationFilterStatus.Keep;}else{return this.NavigationFilterStatus.Continue;}};this.isInitialNavigation=function(){return this.hashChanger.isInitialNavigation();};this.hrefForExternal=function(A,v,C,b){return this.hashChanger.hrefForExternal(A,v,C,b);};this.hrefForAppSpecificHash=function(A){return this.hashChanger.hrefForAppSpecificHash(A);};this.compactParams=function(P,R,C,t){return this.hashChanger.compactParams(P,R,C,t);};this.toExternal=function(A,C,w){this.hashChanger.toExternal(A,C,w);};this.toAppHash=function(A,w){this.hashChanger.toAppHash(A,w);};this.init=function(f){hasher.prependHash="";sap.ui.core.routing.HashChanger.replaceHashChanger(this.hashChanger);var b=sap.ui.getCore().getEventBus();b.subscribe("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",r);this.hashChanger.initShellNavigation(f);this._enableHistoryEntryReplacedDetection();return this;};this._enableHistoryEntryReplacedDetection=function(){this._lastHashChangeMode=null;var O=hasher.setHash;var f=hasher.replaceHash;hasher.setHash=function(){this._lastHashChangeMode="setHash";return O.apply(hasher,arguments);}.bind(this);hasher.replaceHash=function(){this._lastHashChangeMode="replaceHash";return f.apply(hasher,arguments);}.bind(this);};this.wasHistoryEntryReplaced=function(){return this._lastHashChangeMode==="replaceHash";};this.resetHistoryEntryReplaced=function(){this._lastHashChangeMode=null;};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(f){this.hashChanger.registerNavigationFilter(f);};this._aRouters=[];this.registerExtraRouter=function(R){this._aRouters.push(R);};this.unregisterNavigationFilter=function(f){this.hashChanger.unregisterNavigationFilter(f);};this.registerNavigationFilter(this._navigationFilterForForwardingToRegisteredRouters.bind(this));}
a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/ShellNavigationHashChanger',["sap/ui/core/routing/HashChanger","sap/ui/thirdparty/hasher"],function(H,h){"use strict";
function c(){var b=window.history.length;var m={onHashChanged:function(){if(window.history.length!==b){m.onHashChanged=function(){};m.isInitialNavigation=function(){return false;};}},isInitialNavigation:function(){return true;}};return m;}
var O={HASH_SET:{name:"hashSet",historyEntry:true},HASH_REPLACED:{name:"hashReplaced",historyEntry:false},SHELL_HASH_CHANGED:{name:"shellHashChanged",historyEntry:true,usedByUi5HistoryDetection:true},SHELL_HASH_PARAMETER_CHANGED:{name:"shellHashParameterChanged",historyEntry:false},HASH_CHANGED:{name:"hashChanged",historyEntry:false,usedByUi5HistoryDetection:true}};
var S=H.extend("sap.ushell.services.ShellNavigatonHashChanger",{constructor:function(C){var u;this.oServiceConfig=C;if(jQuery.sap.getUriParameters().get("sap-ushell-reload")){if(jQuery.sap.getUriParameters().get("sap-ushell-reload")==="X"||jQuery.sap.getUriParameters().get("sap-ushell-reload")==="true"){u=true;}else{u=false;}}if(u!==undefined){if(typeof this.oServiceConfig!=="object"){this.oServiceConfig={};}this.oServiceConfig.reload=u;}H.apply(this);this._initializedByShellNav=false;this.oURLShortening=sap.ushell.Container.getService("URLShortening");this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon",Keep:"Keep"};}});
S.prototype.privgetCurrentShellHash=function(){var r=this.privsplitHash(h.getHash());return{hash:"#"+((r&&r.shellPart)?r.shellPart:"")};};
S.prototype.privconstructHash=function(A){var o=this.privgetCurrentShellHash();o.hash+=A;return o;};
S.prototype.privconstructShellHash=function(s){return sap.ushell.Container.getService("URLParsing").constructShellHash(s);};
S.prototype.privsplitHash=function(s){var o,b,A;if(s===undefined||s===null||s===""){return{shellPart:null,appSpecificRoute:null,intent:null,params:null};}o=sap.ushell.Container.getService("URLParsing").parseShellHash(s);if(o===undefined||o===null){return null;}b=(o.params&&!jQuery.isEmptyObject(o.params))?o.params:null;A=o.appSpecificRoute;o.appSpecificRoute=undefined;return{shellPart:this.privstripLeadingHash(this.privconstructShellHash(o))||null,appSpecificRoute:A||null,intent:(o.semanticObject&&o.action&&(o.semanticObject+"-"+o.action+(o.contextRaw||"")))||null,params:b};};
S.prototype.privsetHash=function(f,A,w){h.prependHash="";f=this.privstripLeadingHash(f);A=A||"";if(w===undefined){w=true;}if(w){this.fireEvent("hashSet",{sHash:A});h.setHash(f);}else{this.fireEvent("hashReplaced",{sHash:A});h.replaceHash(f);}};
S.prototype.privstripLeadingHash=function(s){if(s[0]==='#'){return s.substring(1);}return s;};
S.prototype.registerNavigationFilter=function(f){if(typeof f!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters.push(f);};
S.prototype.unregisterNavigationFilter=function(f){if(typeof f!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters=this.aNavigationFilters.filter(function(r){return r!==f;});};
function a(C,t){this.oAppState=undefined;this.oPromise=(new jQuery.Deferred()).resolve();this.getNextKey=function(){this.oAppState=sap.ushell.Container.getService("AppState").createEmptyAppState(C,t);return this.oAppState.getKey();};this.store=function(v){var n;this.oAppState.setData(v);n=this.oAppState.save();this.oPromise=jQuery.when(this.oPromise,n);};this.getPromise=function(){return this.oPromise;};}
S.prototype.compactParams=function(p,r,C,t){var u=sap.ushell.Container.getService("URLParsing"),s,o,R,P,d=new jQuery.Deferred(),b=u.constructShellHash({"target":{"semanticObject":"SO","action":"action"},"params":p},s);if(p===undefined||Object.keys(p).length===0){return d.resolve(p).promise();}s=new a(C,t);R=this.oURLShortening.compactHash(b,r,s);o=u.parseParameters(R.hash.match(/\?.*/)[0]);P=s.getPromise();P.done(function(){d.resolve(o);}).fail(function(m){d.reject(m);});return d;};
S.prototype.hrefForExternal=function(A,v,C,b){var r=this.hrefForExternalNoEnc(A,v,C,b);function e(R,v){if(v===true){R.hash=encodeURI(R.hash);}else{R=encodeURI(R);}return R;}if(!b){return e(r,v);}var d=new jQuery.Deferred();r.done(function(R){d.resolve(e(R,v));}).fail(d.reject.bind(d));return d;};
S.prototype.hrefForExternalNoEnc=function(A,v,C,b){var t,p,d,s=new a(C),r;t=this.privhrefForExternalNoEnc(A,s);if(v===true){r={hash:t.hash,params:t.params,skippedParams:t.skippedParams};}else{r=t.hash;}if(!b){return r;}p=s.getPromise();d=new jQuery.Deferred();p.done(function(){d.resolve(r);}).fail(function(m){d.reject(m);});return d;};
S.prototype.privhrefForExternalNoEnc=function(A,s){var r;if(A===undefined){return this.privgetCurrentShellHash();}if(A&&A.target&&(typeof A.target.semanticObject==="string"||typeof A.target.shellHash==="string")){r="#"+this.privconstructShellHash(A);return this.oURLShortening.compactHash(r,undefined,s);}return this.privgetCurrentShellHash();};
S.prototype.privgetAppHash=function(A){var s,o;if(A&&A.target&&(typeof A.target.shellHash==="string")){o=sap.ushell.Container.getService("URLParsing").parseShellHash(A.target.shellHash);s=o&&o.appSpecificRoute;s=s&&s.substring(2);}return s;};
S.prototype.hrefForAppSpecificHash=function(A){return encodeURI(this.privconstructHash(this.privappHashPrefix+A).hash);};
S.prototype.toExternal=function(A,C,w){var s,o=new a(C),b;s=this.privhrefForExternalNoEnc(A,o).hash;b=this.privgetAppHash(A);this.privsetHash(s,b,w);};
S.prototype.toAppHash=function(A,w){var s=this.privconstructHash(this.privappHashPrefix+A).hash;this.privsetHash(s,A,w);};
S.prototype.initShellNavigation=function(s){this._oInitialNavigationManager=c();if(this._initializedByShellNav){jQuery.sap.log.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false;}this.privfnShellCallback=s;h.changed.add(this.treatHashChanged,this);if(!h.isActive()){h.initialized.addOnce(this.treatHashChanged,this);h.init();}else{this.treatHashChanged(h.getHash());}this._initializedByShellNav=true;return true;};
S.prototype.init=function(){if(this._initialized){jQuery.sap.log.info("init already called on this ShellNavigationHashChanger instance.");return false;}var n=this.privsplitHash(h.getHash()),A=n&&(n.appSpecificRoute||"  ").substring(2);this.fireEvent("hashChanged",{newHash:A,fullHash:n?n.shellPart+n.appSpecificRoute:""});this._initialized=true;return true;};
S.prototype.treatHashChanged=function(n,o){if(this.inAbandonFlow){return;}this._oInitialNavigationManager.onHashChanged();var A,s,N,b,d,f,g,j,E,i,F,k,l,m;n=this.oURLShortening.expandHash(n);o=this.oURLShortening.expandHash(o);N=this.privsplitHash(n);b=this.privsplitHash(o);if(!N){E=new Error("Illegal new hash - cannot be parsed: '"+n+"'");this.fireEvent("shellHashChanged",{newShellHash:n,newAppSpecificRoute:null,oldShellHash:(b?b.shellPart:o),error:E});this.privfnShellCallback(n,null,(b?b.shellPart:o),(b?b.appSpecificRoute:null),E);return;}d=N.intent;if(!b){b={shellPart:o,appSpecificRoute:null};}else{f=b.intent;}for(i=0;i<this.aNavigationFilters.length;i++){try{F=this.aNavigationFilters[i].call(undefined,n,o);k=F;if(typeof F!=="string"){k=F.status;l=F.hash;}if(k===this.NavigationFilterStatus.Custom){if(l&&l.length>0){this.inAbandonFlow=true;h.replaceHash(l);this.inAbandonFlow=false;}return;}if(k===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;h.replaceHash(o);this.inAbandonFlow=false;return;}if(k===this.NavigationFilterStatus.Keep){m=true;}}catch(e){jQuery.sap.log.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigation");}}if(m){this.fireEvent("hashChanged",{newHash:n,oldHash:o,fullHash:n});return;}var p=d===f&&o!==undefined;if(p&&!this._parametersChanged(N.params,b.params)){A=(N.appSpecificRoute||"  ").substring(2);s=(b.appSpecificRoute||"  ").substring(2);jQuery.sap.log.info("Inner App Hash changed from '"+s+"' to '"+A+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent("hashChanged",{newHash:A,oldHash:s,fullHash:n});return;}if(p&&this.hasListeners("shellHashParameterChanged")){g=sap.ushell.Container.getService("URLParsing").paramsToString(N.params);j=sap.ushell.Container.getService("URLParsing").paramsToString(b.params);jQuery.sap.log.info("Shell hash parameters changed from '"+j+"' to '"+g+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent("shellHashParameterChanged",{oNewParameters:N.params,oOldParameters:b.params});return;}if(o!==undefined&&this.oServiceConfig&&this.oServiceConfig.reload){window.location.hash='#'+encodeURI(n);window.location.reload();}jQuery.sap.log.info("Outer shell hash changed from '"+o+"' to '"+n+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent("shellHashChanged",{newShellHash:N.shellPart,newAppSpecificRoute:N.appSpecificRoute,oldShellHash:b.shellPart,oldAppSpecificRoute:b.appSpecificRoute});this.privfnShellCallback(N.shellPart,N.appSpecificRoute,b.shellPart,b.appSpecificRoute);};
S.prototype.isInitialNavigation=function(){return this._oInitialNavigationManager&&this._oInitialNavigationManager.isInitialNavigation();};
S.prototype._parametersChanged=function(n,o){return!jQuery.sap.equal(n,o);};
S.prototype.setHash=function(s){this.toAppHash(s,true);};
S.prototype.replaceHash=function(s){this.toAppHash(s,false);};
S.prototype.getHash=function(){return this.getAppHash();};
S.prototype.getAppHash=function(){var n=this.privsplitHash(h.getHash()),A=n&&(n.appSpecificRoute||"  ").substring(2);return A;};
S.prototype.isInnerAppNavigation=function(n,o){var N=this.privsplitHash(n)||{};var b=this.privsplitHash(o)||{};var d=this._haveSameIntent(n,o);var e=!this._parametersChanged(N.params,b.params);return d&&e;};
S.prototype._haveSameIntent=function(n,o){var N=this.privsplitHash(n)||{};var b=this.privsplitHash(o)||{};var s=N.intent;var d=b.intent;return s===d&&o!==undefined;};
S.prototype.destroy=function(){h.changed.remove(this.treatHashChanged,this);H.prototype.destroy.apply(this,arguments);};
S.prototype._getAllEvents=function(){return Object.keys(O).map(function(e){return O[e];});};
S.prototype.getReplaceHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===false;}).map(function(e){return e.name;});};
S.prototype.getSetHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===true;}).map(function(e){return e.name;});};
return S;},true);
sap.ui.predefine('sap/ushell/services/SupportTicket',["sap/ushell/Config"],function(C){"use strict";
function S(a,c,p,s){this.createTicket=function(o){return a.createTicket(o);};this.isEnabled=function(){return C.last("/core/extension/SupportTicket");};}
S.hasNoAdapter=false;return S;},true);
sap.ui.predefine('sap/ushell/services/URLParsing',["sap/ui/thirdparty/URI"],function(U){"use strict";
function b(){var r=/^(([A-Za-z0-9_\/]+)-([A-Za-z0-9_\/\-]+)(~([A-Z0-9a-z=+\/]+))?)?([?]([^&]|(&[^\/]))*&?)?$/;this.getShellHash=function(s){var a=/[^#]*#(([^&]|&[^\/])*)(&\/.*)?/,m=a.exec(s);if(m){return m[1];}return undefined;};this.getHash=function(u){var a=/#(.*)/,m=a.exec(u);if(m){return m[1];}return undefined;};this.isIntentUrl=function(u){var a=/^#/,t,l,T,L,h,p;if(typeof u!=="string"){return false;}if(!a.test(u)){t=(new U(u)).normalize();T=t.protocol()+"://"+t.host()+t.pathname();l=(new U(window.location.href)).normalize();L=l.protocol()+"://"+l.host()+l.pathname();if(T!==L){return false;}}h=this.getHash(u);if(!h){return false;}p=this.parseShellHash(h);if(p&&p.semanticObject&&p.action){return true;}return false;};this.parseParameters=function(p){if(!p){return{};}return jQuery.sap.getUriParameters(p).mParams||{};};this.paramsToString=function(p){return this.privparamsToString(p,"&","=");};this.privparamsToString=function(p,d,A){var f,a,k,i,l,s="";f="";a=null;l=[];for(a in p){if(p.hasOwnProperty(a)){l.push(a);}}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(p[a])){for(i=0;i<p[a].length;i=i+1){s+=f+encodeURIComponent(a)+A+encodeURIComponent(p[a][i]);f=d;}}else{s+=f+encodeURIComponent(a)+A+encodeURIComponent(p[a]);f=d;}}return s;};this.parseShellHash=function(h){var a=r,s,S,A,C,p,m,d;if(!h){return undefined;}s=this.splitHash(h);m=a.exec(s.shellPart);if(m){S=m[2];A=m[3];C=m[5];p=m[6];d=this.parseParameters(p);return{semanticObject:S,action:A,contextRaw:C,params:d,appSpecificRoute:s.appSpecificRoute};}if(s.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:s.appSpecificRoute};}return undefined;};this.privstripLeadingHash=function(h){if(h[0]==='#'){return h.substring(1);}return h;};this.splitHash=function(h){var a=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/,m,s,A;if(h===undefined||h===null||h===""){return{};}m=a.exec(h);s=m[1];if(s!==""&&!r.test(s)){return{};}A=m[2];if(s||A){return{shellPart:s,appSpecificRoute:A};}return{};};function c(u,a){if(a){return u+a;}return u;}this.constructShellHash=function(s){var d,p,e,i=null,k,l=[],f="?",a=null;if(!s){return"";}if(!s.target){s.target={};s.target.semanticObject=s.semanticObject;s.target.action=s.action;s.target.contextRaw=s.contextRaw;}if(s.target.shellHash||s.target.shellHash===""){e=this.privstripLeadingHash(s.target.shellHash);return c(e,s.appSpecificRoute);}if(s.target.semanticObject&&s.target.action){d=s.target.semanticObject+"-"+s.target.action.replace(/[?].*/,"");}else{return c("",s.appSpecificRoute);}if(s.target.contextRaw){d+="~"+s.target.contextRaw;}f="?";a=null;l=[];for(a in s.params){if(s.params.hasOwnProperty(a)){l.push(a);}}p=(s.params&&JSON.parse(JSON.stringify(s.params)))||{};if(s.appStateKey){l.push("sap-xapp-state");p["sap-xapp-state"]=s.appStateKey;}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(p[a])){if(p[a].length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<p[a].length;i=i+1){d+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a][i]);f="&";}}else{d+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a]);f="&";}}return c(d,s.appSpecificRoute);};this.addSystemToServiceUrl=function(s,C){var R,o,S=C;if(!s||s.indexOf('/')!==0||s.indexOf('//')===0){throw new sap.ushell.utils.Error("Invalid URL: "+s,"sap.ushell.services.URLParsing");}if(C instanceof sap.ui.core.Component){o=(typeof C.getComponentData==="function")&&C.getComponentData();S=o&&o.startupParameters&&o.startupParameters["sap-system"]&&o.startupParameters["sap-system"][0];}R=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!S&&!C&&R&&R.url){S=jQuery.sap.getUriParameters(R.url).get("sap-system");}if(/^[^?]*(;mo([\/;?]|$))/.test(s)){s=s;}else if(/^[^?]*(;o=([\/;?]|$))/.test(s)){s=s.replace(/;o=([\/;?]|$)/,(S?";o="+S:"")+"$1");}else if(!/^[^?]*;o=/.test(s)&&S){s=s.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+S+"$2");}sap.ushell.Container.addRemoteSystemForServiceUrl(s);return s;};}
;b.hasNoAdapter=true;return b;},true);
sap.ui.predefine('sap/ushell/services/URLShortening',[],function(){"use strict";
function U(){var t=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(v,s){var V,k;if(typeof v!=="string"||/^[A-Z0-9]{40}$/.test(v)){return v;}try{V=JSON.parse(v);}catch(e){jQuery.sap.log.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return v;}k=s&&s.getNextKey();this._storeValue(k,V,s);return k;};this.compactHash=function(u,r,s){var S,k,R,p,o,a,b=[this.ABBREV_PARAM_NAME,"sap-system","sap-xapp-state"];if(r){r.forEach(function(A){b.push(A);});}o=sap.ushell.Container.getService("URLParsing");S=o.parseShellHash(u);if(!S){jQuery.sap.log.error("the URL "+u+' is not compliant. It may break the product and cause unwanted navigation behavior.');return{hash:u};}p='';if(u.charAt(0)==='#'){p='#';}var v=S&&S.params&&S.params["sap-xapp-state"]&&S.params["sap-xapp-state"][0];if(v){S.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(v,s)];u=p+o.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:S.params,appSpecificRoute:S.appSpecificRoute});}if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}if(S&&((S.params&&S.params[t.ABBREV_PARAM_NAME]))){return{hash:u};}k=s&&s.getNextKey();R=this._splitParameters(S.params,b,k);if(!R.key){return{hash:u};}a=o.paramsToString(R.tailParams);this._storeValue(R.key,a,s);return{hash:p+o.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:R.headParams,appSpecificRoute:S.appSpecificRoute}),params:R.headParams,skippedParams:R.tailParams};};this.checkHashLength=function(u){var s,r,p,o;if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}o=sap.ushell.Container.getService("URLParsing");s=o.parseShellHash(u);p='';if(u.charAt(0)==='#'){p='#';}r=this._splitParameters(s.params,[],"DummyKey");if(r.key){jQuery.sap.log.error("Application startup parameter length exceeds "+t.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete r.headParams[this.ABBREV_PARAM_NAME];return{hash:p+o.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:r.headParams,appSpecificRoute:s.appSpecificRoute}),params:r.headParams,skippedParams:r.tailParams};}jQuery.sap.log.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:u};};this._findIndex=function(a,T){var r=a.indexOf(T);if(r>=0){return r;}r=-1;a.every(function(A,i){if(A.length>0&&A[A.length-1]==="*"&&A.substring(0,A.length-1)===T.substring(0,A.length-1)){r=i;return false;}return true;});return r;};this._cmpByList=function(a,A,b){var i,c;a=a||[];if(A===b){return 0;}i=this._findIndex(a,A);c=this._findIndex(a,b);if(i>=0&&c>=0){if((i-c)!==0){return i-c;}if(A<b){return-1;}if(A>b){return+1;}return 0;}if(i>=0){return-1;}if(c>=0){return+1;}if(A<b){return-1;}return+1;};this._sortByPriority=function(l,r){return l.sort(this._cmpByList.bind(this,r));};this._splitParameters=function(p,r,K){var a,i,k,h={},b={},c=false,o,d,e=0,f,l=[];if(!K||typeof K!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!");}for(a in p){if(Object.prototype.hasOwnProperty.call(p,a)){l.push(a);}}l.sort();l=this._sortByPriority(l,r);for(k=0;k<l.length;k=k+1){a=l[k];o=p[a];if(o.length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<o.length;i=i+1){d=p[a][i];f=a.length+d.length;if(f+e>this.URL_PARAMS_LENGTH_LIMIT){if(b[a]){b[a].push(d);}else{b[a]=[d];}c=true;}else if(h[a]){h[a].push(d);}else{h[a]=[d];}e=e+f+1;}}if(c){h[this.ABBREV_PARAM_NAME]=[K];}return{key:K,tailParams:b,headParams:h};};this.expandHash=function(u){var r=function(k){return t._retrieveValue(k);};return this.expandParamGivenRetrievalFunction(u,this.ABBREV_PARAM_NAME,r);};this.expandParamGivenRetrievalFunction=function(u,p,r){var s,v,k,a,b;if(typeof u!=="string"){return u;}s=sap.ushell.Container.getService("URLParsing").parseShellHash(u);k=s&&s.params&&s.params[p]&&s.params[p][0];if(!k){return u;}a='';if(u.charAt(0)==='#'){a='#';}v=r(k);if(!v){return u;}b=this._blendParameters(s.params,p,v);return a+sap.ushell.Container.getService("URLParsing").constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:b,appSpecificRoute:s.appSpecificRoute});};this._retrieveValue=function(k){return undefined;};this._storeValue=function(k,v,s){if(s&&typeof s.store==="function"){s.store(v);}};this._blendParameters=function(p,P,v){var n=sap.ushell.Container.getService("URLParsing").parseParameters("?"+v),a;delete p[P];for(a in n){if(Object.prototype.hasOwnProperty.call(n,a)){if(p[a]){p[a]=p[a].concat(n[a]);}else{p[a]=n[a];}}}return p;};}
;U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/Ui5ComponentHandle',[],function(){"use strict";var U=function(c){this._oComponent=c;};
U.onBeforeApplicationInstanceCreated=function(){sap.ui.require(["sap/ushell/Fiori20AdapterTest"],function(){});};
U.prototype.getInstance=function(){return this._oComponent;};
U.prototype.getMetadata=function(){return this._oComponent.getMetadata();};
return U;});
sap.ui.predefine('sap/ushell/services/Ui5ComponentLoader',["sap/ushell/utils","sap/ushell/services/Ui5ComponentHandle","sap/ushell/services/_Ui5ComponentLoader/utils","sap/ushell/EventHub","sap/ui/thirdparty/jquery"],function(u,U,o,e,q){"use strict";
function a(c,p,C){this._oConfig=(C&&C.config)||{};this.createComponent=function(A,P,w){var b=A||{},l=o.shouldLoadCoreExt(b),d=o.shouldUseAmendedLoading(this._oConfig),L=o.shouldLoadDefaultDependencies(b,this._oConfig,d),n=u.getParameterValueBoolean("sap-ushell-nocb"),f=b.applicationDependencies||{};o.logAnyApplicationDependenciesMessages(f.name,f.messages);if(!b.ui5ComponentName){return new q.Deferred().resolve(A).promise();}delete b.loadCoreExt;delete b.loadDefaultDependencies;var g=o.createComponentData(b.componentData||{},b.url,b.applicationConfiguration,b.reservedParameters);if(b.getExtensions){g.getExtensions=b.getExtensions;delete b.getExtensions;}var s=o.constructAppComponentId(P||{}),h=l&&d,i=o.prepareBundle(this._oConfig.coreResourcesComplement),j=o.createComponentProperties(h,L,n,w,b.applicationDependencies||{},b.ui5ComponentName,b.url,s,i);U.onBeforeApplicationInstanceCreated.call(null,j);var D=new q.Deferred();o.createUi5Component(j,g).then(function(k){var m=new U(k);b.componentHandle=m;var r=l;if(r){b.coreResourcesFullyLoaded=r;e.emit("CoreResourcesComplementLoaded",{status:"success"});}D.resolve(b);},function(E){var k=JSON.stringify(j,null,4);o.logInstantiateComponentError(j.name,E+"",E.status,E.stack,k);D.reject(E);});return D.promise();};this.loadCoreResourcesComplement=function(){if(this.loadCoreResourcesComplementPromise){return this.loadCoreResourcesComplementPromise.promise();}var b=o.prepareBundle(this._oConfig.coreResourcesComplement),d=new q.Deferred();o.loadBundle(b).done(function(){e.emit("CoreResourcesComplementLoaded",{status:"success"});this.loadCoreResourcesComplementPromise=d;d.resolve();}.bind(this)).fail(function(){e.emit("CoreResourcesComplementLoaded",{status:"failed"});d.reject();});return d.promise();};e.once("loadCoreResourcesComplement").do(function(){this.loadCoreResourcesComplement();}.bind(this));}
a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/UsageAnalytics',["sap/m/Text","sap/m/Dialog","sap/m/Button"],function(T,D,B){"use strict";
function U(c,p,S){var o=(S&&S.config)||{},a=[],A=false,i=false,l,I;window.oCustomProperties={};this.setLegalText=function(t){l=t;if(I){this.init(I.usageAnalyticsTitle,I.iAgree,I.iDisagree,I.remindMeLater);}};this.getLegalText=function(){return l;};this.setTrackUsageAnalytics=function(s){var d=jQuery.Deferred();var u;var b=s;var f=sap.ushell.Container.getUser().getTrackUsageAnalytics();try{var g=sap.ushell.Container.getService("UserInfo");if(f!==b){sap.ushell.Container.getUser().setTrackUsageAnalytics(b);u=g.updateUserPreferences(sap.ushell.Container.getUser());u.done(function(){sap.ushell.Container.getUser().resetChangedProperties();if(!i&&b){this.start();}else if(i&&b===false){window.swa.disable();}else if(i&&b){window.swa.enable();}d.resolve();}.bind(this));u.fail(function(E){sap.ushell.Container.getUser().setTrackUsageAnalytics(f);sap.ushell.Container.getUser().resetChangedProperties();jQuery.sap.log.error(E);d.reject(E);});}else{d.resolve();}}catch(e){jQuery.sap.log.error("Getting UserInfo service failed.");d.reject("Getting UserInfo service failed.");}return d.promise();};this.showLegalPopup=function(){setTimeout(function(){var d;d=new D('agreementMessageBox',{title:I.usageAnalyticsTitle,type:'Message',stretch:sap.ui.Device.system.phone,buttons:[new B('remindMeLaterButton',{text:I.remindMeLater,press:function(){d.close();}}),new B('iAgreeButton',{text:I.iAgree,type:'Accept',press:function(){sap.ushell.Container.getService("UsageAnalytics").setTrackUsageAnalytics(true);d.close();}}),new B('iDisagreeButton',{text:I.iDisagree,press:function(){sap.ushell.Container.getService("UsageAnalytics").setTrackUsageAnalytics(false);d.close();}})],afterClose:function(){d.destroy();},content:[new T({text:l})]}).addStyleClass('sapUshellUsageAnalyticsPopUp');d.open();},100);};this.systemEnabled=function(){if(!o.enabled||!o.pubToken||(this.isSetUsageAnalyticsPermitted()&&!l)){if(!o.pubToken){jQuery.sap.log.warning("No valid pubToken was found in the service configuration");}if(!l){jQuery.sap.log.warning("No Legal text message found.");}return false;}else{return true;}};this.userEnabled=function(){var u=sap.ushell.Container.getUser();if(!this.systemEnabled()){return false;}return u.getTrackUsageAnalytics();};this.start=function(){sap.ui.getCore().getEventBus().publish("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted");this._initUsageAnalyticsLogging();i=true;window.swa.custom2={ref:sap.ui.getCore().getConfiguration().getLanguage()};};this.init=function(u,s,b,r){I={usageAnalyticsTitle:u,iAgree:s,iDisagree:b,remindMeLater:r};if(this.systemEnabled()&&!i){if(!this.isSetUsageAnalyticsPermitted()){this.start();}else if(l){if(this.userEnabled()===true){this.start();}else if(this.userEnabled()===null||this.userEnabled()===undefined){this.showLegalPopup();}}}};this.setCustomAttributes=function(C){var b,P="attribute",s,d="custom",e,f,F="customFunction";if(!this.userEnabled()&&this.isSetUsageAnalyticsPermitted()){return;}for(b=1;b<6;b++){e=d.concat(b+4);if(window.swa[e]!==undefined){continue;}s=P+b;if(C[s]===undefined){continue;}if(jQuery.isFunction(C[s])){f=F+b;window[f]=C[s];window.swa[e]={ref:f};}else{window.swa[e]={ref:C[s]};}}};this.logCustomEvent=function(e,b,d){if(!this.userEnabled()&&this.isSetUsageAnalyticsPermitted()){return;}if(!this._isAnalyticsScriptLoaded()){this._addDelayedEvent(e,b,d);return;}if(d){d.unshift(b);d.unshift(e);window.swa.trackCustomEvent.apply(window.swa.trackCustomEvent,d);}else{window.swa.trackCustomEvent(e,b);}};window._trackingScriptsLoaded=function(){var b,t;A=true;for(b=0;b<a.length;b++){t=a[b];this.logCustomEvent(t.eventType,t.customEventValue,t.aAdditionalValues);}a=null;};this._initUsageAnalyticsLogging=function(){if(window.swa===undefined){window.swa={};}window.swa.pubToken=o.pubToken;window.swa.baseUrl=o.baseUrl;window.swa.bannerEnabled=false;window.swa.loggingEnabled=true;window.swa.visitorCookieTimeout=63113852;window.swa.dntLevel=1;window.swa.trackerReadyCallback=window._trackingScriptsLoaded.bind(this);window.swa.clicksEnabled=(o.logClickEvents===false?false:true);window.swa.pageLoadEnabled=(o.logPageLoadEvents===false?false:true);this._handlingTrackingScripts();};this._handlingTrackingScripts=function(){var d=document,g=d.createElement('script'),s=d.getElementsByTagName('script')[0];g.onerror=function(){jQuery.sap.log.warning("SWA scripts not loaded!");};g.type='text/javascript';g.defer=true;g.async=true;g.src=window.swa.baseUrl+'js/privacy.js';s.parentNode.insertBefore(g,s);};this._isAnalyticsScriptLoaded=function(){return A;};this.isSetUsageAnalyticsPermitted=function(){if(o.setUsageAnalyticsPermitted===undefined){return true;}return o.setUsageAnalyticsPermitted;};this._addDelayedEvent=function(e,b,d){var f={eventType:e,customEventValue:b,aAdditionalValues:d};a.push(f);};}
;U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/UserDefaultParameterPersistence',[],function(){"use strict";var v=["value","extendedValue","noEdit","alwaysAskPlugin","_shellData","pluginData"];
function U(a,c,p,C){this._oAdapter=a;this._oData={};}
;
U.prototype._cleanseValue=function(V){var r=jQuery.extend(true,{},V),a;for(a in r){if(r.hasOwnProperty(a)){if(v.indexOf(a)<0){delete r[a];}}}return r;};
U.prototype._testValue=function(V){return true;};
U.prototype.loadParameterValue=function(p){var d=new jQuery.Deferred(),t=this;if(this._oData[p]){d.resolve(this._oData[p]);}else{this._oAdapter.loadParameterValue(p).done(function(V){var c=t._cleanseValue(V);if(t._testValue(c)){d.resolve(c);}else{jQuery.sap.log.error("flawed value returned from persistence");d.reject("flawed value returned from persistence");}}).fail(d.reject.bind(this));}return d.promise();};
U.prototype.saveParameterValue=function(p,V){var d,c;if(!V){return this.deleteParameter(p);}c=this._cleanseValue(V);d=new jQuery.Deferred();if(!this._testValue(c)||(V&&V.noStore===true)){return d.resolve().promise();}this._oData[p]=c;return this._oAdapter.saveParameterValue(p,c);};
U.prototype.deleteParameter=function(p){delete this._oData[p];return this._oAdapter.deleteParameter(p);};
U.prototype.getStoredParameterNames=function(){var d=new jQuery.Deferred();this._oAdapter.getStoredParameterNames().done(function(r){r.sort();d.resolve(r);}).fail(d.reject.bind(d));return d.promise();};
U.hasNoAdapter=false;return U;},true);
sap.ui.predefine('sap/ushell/services/UserDefaultParameters',['sap/ui/base/EventProvider','sap/ushell/utils'],function(E,u){"use strict";var e="valueStored";var s=["value","noEdit","noStore","extendedValue","alwaysAskPlugin"];
function U(a,c,p,C){this._aPlugins=[];this._oUserDefaultParametersNames=undefined;this._oWasParameterPersisted={};var t=this,S=new E();function g(P){var v=(typeof P.getComponentData==="function"&&P.getComponentData()&&P.getComponentData().config&&P.getComponentData().config["sap-priority"])||0;if(typeof v!=="number"||isNaN(v)){return 0;}return v;}this._insertPluginOrdered=function(P,o){var d=g(o),i,f;for(i=0;(i<P.length)&&o;++i){f=g(P[i]);if(o&&(d>f)){P.splice(i,0,o);o=undefined;}}if(o){P.push(o);}return P;};this.registerPlugin=function(P){this._aPlugins=this._insertPluginOrdered(this._aPlugins,P);};function b(i,P,d,v,D){if(i>=P.length){D.resolve(v);return;}if(typeof P[i].getUserDefault!=="function"){b(i+1,P,d,v,D);return;}P[i].getUserDefault(d,v).done(function(n){if(n){b(i+1,P,d,n,D);}else{b(i+1,P,d,v,D);}}).fail(function(){jQuery.sap.log.error("invocation of getUserDefault(\""+d+"\") for plugin "+t._getComponentNameOfPlugin(P[i])+" rejected.",null,"sap.ushell.services.UserDefaultParameters");b(i+1,P,d,v,D);});return;}this._getStoreDate=function(){return new Date().toString();};this._storeValue=function(P,v,f){var t=this;var r=new jQuery.Deferred();var d=new jQuery.Deferred();if(f&&v.extendedValue){sap.ushell.Container.getService("ClientSideTargetResolution").getUserDefaultParameterNames(true).done(function(o){var h=t._extractKeyArrays(o);var i=h.extended;d.resolve(i.indexOf(P)<0);}).fail(function(){d.resolve(false);});}else{d.resolve(false);}d.done(function(R){if(R){v.extendedValue=undefined;}if(f&&t._isInitial(v)){v=undefined;t._oWasParameterPersisted[P]=false;}else{v._shellData=jQuery.extend(true,{storeDate:t._getStoreDate()},v._shellData);}sap.ushell.Container.getService("UserDefaultParameterPersistence").saveParameterValue(P,v).always(function(){var o={parameterName:P,parameterValue:u.clone(v||{})};S.fireEvent(e,o);r.resolve(P);});});return r.promise();};this._getPersistedValue=function(P){var o=sap.ushell.Container.getService("UserDefaultParameterPersistence");return o.loadParameterValue(P);};this._isInitial=function(v){return!v||(!v.value&&!v.extendedValue);};this._haveSameMembersValue=function(o,O,m){return m.every(function(r){return(o[r]===O[r]||jQuery.sap.equal(o[r],O[r]));});};this._getUserDefaultParameterNames=function(){if(!this._oUserDefaultParametersNames){this._oUserDefaultParametersNames=new jQuery.Deferred();sap.ushell.Container.getService("ClientSideTargetResolution").getUserDefaultParameterNames(true).done(function(P){var o=t._extractKeyArrays(P);var d=o.extended;var A=o.allParameters;var m=t._arrayToObject(A);if(m.length===0){t._oUserDefaultParametersNames.resolve({});}else{t._oUserDefaultParametersNames.resolve({aAllParameterNames:A,aExtendedParameterNames:d,oMetadataObject:m});}});}return this._oUserDefaultParametersNames.promise();};this._isRelevantParameter=function(P){var d=new jQuery.Deferred();this._getUserDefaultParameterNames().done(function(r){if(r.aAllParameterNames&&r.aAllParameterNames.indexOf(P)!==-1){d.resolve();}else{d.reject();}});return d.promise();};this.hasRelevantMaintainableParameters=function(){var t=this,r=new jQuery.Deferred(),h=false,G=[];t._getUserDefaultParameterNames().done(function(P){if(!jQuery.isEmptyObject(P)&&P.aAllParameterNames){P.aAllParameterNames.forEach(function(d){var o=t.getValue(d);G.push(o);o.done(function(v){if(v&&!v.hasOwnProperty("noEdit")){h=true;return;}});});jQuery.when.apply(undefined,G).done(function(){r.resolve(h);}).fail(function(){r.resolve();});}else{r.resolve();}});return r.promise();};this.getValue=function(P){var t=this,d=new jQuery.Deferred();this._isRelevantParameter(P).fail(function(){d.resolve({});}).done(function(){jQuery.when(t._getPersistedValue(P)).then(function(o){t._oWasParameterPersisted[P]=true;return jQuery.when(o||{});},function(){return jQuery.when({value:undefined});}).then(function(o){var G=new jQuery.Deferred(),v=u.clone(o),f=sap.ushell.Container.getService("PluginManager");var A=(!o._shellData&&t._isInitial(o))||o.noStore||o.alwaysAskPlugin;if(!A){d.resolve(v);return;}f.loadPlugins("UserDefaults").done(function(){b(0,t._aPlugins,P,o,G);}).fail(function(){jQuery.sap.log.error("Cannot get value for "+P+". One or more plugins could not be loaded.");G.reject("Initialization of plugins failed");});G.done(function(n){if(!t._oWasParameterPersisted[P]||!t._haveSameMembersValue(v,n,s)){t._oWasParameterPersisted[P]=true;t._storeValue(P,n);}d.resolve(n);}).fail(d.reject.bind(d));});});return d.promise();};this._addParameterValuesToParameters=function(P,d){var D=new jQuery.Deferred();var f=[];var t=this;d.forEach(function(h){var n=t.getValue(h);f.push(n);n.done(function(v){P[h].valueObject=v;});});jQuery.when.apply(jQuery,f).done(D.resolve.bind(D,P)).fail(D.reject.bind(D,P));return D.promise();};this._arrayToObject=function(P){var r={};P.forEach(function(d){r[d]={};});return r;};this._getComponentNameOfPlugin=function(P){if(typeof P!=="object"||typeof P.getMetadata!=="function"||!P.getMetadata()||typeof P.getMetadata().getComponentName!=="function"){return"'name of plugin could not be determined'";}return P.getMetadata().getComponentName()||"";};this._getEditorDataAndValue=function(d,A,f,m){var t=this;var P=[];var r=[];t._aPlugins.forEach(function(o,i){if(typeof o.getEditorMetadata==="function"){var n=new jQuery.Deferred();P.push(n);try{var h=P.length-1;o.getEditorMetadata(m).done(function(R){r[h]=R;}).always(function(){n.resolve();}).fail(function(){jQuery.sap.log.error("EditorMetadata for plugin "+t._getComponentNameOfPlugin(o)+"cannot be invoked.",null,"sap.ushell.services.UserDefaultParameters");n.resolve();});}catch(j){jQuery.sap.log.error("Error invoking getEditorMetaData on plugin: "+j+j.stack,null,"sap.ushell.services.UserDefaultParameters");n.resolve();}}});jQuery.when.apply(jQuery,P).done(function(){var h=[];var o=r.reverse().reduce(function(i,n){A.forEach(function(j){if(n[j]&&n[j].editorMetadata){i[j].editorMetadata=n[j].editorMetadata;}});return i;},m);A.forEach(function(i){if(!(o[i]&&o[i].editorMetadata)){h.push(i);}});t._addParameterValuesToParameters(o,A).done(function(i){var j=jQuery.extend(true,{},i),k;f.forEach(function(l){if(j[l]){j[l].editorMetadata=j[l].editorMetadata||{};j[l].editorMetadata.extendedUsage=true;}});k=Object.keys(j).splice(0);k.forEach(function(l){var n;if(j[l].valueObject&&j[l].valueObject.noEdit===true){delete j[l];n=h.indexOf(l);if(n>=0){h.splice(n,1);}}});if(h.length>0){jQuery.sap.log.error("The following parameter names have no editor metadata and thus likely no configured plugin:\n\""+h.join("\",\n\"")+"\".");}d.resolve(j);}).fail(d.reject.bind(d));});};this.editorGetParameters=function(){var d=new jQuery.Deferred();var t=this;this._getUserDefaultParameterNames().done(function(P){if(P.oMetadataObject.length===0){d.resolve({});}else{sap.ushell.Container.getService("PluginManager").loadPlugins("UserDefaults").done(function(){t._getEditorDataAndValue(d,P.aAllParameterNames,P.aExtendedParameterNames,P.oMetadataObject);}).fail(function(){jQuery.sap.log.error("One or more plugins could not be loaded");d.reject("Initialization of plugins failed");});}});return d.promise();};this._extractKeyArrays=function(P){var r={extended:[],simple:[],allParameters:[]};r.simple=(P&&P.simple&&Object.keys(P.simple).sort())||[];r.extended=(P&&P.extended&&Object.keys(P.extended).sort())||[];r.allParameters=r.simple.concat(r.extended.filter(function(d){return r.simple.indexOf(d)<0;})).sort();return r;};this.editorSetValue=function(P,v){return this._storeValue(P,v,true);};this.attachValueStored=function(f){S.attachEvent(e,f);};this.detachValueStored=function(f){S.detachEvent(e,f);};}
;U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/UserInfo',[],function(){"use strict";
function U(a,c){this.getId=function(){return sap.ushell.Container.getUser().getId();};this.getUser=function(){return sap.ushell.Container.getUser();};this.getThemeList=function(){var p=a.getThemeList();p.fail(function(){jQuery.sap.log.error("getThemeList failed");});return p;};this.updateUserPreferences=function(){var p=a.updateUserPreferences(sap.ushell.Container.getUser());p.fail(function(){jQuery.sap.log.error("updateAttributes: ");});return p;};this.getLanguageList=function(){var p=a.getLanguageList();p.fail(function(){jQuery.sap.log.error("getLanguageList failed");});return p;};}
;U.hasNoAdapter=false;return U;},true);
sap.ui.predefine('sap/ushell/services/UserRecents',["sap/ushell/services/AppType"],function(c){"use strict";
function R(m,E,C,l,s){var r=[],u=function(I,t){return r.some(function(o){var f;if(E(o.oItem,I)){o.oItem=I;o.iTimestamp=t;o.iCount=o.iCount+1;f=true;}else{f=false;}return f;});},i=function(I,t){var n={oItem:I,iTimestamp:t,iCount:1};if(r.length===m){r.sort(C);r.pop();}r.push(n);};this.clearAllActivities=function(){var D=new jQuery.Deferred();s([]).done(function(a){D.resolve(a);}).fail(function(){D.reject();});return D.promise();};this.newItem=function(I){var D=new jQuery.Deferred();var t=+new Date(),a;l().done(function(L){r=L||[];a=u(I,t);if(!a){i(I,t);}s(r).done(function(b){D.resolve(b);}).fail(function(){D.reject();});});return D.promise();};this.getRecentItems=function(){var D=new jQuery.Deferred();l().done(function(L){L=L||[];L.sort(C);r=L.slice(0,m);D.resolve(jQuery.map(r,function(o){return o.oItem;}));});return D.promise();};}
function d(m,E,C,l,s){var M=30,r,u=function(I,t){return r.recentUsageArray.some(function(o){var f;if(E(o.oItem,I)){if((I.appType===o.oItem.appType)||(I.appType!==c.APP)){jQuery.extend(o.oItem,I);o.iTimestamp=t;o.oItem.timestamp=t;o.mobile=undefined;o.tablet=undefined;o.desktop=undefined;if((I.appType===o.oItem.appType)||(I.appType!==c.APP&&o.oItem.appType!==c.APP)){o.aUsageArray[o.aUsageArray.length-1]+=1;o.iCount+=1;}r.recentUsageArray.sort(C);}f=true;}else{f=false;}return f;});},i=function(I,t,a){I.timestamp=t;if(a){I.icon=a;}var n={oItem:I,iTimestamp:t,aUsageArray:[1],iCount:1,mobile:undefined,tablet:undefined,desktop:undefined};if(r.recentUsageArray.length===m){r.recentUsageArray.pop();}r.recentUsageArray.unshift(n);};this.newItem=function(I){var D=new jQuery.Deferred();var t=+new Date(),a=this.getActivityIcon(I.appType,I.icon),A,b=this,f=this.getDayFromDateObj(new Date());l().done(function(L){r=b.getRecentActivitiesFromLoadedData(L);if(f!=r.recentDay){b.addNewDay();r.recentDay=f;}A=u(I,t);if(!A){i(I,t,a);}s(r).done(function(g){D.resolve(g);}).fail(function(){D.reject();});});return D.promise();};this.getActivityIcon=function(a,I){switch(a){case c.SEARCH:return I?I:"sap-icon://search";case c.COPILOT:return I?I:"sap-icon://co";default:return undefined;}};this.clearAllActivities=function(){var D=new jQuery.Deferred();s([]).done(function(a){D.resolve(a);}).fail(function(){D.reject();});return D.promise();};this.getRecentItemsHelper=function(a){var t=this,D=new jQuery.Deferred(),b,A,f,I=false,g=[],h=[],j=this.getDayFromDateObj(new Date()),k=function(L){var n=[],o=0,p;for(p=0;p<L.recentUsageArray.length&&(!a||o<a);p++){A=L.recentUsageArray[p];if(A[f]){n.push(A);o++;}}D.resolve(n);};if(sap.ui.Device.system.desktop){f="desktop";}else if(sap.ui.Device.system.tablet){f="tablet";}else{f="mobile";}l().done(function(L){r=t.getRecentActivitiesFromLoadedData(L);var n=false;if(j!=r.recentDay){t.addNewDay();r.recentDay=j;n=true;}for(b=0;b<r.recentUsageArray.length&&!I;b++){A=r.recentUsageArray[b];if(A[f]===undefined){if(!(A.oItem.url[0]==="#")){h.push(A.oItem.url);}else if(A.oItem.url.indexOf("?")>-1){var o=A.oItem.url.substring(A.oItem.url.indexOf("?"));if(o.indexOf("&/")>-1){o=o.substring(0,o.indexOf("&/"));}g.push(A.oItem.appId+o);}else{g.push(A.oItem.appId);}}else{I=true;}}if(h.length>0){var p;for(b=0;b<r.recentUsageArray.length;b++){if(!(r.recentUsageArray[b].oItem.url[0]==='#')){p=r.recentUsageArray[b];p[f]=true;}}if(g.length<=0){s(r).done(function(q){D.resolve(k(r));}).fail(function(){D.reject();});}}if(g.length>0){sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(g).done(function(q){I=false;for(b=0;b<r.recentUsageArray.length&&!I;b++){A=r.recentUsageArray[b];if(A[f]===undefined){o="";if(A.oItem.url.indexOf("?")>-1){o=A.oItem.url.substring(A.oItem.url.indexOf("?"));if(o.indexOf("&/")>-1){o=o.substring(0,o.indexOf("&/"));}}var v=q[A.oItem.appId+o];A[f]=v&&v.supported?true:false;}else if(A.oItem.url[0]==='#'){I=true;}}s(r).done(function(w){D.resolve(k(r));}).fail(function(){D.reject();});}).fail(function(q){D.reject(q);});}else if((g.length<=0)&&(h.length<=0)){if(n){s(r).done(function(q){D.resolve(k(r));}).fail(function(){D.reject();});}else{D.resolve(k(r));}}});return D.promise();};this.getRecentItems=function(){var D=new jQuery.Deferred();this.getRecentItemsHelper(30).done(function(a){D.resolve(jQuery.map(a,function(o){return o.oItem;}));});return D.promise();};this.getFrequentItems=function(){var D=new jQuery.Deferred();this.getRecentItemsHelper().done(function(f){var g,w=0,F=[],A,p=f[0]?new Date(f[0].iTimestamp):undefined,h;for(g=0;g<f.length&&w<30;g++){A=f[g];if(A.iCount>1){F.push(A);}h=new Date(A.iTimestamp);if(p.toDateString()!=h.toDateString()){w++;p=h;}}F.sort(function(a,b){return b.iCount-a.iCount;});F=F.slice(0,30);D.resolve(jQuery.map(F,function(o){return o.oItem;}));});return D.promise();};this.addNewDay=function(){var a,b;for(a=0;a<r.recentUsageArray.length;a++){if(r.recentUsageArray[a].aUsageArray){b=r.recentUsageArray[a].aUsageArray;}else{b=[];r.recentUsageArray[a].aUsageArray=b;r.recentUsageArray[a].iCount=0;}b[b.length]=0;if(b.length>M){r.recentUsageArray[a].iCount-=b[0];b.shift();}}};this.getDayFromDateObj=function(a){return(a.getUTCFullYear()+"/"+(a.getUTCMonth()+1)+"/"+a.getUTCDate());};this.getRecentActivitiesFromLoadedData=function(a){var b;if(jQuery.isArray(a)){b={recentDay:null,recentUsageArray:a};}else{b=a||{recentDay:null,recentUsageArray:[]};}b.recentUsageArray=(b.recentUsageArray||[]).filter(function(A){var I=A&&A.oItem&&A.oItem.url;if(!I){jQuery.sap.log.error("FLP Recent Activity",A,"is not valid. The activity is removed from the list.");}return I;});return b;};}
function e(l,s){var a,t=this,m=30;this.init=function(){var t=this,p,b=this.getDayFromDateObj(this.getCurrentDate()),D=false;if(t._oInitDeferred===undefined){t._oInitDeferred=jQuery.Deferred();}if(!D||b!==a.recentDay){D=true;p=l();p.done(function(f){a=f||{recentDay:null,recentAppsUsageMap:{}};t.calculateInitialUsage(b);t._oInitDeferred.resolve(a);});p.fail(function(){jQuery.sap.log.error("UShell-lib ; RecentAppsUsage ; Load data in Init failed");t._oInitDeferred.reject();});}return this._oInitDeferred.promise();};this.calculateInitialUsage=function(b){var t=this;if(b!=a.recentDay){this.addNewDay();a.recentDay=b;setTimeout(function(){t.cleanUnusedHashes();},3000);this.saveAppsUsage(a);}};this.addAppUsage=function(h){if(!sap.ushell.utils.validHash(h)){return jQuery.Deferred().reject("Non valid hash").promise();}var p=this.init();p.done(function(){var A=a.recentAppsUsageMap[h]||[];if(A.length==0){A[0]=1;}else{A[A.length-1]+=1;}a.recentAppsUsageMap[h]=A;t.saveAppsUsage(a);});p.fail(function(){jQuery.sap.log.error("Ushell-lib ; addAppUsage ; Initialization falied!");});return p;};this.getAppsUsage=function(){var r,p,t=this,D=jQuery.Deferred();p=t.init();p.done(function(){r=t.summarizeUsage();D.resolve(r);});p.fail(function(){D.reject("Not initialized yet");});return D.promise();};this.summarizeUsage=function(){var u={},h,b,f,g=true;for(h in a.recentAppsUsageMap){u[h]=this.getHashUsageSum(h);if(g){b=f=u[h];g=false;}else if(u[h]<f){f=u[h];}else if(u[h]>b){b=u[h];}}return{usageMap:u,maxUsage:b,minUsage:f};};this.addNewDay=function(){var h,A;for(h in a.recentAppsUsageMap){A=a.recentAppsUsageMap[h];A[A.length]=0;if(A.length>m){A=A.shift();}}};this.cleanUnusedHashes=function(){var u,h;for(h in a.recentAppsUsageMap){u=t.getHashUsageSum(h);if(u==0){delete(a.recentAppsUsageMap[h]);}}};this.getHashUsageSum=function(h){var b=0,f,g=a.recentAppsUsageMap[h],i=g.length;for(f=0;f<i;f++){b+=g[f];}return b;};this.saveAppsUsage=function(o){var p=s(o);p.fail(function(){jQuery.sap.log.error("Ushell-lib ; saveAppsUsage ; Save action failed");});p.done(function(b){});return p;};this.getCurrentDate=function(){return new Date();};this.getDayFromDateObj=function(b){return(b.getUTCFullYear()+"/"+(b.getUTCMonth()+1)+"/"+b.getUTCDate());};}
function U(){var r,o,a,A,b,p,f,s,g,D,h,l,S,i="RecentApps",j="RecentActivity",k="AppsUsage",m="RecentSearches",n="RecentDataSources",P="sap.ushell.services.UserRecents";this.addActivity=function(t){return a.newItem(t);};this.clearRecentActivities=function(t){var u=new jQuery.Deferred();a.clearAllActivities().done(function(){u.resolve();});return u.promise();};this.getRecentActivity=function(){return a.getRecentItems();};this.getFrequentActivity=function(){return a.getFrequentItems();};this.noticeDataSource=function(t){if((t&&t.objectName&&t.objectName.value&&t.objectName.value.toLowerCase()==="$$all$$")||(t.objectName&&t.objectName.toLowerCase&&t.objectName.toLowerCase()==="$$all$$")){return;}b.newItem(t);return b.getRecentItems();};this.getRecentDataSources=function(){return b.getRecentItems();};this.noticeSearch=function(t){r.newItem(t);return r.getRecentItems();};this.getRecentSearches=function(){return r.getRecentItems();};this.noticeApp=function(t){o.newItem(t);return o.getRecentItems();};this.getRecentApps=function(){return o.getRecentItems();};this.initAppsUsage=function(){A.init(new Date());};this.addAppUsage=function(t){var u=sap.ushell.utils.getBasicHash(t);A.addAppUsage(u);};this.getAppsUsage=function(){return A.getAppsUsage();};p=sap.ushell.Container.getService("Personalization");try{f=p.getPersonalizer({container:P,item:i});g=p.getPersonalizer({container:P,item:j});s=p.getPersonalizer({container:P,item:m});D=p.getPersonalizer({container:P,item:n});h=p.getPersonalizer({container:P,item:k});}catch(q){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(q.name+": "+q.message);}l=function(t){var u,v;try{u=t.getPersData();}catch(q){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(q.name+": "+q.message);v=new jQuery.Deferred();v.reject(q);u=v.promise();}return u;};S=function(t,L){var u;try{u=t.setPersData(L);}catch(q){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(q.name+": "+q.message);}return u;};r=new R(10,function(x,y){var t=false;if(x.oDataSource&&y.oDataSource){if(x.oDataSource.objectName&&y.oDataSource.objectName){t=((x.sTerm===y.sTerm)&&(x.oDataSource.objectName.value===y.oDataSource.objectName.value));}if(!x.oDataSource.objectName&&!y.oDataSource.objectName){t=(x.sTerm===y.sTerm);}}if(!x.oDataSource&&!y.oDataSource){t=(x.sTerm===y.sTerm);}return t;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,s),S.bind(this,s));b=new R(6,function(x,y){if(x.objectName&&y.objectName){return x.objectName.value===y.objectName.value;}return false;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,D),S.bind(this,D));o=new R(6,function(x,y){return x.semanticObject===y.semanticObject&&x.action===y.action;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,f),S.bind(this,f));a=new d(500,function(x,y){if(x.appType===y.appType){if(x.appType!==c.APP){return x.url===y.url;}else{return x.appId===y.appId;}}else if(x.appType===c.APP||y.appType===c.APP){return(x.appId===y.appId)&&(x.url===y.url);}else{return false;}},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,g),S.bind(this,g));A=new e(l.bind(this,h),S.bind(this,h));}
U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/_AppState/AppState',[],function(){
function A(S,k,m,d,a,b,t){this._oServiceInstance=S;this._sKey=k;this._sData=d;this._sAppName=a;this._sACHComponent=b;this._bTransient=t;if(m){this.setData=function(D){try{this._sData=JSON.stringify(D);}catch(e){jQuery.sap.log.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined;}};this.save=s.bind(this);}}
;
function s(){var d=new jQuery.Deferred();this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent,this._bTransient).done(function(){d.resolve();}).fail(function(m){d.reject(m);});return d.promise();}
A.prototype.getData=function(){var o;if(this._sData===undefined||this._sData===""){return undefined;}try{o=JSON.parse(this._sData);}catch(e){jQuery.sap.log.error("Could not parse ["+this._sData+"]"+e);}return o;};
A.prototype.getKey=function(){return this._sKey;};
return A;});
sap.ui.predefine('sap/ushell/services/_AppState/LimitedBuffer',[],function(){"use strict";
function L(c){this.index=-1;this.capacity=c;this.array=[];}
L.prototype._clear=function(){this.array=[];this.index=-1;};
L.prototype.addAsHead=function(k,v){this.index=(this.index+1)%this.capacity;this.array[this.index]={key:k,value:v};};
L.prototype.getByKey=function(k){var i,e;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===k){return this.array[e];}}return undefined;};
return L;});
sap.ui.predefine('sap/ushell/services/_AppState/Sequentializer',[],function(){"use strict";
function S(){this.oLastPromise=new jQuery.Deferred();this.oLastPromise.resolve();}
;
S.prototype.addToQueue=function(f){var n=new jQuery.Deferred();this.oLastPromise.always(function(){var r=f();r.done(function(){n.resolve.apply(n,arguments);}).fail(function(){n.reject.apply(n,arguments);});});this.oLastPromise=n;return n.promise();};
return S;});
sap.ui.predefine('sap/ushell/services/_AppState/SequentializingAdapter',["sap/ushell/services/_AppState/Sequentializer"],function(S){"use strict";
function a(u){this._oSequentializer=new S();this._oUnderlyingAdapter=u;}
;
a.prototype.saveAppState=function(k,s,d,A,c){var f;f=this._oUnderlyingAdapter.saveAppState.bind(this._oUnderlyingAdapter,k,s,d,A,c);return this._oSequentializer.addToQueue(f);};
a.prototype.loadAppState=function(k){return this._oUnderlyingAdapter.loadAppState(k);};
return a;});
sap.ui.predefine('sap/ushell/services/_AppState/WindowAdapter',["sap/ushell/services/_AppState/LimitedBuffer","sap/base/Log"],function(L,a){"use strict";var W=50;var C=18;
function b(){this._init.apply(this,arguments);}
b.prototype._init=function(s,B,c){var i=c&&c.config&&c.config.initialAppStates||{};var I=c&&c.config&&c.config.initialAppStatesPromise;this._oServiceInstance=s;this._oBackendAdapter=B;if(!b.prototype.data){b.prototype.data=new L(W);}if(I){I.then(function(i){if(typeof i==="object"){Object.keys(i).forEach(function(k){b.prototype.data.addAsHead(k,i[k]);});}});}Object.keys(i).forEach(function(k){b.prototype.data.addAsHead(k,i[k]);});};
b.prototype.saveAppState=function(k,s,d,A,c,t){this.sComponent=c;var D=new jQuery.Deferred();b.prototype.data.addAsHead(k,d);if(this._oBackendAdapter&&!t){return this._oBackendAdapter.saveAppState(k,s,d,A,c);}D.resolve();return D.promise();};
b.prototype.loadAppState=function(k){var d=new jQuery.Deferred(),c=b.prototype.data.getByKey(k);if(c){setTimeout(function(){d.resolve(k,c.value);},0);return d.promise();}try{if(window.opener&&window.opener.sap&&window.opener.sap.ushell){var A=window.opener.sap.ui.require("sap/ushell/services/AppState").WindowAdapter.prototype.data.getByKey(k);if(A){d.resolve(k,A.value);return d.promise();}}}catch(e){if(e.code===C){a.warning("AppState.js - loadAppState: Opener is not of the same origin and cannot be used for AppState resolving.");}else{a.warning("AppState.js - loadAppState: Opener is a FLP but AppState could not get resolved from there.");}}if(this._oBackendAdapter){this._oBackendAdapter.loadAppState(k).done(function(k,D){b.prototype.data.addAsHead(k,D);d.resolve(k,D);}).fail(d.reject.bind(d));return d.promise();}d.reject("AppState.js - loadAppState: Application State could not be loaded");return d.promise();};
return b;});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Formatter',[],function(){"use strict";
function f(i){return"#"+i.semanticObject+"-"+i.action+"{"+a(i.signature)+"}";}
function p(i){var m=i.match(/^#(.+?)-(.+?)({(.+)})?$/);if(!m){throw"Cannot parse inbound";}var r={semanticObject:m[1],action:m[2],signature:{parameters:{}}};if(!m[3]){return r;}r.signature=b(m[4]);return r;}
function a(i){var I=i||{},P=I.parameters||{},t={optional:"[FORMAT]",required:"FORMAT"},F={regexp:"/VALUE/",reference:"@VALUE@",value:"VALUE",plain:"VALUE",_unknown:"?VALUE?"},A={allowed:"<+>",notallowed:"<->",ignored:"<o>",_unknown:"<?>"};var h=P&&Object.prototype.toString.apply(P)==="[object Object]"&&Object.keys(P).length>0;if(!h){return"<no params>"+(A[I.additionalParameters]||A._unknown);}var r=[];Object.keys(P).forEach(function(s){var o=P[s],c=o.required?"required":"optional",d=o.filter&&o.filter.value,e=o.defaultValue&&o.defaultValue.value,g=(o.filter&&o.filter.format)||"plain",j=(o.defaultValue&&o.defaultValue.format)||"plain";var v=[],k=F[g]||F._unknown,l=F[j]||F._unknown;if(d){v.push(t["required"].replace("FORMAT",k.replace("VALUE",d)));}if(e){v.push(t["optional"].replace("FORMAT",l.replace("VALUE",e)));}r.push(t[c].replace("FORMAT",s+":"+v.join("")));});return r.join(",")+(A[I.additionalParameters]||A._unknown);}
function b(c){function d(v){var V=[{re:new RegExp(/^[/](.+)[/]$/),format:"regexp"},{re:new RegExp(/^[@](.+)[@]$/),format:"reference"},{re:new RegExp(/^[?](.+)[?]$/),format:"???"}].reduce(function(r,D){var m=v.match(D.re);if(r){return r;}if(!m){return null;}return{format:D.format,value:m[1]};},null);if(V){return V;}return{value:v};}function e(j){var n,k,l,m,o,w,M,q,t,O,R,N;N="<no params>";n="[^\\]\\[]";R="("+n+"+?):("+n+"*)(.*)";O="\\["+R+"\\]";t=N+"|"+O+"|"+R;q=new RegExp("^"+t+"$");o={success:false,name:null,value:{}};M=j.match(q);if(!M){return o;}w=M.shift();while(M.length>0){m=M.shift();l=M.shift();k=M.shift();if(m){o.name=m;if(l){o.value.filter=d(l);}if(k){o.value.defaultValue=d(k.replace(/\[(.+)\]/,"$1"));}o.value.required=(w.charAt(0)!=="[");}}o.success=true;return o;}function g(j){return[{"<+>":"allowed"},{"<->":"notallowed"},{"<o>":"ignored"}].reduce(function(R,o,I,k){if(R){return R;}var l=Object.keys(o)[0];if(j===l){return o[l];}return null;},null);}function s(P){var I=[];P.split(":").reduce(function(j,n,k,l){var v,N,V;if(k===0){return n;}if(k<l.length-1){V=n.split(",");if(V.length>1){N=V.pop();v=V.join(",");}else{return j+":"+n;}}else{v=n;}I.push([j,v].join(":"));return N;},"");return I;}var r={parameters:{}};var A=c.substr(c.length-3,3);var h=!!A.match(/<[?o+-]>/);var P=c;if(h){P=c.substr(0,c.length-3);}var S=s(P);S.forEach(function(j){var o=e(j);if(!o.success){throw new Error("Cannot parse parameters from "+c);}if(o.name){r.parameters[o.name]=o.value;}});if(h){var i=g(A);if(i){r.additionalParameters=g(A);}}else{r.additionalParameters="ignored";}return r;}
return{formatInboundSignature:a,parseInboundSignature:b,parseInbound:p,formatInbound:f};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/InboundIndex',[],function(){"use strict";
function g(){return this.index.all;}
function a(S){if(S==="*"||S===undefined){return this.index.all;}return(this.index.segment[S]||[]).concat(this.index.always);}
function b(T){return T.map(function(d){return this.index.tag[d]||[];},this).reduce(function(u,I){Array.prototype.push.apply(u,I.filter(function(o){return o.isAlreadyInUnion?false:(o.isAlreadyInUnion=true);}));return u;},[]).map(function(I){delete I.isAlreadyInUnion;return I;});}
var i=Object.create(Object.prototype,{getSegment:{value:a},getAllInbounds:{value:g},getSegmentByTags:{value:b}});
function t(I,o){var T=jQuery.sap.getObject('signature.parameters.sap-tag.defaultValue.value',undefined,I);if(!T){return;}if(!o.tag[T]){o.tag[T]=[];}o.tag[T].push(I);}
function s(I,o){var S=I.semanticObject;if(S==="*"){o.always.push(I);}else{if(!o.segment[S]){o.segment[S]=[];}o.segment[S].push(I);}}
function c(I){var o={all:I,segment:{},always:[],tag:{}};I.forEach(function(d,e){if(!d){jQuery.sap.log.warning("Void inbound provided to indexer","the inbound will be skipped");return;}t(d,o);s(d,o);});return Object.create(i,{index:{value:o}});}
return{createIndex:c,private:{tagInbound:t,createIndex:c,segmentInbound:s}};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/InboundProvider',["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/InboundIndex"],function(v,i){"use strict";
function I(){this._init.apply(this,arguments);}
;
I.prototype._init=function(r){this._fnRetrieveInbounds=r;this._oInboundsRetrievalPromise=null;};
I.prototype.getInbounds=function(s){if(s){return this._getSomeInbounds(s);}return this._getAllInbounds();};
I.prototype._getSomeInbounds=function(s){var t=this;return new Promise(function(r,R){t._fnRetrieveInbounds(s).done(function(a){r(i.createIndex(a.concat(v.getInbounds())));}).fail(function(){R.apply(null,arguments);});});};
I.prototype._getAllInbounds=function(){var t=this;if(this._oInboundsRetrievalPromise){return this._oInboundsRetrievalPromise;}this._oInboundsRetrievalPromise=new Promise(function(r,R){t._fnRetrieveInbounds().done(function(a){r(i.createIndex((a||[]).concat(v.getInbounds())));}).fail(function(){R.apply(null,arguments);});});return this._oInboundsRetrievalPromise;};
return I;});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/ParameterMapping',[],function(){"use strict";
function m(M){var n={},o=M.intentParamsPlusAllDefaults;Object.keys(o).sort().forEach(function(p){var r=g(p,M.inbound.signature,o[p]);if(jQuery.isArray(M.intentParamsPlusAllDefaults[p])){if(n[r]){jQuery.sap.log.error("collision of values during parameter mapping : \""+p+"\" -> \""+r+"\"");}else{n[r]=M.intentParamsPlusAllDefaults[p];}}});M.mappedIntentParamsPlusSimpleDefaults=n;}
function g(p,s,P){if(!P||!jQuery.isArray(P)){return p;}if(s&&s.parameters&&s.parameters[p]&&s.parameters[p].renameTo){return s.parameters[p].renameTo;}return p;}
return{mapParameterNamesAndRemoveObjects:m,getRenameParameterName:g};},false);
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Search',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/TechnicalParameters"],function(u,U,v,f,t){"use strict";var A=[undefined,"GUI","WDA","UI5"];
function a(M,I){var R=M.inbound.resolutionResult;if(!R){return"";}return["applicationType","ui5ComponentName","url","additionalInformation","text"].map(function(K){if(I){return R.hasOwnProperty(K)?K+":"+R[K]:"";}return R.hasOwnProperty(K)?R[K]:"";}).join("");}
function b(M){return M.sort(function(s,x){if((s["sap-priority"]||0)-(x["sap-priority"]||0)!==0){return-((s["sap-priority"]||0)-(x["sap-priority"]||0));}if(s.priorityString<x.priorityString){return 1;}if(s.priorityString>x.priorityString){return-1;}var S=a(s);var y=a(x);if(S<y){return 1;}else if(S>y){return-1;}return 0;});}
function e(I,M){var s;if(I&&I["sap-priority"]&&I["sap-priority"][0]){s=parseInt(I["sap-priority"][0],10);if(!isNaN(s)){M["sap-priority"]=s;}}return;}
function m(V,F,K,M){var s;if(!F){return true;}if(!V&&V!==""){return false;}s=F.value;if(F.format==="reference"){if(/UserDefault\.extended\./.test(s)){jQuery.sap.log.error("Illegal inbound: extended user default '"+s+"' used as filter");return false;}if(K.hasOwnProperty(s)){return V===K[s];}M[s]=true;return true;}if(F.format==="value"||F.format==="plain"||F.format===undefined){return V===F.value;}else if(F.format==="regexp"){return!!V.match("^"+F.value+"$");}else{jQuery.sap.log.error("Illegal oFilter format");return false;}}
function g(M){return M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.ui"]&&M.inbound.resolutionResult["sap.ui"].technology;}
function c(M){return M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult.appId;}
function d(I,s,K,M,D){var x={},y={};Object.keys(I).forEach(function(P){if(P!=="sap-ushell-defaultedParameterNames"){x[P]=I[P];}});if(!s){return x;}Object.keys(s).forEach(function(P){var T=s[P],z,V=false;if(!x[P]&&T.hasOwnProperty("defaultValue")){if(T.defaultValue.format&&T.defaultValue.format==="reference"){z=T.defaultValue.value;if(K.hasOwnProperty(z)){if(typeof K[z]==="string"){x[P]=[K[z]];V=true;}else if(typeof K[z]==="object"){x[P]=K[z];V=true;}}else{x[P]=[T.defaultValue];M.push(T.defaultValue.value);}}else{x[P]=[T.defaultValue.value];V=true;}if(V){y[P]=true;}}});Object.keys(y).sort().forEach(function(P){D.push(P);});return x;}
function h(M,I){M.resolutionResult={};if(I&&I.resolutionResult&&I.resolutionResult.hasOwnProperty("sap.platform.runtime")){M.resolutionResult["sap.platform.runtime"]=I.resolutionResult["sap.platform.runtime"];}Object.keys(M.intentParamsPlusAllDefaults).slice(0).forEach(function(N){if(!jQuery.isArray(M.intentParamsPlusAllDefaults[N])){if(!M.resolutionResult.oNewAppStateMembers){M.resolutionResult.oNewAppStateMembers={};}M.resolutionResult.oNewAppStateMembers[N]=M.intentParamsPlusAllDefaults[N];}});}
function i(R,M){R.forEach(function(s){M[s]=true;});}
function j(M){var T=M.intentParamsPlusAllDefaults["sap-ui-tech-hint"]&&M.intentParamsPlusAllDefaults["sap-ui-tech-hint"][0];var I=M.defaultedParamNames&&(M.defaultedParamNames.indexOf("sap-ui-tech-hint")>=0);if(T&&g(M)===T){return I?1:2;}return 0;}
;
function k(M){var s=M.intentParamsPlusAllDefaults["sap-ui-app-id-hint"]&&M.intentParamsPlusAllDefaults["sap-ui-app-id-hint"][0];if(s&&(s===c(M))){return 1;}return 0;}
function l(M,x){function y(N){var s="000"+N;return s.substr(s.length-3);}return["AIDM="+k(M),M.genericSO?"g":"x","TECM="+j(M),"MTCH="+y(x.countMatchingParams),"MREQ="+y(x.countMatchingRequiredParams),"NFIL="+y(x.countMatchingFilterParams),"NDEF="+y(x.countDefaultedParams),"POT="+y(x.countPotentiallyMatchingParams),"RFRE="+y(999-x.countFreeInboundParams),"TECP="+n(M)].join(" ");}
;
function n(M){var T=g(M);var P=A.indexOf(T);return Math.max(0,P);}
function o(I,s){var x=false;if(I.signature.additionalParameters==="allowed"||I.signature.additionalParameters==="ignored"){return true;}if(I.signature.additionalParameters==="notallowed"||I.signature.additionalParameters===undefined){x=Object.keys(s).every(function(P){return(!I.signature.parameters[P]&&P.indexOf("sap-")!==0)?false:true;});}else{jQuery.sap.log.error("Unexpected value of inbound for signature.additionalParameters");}return x;}
function p(I,s,K,D){var M=s.reduce(function(R,x){var y=w(I,x,K,R.missingReferences);if(y.matches){R.matchResults.push(y);}else if(D){(function(){var N=R.noMatchReasons;var z=f.formatInbound(x);N[z]=y.noMatchReason+(y.noMatchDebug?"| DEBUG: "+y.noMatchDebug:"");})();}return R;},{matchResults:[],noMatchReasons:{},missingReferences:{}});return jQuery.when(M);}
function q(I,s,x,D,K,M){var S=Object.keys(I).every(function(P){var V=s[P],y=V&&V[0],z=I[P];if(z.required&&(y===null||y===undefined)){return false;}if(z.filter){if(!m(y,z.filter,K,M)){return false;}}return true;});return S;}
function r(I,s,x,D,y){var z=0,B=0,C=0,E=0,S={};function F(P){return!t.isTechnicalParameter(P);}var G=Object.keys(x).filter(F);var H=D.filter(F);Object.keys(I).filter(F).forEach(function(P){var V=s[P],J=V&&V[0],K=I[P],L=x.hasOwnProperty(P);if(L){++z;if(K.filter){++C;}if(K.required){++B;}}else if(J===null||J===undefined){++E;}});if(y){S.countPotentiallyMatchingParams=G.filter(function(J){return I.hasOwnProperty(J);}).length;}else{S.countPotentiallyMatchingParams=G.length;}S.countDefaultedParams=H.length;S.countMatchingParams=z;S.countMatchingRequiredParams=B;S.countMatchingFilterParams=C;S.countFreeInboundParams=E;return S;}
function w(I,s,K,M){var x={inbound:s};function N(W,X,Y){W.matches=false;W.noMatchReason=X;W.noMatchDebug=Y;return W;}function y(W){W.matches=true;W.matchesVirtualInbound=v.isVirtualInbound(s);return W;}var z=s.semanticObject==="*";x.genericSO=z;var S=I.semanticObject===undefined||I.semanticObject===s.semanticObject||z;if(!S){return N(x,"Semantic object \""+I.semanticObject+"\" did not match");}var B=I.action===undefined||I.action===s.action;if(!B){return N(x,"Action \""+I.action+"\" did not match");}var F=!s.deviceTypes||I.formFactor===undefined||s.deviceTypes[I.formFactor];if(!F){return N(x,"Form factor \""+I.formFactor+"\" did not match","Inbound: ["+Object.keys(s.deviceTypes).filter(function(W){return!!s.deviceTypes[W];}).join(", ")+"]");}var T=I.params&&I.params["sap-ui-tech-hint"]&&I.params["sap-ui-tech-hint"][0];if(I.treatTechHintAsFilter&&T){var C=g({inbound:s});if(C!==T){return N(x,"Tech Hint as filter \""+T+"\" did not match","Inbound: ["+C+"]");}}var R=[],D=[],E=I.params||{};var G=d(E,s.signature&&s.signature.parameters,K,R,D);x.intentParamsPlusAllDefaults=G;x.defaultedParamNames=D;e(G,x);var H=q(s.signature.parameters,G,E,D,K,M);if(!H){return N(x,"Inbound parameter signature did not match",f.formatInboundSignature(s.signature));}var P=U.constructParameterDominatorMap(s.signature.parameters);var J=U.findDominatedDefaultParameters(G,D,P);var L=D.filter(function(W){return!J[W];});var O=U.filterObjectKeys(G,function(W){return!J[W];});if(!o(s,O)){return N(x,"Additional parameters not allowed",f.formatInboundSignature(s.signature));}var Q=s.signature.additionalParameters==="ignored";if(Q){U.filterObjectKeys(O,function(W){if(W.indexOf("sap-")===0){return true;}if(s.signature.parameters.hasOwnProperty(W)){return true;}return false;},true);}var V=r(s.signature.parameters,G,E,D,Q);h(x,s);x.intentParamsPlusAllDefaults=O;x.defaultedParamNames=L;x.priorityString=l(x,V);i(R,M);return y(x);}
return{match:p,matchOne:w,sortMatchingResultsDeterministic:b,matchesFilter:m,checkAdditionalParameters:o,addDefaultParameterValues:d,extractSapPriority:e,serializeMatchingResult:a};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/StagedLogger',["sap/ushell/services/_ClientSideTargetResolution/Utils"],function(u){"use strict";var _={};
function b(g){var L,o,s=g();if(!s.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #begin method of StagedLogger.");}L=s.logId;if(_[L]){throw new Error("'cannot call #begin twice with same log id: '"+L+"'");}else{_[L]={};}o=_[L];o.title=s.title||null;o.moduleName=s.moduleName||null;var r=function(c,n){if(n===1){return c}else{return r(c,n-1)+c;}};o.stages=s.stages.map(function(S){return[S,r('-',S.length)];});return L;}
function l(g){var L,c,s,d,p,S,n,A;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}L=A.logId;S=A.stage;p=A.prefix;d=A.lines;s=A.line;n=A.number;if(!d&&s&&p){s=p+" "+s;}c=_[L].stages[S-1];if(s){c.push(s);}if(d){if(p){p=(s?" ":"")+p;}var f=d.map(function(s,i){return(n?(i+1):"")+(p?p+" ":"")+s;});c.push.apply(c,f);}}
function e(g){var A,L,s;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}s=A.logId;L=_[s];if(typeof L!=="object"){throw new Error("Logger .end was called on an already ended logger");}var c=L.stages.map(function(S){return S.join("\n");}).join("\n\n");jQuery.sap.log.debug("[REPORT #"+s+"] "+L.title,"\n"+c+"\n",L.moduleName);delete _[s];}
function a(){return _;}
return{begin:function(){if(!u.isDebugEnabled()){return;}b.apply(null,arguments);},log:function(){if(!u.isDebugEnabled()){return;}l.apply(null,arguments);},end:function(){if(!u.isDebugEnabled()){return;}e.apply(null,arguments);},_getLogs:a};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Utils',[],function(v,f){"use strict";
function a(I,D,p){var o={};D.forEach(function(s){var h=p[s].dominatedBy;var j=h.some(function(k){var l=!!I[k];var m=k!==s;var n=D.indexOf(k)===-1;return l&&n&&m;});if(j){o[s]=true;}});return o;}
function c(p){var D={},r={};Object.keys(p).forEach(function(k){var R=p[k].renameTo||k;r[R]=r[R]||{"renameTo":R,"dominatedBy":[]};r[R].dominatedBy.push(k);r[R].dominatedBy=r[R].dominatedBy.sort();D[k]=r[R];});return D;}
function b(o,F,I){var O=I?o:jQuery.extend(true,{},o);Object.keys(O).forEach(function(k){if(F(k)===false){delete O[k];}});return O;}
function d(o,F){var h;h=Object.keys(o).reduce(function(h,k){var V=o[k];if(F(k,V)){h[k]=V;}return h;},{});return h;}
;
function w(h){if(i()){h.call(null);}}
function i(){var C=jQuery.sap.log.getLevel();if(C>=jQuery.sap.log.Level.DEBUG){return true;}return false;}
function e(I,p){return p.every(function(P){var o,O,s;s=P.name;O=P.options;o=I[s];return Object.keys(O).every(function(h){var j=O[h];if(h==="required"){return!!(o||{}).required===j;}return false;});});}
function g(p,W){var E={};p.forEach(function(P){if(W[P]){E[P]=W[P];delete W[P];}});return E;}
return{inboundSignatureMeetsParameterOptions:e,filterObjectKeys:b,filterObject:d,constructParameterDominatorMap:c,findDominatedDefaultParameters:a,whenDebugEnabled:w,isDebugEnabled:i,extractParameters:g};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds',["jquery.sap.global"],function(q){"use strict";var v={};var A=[{hideIntentLink:true,semanticObject:"Action",action:"search",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.renderers.fiori2.search.container",additionalInformation:"SAPUI5.Component=sap.ushell.renderers.fiori2.search.container",url:q.sap.getResourcePath("sap/ushell/renderers/fiori2/search/container"),loadCoreExt:true,loadDefaultDependencies:false}}];
v.isVirtualInbound=function(i){return A.some(function(V){return V===i;});};
v.getInbounds=function(){return A;};
return v;});
sap.ui.predefine('sap/ushell/services/_CommonDataModel/PersonalizationProcessor',[],function(){"use strict";
function P(){}
P.prototype._getItemIndex=function(i,I){var r;for(r=0;r<i.length;r++){if(i[r].id===I){break;}}r=(r>=i.length)?-1:r;return r;};
P.prototype._applyRenameGroup=function(g,n,o){var G,b=false;if(!n){return false;}if(g&&o&&o.groups&&o.groups[g]){G=o.groups[g];if(G.identification&&G.identification.title){o.groups[g].identification.title=n;b=true;}}return b;};
P.prototype._applyGroupVisibility=function(g,G,o){var b=false;if(G===undefined){return false;}if(g&&o&&o.groups&&o.groups[g]){o.groups[g].identification.isVisible=G;b=true;}return b;};
P.prototype.mixinPersonalization=function(o,p){var d=new jQuery.Deferred(),t=this;if(!p||jQuery.isEmptyObject(p)){return d.resolve(o).promise();}if(p.groups){Object.keys(p.groups).forEach(function(g){var G=p.groups[g];if(o.groups[g]){if(G.identification){if(G.identification.title){t._applyRenameGroup(g,G.identification.title,o);}if(G.identification.hasOwnProperty("isVisible")&&G.identification.isVisible===false){t._applyGroupVisibility(g,false,o);}}}});}this._applyAddGroups(o,p);if(p.removedGroups&&jQuery.isArray(p.removedGroups)){p.removedGroups.forEach(function(g){t._applyRemoveGroup(o,g);});}this._applyMoveGroup(o,p);this._applyItemChanges(o,p);this._applyTileSettings(o,p);return d.resolve(o).promise();};
P.prototype._applyAddGroups=function(o,p){var n=[];o.site=o.site||{};o.site.payload=o.site.payload||{};o.site.payload.groupsOrder=o.site.payload.groupsOrder||[];o.groups=o.groups||{};if(jQuery.isArray(p.groupOrder)){o.site.payload.groupsOrder.forEach(function(g){if(p.groupOrder.indexOf(g)===-1){if((p.removedGroups&&p.removedGroups.indexOf(g)===-1)||!p.removedGroups){n.push(g);}}});}if(jQuery.isArray(p.groupOrder)&&p.addedGroups&&Object.keys(p.addedGroups).length>0){Object.keys(p.addedGroups).forEach(function(g){o.groups[g]=p.addedGroups[g];o.groups[g].payload.isPreset=false;});o.site.payload.groupsOrder=p.groupOrder;}n.forEach(function(N){o.site.payload.groupsOrder.push(N);});};
P.prototype._checkRenameGroup=function(g,p,o,a){if(g&&p&&o){if(o[g]){if(p[g].identification.title!==o[g].identification.title){a=a||{};a.groups=a.groups||{};a.groups[g]=a.groups[g]||{};a.groups[g].identification=a.groups[g].identification||{};a.groups[g].identification.title=p[g].identification.title;}}}return a;};
P.prototype._checkTileSettings=function(p,o){if(!p.modifiedTiles){return;}o.modifiedTiles=p.modifiedTiles;};
P.prototype._applyTileSettings=function(s,p){var g,m;if(!p.modifiedTiles){return;}g=Object.keys(s.groups).map(function(k){return this[k];},s.groups);m=Object.keys(p.modifiedTiles).map(function(k){return this[k];},p.modifiedTiles);g.some(function(G){["tiles","links"].forEach(function(t){if(G.payload[t]){G.payload[t].some(function(T){var i;m.some(function(u,I){if(u.id===T.id){if(u.title!==undefined){T.title=u.title;}if(u.subTitle!==undefined){T.subTitle=u.subTitle;}if(u.info!==undefined){T.info=u.info;}i=I;return true;}return false;});if(i!==undefined){m.splice(i,1);}return m.length===0;});}});return m.length===0;});s.modifiedTiles=p.modifiedTiles;};
P.prototype._checkGroupVisibility=function(g,p,o,a){if(g&&p&&o){if(o[g]){if(p[g].identification.isVisible!==o[g].identification.isVisible&&typeof p[g].identification.isVisible==="boolean"){a=a||{};a.groups=a.groups||{};a.groups[g]=a.groups[g]||{};a.groups[g].identification=a.groups[g].identification||{};a.groups[g].identification.isVisible=p[g].identification.isVisible;}}}return a;};
P.prototype._addGroupToPersonalizationDelta=function(p,o,g){var s=false,G,n;if(p&&p.site&&p.site.payload&&p.site.payload.groupsOrder&&p.groups&&g&&p.groups[g]&&o){G=p.site.payload.groupsOrder;n=p.groups[g];o.addedGroups=o.addedGroups||{};o.addedGroups[g]={};o.addedGroups[g].identification=jQuery.extend({},n.identification);o.addedGroups[g].payload=jQuery.extend({},n.payload);o.addedGroups[g].payload.tiles=[];o.addedGroups[g].payload.links=[];o.groupOrder=G;s=true;}return s;};
P.prototype.extractPersonalization=function(p,o){var d=new jQuery.Deferred(),a,b={},O,e,t=this;if(p&&p.groups&&o&&o.groups){a=p.groups;O=o.groups;e=this._getExtractHelperObject(o,p,b);Object.keys(O).forEach(function(g){t._checkRemoveGroup(p,b,g);t._extractFromOriginalSiteOneGroup(o,e,g,"tiles");t._extractFromOriginalSiteOneGroup(o,e,g,"links");});Object.keys(a).forEach(function(g){if(O[g]){t._checkRenameGroup(g,a,O,b);t._checkGroupVisibility(g,a,O,b);}else{t._addGroupToPersonalizationDelta(p,b,g);}t._extractFromPersonalizedSiteOneGroup(p,e,g,"tiles");t._extractFromPersonalizedSiteOneGroup(p,e,g,"links");});this._checkMoveGroup(p,o,b);this._checkTileSettings(p,b);this._cleanupRemovedGroups(o,b);if(e.oPersonalizationDelta.movedTiles&&jQuery.isEmptyObject(e.oPersonalizationDelta.movedTiles)){delete(e.oPersonalizationDelta.movedTiles);}if(e.oPersonalizationDelta.movedLinks&&jQuery.isEmptyObject(e.oPersonalizationDelta.movedLinks)){delete(e.oPersonalizationDelta.movedLinks);}}return d.resolve(b).promise();};
P.prototype._checkRemoveGroup=function(p,o,O){var s=false;if(p&&p.groups&&o&&O){if(!p.groups[O]){o.removedGroups=o.removedGroups||[];o.groupOrder=o.groupOrder||[];if(o.removedGroups.indexOf(O)===-1){o.removedGroups.push(O);}if(p.site&&p.site.payload&&p.site.payload.groupsOrder&&jQuery.isArray(p.site.payload.groupsOrder)){o.groupOrder=p.site.payload.groupsOrder.slice(0);}}s=true;}return s;};
P.prototype._applyRemoveGroup=function(o,g){var O,G,i;if(o&&o.groups&&o.site&&o.site.payload&&o.site.payload.groupsOrder&&g){O=o.groups;G=o.site.payload.groupsOrder;i=G.indexOf(g);if(!(i===-1)){G.splice(i,1);delete(O[g]);return true;}}return false;};
P.prototype._checkMoveGroup=function(p,o,a){var b,O,c=false,s=false;if(p.site&&p.site.payload&&jQuery.isArray(p.site.payload.groupsOrder)&&o.site&&o.site.payload&&jQuery.isArray(o.site.payload.groupsOrder)){b=p.site.payload.groupsOrder;O=o.site.payload.groupsOrder;if(b.length===O.length){c=(function(){var S=false,i;for(i=0;i<O.length;i++){if(O[i]!==b[i]){S=true;break;}}return S;})();if(c){a.groupOrder=b;s=true;}}}return s;};
P.prototype._applyMoveGroup=function(o,p){var s=false;if(jQuery.isArray(p.groupOrder)){o.site=o.site||{};o.site.payload=o.site.payload||{};if(!jQuery.isArray(o.site.payload.groupsOrder)){o.site.payload.groupsOrder=[];}if(o.site.payload.groupsOrder.length===p.groupOrder.length){o.site.payload.groupsOrder=p.groupOrder;s=true;}}return s;};
P.prototype._getHashedItemsFromSite=function(s){var r=null;if(s&&s.groups){if(Object.keys(s.groups).length>0){r={};Object.keys(s.groups).forEach(function(g){var G=s.groups[g],a;r[g]={};if(G.payload){["tiles","links"].forEach(function(t){r[g][t]={};if(jQuery.isArray(G.payload[t])){a=G.payload[t];a.forEach(function(i,I){var b;if(i.id){b=i.id;r[g][t][b]={iIndex:I,sItemId:i};}});}});}});}}return r;};
P.prototype._getExtractHelperObject=function(o,p,a){var r=null;r={};r.oHashedItemsOriginal=this._getHashedItemsFromSite(o)||{};r.oHashedItemsPersonalized=this._getHashedItemsFromSite(p);r.oPersonalizationDelta=a;return r;};
P.prototype._extractFromOriginalSiteOneGroup=function(o,e,g,i){var s=false,O,m,M,p="movedTiles";i=i?i:"tiles";if(i!=="tiles"){p="movedLinks";}M=function(a,f){m[a]=m[a]?m[a]:{};m[a].fromGroup=f;m[a].toGroup=null;};if(e&&e.oHashedItemsPersonalized&&e.oPersonalizationDelta&&o&&o.groups&&o.groups[g]&&o.groups[g].payload&&jQuery.isArray(o.groups[g].payload[i])){O=o.groups[g].payload[i];e.oPersonalizationDelta[p]=e.oPersonalizationDelta[p]?e.oPersonalizationDelta[p]:{};m=e.oPersonalizationDelta[p];if(e.oHashedItemsPersonalized[g]){O.forEach(function(I){if(!e.oHashedItemsPersonalized[g][i][I.id]){M(I.id,g);}});s=true;}else{O.forEach(function(I){M(I.id,g);});s=true;}}return s;};
P.prototype._handleItemChangeExtract=function(e,g,i){return false;};
P.prototype._extractFromPersonalizedSiteOneGroup=function(p,e,g,i){var s=false,m,t,T=false,a,b=this,c="movedTiles";i=i?i:"tiles";if((i!=="tiles")&&(i!=="links")){return s;}if(i!=="tiles"){c="movedLinks";}if(e&&e.oPersonalizationDelta&&p&&p.groups&&p.groups[g]&&p.groups[g].payload&&jQuery.isArray(p.groups[g].payload[i])){a=p.groups[g].payload[i];e.oPersonalizationDelta[c]=e.oPersonalizationDelta[c]?e.oPersonalizationDelta[c]:{};m=e.oPersonalizationDelta[c];t=[];a.forEach(function(I,d){t.push(I.id);if(e.oHashedItemsOriginal[g]&&e.oHashedItemsOriginal[g][i][I.id]){if(m[I.id]){jQuery.sap.log.error("Extract personalization failed","The Tile ID "+I.id+" is not unique in the site","PersonalizationProcessor");delete(m[I.id]);}if(e.oHashedItemsOriginal[g][i][I.id].iIndex!==d){T=true;}b._handleItemChangeExtract(e,g,i);}else{T=true;if(m[I.id]){if(m[I.id].fromGroup&&(m[I.id].fromGroup!==g)){if(!m[I.id].toGroup){m[I.id].toGroup=g;b._handleItemChangeExtract(e,g,i);}}}else{m[I.id]={};m[I.id].fromGroup=null;m[I.id].toGroup=g;m[I.id].item=I;}}});if(T){e.oPersonalizationDelta.groups=e.oPersonalizationDelta.groups||{};e.oPersonalizationDelta.groups[g]=e.oPersonalizationDelta.groups[g]||{};e.oPersonalizationDelta.groups[g].payload=e.oPersonalizationDelta.groups[g].payload||{};if(i==="tiles"){e.oPersonalizationDelta.groups[g].payload.tileOrder=t;}else{e.oPersonalizationDelta.groups[g].payload.linkOrder=t;}}s=true;}return s;};
P.prototype._cleanupRemovedGroups=function(o,p){var i,m;if(p.removedGroups&&p&&jQuery.isArray(p.removedGroups)&&(p.removedGroups.length>0)){p.removedGroups.forEach(function(g){if(o&&o.groups&&o.groups[g]&&o.groups[g].payload){[{sType:"tiles",sPersonalizationDeltaType:"movedTiles"},{sType:"links",sPersonalizationDeltaType:"movedLinks"}].forEach(function(t){if(jQuery.isArray(o.groups[g].payload[t.sType])){i=o.groups[g].payload[t.sType];i.forEach(function(I){if(p[t.sPersonalizationDeltaType]){m=p[t.sPersonalizationDeltaType][I.id];if(m&&m.fromGroup&&(m.fromGroup===g)&&!m.toGroup){delete(p[t.sPersonalizationDeltaType][I.id]);}}});}});}});}};
P.prototype._setItemOrderOnSiteCollection=function(o,i){var s=true,S=o.length,a,b={},I,c,C,f;if(!jQuery.isArray(o)||!jQuery.isArray(o)||(o.length!==i.length)){return false;}a=o.splice(0,o.length);for(I=0;I<i.length;I++){C=i[I];c=a.shift();if(c&&C===c.id){o.push(c);}else if(b[C]){o.push(b[C]);delete(b[C]);if(c){b[c.id]=c;}}else if(c){b[c.id]=c;f=false;while(a.length>0){c=a.shift();if(C===c.id){o.push(c);f=true;break;}else{b[c.id]=c;}}if(!f){s=false;}}}if(o.length!==S){s=false;}return s;};
P.prototype._setItemOrderOnSiteGroupForItemType=function(o,d,i){var s=true,t,I;if((i==="tiles")||(i==="links")){I=(i==="tiles")?"tileOrder":"linkOrder";}else{return false;}if(d.payload&&jQuery.isArray(d.payload[I])&&(d.payload[I].length>0)){if(o.payload&&jQuery.isArray(o.payload[i])&&(o.payload[i].length>0)){t=this._setItemOrderOnSiteCollection(o.payload[i],d.payload[I]);if(!t){s=false;}}else{s=false;}}return s;};
P.prototype._setItemOrderOnSite=function(o,p){var s=true,t,a=this;if(o.groups&&p.groups){Object.keys(p.groups).forEach(function(g){if(p.groups[g]&&o.groups[g]){t=a._setItemOrderOnSiteGroupForItemType(o.groups[g],p.groups[g],"tiles");if(!t){s=false;}t=a._setItemOrderOnSiteGroupForItemType(o.groups[g],p.groups[g],"links");if(!t){s=false;}}});}return s;};
P.prototype._applyMoveItemsWithoutOrder=function(o,p,i){var s=true,t,T,I="tileOrder",d,a,b,O=[],c=this;function f(C,g){var s=true;if(o.groups[g]&&o.groups[g].payload&&p.groups&&p.groups[g]&&p.groups[g].payload&&jQuery.isArray(p.groups[g].payload[I])&&(p.groups[g].payload[I].length>0)){if(!jQuery.isArray(o.groups[g].payload[i])){o.groups[g].payload[i]=[];}o.groups[g].payload[i].push(C);}else{s=false;}return s;}if((i==="tiles")||(i==="links")){T=(i==="tiles")?"movedTiles":"movedLinks";I=(i==="tiles")?"tileOrder":"linkOrder";}else{return false;}if(!o||!o.groups||!o.site||!o.site.payload||!jQuery.isArray(o.site.payload.groupsOrder)||!p){return false;}if(p[T]){Object.keys(p[T]).forEach(function(e){d=p[T][e];if(d.fromGroup){if(d.toGroup){if(d.fromGroup!==d.toGroup){if(o.groups[d.fromGroup]&&o.groups[d.fromGroup].payload&&jQuery.isArray(o.groups[d.fromGroup].payload[i])){O=o.groups[d.fromGroup].payload[i];a=c._getItemIndex(O,e);if(a>=0){b=O.splice(a,1);t=f(b[0],d.toGroup);if(!t){s=false;}}else{s=false;}}else{s=false;}}else{s=false;}}else{if(o.groups[d.fromGroup]&&o.groups[d.fromGroup].payload&&jQuery.isArray(o.groups[d.fromGroup].payload[i])){O=o.groups[d.fromGroup].payload[i];a=c._getItemIndex(O,e);if(a>=0){O.splice(a,1);}else{s=false;}}else{s=false;}}}else if(d.toGroup){if(d.item&&!jQuery.isEmptyObject(d.item)){t=f(d.item,d.toGroup);if(!t){s=false;}}else{s=false;}}else{s=false;}});}return s;};
P.prototype._applyItemChanges=function(o,p){var s=true,S;S=this._applyMoveItemsWithoutOrder(o,p,"tiles");if(!S){s=false;}S=this._applyMoveItemsWithoutOrder(o,p,"links");if(!S){s=false;}if(p.groups){S=this._setItemOrderOnSite(o,p);if(!S){s=false;}}return s;};
return P;});
sap.ui.predefine('sap/ushell/services/_CrossApplicationNavigation/utils',[],function(){"use strict";
function a(g){return p(g).filter(function(P){return Object.keys(P.options).length>0;}).map(function(P){return{name:P.name,options:P.options};});}
function b(g){return p(g).reduce(function(r,P){r[P.name]=P.value;return r;},{});}
function p(g){if(Object.prototype.toString.apply(g)!=="[object Object]"){return[];}var P=JSON.parse(JSON.stringify(g));return Object.keys(P).map(function(e){var v=P[e];var o={};if(Object.prototype.toString.apply(v)==="[object Object]"){v=v.value;delete P[e].value;o=P[e];}return{name:e,value:v,options:o};});}
function s(o){try{return JSON.parse(o);}catch(e){jQuery.sap.log.error("Cannot parse the given string to object",o,"sap.ushell.services.CrossApplicationNavigation");}return null;}
function c(D){var A=sap.ushell.Container.getService("AppState");var o=A.createEmptyAppState(null);o.setData(D);o.save();return o.getKey();}
function d(I,P){var e,g=null,u;if(typeof I==="string"){if(I.indexOf(P+"=")===-1){return{intent:I,data:null};}u=sap.ushell.Container.getService("URLParsing");var o=u.parseShellHash(I);if(!o){return{intent:I,data:null};}g=o.params[P];delete o.params[P];e=u.constructShellHash(o);return{intent:e,data:g};}if(Object.prototype.toString.apply(I)==="[object Object]"){var S=jQuery.sap.getObject("target.shellHash",undefined,I);if(typeof S==="string"){var r=d(S,P);I.target.shellHash=r.intent;return{intent:I,data:r.data};}var h=I.params;if(h&&h[P]){g=typeof h[P]==="string"?[h[P]]:h[P];delete h[P];}return{intent:I,data:g};}jQuery.sap.log.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:I};}
function f(I,S){var v,x,A,X,e;x=d(I,S);v=x.intent;X=x.data&&x.data[0];if(!X){return;}A=s(X);if(!A){return;}e=c(A);i(v,"sap-xapp-state",e);}
function i(I,P,v){if(typeof I==="string"){var u=sap.ushell.Container.getService("URLParsing");var o=u.parseShellHash(I);o.params[P]=v;return u.constructShellHash(o);}if(Object.prototype.toString.apply(I)==="[object Object]"){var S=jQuery.sap.getObject("target.shellHash",undefined,I);if(typeof S==="string"){I.target.shellHash=i(S,P,v);return I;}if(!I.params){I.params={};}I.params[P]=v;}return I;}
return{extractGetLinksParameterDefinition:b,extractGetLinksParameterOptions:a,parseGetLinksParameters:p,extractParameter:d,injectParameter:i,safeParseToObject:s,createAppStateFromData:c,addXAppStateFromParameter:f};},false);
sap.ui.predefine('sap/ushell/services/_Personalization/ContextContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ui/core/format/DateFormat","sap/ui/core/UIComponent"],function(u,p,c,D,U){"use strict";
function C(){this._init.apply(this,arguments);}
;
C.prototype._init=function(s,a,b,S,o){this._oService=s;this._sContainerKey=b;this._oAdapterContainer={};this._oScope=S||p.adjustScope(S);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;var A;if(!(o instanceof U)&&o!==undefined){throw new Error("oComponent passed must be a UI5 Component or must be undefined");}if(o&&o.getMetadata&&o.getMetadata().getComponentName){A=o.getMetadata().getComponentName();}this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._oAdapterContainer=a.getAdapterContainer(this._sContainerKey,this._oScope,A);return this;};
C.prototype.getValidity=function(){return this._oScope.validity;};
C.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new u.Map();};
C.prototype.load=function(){var d={},P,t=this;d=new jQuery.Deferred();if(!this._sContainerKey){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this.clear();P=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,d);P.always(function(){t._oAdapterContainer.load().fail(function(){d.reject();}).done(function(){t._copyFromAdapter();if(t._isExpired()){t.clear();}d.resolve();});});return d.promise();};
C.prototype._copyFromAdapter=function(){var t=this,a;a=t._oAdapterContainer.getItemKeys().splice(0);a.forEach(function(i){t._oItemMap.put(i,JSON.stringify(t._oAdapterContainer.getItemValue(i)));});this._aLoadedItemKeys=t._oItemMap.keys().splice(0);};
C.prototype._isExpired=function(){var f,t,T;if(this.getValidity()===Infinity||this.getValidity()===0){return false;}t=this._getItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE);f=D.getDateInstance({pattern:c.S_ABAPTIMESTAMPFORMAT});T=f.format(this._getNow(),true);return t&&T>t;};
C.prototype._getNow=function(){return new Date();};
C.prototype._copyToAdapterUpdatingValidity=function(){var i=[],d=[],t=this,n,f,T,s;if(this._clear){i=this._oAdapterContainer.getItemKeys().splice(0);i.forEach(function(I){t._oAdapterContainer.delItem(I);});this._clear=false;}if(this.getValidity()===Infinity||this.getValidity()===0){this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_SCOPE);this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE);this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_STORAGE);}else{f=D.getDateInstance({pattern:c.S_ABAPTIMESTAMPFORMAT});n=this._getNow();s=f.format(n,true);T=f.format(new Date(n.getTime()+this.getValidity()*60000),true);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_SCOPE,this._oScope);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE,T);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_STORAGE,s);}i=this._oItemMap.keys();i.forEach(function(I){t._oAdapterContainer.setItemValue(I,p.cloneToObject(t._oItemMap.get(I)));});d=this._aLoadedItemKeys.filter(function(I){return!(i.indexOf(I)>-1);});d.forEach(function(I){t._oAdapterContainer.delItem(I);});};
C.prototype.save=function(){var s,P,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();P=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);P.always(function(){try{t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});return s.promise();};
C.prototype.saveDeferred=function(n){var s,P,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();P=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);function d(){P.always(function(){try{t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});}s._sapFnSave=d;s._sapTimeoutId=setTimeout(d,n);return s.promise();};
C.prototype.flush=function(){var s,P;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();P=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,s);P.fail(function(){s.reject();}).done(function(){s.resolve();});return s.promise();};
C.prototype.getItemKeys=function(){var f=this._oItemMap.keys().filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)===0;});return f.map(function(e){return e.replace(c.S_ITEM_PREFIX,"","");});};
C.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0);};
C.prototype.getItemValue=function(i){return this._getItemValueInternal(c.S_ITEM_PREFIX,i);};
C.prototype._getItemValueInternal=function(P,i){if(typeof i!=="string"||typeof P!=="string"){return undefined;}return p.cloneToObject(this._oItemMap.get(P+i));};
C.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(c.S_ITEM_PREFIX+i);};
C.prototype.setItemValue=function(i,I){this._setItemValueInternal(c.S_ITEM_PREFIX,i,I);};
C.prototype._setItemValueInternal=function(i,I,o){if(typeof I!=="string"||typeof i!=="string"){throw new u.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization"," ");}if(I.length>40){jQuery.sap.log.error("Personalization Service item key/variant set name (\""+I+"\") should be less than 40 characters [current :"+I.length+"]");}this._oItemMap.put(i+I,JSON.stringify(o));};
C.prototype.delItem=function(i){this._delItemInternal(c.S_ITEM_PREFIX,i);};
C.prototype._delItemInternal=function(P,i){if(typeof i!=="string"){return undefined;}if(typeof P!=="string"){return undefined;}this._oItemMap.remove(P+i);};
C.prototype.getKey=function(){return this._sContainerKey.substring(c.S_CONTAINER_PREFIX.length);};
C.prototype.getUnmodifiableContainer=function(){var t=this;if(!this._oUnmodifiableContainer){this._oUnmodifiableContainer=(function(){var o={};["clear","delItem","flush","load","save","saveDeferred","setItemValue"].forEach(function(f){o[f]=function(n){throw new u.Error("Function "+n+" can't be called on unmodifiable container","ContextContainer"," ");}.bind(undefined,f);});["containsItem","getItemKeys","getItemValue","getUnmodifiableContainer","getValidity"].forEach(function(f){if(t[f]){o[f]=t[f].bind(t);}});return o;}());}return this._oUnmodifiableContainer;};
return C;});
sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariantSet"],function(u,p,c,P){"use strict";
function a(A,C){this._sContainerKey=C;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var d={},t=this;this._init();d=new jQuery.Deferred();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._oAdapterContainer=A.getAdapterContainer(this._sContainerKey);this.load().fail(function(){d.reject();}).done(function(){d.resolve(t);});return d.promise();}
;
a.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new u.Map();this._oItemMap=new u.Map();};
a.prototype.load=function(){var d={},i=[],v=[],I=[],m=[],t=this;function b(I){var n=[],e=[];n=I.filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)!==0;});if(n.length===0){return I;}e=I.filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)===0;});n.forEach(function(s){var o={},f="";f=c.S_ITEM_PREFIX+s;o=p.clone(t._oAdapterContainer.getItemValue(s));t._oAdapterContainer.setItemValue(f,o);t._oAdapterContainer.delItem(s);if(jQuery.inArray(f,e)===-1){e.push(f);}});return e;}d=new jQuery.Deferred();if(!this._sContainerKey){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._init();this._oAdapterContainer.load().fail(function(){d.reject();}).done(function(){i=t._oAdapterContainer.getItemKeys().splice(0);v=i.filter(function(s){return s.indexOf(c.S_VARIANT_PREFIX)===0;});v.forEach(function(V){var o={};o=new P(V,t._oAdapterContainer);t._oVariantSetMap.put(V,o);});I=i.filter(function(s){return s.indexOf(c.S_VARIANT_PREFIX)!==0;});m=b(I);m.forEach(function(s){t._oItemMap.put(s,p.clone(t._oAdapterContainer.getItemValue(s)));});t._aLoadedVariantSetKeys=t._oVariantSetMap.keys().splice(0);t._aLoadedItemKeys=t._oItemMap.keys().splice(0);d.resolve();});return d.promise();};
a.prototype.save=function(){var s,i;this._serializeVariantSets();this._serializeItems();s=new jQuery.Deferred();function S(){s.resolve();}function f(){s.reject();}try{i=this._oAdapterContainer.save();i.fail(f);i.done(S);}catch(e){s.reject();}return s.promise();};
a.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(e){return e.replace(c.S_ITEM_PREFIX,"","");});};
a.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(c.S_ITEM_PREFIX+i);};
a.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(c.S_ITEM_PREFIX+i);};
a.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}this._oItemMap.put(c.S_ITEM_PREFIX+i,I);};
a.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}if(this.containsItem(i)){this._oItemMap.remove(c.S_ITEM_PREFIX+i);}};
a.prototype._serializeItems=function(){var i=[],d=[],t=this;i=this._oItemMap.keys();i.forEach(function(I){t._oAdapterContainer.setItemValue(I,p.clone(t._oItemMap.get(I)));});d=this._aLoadedItemKeys.filter(function(I){return!(i.indexOf(I)>-1);});d.forEach(function(I){t._oAdapterContainer.delItem(I);});};
a.prototype.getVariantSetKeys=function(){var v=[],b=[];b=this._oVariantSetMap.keys();v=b.map(function(e){return e.replace(c.S_VARIANT_PREFIX,"","");});return v;};
a.prototype.containsVariantSet=function(v){return this._oVariantSetMap.containsKey(c.S_VARIANT_PREFIX+v);};
a.prototype.getVariantSet=function(v){var s,V={};s=c.S_VARIANT_PREFIX+v;V=this._oVariantSetMap.get(s);return V;};
a.prototype.addVariantSet=function(v){var e={},V={},s="";if(this.containsVariantSet(v)){throw new u.Error("Container already contains a variant set with key '"+v+"': sap.ushell.services.Personalization"," ");}s=c.S_VARIANT_PREFIX+v;e={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(s,e);V=new P(s,this._oAdapterContainer);this._oVariantSetMap.put(s,V);return V;};
a.prototype._serializeVariantSets=function(){var v=[],d=[],t=this;v=this._oVariantSetMap.keys();v.forEach(function(V){var o={},b={};o=t._oVariantSetMap.get(V);b=o._serialize();t._oAdapterContainer.setItemValue(V,p.clone(b));});d=this._aLoadedVariantSetKeys.filter(function(V){return!(v.indexOf(V)>-1);});d.forEach(function(V){t._oAdapterContainer.delItem(V);});};
a.prototype.delVariantSet=function(v){var s="";s=c.S_VARIANT_PREFIX+v;this._oVariantSetMap.remove(s);return this._oAdapterContainer.delItem(s);};
return a;});
sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainerVariant',["sap/ushell/utils"],function(u){"use strict";
function P(v,V,o){if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ");}if(typeof V!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(o&&typeof o!=="object"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}this._oVariantKey=v;this._oVariantName=V;this._oItemMap=new u.Map();this._oItemMap.entries=o||{};}
;
P.prototype.getVariantKey=function(){return this._oVariantKey;};
P.prototype.getVariantName=function(){return this._oVariantName;};
P.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(i);};
P.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}return this._oItemMap.put(i,I);};
P.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(i);};
P.prototype.getItemKeys=function(){return this._oItemMap.keys();};
P.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.remove(i);};
P.prototype._serialize=function(){var i=[],v={},I={},t=this;v.name=this.getVariantName();i=this._oItemMap.keys();i.forEach(function(s){I[s]=t.getItemValue(s);});v.variantData=I;return v;};
return P;});
sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainerVariantSet',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/PersonalizationContainerVariant"],function(u,p,P){"use strict";
function c(v,a){var V,s,b,o,d;this._sVariantSetKey=v;this._oAdapterContainer=a;this._oVariantNameMap=new u.Map();this._oVariantMap=new u.Map();V=p.clone(this._oAdapterContainer.getItemValue(v));if(V.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=V.currentVariant;}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}if(V.hasOwnProperty("variants")){for(s in V.variants){if(V.variants.hasOwnProperty(s)){b=V.variants[s].name;o=V.variants[s].variantData;if(this._oVariantNameMap.containsKey(b)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{this._oVariantNameMap.put(b,s);d=new P(s,b,o);this._oVariantMap.put(s,d);}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return this;}
;
c.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey;};
c.prototype.setCurrentVariantKey=function(v){this._sCurrentVariantKey=v;};
c.prototype.getVariantKeys=function(){return this._oVariantMap.keys();};
c.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries));};
c.prototype.getVariant=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantMap.get(v);};
c.prototype.getVariantKeyByName=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantNameMap.get(v);};
c.prototype.containsVariant=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantMap.containsKey(v);};
c.prototype.addVariant=function(v){var m=0,V="",o={};m=parseInt(this._oVariantMap.keys().sort(function(a,b){return a-b;}).reverse()[0],10);V=isNaN(m)?"0":(m+1).toString();if(this._oVariantMap.containsKey(V)){throw new u.Error("Variant key '"+V+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this._oVariantNameMap.containsKey(v)){throw new u.Error("Variant name '"+v+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(v)+"' New key: '"+V+"') ': sap.ushell.services.Personalization"," ");}o=new P(V,v);this._oVariantMap.put(V,o);this._oVariantNameMap.put(v,V);return o;};
c.prototype._serialize=function(){var v=[],V={},o={},t=this;V.currentVariant=this._sCurrentVariantKey;v=this.getVariantKeys();v.forEach(function(s){var a={};a=t._oVariantMap.get(s);o[s]=a._serialize();});V.variants=o;return V;};
c.prototype.delVariant=function(v){var V=this._oVariantMap.get(v);if(V){this._oVariantNameMap.remove(V.getVariantName());this._oVariantMap.remove(v);}};
return c;});
sap.ui.predefine('sap/ushell/services/_Personalization/Personalizer',["sap/ushell/utils"],function(u){"use strict";
function P(s,a,p,S,c){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=a;this._oService=s;this._oScope=S;this._oComponent=c;if(!p||!p.container||!p.item||typeof p.container!=="string"||typeof p.item!=="string"){throw new u.Error("Invalid input for oPersId: sap.ushell.services.Personalization"," ");}this._sPersContainer=p.container;this._sPersItem=p.item;}
;
P.prototype._getContainer=function(p){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(p,this._oScope,this._oComponent);}return this._oGetContainerPromise;};
P.prototype.getPersData=function(){var d={},t=this;d=new jQuery.Deferred();this._getContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){d.resolve(c.getItemValue(t._sPersItem));});d.fail(function(){jQuery.sap.log.error("Fail to get Personalization data for Personalizer container: "+t._sPersContainer);});return d.promise();};
P.prototype.setPersData=function(v){var d={},t=this;d=new jQuery.Deferred();this._getContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){c.setItemValue(t._sPersItem,v);c.save().fail(function(){d.reject();}).done(function(){d.resolve();});});d.fail(function(){jQuery.sap.log.error("Fail to set Personalization data for Personalizer container: "+t._sPersContainer);});return d.promise();};
P.prototype.delPersData=function(){var d={},t=this,m;d=new jQuery.Deferred();this._oService.getPersonalizationContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){c.delItem(t._sPersItem);c.save().fail(function(){d.reject();}).done(function(){d.resolve();});});m=d.promise();m.fail(function(){jQuery.sap.log.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer);});return m;};
return P;});
sap.ui.predefine('sap/ushell/services/_Personalization/TransientPersonalizer',[],function(){"use strict";
function T(){this._oValue=undefined;}
;
T.prototype.getPersData=function(){var d;d=new jQuery.Deferred();d.resolve(this._oValue);return d.promise();};
T.prototype.setPersData=function(v){var d;d=new jQuery.Deferred();this._oValue=v;d.resolve();return d.promise();};
T.prototype.delPersData=function(){var d;d=new jQuery.Deferred();this._oValue=undefined;d.resolve();return d.promise();};
T.prototype.setValue=function(v){this._oValue=v;};
T.prototype.getValue=function(){return this._oValue;};
return T;});
sap.ui.predefine('sap/ushell/services/_Personalization/Variant',["sap/ushell/utils","sap/ushell/services/_Personalization/utils"],function(u,p){"use strict";
function V(v,s,a){if(typeof s!=="string"){throw new u.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ");}if(typeof a!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}this._oVariantSet=v;this._sVariantKey=s;this._sVariantName=a;}
;
V.prototype.getVariantKey=function(){return this._sVariantKey;};
V.prototype.getVariantName=function(){return this._sVariantName;};
V.prototype.setVariantName=function(v){var o=this._oVariantSet._getVariantSet(),a;if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this._oVariantSet.getVariantKeyByName(v)!==undefined){throw new u.Error("Variant with name '"+v+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,this._sVariantKey)){a=o.variants[this._sVariantKey];a.name=v;this._sVariantName=v;this._oVariantSet._serialize();}else{throw new u.Error("Variant does not longer exist"," ");}};
V.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}var v=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(v,i)&&p.clone(v[i]);};
V.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}var v,a=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!a){throw new u.Error("Variant does not longer exist"," ");}if(!a.variantData){a.variantData={};}v=a.variantData;v[i]=p.clone(I);this._oVariantSet._serialize();};
V.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}var v=this.oAccess.variantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(v,i);};
V.prototype.getItemKeys=function(){var v=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,i,I=[];for(i in v){if(Object.prototype.hasOwnProperty.call(v,i)){I.push(i);}}I.sort();return I;};
V.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}var v=this.oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete v[i];this.oVariantSet._serialize();};
return V;});
sap.ui.predefine('sap/ushell/services/_Personalization/VariantSet',["sap/ushell/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariant","sap/ushell/services/_Personalization/Variant"],function(u,c,P,V){"use strict";
function d(v,C){var s,a,o=new u.Map(),b=new u.Map(),e,f;this._oContextContainer=C;this._sVariantSetKey=v;this._oVariantSetData=this._oContextContainer._getItemValueInternal(c.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(s in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,s)){a=this._oVariantSetData.variants[s].name;e=this._oVariantSetData.variants[s].variantData;if(o.containsKey(a)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{o.put(a,s);f=new P(s,a,e);b.put(s,f);}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return this;}
d.prototype._getVariantSet=function(){return this._oVariantSetData;};
d.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(c.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData);};
d.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant;};
d.prototype.setCurrentVariantKey=function(v){this._getVariantSet().currentVariant=v;this._serialize();};
d.prototype.getVariantKeys=function(){var v=new u.Map(),o=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(o,"variants")){for(s in o.variants){if(Object.prototype.hasOwnProperty.call(o.variants,s)){v.put(s,"dummy");}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return v.keys();};
d.prototype.getVariantNamesAndKeys=function(){var v=new u.Map(),o=new u.Map(),a=this._getVariantSet(this._sVariantSetKey),s,b;if(Object.prototype.hasOwnProperty.call(a,"variants")){for(s in a.variants){if(Object.prototype.hasOwnProperty.call(a.variants,s)){b=a.variants[s].name;if(v.containsKey(b)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{v.put(b,s);}o.put(s,"dummy");}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return v.entries;};
d.prototype.getVariant=function(v){if(typeof v!=="string"){return undefined;}var o=this._getVariantSet(this._sVariantSetKey),s,a,b;if(Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,v)){s=o.variants[v].name;b=o.variants[v].variantData;a=new V(this,v,s,b);return a;}return undefined;};
d.prototype.getVariantKeyByName=function(v){if(typeof v!=="string"){return undefined;}var o=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(o,"variants")){for(s in o.variants){if(Object.prototype.hasOwnProperty.call(o.variants,s)){if(v===o.variants[s].name){return s;}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return undefined;};
d.prototype.containsVariant=function(v){var o=this._getVariantSet();if(typeof v!=="string"){return undefined;}return Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,v);};
d.prototype.addVariant=function(v){var k=[],m=0,s="",o={};k=this.getVariantKeys();m=parseInt(k.sort(function(a,b){return a-b;}).reverse()[0],10);s=isNaN(m)?"0":(m+1).toString();if(k.indexOf(s)>=0){throw new u.Error("Variant key '"+s+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this.getVariantKeyByName(v)!==undefined){throw new u.Error("Variant name '"+v+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(v)+"' New key: '"+s+"') ': sap.ushell.services.Personalization"," ");}o=new V(this,s,v);this._getVariantSet(this._sVariantSetKey).variants[s]={name:v,variantData:{}};this._serialize();return o;};
d.prototype.delVariant=function(v){var o;if(typeof v!=="string"){return undefined;}o=this._getVariantSet();if(o&&o.variants){delete this._oVariantSetData.variants[v];}this._serialize();};
return d;});
sap.ui.predefine('sap/ushell/services/_Personalization/VariantSetAdapter',["sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/VariantSet"],function(c,u,V){"use strict";
function a(C){this._oContextContainer=C;}
;
a.prototype.save=function(){return this._oContextContainer.save();};
a.prototype.getVariantSetKeys=function(){var p=this._oContextContainer._getInternalKeys(),v=[];v=p.map(function(e){return e.replace(c.S_VARIANT_PREFIX,"","");});return v;};
a.prototype.containsVariantSet=function(v){return this.getVariantSetKeys().indexOf(v)>=0;};
a.prototype.getVariantSet=function(v){var o=this._oContextContainer._getItemValueInternal(c.S_VARIANT_PREFIX,v);if(!o){return undefined;}return new V(v,this._oContextContainer);};
a.prototype.addVariantSet=function(v){var e={},o={};if(this.containsVariantSet(v)){throw new u.Error("Container already contains a variant set with key '"+v+"': sap.ushell.services.Personalization"," ");}e={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(c.S_VARIANT_PREFIX,v,e);o=new V(v,this._oContextContainer);return o;};
a.prototype.delVariantSet=function(v){this._oContextContainer._delItemInternal(c.S_VARIANT_PREFIX,v);};
return a;});
sap.ui.predefine('sap/ushell/services/_Personalization/WindowAdapter',[],function(){"use strict";var W=function(p,b){this._oBackendAdapter=b;if(b){this.supportsGetWithoutSubsequentLoad=b.supportsGetWithoutSubsequentLoad;}};W.prototype.data={};
W.prototype.getAdapterContainer=function(c,s,a){var b=this._oBackendAdapter&&this._oBackendAdapter.getAdapterContainer(c,s,a);var d=sap.ui.requireSync("sap/ushell/services/_Personalization/WindowAdapterContainer");return new d(c,s,b);};
W.prototype.delAdapterContainer=function(c,s){var d=new jQuery.Deferred();delete W.prototype.data[c];if(this._oBackendAdapter){this._oBackendAdapter.delAdapterContainer(c,s).done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}return d.promise();};
return W;});
sap.ui.predefine('sap/ushell/services/_Personalization/WindowAdapterContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/WindowAdapter"],function(u,p,W){"use strict";
function a(C,s,b){this._oBackendContainer=b;this._oItemMap=new u.Map();this._sContainerKey=C;}
;
function c(C){var i,k=C.getItemKeys();for(i=0;i<k.length;i=i+1){C.delItem(k[i]);}}
a.prototype.load=function(){var d=new jQuery.Deferred(),i,k,t=this;if(W.prototype.data[this._sContainerKey]){this._oItemMap.entries=p.clone(W.prototype.data[this._sContainerKey]);if(this._oBackendContainer){c(this._oBackendContainer);k=this.getItemKeys();for(i=0;i<k.length;i=i+1){this._oBackendContainer.setItemValue(k[i],this._oItemMap.get(k[i]));}}d.resolve();}else{if(this._oBackendContainer){this._oBackendContainer.load().done(function(){k=t._oBackendContainer.getItemKeys();for(i=0;i<k.length;i=i+1){t.setItemValue(k[i],t._oBackendContainer.getItemValue(k[i]));}W.prototype.data[t._sContainerKey]=p.clone(t._oItemMap.entries);d.resolve();}).fail(function(m){d.reject(m);});}else{W.prototype.data[this._sContainerKey]={};d.resolve();}}return d.promise();};
a.prototype.save=function(){var d=new jQuery.Deferred();W.prototype.data[this._sContainerKey]=p.clone(this._oItemMap.entries);if(this._oBackendContainer){this._oBackendContainer.save().done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}return d.promise();};
a.prototype.getItemKeys=function(){return this._oItemMap.keys();};
a.prototype.containsItem=function(i){this._oItemMap.containsKey(i);};
a.prototype.getItemValue=function(i){return this._oItemMap.get(i);};
a.prototype.setItemValue=function(i,I){this._oItemMap.put(i,I);if(this._oBackendContainer){this._oBackendContainer.setItemValue(i,I);}};
a.prototype.delItem=function(i){this._oItemMap.remove(i);if(this._oBackendContainer){this._oBackendContainer.delItem(i);}};
return a;});
sap.ui.predefine('sap/ushell/services/_Personalization/constants',[],function(){"use strict";return{keyCategory:{"FIXED_KEY":"FIXED_KEY","GENERATED_KEY":"GENERATED_KEY"},writeFrequency:{"HIGH":"HIGH","LOW":"LOW"}};});
sap.ui.predefine('sap/ushell/services/_Personalization/constants.private',[],function(){"use strict";return{S_CONTAINER_PREFIX:"sap.ushell.personalization#",S_ITEM_PREFIX:"ITEM#",S_VARIANT_PREFIX:"VARIANTSET#",S_ABAPTIMESTAMPFORMAT:"yyyyMMddHHmmss",S_ADMIN_PREFIX:"ADMIN#",S_ITEMKEY_SCOPE:"sap-ushell-container-scope",S_ITEMKEY_STORAGE:"sap-ushell-container-storageUTCTimestamp",S_ITEMKEY_EXPIRE:"sap-ushell-container-expireUTCTimestamp"};});
sap.ui.predefine('sap/ushell/services/_Personalization/utils',["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private"],function(c,p){"use strict";
function a(e,k){var m;for(m in k){if(typeof k[m]!=='function'){if(k.hasOwnProperty(m)){if(m===e){return true;}}}}return false;}
function b(C){if(C.length>40){jQuery.sap.log.error("Personalization Service container key (\""+C+"\") should be less than 40 characters [current :"+C.length+"]");}return p.S_CONTAINER_PREFIX+C;}
function d(o,L,t,P){if(o&&o.validity===0&&!L){return t;}return P;}
function i(){var r=window["sap-ushell-config"]&&window["sap-ushell-config"].services&&window["sap-ushell-config"].services.ShellNavigation&&window["sap-ushell-config"].services.ShellNavigation.config&&window["sap-ushell-config"].services.ShellNavigation.config.reload;return r;}
function f(s,L){var A={validity:Infinity,keyCategory:c.keyCategory.GENERATED_KEY,writeFrequency:c.writeFrequency.HIGH,clientStorageAllowed:false};if(s){A.validity=s.validity;if(A.validity===null||A.validity===undefined||typeof A.validity!=="number"){A.validity=Infinity;}if(!(typeof A.validity==="number"&&((A.validity>=0&&A.validity<1000)||A.validity===Infinity))){A.liftime=Infinity;}A.keyCategory=a(s.keyCategory,c.keyCategory)?s.keyCategory:A.keyCategory;A.writeFrequency=a(s.writeFrequency,c.writeFrequency)?s.writeFrequency:A.writeFrequency;if(typeof s.clientStorageAllowed==='boolean'&&(s.clientStorageAllowed===true||s.clientStorageAllowed===false)){A.clientStorageAllowed=s.clientStorageAllowed;}}if(A.validity===0&&L){A.validity=1440;}return A;}
function l(A){if(!A.lazy){return jQuery.when(A.instance);}try{return A.create.call(null);}catch(e){return new jQuery.Deferred().reject(e).promise();}}
function g(C){if(!C){return false;}var A=C.getManifestObject();if(!A){return false;}var s=A.getEntry("/sap.ui5/appVariantId");if(!s){return false;}var e=A.getComponentName();if(s===e){return false;}return true;}
function h(o){if(o===undefined){return undefined;}try{return JSON.parse(o);}catch(e){return undefined;}}
function j(o){if(o===undefined){return undefined;}try{return JSON.parse(JSON.stringify(o));}catch(e){return undefined;}}
return{adjustScope:f,cloneToObject:h,clone:j,addContainerPrefix:b,pickAdapter:d,isAppVariant:g,loadAdapter:l,isLaunchpadReload:i};});
sap.ui.predefine('sap/ushell/services/_Ui5ComponentLoader/utils',["sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ui/core/util/AsyncHintsHelper"],function(q,U,a){"use strict";var O={name:"core-ext-light",count:4,debugName:"core-ext-light-dbg",path:"sap/fiori/"};
function c(C,o){var D=new q.Deferred();C.componentData=o;C.async=true;sap.ui.component(C).then(function(t){D.resolve(t);},function(E){D.reject(E);});return D.promise();}
function s(S){var A=(S&&S.hasOwnProperty("amendedLoading"))?S.amendedLoading:true;return A;}
function b(A){var L=true;if(A.hasOwnProperty("loadCoreExt")){L=A.loadCoreExt;}return L;}
function d(A,S,o){var L=true;if(A.hasOwnProperty("loadDefaultDependencies")){L=A.loadDefaultDependencies;}if(S&&S.hasOwnProperty("loadDefaultDependencies")){L=L&&S.loadDefaultDependencies;}L=L&&o;return L;}
function e(P){var S=P.semanticObject||null;var A=P.action||null;if(!S||!A){return null;}return"application-"+S+"-"+A+"-component";}
function u(o){return o&&o.indexOf("?")>=0;}
function r(o){var t=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return o.replace(t,"");}
function f(o){if(!o){return o;}var I=o.indexOf("?");if(I>=0){return o.slice(0,I);}return o;}
function i(){return q.sap.isDeclared('sap.fiori.core',true)||q.sap.isDeclared('sap.fiori.core-ext-light',true);}
function l(A,E,o,t,C){var w="The issue is most likely caused by application "+A,x="Failed to load UI5 component with properties: '"+C+"'.";if(t){x+=" Error likely caused by:\n"+t;}else{x+=" Error: '"+E+"'";}if(o==="parsererror"){w+=", as one or more of its resources could not be parsed";}w+=". Please create a support incident and assign it to the support component of the respective application.";q.sap.log.error(w,x,A);}
function g(o){var P=q.sap.getUriParameters(o).mParams,x=P["sap-xapp-state"],R;delete P["sap-xapp-state"];R={startupParameters:P};if(x){R["sap-xapp-state"]=x;}return R;}
function h(A,M){if(!q.isArray(M)){return;}M.forEach(function(o){var S=String.prototype.toLowerCase.call(o.severity||"");S=["trace","debug","info","warning","error","fatal"].indexOf(S)!==-1?S:"error";q.sap.log[S](o.text,o.details,A);});}
function p(C){var B,o={name:"CoreResourcesComplement"};if(v(C)){B=C;}else{B=O;}if(window["sap-ui-debug"]===true){o.aResources=[B.path+B.debugName+".js"];}else{o.aResources=j(B.name,B.path,B.count);}return o;}
function j(B,P,R){var o=arguments[3]||[],t=P;if(typeof B!=="string"||typeof t!=="string"||typeof R!=="number"){q.sap.log.error("Ui5ComponentLoader: _buildBundleResourcesArray called with invalid arguments");return null;}if(t.substr(-1)!=="/"){t+="/";}if(R===1){o.push(t+B+".js");}if(o.length>=R){return o;}o.push(t+B+"-"+o.length+".js");return j(B,t,R,o);}
function v(C){var o=true;if(!C){return false;}if(!C.name||typeof C.name!=="string"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'name' property");o=false;}if(!C.count||typeof C.count!=="number"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'count' property");o=false;}if(!C.debugName||typeof C.debugName!=="string"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'debugName' property");o=false;}if(!C.path||typeof C.path!=="string"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'path' property");o=false;}return o;}
function k(B){if(!B||!Array.isArray(B.aResources)||!B.name){q.sap.log.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null;}var P=[],D=new q.Deferred();B.aResources.forEach(function(R){P.push(q.sap._loadJSResourceAsync(R));});Promise.all(P).then(function(){D.resolve();}).catch(function(){q.sap.log.error("Ui5ComponentLoader: failed to load bundle: "+B.name);D.reject();});return D.promise();}
function m(A,L,N,w,o,t,C,x,y){var z=q.extend(true,{},o);if(!z.asyncHints){z.asyncHints=L?{"libs":["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]}:{};}if(A){z.asyncHints.preloadBundles=z.asyncHints.preloadBundles||[];z.asyncHints.preloadBundles=z.asyncHints.preloadBundles.concat(y.aResources);}if(w){z.asyncHints.waitFor=w;}if(!z.name){z.name=t;}if(C){z.url=f(C);}if(x){z.id=x;}if(N&&z.asyncHints){a.modifyUrls(z.asyncHints,r);}return z;}
function n(B,C,A,t){var o=q.extend(true,{startupParameters:{}},B);if(A){o.config=A;}if(t){o.technicalParameters=t;}if(u(C)){var w=g(C);o.startupParameters=w.startupParameters;if(w["sap-xapp-state"]){o["sap-xapp-state"]=w["sap-xapp-state"];}}return o;}
return{constructAppComponentId:e,getParameterMap:g,isCoreExtAlreadyLoaded:i,logAnyApplicationDependenciesMessages:h,logInstantiateComponentError:l,shouldLoadCoreExt:b,shouldLoadDefaultDependencies:d,shouldUseAmendedLoading:s,urlHasParameters:u,removeParametersFromUrl:f,createUi5Component:c,prepareBundle:p,loadBundle:k,createComponentProperties:m,createComponentData:n,buildBundleResourcesArray:j};},false);
sap.ui.predefine('sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin',['sap/ui/core/support/Plugin','sap/ui/model/json/JSONModel','sap/m/Button','sap/m/IconTabBar','sap/m/IconTabFilter','sap/m/Label','sap/m/Text','sap/m/MessageStrip','sap/m/FlexBox','sap/ui/model/resource/ResourceModel','sap/m/SearchField','sap/m/MessageBox'],function(P,J,B,I,a,L,T,M,F,R,S,b){"use strict";var t=this,o,f=P.extend("sap.ushell.support.plugins.flpConfig.FlpConfigurationPlugin",{constructor:function(s){o=new R({bundleName:"sap/ushell/support/plugins/flpConfig/i18n/FlpConfigurationPlugin"});P.apply(this,["sapUiFlpConfigurationPlugin",o.getResourceBundle().getText("PLUGIN_NAME"),s]);this._oSupportStub=s;if(this.runsAsToolPlugin()){t=this;this._aEventIds=[this.getId()+"ReceiveData"];}else{this._aEventIds=[this.getId()+"RequestData"];}}});
f.prototype.isToolPlugin=function(){return true;};
f.prototype.isAppPlugin=function(){return true;};
f.prototype.init=function(s){P.prototype.init.apply(this,arguments);if(this.runsAsToolPlugin()){var r;setTimeout(function(){t.requestData();},500);r=sap.ui.getCore().createRenderManager();r.write("<div id='"+this.getId()+"'</div>").flush(this.$().get(0));r.destroy();}else{}};
f.prototype.exit=function(s){P.prototype.exit.apply(this,arguments);};
f.prototype.requestData=function(){this._oSupportStub.sendEvent(this.getId()+"RequestData",{eventData:{data:{}}});};
f.prototype.onsapUiFlpConfigurationPluginRequestData=function(E){var p={};this.prepareForSending(window["sap-ushell-config"],p);this._oSupportStub.sendEvent(this.getId()+"ReceiveData",{eventData:{data:p}});};
f.prototype.onsapUiFlpConfigurationPluginReceiveData=function(E){var t=this;this.flpConfig=E.getParameter("eventData").data;sap.ui.getCore().loadLibraries(["sap.ui.table"],{async:true}).then(function(){sap.ui.require(["sap/ui/table/TreeTable","sap/ui/table/Column"],function(i,C){t.getFlpConfigurationPluginUI(null,i,C);});});};
function _(E){var H=0,s=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getSelectedKey(),i=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel().getData();if(jQuery.isArray(i[s])){i[s].forEach(function(p,j){var k=d(i[s][j],s);if(H<k){H=k;}});if(H>0){sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+s).expandToLevel(H-1);}else{b.error(new L({text:sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel("i18n").getResourceBundle().getText("MISSING_HIERARCHY_LEVEL")}));}}}
function c(E){var s=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getSelectedKey();sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+s).collapseAll();}
f.prototype.onPressSearchNewModel=function(E){var p,q,r,A,s,u,v,w,V,x=[],y={},z="",C={},D={},G=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel("Full"),H=E.getParameter("query");if(!G){G=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel().getData();}else{G=G.getData();}Object.keys(G).forEach(function(K){y[K]=0;});if(H){for(var K in G){z=K;p=[];m(G[K],K,z,p,H);D[K]=p;}Object.keys(D).forEach(function(K){A=D[K];for(var i=0;i<A.length;i++){s=A[i].split(".");u=[];for(var j=0;j<s.length;j++){if(!isNaN(parseInt(s[j],10))){u.push(parseInt(s[j],10));}else{u.push(s[j]);}}for(var k=0;k<u.length;k+=2){v={"property":""};v[u[0]]=[];if(isNaN(parseInt(u[k],10))){q=u.slice(0,k+1);if(!e(C,q)&&typeof e(C,u.slice(0,u.length-2))!=='object'){l(C,q,[v],u[0],q.length);}V=e(G,u.slice(0,k+2));if(V&&e(C,u.slice(0,k+2))){h(C,V.property,u.slice(0,k+2).toString()+",property");}else if(k!==u.length-2){x.push(u.slice(0,k+2).toString());}}}r=u.slice(0);l(C,u,{'property':"",'value':""},u[0],q.length);V=e(G,r);if(V){h(C,V.value,r.toString()+",value");h(C,V.property,r.toString()+",property");}}x.forEach(function(z){V=e(G,z.split(","));if(V&&e(C,z.split(","))){h(C,V.property,z+",property");}});x=[];if(C[K]&&jQuery.isArray(C[K][0][K])&&C[K][0][K].length===0){C[K]=C[K].splice(1);}});sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new J(C));sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new J(G),"Full");var N=0;Object.keys(y).forEach(function(K){w=K;if(C[w]&&jQuery.isArray(C[w])){C[w].forEach(function(i,j){var k=d(C[w][j],w);if(N<k){N=k;}});}sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+K).expandToLevel(N-1);sap.ui.getCore().byId(K).setCount(g(C[K],K,0));});}else{Object.keys(y).forEach(function(K){sap.ui.getCore().byId(K).setCount(g(G[K],K,0));});sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new J(G));}};
function d(C,s){var H=0;if(C[s]){C[s].forEach(function(p){var i=d(p,s);if(i>H){H=i;}});}return H+1;}
function e(j,p){for(var i=0;i<p.length;i++){if(j){j=j[p[i]];}}return j;}
function g(C,s,p){if(jQuery.isArray(C)){C.forEach(function(i){if(i[s]){p=g(i[s],s,p);}else{p+=1;}});return p;}else{return undefined;}}
function h(j,v,p){var k=p.split(',');for(var i=0;i<k.length-1;i++){j=j[k[i]];}j[k[k.length-1]]=v;}
function l(i,p,v,s,j){if(p.length===1){i[p[0]]=v;}else{var k=p.shift();i[k]=l(typeof i[k]==='undefined'?{}:i[k],p,v,s,j);}if(i[s]&&i.property&&i.value){delete i.value;i.property="";}return i;}
function m(C,p,s,i,j){C.forEach(function(k,q){if(k[p]){s=s+"."+q+"."+p;s=m(k[p],p,s,i,j);}else if(k.property.indexOf(j)>-1){s=s+"."+q;i.push(s);s=s.substring(0,s.lastIndexOf("."));}});s=s.substring(0,s.lastIndexOf("."));if(isNaN(parseInt(s.substr(s.lastIndexOf(".")+1),10))){return s;}else{return s.substring(0,s.lastIndexOf("."));}}
function n(C,p){if(typeof C!=="object"){return[{property:p,value:C}];}return Object.keys(C).map(function(s){var r={property:s};if(typeof(C[s])==='object'&&Object.keys(C[s]).length!==0){r[p]=n(C[s],p);return r;}else{if(!jQuery.isEmptyObject(C[s])||typeof(C[s])!=='object'){r.value=C[s];}else{r.value="";}return r;}});}
f.prototype.prepareForSending=function(i,p){Object.keys(i).forEach(function(k){var C=i[k];switch(typeof C){case'object':if(C===null){p[k]=C;return;}else if(Array.isArray(C)){p[k]=[];}else{p[k]={};}this.prepareForSending(i[k],p[k]);break;case'undefined':p[k]="undefined";return;case'function':return;default:p[k]=i[k];return;}}.bind(this));};
f.prototype.getNewConfigJSON=function(i){var N={};Object.keys(i).forEach(function(s){N[s]=n(i[s],s);});return N;};
f.prototype.getFlpConfigurationPluginUI=function(i,j,C){var k,p,q,r={};q=this.getNewConfigJSON(this.flpConfig);k=new J(q);for(var s in q){r[s]=g(q[s],s,0);}if(!sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar")){if(!q||jQuery.isEmptyObject(q)){new M({text:o.getResourceBundle().getText("ERROR_MESSAGE"),type:"Warning",showIcon:true,showCloseButton:false}).placeAt(this.getId());}else{p=new I("sap-ui-support-flpConfigurationPlugin-TabBar",{headerMode:"Inline"});Object.keys(this.flpConfig).forEach(function(v,w){p.insertItem(new a(v,{key:v,text:v,count:r[v],content:[new j("sap-ui-support-flpConfigurationPlugin-TreeTable"+v,{rows:"{/"+v+"/}",selectionMode:sap.ui.table.SelectionMode.None,enableCellFilter:true,extension:[new F({items:[new B({icon:"sap-icon://expand",text:"{i18n>EXPAND_BUTTON}",press:_}),new B({icon:"sap-icon://collapse",text:"{i18n>COLLAPSE_BUTTON}",press:c})]})],columns:[new C({label:new L({text:"{i18n>COLUMN_PROPERTY}"}),template:new T({text:"{property}"})}),new C({label:new L({text:"{i18n>COLUMN_VALUE}"}),template:new T({text:"{value}"})})]})]}),w);});var u=new S({search:this.onPressSearchNewModel});u.placeAt(this.getId());p.setModel(k);p.setModel(o,"i18n");p.placeAt(this.getId());}}};
return f;});
sap.ui.predefine('sap/ushell/ui/appfinder/AppBox',['sap/ui/core/Control','sap/ushell/library'],function(C,l){"use strict";
var A=C.extend("sap.ushell.ui.appfinder.AppBox",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null},url:{type:"string",group:"Misc",defaultValue:null},navigationMode:{type:"string",group:"Misc",defaultValue:null}},aggregations:{pinButton:{type:"sap.m.Button",multiple:false}},events:{press:{},afterRendering:{}}}});
A.prototype.init=function(){};
A.prototype.onAfterRendering=function(){this._adjustHeaderElementsHeight();this.fireAfterRendering();};
A.prototype.setTitle=function(t){this.setProperty("title",t,true);};
A.prototype.setUrl=function(i){this.setProperty("url",i,true);};
A.prototype.setNavigationMode=function(n){this.setProperty("navigationMode",n,true);};
A.prototype.onclick=function(e){this.firePress(e);};
A.prototype.onsapspace=function(e){e.preventDefault();this.firePress(e);};
A.prototype._adjustHeaderElementsHeight=function(){var j=this.$().find(".sapUshellAppBoxTitle");var t=this._getNumberOfLines(j);var a=this.$().find(".sapUshellAppBoxSubtitle");if(t===2){j.addClass('sapUshellAppBoxHeaderElementTwoLines');a.addClass('sapUshellAppBoxHeaderElementOneLine');}else{j.addClass('sapUshellAppBoxHeaderElementOneLine');a.addClass('sapUshellAppBoxHeaderElementTwoLines');}};
A.prototype._getNumberOfLines=function(j){var a=parseInt(j.css("line-height"),10);var h=j.height();if(!h){return 0;}return((h/a)>1)?2:1;};
A.prototype.onsapenter=A.prototype.onsapspace;return A;});
sap.ui.predefine('sap/ushell/ui/appfinder/AppBoxRenderer',['sap/ushell/resources','sap/ui/core/Icon'],function(r,I){"use strict";var A={};
A.render=function(a,o){var c=o.getParent(),b=c.getAppBoxesContainer?c.getAppBoxesContainer():[],v=b.filter(function(o){return o.getVisible();}),C=v.indexOf(o)>-1?v.indexOf(o)+1:"",s=o.getTitle();s=o.getSubtitle()?s+" "+o.getSubtitle():s;var n=o.getNavigationMode();if(n){s=r.i18n.getText(n+"NavigationMode")+" "+s;}a.write("<li");a.writeControlData(o);a.addClass("sapUshellAppBox");a.writeAccessibilityState(o,{role:"option",posinset:C,setsize:v.length});a.writeAttributeEscaped("aria-label",s);a.writeAttributeEscaped("aria-describedby",o.getParent().getId()+"-groupheader");a.writeClasses();a.write(">");a.write("<div");a.addClass("sapUshellAppBoxInner");a.writeClasses();a.write(">");var h=o.getIcon();if(h){var i=new I({src:o.getIcon()});i.addStyleClass("sapUshellAppBoxIcon");a.renderControl(i);}a.write("<div");if(h){a.addClass("sapUshellAppBoxHeader");}else{a.addClass("sapUshellAppBoxHeaderNoIcon");}a.writeClasses();a.write(">");a.write("<div");a.addClass("sapUshellAppBoxTitle");a.writeClasses();a.write(">");a.writeEscaped(o.getTitle());a.write("</div>");if(o.getSubtitle()){a.write("<div");a.addClass("sapUshellAppBoxSubtitle");a.writeClasses();a.write(">");a.writeEscaped(o.getSubtitle());a.write("</div>");}a.write("</div>");a.write("</div>");a.write("<div");a.addClass("sapUshellAppBoxActionsArea");a.writeClasses();if(o.getTitle){a.writeAccessibilityState(o,{role:"toolbar",label:o.getTitle()});}a.write(">");a.renderControl(o.getPinButton());a.write("</div>");a.write("</li>");};
return A;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/AboutButton',['sap/m/Button','sap/m/Dialog','sap/m/ObjectHeader','sap/m/VBox','sap/ui/layout/form/SimpleForm','sap/ushell/library','sap/ushell/resources','sap/ushell/ui/launchpad/ActionItem','sap/ushell/services/AppConfiguration','sap/m/Label','sap/m/Text','sap/ushell/utils/type',"sap/base/Log","sap/ui/VersionInfo",'./AboutButtonRenderer'],function(B,D,O,V,S,l,r,A,a,L,T,t,b,c){"use strict";
var d=A.extend("sap.ushell.ui.footerbar.AboutButton",{metadata:{library:"sap.ushell"}});
d.prototype.init=function(){if(A.prototype.init){A.prototype.init.apply(this,arguments);}this.setIcon('sap-icon://hint');this.setText(r.i18n.getText("about"));this.setTooltip(r.i18n.getText("about"));this.attachPress(this.showAboutDialog);};
d.prototype.showAboutDialog=function(){return this._getUI5VersionInfo().then(function(v){var e=r.i18n,o=v||{},m=a.getMetadata(),f=sap.ushell.Container.getService("AppLifeCycle").getCurrentApplication(),s=new S({id:'aboutDialogFormID',editable:false,layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,content:[new L({text:e.getText("technicalName")}),new T({text:m.technicalName||''}),new L({text:e.getText("fioriVersionFld")}),new T({text:m.version||''}),new L({text:e.getText("sapui5Fld")}),new T({text:(o.version||"")+(' ('+(o.buildTimestamp||"")+')')||''}),new L({text:e.getText("userAgentFld")}),new T({text:navigator.userAgent||''}),new L({text:''})]}),h=new O({title:m.title,icon:m.icon}).addStyleClass('sapUshellAboutDialogHeader'),g,i,j=new B({text:e.getText("okBtn"),press:function(){g.close();}});if(f){f.getTechnicalParameter("sap-fiori-id").then(function(F){if(t.isArray(F)&&F[0]){s.addContent(new L({text:e.getText("fioriAppId")}));s.addContent(new T({text:F[0]}));}},function(E){jQuery.sap.log.error("Cannot get technical parameter 'sap-fiori-id'",E,"sap.ushell.ui.footerbar.AboutButton");});f.getTechnicalParameter("sap-ach").then(function(k){if(t.isArray(k)&&k[0]){s.addContent(new L({text:e.getText("sapAch")}));s.addContent(new T({text:k[0]}));}},function(E){jQuery.sap.log.error("Cannot get technical parameter 'sap-ach'",E,"sap.ushell.ui.footerbar.AboutButton");});}if(jQuery.isEmptyObject(m)||!m.icon){i=new V({items:[s]});}else{i=new V({items:[h,s]});}g=new D({id:"aboutContainerDialogID",title:e.getText("about"),contentWidth:"25rem",horizontalScrolling:false,leftButton:j,afterClose:function(){g.destroy();}});g.addContent(i);g.open();}.bind(this));};
d.prototype._getUI5VersionInfo=function(){return new Promise(function(e){c.load().then(e).catch(function(){b.error("VersionInfo could not be loaded");e({});});});};
return d;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/AboutButtonRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var A=R.extend(B);return A;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/AddBookmarkButton',['sap/m/Button','sap/m/Dialog','sap/ui/layout/form/SimpleForm','sap/ushell/library','sap/ushell/resources','./AddBookmarkButtonRenderer'],function(B,D,S,l,r){"use strict";
var A=B.extend("sap.ushell.ui.footerbar.AddBookmarkButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},info:{type:"string",group:"Misc",defaultValue:null},tileIcon:{type:"string",group:"Misc",defaultValue:null},numberUnit:{type:"string",group:"Misc",defaultValue:null},keywords:{type:"string",group:"Misc",defaultValue:null},customUrl:{type:"any",group:"Misc",defaultValue:null},serviceUrl:{type:"any",group:"Misc",defaultValue:null},serviceRefreshInterval:{type:"string",group:"Misc",defaultValue:null},showGroupSelection:{type:"boolean",group:"Misc",defaultValue:true},appData:{type:"object",group:"Misc",defaultValue:null}}}});
A.prototype.init=function(){this.setIcon('sap-icon://add-favorite');this.setText(r.i18n.getText("addToHomePageBtn"));this.setEnabled();this.oModel=new sap.ui.model.json.JSONModel({showGroupSelection:true,title:'',subtitle:'',numberValue:'',info:'',icon:'',numberUnit:'',keywords:''});var t=this;this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}t.showAddBookmarkDialog(function(){if(t.getAfterPressHandler()){t.getAfterPressHandler()();}});});if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
A.prototype.exit=function(){if(this.oDialog){this.oDialog.destroy();}if(this.oModel){this.oModel.destroy();}if(B.prototype.exit){B.prototype.exit.apply(this,arguments);}};
A.prototype.setBookmarkTileView=function(v){this.bookmarkTileView=v;};
A.prototype.getBookmarkTileView=function(){return this.bookmarkTileView;};
A.prototype.showAddBookmarkDialog=function(c){this.oResourceBundle=r.i18n;this.appData=this.getAppData()||{};var t=this,i,b;this.cb=c;i=jQuery.isEmptyObject(this.appData);b=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.ui.footerbar.SaveAsTile",viewData:{appData:this.appData,serviceUrl:i?this.getServiceUrl():this.appData.serviceUrl,customUrl:i?this.getCustomUrl():this.appData.customUrl,numberUnit:i?this.getNumberUnit():this.appData.numberUnit,serviceRefreshInterval:i?this.getServiceRefreshInterval():this.appData.serviceRefreshInterval,keywords:i?this.getKeywords():this.appData.keywords}});if(jQuery.isEmptyObject(this.appData)){b.setModel(this.oModel);}t.setBookmarkTileView(b);this.oSimpleForm=new S({id:'bookmarkFormId',layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,content:[b],editable:true}).addStyleClass("sapUshellAddBookmarkForm");t._openDialog(this.oSimpleForm);b.getTitleInput().attachLiveChange(function(){this.setValueState(sap.ui.core.ValueState.NONE);});};
A.prototype._openDialog=function(c){var o=new B('bookmarkOkBtn',{text:this.oResourceBundle.getText('okBtn'),press:this._handleOkButtonPress.bind(this)}),a=new B('bookmarkCancelBtn',{text:this.oResourceBundle.getText('cancelBtn'),press:function(){this.oDialog.close();this._restoreDialogEditableValuesToDefault();this.cb();}.bind(this)});this.oDialog=new D({id:'bookmarkDialog',title:this.oResourceBundle.getText('addToHomePageBtn'),contentWidth:'25rem',content:c,beginButton:o,endButton:a,stretch:sap.ui.Device.system.phone,horizontalScrolling:false,afterClose:function(){this.oDialog.destroy();delete(this.oDialog);}.bind(this)});this.oDialog.open();return this.oDialog;};
A.prototype.setTitle=function(t){this.setProperty("title",t,true);this.oModel.setProperty("/title",t);};
A.prototype.setSubtitle=function(s){this.setProperty("subtitle",s,true);this.oModel.setProperty("/subtitle",s);};
A.prototype.setInfo=function(i){this.setProperty("info",i,true);this.oModel.setProperty("/info",i);};
A.prototype.setTileIcon=function(i){this.setProperty("tileIcon",i,true);this.oModel.setProperty("/icon",i);};
A.prototype.setShowGroupSelection=function(s){this.setProperty("showGroupSelection",s,true);this.oModel.setProperty("/showGroupSelection",s);};
A.prototype.setNumberUnit=function(n){this.setProperty("numberUnit",n,true);this.oModel.setProperty("/numberUnit",n);};
A.prototype.setKeywords=function(k){this.setProperty("keywords",k,true);this.oModel.setProperty("/keywords",k);};
A.prototype._restoreDialogEditableValuesToDefault=function(){if(this.oModel){this.oModel.setProperty('/title',this.getTitle());this.oModel.setProperty('/subtitle',this.getSubtitle());this.oModel.setProperty('/info',this.getInfo());}};
A.prototype._handleOkButtonPress=function(){var t,R,o,b=this.getBookmarkTileView(),d=b.getBookmarkTileData(),a=d.group?d.group.object:"";if(!d.title){t=sap.ui.getCore().byId("bookmarkTitleInput");if(t){t.setValueState(sap.ui.core.ValueState.Error);t.setValueStateText(r.i18n.getText("bookmarkTitleInputError"));return;}}delete d.group;R=sap.ushell.Container.getService("Bookmark").addBookmark(d,a);o=r.i18n;R.done(function(){jQuery.proxy(this._restoreDialogEditableValuesToDefault(),this);if(sap.ushell.Container){sap.ushell.Container.getService('Message').info(o.getText('tile_created_msg'));}}.bind(this));R.fail(function(m){jQuery.sap.log.error("Failed to add bookmark",m,"sap.ushell.ui.footerbar.AddBookmarkButton");if(sap.ushell.Container){sap.ushell.Container.getService('Message').error(o.getText('fail_to_add_tile_msg'));}});this.oDialog.close();this.cb();};
A.prototype.setEnabled=function(e){var s="",p=true,o;if(sap.ushell.renderers&&sap.ushell.renderers.fiori2){o=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration();if(o.appState){s=o.appState;}if(o.enablePersonalization!==undefined){p=o.enablePersonalization;}}if(s==='headerless'||s==='standalone'||s==='embedded'||s==='merged'||!p){e=false;}if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Save as Tile' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.AddBookmarkButton");}e=false;}B.prototype.setEnabled.call(this,e);if(!e){this.addStyleClass("sapUshellAddBookmarkButton");}};
return A;});
sap.ui.predefine('sap/ushell/ui/footerbar/AddBookmarkButtonRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var A=R.extend(B);return A;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/ContactSupportButton',['sap/ushell/library','sap/ushell/resources','sap/ushell/ui/launchpad/AccessibilityCustomData','sap/ushell/ui/launchpad/ActionItem','./ContactSupportButtonRenderer'],function(l,r,A,a){"use strict";
var C=a.extend("sap.ushell.ui.footerbar.ContactSupportButton",{metadata:{library:"sap.ushell"}});
C.prototype.init=function(){if(a.prototype.init){a.prototype.init.apply(this,arguments);}this.setIcon('sap-icon://email');this.setText(r.i18n.getText("contactSupportBtn"));this.attachPress(this.showContactSupportDialog);this.setEnabled();};
C.prototype.showContactSupportDialog=function(){sap.ui.require(['sap/ushell/services/Container','sap/ui/layout/form/SimpleForm','sap/ui/layout/form/SimpleFormLayout','sap/m/TextArea','sap/m/Link','sap/m/Label','sap/m/Text','sap/m/Dialog','sap/m/Button','sap/ushell/UserActivityLog'],function(b,S,c,T,L,d,e,D,B,U){var f="",u="",g="",h=[],o,i;i=function(){this.oDialog.removeContent(this.oBottomSimpleForm.getId());this.oBottomSimpleForm.destroy();if(this.oClientContext.navigationData.applicationInformation){f=this.oClientContext.navigationData.applicationInformation.applicationType;u=this.oClientContext.navigationData.applicationInformation.url;g=this.oClientContext.navigationData.applicationInformation.additionalInformation;}h.push(new e({text:this.translationBundle.getText("loginDetails")}).addStyleClass('sapUshellContactSupportHeaderInfoText'));h.push(new d({text:this.translationBundle.getText("userFld")}));h.push(new e({text:this.oClientContext.userDetails.fullName||''}));h.push(new d({text:this.translationBundle.getText("serverFld")}));h.push(new e({text:window.location.host}));if(this.oClientContext.userDetails.eMail&&this.oClientContext.userDetails.eMail!==''){h.push(new d({text:this.translationBundle.getText("eMailFld")}));h.push(new e({text:this.oClientContext.userDetails.eMail||''}));}h.push(new d({text:this.translationBundle.getText("languageFld")}));h.push(new e({text:this.oClientContext.userDetails.Language||''}));if(this.oClientContext.shellState==="app"||this.oClientContext.shellState==="standalone"){h.push(new e({text:''}));h.push(new e({text:this.translationBundle.getText("navigationDataFld")}).addStyleClass('sapUshellContactSupportHeaderInfoText'));h.push(new d({text:this.translationBundle.getText("hashFld")}));h.push(new e({text:this.oClientContext.navigationData.navigationHash||''}));h.push(new e({text:''}));h.push(new e({text:this.translationBundle.getText("applicationInformationFld")}).addStyleClass('sapUshellContactSupportHeaderInfoText'));h.push(new d({text:this.translationBundle.getText("applicationTypeFld")}));h.push(new e({text:f}));h.push(new d({text:this.translationBundle.getText("urlFld")}));h.push(new e({text:u}));h.push(new d({text:this.translationBundle.getText("additionalInfoFld")}));h.push(new e({text:g}));}this.oBottomSimpleForm=new S('technicalInfoBox',{layout:c.ResponsiveLayout,content:h}).addStyleClass("sapUshellTechnicalInfoBox");if(sap.ui.Device.os.ios&&sap.ui.Device.system.phone){this.oBottomSimpleForm.addStyleClass("sapUshellContactSupportFixWidth");}o=this.oBottomSimpleForm.onAfterRendering;this.oBottomSimpleForm.onAfterRendering=function(){o.apply(this,arguments);var n=jQuery(this.getDomRef());n.attr("tabIndex",0);jQuery.sap.delayedCall(700,n,function(){this.focus();});};this.oDialog.addContent(this.oBottomSimpleForm);}.bind(this);this._embedLoginDetailsInBottomForm=i;this.translationBundle=r.i18n;this.oClientContext=U.getMessageInfo();this.oLink=new L({text:this.translationBundle.getText("technicalDataLink")});this.oBottomSimpleForm=new S("bottomForm",{editable:false,content:[this.oLink]});this.sendButton=new B("contactSupportSendBtn",{text:this.translationBundle.getText("sendBtn"),enabled:false,press:function(){var s=sap.ushell.Container.getService("SupportTicket"),t=this.oTextArea.getValue(),j={text:t,clientContext:this.oClientContext},p=s.createTicket(j);p.done(function(){sap.ushell.Container.getService("Message").info(this.translationBundle.getText("supportTicketCreationSuccess"));}.bind(this));p.fail(function(){sap.ushell.Container.getService("Message").error(this.translationBundle.getText("supportTicketCreationFailed"));}.bind(this));this.oDialog.close();}.bind(this)});this.cancelButton=new B("contactSupportCancelBtn",{text:this.translationBundle.getText("cancelBtn"),press:function(){this.oDialog.close();}.bind(this)});this.oTextArea=new T("textArea",{rows:7,liveChange:function(){if(/\S/.test(this.oTextArea.getValue())){this.sendButton.setEnabled(true);}else{this.sendButton.setEnabled(false);this.oTextArea.setValue("");}}.bind(this)});this.oTopSimpleForm=new S("topForm",{editable:false,content:[this.oTextArea],layout:c.ResponsiveGridLayout});this.oDialog=new D({id:"ContactSupportDialog",title:this.translationBundle.getText("contactSupportBtn"),contentWidth:"29.6rem",leftButton:this.sendButton,rightButton:this.cancelButton,initialFocus:"textArea",afterOpen:function(){jQuery("#textArea").on("focusout",function(){window.scrollTo(0,0);});},afterClose:function(){this.oDialog.destroy();}.bind(this)}).addStyleClass("sapUshellContactSupportDialog");this.oTextArea.setPlaceholder(this.translationBundle.getText("txtAreaPlaceHolderHeader"));this.oLink.attachPress(i.bind(this));this.oDialog.addCustomData(new A({key:"aria-label",value:this.translationBundle.getText("ContactSupportArialLabel"),writeToDom:true}));this.oDialog.addContent(this.oTopSimpleForm);this.oDialog.addContent(this.oBottomSimpleForm);this.oDialog.open();}.bind(this));};
C.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Contact Support' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.ContactSupportButton");}e=false;}a.prototype.setEnabled.call(this,e);};
return C;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/ContactSupportButtonRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var C=R.extend(B);return C;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/EndUserFeedback',['sap/ushell/library','sap/ushell/resources','sap/ushell/ui/launchpad/AccessibilityCustomData','sap/ushell/ui/launchpad/ActionItem','sap/ushell/services/AppConfiguration','./EndUserFeedbackRenderer','sap/ushell/services/EndUserFeedback','sap/ushell/services/Message','sap/ushell/services/URLParsing'],function(l,r,A,a,b){"use strict";
var E=a.extend("sap.ushell.ui.footerbar.EndUserFeedback",{metadata:{library:"sap.ushell",properties:{showAnonymous:{type:"boolean",group:"Misc",defaultValue:true},anonymousByDefault:{type:"boolean",group:"Misc",defaultValue:true},showLegalAgreement:{type:"boolean",group:"Misc",defaultValue:true},showCustomUIContent:{type:"boolean",group:"Misc",defaultValue:true},feedbackDialogTitle:{type:"string",group:"Misc",defaultValue:null},textAreaPlaceholder:{type:"string",group:"Misc",defaultValue:null}},aggregations:{customUIContent:{type:"sap.ui.core.Control",multiple:true,singularName:"customUIContent"}}}});
E.prototype.init=function(){if(a.prototype.init){a.prototype.init.apply(this,arguments);}var u=sap.ushell.Container.getUser(),f=sap.ushell.utils.getFormFactor();this.oUserDetails={userId:u.getId(),eMail:u.getEmail()};this.translationBundle=r.i18n;this.oEndUserFeedbackService=sap.ushell.Container.getService("EndUserFeedback");this.appConfiguration=b;this.oEndUserFeedbackModel=new sap.ui.model.json.JSONModel();this.oEndUserFeedbackModel.setData({feedbackViewTitle:this.translationBundle.getText("userFeedback_title"),legalAgreementViewTitle:this.translationBundle.getText("userFeedbackLegal_title"),textAreaPlaceholderText:this.translationBundle.getText("feedbackPlaceHolderHeader"),presentationStates:{showAnonymous:this.getShowAnonymous(),showLegalAgreement:this.getShowLegalAgreement(),showCustomUIContent:this.getShowCustomUIContent()},clientContext:{userDetails:jQuery.extend(true,{},this.oUserDetails),navigationData:{formFactor:f,applicationInformation:{},navigationHash:null}},isAnonymous:this.getAnonymousByDefault(),applicationIconPath:'',leftButton:{feedbackView:this.translationBundle.getText("sendBtn"),legalAgreementView:this.translationBundle.getText("approveBtn")},rightButton:{feedbackView:this.translationBundle.getText("cancelBtn"),legalAgreementView:this.translationBundle.getText("declineBtn")},states:{isLegalAgreementChecked:false,isRatingSelected:false,isInFeedbackView:true},technicalLink:{state:0,title:[this.translationBundle.getText("technicalDataLink"),this.translationBundle.getText("technicalDataLinkHide")]},textArea:{inputText:''},contextText:'',ratingButtons:[{text:r.i18n.getText("ratingExcellentText"),color:'sapUshellRatingLabelFeedbackPositiveText',iconSymbol:'sap-icon://BusinessSuiteInAppSymbols/icon-face-very-happy',id:'rateBtn1',index:1},{text:r.i18n.getText("ratingGoodText"),color:'sapUshellRatingLabelFeedbackPositiveText',iconSymbol:'sap-icon://BusinessSuiteInAppSymbols/icon-face-happy',id:'rateBtn2',index:2},{text:r.i18n.getText("ratingAverageText"),color:'sapUshellRatingLabelFeedbackNeutralText',iconSymbol:'sap-icon://BusinessSuiteInAppSymbols/icon-face-neutral',id:'rateBtn3',index:3},{text:r.i18n.getText("ratingPoorText"),color:'sapUshellRatingLabelFeedbackCriticalText',iconSymbol:'sap-icon://BusinessSuiteInAppSymbols/icon-face-bad',id:'rateBtn4',index:4},{text:r.i18n.getText("ratingVeyPoorText"),color:'sapUshellRatingLabelFeedbackNegativeText',iconSymbol:'sap-icon://BusinessSuiteInAppSymbols/icon-face-very-bad',id:'rateBtn5',index:5}],selectedRating:{text:'',color:'',index:0}});this.setIcon('sap-icon://marketing-campaign');this.setText(r.i18n.getText("endUserFeedbackBtn"));this.attachPress(this.ShowEndUserFeedbackDialog);this.setEnabled();};
E.prototype.ShowEndUserFeedbackDialog=function(){sap.ui.require(['sap/ui/layout/form/SimpleForm','sap/ui/layout/form/SimpleFormLayout','sap/ui/layout/HorizontalLayout','sap/ui/layout/VerticalLayout','sap/m/TextArea','sap/m/Link','sap/m/Label','sap/m/Text','sap/m/Dialog','sap/m/Button','sap/m/Image','sap/m/Bar','sap/m/SegmentedButton','sap/m/CheckBox'],function(S,c,H,V,T,L,d,e,D,B,I,f,g,C){var h,i,s,j,u,m,k,n;h=function(){var F=[],p=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/formFactor'),U=this.oEndUserFeedbackModel.getProperty('/clientContext/userDetails/userId'),q=this.oEndUserFeedbackModel.getProperty('/clientContext/userDetails/eMail'),t=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/applicationInformation/url'),v=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/applicationInformation/applicationType'),w=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/applicationInformation/additionalInformation'),N=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/navigationHash'),x=this.getModel().getProperty("/currentState/stateName"),y=(x==="home"||x==="catalog")?false:true;F.push(new e({text:this.translationBundle.getText("loginDetails")}).addStyleClass('sapUshellContactSupportHeaderInfoText'));F.push(U?new d({text:this.translationBundle.getText("userFld")}):null);F.push(U?new e('technicalInfoUserIdTxt',{text:'{/clientContext/userDetails/userId}'}):null);F.push(q?new d({text:this.translationBundle.getText("eMailFld")}):null);F.push(q?new e({text:'{/clientContext/userDetails/eMail}'}):null);F.push(p?new d({text:this.translationBundle.getText('formFactorFld')}):null);F.push(p?new e({text:'{/clientContext/navigationData/formFactor}'}):null);F.push(new e({text:''}));F.push(new e({text:this.translationBundle.getText(this.currentApp?'applicationInformationFld':'feedbackHeaderText')}).addStyleClass('sapUshellEndUserFeedbackHeaderInfoText').addStyleClass("sapUshellEndUserFeedbackInfoTextSpacing"));F.push(t&&y?new d({text:this.translationBundle.getText("urlFld")}):null);F.push(t&&y?new e({text:'{/clientContext/navigationData/applicationInformation/url}'}):null);F.push(v?new d({text:this.translationBundle.getText("applicationTypeFld")}):null);F.push(v?new e({text:'{/clientContext/navigationData/applicationInformation/applicationType}'}):null);F.push(w?new d({text:this.translationBundle.getText("additionalInfoFld")}):null);F.push(w?new e({text:'{/clientContext/navigationData/applicationInformation/additionalInformation}'}):null);F.push(N&&y?new d({text:this.translationBundle.getText("hashFld")}):null);F.push(N&&y?new e({text:'{/clientContext/navigationData/navigationHash}'}):null);return F.filter(Boolean);}.bind(this);i=function(){this.oTechnicalInfoBox=new S('feedbackTechnicalInfoBox',{layout:c.ResponsiveLayout,content:h()});if(sap.ui.Device.os.ios&&sap.ui.Device.system.phone){this.oTechnicalInfoBox.addStyleClass("sapUshellContactSupportFixWidth");}var p=this.oTechnicalInfoBox.onAfterRendering;this.oTechnicalInfoBox.onAfterRendering=function(){p.apply(this,arguments);var q=jQuery(this.getDomRef());q.attr("tabIndex",0);jQuery.sap.delayedCall(700,q,function(){this.focus();});};return new H('technicalInfoBoxLayout',{visible:{path:'/technicalLink/state',formatter:function(q){return q===1;}},content:[this.oTechnicalInfoBox]});}.bind(this);u=function(){this.oTechnicalInfoBox.destroyContent();this.oTechnicalInfoBox.removeAllContent();var t=h(),p;for(p in t){this.oTechnicalInfoBox.addContent(t[p]);}this.oRatingButtons.setSelectedButton('noDefalut');}.bind(this);m=jQuery.sap.getModulePath("sap.ushell");k=m+'/themes/base/img/launchpadDefaultIcon.jpg';n=this.oEndUserFeedbackModel.getProperty('/clientContext/navigationData/formFactor')==='desktop';this.updateModelContext();if(this.oDialog){u();this.oDialog.open();return;}this.oLegalAgreementInfoLayout=null;this.oBackButton=new B('endUserFeedbackBackBtn',{visible:{path:"/states/isInFeedbackView",formatter:function(p){return!p;}},icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:function(){this.oEndUserFeedbackModel.setProperty('/states/isInFeedbackView',true);}.bind(this),tooltip:r.i18n.getText("feedbackGoBackBtn_tooltip")});this.oPopoverTitle=new e("PopoverTitle",{text:{parts:[{path:'/states/isInFeedbackView'},{path:'/feedbackViewTitle'}],formatter:function(p){return this.oEndUserFeedbackModel.getProperty(p?"/feedbackViewTitle":"/legalAgreementViewTitle");}.bind(this)}});this.oHeadBar=new f({contentLeft:[this.oBackButton],contentMiddle:[this.oPopoverTitle]});this.oLogoImg=new I('sapFeedbackLogo',{src:k,width:'4.5rem',height:'4.5rem',visible:{path:'/applicationIconPath',formatter:function(p){return!p;}}});this.oAppIcon=new sap.ui.core.Icon('sapFeedbackAppIcon',{src:'{/applicationIconPath}',width:'4.5rem',height:'4.5rem',visible:{path:'/applicationIconPath',formatter:function(p){return!!p;}}}).addStyleClass("sapUshellFeedbackAppIcon");this.oContextName=new e('contextName',{text:'{/contextText}'});this.oContextLayout=new H('contextLayout',{allowWrapping:true,content:[this.oLogoImg,this.oAppIcon,this.oContextName]});this.oRatingLabel=new d('ratingLabel',{required:true,text:r.i18n.getText("ratingLabelText")});this.oRatingSelectionText=new e('ratingSelectionText',{text:{path:'/selectedRating',formatter:function(p){if(this.lastSelectedColor){this.removeStyleClass(this.lastSelectedColor);}if(p.color){this.addStyleClass(p.color);}this.lastSelectedColor=p.color;return p.text;}}});this.oRatingButtonTemplate=new B({icon:'{iconSymbol}',height:'100%',width:'20%',tooltip:'{text}'});this.oRatingButtonTemplate.addCustomData(new A({key:"aria-label",value:'{text}',writeToDom:true}));this.oRatingButtons=new g('ratingButtons',{selectedButton:'noDefalut',buttons:{path:"/ratingButtons",template:this.oRatingButtonTemplate},select:function(p){var q=p.mParameters.id,P=sap.ui.getCore().byId(q).getBindingContext().getPath(),t=this.oEndUserFeedbackModel.getProperty(P);this.oEndUserFeedbackModel.setProperty('/selectedRating',{text:t.text,color:t.color,index:t.index});this.oEndUserFeedbackModel.setProperty('/states/isRatingSelected',true);}.bind(this)});this.oRatingButtons.addAriaLabelledBy("ratingLabel");this.oRatingButtons.addCustomData(new A({key:"aria-required",value:'true',writeToDom:true}));if(n){this.oRatingIndicationLayout=new H('ratingIndicationLayout',{content:[this.oRatingLabel,this.oRatingSelectionText]});}else{this.oRatingIndicationLayout=new V('ratingIndicationLayoutMob',{content:[this.oRatingLabel,this.oRatingSelectionText]});}this.oRatingLayout=new V('ratingLayout',{width:"100%",content:[this.oRatingIndicationLayout,this.oRatingButtons]});this.oAnonymousCheckbox=new C('anonymousCheckbox',{name:'anonymousCheckbox',visible:'{/presentationStates/showAnonymous}',text:r.i18n.getText("feedbackSendAnonymousText"),selected:!this.oEndUserFeedbackModel.getProperty("/isAnonymous"),select:function(p){var q=p.getParameter("selected");this._handleAnonymousSelection(!q);}.bind(this)});var o=(!this.oEndUserFeedbackModel.getProperty("/presentationStates/showAnonymous")||this.oEndUserFeedbackModel.getProperty("/isAnonymous"));this._handleAnonymousSelection(o);this.oLegalAgrementCheckbox=new C('legalAgreement',{name:'legalAgreement',visible:'{/presentationStates/showLegalAgreement}',selected:'{/states/isLegalAgreementChecked}',text:this.translationBundle.getText("agreementAcceptanceText")});this.oLegalAgreeementLink=new L('legalAgreementLink',{text:this.translationBundle.getText("legalAgreementLinkText"),visible:'{/presentationStates/showLegalAgreement}',press:function(){var p=this.oEndUserFeedbackService.getLegalText();p.done(s.bind(this));}.bind(this)});this.aCustomUIContent=jQuery.extend([],this.getCustomUIContent());this.oCustomUILayout=new V('customUILayout',{visible:{path:'/presentationStates/showCustomUIContent',formatter:function(p){return(p&&this.aCustomUIContent.length)?true:false;}.bind(this)},content:this.getCustomUIContent(),width:"100%"});this.oLegalLayout=new V('legalLayout',{content:[this.oAnonymousCheckbox,this.oLegalAgrementCheckbox,this.oLegalAgreeementLink]});this.oTechnicalDataLink=new L('technicalDataLink',{text:{path:'/technicalLink/state',formatter:function(p){return this.getModel().getProperty('/technicalLink/title/'+p);}},press:function(){var _=this.oEndUserFeedbackModel.getProperty("/technicalLink/state");this.oEndUserFeedbackModel.setProperty('/technicalLink/state',Math.abs(_-1));this.oDialog.rerender();}.bind(this)});this.oTechnicalDataLayout=new H('technicalDataLayout',{content:[this.oTechnicalDataLink]});this.leftButton=new B("EndUserFeedbackLeftBtn",{text:{path:"/states/isInFeedbackView",formatter:function(p){return this.getModel().getProperty('/leftButton/'+(p?'feedbackView':'legalAgreementView'));}},enabled:{parts:[{path:'/states/isInFeedbackView'},{path:'/states/isLegalAgreementChecked'},{path:'/states/isRatingSelected'},{path:'/presentationStates/showLegalAgreement'}],formatter:function(p,q,t,v){return!p||(t&&(q||!v));}},press:function(){var p=this.oEndUserFeedbackModel.getProperty("/states/isInFeedbackView");if(p){var F={feedbackText:this.oEndUserFeedbackModel.getProperty('/textArea/inputText'),ratings:[{questionId:"Q10",value:this.oEndUserFeedbackModel.getProperty('/selectedRating/index')}],clientContext:this.oEndUserFeedbackModel.getProperty('/clientContext'),isAnonymous:this.oEndUserFeedbackModel.getProperty('/isAnonymous')},q=this.oEndUserFeedbackService.sendFeedback(F);q.done(function(){sap.ushell.Container.getService("Message").info(this.translationBundle.getText('feedbackSendToastTxt'));}.bind(this));q.fail(function(){sap.ushell.Container.getService("Message").error(this.translationBundle.getText('feedbackFailedToastTxt'));}.bind(this));this.oDialog.close();}else{this.oEndUserFeedbackModel.setProperty('/states/isInFeedbackView',true);this.oEndUserFeedbackModel.setProperty('/states/isLegalAgreementChecked',true);}}.bind(this)});this.rightButton=new B("EndUserFeedbackRightBtn",{text:{path:"/states/isInFeedbackView",formatter:function(p){return this.getModel().getProperty('/rightButton/'+(p?'feedbackView':'legalAgreementView'));}},press:function(){var p=this.oEndUserFeedbackModel.getProperty("/states/isInFeedbackView");if(p){this.oDialog.close();}else{this.oEndUserFeedbackModel.setProperty('/states/isInFeedbackView',true);this.oEndUserFeedbackModel.setProperty('/states/isLegalAgreementChecked',false);}}.bind(this)});this.oTextArea=new T("feedbackTextArea",{rows:6,value:'{/textArea/inputText}',placeholder:'{/textAreaPlaceholderText}'});this.oDialog=new D({id:"UserFeedbackDialog",contentWidth:"25rem",leftButton:this.leftButton,rightButton:this.rightButton,stretch:sap.ui.Device.system.phone,initialFocus:"textArea",afterOpen:function(){jQuery("#textArea").on("focusout",function(){window.scrollTo(0,0);});}}).addStyleClass("sapUshellEndUserFeedbackDialog");this.oDialog.setModel(this.oEndUserFeedbackModel);this.oDialog.setCustomHeader(this.oHeadBar);this.oDialog.addCustomData(new A({key:"aria-label",value:this.translationBundle.getText("endUserFeedbackAreaLabel"),writeToDom:true}));this.oTechnicalInfoBoxLayout=i();this.oFeedbackLayout=new V('feedbackLayout',{visible:'{/states/isInFeedbackView}',content:[this.oContextLayout,this.oRatingLayout,this.oTextArea,this.oTechnicalDataLayout,this.oTechnicalInfoBoxLayout,this.oLegalLayout,this.oCustomUILayout]}).addStyleClass("sapUshellFeedbackLayout");this.oMainLayout=new V("mainLayout",{editable:false,content:[this.oFeedbackLayout]});this.oDialog.addContent(this.oMainLayout);this.oDialog.open();s=function(p){this.oEndUserFeedbackModel.setProperty('/states/isInFeedbackView',false);if(!this.oLegalAgreementInfoLayout){j(p);}};j=function(p){this.oLegalText=new T('legalText',{cols:50,rows:22});this.oLegalText.setValue([p]);this.oLegalText.setEditable(false);var q=this.oLegalText.onAfterRendering;this.oLegalText.onAfterRendering=function(){if(q){q.apply(this,arguments);}var t=jQuery(this.getDomRef());t.find("textarea").attr("tabindex","0");};this.oLegalAgreementInfoLayout=new V('legalAgreementInfoLayout',{visible:{path:"/states/isInFeedbackView",formatter:function(t){return!t;}},content:[this.oLegalText]});this.oMainLayout.addContent(this.oLegalAgreementInfoLayout);}.bind(this);}.bind(this));};
E.prototype._handleAnonymousSelection=function(i){var c=this.translationBundle.getText('feedbackAnonymousTechFld');this.oEndUserFeedbackModel.setProperty('/isAnonymous',i);this.oEndUserFeedbackModel.setProperty('/clientContext/userDetails/eMail',i?c:this.oUserDetails.eMail);this.oEndUserFeedbackModel.setProperty('/clientContext/userDetails/userId',i?c:this.oUserDetails.userId);};
E.prototype.addCustomUIContent=function(c){var i=c&&c.getMetadata&&c.getMetadata().getStereotype&&c.getMetadata().getStereotype()==='control';if(i){if(this.getShowCustomUIContent()){this.oEndUserFeedbackModel.setProperty('/presentationStates/showCustomUIContent',true);}this.addAggregation('customUIContent',c);}};
E.prototype.setShowAnonymous=function(v){if(typeof v==='boolean'){this.oEndUserFeedbackModel.setProperty('/presentationStates/showAnonymous',v);this.setProperty('showAnonymous',v,true);}};
E.prototype.setAnonymousByDefault=function(v){if(typeof v==='boolean'){this.oEndUserFeedbackModel.setProperty('/isAnonymous',v);this.setProperty('anonymousByDefault',v,true);}};
E.prototype.setShowLegalAgreement=function(v){if(typeof v==='boolean'){this.oEndUserFeedbackModel.setProperty('/presentationStates/showLegalAgreement',v);this.setProperty('showLegalAgreement',v,true);}};
E.prototype.setShowCustomUIContent=function(v){if(typeof v==='boolean'){this.oEndUserFeedbackModel.setProperty('/presentationStates/showCustomUIContent',v);this.setProperty('showCustomUIContent',v,true);}};
E.prototype.setFeedbackDialogTitle=function(v){if(typeof v==='string'){this.oEndUserFeedbackModel.setProperty('/feedbackViewTitle',v);this.setProperty('feedbackDialogTitle',v,true);}};
E.prototype.setTextAreaPlaceholder=function(v){if(typeof v==='string'){this.oEndUserFeedbackModel.setProperty('/textAreaPlaceholderText',v);this.setProperty('textAreaPlaceholder',v,true);}};
E.prototype.updateModelContext=function(){var u=sap.ushell.Container.getService("URLParsing"),h,p,i,c,s,U;h=u.getShellHash(window.location);p=u.parseShellHash(h);i=(p!==undefined)?p.semanticObject+"-"+p.action:"";c=this.getModel().getProperty("/currentState/stateName");if(c==="home"||c==="catalog"){s=this.translationBundle.getText(c+'_title');}this.currentApp=this.appConfiguration.getCurrentAppliction();this.bHasAppName=(this.currentApp&&this.appConfiguration.getMetadata(this.currentApp)&&this.appConfiguration.getMetadata(this.currentApp).title);this.sAppIconPath=(this.currentApp&&this.appConfiguration.getMetadata(this.currentApp)&&this.appConfiguration.getMetadata(this.currentApp).icon);this.oEndUserFeedbackModel.setProperty('/contextText',this.bHasAppName?this.appConfiguration.getMetadata(this.currentApp).title:this.translationBundle.getText('feedbackHeaderText'));U=null;if(this.currentApp&&this.currentApp.url){U=this.currentApp.url.split('?')[0];}else if(c){U=this.translationBundle.getText("flp_page_name");}this.oEndUserFeedbackModel.setProperty('/clientContext/navigationData/applicationInformation',{url:U,additionalInformation:(this.currentApp&&this.currentApp.additionalInformation)?this.currentApp.additionalInformation:null,applicationType:(this.currentApp&&this.currentApp.applicationType)?this.currentApp.applicationType:null});this.oEndUserFeedbackModel.setProperty('/clientContext/navigationData/navigationHash',s?s:i);this.oEndUserFeedbackModel.setProperty('/selectedRating',{text:'',color:'',index:0});this.oEndUserFeedbackModel.setProperty('/states/isRatingSelected',false);this.oEndUserFeedbackModel.setProperty('/states/isLegalAgreementChecked',false);this.oEndUserFeedbackModel.setProperty('/technicalLink/state',0);this.oEndUserFeedbackModel.setProperty('/textArea/inputText','');this.oEndUserFeedbackModel.setProperty('/applicationIconPath',this.sAppIconPath);this._handleAnonymousSelection(this.oEndUserFeedbackModel.getProperty('/isAnonymous'));};
E.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'End User Feedback' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.EndUserFeedback");}e=false;}a.prototype.setEnabled.call(this,e);};
return E;});
sap.ui.predefine('sap/ushell/ui/footerbar/EndUserFeedbackRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var E=R.extend(B);return E;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/HideGroupsButton',['sap/ushell/library','sap/ushell/ui/launchpad/ActionItem','./HideGroupsButtonRenderer'],function(l,A){"use strict";
var H=A.extend("sap.ushell.ui.footerbar.HideGroupsButton",{metadata:{library:"sap.ushell",events:{save:{}}}});
return H;});
sap.ui.predefine('sap/ushell/ui/footerbar/HideGroupsButtonRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var H=R.extend(B);return H;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/JamDiscussButton',['sap/m/Button','sap/ushell/library','sap/ushell/resources','sap/collaboration/components/fiori/feed/dialog/Component','./JamDiscussButtonRenderer'],function(B,l,r,C){"use strict";
var J=B.extend("sap.ushell.ui.footerbar.JamDiscussButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},jamData:{type:"object",group:"Misc",defaultValue:null}}}});
J.prototype.init=function(){var t=this;this.setEnabled();this.setIcon('sap-icon://discussion-2');this.setText(r.i18n.getText("discussBtn"));this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}this.showDiscussDialog(t.getAfterPressHandler());});if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
J.prototype.showDiscussDialog=function(c){if(!this.discussComponent){this.discussComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.feed.dialog"});}this.discussComponent.setSettings(this.getJamData());this.discussComponent.open();if(c){c();}};
J.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling JamDiscussButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamDiscussButton");}e=false;}else{var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(this.getEnabled()){jQuery.sap.log.info("Disabling JamDiscussButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamDiscussButton");}e=false;this.setVisible(false);}}B.prototype.setEnabled.call(this,e);};
return J;});
sap.ui.predefine('sap/ushell/ui/footerbar/JamDiscussButtonRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var J=R.extend(B);return J;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/JamShareButton',['sap/m/Button','sap/ushell/library','sap/ushell/resources','sap/collaboration/components/fiori/sharing/dialog/Component','./JamShareButtonRenderer'],function(B,l,r,C){"use strict";
var J=B.extend("sap.ushell.ui.footerbar.JamShareButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},jamData:{type:"object",group:"Misc",defaultValue:null}}}});
J.prototype.init=function(){var t=this;this.setEnabled();this.setIcon('sap-icon://share-2');this.setText(r.i18n.getText("shareBtn"));this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}this.showShareDialog(t.getAfterPressHandler());});if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
J.prototype.showShareDialog=function(c){var p,t=this;function o(){t.shareComponent.setSettings(t.getJamData());t.shareComponent.open();if(c){c();}}if(!this.shareComponent){this.shareComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog"});}if(sap.ushell.Container&&sap.ushell.Container.runningInIframe&&sap.ushell.Container.runningInIframe()){p=this.adjustFLPUrl(this.getJamData());p.then(function(){o();},function(e){jQuery.sap.log.error("Could not retrieve FLP URL",e,"sap.ushell.ui.footerbar.JamShareButton");});}else{o();}};
J.prototype.exit=function(){if(this.shareComponent){this.shareComponent.destroy();}if(B.prototype.exit){B.prototype.exit.apply(this,arguments);}};
J.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling JamShareButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamShareButton");}e=false;}else{var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(this.getEnabled()){jQuery.sap.log.info("Disabling JamShareButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamShareButton");}e=false;this.setVisible(false);}}B.prototype.setEnabled.call(this,e);};
J.prototype.adjustFLPUrl=function(j){return new Promise(function(R,f){if(j&&j.object&&j.object.id&&typeof j.object.id==="string"&&j.object.id===document.URL){sap.ushell.Container.getFLPUrl(true).then(function(u){j.object.id=u;R();},function(e){f(e);});}else{R();}});};
return J;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/JamShareButtonRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var J=R.extend(B);return J;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/LogoutButton',['sap/ushell/library','sap/ushell/resources','sap/ushell/ui/launchpad/ActionItem','./LogoutButtonRenderer'],function(l,r,A){"use strict";
var L=A.extend("sap.ushell.ui.footerbar.LogoutButton",{metadata:{library:"sap.ushell"}});
L.prototype.init=function(){if(A.prototype.init){A.prototype.init.apply(this,arguments);}this.setIcon('sap-icon://log');this.setTooltip(r.i18n.getText("signoutBtn_tooltip"));this.setText(r.i18n.getText("signoutBtn_title"));this.attachPress(this.logout);this.setEnabled();};
L.prototype.logout=function(){sap.ui.require(['sap/m/MessageBox'],function(M){var s=true,i=false,o,a=new sap.ushell.ui.launchpad.LoadingDialog({text:""});sap.ushell.Container.getGlobalDirty().done(function(d){s=false;if(i===true){a.exit();a=new sap.ushell.ui.launchpad.LoadingDialog({text:""});}var _=function(d){var o={},R=r.i18n;if(d===sap.ushell.Container.DirtyState.DIRTY){o.message=R.getText('unsaved_data_warning_popup_message');o.icon=sap.m.MessageBox.Icon.WARNING;o.messageTitle=R.getText("unsaved_data_warning_popup_title");}else{o.message=R.getText('signoutConfirmationMsg');o.icon=sap.m.MessageBox.Icon.QUESTION;o.messageTitle=R.getText("signoutMsgTitle");}return o;};o=_(d);sap.m.MessageBox.show(o.message,o.icon,o.messageTitle,[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],function(b){if(b===sap.m.MessageBox.Action.OK){a.openLoadingScreen();a.showAppInfo(r.i18n.getText('beforeLogoutMsg'),null);sap.ushell.Container.logout();}},sap.ui.core.ElementMetadata.uid("confirm"));});if(s===true){a.openLoadingScreen();i=true;}}.bind(this));};
L.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Logout' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.LogoutButton");}e=false;}A.prototype.setEnabled.call(this,e);};
return L;});
sap.ui.predefine('sap/ushell/ui/footerbar/LogoutButtonRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var L=R.extend(B);return L;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/SaveAsTile.controller',["sap/ushell/services/AppConfiguration","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ui/thirdparty/datajs"],function(A,a,C,O){"use strict";sap.ui.controller("sap.ushell.ui.footerbar.SaveAsTile",{onExit:function(){var v=this.getView();var t=v.getTileView();t.destroy();},onInit:function(){var b=A.getMetadata();this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oView=this.getView();this.appData=this.oView.viewData.appData||{};if(!jQuery.isEmptyObject(this.appData)){this.oModel=new sap.ui.model.json.JSONModel({sizeBehavior:C.last("/core/home/sizeBehavior"),showGroupSelection:this.appData.showGroupSelection===false?false:true,showInfo:this.appData.showInfo===false?false:true,showIcon:this.appData.showIcon===false?false:true,showPreview:this.appData.showPreview===false?false:true,title:this.appData.title?this.appData.title.substring(0,256):'',subtitle:this.appData.subtitle?this.appData.subtitle.substring(0,256):'',numberValue:'',info:this.appData.info?this.appData.info.substring(0,256):'',icon:this.appData.icon||b.icon,numberUnit:this.appData.numberUnit,keywords:this.appData.keywords||'',groups:[]});this.oView.setModel(this.oModel);}},calcTileDataFromServiceUrl:function(s){var t=this;O.read({requestUri:s},function(r){if(typeof r==="string"){r={number:r};}t.oModel.setProperty('/numberValue',r.number);var k=["infoState","stateArrow","numberState","numberDigits","numberFactor","numberUnit"];for(var i=0;i<k.length;i++){var b=k[i];if(r[b]){t.oModel.setProperty('/'+b,r[b]);}}},function(e){jQuery.sap.log.error("sap.ushell.ui.footerbar.SaveAsTile",e);},{read:function(r){r.data=JSON.parse(r.body).d;}});},loadPersonalizedGroups:function(){var g=this.oPageBuilderService.getGroupsForBookmarks(),t=this,d=jQuery.Deferred(),m=t.oView.getModel();g.done(function(G){m.setProperty('/groups',G);m.setProperty("/groups/length",G.length);d.resolve();});return d;},getLocalizedText:function(m,p){return p?sap.ushell.resources.i18n.getText(m,p):sap.ushell.resources.i18n.getText(m);}});},false);
sap.ui.predefine('sap/ushell/ui/footerbar/SaveAsTile.view',function(){"use strict";sap.ui.jsview("sap.ushell.ui.footerbar.SaveAsTile",{getControllerName:function(){return"sap.ushell.ui.footerbar.SaveAsTile";},createContent:function(c){this.oResourceBundle=sap.ushell.resources.i18n;this.viewData=this.getViewData()||{};this.appData=this.viewData.appData||{};this.oTitleInput=new sap.m.Input('bookmarkTitleInput',{tooltip:this.oResourceBundle.getText("bookmarkDialogoTitle_tooltip"),value:{path:"/title",mode:sap.ui.model.BindingMode.TwoWay}}).addStyleClass("sapUshellInputField");this.oTitleInput.addAriaLabelledBy("titleLbl");this.oSubTitleInput=new sap.m.Input('bookmarkSubTitleInput',{tooltip:this.oResourceBundle.getText("bookmarkDialogoSubTitle_tooltip"),value:{path:"/subtitle",mode:sap.ui.model.BindingMode.TwoWay}}).addStyleClass("sapUshellInputField");this.oSubTitleInput.addAriaLabelledBy("subtitleLbl");this.oInfoInput=new sap.m.Input('bookmarkInfoInput',{tooltip:this.oResourceBundle.getText("tileSettingsDialog_informationField"),value:{path:"/info",mode:sap.ui.model.BindingMode.TwoWay},visible:"{/showInfo}"}).addStyleClass("sapUshellInputField");this.oInfoInput.addAriaLabelledBy("infoLbl");var t={numberValue:"{/numberValue}",title:"{/title}",subtitle:"{/subtitle}",info:"{/info}",icon:"{/icon}",infoState:"{/infoState}",numberFactor:"{/numberFactor}",numberUnit:"{/numberUnit}",numberDigits:"{/numberDigits}",numberState:"{/numberState}",stateArrow:"{/stateArrow}",targetURL:"{/targetURL}",keywords:"{/keywords}",sizeBehavior:'{/sizeBehavior}'},p=function(d){var r=d;switch(d){case"Positive":r="Good";break;case"Negative":r="Critical";break;}return r;};var T,s;if(this.viewData.serviceUrl){T=new sap.m.GenericTile({header:t.title,subheader:t.subtitle,sizeBehavior:t.sizeBehavior,size:"Auto",tileContent:[new sap.m.TileContent({size:"Auto",footer:t.info,unit:t.numberUnit,content:[new sap.m.NumericContent({scale:t.numberFactor,value:t.numberValue,truncateValueTo:5,valueColor:p(t.numberState),indicator:t.stateArrow,icon:t.icon,width:"100%"})]})]});s=(typeof(this.viewData.serviceUrl)==="function")?this.viewData.serviceUrl():this.viewData.serviceUrl;c.calcTileDataFromServiceUrl(s);}else{T=new sap.m.GenericTile({header:t.title,subheader:t.subtitle,sizeBehavior:t.sizeBehavior,size:"Auto",tileContent:[new sap.m.TileContent({size:"Auto",footer:t.info,content:new sap.m.NumericContent({icon:t.icon,value:' ',width:"100%"})})]});}this.setTileView(T);var a=new sap.ushell.ui.launchpad.Tile({"long":false,tileViews:[T],afterRendering:function(e){var j=jQuery(this.getDomRef()),d=j.find(".sapMGT");d.removeAttr("tabindex");}}).addStyleClass("sapUshellBookmarkFormPreviewTileMargin");var P=new sap.m.Label("previewLbl",{text:" "+this.oResourceBundle.getText('previewFld'),visible:"{/showPreview}"}),o=new sap.m.Label("titleLbl",{required:true,text:" "+this.oResourceBundle.getText('titleFld'),labelFor:this.oTitleInput}),S=new sap.m.Label("subtitleLbl",{text:this.oResourceBundle.getText('subtitleFld'),labelFor:this.oSubTitleInput}),i=new sap.m.Label("infoLbl",{text:this.oResourceBundle.getText('tileSettingsDialog_informationField'),labelFor:this.oInfoInput,visible:"{/showInfo}"}),b=new sap.ui.core.HTML("previewBackgroundElement",{content:"<div class='sapUshellShellBG sapContrastPlus sapUiStrongBackgroundColor'></div>"}),h=new sap.m.FlexBox("saveAsTileHBox",{items:[b,a],alignItems:sap.m.FlexAlignItems.Center,justifyContent:sap.m.FlexJustifyContent.Center,renderType:sap.m.FlexRendertype.Bare,visible:"{/showPreview}"}).addStyleClass("sapUshellShellBG").addStyleClass("sapUshellBookmarkFormPreviewBoxBottomMargin");o.setLabelFor('bookmarkTitleInput');S.setLabelFor('bookmarkSubTitleInput');i.setLabelFor('bookmarkInfoInput');var g=new sap.m.Label("groupLbl",{text:this.oResourceBundle.getText('GroupListItem_label'),visible:"{/showGroupSelection}"});this.oGroupsSelect=new sap.m.Select("groupsSelect",{tooltip:this.oResourceBundle.getText('bookmarkDialogoGroup_tooltip'),items:{path:"/groups",template:new sap.ui.core.ListItem({text:"{title}"})},width:"100%",visible:{parts:["/showGroupSelection","/groups"],formatter:function(d,G){if(d&&!(G&&G.length)){this.oController.loadPersonalizedGroups();}return d;}.bind(this)}});this.oGroupsSelect.addAriaLabelledBy("groupLbl");return[P,h,o,this.oTitleInput,S,this.oSubTitleInput,i,this.oInfoInput,g,this.oGroupsSelect];},getTitleInput:function(){return this.oTitleInput;},getTileView:function(){return this.tileView;},setTileView:function(t){this.tileView=t;},getBookmarkTileData:function(){var s;if(this.oGroupsSelect&&this.oGroupsSelect.getSelectedItem()){s=this.oGroupsSelect.getSelectedItem().getBindingContext().getObject();}var u;if(this.viewData.customUrl){if(typeof(this.viewData.customUrl)==="function"){u=this.viewData.customUrl();}else{u=this.viewData.customUrl;}}else{u=hasher.getHash()?('#'+hasher.getHash()):window.location.href;}return{title:this.oTitleInput.getValue()?this.oTitleInput.getValue().substring(0,256).trim():'',subtitle:this.oSubTitleInput.getValue()?this.oSubTitleInput.getValue().substring(0,256).trim():'',url:u,icon:this.getModel().getProperty('/icon'),info:this.oInfoInput.getValue()?this.oInfoInput.getValue().substring(0,256).trim():'',numberUnit:this.viewData.numberUnit,serviceUrl:typeof(this.viewData.serviceUrl)==="function"?this.viewData.serviceUrl():this.viewData.serviceUrl,serviceRefreshInterval:this.viewData.serviceRefreshInterval,group:s,keywords:this.viewData.keywords};}});},false);
sap.ui.predefine('sap/ushell/ui/footerbar/SettingsButton',['sap/m/Button','sap/ushell/library','sap/ushell/resources','sap/ushell/ui/footerbar/AboutButton','sap/ushell/ui/footerbar/UserPreferencesButton','sap/ushell/ui/footerbar/LogoutButton','./SettingsButtonRenderer'],function(B,l,r,A,U,L){"use strict";
var S=B.extend("sap.ushell.ui.footerbar.SettingsButton",{metadata:{library:"sap.ushell"}});
S.prototype.init=function(){this.setIcon('sap-icon://action-settings');this.setTooltip(r.i18n.getText("helpBtn_tooltip"));this.attachPress(this.showSettingsMenu);var a=new A(),u=new U(),o=new L();this.defaultMenuItems=[a,u,o];if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
S.prototype.setMenuItems=function(b){this.menuItems=b;};
S.prototype.showSettingsMenu=function(){sap.ui.require(['sap/m/ActionSheet'],function(a){var o=new a({id:'settingsMenu',showHeader:false,buttons:(this.menuItems||[]).concat(this.defaultMenuItems)});o.setPlacement(sap.m.PlacementType.Vertical);o.openBy(this);o.attachAfterClose(function(){o.removeAllButtons();o.destroy();});}.bind(this));};
return S;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/SettingsButtonRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var S=R.extend(B);return S;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/UserPreferencesButton',['sap/m/Button','sap/m/Dialog','sap/m/Bar','sap/m/Text','sap/m/List','sap/ushell/library','sap/ushell/resources','sap/ushell/ui/launchpad/AccessibilityCustomData','sap/ushell/ui/launchpad/ActionItem','sap/m/DisplayListItem','sap/ui/layout/VerticalLayout','sap/m/ObjectIdentifier','sap/ushell/EventHub','sap/ushell/Config','./UserPreferencesButtonRenderer','sap/ui/model/json/JSONModel','sap/ushell/ui/utils'],function(B,D,a,T,L,l,r,A,b,c,V,O,E,C,U,J,u){"use strict";
var d=b.extend("sap.ushell.ui.footerbar.UserPreferencesButton",{metadata:{library:"sap.ushell"}});
d.prototype.init=function(){if(b.prototype.init){b.prototype.init.apply(this,arguments);}this.setIcon('sap-icon://person-placeholder');this.translationBundle=r.i18n;this.setText(this.translationBundle.getText("userSettings"));this.setTooltip(this.translationBundle.getText("settings_tooltip"));this.attachPress(this.showUserPreferencesDialog);this.oModel=C.createModel("/core/shell/model/userPreferences",J);this.setModel(this.oModel);};
d.prototype.createDialog=function(){var t=this;this.saveButton=this._createSaveButton();this.cancelButton=this._createCancelButton();this.oDialog=new D({id:"userPreferencesDialog",title:"{/dialogTitle}",contentWidth:"29.6rem",content:null,contentHeight:"17rem",buttons:[this.saveButton,this.cancelButton],afterClose:function(){this._destroyDialog();this.oUser.resetChangedProperties();}.bind(t),stretch:sap.ui.Device.system.phone}).addStyleClass("sapUshellUserPreferencesDialog");this._addDialogBackButton();this.oDialog.setModel(this.getModel());this.oDialog.addCustomData(new A({key:"aria-label",value:t.translationBundle.getText("Settings_Dialog_Main_label"),writeToDom:true}));this.oDialog.addContent(this._getOriginalDialogContent());};
d.prototype._getOriginalDialogContent=function(){if(!this.oInitialContent){var o,e;o=this._getUserDetailsControl();e=this._getEntryListControl();this.oInitialContent=new V('userPreferencesLayout',{content:[o,e],width:"100%"});}return this.oInitialContent;};
d.prototype._getEntryListControl=function(){var e=this._getUserPrefEntriesTemplate(),x=this.getModel()&&this.getModel().getProperty('/enableHelp'),t=this,i,s=this.oUser.getFullName(),o,f=new L('userPrefEnteryList',{items:{path:"/entries",template:e}});f.addCustomData(new A({key:"aria-label",value:t.translationBundle.getText("Settings_EntryList_label")+s,writeToDom:true}));o=f.onAfterRendering;f.onAfterRendering=function(){var g=this.getItems(),h;o.apply(this,arguments);for(i=0;i<g.length;i++){h=g[i].getBindingContext().getPath();if(!t.getModel().getProperty(h+"/valueResult")){t._setEntryValueResult(h);}if(x){t._addXRayHelpId(h,g[i]);}}};return f;};
d.prototype._addXRayHelpId=function(e,o){var h=this.getModel().getProperty(e+"/entryHelpID");if(h){o.addStyleClass("help-id-"+h);}};
d.prototype._setEntryValueResult=function(e){var t=this;var i=this.getModel().getProperty(e+"/editable");var v=this.getModel().getProperty(e+"/valueArgument");if(typeof v==="function"){this.getModel().setProperty(e+"/valueResult",this.translationBundle.getText("genericLoading"));this.getModel().setProperty(e+"/editable",false);var o=v();o.done(function(f){t.getModel().setProperty(e+"/editable",i);t.getModel().setProperty(e+"/visible",typeof(f)==='object'?!!f.value:true);t.getModel().setProperty(e+"/valueResult",typeof(f)==='object'?f.displayText:f);});o.fail(function(){t.getModel().setProperty(e+"/valueResult",t.translationBundle.getText("loadingErrorMessage"));});}else if(!!v){this.getModel().setProperty(e+"/valueResult",v);this.getModel().setProperty(e+"/editable",i);}else{this.getModel().setProperty(e+"/valueResult",this.translationBundle.getText("loadingErrorMessage"));}};
d.prototype._emitEntryOpened=function(e){var o=E.last("UserSettingsOpened")||{};var p=e.split("/").pop();o[p]=true;E.emit("UserSettingsOpened",o);};
d.prototype._getUserPrefEntriesTemplate=function(){var t=this,i,p=function(e){var o={};o=jQuery.extend(true,{},{},e);sap.ui.require(['sap/m/FlexBox','sap/m/FlexAlignItems','sap/m/FlexJustifyContent','sap/m/BusyIndicator'],function(F,f,g,h){var j=true,k,s,m=o.getSource().getLabel(),n=o.getSource().getBindingContext().getPath();t.getModel().setProperty("/activeEntryPath",n);t._setDetailedEntryModeMode(true,n,m,n);t.oDialog.removeAllContent();s=t.getModel().getProperty(n+"/contentResult");if(s){k=sap.ui.getCore().byId(s);t.oDialog.addContent(k);t._emitEntryOpened(n);}else{var q=null,v,S=true,I=false,w=t.getModel().getProperty(n+"/contentFunc");if(typeof w==="function"){t._emitEntryOpened(n);v=w();v.done(function(x){S=false;if(I===true){t.oDialog.removeAllContent();q.destroy();}if(x instanceof sap.ui.core.Control){t.getModel().setProperty(n+"/contentResult",x.getId());t.oDialog.addContent(x);}else{j=false;}});v.fail(function(){S=false;if(I===true){t.oDialog.removeAllContent();q.destroy();}j=false;});v.always(function(){if(j===false){var x=new F("userPrefErrorFlexBox",{height:"5rem",alignItems:f.Center,justifyContent:g.Center,items:[new T("userPrefErrorText",{text:t.translationBundle.getText("loadingErrorMessage")})]});t.getModel().setProperty(n+"/contentResult",x.getId());t.oDialog.addContent(x);}});if(S===true){q=new h('userPrefLoadingBusyIndicator',{size:"2rem"});t.oDialog.addContent(q);I=true;}}}});};i=new c({label:"{title}",value:"{valueResult}",tooltip:{path:"valueResult",formatter:function(v){return typeof(v)==='string'?v:"";}},type:{path:"editable",formatter:function(e){return(e===true)?"Navigation":"Inactive";}},visible:{path:"visible",formatter:function(v){return(v!==undefined)?v:true;}},press:p,customData:new A({key:"aria-label",value:{parts:[{path:'title'},{path:'valueResult'}],formatter:function(s,v){v=v?v:"";return s+" "+v;}},writeToDom:true})});return i;};
d.prototype._getUserDetailsControl=function(){return new O({title:this.oUser.getFullName(),text:this.oUser.getEmail()}).addStyleClass("sapUshellUserPrefUserIdentifier");};
d.prototype._createCancelButton=function(){var t=this;return new B({id:"cancelButton",text:{parts:['/entries'],formatter:function(e){if(!e){return"";}var f=e.some(function(o){return o.editable;});return f>0?t.translationBundle.getText("cancelBtn"):t.translationBundle.getText("close");}},press:t._dialogCancelButtonHandler.bind(t),visible:true});};
d.prototype._createSaveButton=function(){var t=this;return new B({id:"saveButton",text:this.translationBundle.getText("saveBtn"),press:t._dialogSaveButtonHandler.bind(t),visible:{parts:['/entries'],formatter:function(e){if(!e){return false;}return e.some(function(o){return o.editable;});}}});};
d.prototype._setDetailedEntryModeMode=function(i,e,f,g){this.getModel().setProperty("/isDetailedEntryMode",!!i);this.getModel().setProperty("/dialogTitle",f);};
d.prototype.showUserPreferencesDialog=function(){this.oUser=sap.ushell.Container.getUser();this.createDialog();this.oDialog.open();};
d.prototype._dialogBackButtonHandler=function(e){var t=this;sap.ui.require(['sap/ui/layout/VerticalLayout'],function(V){t.getModel().setProperty("/isDetailedEntryMode",false);t.getModel().setProperty("/dialogTitle",t.translationBundle.getText("userSettings"));t.oDialog.removeAllContent();t.oDialog.addContent(t._getOriginalDialogContent());t._setEntryValueResult(t.getModel().getProperty("/activeEntryPath"));t.getModel().setProperty("/activeEntryPath",null);});};
d.prototype._destroyDialog=function(){this.oHeadBar.destroy();this.oInitialContent.destroy();this.oInitialContent=null;this._modelCleanUpToInitial();this._entriesCleanUp();this.oDialog.destroy();this.saveButton.destroy();this.cancelButton.destroy();};
d.prototype._entriesCleanUp=function(){var i,e=this.getModel().getProperty("/entries"),s,o;for(i=0;i<e.length;i++){var s=e[i].contentResult;delete e[i].contentResult;if(s){o=sap.ui.getCore().byId(s);o.destroy();o=null;}e[i].valueResult=null;}this.getModel().setProperty("/entries",e);};
d.prototype._modelCleanUpToInitial=function(){this.getModel().setProperty("/isDetailedEntryMode",false);this.getModel().setProperty("/dialogTitle",this.translationBundle.getText("userSettings"));};
d.prototype._dialogSaveButtonHandler=function(){var t=this,i,e=this.getModel().getProperty("/entries"),s=u.saveUserPreferenceEntries(e);i=this.getModel().getProperty("/isDetailedEntryMode");if(i){this.getModel().setProperty("/activeEntryPath",null);}s.done(function(){t._showSaveMessageToast();});s.fail(function(f){sap.ui.require(['sap/m/MessageBox'],function(M){var g,h="";if(f.length===1){g=t.translationBundle.getText("savingEntryError")+" ";}else{g=t.translationBundle.getText("savingEntriesError")+"\n";}f.forEach(function(j){g+=j.entry+"\n";h+="Entry: "+j.entry+" - Error message: "+j.message+"\n";});M.show(g,{icon:M.Icon.ERROR,title:t.translationBundle.getText("Error"),actions:[M.Action.OK]});jQuery.sap.log.error("Failed to save the following entries",h,"sap.ushell.ui.footerbar.UserPreferencesButton");});});this.oDialog.close();this._destroyDialog();};
d.prototype._dialogCancelButtonHandler=function(){var i,e=this.getModel().getProperty("/entries");for(i=0;i<e.length;i++){if(e[i]&&e[i].onCancel){e[i].onCancel();}}this.oDialog.close();this._destroyDialog();};
d.prototype._addDialogBackButton=function(){var t=this;var o=new B('userPrefBackBtn',{visible:"{/isDetailedEntryMode}",icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:t._dialogBackButtonHandler.bind(t),tooltip:this.translationBundle.getText("feedbackGoBackBtn_tooltip")});var e=new T("userPrefTitle",{text:"{/dialogTitle}"});this.oHeadBar=new a({contentLeft:[o],contentMiddle:[e]});this.oDialog.setCustomHeader(this.oHeadBar);};
d.prototype._showSaveMessageToast=function(){var t=this;sap.ui.require(['sap/m/MessageToast'],function(M){var m=t.translationBundle.getText("savedChanges");M.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});};
return d;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/UserPreferencesButtonRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var U=R.extend(B);return U;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/AccessibilityCustomData',['jquery.sap.global','sap/ui/core/CustomData','sap/ushell/library','jquery.sap.events'],function(q,C,l){"use strict";var A=C.extend("sap.ushell.ui.launchpad.AccessibilityCustomData"),o=C.prototype._checkWriteToDom;
A.prototype._checkWriteToDom=function(r){var k=this.getKey().toLowerCase(),i=sap.ui.getCore().getConfiguration().getAccessibility();if(!i){return;}if(k.indexOf("aria")===0||k==="role"||k==="tabindex"){if(!this.getWriteToDom()){return null;}var v=this.getValue();if(typeof v!="string"){q.sap.log.error("CustomData with key "+k+" should be written to HTML of "+r+" but the value is not a string.");return null;}if(!(sap.ui.core.ID.isValid(k))||(k.indexOf(":")!=-1)){q.sap.log.error("CustomData with key "+k+" should be written to HTML of "+r+" but the key is not valid (must be a valid sap.ui.core.ID without any colon).");return null;}if(k==q.sap._FASTNAVIGATIONKEY){v=/^\s*(x|true)\s*$/i.test(v)?"true":"false";}else if(k.indexOf("sap-ui")==0){q.sap.log.error("CustomData with key "+k+" should be written to HTML of "+r+" but the key is not valid (may not start with 'sap-ui').");return null;}return{key:k,value:v};}else{return o.apply(this,arguments);}};
return A;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/ActionItem',['sap/m/Button','sap/ushell/library','./ActionItemRenderer'],function(B,l){"use strict";
var A=B.extend("sap.ushell.ui.launchpad.ActionItem",{metadata:{library:"sap.ushell",properties:{actionType:{type:"string",group:"Appearance",defaultValue:'standard'}},events:{press:{},afterRendering:{}}}});
A.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.sOrigType=undefined;};
A.prototype.setActionType=function(t){if(!this.sOrigType){this.sOrigType=this.getType();}if(t==='action'){this.setType(sap.m.ButtonType.Unstyled);this.addStyleClass("sapUshellActionItem");}else{this.sOrigType?this.setType(this.sOrigType):this.setType(sap.m.ButtonType.Standard);this.removeStyleClass("sapUshellActionItem");}this.setProperty('actionType',t,true);};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/ActionItemRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var A=R.extend(B);return A;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorItem',['sap/ui/core/Control','sap/ushell/library','./AnchorItemRenderer'],function(C,l){"use strict";
var A=C.extend("sap.ushell.ui.launchpad.AnchorItem",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},selected:{type:"boolean",group:"Misc",defaultValue:false},groupId:{type:"string",group:"Misc",defaultValue:null},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},writeHelpId:{type:"boolean",group:"Misc",defaultValue:false},index:{type:"int",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:null},isGroupVisible:{type:"boolean",group:"Misc",defaultValue:true},isGroupRendered:{type:"boolean",group:"Misc",defaultValue:false},isGroupDisabled:{type:"boolean",group:"Misc",defaultValue:false},locked:{type:"boolean",group:"Misc",defaultValue:false}},events:{press:{},afterRendering:{}}}});
A.prototype.onAfterRendering=function(){this.fireAfterRendering();};
A.prototype.setTitle=function(t){this.setProperty("title",t,true);this.$().find(".sapUshellAnchorItemInner").text(t);};
A.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);};
A.prototype.setSelected=function(s){s=!!s;this.setProperty("selected",s,true);if(s){var j=jQuery(".sapUshellAnchorItemSelected");j.each(function(){jQuery(this).toggleClass("sapUshellAnchorItemSelected",false);jQuery(this).attr("aria-selected",false);});}this.$().attr("aria-selected",s);this.$().toggleClass("sapUshellAnchorItemSelected",s);};
A.prototype.setIsGroupRendered=function(r){r=!!r;this.setProperty("isGroupRendered",r,true);if(r){this.removeStyleClass("sapUshellAnchorItemNotRendered");}else{this.addStyleClass("sapUshellAnchorItemNotRendered");}};
A.prototype.setIsGroupVisible=function(v){v=!!v;this.setProperty("isGroupVisible",v,true);this.toggleStyleClass("sapUshellShellHidden",!v);};
A.prototype.setIsGroupDisabled=function(v){v=!!v;this.setProperty('isGroupDisabled',v,true);this.$().find('.sapUshellAnchorItemInner').toggleClass('sapUshellAnchorItemDisabled',v);};
A.prototype.onclick=function(){this.firePress();};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorItemRenderer',function(){"use strict";var A={};
A.render=function(r,a){var o=a.getParent(),b=o.getGroups(),c=b.filter(function(g){return g.getVisible();}),C=c.indexOf(a)>-1?c.indexOf(a)+1:"",d=a.getModel(),i=a.getBindingContext().getPath(),I=d.getProperty(i),s=I.groupId;r.write("<li");r.writeControlData(a);r.addClass("sapUshellAnchorItem");if(a.getWriteHelpId()){var e=a.getDefaultGroup()?"help-id-homeAnchorNavigationBarItem":"help-id-anchorNavigationBarItem";r.addClass(e);}r.writeAccessibilityState(a,{role:"option",posinset:C,setsize:c.length});r.writeAttribute("modelGroupId",s);r.writeAttribute("tabindex","-1");if(!a.getVisible()){r.addClass("sapUshellShellHidden");r.writeAttribute("data-help-id",a.getGroupId());}r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellAnchorItemInner");r.writeClasses();r.write(">");r.writeEscaped(a.getTitle());r.write("</div>");r.write("</li>");};
return A;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorNavigationBar',['sap/m/Bar','sap/ushell/library','./AnchorNavigationBarRenderer'],function(B,l){"use strict";
var A=B.extend("sap.ushell.ui.launchpad.AnchorNavigationBar",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},selectedItemIndex:{type:"int",group:"Misc",defaultValue:0},overflowEnabled:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{groups:{type:"sap.ushell.ui.launchpad.AnchorItem",multiple:true,singularName:"group"}},events:{afterRendering:{},itemPress:{}}}});
A.prototype.init=function(){sap.ui.Device.resize.attachHandler(this.reArrangeNavigationBarElements,this);this.bGroupWasPressed=false;this.bIsRtl=sap.ui.getCore().getConfiguration().getRTL();this._bIsRenderedCompletely=false;};
A.prototype.handleExit=function(){if(this.oPopover){this.oPopover.destroy();}if(this.oOverflowButton){this.oOverflowButton.destroy();}};
A.prototype.onAfterRendering=function(){if(this._bIsRenderedCompletely){this.reArrangeNavigationBarElements();if(this.bIsRtl){jQuery(".sapUshellAnchorNavigationBarItemsScroll").addClass("sapUshellRtl");}jQuery(".sapUshellAnchorNavigationBarItemsScroll").scroll(this.setNavigationBarItemsVisibility.bind(this));jQuery(".sapUshellAnchorItem:visible:first").attr("accesskey","h");}};
A.prototype.openOverflowPopup=function(){var o=jQuery('.sapUshellAnchorItemOverFlow').hasClass("sapUshellAnchorItemOverFlowOpen");if(this.oOverflowButton&&!o){this.oOverflowButton.firePress();}};
A.prototype.closeOverflowPopup=function(){if(this.oPopover){this.oPopover.close();}};
A.prototype.reArrangeNavigationBarElements=function(){this.anchorItems=this.getVisibleGroups();var s=this.getSelectedItemIndex()||0;if(this.anchorItems.length){this.adjustItemSelection(s);}if(sap.ui.Device.system.phone&&this.anchorItems.length){this.anchorItems.forEach(function(i,a){i.setIsGroupVisible(false);});this.anchorItems[this.getSelectedItemIndex()].setIsGroupVisible(true);}else{setTimeout(function(){this.setNavigationBarItemsVisibility();}.bind(this),200);}this._adjustAnchorBarAriaProperties(this.anchorItems);};
A.prototype._scrollToGroupByGroupIndex=function(g,s){if(g===this.anchorItems.length-1||this.bIsRtl&&g===0){if(this.oOverflowLeftButton){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden");}}var a=sap.ui.Device.system.tablet?jQuery(".sapUshellAnchorNavigationBarItemsScroll"):jQuery(".sapUshellAnchorNavigationBarItems"),b=a.offset()?a.offset().left:0,j=this.anchorItems[g].getDomRef(),m=this.getModel(),M=m.getProperty('/animationMode')==='minimal',c=s?s:200,i=M?0:c,d,e;if(j){d=j.offsetLeft;if(sap.ui.Device.browser.msie&&this.bIsRtl){var S=window.innerWidth-d;var f=window.innerWidth-b;var r=S-f;a.animate({scrollLeft:r},i,this.setNavigationBarItemsVisibility.bind(this));return;}e=this.bIsRtl?this._normalizeScrollBarWidth()+d+200:d-b;a.animate({scrollLeft:e},i,this.setNavigationBarItemsVisibility.bind(this));}};
A.prototype._normalizeScrollBarWidth=function(){var L=this.anchorItems[this.anchorItems.length-1].getDomRef().offsetLeft,f=this.anchorItems[0].getDomRef().offsetLeft,t=Math.abs(L)-Math.abs(f);return t;};
A.prototype.setNavigationBarItemsVisibility=function(){if(!sap.ui.Device.system.phone){if(this.anchorItems.length&&(!this.isMostRightAnchorItemVisible()||!this.isMostLeftAnchorItemVisible())){this.oOverflowButton.removeStyleClass("sapUshellShellHidden");jQuery('.sapUshellAnchorItemOverFlow').removeClass("sapUshellShellHidden");}else if(this.oOverflowButton){this.oOverflowButton.addStyleClass("sapUshellShellHidden");jQuery('.sapUshellAnchorItemOverFlow').addClass("sapUshellShellHidden");}if(this.bIsRtl){if(this.anchorItems.length&&!this.isMostLeftAnchorItemVisible()){this.oOverflowRightButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowRightButton){this.oOverflowRightButton.addStyleClass("sapUshellShellHidden");}if(this.anchorItems.length&&!this.isMostRightAnchorItemVisible()){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowLeftButton){this.oOverflowLeftButton.addStyleClass("sapUshellShellHidden");}}else{if(this.anchorItems.length&&!this.isMostLeftAnchorItemVisible()){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowLeftButton){this.oOverflowLeftButton.addStyleClass("sapUshellShellHidden");}if(this.anchorItems.length&&!this.isMostRightAnchorItemVisible()){this.oOverflowRightButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowRightButton){this.oOverflowRightButton.addStyleClass("sapUshellShellHidden");}}jQuery(".sapUshellAnchorItem.firstItem").removeClass("firstItem");var j=jQuery(".sapUshellAnchorItem:visible").first();j.addClass("firstItem");}else{if(this.anchorItems.length){this.oOverflowButton.removeStyleClass("sapUshellShellHidden");var s=this.getSelectedItemIndex()||0;if(this.oPopover){this.oPopover.setTitle(this.anchorItems[s].getTitle());}}}};
A.prototype.adjustItemSelection=function(s){setTimeout(function(){if(this.anchorItems&&this.anchorItems.length){this.anchorItems.forEach(function(i){i.setSelected(false);});if(s<this.anchorItems.length){this.anchorItems[s].setSelected(true);this._scrollToGroupByGroupIndex(s);}}}.bind(this),200);};
A.prototype.isMostRightAnchorItemVisible=function(){var j=jQuery('.sapUshellAnchorNavigationBarInner'),n=!jQuery.isEmptyObject(j)?j.width():0,a=!jQuery.isEmptyObject(j)&&j.offset()?j.offset().left:0,b=this.bIsRtl?this.anchorItems[0].getDomRef():this.anchorItems[this.anchorItems.length-1].getDomRef(),c=!jQuery.isEmptyObject(b)?jQuery(b).width():0,d;if(c<0){c=80;}d=b&&jQuery(b).offset()?jQuery(b).offset().left:0;return Math.ceil(d)+c<=a+n;};
A.prototype.isMostLeftAnchorItemVisible=function(){var j=jQuery('.sapUshellAnchorNavigationBarInner'),n=!jQuery.isEmptyObject(j)&&j.offset()?j.offset().left:0,f=this.bIsRtl?this.anchorItems[this.anchorItems.length-1].getDomRef():this.anchorItems[0].getDomRef(),a=!jQuery.isEmptyObject(f)&&jQuery(f).offset()?jQuery(f).offset().left:0;return Math.ceil(a)>=n;};
A.prototype.setSelectedItemIndex=function(s){if(s!==undefined){this.setProperty("selectedItemIndex",s,true);}};
A.prototype.setOverflowEnabled=function(e){this.setProperty("overflowEnabled",e);if(this.oOverflowButton){this.oOverflowButton.setEnabled(e);}};
A.prototype._getOverflowLeftArrowButton=function(){this.oOverflowLeftButton=new sap.m.Button({icon:'sap-icon://slim-arrow-left',tooltip:sap.ushell.resources.i18n.getText("scroll_beginning"),press:function(e){this._scrollToGroupByGroupIndex(0);}.bind(this)}).addStyleClass("sapUshellShellHidden");return this.oOverflowLeftButton;};
A.prototype._getOverflowRightArrowButton=function(){this.oOverflowRightButton=new sap.m.Button({icon:'sap-icon://slim-arrow-right',tooltip:sap.ushell.resources.i18n.getText("scroll_end"),press:function(e){this._scrollToGroupByGroupIndex(this.anchorItems.length-1);}.bind(this)}).addStyleClass("sapUshellShellHidden");return this.oOverflowRightButton;};
A.prototype._getOverflowButton=function(){if(this.oOverflowButton){return this.oOverflowButton;}this.oOverflowButton=new sap.m.Button("sapUshellAnchorBarOverflowButton",{icon:'sap-icon://slim-arrow-down',tooltip:sap.ushell.resources.i18n.getText("more_groups"),enabled:this.getOverflowEnabled(),press:function(e){if(!this.oPopover){this._initPopover();}if(this.oPopover.isOpen()){this.oPopover.close();}else{var L=this.oPopover.getContent()[0];this.anchorItems=this.getVisibleGroups();L.setModel(this.getModel());var a=this.getModel().getProperty("/tileActionModeActive");var v=new sap.ui.model.Filter('','EQ','a');v.fnTest=function(i){if(!i.visibilityModes[a?1:0]){return false;}return i.isGroupVisible||a;}.bind(this);L.bindItems({path:"/groups",template:new sap.ushell.ui.launchpad.GroupListItem({title:"{title}",groupId:"{groupId}",index:"{index}"}),filters:[v]});var s=jQuery(".sapUshellAnchorItemSelected").attr("id");var S=sap.ui.getCore().byId(s);jQuery.each(L.getItems(),function(i,b){if(S.mProperties.groupId===b.mProperties.groupId){b.addStyleClass("sapUshellAnchorPopoverItemSelected");}else{b.addStyleClass("sapUshellAnchorPopoverItemNonSelected");}});jQuery('.sapUshellAnchorItemOverFlow').toggleClass("sapUshellAnchorItemOverFlowPressed",true);this.oPopover.openBy(this.oOverflowButton);}}.bind(this)}).addStyleClass("sapUshellShellHidden").addStyleClass('sapContrastPlus');return this.oOverflowButton;};
A.prototype._initPopover=function(){var t=this;var L=new sap.m.List({mode:sap.m.ListMode.SingleSelectMaster,rememberSelections:false,selectionChange:function(e){t.fireItemPress({group:e.getParameter('listItem')});t.oPopover.close();}});this.bOverFlowBtnClick=false;this.oPopover=new sap.m.Popover("sapUshellAnchorBarOverflowPopover",{showArrow:false,showHeader:false,placement:"Left",content:[L],horizontalScrolling:false,beforeOpen:function(){jQuery('.sapUshellAnchorItemOverFlow').addClass("sapUshellAnchorItemOverFlowOpen");var j=jQuery(".sapUshellAnchorItemOverFlow"),i=sap.ui.getCore().getConfiguration().getRTL(),o=i?-1*j.outerWidth():j.outerWidth();this.setOffsetX(o);},beforeClose:function(){if(document.activeElement.id===this.oOverflowButton.getId()){this.bOverFlowBtnClick=true;}}.bind(this),afterClose:function(){jQuery('.sapUshellAnchorItemOverFlow').removeClass("sapUshellAnchorItemOverFlowOpen");jQuery('.sapUshellAnchorItemOverFlow').toggleClass("sapUshellAnchorItemOverFlowPressed",false);}}).addStyleClass("sapUshellAnchorItemsPopover").addStyleClass('sapContrastPlus');};
A.prototype.getVisibleGroups=function(){return this.getGroups().filter(function(g){return g.getVisible();});};
A.prototype._adjustAnchorBarAriaProperties=function(g){var i;for(i=0;i<g.length;i++){var j=jQuery(g[i].getDomRef());j.attr("aria-posinset",i+1);j.attr("aria-setsize",g.length);}};
A.prototype._setRenderedCompletely=function(r){this._bIsRenderedCompletely=r;};
A.prototype.handleAnchorItemPress=function(e){this.bGroupWasPressed=true;this.fireItemPress({group:e.getSource(),manualPress:true});};
A.prototype.exit=function(){if(this.oOverflowLeftButton){this.oOverflowLeftButton.destroy();}if(this.oOverflowRightButton){this.oOverflowRightButton.destroy();}if(this.oOverflowButton){this.oOverflowButton.destroy();}if(this.oPopover){this.oPopover.destroy();}};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorNavigationBarRenderer',['jquery.sap.global'],function(q){"use strict";var A={};
A.render=function(r,c){r.write("<div");r.addClass("sapUshellAnchorNavigationBar");r.writeClasses();r.writeControlData(c);r.write(">");r.write("<div");r.addClass("sapUshellAnchorNavigationBarInner");r.writeClasses();r.write(">");if(c.getGroups().length>0){c._setRenderedCompletely(true);r.write("<div");r.addClass("sapUshellAnchorLeftOverFlowButton");r.writeClasses();r.write(">");r.renderControl(c._getOverflowLeftArrowButton());r.write("</div>");r.write("<div");r.addClass("sapUshellAnchorNavigationBarItems");r.writeClasses();r.writeAccessibilityState(c,{role:"list"});r.write(">");r.write("<ul");r.addClass("sapUshellAnchorNavigationBarItemsScroll");r.writeClasses();r.writeAccessibilityState(c,{label:sap.ushell.resources.i18n.getText("AnchorNavigationBar_AriaLabel"),role:"listbox"});r.write(">");this.renderAnchorNavigationItems(r,c);r.write("</ul>");r.write("</div>");r.write("<div");r.addClass("sapUshellAnchorRightOverFlowButton");r.writeClasses();r.write(">");r.renderControl(c._getOverflowRightArrowButton());r.write("</div>");r.write("<div");r.addClass("sapUshellAnchorItemOverFlow");r.writeClasses();r.writeAccessibilityState(c._getOverflowButton(),{"hidden":true});r.write(">");r.renderControl(c._getOverflowButton());r.write("</div>");}r.write("</div>");r.write("</div>");};
A.renderAnchorNavigationItems=function(r,c){var g=c.getGroups();q.each(g,function(i,G){r.renderControl(this);});};
A.shouldAddIBarContext=function(){return false;};
return A;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/CatalogTileContainerRenderer',['sap/ui/core/Renderer','./TileContainerRenderer'],function(R,T){"use strict";var C=R.extend(T);return C;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/DashboardGroupsContainer',['sap/ui/base/ManagedObject','sap/ui/core/Control','sap/ui/core/ResizeHandler','sap/ushell/library','sap/ushell/override','sap/ushell/utils','sap/ushell/Config','sap/ui/Device','./DashboardGroupsContainerRenderer'],function(M,C,R,l,o,u,a,D){"use strict";var b="UShellTileDeviceSet";
var c=C.extend("sap.ushell.ui.launchpad.DashboardGroupsContainer",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},displayMode:{type:"string",defaultValue:null}},aggregations:{groups:{type:"sap.ui.core.Control",multiple:true,singularName:"group"}},events:{afterRendering:{}}}});
c.prototype.init=function(){this._getDynamicStyleElement();if(!D.media.hasRangeSet(b)){D.media.initRangeSet(b,[374],"px",["Small","Responsive"],true);}this._iContainerWidth=null;this._oTileDimensions=null;this._bRangeSetSmall=false;R.register(this,this._handleResize.bind(this));this._oConfigChange=a.on("/core/home/sizeBehavior").do(function(s){this._sSizeBehavior=s;this._updateTileContainer(true);}.bind(this));if(!sap.ui.getCore().isInitialized()){sap.ui.getCore().attachInit(this._handleCoreInitialized.bind(this));}else{this._handleCoreInitialized();}};
c.prototype._handleCoreInitialized=function(){sap.ui.getCore().attachThemeChanged(this._handleThemeApplied,this);};
c.prototype._handleThemeApplied=function(){sap.ui.getCore().detachThemeChanged(this._handleThemeApplied,this);this._updateTileContainer(true);};
c.prototype.exit=function(){if(this._oStyleElement){document.head.removeChild(this._oStyleElement);}delete this._oStyleElement;this._oConfigChange.off();D.media.detachHandler(this._handleMediaChange,this,b);C.prototype.exit.apply(this,arguments);};
c.prototype._handleResize=function(e){if(e.size.width!==e.oldSize.width){this._updateTileContainer();}};
c.prototype._updateTileContainer=function(r){var i=this._getInnerTileContainer();if(!i){return;}var s=this._sSizeBehavior==="Small"||this._bRangeSetSmall;var t=this._getTileDimensions(s,r);var d=this._getElementDimensions(i);var T=t.width+t.marginEnd;var m=Math.floor(d.width/T);var e=T*m-t.marginEnd;var f=this._iContainerWidth!==e;if(f){this._iContainerWidth=e;this._updateTileContainerWidth(e);}};
c.prototype._getInnerTileContainer=function(){var d=this.getDomRef();if(!d){return null;}var t,T=d.querySelectorAll(".sapUshellTileContainerContent");for(var i=0;i<T.length;++i){if(!T[i].parentElement.classList.contains("sapUshellHidden")){t=T[i];break;}}if(t){return t.querySelector(".sapUshellInner");}return null;};
c.prototype._getDynamicStyleElement=function(){if(!this._oStyleElement){this._oStyleElement=document.createElement("style");document.head.appendChild(this._oStyleElement);}return this._oStyleElement;};
c.prototype._updateTileContainerWidth=function(t){var s=this._getDynamicStyleElement();s.innerHTML=".sapUshellLineModeContainer, .sapUshellLinksContainer { width: "+t+"px; }";};
c.prototype._getTileDimensions=function(s,r){if(this._oTileDimensions&&!r){return this._oTileDimensions;}var t=document.createElement("div");t.style.visibility="hidden";t.classList.add("sapUshellTile");if(s){t.classList.add("sapUshellSmall");}document.body.appendChild(t);this._oTileDimensions=this._getElementDimensions(t);document.body.removeChild(t);return this._oTileDimensions;};
c.prototype._getElementDimensions=function(e){var s=window.getComputedStyle(e);var r=sap.ui.getCore().getConfiguration().getRTL();var m=r?s.marginLeft:s.marginRight;return{width:parseFloat(s.width),marginEnd:parseFloat(m)};};
c.prototype.updateGroups=o.updateAggregatesFactory("groups");
c.prototype.onAfterRendering=function(){var t=this,d={bUseUniqueMark:true};if(this.onAfterRenderingTimer){clearTimeout(this.onAfterRenderingTimer);}this.onAfterRenderingTimer=setTimeout(function(){t.onAfterRenderingTimer=undefined;u.setPerformanceMark("FLP-TimeToInteractive_tilesLoaded",d);t.fireAfterRendering();},0);D.media.attachHandler(this._handleMediaChange,this,b);};
c.prototype.onBeforeRendering=function(){D.media.detachHandler(this._handleMediaChange,this,b);};
c.prototype._handleMediaChange=function(e){this._bRangeSetSmall=e.name==="Small";this._updateTileContainer(true);};
c.prototype.getGroupControlByGroupId=function(g){try{var d=this.getGroups();for(var i=0;i<d.length;i++){if(d[i].getGroupId()==g){return d[i];}}}catch(e){}return null;};
c.prototype.addLinksToUnselectedGroups=function(){var g=this.getGroups();g.forEach(function(G,i){if(!G.getIsGroupSelected()){M.prototype.updateAggregation.call(G,"links");}});};
c.prototype.removeLinksFromAllGroups=function(){var g=this.getGroups();g.forEach(function(G,d){var L=G.getLinks();if(L.length){if(L[0].getMetadata().getName()==="sap.m.GenericTile"){G.removeAllLinks();}else{for(var i=0;i<L.length;i++){L[i].destroy();}}}});};
c.prototype.removeLinksFromUnselectedGroups=function(){var g=this.getGroups();g.forEach(function(G,d){var L=G.getLinks();if(L.length&&!G.getIsGroupSelected()){if(L[0].getMetadata().getName()==="sap.m.GenericTile"){G.removeAllLinks();}else{for(var i=0;i<L.length;i++){L[i].destroy();}}}});};
return c;});
sap.ui.predefine('sap/ushell/ui/launchpad/DashboardGroupsContainerRenderer',['jquery.sap.global','sap/ushell/resources','sap/ushell/utils'],function(q,r,u){"use strict";var D={};
D.render=function(R,c){R.write("<div");R.writeControlData(c);R.addClass("sapUshellDashboardGroupsContainer");R.writeClasses();if(c.getAccessibilityLabel()){R.writeAccessibilityState(c,{role:"navigation",label:c.getAccessibilityLabel()});}R.write(">");var g=c.getGroups();q.each(g,function(i,G){R.write("<div");R.addClass("sapUshellDashboardGroupsContainerItem");if(G.getIsGroupLocked()||G.getDefaultGroup()){R.addClass("sapUshellDisableDragAndDrop");}R.writeClasses();R.write(">");R.renderControl(this);R.write("</div>");});u.setPerformanceMark("FLP -- dashboardgroupscontainer renderer");R.write("<div");R.writeAttribute("id","sapUshellDashboardAccessibilityTileText");R.writeAttribute("style","height: 0px; width: 0px; overflow: hidden; float: left;");R.write(">");R.write(r.i18n.getText("tile"));R.write("</div>");R.write("</div>");};
return D;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/EmbeddedSupportErrorMessage',['jquery.sap.global','sap/m/Button','sap/m/Dialog','sap/ushell/library','sap/ushell/resources','./EmbeddedSupportErrorMessageRenderer'],function(q,B,D,l,r){"use strict";
var E=D.extend("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage",{metadata:{library:"sap.ushell",events:{afterClose:{}}}});
E.prototype.open=function(){var c,C;this.translationBundle=r.i18n;c=new B({id:sap.ui.core.ElementMetadata.uid("supportBtn"),text:this.translationBundle.getText("contactSupportBtn"),press:function(){this.close();sap.ui.require(['sap/ushell/ui/footerbar/ContactSupportButton'],function(a){this.oContactSupport=new a("ContactSupportErrorMsg",{visible:true});if(this.oContactSupport){this.oContactSupport.showContactSupportDialog();this.oContactSupport.destroy();}});}.bind(this)});C=new B({id:sap.ui.core.ElementMetadata.uid("closeBtn"),text:this.translationBundle.getText("close"),press:function(){this.close();}.bind(this)});this.setType(sap.m.DialogType.Message);this.setIcon('sap-icon://alert');this.setRightButton(C);this.setLeftButton(c);this._addStyleClassToContent();this.addStyleClass('sapMMessageBoxError');this.attachAfterClose(function(){this.destroy();}.bind(this));if(D.prototype.open){D.prototype.open.apply(this,arguments);}};
E.prototype._addStyleClassToContent=function(){var c=this.getContent(),C,i;for(i in c){C=c[i];if(C.getMetadata().getName()==="sap.m.Text"&&!C.aCustomStyleClasses){C.addStyleClass("sapMMsgBoxText");}}};
E.prototype.onAfterRendering=function(){var L,j=q("#EmbeddedSupportErrorMessage").eq(0);if(j){L=j.attr("aria-labelledby");j.attr("aria-labelledby",L+this.getContent()[0].getId());}};
return E;});
sap.ui.predefine('sap/ushell/ui/launchpad/EmbeddedSupportErrorMessageRenderer',['sap/m/DialogRenderer','sap/ui/core/Renderer'],function(D,R){"use strict";var E=R.extend(D);return E;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/Fiori2LoadingDialog',['sap/ui/core/Control','sap/ushell/library'],function(C,l){"use strict";
var F=C.extend("sap.ushell.ui.launchpad.Fiori2LoadingDialog",{metadata:{library:"sap.ushell",properties:{text:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}}}});
F.prototype.init=function(){var b=document.getElementsByTagName("body")[0],e=document.createElement("DIV"),a=document.createElement("DIV"),c=document.createElement("DIV"),d=document.createElement("DIV"),f=document.createElement("DIV"),g=document.createElement("DIV"),h=document.createElement("DIV");this._oBusyIndicator=this.getBusyIndicator();this._oBusyIndicator.setBusyIndicatorDelay(100);this._firstLoading=true;this._start=0;this._end=0;h.setAttribute("id","sapUshellFiori2LoadingArea");h.setAttribute("class","sapUshellFiori2LoadingDialogArea");h.setAttribute("style","height: 0px; width: 0px; overflow: hidden; float: left;");b.insertBefore(h,b.firstChild);d.setAttribute("id","sapUshellLoadingAccessibilityHelper");d.setAttribute("class","sapUshellLoadingAccessibilityHelper");f.setAttribute("id","sapUshellLoadingAccessibilityHelper-appInfo");f.setAttribute("aria-atomic","true");d.appendChild(f);g.setAttribute("id","sapUshellLoadingAccessibilityHelper-loadingComplete");g.setAttribute("aria-atomic","true");g.setAttribute("aria-live","polite");d.appendChild(g);h.appendChild(d);c.setAttribute("id","sapUshellFiori2LoadingDialog");c.setAttribute("style","z-index: 8;visibility: visible;");c.setAttribute("class","sapUshellShellHidden");e.setAttribute("id","sapUshellFiori2LoadingOverlay");e.setAttribute("class","sapUshellFiori2LoadingDialogOverlayStyle");c.appendChild(e);a.setAttribute("id","sapUshellFiori2LoadingBusyIndicator");c.appendChild(a);b.insertBefore(c,h);this._oBusyIndicator.placeAt("sapUshellFiori2LoadingBusyIndicator");};
F.prototype.getBusyIndicator=function(){return new sap.m.BusyIndicator("fiori2LoadingDialogBusyIndicator");};
F.prototype.openLoadingScreen=function(a){this.start=new Date().getTime();var j=jQuery("#sapUshellFiori2LoadingOverlay");a=a||"full";jQuery("#sapUshellFiori2LoadingDialog").toggleClass("sapUshellShellHidden",false);if(this._firstLoading){this._firstLoading=false;if(a==='minimal'){j.toggleClass("sapUshellInitialLoadingDialogOverlayNoAnimation",true);}else{j.toggleClass("sapUshellInitialLoadingDialogOverlayAnimation",true);}}else{if(a==='minimal'){j.toggleClass("sapUshellLoadingDialogOverlayNoAnimation",true);}else{j.toggleClass("sapUshellLoadingDialogOverlayAnimation",true);}}if(a!=='minimal'){jQuery.sap.measure.start("FLP:LoadingDialogClassAdding","LoadingDialog","FLP");var b=sap.ui.getCore().byId('fiori2LoadingDialogBusyIndicator');if(b){b.addStyleClass('sapUshellLoadingDialogBusyIndicatorAnimation');}jQuery.sap.measure.end("FLP:LoadingDialogClassAdding");}};
F.prototype.isOpen=function(){return!jQuery("#sapUshellFiori2LoadingDialog").hasClass("sapUshellShellHidden");};
F.prototype.closeLoadingScreen=function(){var j=jQuery("#sapUshellFiori2LoadingOverlay");j.toggleClass("sapUshellAnimationPaused",true);var r=function(){var b=sap.ui.getCore().byId('fiori2LoadingDialogBusyIndicator');jQuery("#sapUshellFiori2LoadingDialog").toggleClass("sapUshellShellHidden",true);j.toggleClass("sapUshellLoadingDialogOverlayNoAnimation",false);j.toggleClass("sapUshellLoadingDialogOverlayAnimation",false);j.toggleClass("sapUshellInitialLoadingDialogOverlayAnimation",false);if(b){b.removeStyleClass('sapUshellLoadingDialogBusyIndicatorAnimation');}};if(j[0]&&j[0].getBoundingClientRect().width<100){r();j.toggleClass("sapUshellAnimationPaused",false);}else{j.toggleClass("sapUshellAnimationPaused",false);setTimeout(function(){r();},500);}};
F.prototype.exit=function(){this._oBusyIndicator.destroy();};
return F;});
sap.ui.predefine('sap/ushell/ui/launchpad/GroupHeaderActions',['sap/ui/core/Control','sap/ushell/library','sap/m/Button','sap/m/ActionSheet','./GroupHeaderActionsRenderer'],function(C,l,B,A){"use strict";
var G=C.extend("sap.ushell.ui.launchpad.GroupHeaderActions",{metadata:{library:"sap.ushell",properties:{isOverflow:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},overflowCtrl:{type:"sap.ui.core.Control",multiple:true,singularName:"overflowCtrl"}},events:{afterRendering:{}}}});
G.prototype.onAfterRendering=function(){this.fireAfterRendering();};
G.prototype._getActionOverflowControll=function(){var t=this;return[new B({icon:'sap-icon://overflow',type:'Transparent',enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:function(e){var a=new A({placement:sap.m.PlacementType.Auto});t.getContent().forEach(function(b){var c=b.clone();c.setModel(b.getModel());c.setBindingContext(b.getBindingContext());a.addButton(c);});a.openBy(e.getSource());}}).addStyleClass('sapUshellHeaderActionButton')];};
return G;});
sap.ui.predefine('sap/ushell/ui/launchpad/GroupHeaderActionsRenderer',['jquery.sap.global'],function(q){"use strict";var G={};
G.render=function(r,c){var i=c.getIsOverflow(),a=c.getTileActionModeActive();r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");var C=c.getContent();if(a){if(i){q.each(c._getActionOverflowControll(),function(){this.setParent(c);r.renderControl(this);});}else{q.each(C,function(){r.renderControl(this);});}}r.write("</div>");};
return G;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/GroupListItem',['sap/m/ListItemBase','sap/ushell/library','sap/ushell/utils','./GroupListItemRenderer'],function(L,l,u){"use strict";
var G=L.extend("sap.ushell.ui.launchpad.GroupListItem",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},show:{type:"boolean",group:"Misc",defaultValue:true},groupId:{type:"string",group:"Misc",defaultValue:null},index:{type:"int",group:"Misc",defaultValue:null},numberOfTiles:{type:"int",group:"Misc",defaultValue:0},isGroupVisible:{type:"boolean",group:"Misc",defaultValue:true}},events:{press:{},afterRendering:{}}}});
G.prototype.exit=function(){L.prototype.exit.apply(this,arguments);};
G.prototype.onAfterRendering=function(){this.fireAfterRendering();};
G.prototype.groupHasVisibleTiles=function(){var g=this.getModel().getProperty("/groups/"+this.getIndex()+"/tiles");var a=this.getModel().getProperty("/groups/"+this.getIndex()+"/links");return u.groupHasVisibleTiles(g,a);};
G.prototype.onclick=function(){this.firePress({id:this.getId()});};
G.prototype.setGroupId=function(g){this.setProperty("groupId",g,true);return this;};
G.prototype.setTitle=function(t){this.setProperty("title",t);this.$().find(".sapMSLITitleOnly").text(t);return this;};
return G;});
sap.ui.predefine('sap/ushell/ui/launchpad/GroupListItemRenderer',['sap/m/ListItemBaseRenderer'],function(L){"use strict";var G=sap.ui.core.Renderer.extend(L);
G.renderLIAttributes=function(r){r.addClass("sapUshellGroupLI");r.addClass("sapUshellGroupListItem");};
G.renderLIContent=function(r,l){r.write("<div");r.addClass("sapMSLIDiv");r.addClass("sapMSLITitleDiv");r.writeClasses();if(!l.getVisible()){r.addStyle("display","none");r.writeStyles();}r.write(">");r.write("<div");r.addClass("sapMSLITitleOnly");r.writeClasses();r.write(">");r.writeEscaped(l.getTitle());r.write("</div>");r.write("</div>");};
return G;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/HeaderTile',['sap/ushell/library','./Tile','./HeaderTileRenderer'],function(l,T){"use strict";
var H=T.extend("sap.ushell.ui.launchpad.HeaderTile",{metadata:{library:"sap.ushell",properties:{headerLevel:{type:"sap.m.HeaderLevel",group:"Appearance",defaultValue:sap.m.HeaderLevel.H3},headerText:{type:"string",group:"Appearance",defaultValue:null}}}});
return H;});
sap.ui.predefine('sap/ushell/ui/launchpad/HeaderTileRenderer',['sap/ushell/resources'],function(r){"use strict";var H={},t=r.i18n;
H.render=function(R,c){R.write("<");R.write(c.getHeaderLevel().toLowerCase());R.writeControlData(c);R.addClass("sapUshellHeaderTile");if(!c.getVisible()){R.addClass("sapUshellHidden");}R.writeClasses();R.writeAccessibilityState(c,{label:c.getHeaderText()+t.getText("HeaderCategory")});R.write(">");R.writeEscaped(c.getHeaderText());R.write("</");R.write(c.getHeaderLevel().toLowerCase());R.write(">");};
return H;});
sap.ui.predefine('sap/ushell/ui/launchpad/LinkTileWrapper',['jquery.sap.global','sap/ui/base/ManagedObject','sap/ui/core/Control','sap/ushell/library','./AccessibilityCustomData','./LinkTileWrapperRenderer'],function(q,M,C,l,A){"use strict";
var L=C.extend("sap.ushell.ui.launchpad.LinkTileWrapper",{metadata:{library:"sap.ushell",properties:{uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},target:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},debugInfo:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},footItems:{type:"sap.ui.core.Control",multiple:true,singularName:"footItem"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{}}}});
L.prototype.ontap=function(e,u){q.sap.log.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");return;};
L.prototype.destroy=function(s){this.destroyTileViews();C.prototype.destroy.call(this,s);};
L.prototype.addTileView=function(o,s){o.setParent(null);o.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));M.prototype.addAggregation.call(this,"tileViews",o,s);};
L.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0;}};
L.prototype.onAfterRendering=function(){this.fireAfterRendering();};
L.prototype._launchTileViaKeyboard=function(e){if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],p=false,c;if(t.firePress){c=document.createEvent('MouseEvents');c.initEvent('click',false,true);t.getDomRef().dispatchEvent(c);}else{while(t.getContent&&!p){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});p=true;}}}}};
L.prototype.onsapenter=function(e){this._launchTileViaKeyboard(e);};
L.prototype.onsapspace=function(e){this._launchTileViaKeyboard(e);};
L.prototype.onclick=function(e){if(this.getTileActionModeActive()){e.preventDefault();}else{var c=this.getTileViews()[0].getContent?c.getContent()[0]:this.getTileViews()[0];sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileLinkClick");}};
L.prototype.setVisible=function(v){this.setProperty("visible",v,true);return this.toggleStyleClass("sapUshellHidden",!v);};
L.prototype.setAnimationRendered=function(v){this.setProperty('animationRendered',v,true);};
L.prototype._handleTileShadow=function(j,a){if(j.length){j.unbind('mouseenter mouseleave');var u,t=j.css("border").split("px")[0],m=this.getModel();if(t>0){u=j.css("border-color");}else{u=this.getRgba();}j.hover(function(){if(!m.getProperty('/tileActionModeActive')){var o=q(j).css('box-shadow'),T=o?o.split(') ')[1]:null,U;if(T){U=T+" "+u;q(this).css('box-shadow',U);}}},function(){q(this).css('box-shadow','');});}};
L.prototype.setUuid=function(u){this.setProperty("uuid",u,true);return this;};
return L;});
sap.ui.predefine('sap/ushell/ui/launchpad/LinkTileWrapperRenderer',['jquery.sap.global','sap/ushell/resources','sap/m/Text'],function(q,r,T){"use strict";var L={};
L.render=function(R,c){var t=null,l,s,m=c.getModel();try{t=c.getTileViews()[0];}catch(e){q.sap.log.warning("Failed to load tile view: ",e.message);t=new T({text:r.i18n.getText("cannotLoadTile")});}R.write("<div");if(m&&m.getProperty("/enableHelp")){R.writeAttribute("data-help-id",c.getTileCatalogId());}R.writeControlData(c);R.addClass("sapUshellLinkTile");if(!c.getVisible()){R.addClass("sapUshellHidden");}if(c.getIsLocked()){R.addClass("sapUshellLockedTile");}R.writeClasses();if(c.getIeHtml5DnD()){R.writeAttribute("draggable","true");}R.writeAttributeEscaped("tabindex","-1");l=c.data('layoutPosition');if(l){s='-webkit-transform:'+l.translate3D+';-ms-transform:'+l.translate2D+';transform:'+l.translate3D;R.writeAttribute("style",s);}R.write(">");if(this.renderTileView){this.renderTileView(R,t,c.getTarget());}R.write("</div>");};
L.renderTileView=function(R,t,s){R.write("<div");R.addClass("sapUshellTileInner");R.writeClasses();R.writeAttributeEscaped("title",t&&t.getText?t.getText():'');R.write(">");R.renderControl(t);R.write("</div>");};
return L;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/LoadingDialog',['sap/m/Label','sap/ui/core/Control','sap/ui/core/Icon','sap/ui/core/Popup','sap/ushell/library','sap/ushell/resources','./AccessibilityCustomData','./LoadingDialogRenderer'],function(L,C,I,P,l,r,A){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{iconUri:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},text:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},loadAnimationWithInterval:{type:"boolean",group:"Appearance",defaultValue:true}}}});
a.prototype.init=function(){this._oPopup=new P();this._oPopup.restoreFocus=false;this._oPopup.setShadow(false);this._oPopup.setModal(true,"sapUshellLoadingDialog");this.oIcon=new I();this._oLabel=new L(this.getId()+'loadingLabel');this.sState="idle";this.sLoadingString=r.i18n.getText("genericLoading").replace("..."," ");};
a.prototype.exit=function(){this._oPopup.close();this._oPopup.destroy();this.oIcon.destroy();this._oLabel.destroy();};
a.prototype.isOpen=function(){return this._oPopup.isOpen();};
a.prototype.openLoadingScreen=function(){if(this.sState==="idle"){this.sState="busy";}if(this.getLoadAnimationWithInterval()){this.toggleStyleClass('sapUshellVisibilityHidden',true);this._iTimeoutId=setTimeout(function(){this.toggleStyleClass('sapUshellVisibilityHidden',false);this.$().focus();}.bind(this),3000);}else{this.toggleStyleClass('sapUshellVisibilityHidden',false);this.$().focus();}if(!this.getVisible()){this.setProperty('visible',true,true);this.$().show();}if(!this.isOpen()){this._oPopup.setContent(this);this._oPopup.setPosition("center center","center center",document,"0 0","fit");this._oPopup.open();}};
a.prototype.setLoadAnimationWithInterval=function(s){this.setProperty('loadAnimationWithInterval',s,true);};
a.prototype.showAppInfo=function(s,i,b){this.setProperty('text',s,true);this.setProperty('iconUri',i,true);this.oIcon.setSrc(i);this._oLabel.setText(s);this._oLabel.addCustomData(new A({key:'aria-hidden',value:"true",writeToDom:true}));if(jQuery("#"+this.getId()+"accessibility-helper")[0]&&b){jQuery("#"+this.getId()+"accessibility-helper")[0].innerText=this.sLoadingString;}};
a.prototype.closeLoadingScreen=function(){if(this._iTimeoutId){clearTimeout(this._iTimeoutId);}if(this.getVisible()){this.sState="idle";this.setProperty('visible',false,true);this.$().hide();this._oPopup.close();}};
a.prototype.onAfterRendering=function(){this.$().css("width","20rem");};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/LoadingDialogRenderer',function(){"use strict";var L={};
L.render=function(r,c){var t=c.getTooltip_AsString();c._oLabel.addStyleClass("sapUshellLoadingDialogLabel");r.write("<div");r.writeControlData(c);r.addClass("sapUshellLoadingDialogControl");r.writeClasses();if(t){r.writeAttributeEscaped("title",t);}r.write(">");if(jQuery.os.ios||!c._isPlatformDependent){this.renderAppInfo(r,c);this.renderFioriFlower(r,c);}else{this.renderFioriFlower(r,c);this.renderAppInfo(r,c);}r.write("</div>");};
L.renderAppInfo=function(r,c){r.write("<div").addClass("sapUshellLoadingDialogAppData").writeClasses().write(">");if(c.getIconUri()){r.renderControl(c.oIcon);}r.write("<span");r.writeAttribute("id",c.getId()+"accessibility-helper");r.addClass("sapUshellAccessibilityHelper");r.writeClasses();r.writeAccessibilityState(c,{live:"rude","relevant":"additions text"});r.write(">");r.write("</span>");r.renderControl(c._oLabel);r.write("</div>");};
L.renderFioriFlower=function(r,c){var i,R=false,u=[/Android\s4\.2.+GT-I9505.+Chrome\/18/];if(navigator.userAgent){for(i=0;i<u.length;i=i+1){if(u[i].test(navigator.userAgent)){R=true;break;}}}if(jQuery.support.cssAnimations&&!R){r.write("<div id='fiori2-loader'>");r.write("<div class='fiori2-blossom'>");for(i=1;i<6;i=i+1){r.write("<div class='fiori2-leafContainer fiori2-leafContainer"+i+"'>");r.write("<div class='fiori2-leaf fiori2-leaf"+i+"'></div>");r.write("</div>");}r.write("</div>");r.write("</div>");}};
return L;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/Panel',['sap/m/Panel','sap/ushell/library','sap/ushell/override','./PanelRenderer'],function(P,l,o){"use strict";
var a=P.extend("sap.ushell.ui.launchpad.Panel",{metadata:{library:"sap.ushell",properties:{translucent:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{headerContent:{type:"sap.ui.core.Control",multiple:true,singularName:"headerContent"},headerBar:{type:"sap.m.Bar",multiple:false}}}});
a.prototype.updateAggregation=o.updateAggregation;return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/PanelRenderer',function(){"use strict";var P={};
P.render=function(r,c){if(!c.getVisible()){return;}r.write("<section");r.writeControlData(c);r.addClass("sapMPanel");r.addClass("sapUshellPanel");if(!c.getTranslucent()){r.addClass("sapMPanelBG");}r.addStyle("width",c.getWidth());r.addStyle("height",c.getHeight());r.writeClasses();r.writeStyles();r.write(">");var h=c.getHeaderContent();var l=h.length;if(c.getHeaderText()||l>0||c.getHeaderBar()){r.write("<header");r.addClass("sapMPanelHdr");r.addClass("sapUshellCatalogHeader");r.writeClasses();r.write(">");if(c.getHeaderText()||l>0){r.write("<");r.write(c.getHeaderLevel().toLowerCase());r.write(">");if(c.getHeaderText()){r.writeEscaped(c.getHeaderText());}for(var j=0;j<l;j++){r.renderControl(h[j]);}r.write("</");r.write(c.getHeaderLevel().toLowerCase());r.write(">");}if(c.getHeaderBar()){r.renderControl(c.getHeaderBar());}r.write("</header>");}r.write("<div");r.addClass("sapMPanelContent");r.addClass("sapUshellPanelContent");r.writeClasses();r.write(">");var C=c.getContent();var L=C.length;for(var i=0;i<L;i++){r.renderControl(C[i]);}r.write("</div>");r.write("</section>");};
return P;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/PlusTile',['sap/ushell/library','./Tile','sap/ui/core/Icon','sap/ushell/resources','./PlusTileRenderer'],function(l,T,I,r){"use strict";
var P=T.extend("sap.ushell.ui.launchpad.PlusTile",{metadata:{library:"sap.ushell",properties:{groupId:{type:"string",group:"Misc",defaultValue:''},enableHelp:{type:"boolean",group:"Misc",defaultValue:false}},events:{press:{}}}});
P.prototype.init=function(){this.oIcon=new I({src:'sap-icon://add',tooltip:r.i18n.getText("openAppFinder_tooltip")});};
P.prototype.exit=function(){if(this.oIcon){this.oIcon.destroy();}};
P.prototype.onclick=function(){var g=this.getParent().getBindingContext().getObject();if(!g.object){return;}this.firePress();};
P.prototype.onsapspace=function(){this.firePress();};
P.prototype.onsapenter=function(){this.firePress();};
P.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);return this;};
return P;});
sap.ui.predefine('sap/ushell/ui/launchpad/PlusTileRenderer',['sap/ushell/resources','sap/ushell/Config'],function(r,C){"use strict";var P={};var t=r.i18n;
P.render=function(R,c){R.write("<li");R.writeAttribute("tabindex","-1");R.writeControlData(c);R.addClass("sapUshellTile");R.addClass("sapUshellPlusTile");if(C.last("/core/home/sizeBehavior")==="Small"){R.addClass("sapUshellSmall");R.addClass("sapUshellPlusTileSmall");}if(c.getEnableHelp()){R.addStyleClass("help-id-plusTile");}R.addClass("sapContrastPlus");R.addClass("sapMGT");R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("TilePlus_label")});R.write(">");R.renderControl(c.oIcon);R.write("</li>");};
return P;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/ShortcutsHelpContainer',["sap/ui/core/Control","./ShortcutsHelpContainerRenderer"],function(C){"use strict";
var S=C.extend("sap.ushell.ui.launchpad.ShortcutsHelpContainer",{metadata:{aggregations:{content:{type:"sap.ui.core.Element",multiple:true,singularName:"content"}}}});
return S;});
sap.ui.predefine('sap/ushell/ui/launchpad/ShortcutsHelpContainerRenderer',['jquery.sap.global'],function(q){"use strict";var S={};
S.render=function(r,c){var C=c.getContent()||[];r.write("<div");r.writeControlData(c);r.addClass("sapUshelShortcutsHelpContainer");r.writeClasses();r.writeAccessibilityState(c,{role:"group"});r.write(">");C.forEach(function(e){var s=e.isA("sap.m.Label")?"sapUshelShortcutsHelpContainerLabel":"sapUshelShortcutsHelpContainerText";r.write("<div");r.addClass(s);r.writeClasses();r.write(">");r.renderControl(e);r.write("</div>");});r.write("</div>");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/Tile',['jquery.sap.global','sap/ui/base/ManagedObject','sap/ui/core/Control','sap/ushell/library','sap/ui/core/Icon','sap/ushell/resources','sap/ushell/ui/launchpad/AccessibilityCustomData','./TileRenderer'],function(q,M,C,l,I,r,A){"use strict";
var T=C.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{long:{type:"boolean",group:"Misc",defaultValue:false},uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},isCustomTile:{type:"boolean",group:"Misc",defaultValue:false},target:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},debugInfo:{type:"string",group:"Misc",defaultValue:null},rgba:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},showActionsIcon:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},navigationMode:{type:"string",group:"Misc",defaultValue:null},isDraggedInTabBarToSourceGroup:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},pinButton:{type:"sap.ui.core.Control",multiple:true,singularName:"pinButton"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{},deletePress:{}}}});
T.prototype.getActionSheetIcon=function(){if(!this.getTileActionModeActive()){return undefined;}if(!this.actionSheetIcon){this.actionSheetIcon=new I({src:"sap-icon://overflow"});this.actionSheetIcon.setTooltip(r.i18n.getText("configuration.category.tile_actions"));this.actionSheetIcon.addStyleClass('sapUshellTileActionIconDivBottomInner');}return this.actionSheetIcon;};
T.prototype.ontap=function(e,u){q.sap.log.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");this.firePress();};
T.prototype.destroy=function(s){this.destroyTileViews();C.prototype.destroy.call(this,s);};
T.prototype.addTileView=function(o,s){o.setParent(null);M.prototype.addAggregation.call(this,"tileViews",o,s);};
T.prototype.destroyTileViews=function(){if(this.mAggregations["tileViews"]){this.mAggregations["tileViews"].length=0;}};
T.prototype.onBeforeRendering=function(){var d=this.getDomRef();if(!d){return;}var i=d.querySelector("a.sapUshellTileInner");if(i){i.onclick=null;}};
T.prototype.onAfterRendering=function(){if(this.getIsDraggedInTabBarToSourceGroup()===true){var t=this.getParent();t.removeAggregation("tiles",this,false);}this._redrawRGBA();this._disableInnerLink();this.fireAfterRendering();};
T.prototype._disableInnerLink=function(){var d=this.getDomRef();var i=d.querySelector("a.sapUshellTileInner");if(i){i.onclick=function(e){e.preventDefault();};}};
T.prototype._launchTileViaKeyboard=function(e){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()});}else if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],p=false,c,o;if(t.firePress){t.firePress({id:this.getId()});}else if(t.getComponentInstance){c=t.getComponentInstance();if(c._oController&&c._oController.oView.getContent()){o=c._oController.oView.getContent()[0];if(o&&o.firePress){o.firePress({id:this.getId()});}}}else{while(t.getContent&&!p){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});p=true;}}}}};
T.prototype.onsapenter=function(e){this._launchTileViaKeyboard(e);if(!this.getTileActionModeActive()){this._announceLoadingApplication();}};
T.prototype.onsapspace=function(e){this._launchTileViaKeyboard(e);if(!this.getTileActionModeActive()){this._announceLoadingApplication();}};
T.prototype.onfocusin=function(e){var c=this.getDomRef().getAttribute("class"),p;p=c?c.indexOf("sapUshellPlusTile")!==-1:false;if(!p){var j=q(this.getDomRef()).prevUntil("h3"),a,s="",t,n,b;if(j.length>0){a=j[j.length-1].previousSibling;}else{a=this.getDomRef().previousSibling;}if(a){s=a.getAttribute('id');}b=this.getDomRef().querySelector(".sapUshellTileInner");var d=this.getDomRef().querySelector(".sapUshellTileDeleteClickArea .sapUiIcon");var f=d?d.id:"";if(b&&b.children&&b.children[0]){var g=(s&&s!=="")?"sapUshellCatalogAccessibilityTileText":"sapUshellDashboardAccessibilityTileText";t=b.children[0].getAttribute('id');var L=[g,t,f,s];n=this.getId()+"_navigationMode";var N=document.getElementById(n);if(N==null){var h=this.getNavigationMode();if(h){N=document.createElement("div");var i=document.createAttribute("id");i.value=n;N.setAttributeNode(i);N.style.display="none";var k=r.i18n.getText(h+"NavigationMode");if(k){N.innerHTML=k;}else{q.sap.log.warning("could not get the navigation mode text of this tile to be added on the aria-labelledBby attribute");}b.appendChild(N);L.splice(1,0,n);}}else{L.splice(1,0,n);}this.getDomRef().setAttribute("aria-labelledby",L.join(" "));}}};
T.prototype.onclick=function(e){if(this.getTileActionModeActive()){var s=e.originalEvent.srcElement;if(q(s).closest('.sapUshellTileDeleteClickArea').length>0){this.fireDeletePress();}else{this.fireCoverDivPress({id:this.getId()});}}else{this._announceLoadingApplication();}};
T.prototype._announceLoadingApplication=function(){var a=document.getElementById("sapUshellLoadingAccessibilityHelper-appInfo"),L=r.i18n.getText("screenReaderNavigationLoading");if(a){a.setAttribute("role","alert");a.innerHTML=L;setTimeout(function(){a.removeAttribute("role");a.innerHTML="";},0);}};
T.prototype._initDeleteAction=function(){var t=this;if(!this.deleteIcon){this.deleteIcon=new I({src:"sap-icon://decline",tooltip:r.i18n.getText("removeButtonTItle")});this.deleteIcon.addEventDelegate({onclick:function(e){t.fireDeletePress();e.stopPropagation();}});this.deleteIcon.addStyleClass("sapUshellTileDeleteIconInnerClass");this.deleteIcon.addCustomData(new A({key:"aria-label",value:r.i18n.getText("removeButtonLabel"),writeToDom:true}));}return this.deleteIcon;};
T.prototype.setShowActionsIcon=function(s){var t=this,i;if(s){i=new I({size:"1rem",src:"sap-icon://overflow",press:function(e){t.fireShowActions();t.addStyleClass('showTileActionsIcon');var E=sap.ui.getCore().getEventBus(),a=function(n,b,c){c.removeStyleClass('showTileActionsIcon');E.unsubscribe("dashboard","actionSheetClose",a);};E.subscribe("dashboard","actionSheetClose",a);}});i.addStyleClass("sapUshellTileActionsIconClass");this.actionIcon=i;}else if(this.actionIcon){this.actionIcon.destroy(true);}this.setProperty("showActionsIcon",s);};
T.prototype.setIsDraggedInTabBarToSourceGroup=function(d){this.setProperty('isDraggedInTabBarToSourceGroup',d,true);this.setVisible(!d);};
T.prototype.setVisible=function(v){this.setProperty("visible",v,true);return this.toggleStyleClass("sapUshellHidden",!v);};
T.prototype.setTarget=function(v){this.setProperty("target",v,true);this.$().find(".sapUshellTileInner").attr("href",v);};
T.prototype.setRgba=function(v){this.setProperty("rgba",v,true);this._redrawRGBA(arguments);};
T.prototype.setAnimationRendered=function(v){this.setProperty('animationRendered',v,true);};
T.prototype.setNavigationMode=function(v){this.setProperty('navigationMode',v,true);};
T.prototype._handleTileShadow=function(j,a){if(j.length){j.unbind('mouseenter mouseleave');var u,t=j.css("border").split("px")[0],m=this.getModel();if(t>0){u=j.css("border-color");}else{u=this.getRgba();}j.hover(function(){if(!m.getProperty('/tileActionModeActive')){var o=q(j).css('box-shadow'),s=o?o.split(') ')[1]:null,U;if(s){U=s+" "+u;q(this).css('box-shadow',U);}}},function(){q(this).css('box-shadow','');});}};
T.prototype._redrawRGBA=function(a){var R=this.getRgba(),j;if(R){j=q.sap.byId(this.getId());if(!j){return;}if(!this.getModel().getProperty('/animationRendered')){j.css('transition','background-color 2s');j.css('background-color',R);}else{j.css('background-color',R);}this._handleTileShadow(j,a);}};
T.prototype.setLong=function(L){this.setProperty("long",L,true);return this.toggleStyleClass("sapUshellLong",!!L);};
T.prototype.setUuid=function(u){this.setProperty("uuid",u,true);return this;};
return T;});
sap.ui.predefine('sap/ushell/ui/launchpad/TileContainer',['jquery.sap.global','sap/ui/base/ManagedObject','sap/ui/core/Control','sap/ushell/library','sap/ui/core/Icon','sap/m/Text','sap/ushell/override','sap/ushell/resources','sap/ushell/ui/launchpad/PlusTile','sap/ushell/ui/launchpad/TileContainerRenderer'],function(q,M,C,l,I,T,o,r,P){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.TileContainer",{metadata:{library:"sap.ushell",properties:{scrollType:{type:"string",group:"Misc",defaultValue:'item'},animationSpeed:{type:"int",group:"Misc",defaultValue:500},groupId:{type:"string",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:true},showPlaceholder:{type:"boolean",group:"Misc",defaultValue:true},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},isLastGroup:{type:"boolean",group:"Misc",defaultValue:false},headerText:{type:"string",group:"Misc",defaultValue:null},headerLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H2},groupHeaderLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H4},showGroupHeader:{type:"boolean",group:"Misc",defaultValue:true},homePageGroupDisplay:{type:"string",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},sortable:{type:"boolean",group:"Misc",defaultValue:true},showNoData:{type:"boolean",group:"Misc",defaultValue:false},noDataText:{type:"string",group:"Misc",defaultValue:null},isGroupLocked:{type:"boolean",group:"Misc",defaultValue:null},isGroupSelected:{type:"boolean",group:"Misc",defaultValue:false},editMode:{type:"boolean",group:"Misc",defaultValue:false},showBackground:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Misc",defaultValue:'sap-icon://locked'},showIcon:{type:"boolean",group:"Misc",defaultValue:false},deluminate:{type:"boolean",group:"Misc",defaultValue:false},showMobileActions:{type:"boolean",group:"Misc",defaultValue:false},enableHelp:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},showDragIndicator:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},hidden:{type:"boolean",group:"Misc",defaultValue:false},transformationError:{type:"boolean",group:"Misc",defaultValue:false},supportLinkPersonalization:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tiles:{type:"sap.ushell.ui.launchpad.Tile",multiple:true,singularName:"tile"},links:{type:"sap.ui.core.Control",multiple:true,singularName:"link"},beforeContent:{type:"sap.ui.core.Control",multiple:true,singularName:"beforeContent"},afterContent:{type:"sap.ui.core.Control",multiple:true,singularName:"afterContent"},footerContent:{type:"sap.ui.core.Control",multiple:true,singularName:"footerContent"},headerActions:{type:"sap.ui.core.Control",multiple:true,singularName:"headerAction"}},events:{afterRendering:{},add:{},titleChange:{}}}});
a.prototype.init=function(){this.bIsFirstTitleChange=true;this._sDefaultValue=r.i18n.getText("new_group_name");this._sOldTitle="";this.oNoLinksText=new T({text:r.i18n.getText("emptyLinkContainerInEditMode")}).addStyleClass("sapUshellNoLinksAreaPresentTextInner");this.oTransformationErrorText=new T({text:r.i18n.getText("transformationErrorText")}).addStyleClass("sapUshellTransformationErrorText");this.oTransformationErrorIcon=new I({src:"sap-icon://message-error"}).addStyleClass("sapUshellTransformationErrorIcon");this.oIcon=new I({src:this.getIcon()});this.oIcon.addStyleClass('sapUshellContainerIcon');this.oPlusTile=new P({groupId:this.getGroupId(),enableHelp:this.getEnableHelp(),press:[this.fireAdd,this]});this.oPlusTile.setParent(this);if(sap.ushell.Container!=undefined){if(sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported()){a.prototype.isLinkPersonalizationOveride();}}};
a.prototype.exit=function(){if(this.oPlusTile){this.oPlusTile.destroy();}};
a.prototype.onAfterRendering=function(){var t=this;var e=this.getModel()&&this.getModel().getProperty("/enableRenameLockedGroup")||false;q("#"+this.getId()+"-title").find(this.getHeaderLevel()).click(function(){var b=e||!t.getIsGroupLocked()&&!t.getDefaultGroup()&&t.getTileActionModeActive();t.setEditMode(b);});if(sap.ui.Device.system.desktop){this.handleScreenReaderAttr();}var E=sap.ui.getCore().getEventBus();E.publish("launchpad","GroupHeaderVisibility");this.fireAfterRendering();};
a.prototype.getTransformationErrorText=function(){return this.oTransformationErrorText;},a.prototype.getTransformationErrorIcon=function(){return this.oTransformationErrorIcon;},a.prototype.getNoLinksText=function(){return this.oNoLinksText;};
a.prototype.setTransformationError=function(t){this.setProperty('transformationError',t,true);if(t){this.$().find(".sapUshellTransformationError").show();}else{this.$().find(".sapUshellTransformationError").hide();}this.$().find(".sapUshellNoLinksAreaPresent").toggleClass("sapUshellNoLinksAreaPresentError",t);return this;};
a.prototype.updateAggregation=o.updateAggregation;
a.prototype.updateTiles=function(R){var n="tiles";if(this.isTreeBinding(n)){M.prototype.updateAggregation.apply(this,arguments);}else{q.sap.log.debug("Updating TileContainer. Reason: ",R);switch(R){case"filter":try{this.filterTiles();}catch(e){this.updateAggregation(n);}break;default:this.updateAggregation(n);}}};
a.prototype.handleNoItemsToDisplayMessage=function(){var t=this.getBinding('tiles'),i=t&&t.getContexts().length;if(i){this.$().find(".sapUshellNoFilteredItems").hide();}else{if(this.getShowNoData()){if(this.getNoDataText()){this.setNoDataText(this.getNoDataText());}else{this.setNoDataText(r.i18n.getText("noFilteredItems"));}this.$().find(".sapUshellNoFilteredItems").show();}}};
a.prototype.createMissingElementsInOnScreenElements=function(i,e,b,g,s,B,f,A){var p,n=null,G=null,j=b,S=this.getShowGroupHeader(),c=e.length,d;for(j=b;j<c;j++){p=e[j].getPath();if(!i.onScreenPathIndexMap[p]){if(g&&s.length>0){n=s[0].fnGroup(e[j]);if(typeof n==="string"){n={key:n};}if(G===null&&j>0){G=s[0].fnGroup(e[j-1]);}if(n.key!==G){if(B.groupHeaderFactory){d=B.groupHeaderFactory(n);}if(!i.onScreenHeaders[n.key]){A(n,d);i.onScreenHeaders[n.key]={aItemsRefrenceIndex:this.getTiles().length-1,isVisible:S};}G=n.key;}}f(e[j]);i.onScreenPathIndexMap[p]={aItemsRefrenceIndex:this.getTiles().length-1,isVisible:true};}else{throw true;}}};
a.prototype._newLinkContainerEnabled=function(){return this.getSupportLinkPersonalization();};
a.prototype.addNewItem=function(e){var n="tiles",A=this.getMetadata().getJSONKeys()[n],b=this.mBindingInfos[n],f=b.factory,c=q.proxy(function(d){var i=this.getId()+"-"+q.sap.uid(),g=f(i,d);g.setBindingContext(d,b.model);this[A._sMutator](g);},this);c(e);};
a.prototype.markVisibleOnScreenElements=function(e,i){var b=0,p,c=e.length;for(b=0;b<c;b++){p=e[b].getPath();if(i.onScreenPathIndexMap[p]){i.onScreenPathIndexMap[p].isVisible=true;}else{return b;}}return b;};
a.prototype.indexOnScreenElements=function(b){var p,i,c={onScreenHeaders:{},onScreenPathIndexMap:{}},d=b.length,e;for(i=0;i<d;i++){e=b[i];if(e.getHeaderText){c.onScreenHeaders[e.getHeaderText()]={aItemsRefrenceIndex:i,isVisible:false};}else if(e.getBindingContext()){p=e.getBindingContext().getPath();c.onScreenPathIndexMap[p]={aItemsRefrenceIndex:i,isVisible:false};}}return c;};
a.prototype.showHideTilesAndHeaders=function(i,b){var s,n="tiles",S=this.getShowGroupHeader(),B=this.mBindingInfos[n].binding,g,c,e;for(s in i.onScreenPathIndexMap){if(i.onScreenPathIndexMap.hasOwnProperty(s)){e=i.onScreenPathIndexMap[s];c=b[e.aItemsRefrenceIndex];c.setVisible(e.isVisible);if(e.isVisible){g=B.aSorters[0].fnGroup(c.getBindingContext());i.onScreenHeaders[g].isVisible=S;}}}for(s in i.onScreenHeaders){if(i.onScreenHeaders.hasOwnProperty(s)){e=i.onScreenHeaders[s];b[e.aItemsRefrenceIndex].setVisible(e.isVisible);}}};
a.prototype.filterTiles=function(){var n="tiles",b=this.mBindingInfos[n],B=this.mBindingInfos[n].binding,c=B.getContexts(),i=this.getTiles(),d,e,f,g,s,h,j,k;e=this.indexOnScreenElements(i);d=this.markVisibleOnScreenElements(c,e);if(c[d]&&this.getTiles().length>0){f=this.getTiles()[this.getTiles().length-1].getBindingContext().getPath();g=c[d].getPath();s=f.split('/');h=g.split('/');k=s[s.length-1];j=h[h.length-1];if(parseInt(k,10)>parseInt(j,10)){throw true;}}this.createMissingElementsInOnScreenElements(e,c,d,B.isGrouped(),B.aSorters,b,this.addNewItem.bind(this),this.addTileGroup.bind(this));i=this.getTiles();this.showHideTilesAndHeaders(e,i);this.handleNoItemsToDisplayMessage();if(sap.ui.Device.system.desktop){this.handleScreenReaderAttr();}};
a.prototype.addTileGroup=function(g,h){this.addAggregation("tiles",h||new sap.ushell.ui.launchpad.HeaderTile({headerText:g.text||g.key,headerLevel:g.headerLevel||this.getGroupHeaderLevel(),visible:this.getShowGroupHeader()}));};
a.prototype.setNoDataText=function(n){this.setProperty("noDataText",n,true);if(this.getShowNoData()){this.$().find(".sapUshellNoFilteredItems").text(n);}return this;};
a.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);if(this.oPlusTile){this.oPlusTile.setGroupId(v);}return this;};
a.prototype.setHeaderText=function(h){this.setProperty("headerText",h,true);this.$().find(".sapUshellContainerTitle").text(h);return this;};
a.prototype.setVisible=function(v){this.setProperty("visible",v,true);this.toggleStyleClass("sapUshellHidden",!v);return this;};
a.prototype.setShowMobileActions=function(s){var S=true;if(this.oHeaderButton){this.oHeaderButton.setVisible(s);}else if(s){S=false;}this.setProperty('showMobileActions',s,S);};
a.prototype.setShowIcon=function(s){this.setProperty('showIcon',s,true);q('#'+this.getId()).find('.'+'sapUshellContainerIcon').toggleClass('sapUshellContainerIconHidden',!s);};
a.prototype.setDeluminate=function(d){this.setProperty('deluminate',d,true);this.toggleStyleClass('sapUshellDisableLockedGroupDuringDrag',d);return this;};
sap.ushell.ui.launchpad.TileContainer.prototype.setHidden=function(h){this.setProperty("hidden",!!h,true);this.toggleStyleClass("sapUshellTileContainerEditModeHidden",!!h);return this;};
a.prototype.groupHasTiles=function(){var p='',t=this.getTiles(),b=[];if(this.getBindingContext()){p=this.getBindingContext().sPath;t=this.getModel().getProperty(p).tiles;}return sap.ushell.utils.groupHasVisibleTiles(t,b);};
a.prototype.handleScreenReaderAttr=function(){var c=this.getInnerContainersDomRefs();var b=c[0].children;if(!b||b.length==0||!b[0].classList.contains("sapUshellHeaderTile")){return;}var d;var e;var f=[];for(var i=0;i<b.length;i++){if(b[i].classList.contains("sapUshellHidden")){continue;}if(b[i].classList.contains("sapUshellHeaderTile")){d=b[i];q(d).attr("role","heading");q(d).attr("aria-level","3");e=0;f=[];}else if(b[i].tagName=="LI"){e++;q(b[i]).attr("aria-posinset",e);f.push(b[i]);var n=b[i+1];if(!n||n.tagName!="LI"){for(var j=0;j<f.length;j++){q(f[j]).attr("aria-setsize",f.length);}}}}};
a.prototype.getInnerContainerDomRef=function(){var c=this.getDomRef(),i;if(!c){return null;}i=q(c).find('.sapUshellTilesContainer-sortable');return i[0];};
a.prototype.getInnerContainersDomRefs=function(){var c=this.getDomRef(),i,b;if(!c){return null;}i=q(c).find('.sapUshellTilesContainer-sortable');b=q(c).find('.sapUshellLineModeContainer');return[i[0],b[0]];};
a.prototype.setEditMode=function(v){if(v){this.addStyleClass('sapUshellEditing');this._startEdit();}else{this.setProperty('editMode',v,false);this.removeStyleClass('sapUshellEditing');}};
a.prototype.isLinkPersonalizationOveride=function(){a.prototype.updateLinks=function(R){var g=this.getParent(),t=g&&g.getDisplayMode&&g.getDisplayMode()==='tabs';if(t&&!this.getTileActionModeActive()){g.removeLinksFromUnselectedGroups();}if(this.getLinks().length>0){this.removeAllLinks();}M.prototype.updateAggregation.call(this,"links");};a.prototype.destroyLinks=function(R){q.sap.log.debug("link is destroyed because: "+R,null,"sap.ushell.ui.launchpad.TileContainer");};};
a.prototype.setShowEmptyLinksArea=function(v){this.setProperty('showEmptyLinksArea',v,true);this.toggleStyleClass("sapUshellLinksAreaHidden",!v);};
a.prototype.setShowEmptyLinksAreaPlaceHolder=function(v){this.setProperty('showEmptyLinksArea',v,true);this.toggleStyleClass("sapUshellTileContainerEditMode",v);this.toggleStyleClass("sapUshellTileContainerTabsModeEmptyLinksArea",v);this.toggleStyleClass("sapUshellEmptyLinksAreaPlaceHolder",!v);};
a.prototype._startEdit=function(){var t=this;if(this.getModel()&&!this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",true,false);}if(!this.oEditInputField){sap.ui.require(['sap/m/Input'],function(b){t.setProperty('editMode',true,false);t.oEditInputField=new b({placeholder:t._sDefaultValue,value:t.getHeaderText()}).addStyleClass('sapUshellTileContainerTitleInput');t.oEditInputField.addEventDelegate({onAfterRendering:function(){setTimeout(function(){var e=t.oEditInputField.getDomRef();if(e){if(q('#'+e.id+":visible").length>0){setTimeout(function(){q(e).find('input').focus();}.bind(t),100);var w=q(window).height(),j=t.getDomRef(),g=j.offsetHeight,c=j.getBoundingClientRect().top,d=j.offsetTop;if(g+c>w){q('.sapUshellDashboardView section').stop().animate({scrollTop:d},0);}}}}.bind(t),100);}.bind(t),onfocusout:function(e){t._stopEdit();q.proxy(t.setEditMode,t,false)();},onsapenter:function(e){t._stopEdit();q.proxy(t.setEditMode,t,false)();setTimeout(function(){var c=e.srcControl,j=q(c.getDomRef()).prev();j.focus();},0);}});t.oEditInputField.setValue(t.getHeaderText());});}else{this.oEditInputField.setValue(this.getHeaderText());t.setProperty('editMode',true,false);}this._sOldTitle=this._sDefaultValue;if(sap.ui.Device.system.phone){var t=this;setTimeout(function(){var e=sap.ui.getCore().getEventBus();e.publish("launchpad","scrollToGroup",{group:t,groupChanged:false,focus:false});},100);}};
a.prototype._stopEdit=function(){var c=this.getHeaderText();var n=this.oEditInputField.getValue(),h;n=n.substring(0,256).trim()||this._sDefaultValue;h=n!==c;if(this.bIsFirstTitleChange&&n===this.oEditInputField.getPlaceholder()){h=true;}this.bIsFirstTitleChange=false;if(this.getModel()&&this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",false,false);}if(!this._sOldTitle){this._sOldTitle=c;this.setHeaderText(c);}else if(h){this.fireTitleChange({newTitle:n});this.setHeaderText(n);}};
a.prototype.exit=function(){if(this.oHeaderButton){this.oHeaderButton.destroy();}if(this.oActionSheet){this.oActionSheet.destroy();}if(C.prototype.exit){C.prototype.exit.apply(this,arguments);}};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/TileContainerRenderer',['jquery.sap.global','sap/ushell/resources','sap/ushell/utils',"sap/ushell/bootstrap/common/common.load.model"],function(q,r,u,m){"use strict";var T={};T.oModel=m.getModel();
T.render=function(R,c){var t=c.getTiles(),h=c.getHeaderActions(),b=c.getBeforeContent(),a=c.getAfterContent(),f=c.getFooterContent()||[],v=false,d,l=c.getLinks();R.write("<div");R.writeControlData(c);R.addClass("sapUshellTileContainer");R.writeClasses();R.write(">");if(b.length){R.write("<div");R.addClass("sapUshellTileContainerBeforeContent");R.addClass("sapContrastPlus");if(!this.oModel.getProperty('/tileActionModeActive')){R.addClass("sapUshellTileContainerRemoveContent");}R.writeClasses();R.write(">");q.each(b,function(){R.renderControl(this);});R.write("</div>");}R.write("<div");R.addClass("sapUshellTileContainerContent");if(c.getIsGroupLocked()){R.addClass("sapUshellTileContainerLocked");}if(c.getDefaultGroup()){R.addClass("sapUshellTileContainerDefault");}if(c.getShowBackground()){R.addClass("sapUshellTileContainerEditMode");}R.writeClasses();R.writeAttribute("tabindex","-1");R.write(">");if(c.getShowDragIndicator()){R.write("<div");R.addClass("sapUshellCircleBase");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellCircle");R.writeClasses();R.write(">");R.write("</div>");R.write("<div");R.addClass("sapUshellCircle");R.writeClasses();R.write(">");R.write("</div>");R.write("<div");R.addClass("sapUshellCircle");R.writeClasses();R.write(">");R.write("</div>");R.write("<div");R.addClass("sapUshellCircle");R.writeClasses();R.write(">");R.write("</div>");R.write("</div>");}if(c.getShowBackground()){R.write("<div");R.addClass("sapUshellGroupBackgroundContainer sapContrastPlus");R.writeClasses();R.write(">");R.write("</div>");}if(c.getShowHeader()){R.write("<div");R.addClass("sapUshellTileContainerHeader sapContrastPlus");if(!c.getShowGroupHeader()){R.addClass("sapUshellFirstGroupHeaderHidden sapUiPseudoInvisibleText");}R.writeAttribute("id",c.getId()+"-groupheader");R.writeClasses();if(c.getIeHtml5DnD()&&!c.getIsGroupLocked()&&!c.getDefaultGroup()&&c.getTileActionModeActive()){R.writeAttribute("draggable","true");}var A;if(c.getDefaultGroup()){A=r.i18n.getText("ariaLabelEditModeGroupDefault",c.getHeaderText());}else if(c.getIsGroupLocked()){A=r.i18n.getText("ariaLabelEditModeGroupLocked",c.getHeaderText());}else{A=r.i18n.getText("ariaLabelEditModeGroup",c.getHeaderText());}R.writeAccessibilityState(c,{label:A});R.write(">");R.write("<div");R.writeAttribute("id",c.getId()+"-title");R.write(">");R.write("<");R.write(c.getHeaderLevel().toLowerCase());R.addClass('sapUshellContainerTitle');R.writeClasses();R.writeAttributeEscaped("title",c.getHeaderText());R.writeAttribute("id",c.getId()+"-titleText");R.writeAttribute("data-role","group");R.write(">");R.writeEscaped(c.getHeaderText());R.write("</");R.write(c.getHeaderLevel().toLowerCase());R.writeAttribute("id",c.getId()+"-groupheader");R.write(">");if(c.getShowIcon()){c.oIcon.removeStyleClass('sapUshellContainerIconHidden');}else{c.oIcon.addStyleClass('sapUshellContainerIconHidden');}R.renderControl(c.oIcon);R.renderControl(c.oEditInputField);R.write("<div");R.addClass('sapUshellContainerHeaderActions');R.writeClasses();R.write(">");q.each(h,function(){R.renderControl(this);});R.write("</div>");R.write("</div>");R.write("</div>");}R.write("<ul");d=c.data('containerHeight');if(d){R.writeAttribute("style",'height:'+d);}R.addClass('sapUshellTilesContainer-sortable');R.addClass('sapUshellInner');R.writeClasses();R.writeAccessibilityState(c,{role:"listbox"});R.write(">");q.each(t,function(){if(this.getVisible()){v=true;}if(this.getVisible){R.renderControl(this);}});if(c.getShowPlaceholder()){R.renderControl(c.oPlusTile);}if(c.getShowNoData()){this.renderNoData(R,c,!t.length||!v);}R.write("</ul>");var L=c._newLinkContainerEnabled();if(l.length>0||L){if(c.getShowBackground()&&!(c.getIsGroupLocked()&&t.length===0)){R.write("<div");R.addClass('sapUshellTilesContainerSeparator');R.writeClasses();R.write(">");R.write("</div>");}R.write("<div aria-hidden='true'");var e=L?"sapUshellLineModeContainer":"sapUshellLinksContainer";R.addClass(e);if(!l.length&&L){R.addClass("sapUshellNoLinksAreaPresent");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellNoLinksAreaPresentText");R.writeClasses();R.write(">");R.renderControl(c.getNoLinksText());R.write("</div>");}else{R.writeClasses();R.write(">");}if(L){R.write("<div");R.addClass("sapUshellTransformationError");R.writeClasses();if(!c.transformationError){R.writeAttribute("style",'display: none;');}R.write(">");R.write("<div");R.addClass("sapUshellTransformationErrorInnerWrapper");R.writeClasses();R.write(">");R.renderControl(c.getTransformationErrorIcon());R.renderControl(c.getTransformationErrorText());R.write("</div>");R.write("</div>");}if(L){R.write("<div class='sapUshellLinksInnerContainer'>");}l.map(function(g,i,l){if(L){var j=new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true});g.getCustomData().map(function(k){if(k.getKey()=='tabindex'&&k.getValue("0")){j=k;}g.removeCustomData(k);});g.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-posinset",value:(i+1).toString(),writeToDom:true}));g.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-setsize",value:l.length.toString(),writeToDom:true}));g.addCustomData(j);g.addStyleClass("sapUshellLinkTile");if(c.getIsGroupLocked()){g.addStyleClass("sapUshellLockedTile");}}R.renderControl(g);});if(L){R.write("</div>");}R.write("</div>");}if(f.length>0){R.write("<footer");R.addClass('sapUshellTilesContainerFtr');R.writeClasses();R.write(">");q.each(f,function(){R.renderControl(this);});R.write("</footer>");}R.write("</div>");if(a.length){R.write("<div");R.addClass("sapUshellTileContainerAfterContent");R.addClass("sapContrastPlus ");if(!this.oModel.getProperty('/tileActionModeActive')){R.addClass("sapUshellTileContainerRemoveContent");}R.writeClasses();R.write(">");q.each(a,function(){R.renderControl(this);});R.write("</div>");}R.write("</div>");u.setPerformanceMark("FLP -- tile container renderer");};
T.renderNoData=function(R,c,d){R.write("<div id='"+c.getId()+"-listNoData' class='sapUshellNoFilteredItems sapUiStrongBackgroundTextColor'>");if(d){if(c.getNoDataText()){R.writeEscaped(c.getNoDataText());}else{R.writeEscaped(c.getNoDataText(r.i18n.getText("noFilteredItems")));}}else{R.writeEscaped("");}R.write("</div>");};
return T;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/TileContainerUtils',function(){"use strict";var T={};
T.showHideTilesAndHeaders=function(i,o){var s,r,e,n=0,a=0;for(s in i.onScreenPathIndexMap){if(i.onScreenPathIndexMap.hasOwnProperty(s)){e=i.onScreenPathIndexMap[s];r=o[e.aItemsRefrenceIndex];if(r.getVisible()&&!e.isVisible){a++;}r.setVisible(e.isVisible);if(e.isVisible){n++;}}}return{nCountVisibElelemnts:n,nCountFilteredElement:a};};
T.applyFilterOnItem=function(e,f,p,n){var a;for(a in f){if(f.hasOwnProperty(a)){f[a](e);}}if(p){p(e,n);}};
T.createNewItem=function(e,n){var b=this.mBindingInfos[n],f=b.factory,a=jQuery.proxy(function(c){var i=this.getId()+"-"+jQuery.sap.uid(),C=f(i,c);C.setBindingContext(c,b.model);return C;},this);return a(e);};
T.addNewItem=function(c,n){var a=this.getMetadata().getJSONKeys()[n];this[a._sMutator](c);return true;};
T.createMissingElementsInOnScreenElements=function(i,e,a,f,I,b,n){var p,j,c=e.length;for(j=a;j<c;j++){p=e[j].getPath();if(!i.onScreenPathIndexMap[p]){if(f(e[j],n)==false){return false;}T.applyFilterOnItem(e[j],b);}else{throw true;}}return true;};
T.createMissingElementsInOnScreenElementsSearchCatalog=function(i,e,a,f,I,b,n,p){var c,j,d=e.length;for(j=0;j<d;j++){c=e[j].getPath();if(!i.onScreenPathIndexMap[c]){if(f(e[j],n)==false){return false;}}T.applyFilterOnItem(e[j],b,p,n);}return true;};
T.applyFilterOnAllItems=function(b,f,p){var B;var o=b.binding,a;if(!o){return;}a=o.getContexts();for(B=0;B<a.length;B++){T.applyFilterOnItem(a[B],f,p);}};
T.validateOrder=function(b,i,a){var l,f,p,L,F,n,s,c;if(b[a]&&i.length>0){l=i[i.length-1].getBindingContext().getPath();f=b[a].getPath();L=l.split("/");F=f.split("/");for(n=0;n<L.length&&n<F.length;n++){s=L[n];c=F[n];if(!!parseInt(s,10)&&!!parseInt(c,10)){if(parseInt(s,10)>parseInt(c,10)){return false;}else if(parseInt(s,10)<parseInt(c,10)){return true;}}else{for(p=0;p<c.length&&p<s.length;p++){if(s[p].charCodeAt()>c[p].charCodeAt()){return false;}else if(s[p].charCodeAt()<c[p].charCodeAt()){return true;}}}}}return true;};
T.markVisibleOnScreenElements=function(e,i,u){var a=0,p,b=e.length;for(a=0;a<b;a++){p=e[a].getPath();if(i.onScreenPathIndexMap[p]){if(u){i.onScreenPathIndexMap[p].isVisible=true;}}else{return a;}}return a;};
T.markVisibleOnScreenElementsSearchCatalog=function(e,i,u){var a=0,p,b=e.length;for(a=0;a<b;a++){p=e[a].getPath();if(i.onScreenPathIndexMap[p]){if(u){i.onScreenPathIndexMap[p].isVisible=true;}}}return a;};
T.indexOnScreenElements=function(o,i){var p,a,b={onScreenPathIndexMap:{}},c=o.length,d,v=true;if(i===false){v=false;}for(a=0;a<c;a++){d=o[a];if(d.getBindingContext()){p=d.getBindingContext().getPath();if(!b.onScreenPathIndexMap[p]){b.onScreenPathIndexMap[p]={aItemsRefrenceIndex:a,isVisible:v};}}}return b;};
return T;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/TileRenderer',['jquery.sap.global','sap/ushell/Config'],function(q,C){"use strict";var T={};
T.render=function(r,c){var t=null,a,p=c.getPinButton();p=p.length?p[0]:undefined;try{t=c.getTileViews()[0];}catch(e){q.sap.log.warning("Failed to load tile view: ",e.message);t=new sap.m.Text({text:"Failed to load. "});}var o=c.getParent(),b=o&&o.getTiles?o.getTiles():[],v=b.filter(function(f){return f.getVisible();}),i=v.indexOf(c)>-1?v.indexOf(c)+1:"";if(!o){return;}r.write("<li");if(C.last("/core/shell/model/enableHelp")){r.writeAttribute("data-help-id",c.getTileCatalogId());}r.writeControlData(c);r.addClass("sapUshellTile");if(c.getTileActionModeActive()){r.addClass("sapUshellTileWrapper");}if(t&&t.getContent&&sap.suite&&sap.suite.ui&&sap.suite.ui.commons&&sap.suite.ui.commons.FeedTile){a=t.getContent();a.forEach(function(I){if(I instanceof sap.suite.ui.commons.FeedTile){r.addClass("sapUshellFeedTileBG");}});}if(c.getLong()){r.addClass("sapUshellLong");}if(!c.getVisible()){r.addClass("sapUshellHidden");}if(c.getIsLocked()){r.addClass("sapUshellLockedTile");}if(C.last("/core/home/sizeBehavior")==="Small"){r.addClass("sapUshellSmall");}r.writeClasses();r.writeAccessibilityState(c,{role:"option",posinset:i,setsize:v.length});var d=c.getParent().getId()+"-titleText";r.writeAttribute("aria-describedby",d);if(c.getIeHtml5DnD()){r.writeAttribute("draggable","true");}r.writeAttributeEscaped("tabindex","-1");var l=c.data('layoutPosition');if(l){var s='-webkit-transform:'+l.translate3D+';-ms-transform:'+l.translate2D+';transform:'+l.translate3D;r.writeAttribute("style",s);}r.write(">");if(!c.getTileActionModeActive()){r.write("<div");r.addClass("sapUshellTileWrapper");r.writeClasses();r.write(">");}this.renderTileActionMode(r,c);r.addClass("sapUshellTileInner");if(c.getProperty('tileActionModeActive')){r.addClass("sapUshellTileActionBG");}if(this.renderTileView){this.renderTileView(r,t,p,c.getTarget(),c.getIsCustomTile());}if(c.getShowActionsIcon()&&!c.getTileActionModeActive()){r.renderControl(c.actionIcon);}if(!c.getTileActionModeActive()){r.write("</div>");if(this.renderTileActionsContainer){this.renderTileActionsContainer(r,t,p,c.getTarget(),c.getIsCustomTile());}}r.write("</li>");};
T.renderTileActionsContainer=function(r,t,p,s,i){if(p){p.addStyleClass("sapUshellActionButton");r.write("<div");r.addClass("sapUshellTilePinButtonOverlay");r.writeClasses();if(t.getHeader){r.writeAccessibilityState(t,{role:"toolbar",label:t.getHeader()});}r.write(">");r.renderControl(p);r.write("</div>");}};
T.renderTileView=function(r,t,p,s,i){var u="";if(i){r.write("<div");r.writeClasses();r.write(">");r.renderControl(t);r.write("</div>");}else{r.write("<a");r.writeClasses();if(s){if(s.charAt(0)==="#"){if(window.location.search&&window.location.search.length>0){u=window.location.origin+window.location.pathname+window.location.search+"&appState=lean"+s;}else{u=window.location.origin+window.location.pathname+"?appState=lean"+s;}}else{u=s;}r.writeAttributeEscaped("target","_blank");r.writeAttributeEscaped("href",u);}r.write(">");r.renderControl(t);r.write("</a>");}};
T.renderTileActionMode=function(r,c){if(!c.getTileActionModeActive()){return;}r.write("<div");r.addClass("sapUshellTileActionLayerDiv");r.writeClasses();r.write(">");if(c.getTileActionModeActive()&&!c.getIsLocked()){r.write("<div");r.addClass("sapUshellTileDeleteClickArea");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellTileDeleteIconOuterClass");r.writeClasses();r.write(">");r.renderControl(c._initDeleteAction());r.write("</div>");r.write("</div>");}r.write("<div class='sapUshellTileActionDivCenter'></div>");r.write("<div");r.addClass("sapUshellTileActionIconDivBottom");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellTileActionIconDivBottomInnerDiv");r.writeClasses();r.write(">");r.renderControl(c.getActionSheetIcon());r.write("</div>");r.write("</div>");r.write("</div>");};
return T;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/TileState',['sap/ui/core/Control','sap/ushell/library','sap/ui/core/Icon','sap/ushell/resources','./TileStateRenderer'],function(C,l,I,r){"use strict";
var T=C.extend("sap.ushell.ui.launchpad.TileState",{metadata:{library:"sap.ushell",properties:{state:{type:"string",group:"Misc",defaultValue:'Loaded'}}}});
T.prototype.init=function(){this._rb=r.i18n;this._sFailedToLoad=this._rb.getText("cannotLoadTile");this._oWarningIcon=new I(this.getId()+"-warn-icon",{src:"sap-icon://notification",size:"1.37rem"});this._oWarningIcon.addStyleClass("sapSuiteGTFtrFldIcnMrk");};
T.prototype.exit=function(){this._oWarningIcon.destroy();};
T.prototype.setState=function(s,i){this.setProperty("state",s,i);return this;};
return T;});
sap.ui.predefine('sap/ushell/ui/launchpad/TileStateRenderer',['sap/ui/core/HTML'],function(H){"use strict";var T={};
T.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellGT");r.writeClasses();r.write(">");var s=c.getState();r.write("<div");r.addClass("sapUshellOverlay");r.writeClasses();r.writeAttribute("id",c.getId()+"-overlay");if(s==="Failed"){r.writeAttribute("title",c._sFailedToLoad);}r.write(">");switch(s){case"Loading":var b=new H({content:"<div class='sapUshellTileStateLoading'><div>"});b.setBusyIndicatorDelay(0);b.setBusy(true);r.renderControl(b);break;case"Failed":r.write("<div");r.writeAttribute("id",c.getId()+"-failed-ftr");r.addClass("sapUshellTileStateFtrFld");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-failed-icon");r.addClass("sapUshellTileStateFtrFldIcn");r.writeClasses();r.write(">");r.renderControl(c._oWarningIcon);r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-failed-text");r.addClass("sapUshellTileStateFtrFldTxt");r.writeClasses();r.write(">");r.writeEscaped(c._sFailedToLoad);r.write("</div>");r.write("</div>");break;default:}r.write("</div>");r.write("</div>");};
return T;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/UserStatusItem',['sap/ushell/library','sap/ushell/resources','sap/ushell/ui/launchpad/AccessibilityCustomData'],function(M,r,A){"use strict";var t=r.i18n,U;U=sap.m.ListItemBase.extend("sap.ushell.ui.launchpad.UserStatusItem",{metadata:{properties:{status:{type:"object",group:"Appearance"},visible:{type:"boolean",group:"Appearance",defaultValue:true},isOpener:{type:"boolean",group:"Appearance",defaultValue:true},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},enabled:{type:"boolean",group:"Appearance",defaultValue:true},image:{type:"object",group:"Appearance",defaultValue:null}},aggregations:{contentList:{type:"sap.ui.core.Control",multiple:false}},events:{press:{}}},renderer:{renderLIContent:function(a,c){var b=c.getStatus()||U.prototype.STATUS_ENUM.AVAILABLE;a.write("<div");if(!c.getVisible()){a.addClass("sapUshellShellHidden");}if(!c.getIsOpener()){c.addCustomData(new A({key:"tabindex",value:"0",writeToDom:true}));}a.addClass("sapUserStatusContent");a.writeClasses();a.write(">");a.write("<div ");a.addClass(b.styleClass);a.writeClasses();a.write(">");a.write("</div>");a.write("<div");if(b.status==="signOut"){a.addClass("sapUserStatusSignOutText");}a.addClass("sapUserStatusText");a.writeClasses();a.write(">");a.writeEscaped(b.text);a.write("</div>");if(c.getIsOpener()){a.write("<div class='sapUshellUserStatusExp sapUshellUserStatusDropDownArrow'></div>");}a.write("</div>");}}});
U.prototype.onclick=function(e){this.firePress();e.preventDefault();};
U.prototype.onsapspace=U.prototype.onclick;U.prototype.STATUS_ENUM={AVAILABLE:{text:t.getText("userStatus_available"),id:0,styleClass:"sapUshellUserStatusAvailableIndicator",status:"AVAILABLE"},AWAY:{text:t.getText("userStatus_away"),id:1,styleClass:"sapUshellUserStatusAwayIndicator",status:"AWAY"},BUSY:{text:t.getText("userStatus_busy"),id:2,styleClass:"sapUshellUserStatusBusyIndicator",status:"BUSY"},APPEAR_OFFLINE:{text:t.getText("userStatus_appearOffline"),id:3,styleClass:"sapUshellUserStatusAppearOfflineIndicator",status:"APPEAR_OFFLINE"},SIGNOUT:{text:t.getText("userStatus_signOut"),id:4,styleClass:"sapUshellUserSignOutExp sapUserStatusText",status:"SIGNOUT"}};
U.prototype.setEnabled=function(e){this.setProperty('enabled',e,true);this.toggleStyleClass('sapUshellUserStatusDisable',!e);return this;};
U.prototype.setVisible=function(v){this.setProperty('visible',v,true);if(v){this.$().removeClass('sapUshellShellHidden');}else{this.$().addClass('sapUshellShellHidden');}this.invalidate();return this;};
U.prototype.setStatus=function(s){this.setProperty('status',s,true);this.invalidate();return this;};
U.prototype.setImage=function(i){};
U.prototype.setAriaLabel=function(a){this.setProperty('ariaLabel',a);return this;};
U.prototype.setIsOpener=function(i){this.setProperty('isOpener',i);return this;};
return U;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/ViewPortContainer',['jquery.sap.global','sap/ui/Device','sap/ui/core/Control','sap/ushell/library','sap/ushell/resources','sap/ushell/utils','sap/ushell/Config','sap/ushell/renderers/fiori2/AccessKeysHandler','./ViewPortContainerRenderer'],function(q,D,C,l,r,u,a,A){"use strict";
var V=C.extend("sap.ushell.ui.launchpad.ViewPortContainer",{metadata:{library:"sap.ushell",properties:{height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'},visible:{type:"boolean",group:"Appearance",defaultValue:true},defaultState:{type:"sap.ushell.ui.launchpad.ViewPortState",group:"Appearance",defaultValue:sap.ushell.ui.launchpad.ViewPortState.Center}},aggregations:{leftViewPort:{type:"sap.ui.core.Control",multiple:true,singularName:"leftViewPort"},centerViewPort:{type:"sap.ui.core.Control",multiple:true,singularName:"centerViewPort"},rightViewPort:{type:"sap.ui.core.Control",multiple:true,singularName:"rightViewPort"}},associations:{initialCenterViewPort:{type:"sap.ui.core.Control",multiple:false},initialRightViewPort:{type:"sap.ui.core.Control",multiple:false},initialLeftViewPort:{type:"sap.ui.core.Control",multiple:false}},events:{navigate:{},afterSwitchState:{parameters:{from:{type:"sap.ui.core.Control"},to:{type:"sap.ui.core.Control"}}},afterSwitchStateAnimationFinished:{parameters:{from:{type:"sap.ui.core.Control"},to:{type:"sap.ui.core.Control"}}},afterNavigate:{parameters:{from:{type:"sap.ui.core.Control"},to:{type:"sap.ui.core.Control"}}}}}});
V.prototype.init=function(){this.bShiftCenterTransition=true;this.bShiftCenterTransitionEnabled=false;this.sCurrentState="Center";var c=sap.ui.getCore().getConfiguration();this.bIsRTL=!q.isEmptyObject(c)&&c.getRTL?c.getRTL():false;this.sLastCenterViewPortFocussedItemId=null;this.fnLastAppKeyHandler=null;this._oViewPortsNavigationHistory={leftViewPort:{visitedControls:[],indexOfCurrentlyDisplayedControl:null},centerViewPort:{visitedControls:[],indexOfCurrentlyDisplayedControl:null},rightViewPort:{visitedControls:[],indexOfCurrentlyDisplayedControl:null}};this._states={Left:{translateX:'',visibleViewPortsData:[{viewPortId:'leftViewPort',className:"leftClass",isActive:true}]},Center:{translateX:'',visibleViewPortsData:[{viewPortId:'centerViewPort',className:"centerClass",isActive:true}]},Right:{translateX:'',visibleViewPortsData:[{viewPortId:'rightViewPort',className:"rightClass",isActive:true}]},LeftCenter:{translateX:'',visibleViewPortsData:[{viewPortId:'leftViewPort',className:"front",isActive:true},{viewPortId:'centerViewPort',className:"backLeft",isActive:false}]},CenterLeft:{translateX:'',visibleViewPortsData:[{viewPortId:'centerViewPort',className:"frontLeft",isActive:true},{viewPortId:'leftViewPort',className:"back",isActive:false}]},RightCenter:{translateX:'',visibleViewPortsData:[{viewPortId:'rightViewPort',className:"front",isActive:true},{viewPortId:'centerViewPort',className:"backRight",isActive:false}]},CenterRight:{translateX:'',visibleViewPortsData:[{viewPortId:'centerViewPort',className:"frontRight",isActive:true},{viewPortId:'rightViewPort',className:"back",isActive:false}]}};D.media.attachHandler(this._handleSizeChange.bind(this),null,D.media.RANGESETS.SAP_STANDARD);D.orientation.attachHandler(this._handleSizeChange,this);q(window).bind("resize",function(){this._handleSizeChange();}.bind(this));};
V.prototype.removeCenterViewPort=function(c,s){this.removeAggregation('centerViewPort',c,s);this._popFromViewPortNavigationHistory('centerViewPort',c);};
V.prototype.setApplicationFullWidth=function(f){var j=q("#"+this._sCurrentControlId);j.toggleClass("sapUShellApplicationContainerLimitedWidth",!f);};
V.prototype._popFromViewPortNavigationHistory=function(v,c){var n=this._oViewPortsNavigationHistory[v],b=n?n.visitedControls:[],i=b.lastIndexOf(c);if(b.length>0){n.visitedControls=b.slice(i+1,n.visitedControls.length);n.indexOfCurrentlyDisplayedControl=n.visitedControls.length-1;}};
V.prototype.addCenterViewPort=function(c){q.sap.measure.start("FLP:ViewPortContainer.addCenterViewPort","addCenterViewPort","FLP");u.setPerformanceMark("FLP -- ViewPortContainer.addCenterViewPort");var i=this._isInCenterViewPort(c);if(!i){c.toggleStyleClass("hidden",true);c.addStyleClass("sapUshellViewPortItemSlideFrom");this.addAggregation('centerViewPort',c,true);}if(this.domRef&&!i){this.getRenderer().renderViewPortPart(c,this.domRef,'centerViewPort');}q.sap.measure.end("FLP:ViewPortContainer.addCenterViewPort");};
V.prototype.addLeftViewPort=function(c,i){q.sap.flpmeasure.end(0,"MeArea,(services + rendering)");c.toggleStyleClass("hidden",i===undefined?true:i);if(this.domRef){this.getRenderer().renderViewPortPart(c,this.domRef,'leftViewPort');}this.addAggregation('leftViewPort',c,true);};
V.prototype.addRightViewPort=function(c,i){c.toggleStyleClass("hidden",i===undefined?true:i);if(this.domRef){this.getRenderer().renderViewPortPart(c,this.domRef,'rightViewPort');}this.addAggregation('rightViewPort',c,true);};
V.prototype.setInitialCenterViewPort=function(c){var s=this._getCurrentlyDispalyedControl('centerViewPort'),i=this._isInCenterViewPort(c);c.addStyleClass("sapUshellViewPortItemSlideFrom");if(this.domRef&&!i){this.getRenderer().renderViewPortPart(c,this.domRef,'centerViewPort');}this._setCurrentlyDisplayedControl('centerViewPort',c);if(!i){this.addAggregation('centerViewPort',c,true);}this.setAssociation('initialCenterViewPort',c,true);if(s&&s!==c.getId()){this.fireAfterNavigate({fromId:s,from:sap.ui.getCore().byId(s),to:sap.ui.getCore().byId(c),toId:c.getId()});}};
V.prototype._isInViewPort=function(v,c){var b=this.getAggregation(v),i=b?b.indexOf(c)>-1:false;return i;};
V.prototype._isInCenterViewPort=function(c){return this._isInViewPort('centerViewPort',c);};
V.prototype.getCurrentCenterPage=function(){return this._getCurrentlyDispalyedControl('centerViewPort');};
V.prototype.navTo=function(v,c,t,d,T){q.sap.measure.start("FLP:ShellController.navTo","navTo","FLP");var b=this,R=sap.ushell.Container.getRenderer("fiori2"),s=this._getCurrentlyDispalyedControl(v),h=R.byId("Shell-home-component-container"),H=h&&h.getId(),n=s&&(H===s),N=H===c,e=this.getAggregation(v),f=e.some(function(g,i){if(g.getId()===c){return true;}});if(n){this._saveFocus(document.activeElement);}if(!f){q.sap.log.error("ViewPort Container Error: Couldn't find target control");}else if(!s||s!==c){var o=sap.ui.getCore().byId(c);o.toggleStyleClass("hidden",false);var O=function(){if(N&&this.sLastCenterViewPortFocussedItemId){b._restoreFocus(this.sLastCenterViewPortFocussedItemId);}this.fireAfterNavigate({toId:c,to:c?sap.ui.getCore().byId(c):null,fromId:s,from:s?sap.ui.getCore().byId(s):null});}.bind(this);this._setCurrentlyDisplayedControl(v,o,t,O);}q.sap.measure.end("FLP:ShellController.navTo");};
V.prototype._restoreFocus=function(c){A.registerAppKeysHandler(this.fnLastAppKeyHandler);var o=sap.ui.getCore().byId(c);if(o){o.focus();}};
V.prototype._saveFocus=function(o){if(o){var $=q(o);var b=$.control(0);if(b){this.sLastCenterViewPortFocussedItemId=b.getId();this.fnLastAppKeyHandler=A.getAppKeysHandler();return;}}this.sLastCenterViewPortFocussedItemId=null;};
V.prototype._getCurrentlyDispalyedControl=function(v){var n=this._oViewPortsNavigationHistory[v];return n.visitedControls[n.indexOfCurrentlyDisplayedControl];};
V.prototype._setCurrentlyDisplayedControl=function(v,c,t,o){q.sap.measure.start("FLP:ViewPortContainer._setCurrentlyDisplayedControl","_setCurrentlyDisplayedControl","FLP");var n=this._oViewPortsNavigationHistory[v],b=n.visitedControls,s=this._getCurrentlyDispalyedControl(v),d=s?sap.ui.getCore().byId(s):null,T=(v==='centerViewPort'&&t)?t:'show';b.push(c.getId());n.indexOfCurrentlyDisplayedControl=q.isNumeric(n.indexOfCurrentlyDisplayedControl)?n.indexOfCurrentlyDisplayedControl+1:0;this._handleViewPortTransition(v,T,c,d,o);this._sCurrentControlId=c.getId();q.sap.measure.end("FLP:ViewPortContainer._setCurrentlyDisplayedControl");};
V.prototype._handleViewPortTransition=function(v,t,T,c,o){if(v!=='centerViewPort'){return;}T.toggleStyleClass("hidden",false);if(c){c.toggleStyleClass("hidden");}if(o){o();}};
V.prototype.switchState=function(s){var f=function(){var b,t=[],c=[],d,e=this;for(d=0;d<e._states[e.sCurrentState].visibleViewPortsData.length;d++){c.push(e._states[e.sCurrentState].visibleViewPortsData[d].viewPortId);}for(d=0;d<e._states[s].visibleViewPortsData.length;d++){t.push(e._states[s].visibleViewPortsData[d].viewPortId);}var i=0,g;for(g=0;g<c.length;g++){b=e.getAggregation(c[g]);if(b){for(i=0;i<b.length;i++){if(b[i].onViewStateHide){b[i].onViewStateHide();}}}}for(g=0;g<t.length;g++){b=e.getAggregation(t[g]);if(b){for(i=0;i<b.length;i++){if(b[i].onViewStateShow){b[i].onViewStateShow();}}}}}.bind(this);q.sap.measure.start("FLP:switchState","start animiation flow","FLP1");switch(s){case"LeftCenter":this.meAreaShow(s);break;case"Center":this.centerAreaShow(s,f);break;case"RightCenter":this.notificationAreaShow(s);break;default:}if(!this.fnSwitchLeftToCenter){this.fnSwitchLeftToCenter=function(e){var c;if(this.bIsRTL){c=e.pageX<parseInt(window.getComputedStyle(e.currentTarget).paddingLeft,10);}else{c=e.pageX>parseInt(window.getComputedStyle(e.currentTarget).width,10);}if(c){this.switchState('Center');}}.bind(this);}var j=q(this.domRef).find('.sapUshellViewPortLeft');if(s!=='Center')j.on('click',this.fnSwitchLeftToCenter);else j.off('click',this.fnSwitchLeftToCenter);this._handleSizeChange();};
V.prototype.notificationAreaShow=function(s){this._areaShow(s,this._animateNotificationAreaShow.bind(this),this._animateMinimalNotificationAreaShow.bind(this),true);};
V.prototype._notificationAreaClose=function(s){this._areaShow(s,this._animateNotificationAreaClose.bind(this),this._animateMinimalNotificationAreaClose.bind(this),false);};
V.prototype.meAreaShow=function(s){this._areaShow(s,this._animateMeAreaShow.bind(this),this._animateMinimalMeAreaShow.bind(this),true);};
V.prototype._meAreaClose=function(s){this._areaShow(s,this._animateMeAreaClose.bind(this),this._animateMinimalMeAreaClose.bind(this),false);};
V.prototype.centerAreaShow=function(s,f){if(this.sCurrentState==="LeftCenter"){this._meAreaClose(s);}else if(this.sCurrentState==="RightCenter"){this._notificationAreaClose(s);}else{this._fireTransitionEnd(s);if(f){f();}}};
q.sap.measure.end("FLP:switchState");
V.prototype._animateNotificationAreaShow=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);this.switchKeyframeAnimationDuration("0ms",[v.centerViewPort,v.rightViewPort]);v.centerViewPort.removeEventListener("animationend",t);v.centerViewPort.addEventListener('click',this.switchState.bind(this,"Center"));this._reapplyFocusOnNotificationButton();if(v.leftViewPort.classList.contains("sapUshellMeAreaShow")){v.leftViewPort.classList.remove("sapUshellMeAreaShow");v.leftViewPort.classList.remove("sapUshellMeAreaClose");v.leftViewPort.classList.add("sapUshellShellHidden");}}.bind(this);this.toggleMeAreaScrollBar(false);this.switchKeyframeAnimationDuration("480ms",[v.centerViewPort,v.rightViewPort,v.leftViewPort]);v.centerViewPort.classList.add("sapUshellDisableScroll");this.setEnableResizeHandler(false);v.centerViewPort.addEventListener("animationend",t,false);v.rightViewPort.classList.remove("sapUshellShellHidden");setTimeout(function(){if(v.leftViewPort.classList.contains("sapUshellMeAreaShow")){v.leftViewPort.classList.add("sapUshellMeAreaClose");v.centerViewPort.classList.add("sapUshellCenterLeft");v.centerViewPort.classList.remove("sapUshellCenterRight");v.rightViewPort.classList.remove("sapUshellNotificationAreaClose");}else{v.centerViewPort.classList.add("sapUshellSmallLeft");}v.rightViewPort.classList.add("sapUshellNotificationAreaShow");},0);};
V.prototype._removeAllAnimationClasses=function(){var v=this._getViewPorts(),c=["sapUshellDisableScroll","sapUshellMeAreaShow","sapUshellMeAreaClose","sapUshellSmallRight","sapUshellSmallRightToLargeCenter","sapUshellNotificationAreaClose","sapUshellNotificationAreaShow","sapUshellCenterRight","sapUshellCenterLeft","sapUshellSmallLeft","sapUshellSmallLeftToLargeCenter"];for(var k in v){if(v.hasOwnProperty(k)){c.forEach(function(b){v[k].classList.remove(b);});}}};
V.prototype._reapplyFocusOnNotificationButton=function(){setTimeout(function(){if(q(".sapUiBody")[0]===document.activeElement){q("#NotificationsCountButton").focus();}},50);};
V.prototype._animateNotificationAreaClose=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd();this.setEnableResizeHandler(true);this._removeAllAnimationClasses();v.rightViewPort.classList.add("sapUshellShellHidden");v.centerViewPort.removeEventListener("animationend",t);v.centerViewPort.removeEventListener('click',this.switchState.bind(this,"Center"));this._reapplyFocusOnNotificationButton();}.bind(this);this.switchKeyframeAnimationDuration("480ms",[v.centerViewPort,v.rightViewPort]);this.setEnableResizeHandler(false);v.centerViewPort.addEventListener("animationend",t,false);setTimeout(function(){v.centerViewPort.classList.remove("sapUshellCenterLeft");v.centerViewPort.classList.remove("sapUshellCenterRight");v.rightViewPort.classList.add("sapUshellNotificationAreaClose");v.centerViewPort.classList.add("sapUshellSmallLeftToLargeCenter");},0);};
V.prototype._leftViewPortOnClickHandler=function(e){var E=document.elementsFromPoint(e.x,e.y);E.every(function(b){if(b.classList.contains("sapUshellViewPortCenter")){this.switchState("Center");return false;}return true;}.bind(this));};
V.prototype._animateMeAreaShow=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);this.toggleMeAreaScrollBar(true);this.switchKeyframeAnimationDuration("0ms",[v.centerViewPort,v.leftViewPort]);v.centerViewPort.classList.add("sapUshellDisableScroll");v.centerViewPort.removeEventListener("animationend",t);v.centerViewPort.addEventListener('click',this.switchState.bind(this,"Center"));if(v.rightViewPort.classList.contains("sapUshellNotificationAreaShow")){v.rightViewPort.classList.remove("sapUshellNotificationAreaShow");v.rightViewPort.classList.remove("sapUshellNotificationAreaClose");v.rightViewPort.classList.add("sapUshellShellHidden");}}.bind(this);this.switchKeyframeAnimationDuration("480ms",[v.centerViewPort,v.rightViewPort,v.rightViewPort]);this.setEnableResizeHandler(false);var m=sap.ui.getCore().byId("meArea");if(m){m.onViewStateShow();}v.centerViewPort.addEventListener("animationend",t,false);v.leftViewPort.classList.remove("sapUshellShellHidden");setTimeout(function(){if(v.rightViewPort.classList.contains("sapUshellNotificationAreaShow")){v.rightViewPort.classList.add("sapUshellNotificationAreaClose");v.centerViewPort.classList.add("sapUshellCenterRight");v.centerViewPort.classList.remove("sapUshellCenterLeft");v.leftViewPort.classList.remove("sapUshellMeAreaClose");}else{v.centerViewPort.classList.add("sapUshellSmallRight");}v.leftViewPort.classList.add("sapUshellMeAreaShow");},0);};
V.prototype._animateMeAreaClose=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd();this.setEnableResizeHandler(true);this._removeAllAnimationClasses();v.centerViewPort.removeEventListener('click',this.switchState.bind(this,"Center"));v.leftViewPort.classList.add("sapUshellShellHidden");v.centerViewPort.removeEventListener("animationend",t);}.bind(this);this.switchKeyframeAnimationDuration("480ms",[v.centerViewPort,v.leftViewPort]);this.toggleMeAreaScrollBar(false);this.setEnableResizeHandler(false);v.centerViewPort.addEventListener("animationend",t,false);setTimeout(function(){v.centerViewPort.classList.remove("sapUshellCenterLeft");v.centerViewPort.classList.remove("sapUshellCenterRight");v.leftViewPort.classList.add("sapUshellMeAreaClose");v.centerViewPort.classList.add("sapUshellSmallRightToLargeCenter");},0);};
V.prototype.toggleMeAreaScrollBar=function(s){document.getElementById('leftViewPort').classList.toggle("sapUshellMeAreaScrollable",s);};
V.prototype.switchKeyframeAnimationDuration=function(d,b){b.forEach(function(i){i.style.animationDuration=d;});};
V.prototype.setEnableResizeHandler=function(e){};
V.prototype._animateMinimalNotificationAreaShow=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);this.toggleMeAreaScrollBar(true);v.viewPortContainer.removeEventListener("transitionend",t);this._reapplyFocusOnNotificationButton();}.bind(this);this.setEnableResizeHandler(false);v.viewPortContainer.addEventListener("transitionend",t,false);v.rightViewPort.classList.remove("sapUshellShellHidden");setTimeout(function(){v.viewPortContainer.classList.add("sapUshellMinimalNotificationAreaShow");v.viewPortContainer.classList.remove("sapUshellMinimalMeAreaShow");},0);};
V.prototype._animateMinimalNotificationAreaClose=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);v.rightViewPort.classList.add("sapUshellShellHidden");v.viewPortContainer.removeEventListener("transitionend",t);v.viewPortContainer.classList.remove("sapUshellMinimalNotificationAreaClose");this._reapplyFocusOnNotificationButton();}.bind(this);this.toggleMeAreaScrollBar(false);this.setEnableResizeHandler(false);v.viewPortContainer.addEventListener("transitionend",t,false);setTimeout(function(){v.viewPortContainer.classList.add("sapUshellMinimalNotificationAreaClose");v.viewPortContainer.classList.remove("sapUshellMinimalNotificationAreaShow");},0);};
V.prototype._animateMinimalMeAreaShow=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);this.toggleMeAreaScrollBar(true);v.viewPortContainer.removeEventListener("transitionend",t);}.bind(this);this.setEnableResizeHandler(false);var m=sap.ui.getCore().byId("meArea");if(m){m.onViewStateShow();}v.viewPortContainer.addEventListener("transitionend",t,false);v.leftViewPort.classList.remove("sapUshellShellHidden");setTimeout(function(){v.viewPortContainer.classList.add("sapUshellMinimalMeAreaShow");v.viewPortContainer.classList.remove("sapUshellMinimalNotificationAreaShow");},0);};
V.prototype._animateMinimalMeAreaClose=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);v.leftViewPort.classList.add("sapUshellShellHidden");v.viewPortContainer.classList.remove("sapUshellMinimalMeAreaClose");v.viewPortContainer.removeEventListener("transitionend",t);}.bind(this);this.toggleMeAreaScrollBar(false);this.setEnableResizeHandler(false);v.viewPortContainer.addEventListener("transitionend",t,false);setTimeout(function(){v.viewPortContainer.classList.add("sapUshellMinimalMeAreaClose");v.viewPortContainer.classList.remove("sapUshellMinimalMeAreaShow");},0);};
V.prototype._areaShow=function(s,f,m,S){this.setCurrentState(s);if(this._getAnimationMode()==='full'){f(s);}else{m(S);}};
V.prototype._handleSizeChange=function(){var b=this.getCurrentState(),v=this._states[b].visibleViewPortsData;if(v[0].viewPortId==="leftViewPort"){if(this.bIsRTL){var p=window.innerWidth-q("#leftViewPort").width();q("#leftViewPort").css("padding-left",p);q("#viewPortCursorPointerArea").css("width",p);q("#viewPortCursorPointerArea").css("left","0");}else{var c=window.innerWidth-q("#leftViewPort").width();q("#leftViewPort").css("padding-right",c);q("#viewPortCursorPointerArea").css("width",c);q("#viewPortCursorPointerArea").css("right","0");}}};
V.prototype._getAnimationMode=function(){var m=this.getModel(),s;if(m){s=m.getProperty('/animationMode');}return s||'full';};
V.prototype._fireTransitionEnd=function(s){if(!s){s=this.sCurrentState;}this.fireAfterSwitchStateAnimationFinished({to:s,from:this.sCurrentState});};
V.prototype._getViewPorts=function(){var e=document.getElementById('viewPortContainer');if(e){return{viewPortContainer:e,leftViewPort:document.getElementById('leftViewPort'),centerViewPort:document.getElementById('centerViewPort-wrapper'),rightViewPort:document.getElementById('rightViewPort')};}};
V.prototype.setCurrentState=function(s){var f=this.sCurrentState;this.sCurrentState=s;this.fireAfterSwitchState({to:s,from:f});};
V.prototype.getCurrentState=function(){return this.sCurrentState;};
V.prototype.getViewPortControl=function(v,d){var b=this.getAggregation(v),i;if(b){for(i=0;i<b.length;i++){if(b[i]&&(b[i].getId()===d)){return b[i];}}}return null;};
V.prototype.getViewPort=function(p){var P=this.getCenterViewPort(),i;for(i=0;i<P.length;i++){if(P[i]&&(P[i].getId()===p)){return P[i];}}return null;};
V.prototype.shiftCenterTransitionEnabled=function(e){this.bShiftCenterTransitionEnabled=e;};
V.prototype.shiftCenterTransition=function(s){this.bShiftCenterTransition=s;};
V.prototype.onAfterRendering=function(){this.domRef=this.getDomRef();this._handleSizeChange();};
V.transitions=V.transitions||{};return V;});
sap.ui.predefine('sap/ushell/ui/launchpad/ViewPortContainerRenderer',['jquery.sap.global'],function(q){"use strict";var V={};
V.renderViewPortPart=function(c,a,v){q.sap.measure.start("FLP:ViewPortContainerRenderer.renderViewPortPart","renderViewPortPart","FLP");var j=q(a).find("#"+v);var r=sap.ui.getCore().createRenderManager();r.render(c,j[0]);r.destroy();q.sap.measure.end("FLP:ViewPortContainerRenderer.renderViewPortPart");};
V._renderViewPort=function(r,v,i,a){r.write("<div");a.forEach(function(c){r.addClass(c);});r.writeClasses();r.writeAttribute("id",i);r.write(">");v.forEach(function(o){r.renderControl(o);});if(i==='leftViewPort'){this._renderViewPortCursorPointerArea(r);}r.write("</div>");};
V._renderCenterViewPort=function(r,v,i,a){r.write("<div");r.addClass('sapUshellViewPortWrapper');r.writeClasses();r.writeAttribute("id",i+'-wrapper');r.write(">");V._renderViewPort(r,v,i,a);r.write("</div>");};
V._renderViewPortCursorPointerArea=function(r){r.write("<div id='viewPortCursorPointerArea'");r.addClass('sapUshellViewPortCursorPointerArea');r.writeClasses();r.write(">");r.write("</div>");};
V.render=function(r,c){if(!c.getVisible()){return;}r.write("<div");r.writeControlData(c);if(c.getWidth()){r.addStyle("width",c.getWidth());}c.getHeight();if(c.getHeight()){r.addStyle("height",c.getHeight());}if(this.renderAttributes){this.renderAttributes(r,c);}var s=c._states,S=s[c.sCurrentState],v=S.visibleViewPortsData,l=["sapUshellViewPortLeft"],C=["sapUshellViewPortCenter"],R=["sapUshellViewPortRight"];if(c.getCurrentState()==="Center"){l.push("sapUshellShellHidden");R.push("sapUshellShellHidden");}var o=sap.ui.getCore().getConfiguration();this.bIsRTL=!q.isEmptyObject(o)&&o.getRTL?o.getRTL():false;r.writeStyles();r.write(">");v.forEach(function(e){switch(e.viewPortId){case'leftViewPort':l.push(e.className);break;case'centerViewPort':C.push(e.className);break;case'rightViewPort':R.push(e.className);break;}});V._renderViewPort(r,c.getLeftViewPort(),'leftViewPort',l);V._renderCenterViewPort(r,c.getCenterViewPort(),'centerViewPort',C);V._renderViewPort(r,c.getRightViewPort(),'rightViewPort',R);r.write("</div>");};
return V;},true);
sap.ui.predefine('sap/ushell/ui/shell/FloatingContainer',['jquery.sap.global','sap/ushell/library','sap/ui/Device','sap/ushell/EventHub'],function(q,l,D,E){"use strict";
var F=sap.ui.core.Control.extend("sap.ushell.ui.shell.FloatingContainer",{
metadata:{properties:{},aggregations:{content:{type:"sap.ui.core.Control",multiple:true}}},
renderer:{render:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellFloatingContainer");r.writeClasses();r.write(">");if(c.getContent()&&c.getContent().length){r.renderControl(c.getContent()[0]);}r.write("</div>");}}
});
F.prototype.init=function(){D.resize.attachHandler(F.prototype._handleResize,this);};
F.prototype._getWindowHeight=function(){return q(window).height();};
F.prototype._setContainerHeight=function(c,f){c.css("max-height",f);};
F.prototype._handleResize=function(e){q.sap.measure.start("FLP:FloatingContainer_handleResize","resizing floating container","FLP");if(q(".sapUshellFloatingContainer").parent()[0]&&(q('.sapUshellContainerDocked').size()==0)){this.oWrapper=q(".sapUshellFloatingContainer").parent()[0];this.oWrapper.setAttribute("style",this.oStorage.get("floatingContainerStyle"));var i=window.matchMedia?window.matchMedia("(max-width: 417px)").matches:false;this.adjustPosition(e,i);}else if(q(".sapUshellFloatingContainer").parent()[0]&&q('.sapUshellContainerDocked').size()){if(q('#canvas').hasClass('sapUshellContainer-Narrow-Right')){var u;if(sap.ui.getCore().getConfiguration().getRTL()){q("#sapUshellFloatingContainerWrapper").css("left",(416/q(window).width()*100)+"%");u=416/q(window).width()*100+"%;";}else{q("#sapUshellFloatingContainerWrapper").css("left",100-416/q(window).width()*100+"%");u=100-416/q(window).width()*100+"%;";}this.oWrapper.setAttribute("style","left:"+u+this.oWrapper.getAttribute("style").substring(this.oWrapper.getAttribute("style").indexOf("top")));this.oStorage.put("floatingContainerStyle",this.oWrapper.getAttribute("style"));}}if(q('.sapUshellContainerDocked').length>0){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerDockedIsResize");E.emit("ShellFloatingContainerDockedIsResized",Date.now());}var d=D.media.getCurrentRange(sap.ui.Device.media.RANGESETS.SAP_STANDARD);if(d.name!="Desktop"&&(q('.sapUiMedia-Std-Desktop').width()-416<d.from)&&(q('.sapUshellContainerDocked').size())){q('#canvas, .sapUshellShellHead').removeClass('sapUshellContainerDocked');q('#shell-header').removeClass('sapUshellContainerDockedLaunchpad');if(q('#canvas').hasClass('sapUshellContainer-Narrow-Right')){q('#canvas').removeClass('sapUshellContainer-Narrow-Right sapUshellMoveCanvasRight sapUshellContainerDockedLaunchpad openRight');}else{q('#canvas').removeClass('sapUshellContainer-Narrow-Left sapUshellMoveCanvasLeft sapUshellContainerDockedLaunchpad openLeft');}q(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().byId("mainShell").getController()._handleAnimations(false);var s=q.sap.storage(q.sap.storage.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");if(s){s.put("lastState","floating");}sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDockedOnResize");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDocked sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");var v=sap.ui.getCore().byId("viewPortContainer");if(v){v._handleSizeChange();}}q.sap.measure.end("FLP:FloatingContainer_handleResize");};
F.prototype.adjustPosition=function(e,i){var w=e?e.width:q(window).width(),W=e?e.height:q(window).height(),c=this.oContainer.width(),C=this.oContainer.height(),b,a,L,t,d=sap.ui.getCore().getConfiguration().getRTL();i=i!==undefined?i:false;if(this.oWrapper){L=this.oWrapper.style.left.replace("%","");L=w*L/100;t=this.oWrapper.style.top.replace("%","");t=W*t/100;if(!isNaN(L)&&!isNaN(t)&&!i){if(d){b=(L<c)||(L>w);if(b){L=L<c?c:w;}}else{b=(L<0)||(w<(L+c));if(b){L=L<0?0:(w-c);}}a=(t<0)||(W<(t+C));if(a){t=t<0?0:(W-C);}if(!b&&!a){this.oWrapper.setAttribute("style","left:"+L*100/w+"%;top:"+t*100/W+"%;position:absolute;");return;}this.oWrapper.setAttribute("style","left:"+L*100/w+"%;top:"+t*100/W+"%;position:absolute;");}}};
F.prototype.handleDrop=function(){if(this.oWrapper){this.adjustPosition();this.oStorage.put("floatingContainerStyle",this.oWrapper.getAttribute("style"));}};
F.prototype.setContent=function(c){if(this.getDomRef()){var r=sap.ui.getCore().createRenderManager();r.renderControl(c);r.flush(this.getDomRef());r.destroy();}this.setAggregation("content",c,true);};
F.prototype.onAfterRendering=function(){this.oStorage=this.oStorage||q.sap.storage(q.sap.storage.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");this.oContainer=q(".sapUshellFloatingContainer");this.oWrapper=q(".sapUshellFloatingContainer").parent()[0];};
F.prototype.exit=function(){D.resize.detachHandler(F.prototype._resizeHandler,this);};
return F;},true);
sap.ui.predefine('sap/ushell/ui/shell/NavigationMiniTile',['sap/ushell/library'],function(){"use strict";
var N=sap.ui.core.Control.extend("sap.ushell.ui.shell.NavigationMiniTile",{
metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},intent:{type:"string",group:"Misc",defaultValue:null}},aggregations:{},events:{press:{}}},
renderer:{render:function(r,c){var t=c.getTitle();var s=c.getSubtitle();var i=c.getIcon();var I=sap.ui.core.IconPool.createControlByURI(i);r.write('<div tabindex="-1" class="sapUshellNavMiniTile" ');r.writeControlData(c);r.writeAttributeEscaped("role","option");r.writeAttributeEscaped("aria-label",s?t+" "+s:t);r.write('>');r.write('<div>');r.write('<span class="sapUshellNavMiniTileTitle" >');if(t){r.writeEscaped(t);}r.write('</span>');r.write('</div>');if(I){r.write('<div>');r.write('<span class="sapUshellNavMiniTileIcon">');r.renderControl(I);r.write("</span>");r.write('</div>');}else{r.write('<div>');r.write('<span class="sapUshellNavMiniTileSubtitle" >');if(s){r.writeEscaped(s);}r.write("</span>");r.write('</div>');}r.write('</div>');}}
});
N.prototype.ontap=function(e){this.firePress({});};
N.prototype.onsapenter=function(e){this.firePress({});};
N.prototype.onsapspace=function(e){this.firePress({});};
return N;},true);
sap.ui.predefine('sap/ushell/ui/shell/RightFloatingContainer',['jquery.sap.global','sap/ushell/library'],function(q,l,R){"use strict";
var a=sap.ui.core.Control.extend("sap.ushell.ui.shell.RightFloatingContainer",{
metadata:{properties:{size:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'56px'},top:{type:"string",group:"Appearance",defaultValue:'0'},right:{type:"string",group:"Appearance",defaultValue:'0'},textVisible:{type:"boolean",group:"Appearance",defaultValue:true},insertItemsWithAnimation:{type:"boolean",group:"Appearance",defaultValue:true},hideItemsAfterPresentation:{type:"boolean",group:"Appearance",defaultValue:false},enableBounceAnimations:{type:"boolean",group:"Appearance",defaultValue:false},actAsPreviewContainer:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{floatingContainerItems:{type:"sap.ui.core.Control",multiple:true}},events:{afterRendering:{}}},
renderer:{render:function(r,o){var i=sap.ui.getCore().getConfiguration().getRTL();r.write("<div");r.writeControlData(o);r.addClass("sapUshellRightFloatingContainer");r.writeClasses();r.addStyle('top',o.getTop()+'rem');r.addStyle(i?'left':'right',o.getRight());r.writeStyles();r.writeAttribute("data-role","alert");r.write(">");r.write("<ul");r.addClass("sapUshellNotificationListContainer");r.writeClasses();r.writeAttribute("role","list");r.write(">");this.renderFloatingContainerItems(r,o);r.write("</ul>");r.write("</div>");},renderFloatingContainerItems:function(r,o){var I=o.getInsertItemsWithAnimation(),A=o.getActAsPreviewContainer(),b=o.getFloatingContainerItems(),i;for(i=0;i<b.length;i++){if(A&&!I){b[i].addStyleClass('sapUshellNonAnimatedNotificationListItem');}else if(b[i].hasStyleClass('sapUshellNonAnimatedNotificationListItem')){b[i].addStyleClass('sapUshellNotificationsListItem');b[i].addStyleClass('sapUshellRightFloatingContainerItemBackToViewport');b[i].addStyleClass('sapUshellRightFloatingContainerItemHidden');b[i].addStyleClass('sapUshellRightFloatingContainerItmHeightVisible');b[i].removeStyleClass('sapUshellNonAnimatedNotificationListItem');}r.renderControl(b[i]);}}}
});
a.prototype.init=function(){var t;q(window).bind("resize",function(){clearTimeout(t);t=setTimeout(this._handleResize.bind(this),100);}.bind(this));this.iRequiredItemsNumber=5;};
a.prototype.onBeforeRendering=function(){};
a.prototype._setSize=function(){};
a.prototype._handleResize=function(){if(this.getDomRef()&&this.getFloatingContainerItems().length){var n=this.iRequiredItemsNumber,b=window.innerHeight,d=this.getDomRef(),c=d.getBoundingClientRect().top,e=q(".sapUiSizeCompact").length>0?56:64,j=q(d).find('li').first(),f,I;if(!j.length){return;}f=j[0].clientHeight;var g=q("#sapUshellDashboardFooter").outerHeight();this.iRequiredItemsNumber=Math.min(parseInt((b-c-e-g)/f,10),5);if(n!==this.iRequiredItemsNumber){I=this.getFloatingContainerItems();for(var i=0;i<I.length;i++){if(i<this.iRequiredItemsNumber||isNaN(this.iRequiredItemsNumber)){I[i].removeStyleClass('sapUshellShellHidden');}else{I[i].addStyleClass('sapUshellShellHidden');}}}}};
a.prototype.onAfterRendering=function(){this.fireAfterRendering();setTimeout(function(){this._handleResize();}.bind(this),500);this.addStyleClass('sapContrastPlus');this.addStyleClass('sapContrast');this.addStyleClass('sapUshellNotificationsListItem');};
a.prototype.setVisible=function(v){this.setProperty('visible',v,true);if(v){q(this.getDomRef()).css('visibility','visible');}else{q(this.getDomRef()).css('visibility','hidden');}};
a.prototype.setFloatingContainerItemsVisiblity=function(v){var b=this.getFloatingContainerItems(),t=v?300:0,I=this.getInsertItemsWithAnimation(),_=function(c){if(v){b[c].removeStyleClass("sapUshellRightFloatingContainerItemBounceOut").addStyleClass("sapUshellRightFloatingContainerItemBounceIn");}else{b[c].removeStyleClass("sapUshellRightFloatingContainerItemBounceIn").addStyleClass("sapUshellRightFloatingContainerItemBounceOut");}};for(var i=0;i<b.length;i++){(function(c){return function(){if(I){setTimeout(function(){_(c);},t+c*100);}else{b[c].setVisible(v);}};})(i)();}};
a.prototype._animationBouncer=function _animationBouncer(n){var _=function(){if(!_animationBouncer._animationQueue.length){_animationBouncer._itemTimeoutId=undefined;return;}var i=_animationBouncer._animationQueue.shift();i.addStyleClass("sapUshellRightFloatingContainerItmHeightVisible").addStyleClass('sapUshellRightFloatingContainerItemBounceIn');_animationBouncer._itemTimeoutId=setTimeout(_,100);}.bind(this);if(!_animationBouncer._animationQueue){_animationBouncer._animationQueue=[];}_animationBouncer._animationQueue.push(n);if(_animationBouncer._mainTimeoutId||_animationBouncer._itemTimeoutId){return;}_animationBouncer._mainTimeoutId=setTimeout(function(){_animationBouncer._mainTimeoutId=undefined;_();}.bind(this),500);};
a.prototype.addFloatingContainerItem=function(n){this.addAggregation('floatingContainerItems',n);n.addStyleClass('sapContrastPlus');if(this.getInsertItemsWithAnimation()){n.addStyleClass("sapUshellNotificationsListItem");n.addStyleClass("sapUshellRightFloatingContainerItemHidden");if(this.getEnableBounceAnimations()){a.prototype._animationBouncer(n);}else{setTimeout(function(){var i=this.getFloatingContainerItems();if(i.length>5){var b=i[i.length-1];b.addStyleClass("sapUshellRightFloatingContainerHideLastItem");}n.addStyleClass('sapUshellRightFloatingContainerItemBackToViewport').addStyleClass("sapUshellRightFloatingContainerItmHeightVisible");}.bind(this),500);}}else if(this.getActAsPreviewContainer()){n.addStyleClass('sapUshellNonAnimatedNotificationListItem');}if(this.getHideItemsAfterPresentation()){setTimeout(function(){n.removeStyleClass("sapUshellRightFloatingContainerItemBackToViewport");},3200);}};
return a;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellAppTitle',['jquery.sap.global','sap/m/Button','sap/ui/core/IconPool','sap/ushell/library','./ShellNavigationMenu','sap/ushell/services/AllMyApps'],function(q,B,I){"use strict";var s={SHELL_NAV_MENU_ONLY:0,ALL_MY_APPS_ONLY:1,SHELL_NAV_MENU:2,ALL_MY_APPS:3},S;S=B.extend("sap.ushell.ui.shell.ShellAppTitle",{metadata:{properties:{text:{type:"string",group:"Misc",defaultValue:null},tooltip:{type:"string",group:"Misc",defaultValue:null}},associations:{navigationMenu:{type:"sap.ushell.ui.shell.ShellNavigationMenu"},allMyApps:{type:"sap.ui.core.mvc.ViewType.JS"}},events:{press:{},textChanged:{}}},renderer:{render:function(r,c){var n=c.getNavigationMenu(),t=c.getText(),v=false,N,o,m=c.getModel();if(n){N=sap.ui.getCore().byId(n);}v=c._getControlVisibilityAndState(N,c);c.bIconVisible=v;r.write('<div ');r.writeControlData(c);r.addClass("sapUshellShellAppTitleContainer sapUshellAppTitle");if(v){r.write('tabindex="0" ');r.addClass("sapUshellAppTitleClickable");r.writeAttributeEscaped("role","button");r.writeAttributeEscaped("aria-haspopup","true");r.writeAttributeEscaped("aria-expanded","false");o=m.getProperty("/ShellAppTitleState");if(o===s.ALL_MY_APPS_ONLY){r.writeAttributeEscaped("aria-label",sap.ushell.resources.i18n.getText("ShowAllMyApps_AriaLabel",[t]));}else{r.writeAttributeEscaped("aria-label",sap.ushell.resources.i18n.getText("ShellNavigationMenu_AriaLabel",[t]));}}else{r.writeAttributeEscaped("aria-label",t);r.writeAttributeEscaped("aria-haspopup","false");}r.writeClasses();r.write(">");if(v){r.write("<div ");r.addClass("sapUshellShellHeadAction");r.writeClasses();r.write("><span class='sapUshellShellHeadActionImg sapUshellShellAppTitleHeadActionImg'>");r.renderControl(c.oIcon);r.write("</span>");r.write("</div>");}r.write('<h1 class="sapUshellHeadTitle">');if(t){r.writeEscaped(t);}r.write("</h1>");r.write("</div>");}}});
S.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.oIcon=I.createControlByURI(I.getIconURI("slim-arrow-down"));this.oIcon.addStyleClass("sapUshellAppTitleMenuIcon");if(sap.ui.Device.system.desktop){this.addEventDelegate({onkeydown:function(e){if(e.altKey&&e.keyCode===40){e.preventDefault();this.onclick();}}.bind(this)});}this._bTextChanged=false;};
S.prototype.onclick=function(e){var t=this;this.oNavMenu=sap.ui.getCore().byId(t.getNavigationMenu());this.oAllMyApps=sap.ui.getCore().byId(t.getAllMyApps());if(!this.bIconVisible){return;}if(this.getModel().getProperty("/ShellAppTitleState")===s.ALL_MY_APPS_ONLY){q.sap.measure.start("FLP:ShellAppTitle.onClick","Click ShellAppTitle in HOME state, Launching AllMyApps","FLP");if(!this.oAllMyApps){return;}if(!this._getAllMyAppsPopover()){this.oAllMyAppsPopover=this._createAllMyAppsPopover();}if(this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close();}else{this.oAllMyAppsPopover.openBy(this);}}else{this.bAppTitleClick=false;if(!this._getNavMenuPopover()){this.oNavMenuPopover=this._createNavMenuPopover(this.getModel());}this.getModel().setProperty("/ShellAppTitleState",s.SHELL_NAV_MENU);if(!sap.ui.Device.system.desktop){if(this._getNavMenuPopover().isOpen()){this._getNavMenuPopover().close();}else{this._getNavMenuPopover().openBy(this);this.firePress();}}else{if(!this.bAppTitleClick){this._getNavMenuPopover().openBy(this);this.firePress();}else{this.bAppTitleClick=false;}}}this._handlePopoverStateChange();};
S.prototype._getControlVisibilityAndState=function(n,c){q.sap.measure.start("FLP:ShellAppTitle.getControlVisibilityAndState","Check AllMyApps and NavShellMenu visibility","FLP");var v=false,m=c.getModel(),o=m?m.getProperty("/currentState"):'',a=sap.ushell.Container.getService("AllMyApps").isEnabled(),N=this._isNavMenuEnabled(n);if(!m){return false;}if(o.stateName==="app"||o.stateName==="home"){v=a||N;if(a&&N){m.setProperty("/ShellAppTitleState",s.SHELL_NAV_MENU);}else if(!a&&N){m.setProperty("/ShellAppTitleState",s.SHELL_NAV_MENU_ONLY);}else if(a&&!N){m.setProperty("/ShellAppTitleState",s.ALL_MY_APPS_ONLY);}}else{v=N;m.setProperty("/ShellAppTitleState",s.SHELL_NAV_MENU_ONLY);}q.sap.measure.end("FLP:ShellAppTitle.getControlVisibilityAndState");return v;};
S.prototype._getAllMyAppsPopover=function(){return this.oAllMyAppsPopover;};
S.prototype._getNavMenuPopover=function(){return this.oNavMenuPopover;};
S.prototype._createAllMyAppsPopover=function(){var a=new sap.m.ResponsivePopover({id:"sapUshellAllMyAppsPopover",placement:sap.m.PlacementType.Bottom,title:"",showArrow:true,customHeader:this._getPopoverHeader(this.getModel()),showHeader:{path:'/ShellAppTitleState',formatter:function(c){return c!==s.SHELL_NAV_MENU;}},content:[this.oAllMyApps]});a.setModel(this.getModel());a.addStyleClass('sapUshellAppTitleAllMyAppsPopover');a.attachAfterOpen(function(){this.oAllMyApps._afterOpen();if(this.oToggleListButton.getVisible()){this.oToggleListButton.firePress();this.oToggleListButton.setPressed(true);}}.bind(this));return a;};
S.prototype._createNavMenuPopover=function(){var n=new sap.m.Popover({id:"sapUshellAppTitlePopover",placement:sap.m.PlacementType.Bottom,title:"",showArrow:true,showHeader:{path:'/ShellAppTitleState',formatter:function(c){return c!==s.SHELL_NAV_MENU;}},content:sap.ui.getCore().byId(this.getNavigationMenu())}),N=this.getModel().bindProperty('/ShellAppTitleState');if(sap.ushell.Container.getService("AllMyApps").isEnabled()){n.setFooter(this._getPopoverFooterContent(this.getModel()));}n.addStyleClass('sapUshellAppTitleNavigationMenuPopover');n.setModel(this.getModel());this.getModel().setProperty('/allMyAppsMasterLevel',0);N.attachChange(this._handlePopoverStateChange.bind(this));n.attachBeforeOpen(function(){this.oNavMenu._beforeOpen();}.bind(this));n.attachAfterOpen(function(){this.oNavMenu.$().on("touchmove.scrollFix",function(e){e.stopPropagation();});this.oNavMenu._afterOpen();this._adjustAccProperties(true);}.bind(this));n.attachBeforeClose(function(e){if(document.activeElement.id===this.getId()){this.bAppTitleClick=true;}e.preventDefault();e.cancelBubble();}.bind(this));n.attachAfterClose(function(e){this._adjustAccProperties(false);}.bind(this));return n;};
S.prototype._getPopoverHeader=function(m){if(!this.oPopoverHeader){this.oBackButton=this._createPopoverBackButton();this.oBackButton.addStyleClass("sapUshellCatalogNewGroupBackButton");this.oToggleListButton=this._createPopoverToggleButton();this.oToggleListButton.addStyleClass("sapUshellAllMyAppsToggleListButton");var a=new sap.m.Label({text:sap.ushell.resources.i18n.getText("allMyApps_headerTitle")});this.addCustomData(a,"role","heading");this.addCustomData(a,"aria-level","2");this.oPopoverHeader=new sap.m.Bar("sapUshellShellAppPopoverHeader",{contentLeft:[this.oBackButton,this.oToggleListButton],contentMiddle:[a]});}return this.oPopoverHeader;};
S.prototype._createPopoverBackButton=function(){var b;b=new B("sapUshellAppTitleBackButton",{icon:I.getIconURI("nav-back"),press:[this._popoverBackButtonPressHandler,this],tooltip:sap.ushell.resources.i18n.getText("backBtn_tooltip")});return b;};
S.prototype._popoverBackButtonPressHandler=function(){var a=this.getAllMyAppsController().getCurrentState(),m=this.getModel();if((a===this.getAllMyAppsController().getStateEnum().FIRST_LEVEL)||(a===this.getAllMyAppsController().getStateEnum().FIRST_LEVEL_SPREAD)){if(m.getProperty("/ShellAppTitleState")!==s.ALL_MY_APPS_ONLY){m.setProperty("/ShellAppTitleState",s.SHELL_NAV_MENU);this._getAllMyAppsPopover().close();this._getNavMenuPopover().openBy(this);}}else if(a===this.getAllMyAppsController().getStateEnum().SECOND_LEVEL){this.getAllMyAppsController().switchToInitialState();}else if((sap.ui.Device.system.phone)&&(a===this.getAllMyAppsController().getStateEnum().DETAILS)){this.getAllMyAppsController().handleSwitchToMasterAreaOnPhone();}};
S.prototype._createPopoverToggleButton=function(m){var t=this,T;T=new sap.m.ToggleButton("sapUshellAllMyAppsToggleListButton",{icon:I.getIconURI("sap-icon://menu2"),press:function(e){t.oAllMyApps.getController().toggleMasterArea();this.setTooltip(e.getParameter("pressed")?sap.ushell.resources.i18n.getText("ToggleButtonHide"):sap.ushell.resources.i18n.getText("ToggleButtonShow"));},tooltip:sap.ushell.resources.i18n.getText("ToggleButtonShow"),visible:{path:'/isPhoneWidth',formatter:function(i){return i&&!sap.ui.Device.system.phone;}}});return T;};
S.prototype._getPopoverFooterContent=function(m){var t=this,b,a;if(!this.oPopoverFooterContent){a=new B('allMyAppsButton',{text:sap.ushell.resources.i18n.getText("allMyApps_launchingButtonTitle"),press:function(){m.setProperty("/ShellAppTitleState",s.ALL_MY_APPS);q.sap.measure.start("FLP:ShellNavMenu.footerClick","Click the footer of ShellNavMenu, Launching AllMyApps","FLP");if(!t._getAllMyAppsPopover()){t.oAllMyAppsPopover=t._createAllMyAppsPopover();}t.oNavMenuPopover.close();t.oAllMyAppsPopover.openBy(t);t.oBackButton.focus();},visible:{path:'/ShellAppTitleState',formatter:function(c){return c===s.SHELL_NAV_MENU;}}});this.oPopoverFooterContent=new sap.m.Bar('shellpopoverFooter',{visible:{parts:["/ShellAppTitleState","/currentState/stateName"],formatter:function(c,d){b=(d==="home"||d==="app");return(c===s.SHELL_NAV_MENU)&&b;}},contentMiddle:[a]});this.addCustomData(a,"role","button");this.addCustomData(a,"aria-label",sap.ushell.resources.i18n.getText("allMyApps_launchingButtonTitle"));}return this.oPopoverFooterContent;};
S.prototype._isNavMenuEnabled=function(n){return n?n.getItems()&&n.getItems().length>0:false;};
S.prototype._handlePopoverStateChange=function(d){var m=this.getModel(),c=m.getProperty('/ShellAppTitleState');};
S.prototype.setText=function(t){this.setProperty("text",t,false);this._bTextChanged=true;};
S.prototype.onAfterRendering=function(){if(this._bTextChanged){this.fireTextChanged();if(this.getProperty("text")!=="Home"&&this.getProperty("text")!==""&&this.getProperty("text")!==undefined){q.sap.measure.end("FLP:OpenApplicationonClick");}}this._bTextChanged=false;var o=sap.ui.getCore().byId("shell-header");if(o){o._setMaxWidthForTitle();}};
S.prototype._adjustAccProperties=function(i){var j=q(this.getDomRef()),i=!!i;j.attr("aria-expanded",i);};
S.prototype.addCustomData=function(i,k,v){i.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:k,value:v,writeToDom:true}));};
S.prototype.close=function(){if(this.oNavMenuPopover&&this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close();}};
S.prototype.setTooltip=function(t){this.oIcon.setTooltip(t);};
S.prototype.getAllMyAppsController=function(){return this.oAllMyApps.getController();};
S.prototype.getStateEnum=function(){return s;};
S.prototype.onsapspace=S.prototype.onclick;S.prototype.onsapenter=S.prototype.onclick;
S.prototype.exit=function(){var n=sap.ui.getCore().byId(this.getNavigationMenu()),a=sap.ui.getCore().byId(this.getAllMyApps());if(n){n.destroy();}if(a){a.destroy();}if(this.oAllMyAppsPopover){this.oAllMyAppsPopover.destroy();}if(this.oNavMenuPopover){this.oNavMenuPopover.destroy();}};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellFloatingActionRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var S=R.extend(B);return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellFloatingActions',['jquery.sap.global','./ShellFloatingAction','sap/ushell/library'],function(q,S){"use strict";
var a=sap.ui.core.Control.extend("sap.ushell.ui.shell.ShellFloatingActions",{
metadata:{properties:{isFooterVisible:{type:"boolean",defaultValue:false}},aggregations:{floatingActions:{type:"sap.ushell.ui.shell.ShellFloatingAction",multiple:true,singularName:"floatingAction"}}},
renderer:{render:function(r,A){var f=A.getFloatingActions();r.write("<div");r.writeControlData(A);r.addClass("sapUshellShellFloatingActions");r.writeClasses();r.write(">");if(f.length){var F;if(f.length===1){F=f[0];}else{F=A._createMultipleFloatingActionsButton(f);q.each(f,function(){this.setVisible(false);r.renderControl(this);});}r.renderControl(F);}r.write("</div>");}}
});
a.prototype._createMultipleFloatingActionsButton=function(f){var F;var t=this;return new S({id:this.getId()+"-multipleFloatingActions",icon:'sap-icon://add',visible:true,press:function(){if(!this.hasStyleClass('sapUshellShellFloatingActionRotate')){this.addStyleClass('sapUshellShellFloatingActionRotate');if(!F){F=parseInt(this.$().outerHeight(),10)+parseInt(t.$().css('bottom'),10);}f.forEach(function(o){o.setVisible(true);});setTimeout(function(){f.forEach(function(o,i){var b=F*(i+1);o.$().css('transform',"translateY(-"+b+"px)");o.data("transformY","-"+b+"px");});},0);}else{this.removeStyleClass('sapUshellShellFloatingActionRotate');f.forEach(function(o){o.$().css('transform',"translateY(0)");});setTimeout(function(){f.forEach(function(o){o.setVisible(false);o.data("transformY",undefined);});},150);}},tooltip:sap.ushell.resources.i18n.getText("XXX")});};
a.prototype.addFloatingAction=function(A){this.addAggregation('floatingActions',A,true);if(this.getDomRef()){var r=sap.ui.getCore().createRenderManager();r.renderControl(A);r.flush(this.getDomRef());r.destroy();}return this;};
a.prototype.removeFloatingAction=function(A){if(typeof A==='number'){A=this.getAggregation('floatingActions')[A];}this.removeAggregation('floatingActions',A,true);var i=A.getId();q('#'+i).remove();return this;};
return a;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellHeadItem',['jquery.sap.global','sap/ui/core/Control','sap/ui/core/IconPool','sap/ushell/library'],function(q,C,I){"use strict";
var S=C.extend("sap.ushell.ui.shell.ShellHeadItem",{
metadata:{properties:{startsSection:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},showSeparator:{type:"boolean",group:"Appearance",defaultValue:true},enabled:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Appearance",defaultValue:false},showMarker:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},target:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},text:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},floatingNumber:{type:"int",group:"Appearance",defaultValue:null},floatingNumberMaxValue:{type:"int",group:"Appearance",defaultValue:999},accessKey:{type:"string",group:"Accessibility",defaultValue:""}},events:{press:{}}},
renderer:{render:function(r,i){var a=i.getAccessKey();if((i.getTarget()||"")!==""){r.write("<a tabindex='0' href='");r.writeEscaped(i.getTarget());r.write("'");}else{r.write("<a tabindex='0'");}if(a){r.writeAttributeEscaped("accesskey",a);}r.writeAccessibilityState(i,{role:'button'});r.writeControlData(i);r.addClass("sapUshellShellHeadItm");var R=i._shouldRenderText();if(R){r.addClass("sapUshellShellHeadItmText");}if(i._headerHideSeperators){r.addClass("sapUshellHeaderHideSeparators");}if(!i.getEnabled()){r.addClass("sapUshellShellHeadItmDisabled");}if(i.getFloatingNumber&&i.getFloatingNumber()>0&&i.getVisible()){var f=i.getDisplayFloatingNumber();r.addClass("sapUshellShellHeadItmCounter");r.writeAttribute("data-counter-content",f);}if(i.getStartsSection()){r.addClass("sapUshellShellHeadItmDelim");}if(i.getShowSeparator()){r.addClass("sapUshellShellHeadItmSep");}if(!i.getVisible()){r.addClass("sapUshellShellHidden");}if(i.getAriaLabel()){r.writeAccessibilityState({label:i.getAriaLabel(),role:"button"});}if(i.getSelected()){r.addClass("sapUshellShellHeadItmSel");}if(i.getShowMarker()){r.addClass("sapUshellShellHeadItmMark");}r.writeClasses();var t=i.getTooltip_AsString();if(t){r.writeAttributeEscaped("title",t);}r.write("><span></span><div class='sapUshellShellHeadItmMarker'><div></div></div>");if(R){r.write("<b class='sapUshellShellHeadItmCenterText'>");r.writeEscaped(i.getText());r.write("</b>");}r.write("</a>");}}
});
S.prototype._shouldRenderText=function(){if(this.getText()&&this.getParent()){return!(this.getParent()instanceof sap.ushell.ui.shell.ShellHeader);}return false;};
S.prototype.onAfterRendering=function(){this._refreshIcon();};
S.prototype.onclick=function(e){if(this.getEnabled()){this.firePress();if(!this.getTarget()){e.preventDefault();}}};
S.prototype.onsapspace=function(){var d=this.getDomRef();if(d){d.click();}};
S.prototype.onsapenter=function(){this.onsapspace();};
S.prototype.setStartsSection=function(s){s=!!s;this.setProperty("startsSection",s,true);this.$().toggleClass("sapUshellShellHeadItmDelim",s);return this;};
S.prototype.setShowSeparator=function(s){s=!!s;this.setProperty("showSeparator",s,true);this.$().toggleClass("sapUshellShellHeadItmSep",s);return this;};
S.prototype.setSelected=function(s){s=!!s;this.setProperty("selected",s,true);this.$().toggleClass("sapUshellShellHeadItmSel",s);return this;};
S.prototype.setEnabled=function(e){e=!!e;this.setProperty("enabled",e,true);this.$().toggleClass("sapUshellShellHeadItmDisabled",!e);return this;};
S.prototype.setAriaLabel=function(a){this.setProperty('ariaLabel',a);return this;};
S.prototype.setVisible=function(v){if(sap.ui.Device.system.phone){this.setProperty("visible",!!v,false);}else{this.setProperty("visible",!!v,true);}if(v){this.$().removeClass('sapUshellShellHidden');}else{this.$().addClass('sapUshellShellHidden');}return this;};
S.prototype.setShowMarker=function(m){m=!!m;this.setProperty("showMarker",m,true);this.$().toggleClass("sapUshellShellHeadItmMark",m);return this;};
S.prototype.setIcon=function(i){this.setProperty("icon",i,true);if(this.getDomRef()){this._refreshIcon();}return this;};
S.prototype._refreshIcon=function(){var i=q(this.$().children()[0]);var s=this.getIcon();if(I.isIconURI(s)){var o=I.getIconInfo(s);i.html("").css("style","");q(this.$().children()[0]).removeClass('userImgSpan');if(o){i.text(o.content).css("font-family","'"+o.fontFamily+"'");}}else{var $=this.$("img-inner");if($.length===0||$.attr("src")!==s){q(this.$().children()[0]).addClass('userImgSpan');i.css("style","").html("<img id='"+this.getId()+"-img-inner' src='"+q.sap.encodeHTML(s)+"'></img>");}}};
S.prototype.getDisplayFloatingNumber=function(){var n=this.getFloatingNumber(),m=this.getFloatingNumberMaxValue();var d=n+"";if(n>m){d=m+"+";}return d;};
q.sap.declare('sap.ui.unified.ShellHeadItem');sap.ui.unified.ShellHeadItem=S;return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellHeadUserItem',['jquery.sap.global','sap/ui/core/Element','sap/ui/core/IconPool','sap/ushell/library'],function(q,E,I){"use strict";
var S=E.extend("sap.ushell.ui.shell.ShellHeadUserItem",{metadata:{properties:{username:{type:"string",group:"Appearance",defaultValue:''},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},image:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}},events:{press:{}}}});
I.getIconInfo("","");
S.prototype.onclick=function(e){this.firePress();e.preventDefault();};
S.prototype.onsapspace=S.prototype.onclick;
S.prototype.setImage=function(i){this.setProperty("image",i,true);if(this.getDomRef()){this._refreshImage();}return this;};
S.prototype.setAriaLabel=function(a){this.setProperty('ariaLabel',a);return this;};
S.prototype._refreshImage=function(){var i=this.$("img");var s=this.getImage();if(!s){i.html("").css("style","").css("display","none");}else if(I.isIconURI(s)){var o=I.getIconInfo(s);i.html("").css("style","");if(o){i.text(o.content).css("font-family","'"+o.fontFamily+"'");}}else{var $=this.$("img-inner");if($.length===0||$.attr("src")!==s){i.css("style","").html("<img id='"+this.getId()+"-img-inner' src='"+q.sap.encodeHTML(s)+"'></img>");}}};
S.prototype._checkAndAdaptWidth=function(s){if(!this.getDomRef()){return false;}var r=this.$(),n=this.$("name");var b=r.width();r.toggleClass("sapUshellShellHeadActionLimit",false);var m=240;if(s){m=Math.min(m,0.5*document.documentElement.clientWidth-225);}if(m<n.width()){r.toggleClass("sapUshellShellHeadActionLimit",true);}return b!==r.width();};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellHeader',['jquery.sap.global','sap/ui/core/Control','sap/ui/core/theming/Parameters','sap/ushell/library','sap/ui/Device','sap/ui/core/IconPool','./ShellTitle','sap/ushell/Config','./ShellAppTitle','./ShellHeaderRenderer'],function(q,C,T,l,D,I,S,a){"use strict";var s=0,n=0;var L;var i;var b;var c;var d="sapUshellShellShowSearchOverlay";var M=3,e=1,f=0.5,g=9,A=3,h=3,j=12;
var k=C.extend("sap.ushell.ui.shell.ShellHeader",{metadata:{properties:{logo:{type:"sap.ui.core.URI",defaultValue:""},showLogo:{type:"boolean",defaultValue:true},searchState:{type:"string",defaultValue:"COL"},ariaLabel:{type:"string",defaultValue:undefined},showSeparators:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{headItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},headEndItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},search:{type:"sap.ui.core.Control",multiple:false},user:{type:"sap.ushell.ui.shell.ShellHeadUserItem",multiple:false},title:{type:"sap.ushell.ui.shell.ShellTitle",multiple:false},appTitle:{type:"sap.ushell.ui.shell.ShellAppTitle",multiple:false}},associations:{shellLayout:{type:"sap.ui.base.ManagedObject",multiple:false}},events:{searchSizeChanged:{}}}});
k.prototype.setVisible=function(v){v=v===undefined?true:!!v;q(".sapUshellShellHead, .sapUshellShellHead > .sapUshellShellCntnt").css("display",v?"":"none");C.prototype.setVisible.call(this,v);};
k.prototype.getShellLayoutControl=function(){return sap.ui.getCore().byId(this.getShellLayout());};
k.prototype.createUIArea=function(m){var o=document.getElementById('shell-hdrcntnt');var p=m||'canvas';var r=document.getElementById(p);if(r&&!o){r.insertAdjacentHTML('beforebegin','<header id="shell-hdr" class="sapContrastPlus sapUshellShellHead">'+'</header>');if(!this.getVisible()){this.setVisible(false);}this.placeAt('shell-hdr');}};
k.prototype.SearchState={COL:"COL",EXP:"EXP",EXP_S:"EXP_S"};
k.prototype.init=function(){this._rtl=sap.ui.getCore().getConfiguration().getRTL();this._handleMediaChange=function(p){if(!this.getDomRef()){return;}if(this.getSearchState()!=this.SearchState.COL){this._setMaxWidthForAppTitleAndTitle();this._handleSearchSizeChanged();return;}this._refresh();};D.media.attachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);this._handleResizeChange=function(){if(!this.getDomRef()){return;}var u=this.getUser();if(this.getUser()){u._checkAndAdaptWidth(!this.$("hdr-search").hasClass("sapUshellShellHidden")&&!!this.getSearch());}if(this.getSearchState()!=this.SearchState.COL){this._setMaxWidthForAppTitleAndTitle();this._handleSearchSizeChanged();return;}this._refresh();};D.resize.attachHandler(this._handleResizeChange,this);this.data("sap-ui-fastnavgroup","true",true);this.oTitle=null;};
k.prototype.exit=function(){D.media.detachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);D.resize.detachHandler(this._handleResizeChange,this);if(this.oTitle){this.oTitle.destroy();}var m=document.getElementById('shell-hdr');if(m){m.parentElement.removeChild(m);}};
k.prototype.setAccessKeyHandler=function(m){this._accessKeyHandler=m;};
k.prototype.attachAccessKeyHander=function(m){if(!m){return;}q("#sapUshellHeaderAccessibilityHelper").focusin(function(E){var v=sap.ui.getCore().byId('viewPortContainer'),o=v.getCurrentState(),p;if(m.bForwardNavigation){switch(o){case"Center":if(m.getAppKeysHandler()){setTimeout(function(){m.fnExternalKeysHandler(E,m.bFocusPassedToExternalHandlerFirstTime);m.bFocusPassedToExternalHandlerFirstTime=false;m.bFocusOnShell=false;},0);}else{var r=q(":focusable").filter("[tabindex!='-1']"),t=r.index(document.activeElement),p=r.eq(t+1);if(!p.length){var u=document.getElementById(v.getCurrentCenterPage());if(u.tagName==="IFRAME"){m.bForwardNavigation=false;u.focus();}else{p=r[0];}}}break;case"LeftCenter":p=q("#logoutBtn");if(p.length===0){p=q("#userStatusOpener");}break;case"RightCenter":p=q("#sapUshellNotificationIconTabByDate");m.bFocusOnShell=false;break;}}else{var H=this.getHeadEndItems(),w;if(H.length>0){w=H[H.length-1];p=w;}else p=this.getAppTitle();}setTimeout(function(){if(p){p.focus();}},0);}.bind(this));};
k.prototype.onAfterRendering=function(){this._refresh();this.$("icon").one('load',this._refresh.bind(this));var m=this.getShellLayoutControl();if(m){this.$("hdr-center").toggleClass("sapUshellShellAnim",m.getShowAnimation());}var o=this.$("hdr-search-container");if(s!=n){if(this.getSearchState()==this.SearchState.COL){o.one('transitionend',function(){q(this).addClass("sapUshellShellSearchHidden");});}this._setSearchContainerMaxSize(n,false);var p={remSize:this._convertPxToRem(this.getSearchContainerRect(n).width),isFullWidth:this.isPhoneState()};this.fireSearchSizeChanged(p);}else if(this.getSearchState()==this.SearchState.COL){q(o).addClass("sapUshellShellSearchHidden");}if(a.last("/core/extension/enableHelp")){q('#actionsBtn').addClass('help-id-actionsBtn');q('#configBtn').addClass('help-id-configBtn');q('#homeBtn').addClass('help-id-homeBtn');}this.attachAccessKeyHander(this._accessKeyHandler);};
k.prototype.onThemeChanged=function(){this.invalidate();};
k.prototype._getLogo=function(){return this.getLogo()||T._getThemeImage(null,true);};
k.prototype._handleSearchSizeChanged=function(){var m;if(this.getSearchState()==this.SearchState.COL){return;}else if(this.getSearchState()==this.SearchState.EXP){m=s;this._handleExpSearchState(m);}else if(this.getSearchState()==this.SearchState.EXP_S){m=this._handleExpSSearchState();this._setSearchContainerMaxSize(m);}var o={remSize:this._convertPxToRem(this.getSearchContainerRect(m).width),isFullWidth:this.isPhoneState()};this.fireSearchSizeChanged(o);};
k.prototype._refresh=function(){var u=this.getUser();if(u){u._refreshImage();u._checkAndAdaptWidth(!!this.getSearch());}if(!this.hasStyleClass("sapUshellShellHideLogo")){this._saveLogoWidth();}this._setMaxWidthForAppTitleAndTitle();if(this.getSearchState()!=this.SearchState.COL){this._adjustHeaderWithSearch();}this._saveSearchPhoneStateThreshold();};
k.prototype._saveLogoWidth=function(){var o=this.$("hdr-begin").find(".sapUshellShellIco");if(o){i=parseInt(o.css("padding-left"),10);b=parseInt(o.css("padding-right"),10);L=this.$("icon")[0].getBoundingClientRect().width;}};
k.prototype._convertPxToRem=function(p){var r=parseFloat(T.get("sapUiFontSize"));return p/r;};
k.prototype._convertRemToPx=function(r){var m=parseFloat(T.get("sapUiFontSize"));return r*m;};
k.prototype._setMaxWidthForAppTitleAndTitle=function(){this._setMaxWidthForAppTitle();if(this.isLSize()){this._setMaxWidthForTitle();}else{this._setAppTitleFontSize();}};
k.prototype._setMaxWidthForAppTitle=function(){var m=this.$("hdr-appTitle");var o=this.$("hdr-appTitle").find(".sapUshellHeadTitle");if(!m.length){return;}o.removeClass('sapUshellHeadTitleWithSmallerFontSize');m.css({'max-width':'none'});var p=this._calcCenterWidth();var t=0;if(this.isLSize()){var r=this.$("hdr-title");if(r.length){t=r[0].getBoundingClientRect().width;}}var P=this.isSSize()?e:M;var w=this._convertPxToRem(p-t)-2*P;var u=m.find('.sapUshellShellHeadAction');var v=u.length?A+1.5:A;if(w<v){w=v;}m.css({'max-width':w+"rem"});};
k.prototype._calcCenterWidth=function(){var m=this.$("hdr-appTitle")[0].getBoundingClientRect();var o=this.$("hdr-begin")[0].getBoundingClientRect();var p=this.$("hdr-end")[0].getBoundingClientRect();var r;if(this._isOverlapping(o,m)||this._isOverlapping(m,p)){var t=o.width;var u=p.width;var v=this.$()[0].getBoundingClientRect().width;r=v-2*Math.max(t,u);}else{var w=this.$("hdr-center");var r=w[0].getBoundingClientRect().width;}return r;};
k.prototype._setMaxWidthForTitle=function(){var m=this.$("hdr-title");if(!m.length){return;}m.css({'max-width':j+"rem",'opacity':1});var o=this.$("hdr-appTitle");if(!o||!o[0]){return;}var r=this._isOverlapping(m[0].getBoundingClientRect(),o[0].getBoundingClientRect(),M,false);if(r){var t=m[0].getBoundingClientRect().width;var p=this._convertPxToRem(t-r);if(p<h){m.css({'opacity':0});}else{m.css({'max-width':p+"rem"});}}};
k.prototype._setAppTitleFontSize=function(){var o=this.$("hdr-appTitle").find(".sapUshellHeadTitle");if(o&&o[0]){var m=o[0].scrollWidth;var p=o[0].clientWidth;if(m>p){o.addClass('sapUshellHeadTitleWithSmallerFontSize');}}};
k.prototype._adjustHeaderWithSearch=function(m){var o=this.$("hdr-appTitle");if(!o.length||o.css('opacity')=="0"||o.css('display')=="none"){return;}var p=o[0].getBoundingClientRect();var r;if(m){r=this.getSearchContainerRect(m);}else{var t=this.$("hdr-search-container");r=this.getSearchContainerRect(parseFloat(t.get(0).style.maxWidth));}var O=this._isOverlapping(p,r,f,true);if(!O){return;}else if(O){var u=p.width;o.css({'max-width':this._convertPxToRem(u-O)+"rem"});}};
k.prototype.setAppTitle=function(o){o.attachTextChanged(this._handleAppTitleChange,this);this.setAggregation("appTitle",o,true);};
k.prototype.removeAppTitle=function(o){o.detachedTextChanged(this._handleAppTitleChange);this.removeAggregation("appTitle");};
k.prototype._handleAppTitleChange=function(){if(!this.getDomRef()){return;}if(this.getSearchState()!=this.SearchState.COL){this._setMaxWidthForAppTitleAndTitle();this._handleSearchSizeChanged();}};
k.prototype.setTitleControl=function(t,o){this.oTitle=this.oTitle||sap.ui.getCore().byId("shellTitle");if(this.oTitle){this.oTitle.destroy();}this.oTitle=new S("shellTitle",{text:t,icon:I.getIconURI("overflow")});this.oTitle.setInnerControl(o);this.setTitle(this.oTitle);};
k.prototype.removeHeadItem=function(v){if(typeof v==='number'){v=this.getHeadItems()[v];}this.removeAggregation('headItems',v);};
k.prototype.addHeadItem=function(o){this.addAggregation('headItems',o);};
k.prototype.isPhoneState=function(){var m=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;var E=true;var H=this.$().width();if(H<=c){E=false;}return(D.system.phone||m=="Phone"||!E);};
k.prototype.isLSize=function(){var m=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;return(m=="Desktop");};
k.prototype.isSSize=function(){var m=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;return(D.system.phone||m=="Phone");};
k.prototype.getSearchContainerRect=function(m){var o=q("<div> </div>").css("max-width",m+"rem");var p=q("<div></div>").append(o).insertAfter(this.$("hdr-search-container"));o.addClass('sapUshellShellSearch');var t=o[0].getBoundingClientRect();p.remove();return t;};
k.prototype.setSearchState=function(m,o,w){if(typeof m!=="string"||!this.SearchState.hasOwnProperty(m)){return;}this.requiredRemSize=o;this.setProperty('searchState',m,false);var p;if(m===this.SearchState.COL){p=this._handleColSearchState(true);}else if(m===this.SearchState.EXP){this.bWithOverlay=(w===false)?false:true;p=this._handleExpSearchState(o,true);}else if(m==this.SearchState.EXP_S){this.bWithOverlay=(w===true)?true:false;p=this._handleExpSSearchState(o,true);}this._setSearchContainerMaxSize(p,true);};
k.prototype.getSearchAvailableSize=function(){var m=this._convertPxToRem(this._getSizeToAppTitle());var o=m-this._getMinPaddingRemSize();return(o>=0?o:0);};
k.prototype._getSizeToAppTitle=function(){var o=this.$("hdr-center");var m=o[0];var p=this.$("hdr-appTitle").find(".sapUshellAppTitle");var r=p[0];var t;if(this._rtl){t=r?r.getBoundingClientRect().left-m.getBoundingClientRect().left:this._getSizeToTitle();}else{t=r?m.getBoundingClientRect().right-r.getBoundingClientRect().right:this._getSizeToTitle();}return t;};
k.prototype._getSizeToTitle=function(){var o=this.$("hdr-center");var m=o[0];var t=this.$("hdr-title").find(".sapUshellHeadTitle");var p=t[0];var r;if(this._rtl){r=p?p.getBoundingClientRect().left-m.getBoundingClientRect().left:this._getSizeToLogo();}else{r=p?m.getBoundingClientRect().right-p.getBoundingClientRect().right:this._getSizeToLogo();}return r;};
k.prototype._getSizeToLogo=function(){var o=this.$("hdr-center");var m=o[0];var p=m.getBoundingClientRect().width+this._getSearchButtonWidth();var r=this.$("hdr-begin").find(".sapUshellShellIco");var t=r[0];var u=false;if(this.hasStyleClass("sapUshellShellHideLogo")){u=true;}if(t&&u){var v=this._rtl?b:i;return p-L-v;}else{var v=this._rtl?i:b;return p+v;}};
k.prototype._getMaxSize=function(){var o=this.$("hdr-center");var m=o[0];var p=this.$("hdr-begin").find(".sapUshellShellIco");var r=p[0];var t=false;if(this.hasStyleClass("sapUshellShellHideLogo")){t=true;}var u;if(r&&!t){var v=this._rtl?i:b;u=L+v;}else{u=0;}var w=m.getBoundingClientRect().width+this._getSearchButtonWidth()+u;return w;};
k.prototype._getSearchButtonWidth=function(){var o=this.getHeadEndItems()[0];if(o&&o.getVisible()){var m=o.getDomRef();var p=m.getBoundingClientRect().width;return p;}return 0;};
k.prototype._handleColSearchState=function(m){var o=this.getShellLayoutControl();if(o){o.removeStyleClass(d);}this.removeStyleClass(d);this.removeStyleClass("sapUshellShellHideLogo");this.removeStyleClass("sapUshellShellHideSubtitle");this.removeStyleClass("sapUshellShellHideAppTitle");if(this.isPhoneState()){return this._handleColSearchStatePhone();}return 0;};
k.prototype._handleExpSearchState=function(r,m){var o=this.getShellLayoutControl();if(o){o.toggleStyleClass(d,this.bWithOverlay);}this.toggleStyleClass(d,this.bWithOverlay);if(this.isPhoneState()){this._handleExpAndExpSSearchStatePhone();return r;}else{return this._handleExpSearchStateLargeScreen(r,m);}};
k.prototype._handleExpSearchStateLargeScreen=function(r,m){var o;this.removeStyleClass("sapUshellShellHideForPhone");var p=this._convertPxToRem(this._getMaxSize());var t=this._convertPxToRem(this._getSizeToTitle());var u=this._convertPxToRem(this._getSizeToAppTitle());var v=this._convertPxToRem(this._getSizeToLogo());if(r>p){this.addStyleClass("sapUshellShellHideLogo");this.addStyleClass("sapUshellShellHideSubtitle");this.addStyleClass("sapUshellShellHideAppTitle");o=p;}else if(r>v-this._getMinPaddingRemSize()){this.addStyleClass("sapUshellShellHideLogo");this.addStyleClass("sapUshellShellHideSubtitle");this.addStyleClass("sapUshellShellHideAppTitle");o=r;}else if(r>t-this._getMinPaddingRemSize()){this.addStyleClass("sapUshellShellHideSubtitle");this.addStyleClass("sapUshellShellHideAppTitle");this.removeStyleClass("sapUshellShellHideLogo");o=r;}else if(r>u-this._getMinPaddingRemSize()){this.addStyleClass("sapUshellShellHideAppTitle");this.removeStyleClass("sapUshellShellHideSubtitle");this.removeStyleClass("sapUshellShellHideLogo");o=r;}else{this.removeStyleClass("sapUshellShellHideAppTitle");this.removeStyleClass("sapUshellShellHideSubtitle");this.removeStyleClass("sapUshellShellHideLogo");o=r;}return o;};
k.prototype._handleExpSSearchState=function(r,m){var o=this.getShellLayoutControl();if(o){o.toggleStyleClass(d,this.bWithOverlay);}this.toggleStyleClass(d,this.bWithOverlay);if(this.isPhoneState()){this._handleExpAndExpSSearchStatePhone();return r;}else{var p=this._handleExpSSearchStateLargeScreen(r,m);if(p>this.requiredRemSize){p=this.requiredRemSize;}return p;}};
k.prototype._handleExpSSearchStateLargeScreen=function(r,m){var o;this.removeStyleClass("sapUshellShellHideForPhone");var p=this._convertPxToRem(this._getSizeToAppTitle());if(p-this._getMinPaddingRemSize()<g){p=g+this._getMinPaddingRemSize();}if(!r){r=p;}if(r>p-this._getMinPaddingRemSize()){o=p-this._getMinPaddingRemSize();}else{o=r;}this.removeStyleClass("sapUshellShellHideLogo");this.removeStyleClass("sapUshellShellHideSubtitle");this.removeStyleClass("sapUshellShellHideAppTitle");return o;};
k.prototype._handleExpAndExpSSearchStatePhone=function(){this.addStyleClass("sapUshellShellHideForPhone");};
k.prototype._handleColSearchStatePhone=function(){this.removeStyleClass("sapUshellShellHideForPhone");return 0;};
k.prototype._setSearchContainerMaxSize=function(m,o){if(!o){var p=this.$("hdr-search-container");p.css("max-width",m+"rem");s=n=m;}else{n=m;}this._adjustHeaderWithSearch(m);};
k.prototype._getMinPaddingRemSize=function(){if(this._convertPxToRem(this._getSizeToAppTitle())<g){return f;}else{return M;}};
k.prototype._saveSearchPhoneStateThreshold=function(){if(this.hasStyleClass("sapUshellShellHideForPhone")){return;}var m=this.getSearchAvailableSize();if(m==0){m=-f;}var o=this._maxRemToRemoveFromAppTitle();if(m+o<g){var H=this.$().width();c=H+this._convertRemToPx(g-m-o);}return c;};
k.prototype._maxRemToRemoveFromAppTitle=function(){var m=this.$("hdr-appTitle");var o=m.find(".sapUshellHeadTitle");if(!m.length||!o.length){return 0;}var p=this._convertPxToRem(o[0].getBoundingClientRect().width);var r=(p-A)>0?(p-A):0;return r;};
k.prototype._isOverlapping=function(m,o,p,P){if(!p){p=0;}if(this._rtl){var r=m.left;var t=o.right;if(P){r=r-this._convertRemToPx(p);}else{t=t+this._convertRemToPx(p);}if(r<t){return t-r;}}else{var u=m.right;var v=o.left;if(P){u=u+this._convertRemToPx(p);}else{v=v-this._convertRemToPx(p);}if(v<u){if(m.bottom>o.top&&m.bottom<o.bottom){return u-v;}}}return 0;};
k.prototype.getSearchMaxWidth=function(){return s;};
return k;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellHeaderRenderer',['sap/ushell/resources'],function(r){"use strict";var S={};
S.render=function(a,h){var i=h.getId();a.write("<div");a.writeControlData(h);if(h.getAriaLabel()){a.writeAccessibilityState({label:h.getAriaLabel(),role:"banner"});}a.addClass("sapUshellShellHeader");a.addClass("sapUshellShellCntnt");a.writeClasses();a.write(">");a.write("<div id='",i,"-hdr-begin' class='sapUshellShellHeadBegin'>");this.renderHeaderItems(a,h,true);a.write("</div>");a.write("<div id='",i,"-hdr-center' class='sapUshellShellHeadCenter' >");var t=h.getTitle();if(t&&t.getText()){this.renderTitle(a,h);}if(h.getAppTitle()){this.renderAppTitle(a,h);}this.renderSearch(a,h);a.write("</div>");a.write("<div id='",i,"-hdr-end' class='sapUshellShellHeadEnd'>");this.renderHeaderItems(a,h,false);a.write("</div>");a.write("<div tabindex='0' id='sapUshellHeaderAccessibilityHelper' style='position: absolute'></div>");a.write("</div>");};
S.renderSearch=function(a,h){var s=h.getSearch();a.write("<div id='",h.getId(),"-hdr-search-container'");a.writeAttribute("class","sapUshellShellSearch");a.addStyle("max-width",h.getSearchMaxWidth()+"rem");a.writeStyles();a.write(">");if(s){a.renderControl(s);}a.write("</div>");};
S.renderTitle=function(a,h){var c="sapUshellShellHeadTitle";if(h.getAppTitle()){c="sapUshellShellHeadSubtitle";}a.write("<div id='",h.getId(),"-hdr-title' class='"+c+"'");a.write(">");a.renderControl(h.getTitle());a.write("</div>");};
S.renderAppTitle=function(a,h){a.write("<div id='",h.getId(),"-hdr-appTitle' class='sapUshellShellHeadTitle'");a.writeAccessibilityState({role:"heading",level:1,label:h.getAppTitle().getText()});a.write(">");a.renderControl(h.getAppTitle());a.write("</div>");};
S.renderHeaderItems=function(a,h,b){a.write("<div class='sapUshellShellHeadContainer'>");var t,u,U,I=b?h.getHeadItems():h.getHeadEndItems(),i;for(i=0;i<I.length;i++){I[i]._headerHideSeperators=!h.getShowSeparators();a.renderControl(I[i]);}u=h.getUser();if(!b&&u){a.write("<a tabindex='0'");a.writeElementData(u);a.addClass("sapUshellShellHeadAction sapUshellShellHeadSeparator");a.writeClasses();t=u.getTooltip_AsString();if(t){a.writeAttributeEscaped("title",t);}if(u.getAriaLabel()){a.writeAccessibilityState({label:u.getAriaLabel(),haspopup:"true",role:"button"});}a.write("><span id='",u.getId(),"-img' class='sapUshellShellHeadActionImg'></span>");a.write("<span id='"+u.getId()+"-name' class='sapUshellShellHeadActionName'");a.write(">");U=u.getUsername()||"";a.writeEscaped(U);a.write("</span><span class='sapUshellShellHeadActionExp'></span></a>");}a.write("</div>");if(b){this.renderLogo(a,h);}};
S.renderLogo=function(a,h){var l=r.i18n.getText("SHELL_LOGO_TOOLTIP"),i=h._getLogo(),c="";if(!h.getShowLogo()){c+="sapUshellShellHideIco";}else{c+="sapUshellShellIco";}a.write("<div class='"+c+"'");a.write(">");a.write("<img id='",h.getId(),"-icon'");a.writeAttributeEscaped("title",l);a.writeAttribute("role","presentation");a.write("src='");a.writeEscaped(i);a.write("'");if(!i){a.write(" style='display:none;'");}a.write("></div>");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellLayout',['jquery.sap.global','sap/ui/Device','sap/ui/core/Control','sap/ushell/library','./ToolArea','./ShellLayoutRenderer'],function(q,D,C,S){"use strict";
var a=C.extend("sap.ushell.ui.shell.ShellLayout",{metadata:{properties:{headerHiding:{type:"boolean",group:"Appearance",defaultValue:false},headerVisible:{type:"boolean",group:"Appearance",defaultValue:true},toolAreaVisible:{type:"boolean",group:"Appearance",defaultValue:false},floatingContainerVisible:{type:"boolean",group:"Appearance",defaultValue:false},backgroundColorForce:{type:"boolean",group:"Appearance",defaultValue:true},showBrandLine:{type:"boolean",group:"Appearance",defaultValue:true},showAnimation:{type:"boolean",group:"Appearance",defaultValue:true},enableCanvasShapes:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{toolArea:{type:"sap.ushell.ui.shell.ToolArea",multiple:false},rightFloatingContainer:{type:"sap.ushell.ui.shell.RightFloatingContainer",multiple:false},canvasSplitContainer:{type:"sap.ushell.ui.shell.SplitContainer",multiple:false},floatingActionsContainer:{type:"sap.ushell.ui.shell.ShellFloatingActions",multiple:false},footer:{type:"sap.ui.core.Control",multiple:false}},associations:{header:{type:"sap.ushell.ui.shell.ShellHeader",multiple:false},floatingContainer:{type:"sap.ushell.ui.shell.FloatingContainer",multiple:false}}}});
a._SIDEPANE_WIDTH_PHONE=13;a._SIDEPANE_WIDTH_TABLET=13;a._SIDEPANE_WIDTH_DESKTOP=15;
a.prototype.getHeader=function(){return sap.ui.getCore().byId(this.getAssociation("header"));};
a.prototype.init=function(){this._rtl=sap.ui.getCore().getConfiguration().getRTL();this._showHeader=true;this._useStrongBG=false;D.media.attachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);};
a.prototype.exit=function(){D.media.detachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);};
a.prototype.onAfterRendering=function(){this.getCanvasSplitContainer()._applySecondaryContentSize();this._setSidePaneWidth();};
a.prototype.renderFloatingContainerWrapper=function(){var f=document.getElementById("sapUshellFloatingContainerWrapper"),b=document.getElementsByTagName('body'),s=q.sap.storage?q.sap.storage(q.sap.storage.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"):undefined;if(!f){f=document.createElement("DIV");f.setAttribute("id",'sapUshellFloatingContainerWrapper');f.setAttribute("class",'sapUshellShellFloatingContainerWrapper sapUshellShellHidden');b[0].appendChild(f);}if(s&&s.get("floatingContainerStyle")){f.setAttribute("style",s.get("floatingContainerStyle"));}};
a.prototype.renderFloatingContainer=function(f){this.renderFloatingContainerWrapper();if(f&&!f.getDomRef()){q('#sapUshellFloatingContainerWrapper').toggleClass("sapUshellShellHidden",true);f.placeAt("sapUshellFloatingContainerWrapper");}};
a.prototype.onThemeChanged=function(){return!!this.getDomRef();};
a.prototype.setToolAreaVisible=function(v){if(!this.getToolArea()){q.sap.log.debug("Tool area not created but visibility updated",null,"sap.ushell.ShellLayout");return this;}this.setProperty("toolAreaVisible",!!v,true);this.getToolArea().$().toggleClass("sapUshellShellHidden",!v);this.getCanvasSplitContainer()._applySecondaryContentSize();return this;};
a.prototype.setFloatingContainer=function(c){this.setAssociation('floatingContainer',c,true);this.renderFloatingContainer(c);};
a.prototype.setFloatingContainerVisible=function(v){this.setProperty("floatingContainerVisible",!!v,true);if(this.getDomRef()){var s=q.sap.storage?q.sap.storage(q.sap.storage.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"):undefined,f=document.getElementById("sapUshellFloatingContainerWrapper");if(v&&s&&!s.get("floatingContainerStyle")){var e=q(".sapUshellShellHeadItm").position()?q(".sapUshellShellHeadItm").position().left:0;var l=(q(window).width()-q("#shell-floatingContainer").width()-e)*100/q(window).width();var t=q(".sapUshellShellHeadContainer").height()*100/q(window).height();f.setAttribute("style","left:"+l+"%;"+"top:"+t+"%;position:absolute;");s.put("floatingContainerStyle",f.getAttribute("style"));}q('.sapUshellShellFloatingContainerWrapper').toggleClass("sapUshellShellHidden",!v);}return this;};
a.prototype.setFloatingActionsContainer=function(c){this.setAggregation('floatingActionsContainer',c,true);};
a.prototype.setHeaderVisible=function(h){this.setProperty("headerVisible",!!h,true);this.$().toggleClass("sapUshellShellNoHead",!h);return this;};
a.prototype._setStrongBackground=function(u){this._useStrongBG=!!u;this.$("strgbg").toggleClass("sapUiStrongBackgroundColor",this._useStrongBG);};
a.prototype._setSidePaneWidth=function(r){var s=this.getCanvasSplitContainer();if(s){if(!r){r=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;}var w=a["_SIDEPANE_WIDTH_"+r.toUpperCase()]+"rem";s.setSecondaryContentSize(w);}};
a.prototype._handleMediaChange=function(p){if(!this.getDomRef()){return false;}this._setSidePaneWidth(p.name);this.getCanvasSplitContainer()._applySecondaryContentSize();};
return a;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellLayoutRenderer',[],function(){"use strict";var S={};
S.render=function(r,s){var i=s.getId(),c,a=(window.innerWidth>0)?window.innerWidth:screen.width,b=(window.innerHeight>0)?window.innerHeight:screen.height,f=s.getFooter();r.write("<div");r.writeControlData(s);r.addClass("sapUshellShell");if(s.getShowAnimation()){r.addClass("sapUshellShellAnim");}if(!s.getHeaderVisible()){r.addClass("sapUshellShellNoHead");}r.addClass("sapUshellShellHead"+(s._showHeader?"Visible":"Hidden"));if(f){r.addClass("sapUshellShellFooterVisible");}r.writeClasses();r.write(">");if(!s.getShowBrandLine()){r.write("<div id='",i,"-strgbg' style='z-index:-2' class='sapUshellShellBG sapContrastPlus"+(s._useStrongBG?" sapUiStrongBackgroundColor":"")+"'></div>");r.write("<div style='z-index:-2' class='sapUiShellBackgroundImage sapUiGlobalBackgroundImageForce sapUshellShellBG sapContrastPlus'></div>");}if(s.getEnableCanvasShapes()){r.write("<canvas id='",i,"-shapes' height='",b,"'width='",a,"' style='position:absolute;z-index:-1'>");r.write("</canvas>");}if(s.getShowBrandLine()){r.write("<hr id='",i,"-brand' class='sapUshellShellBrand'>");}if(s.getToolArea()){r.write("<aside>");r.renderControl(s.getToolArea());r.write("</aside>");}if(s.getRightFloatingContainer()){r.write("<aside>");r.renderControl(s.getRightFloatingContainer());r.write("</aside>");}c="sapUshellShellCntnt sapUshellShellCanvas";if(s.getBackgroundColorForce()){c+=" sapUiShellBackground sapUiGlobalBackgroundColorForce";}r.write("<div id='",i,"-cntnt' class='"+c+"'>");if(s.getShowBrandLine()){r.write("<div id='",i,"-strgbg' style='z-index:-2' class='sapUshellShellBG sapContrastPlus"+(s._useStrongBG?" sapUiStrongBackgroundColor":"")+"'></div>");r.write("<div style='z-index:-2' class='sapUiShellBackgroundImage sapUiGlobalBackgroundImageForce sapUshellShellBG sapContrastPlus'></div>");}r.renderControl(s.getCanvasSplitContainer());r.write("</div>");r.write("<span id='",i,"-main-focusDummyOut' tabindex='-1'></span>");r.renderControl(s.getFloatingActionsContainer());if(f){r.write('<footer class="sapMPageFooter">');if(f._applyContextClassFor){f._applyContextClassFor("footer");}r.renderControl(f);r.write('</footer>');}r.write("</div>");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellNavigationMenu',['jquery.sap.global','sap/ushell/library','sap/ushell/ui/launchpad/AccessibilityCustomData','sap/m/List','sap/m/FlexBox'],function(q,l,A,L,F){"use strict";
var S=sap.ui.core.Control.extend("sap.ushell.ui.shell.ShellNavigationMenu",{
metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},showTitle:{type:"boolean",defaultValue:false},showRelatedApps:{type:"boolean",defaultValue:true}},aggregations:{items:{type:"sap.m.ListItem",group:"Misc",defaultValue:null,singularName:"item"},miniTiles:{type:"sap.ushell.ui.shell.NavigationMiniTile",group:"Misc",defaultValue:null,singularName:"miniTile"}},events:{}},
renderer:{render:function(r,c){var t,m;r.write('<div ');r.writeControlData(c);r.write('>');if(c.getShowTitle()){t=c.oTitle;t.setIcon(c.getIcon());t.setTitle(c.getTitle());r.write('<div id="sapUshellNavTitle" >');r.renderControl(t);r.write('</div>');}if(c.oItemsList){r.renderControl(c.oItemsList);}if(c.getShowRelatedApps()){m=c.getMiniTiles();if(m&&m.length>0){r.renderControl(c.oRelatedAppsVbox);}}r.write('</div>');}}
});
var K=function(m){this.init(m);};
K.prototype.init=function(m){this.keyCodes=q.sap.KeyCodes;this.jqElement=m.$();this.jqElement.on('keydown.keyboardNavigation',this.keydownHandler.bind(this));};
K.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation");}delete this.jqElement;};
K.prototype.keydownHandler=function(e){switch(e.keyCode){case this.keyCodes.ARROW_UP:this.upDownHandler(e,true);break;case this.keyCodes.ARROW_DOWN:this.upDownHandler(e,false);break;case this.keyCodes.ARROW_LEFT:this.leftRightHandler(e,false);break;case this.keyCodes.ARROW_RIGHT:this.leftRightHandler(e,true);break;case this.keyCodes.HOME:this.homeEndHandler(e,true);break;case this.keyCodes.END:this.homeEndHandler(e,false);break;case this.keyCodes.PAGE_UP:this.homeEndHandler(e,true);break;case this.keyCodes.PAGE_DOWN:this.homeEndHandler(e,false);break;default:break;}};
K.prototype.upDownHandler=function(e,i){var j=q(document.activeElement);if(!j.hasClass("sapUshellNavMiniTile")){return false;}var a=j.parent().parent();var c=j.parent().index();var b=a.children();var n;if(i){n=c-3;if(n<0){n+=9;}}else{n=(c+3)%b.length;}var d=b[n].children[0];this._setItemFocus(e,q(d));};
K.prototype.leftRightHandler=function(e,i){var n=i?"next":"prev",c,a,b,j,d,f,g=q(document.activeElement);if(!g.hasClass("sapUshellNavMiniTile")){return false;}c=g.parent();a=c[n]();b=a.index();j=c.parent();if(b===-1){d=i?0:j.children().length-1;}else{d=b;}f=j.children()[d].children[0];if(!f){return false;}this._setItemFocus(e,q(f));};
K.prototype.homeEndHandler=function(e,i){var n=i?"first":"last";var j=q(document.activeElement);if(!j.hasClass("sapUshellNavMiniTile")){return false;}e.preventDefault();var a=this.jqElement.find(".sapUshellNavMiniTile")[n]();this._setItemFocus(e,a);};
K.prototype._setItemFocus=function(e,j){e.preventDefault();e.stopImmediatePropagation();q(".sapUshellNavMiniTile").attr("tabindex",-1);j.attr("tabindex",0);j.focus();};
K.prototype.setFocusToLastFocusedMiniTile=function(e){var j=q.find(".sapUshellNavMiniTile[tabindex='0']");if(j&&j[0]){this._setItemFocus(e,q(j));}else{this._setItemFocus(e,q(q(".sapUshellNavMiniTile")[0]));}};
S.prototype.init=function(){};
S.prototype._createItemsList=function(){this.oItemsList=new L("sapUshellNavHierarchyItems");};
S.prototype._createMiniTilesBox=function(){this.oMiniTilesBox=new F("sapUshellNavRelatedAppsFlexBox");};
S.prototype._beforeOpen=function(){if(!this.bInitialized){this.oTitle=new sap.m.StandardListItem("navMenuInnerTitle").addStyleClass("sapUshellNavigationMenuTitleItem");this.oRelatedAppsTitle=new sap.m.Label("sapUshellRelatedAppsLabel",{text:sap.ushell.resources.i18n.getText("shellNavMenu_relatedApps")});if(!this.oMiniTilesBox){this._createMiniTilesBox();}this.oRelatedAppsVbox=new sap.m.VBox("sapUshellRelatedAppsItems",{items:[this.oRelatedAppsTitle,this.oMiniTilesBox]});this._extendInnerControlsForAccKeyboard();this.bInitialized=true;}};
S.prototype._afterOpen=function(){if(sap.ui.Device.system.desktop){if(this.keyboardNavigation){this.keyboardNavigation.destroy();}this.keyboardNavigation=new K(this.oMiniTilesBox);}};
S.prototype._extendInnerControlsForAccKeyboard=function(){this.oTitle.addCustomData(new A({key:"aria-level",value:"1",writeToDom:true}));if(sap.ui.Device.system.desktop){this.oTitle.addCustomData(new A({key:"tabindex",value:"0",writeToDom:true}));this.oItemsList.addEventDelegate({onsaptabprevious:function(e){if(this.getShowTitle()){e.preventDefault();e.stopImmediatePropagation();q('#navMenuInnerTitle').focus();}else{this.keyboardNavigation.setFocusToLastFocusedMiniTile(e);}}.bind(this),onsaptabnext:function(e){var m=q.find(".sapUshellNavMiniTile").length>0;if(m){this.keyboardNavigation.setFocusToLastFocusedMiniTile(e);}else{var a=sap.ui.getCore().byId('allMyAppsButton');this.keyboardNavigation._setItemFocus(e,q((a.getDomRef())));}}.bind(this)});}};
S.prototype.getMiniTiles=function(){if(this.oMiniTilesBox){return this.oMiniTilesBox.getItems();}else{return[];}};
S.prototype.insertMiniTile=function(m,i){if(!this.oMiniTilesBox){this._createMiniTilesBox();}this.oMiniTilesBox.insertItem(m,i);return this;};
S.prototype.addMiniTile=function(m){if(!this.oMiniTilesBox){this._createMiniTilesBox();}if(this.oMiniTilesBox.getItems().length<9){this.oMiniTilesBox.addItem(m);}else{q.sap.log.warning("ShellNavigationMenu.addMiniTile - miniTiles aggregation is already at maximum size of 9 elements "+"- current item was not added.");}return this;};
S.prototype.removeMiniTile=function(i){if(this.oMiniTilesBox){this.oMiniTilesBox.removeItem(i);}return this;};
S.prototype.removeAllMiniTiles=function(){if(this.oMiniTilesBox){this.oMiniTilesBox.removeAllItems();}return this;};
S.prototype.destroyMiniTiles=function(){if(this.oMiniTilesBox){this.oMiniTilesBox.destroyItems();}return this;};
S.prototype.indexOfMiniTile=function(m){if(this.oMiniTilesBox){return this.oMiniTilesBox.indexOfItem(m);}else{return-1;}};
S.prototype.getItems=function(){if(this.oItemsList){return this.oItemsList.getItems();}else{return[];}};
S.prototype.insertItem=function(h,i){if(!this.oItemsList){this._createItemsList();}h=this._extendHierarchyItemForAcc(h);this.oItemsList.insertItem(h,i);return this;};
S.prototype.addItem=function(h){if(!this.oItemsList){this._createItemsList();}h=this._extendHierarchyItemForAcc(h);this.oItemsList.addItem(h);return this;};
S.prototype.removeItem=function(i){if(this.oItemsList){this.oItemsList.removeItem(i);}return this;};
S.prototype.removeAllItems=function(){if(this.oItemsList){this.oItemsList.removeAllItems();}return this;};
S.prototype.destroyItems=function(){if(this.oItemsList){this.oItemsList.destroyItems();}return this;};
S.prototype.indexOfItem=function(h){if(this.oItemsList){return this.oItemsList.indexOfItem(h);}else{return-1;}};
S.prototype._extendHierarchyItemForAcc=function(i){if(sap.ui.Device.system.desktop){i.addEventDelegate({onsapspace:function(e){this.firePress();}.bind(i)});}return i;};
S.prototype.exit=function(){if(this.oItemsList){this.oItemsList.destroy();}if(this.oMiniTilesBox){this.oMiniTilesBox.destroy();}if(this.bInitialized){this.oTitle.destroy();this.oRelatedAppsVbox.destroy();this.oRelatedAppsTitle.destroy();}if(this.keyboardNavigation){this.keyboardNavigation.destroy();}};
S.prototype.onAfterRendering=function(){if(this.getShowTitle()){q("#sapUshellAppTitlePopover-intHeader").css("height",0);}else{q("#sapUshellAppTitlePopover-intHeader").css("height","0.5rem");}if(this.getShowTitle()){var j=q("#navMenuInnerTitle");j.attr("aria-readonly","true");j.attr("readonly","readonly");}var a=q("#sapUshellNavHierarchyItems ul");a.attr("role","group");a.attr("aria-label",sap.ushell.resources.i18n.getText("ShellNavigationMenu_HierarchyItemsAriaLabel"));var b=q("#sapUshellNavRelatedAppsFlexBox");b.attr("role","listbox");b.attr("aria-labelledBy","sapUshellRelatedAppsLabel");var c=q(".sapUshellNavMiniTile");for(var i=0;i<c.length;i++){q(c[i]).attr("aria-setsize",c.length);q(c[i]).attr("aria-posinset",i+1);}};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellTitle',['sap/m/Button','sap/ui/core/IconPool','sap/ushell/library'],function(B,I){"use strict";
var S=B.extend("sap.ushell.ui.shell.ShellTitle",{
metadata:{properties:{text:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}},events:{press:{}}},
renderer:{render:function(r,c){var i=c.getInnerControl();var t=c.getText();if(!t){return;}if(i){r.write("<button tabindex='0'");r.addClass("sapUshellShellHeadAction sapUshellShellHeadActionButton sapUshellHideIconOnDesktop");r.writeClasses();if(c.getTooltip()){r.writeAttributeEscaped("title",c.getTooltip());}r.writeControlData(c);r.write("><span class='sapUshellShellHeadActionImg sapUshellShellTitleHeadActionImg'>");var o=I.createControlByURI(c.getIcon());r.renderControl(o);r.write("</span>");r.write("<span class='sapUshellShellHeadActionName sapUshellHeadTitle'");r.writeAttributeEscaped("title",c.getText());r.write(">");r.writeEscaped(c.getText());r.write("</span><span class='sapUshellShellHeadActionExp'></span></button>");}else{r.write('<span id="shell-header-hdr-shell-title" class="sapUshellHeadTitle">');r.writeEscaped(c.getText());r.write("</span>");}}}
});
S.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.setType(sap.m.ButtonType.Transparent);this.innerControl=null;this.oPopover=null;};
S.prototype.getInnerControl=function(){return this.innerControl;};
S.prototype.setInnerControl=function(i){this.innerControl=i;};
S.prototype.onclick=function(e){if(!this.oPopover){this.oPopover=new sap.m.Popover("shellTitlePopover",{showHeader:false,content:this.getInnerControl(),placement:sap.m.PlacementType.VerticalPreferedBottom});}this.oPopover.openBy(this);this.firePress();};
S.prototype.exit=function(){if(this.oPopover){this.innerControl.destroy();this.oPopover.destroy();}};
S.prototype.getDomRef=function(){var b=document.getElementById("shell-header-hdr-shell-title");if(b){return b;}else{return B.prototype.getDomRef.call(this);}};
S.prototype.onsapspace=S.prototype.onclick;return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellUtilities',['jquery.sap.global','sap/ui/base/Object','sap/ushell/library'],function(q,B){"use strict";
B.extend("sap.ushell.ui.shell.shell_ContentRenderer",{
constructor:function(c,C,o,a){B.apply(this);this._id=C;this._cntnt=o;this._ctrl=c;this._rm=sap.ui.getCore().createRenderManager();this._cb=a||function(){};},
destroy:function(){this._rm.destroy();delete this._rm;delete this._id;delete this._cntnt;delete this._cb;delete this._ctrl;if(this._rerenderTimer){q.sap.clearDelayedCall(this._rerenderTimer);delete this._rerenderTimer;}B.prototype.destroy.apply(this,arguments);},
render:function(){if(!this._rm){return;}if(this._rerenderTimer){q.sap.clearDelayedCall(this._rerenderTimer);}this._rerenderTimer=q.sap.delayedCall(0,this,function(){var $=q.sap.byId(this._id);var d=$.length>0;if(d){if(typeof(this._cntnt)==="string"){var c=this._ctrl.getAggregation(this._cntnt,[]);for(var i=0;i<c.length;i++){this._rm.renderControl(c[i]);}}else{this._cntnt(this._rm);}this._rm.flush($[0]);}this._cb(d);});}
});
sap.ushell.ui.shell.shell_iNumberOfOpenedShellOverlays=0;},false);
sap.ui.predefine('sap/ushell/ui/shell/SplitContainer',['jquery.sap.global','sap/ui/core/Control','sap/ui/core/theming/Parameters','sap/ushell/library','./ShellUtilities','./SplitContainerRenderer'],function(q,C,P){"use strict";
var S=C.extend("sap.ushell.ui.shell.SplitContainer",{metadata:{library:"sap.ushell.ui.shell",properties:{showSecondaryContent:{type:"boolean",group:"Appearance",defaultValue:null},secondaryContentSize:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'250px'},secondaryContentWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'250px',deprecated:true},orientation:{type:"sap.ui.core.Orientation",group:"Appearance",defaultValue:sap.ui.core.Orientation.Horizontal}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},secondaryContent:{type:"sap.ui.core.Control",multiple:true,singularName:"secondaryContent"},subHeader:{type:"sap.ui.core.Control",multiple:true,singularName:"subHeader"}}}});
(function(w){
S.prototype.init=function(){this.bRtl=sap.ui.getCore().getConfiguration().getRTL();this._paneRenderer=new sap.ushell.ui.shell.shell_ContentRenderer(this,this.getId()+"-panecntnt","secondaryContent");this._subHeadersRenderer=new sap.ushell.ui.shell.shell_ContentRenderer(this,this.getId()+"-canvassubHeader","subHeader");this._canvasRenderer=new sap.ushell.ui.shell.shell_ContentRenderer(this,this.getId()+"-canvasrootContent","content");this._moveContent=true;};
S.prototype.exit=function(){this._paneRenderer.destroy();delete this._paneRenderer;this._canvasRenderer.destroy();delete this._canvasRenderer;this._subHeadersRenderer.destroy();delete this._subHeadersRenderer;delete this._contentContainer;delete this._secondaryContentContainer;};
S.prototype.onAfterRendering=function(){this._contentContainer=this.$("canvas");this._secondaryContentContainer=this.$("pane");this._toolArea=this.getParent()&&this.getParent().getToolArea&&this.getParent().getToolArea()?this.getParent().getToolArea():{};this._shellLayout=this.getParent();this._applySecondaryContentSize();};
S.prototype._applySecondaryContentSize=function(){if(this.getDomRef()){var v=this.getOrientation()===sap.ui.core.Orientation.Vertical;var s,o;var d,O,D;var a=this.getSecondaryContentSize();var b=this.getShowSecondaryContent();if(v){s="height";o="width";d="top";O=this.bRtl?"right":"left";}else{s="width";o="height";d=this.bRtl?"right":"left";O="top";}if(this._closeContentDelayId){q.sap.clearDelayedCall(this._closeContentDelayId);}this._secondaryContentContainer.css(s,a);this._secondaryContentContainer.css(o,"");if(this.getParent().getToolAreaVisible&&!this.getParent().getToolAreaVisible()){D="0";}else{D=this._toolArea.getSize?this._toolArea.getSize():"0";}this._secondaryContentContainer.css(d,b?D:"-"+a);this._secondaryContentContainer.css(O,"");if(this._moveContent){a=this._adjustSecondaryContentSize();this._contentContainer.css(d,b?a:D);}else{this._contentContainer.css(d,D);}if(!b){var h=parseInt(P.get("sapUshellSplitContAnimationDuration"),10);this._closeContentDelayId=q.sap.delayedCall(h,this,function(){if(this._secondaryContentContainer){this._secondaryContentContainer.toggleClass("sapUshellSplitContSecondClosed",true);}});}else{this._secondaryContentContainer.toggleClass("sapUshellSplitContSecondClosed",false);}}};
S.prototype._modifyAggregationOrProperty=function(m,d){var r=!!this.getDomRef();var a=m.apply(this,[r]);if(r&&d){d.render();}return a;};
S.prototype._adjustSecondaryContentSize=function(){var c=this.getProperty("secondaryContentSize"),b=this._shellLayout.getToolAreaVisible&&this._shellLayout.getToolAreaVisible()?this._toolArea.getSize():"0rem";c=parseFloat(c,10)+parseFloat(b,10)+"rem";return c;};
S.prototype.setShowSecondaryContent=function(s){var r=this.getDomRef();this.setProperty("showSecondaryContent",!!s,r);this._applySecondaryContentSize();return this;};
S.prototype.setSecondaryContentSize=function(s){this.setProperty("secondaryContentSize",s,true);this._applySecondaryContentSize();return this;};
S.prototype.getSecondaryContentWidth=function(){q.sap.log.warning("SplitContainer: Use of deprecated property \"SecondaryContentWidth\", please use "+"\"SecondaryContentSize\" instead.");return this.getSecondaryContentSize.apply(this,arguments);};
S.prototype.setSecondaryContentWidth=function(){q.sap.log.warning("SplitContainer: Use of deprecated property \"SecondaryContentWidth\", please use "+"\"SecondaryContentSize\" instead.");return this.setSecondaryContentSize.apply(this,arguments);};
S.prototype.insertContent=function(c,i){return this._modifyAggregationOrProperty(function(r){return this.insertAggregation("content",c,i,r);},this._canvasRenderer);};
S.prototype.addContent=function(c){return this._modifyAggregationOrProperty(function(r){return this.addAggregation("content",c,r);},this._canvasRenderer);};
S.prototype.removeContent=function(i){return this._modifyAggregationOrProperty(function(r){return this.removeAggregation("content",i,r);},this._canvasRenderer);};
S.prototype.removeAllContent=function(){return this._modifyAggregationOrProperty(function(r){return this.removeAllAggregation("content",r);},this._canvasRenderer);};
S.prototype.destroyContent=function(){return this._modifyAggregationOrProperty(function(r){return this.destroyAggregation("content",r);},this._canvasRenderer);};
S.prototype.insertSecondaryContent=function(c,i){return this._modifyAggregationOrProperty(function(r){return this.insertAggregation("secondaryContent",c,i,r);},this._paneRenderer);};
S.prototype.addSecondaryContent=function(c){return this._modifyAggregationOrProperty(function(r){return this.addAggregation("secondaryContent",c,r);},this._paneRenderer);};
S.prototype.removeSecondaryContent=function(i){return this._modifyAggregationOrProperty(function(r){return this.removeAggregation("secondaryContent",i,r);},this._paneRenderer);};
S.prototype.removeAllSecondaryContent=function(){return this._modifyAggregationOrProperty(function(r){return this.removeAllAggregation("secondaryContent",r);},this._paneRenderer);};
S.prototype.destroySecondaryContent=function(){return this._modifyAggregationOrProperty(function(r){return this.destroyAggregation("secondaryContent",r);},this._paneRenderer);};
S.prototype.addSubHeader=function(c){return this._modifyAggregationOrProperty(function(r){return this.addAggregation("subHeader",c,r);},this._subHeadersRenderer);};
S.prototype.removeSubHeader=function(){return this._modifyAggregationOrProperty(function(r){return this.removeAllAggregation("subHeader",r);},this._subHeadersRenderer);};
S.prototype.destroySubHeader=function(){return this._modifyAggregationOrProperty(function(r){return this.destroyAggregation("subHeader",r);},this._subHeadersRenderer);};
})(window);return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/SplitContainerRenderer',[],function(){"use strict";var S={};
S.render=function(r,c){var i=c.getId();var v=c.getOrientation()===sap.ui.core.Orientation.Vertical;r.write("<div");r.writeControlData(c);r.addClass("sapUshellSpltCont");r.addClass("sapUshellSpltCont"+(v?"V":"H"));if(sap.ui.getCore().getConfiguration().getAnimation()){r.addClass("sapUshellSpltContAnim");}if(!c.getShowSecondaryContent()){r.addClass("sapUshellSpltContPaneHidden");}r.writeClasses();r.write(">");var s=i+"-pane";var w=c.getShowSecondaryContent()?c.getSecondaryContentSize():"0";r.write("<aside id='",s,"' style='width:",w,"'");r.addClass("sapUshellSpltContPane");if(!c.getShowSecondaryContent()){r.addClass("sapUshellSplitContSecondClosed");}r.writeClasses();r.write(">");this.renderSecondaryContent(r,s,c.getSecondaryContent());r.write("</aside>");var C=i+"-canvas";r.write("<section id='",C,"' class='sapUshellSpltContCanvas'>");var o=c.getAggregation('subHeader');this.renderRootContent(r,C,c.getContent(),o);r.write("</section>");r.write("</div>");};
S.renderRootContent=function(r,i,c,s){r.write("<div id='",i,"cntnt' class='sapUshellSpltContCntnt'");r.writeAttribute("data-sap-ui-root-content","true");r.write(">");r.write("<div id='",i,"subHeader'>");if(s&&s.length){r.renderControl(s[0]);}r.write("</div>");if(c&&c.length){r.write("<div id='",i,"rootContent' class='sapUshellSpltContainerContentWrapper'>");c.forEach(function(C,a){r.renderControl(C);});r.write("</div>");}r.write("</div>");};
S.renderSecondaryContent=function(r,I,c){r.write("<div id='",I,"cntnt' class='sapUshellSpltContCntnt'");r.writeAttribute("data-sap-ui-root-content","true");r.write(">");for(var i=0;i<c.length;i++){r.renderControl(c[i]);}r.write("</div>");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/tile/DynamicTile',['sap/ushell/library','./TileBase','./DynamicTileRenderer'],function(l,T){"use strict";
var D=T.extend("sap.ushell.ui.tile.DynamicTile",{metadata:{library:"sap.ushell",properties:{numberValue:{type:"string",group:"Data",defaultValue:'0.0'},numberState:{type:"sap.ushell.ui.tile.State",group:"Appearance",defaultValue:sap.ushell.ui.tile.State.Neutral},numberUnit:{type:"string",group:"Data",defaultValue:null},numberDigits:{type:"int",group:"Appearance",defaultValue:0},stateArrow:{type:"sap.ushell.ui.tile.StateArrow",group:"Appearance",defaultValue:sap.ushell.ui.tile.StateArrow.None},numberFactor:{type:"string",group:"Data",defaultValue:null}}}});
return D;});
sap.ui.predefine('sap/ushell/ui/tile/DynamicTileRenderer',['sap/ui/core/Renderer','sap/ui/core/format/NumberFormat','../../library','./TileBaseRenderer'],function(R,N,u,T){"use strict";var S=u.ui.tile.State;var D=R.extend(T);var t=sap.ushell.resources.i18n;
D.renderPart=function(r,c){var n=c.getNumberValue(),a=c.getNumberFactor(),d=n.toString();var m=c.getIcon()?4:5;var s=this._shouldProcessDigits(d,c);if(d.length>m||s){var o=this._normalizeNumber(n,m,a,c);a=o.numberFactor;d=o.displayNumber;}else if(d!==""){var b=N.getFloatInstance({maxFractionDigits:m});d=b.format(n);}r.write("<div");r.addClass("sapUshellDynamicTile");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellDynamicTileData");r.addClass((c.getNumberState()?"sapUshellDynamicTileData"+c.getNumberState():"sapUshellDynamicTileData"+S.Neutral));r.writeClasses();r.write(">");r.write("<div class='sapUshellDynamicTileIndication'>");if(c.getStateArrow()){r.write("<div");r.addClass("sapUshellDynamicTileStateArrow");r.addClass("sapUshellDynamicTileData"+c.getStateArrow());r.writeClasses();r.write(">");r.write("</div>");}r.write('<br><div');r.addClass("sapUshellDynamicTileNumberFactor");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileUnits_lable")+a});r.write('>');r.writeEscaped(a);r.write('</div>');r.write("</div>");r.write('<div');r.addClass("sapUshellDynamicTileNumber");r.writeClasses();if(d&&d!==""){r.writeAccessibilityState(c,{label:t.getText("TileValue_lable")+d});r.write('>');r.writeEscaped(d);}else{r.write('>');r.writeEscaped(c.getNumberValue());}r.write('</div>');r.write("</div>");r.write("</div>");};
D._normalizeNumber=function(n,m,a,c){var b;if(isNaN(n)){b=n;}else{var o=N.getFloatInstance({maxFractionDigits:c.getNumberDigits()});if(!a){var d=Math.abs(n);if(d>=1000000000){a='B';n/=1000000000;}else if(d>=1000000){a='M';n/=1000000;}else if(d>=1000){a='K';n/=1000;}}b=o.format(n);}var e=b;var f=e[m-1];m-=(f==='.'||f===',')?1:0;e=e.substring(0,m);return{displayNumber:e,numberFactor:a};};
D._shouldProcessDigits=function(d,c){var n=c.getNumberDigits(),a;if(d.indexOf('.')!==-1){a=d.split(".")[1].length;if(a>n){return true;}}return false;};
D.getInfoPrefix=function(c){return c.getNumberUnit();};
return D;},true);
sap.ui.predefine('sap/ushell/ui/tile/ImageTile',['sap/ushell/library','./TileBase','./ImageTileRenderer'],function(l,T){"use strict";
var I=T.extend("sap.ushell.ui.tile.ImageTile",{metadata:{library:"sap.ushell",properties:{imageSource:{type:"string",group:"Appearance",defaultValue:null}}}});
return I;});
sap.ui.predefine('sap/ushell/ui/tile/ImageTileRenderer',['sap/ui/core/Renderer','./TileBaseRenderer'],function(R,T){"use strict";var I=R.extend(T);
I.renderPart=function(r,c){r.write("<img");r.addClass("sapUshellImageTile");r.writeClasses();r.writeAttributeEscaped("src",c.getImageSource());r.writeAttributeEscaped("alt"," ");r.write(">");};
return I;},true);
sap.ui.predefine('sap/ushell/ui/tile/StaticTile',['sap/ushell/library','./TileBase','./StaticTileRenderer'],function(l,T){"use strict";
var S=T.extend("sap.ushell.ui.tile.StaticTile",{metadata:{library:"sap.ushell"}});
return S;});
sap.ui.predefine('sap/ushell/ui/tile/StaticTileRenderer',['sap/ui/core/Renderer','./TileBaseRenderer'],function(R,T){"use strict";var S=R.extend(T);
S.renderPart=function(r,c){r.write("<span");r.addClass("sapUshellStaticTile");r.writeClasses();r.write(">");r.write("</span>");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/tile/TileBase',['sap/ui/core/Control','sap/ushell/library','./TileBaseRenderer'],function(C,l){"use strict";
var T=C.extend("sap.ushell.ui.tile.TileBase",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Data",defaultValue:null},subtitle:{type:"string",group:"Data",defaultValue:null},icon:{type:"string",group:"Data",defaultValue:null},info:{type:"string",group:"Data",defaultValue:null},infoState:{type:"sap.ushell.ui.tile.State",defaultValue:sap.ushell.ui.tile.State.Neutral},targetURL:{type:"string",group:"Behavior",defaultValue:null},highlightTerms:{type:"any",group:"Appearance",defaultValue:[]}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},events:{press:{}}}});
T.prototype.ontap=function(e){this.firePress({});};
T.prototype.onsapenter=function(e){this.firePress({});};
T.prototype.onsapspace=function(e){this.firePress({});};
return T;});
sap.ui.predefine('sap/ushell/ui/tile/TileBaseRenderer',['sap/ushell/resources'],function(r){"use strict";var T={};var t=r.i18n;
T.highlight=function(h,s){var i,a,e=jQuery.sap.encodeHTML(s).replace(/&#xa;/g,"<br>");if(h&&h.length&&h.length>0){for(i=0;i<h.length;i=i+1){a=new RegExp("("+jQuery.sap.encodeHTML(h[i]).replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")+")","gi");e=e.replace(a,"<b>$1</b>");}}return e;};
T.render=function(R,c){var i,I;R.write("<div");R.writeControlData(c);if(c.getTargetURL()){R.writeAttributeEscaped("data-targeturl",c.getTargetURL());}R.addClass("sapUshellTileBase");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellTileBaseHeader");R.writeClasses();R.write(">");R.write("<h3");R.addClass("sapUshellTileBaseTitle");R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("tileTypeListItem")+t.getText("TileDetails_lable")+t.getText("TileTitle_lable")+c.getTitle()});R.write(">");R.write(this.highlight(c.getHighlightTerms(),c.getTitle()||""));R.write("</h3>");if(c.getSubtitle()){R.write("<h4");R.addClass("sapUshellTileBaseSubtitle");R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("TileSubTitle_lable")+c.getSubtitle()});R.write(">");R.write(this.highlight(c.getHighlightTerms(),c.getSubtitle()));R.write("</h4>");}R.write("</div>");if(typeof(this.renderPart)==='function'){this.renderPart(R,c);}if(c.getIcon()){I=new sap.ui.core.Icon({src:c.getIcon()});I.addStyleClass("sapUshellTileBaseIcon");R.renderControl(I);}if(c.getInfo()||((typeof(this.getInfoPrefix)==='function'))&&this.getInfoPrefix(c)){R.write("<div");R.addClass("sapUshellTileBaseInfo");R.addClass(c.getInfoState()?"sapUshellTileBase"+c.getInfoState():"sapUshellTileBase"+sap.ushell.ui.tile.State.Neutral);R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("TileInfo_lable")+c.getInfo()});R.write(">");if(typeof(this.getInfoPrefix)==='function'){i=this.getInfoPrefix(c);R.writeEscaped(i);}if(c.getInfo()){if(i){R.write(", ");}R.write(this.highlight(c.getHighlightTerms(),c.getInfo()));}R.write("</div>");}R.write("</div>");};
return T;},true);
sap.ui.predefine('sap/ushell/ui/utils',["sap/ushell/EventHub"],function(E){"use strict";
function s(e){var r=new jQuery.Deferred(),w,c,t=0,f=0,a=0,p=[],b=[],d;function o(){a++;r.notify();}function g(h){b.push({entry:d,message:h});f++;r.notify();}var u=E.last("UserSettingsOpened")||{};Object.keys(u).forEach(function(i){var I=parseInt(i,10);c=e[I].onSave();c.done(o);d=e[I].title;c.fail(g);p.push(c);t++;});E.emit("UserSettingsOpened",null);w=jQuery.when.apply(null,p);w.done(function(){r.resolve();});r.progress(function(){if(f>0&&(f+a===t)){r.reject(b);}});return r.promise();}
return{saveUserPreferenceEntries:s};});
sap.ui.predefine('sap/ushell/ui5service/AppIsolationService',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","./_AppIsolationService/appisolationservice.class.factory"],function(S,a,b,d){"use strict";return d({serviceRegistry:S,serviceFactory:a,service:b});});
sap.ui.predefine('sap/ushell/ui5service/ShellUIService',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","./_ShellUIService/shelluiservice.class.factory"],function(S,a,b,d){"use strict";return d({serviceRegistry:S,serviceFactory:a,service:b});},true);
sap.ui.predefine('sap/ushell/ui5service/UserStatus',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","./_UserStatus/userstatus.class.factory"],function(S,a,b,d){"use strict";return d({serviceRegistry:S,serviceFactory:a,service:b});});
sap.ui.predefine('sap/ushell/utils',["sap/ui/core/theming/Parameters","sap/ui/thirdparty/URI","sap/ushell/utils/clone","sap/ushell/utils/type","sap/ui/Device"],function(P,U,c,t,D){"use strict";var u={};u.isArray=t.isArray;u.isPlainObject=t.isPlainObject;u.isDefined=t.isDefined;u.clone=c;
u.getMember=function(o,a){var p=a.split("."),n=o;if(!o){return undefined;}p.forEach(function(s){if(typeof n!=="object"){return undefined;}n=n[s.replace(/[|]/g,".")];});return n;};
u.setPerformanceMark=function(m,C){if(performance&&performance.mark){if(!C){C={};}if(C.bUseUniqueMark){if(C.bUseLastMark){performance.clearMarks(m);}else if(performance.getEntriesByName(m,"mark").length!=0){return;}}performance.mark(m);}};
u.setPerformanceMeasure=function(m){if(performance&&performance.measure){performance.measure(m);}};
u.addTime=function(i,I,e){if(!window["sap-ushell-startTime"]){window["sap-ushell-startTime"]=Date.now();}var s=window["sap-ushell-startTime"];e=e||Date.now();if(e<s){e=s+1;}jQuery.sap.measure.add("sap.ushell.fromStart."+i,I,s,e,e-s,e-s);};
u.Error=function(m,C){this.name="sap.ushell.utils.Error";this.message=m;jQuery.sap.log.error(m,null,C);};
u.Error.prototype=new Error();
u.localStorageSetItem=function(k,v,l){var E;try{localStorage.setItem(k,v);if(l){E=document.createEvent("StorageEvent");E.initStorageEvent("storage",false,false,k,"",v,"",localStorage);dispatchEvent(E);}}catch(e){jQuery.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.utils");}};
u.getLocalStorage=function(){return window.localStorage;};
u.getLocalStorageItem=function(k){return window.localStorage.getItem(k);};
u.generateUniqueId=function(T){var s,e,i;if(jQuery.isArray(T)){e=T;i=function(g){return e.indexOf(g)===-1;};}else{i=T;}do{s=jQuery.sap.uid();}while(!i(s));return s;};
u.reload=function(){location.reload();};
u.calculateOrigin=function(d){var o;if(d.origin){return d.origin;}if(d.protocol&&d.hostname){return d.protocol+"//"+d.hostname+(d.port?':'+d.port:'');}if(d.href){o=new U(d.href);return o.protocol()+"://"+o.hostname()+(o.port()?':'+o.port():'');}};
u.getPrivateEpcm=function(){if(window.external&&window.external&&typeof window.external.getPrivateEpcm!=="undefined"){return window.external.getPrivateEpcm();}return undefined;};
u.hasNativeNavigationCapability=function(){return u.isFeatureBitEnabled(1);};
u.hasNativeLogoutCapability=function(){return u.isFeatureBitEnabled(2);};
u.hasNavigationModeCapability=function(){return u.isFeatureBitEnabled(4);};
u.isFeatureBitEnabled=function(f){var F="0",p;p=u.getPrivateEpcm();if(p){try{F=p.getNwbcFeatureBits();jQuery.sap.log.debug("Detected epcm getNwbcFeatureBits returned feature bits: "+F);}catch(e){jQuery.sap.log.error("failed to get feature bit vector via call getNwbcFeatureBits on private epcm object",e.stack,"sap.ushell.utils");}}return(parseInt(F,16)&f)>0;};
u.isApplicationTypeEmbeddedInIframe=function(a){return a==="NWBC"||a==="TR"||a==="WCF";};
u.appendUserIdToUrl=function(p,s){var a=sap.ushell.Container.getService("UserInfo").getUser().getId(),S=s.indexOf("?")>=0?"&":"?";return s+S+p+"="+a;};
u.isNativeWebGuiNavigation=function(r){if(this.hasNativeNavigationCapability()&&r&&r.applicationType==="TR"){return true;}return false;};
u.Map=function(){this.entries={};};
u.Map.prototype.put=function(k,v){var o=this.get(k);this.entries[k]=v;return o;};
u.Map.prototype.containsKey=function(k){if(typeof k!=="string"){throw new u.Error("Not a string key: "+k,"sap.ushell.utils.Map");}return Object.prototype.hasOwnProperty.call(this.entries,k);};
u.Map.prototype.get=function(k){if(this.containsKey(k)){return this.entries[k];}};
u.Map.prototype.keys=function(){return Object.keys(this.entries);};
u.Map.prototype.remove=function(k){delete this.entries[k];};
u.Map.prototype.toString=function(){var r=['sap.ushell.utils.Map('];r.push(JSON.stringify(this.entries));r.push(')');return r.join('');};
u.getParameterValueBoolean=function(p,s){var a=jQuery.sap.getUriParameters(s).mParams&&jQuery.sap.getUriParameters(s).mParams[p],T=["true","x"],f=["false",""],v;if(!a||a.length===0){return undefined;}v=a[0].toLowerCase();if(T.indexOf(v)>=0){return true;}if(f.indexOf(v)>=0){return false;}return undefined;};
u.call=function(s,f,a){var m;if(a){setTimeout(function(){u.call(s,f,false);},0);return;}try{s();}catch(e){m=e.message||e.toString();jQuery.sap.log.error("Call to success handler failed: "+m,e.stack,"sap.ushell.utils");if(f){f(m);}}};
u.handleTilesVisibility=function(){u.getVisibleTiles();};
u.refreshTiles=function(){var e=sap.ui.getCore().getEventBus();e.publish("launchpad","refresTiles");};
u.setTilesNoVisibility=function(){var e=sap.ui.getCore().getEventBus();e.publish("launchpad","setTilesNoVisibility");};
u.getBasicHash=function(h){if(!u.validHash(h)){jQuery.sap.log.debug("Utils ; getBasicHash ; Got invalid hash");return false;}var o=sap.ushell.Container.getService("URLParsing"),s=o.parseShellHash(h);return s?s.semanticObject+"-"+s.action:h;};
u.validHash=function(h){return(h&&h.constructor===String&&jQuery.trim(h)!=="");};
u.handleTilesOpacity=function(m){var T,a,b,C=P.get("sapUshellTileBackgroundColor"),r=this.hexToRgb(C),j,d,R,e,s,f,o,p,g,h,i,k=sap.ushell.Container.getService("UserRecents");if(r){R="rgba("+r.r+","+r.g+","+r.b+",{0})";b=k.getAppsUsage();b.done(function(l){T=l.usageMap;j=jQuery('.sapUshellTile').not('.sapUshellTileFooter');var n=m.getProperty("/groups");m.setProperty('/animationRendered',true);for(i=0;i<j.length;i++){e=jQuery(j[i]);s=this.getBasicHash(e.find('.sapUshellTileBase').attr('data-targeturl'));if(s){d=this.convertToRealOpacity(T[s],l.maxUsage);f=R.replace("{0}",d);a=sap.ui.getCore().byId(e.attr('id'));o=a.getBindingContext();p=o.sPath.split('/');g=p[2];h=p[4];n[g].tiles[h].rgba=f;}}m.setProperty("/groups",n);}.bind(this));}};
u.convertToRealOpacity=function(a,m){var o=[1,0.95,0.9,0.85,0.8],O=Math.floor(m/o.length),i;if(!a){return o[0];}if(!m){return o[o.length-1];}i=Math.floor((m-a)/O);return i<o.length?o[i]:o[o.length-1];};
u.getCurrentHiddenGroupIds=function(m){var l=sap.ushell.Container.getService("LaunchPage"),g=m.getProperty('/groups'),h=[],G,a,b;for(a=0;a<g.length;a++){b=g[a]?g[a].isGroupVisible:true;if(g[a].object){G=l.getGroupId(g[a].object);}if(!b&&G!==undefined){h.push(G);}}return h;};
u.hexToRgb=function(h){var i=!h||h[0]!='#'||(h.length!=4&&h.length!=7),r;h=!i&&h.length===4?'#'+h[1]+h[1]+h[2]+h[2]+h[3]+h[3]:h;r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null;};
u.getFormFactor=function(){var s=sap.ui.Device.system;if(s.desktop){return s.SYSTEMTYPE.DESKTOP;}if(s.tablet){return s.SYSTEMTYPE.TABLET;}if(s.phone){return s.SYSTEMTYPE.PHONE;}};
u.getVisibleTiles=function(){var n=document.body.clientHeight,C=sap.ui.getCore().byId("dashboardGroups"),N=sap.ui.getCore().byId("viewPortContainer"),g,a,e,b,d,f,T,h,i,j,k,s=jQuery('#shell-hdr').height(),l=[],G,I,v=[],E=sap.ui.getCore().getEventBus(),m,o,p,q;if(window.document.hidden){E.publish("launchpad","onHiddenTab");}if(C&&C.getGroups()&&N){G=jQuery(C.getDomRef());I=G?G.is(":visible"):false;m=C.getGroups();for(g=0;g<m.length;g=g+1){b=m[g];d=b.getTiles();f=b.getLinks();o=[d,f];for(e=0;e<o.length;e++){p=o[e];if(p){for(a=0;a<p.length;a++){T=p[a];if(!I||window.document.hidden){l.push(T);}else{h=jQuery(T.getDomRef());i=h.offset();if(i){j=h.offset().top;k=j+h.height();q=b.getVisible()&&(k>s-300)&&(j<n+300);if(q){v.push({oTile:u.getTileModel(T),iGroup:g,bIsExtanded:(k>s)&&(j<n)?false:true});}else if(v.length>0){E.publish("launchpad","visibleTilesChanged",v);return l;}l.push(T);}}}}}}}if(v.length>0){E.publish("launchpad","visibleTilesChanged",v);}return l;};
u.getTileModel=function(a){var b=a.getBindingContext();return b.getObject()?b.getObject():null;};
u.getTileObject=function(a){var b=a.getBindingContext();return b.getObject()?b.getObject().object:null;};
u.addBottomSpace=function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible');var l=j.last(),h=jQuery(".sapUshellShellHead > div").height(),a=l.parent().height(),g=parseInt(l.find(".sapUshellContainerTitle").css("margin-top"),10),b=parseInt(jQuery('.sapUshellDashboardGroupsContainer').css("padding-bottom"),10),n;if(j.length===1){n=0;}else{n=jQuery(window).height()-h-a-g-b;n=(n<0)?0:n;}jQuery('.sapUshellDashboardGroupsContainer').css("margin-bottom",n+"px");};
u.calcVisibilityModes=function(g,p){var i=true,I=true,l=g.pendingLinks&&g.pendingLinks.length?g.pendingLinks:g.links,h=u.groupHasVisibleTiles(g.tiles,l);if(!h&&(!p||(g.isGroupLocked)||(g.isDefaultGroup)||D.system.phone||(D.system.tablet&&!D.system.desktop))){i=false;}if(!h&&!p){I=false;}return[i,I];};
u.groupHasVisibleTiles=function(g,a){var v=false,b,d,e=!g?[]:g,l=!a?[]:a;e=e.concat(l);if(!e.length){return false;}for(b=0;b<e.length;b=b+1){d=e[b];if(d.isTileIntentSupported){v=true;break;}}return v;};
u.invokeUnfoldingArrayArguments=function(f,A){var b=this,d,o,p,r,e;if(!jQuery.isArray(A[0])){return f.apply(this,A);}d=A[0];if(d.length===0){return new jQuery.Deferred().resolve([]).promise();}o=new jQuery.Deferred();p=[];r=[];e=new jQuery.Deferred().resolve();d.forEach(function(n,i){if(!jQuery.isArray(n)){jQuery.sap.log.error("Expected Array as nTh Argument of multivalue invokation: first Argument must be array of array of arguments: single valued f(p1,p2), f(p1_2,p2_2), f(p1_3,p2_3) : multivalued : f([[p1,p2],[p1_2,p2_2],[p1_3,p2_3]]");throw new Error("Expected Array as nTh Argument of multivalue invokation: first Argument must be array of array of arguments: single valued f(p1,p2), f(p1_2,p2_2), f(p1_3,p2_3) : multivalued : f([[p1,p2],[p1_2,p2_2],[p1_3,p2_3]]");}var g=f.apply(b,n),h=new jQuery.Deferred();g.done(function(){var a=Array.prototype.slice.call(arguments);r[i]=a;h.resolve();}).fail(h.reject.bind(h));p.push(h.promise());e=jQuery.when(e,h);});jQuery.when.apply(jQuery,p).done(function(){o.resolve(r);}).fail(function(){o.reject("failure");});return o.promise();};
u.isClientSideNavTargetResolutionEnabled=function(){var d=true,l;if(jQuery.sap.storage===undefined){l=window.localStorage.getItem("targetresolution-client");l=(l===false||l==="false"||l==="")?false:true;}else{l=jQuery.sap.storage(jQuery.sap.getObject("jQuery.sap.storage.Type.local"),"targetresolution").get("client");}if(l===""||l===false||u.getParameterValueBoolean("sap-ushell-nav-cs")===false){return false;}return d;};
u._getCurrentDate=function(){return new Date();};
u._convertToUTC=function(d){return Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds());};
u.formatDate=function(C){var i,n,T,d,h,m;i=u._convertToUTC(new Date(C));n=u._convertToUTC(u._getCurrentDate());T=n-i;d=parseInt(T/(1000*60*60*24),10);if(d>0){if(d===1){return sap.ushell.resources.i18n.getText("time_day",d);}return sap.ushell.resources.i18n.getText("time_days",d);}h=parseInt(T/(1000*60*60),10);if(h>0){if(h===1){return sap.ushell.resources.i18n.getText("time_hour",h);}return sap.ushell.resources.i18n.getText("time_hours",h);}m=parseInt(T/(1000*60),10);if(m>0){if(m===1){return sap.ushell.resources.i18n.getText("time_minute",m);}return sap.ushell.resources.i18n.getText("time_minutes",m);}return sap.ushell.resources.i18n.getText("just_now");};
u.toExternalWithParameters=function(s,a,p){var C=sap.ushell.Container.getService("CrossApplicationNavigation"),T={},o={},i,b,d;T.target={semanticObject:s,action:a};if(p&&p.length>0){o={};for(i=0;i<p.length;i++){b=p[i].Key;d=p[i].Value;o[b]=d;}T.params=o;}C.toExternal(T);};
u.moveElementInsideOfArray=function(a,n,b){if(!u.isArray(a)||n===undefined||b===undefined){throw"Incorrect input parameters passed";}if(n>=a.length||b>=a.length||b<0||n<0){throw"Index out of bounds";}var e=a.splice(n,1)[0];a.splice(b,0,e);return a;};
u.shallowMergeObject=function(T){return Array.prototype.slice.call(arguments,1,arguments.length).map(function(s){return{sourceObject:s,properties:Object.keys(s)};}).reduce(function(r,s){s.properties.forEach(function(p){r[p]=s.sourceObject[p];});return r;},T);};
u.getLocationHref=function(){return window.location.href;};
u.isNotificationsEnabled=function(){var C=window["sap-ushell-config"],n=false;n=jQuery.sap.getObject("services.Notifications.config.enabled",undefined,C);return(n&&n===true);};
u.generateLocalStorageKey=function(p,i){var n=i.length;if(n===0){throw new Error("At least one id should be provided when generating the local storage key");}var s="$";if(n===2){s="#";}else if(n>2){s="@"+n+"@";}return p+s+i.join(":");};
return u;},true);
sap.ui.predefine('sap/ushell/utils/HttpClient',["sap/ushell/utils/_HttpClient/internals","sap/ushell/utils/_HttpClient/factory"],function(i,f){"use strict";return f.bind(null,i.getHttpRequestWrapper,i.executeRequest);},true);
sap.ui.predefine('sap/ushell/utils/WindowUtils',["sap/base/Log","sap/ui/Device","sap/ui/util/isCrossOriginURL"],function(L,D,i){"use strict";var W={};
W.hasInvalidProtocol=function(U){var u=document.createElement("a");u.setAttribute("href",U);if(u.protocol==="javascript:"){return true;}return false;};
W.isCrossOriginUrl=function(u){return i(u);};
W.openURL=function(U,w,a,s){var S=(s===undefined)?true:s,I=this.isCrossOriginUrl(U);a=a||"";if(S&&this.hasInvalidProtocol(U)){L.fatal("Tried to open a URL with an invalid protocol");throw new Error("Tried to open a URL with an invalid protocol");}if(D.browser.msie){if(a!==undefined&&a!==null){L.warning("WindowUtils.js - 'windowFeatures' is ignored for new windows in Internet Explorer.");}var n=window.open("about:blank",w);if(I){n.opener=null;}n.location.href=U;return I?true:n;}if(I){if(a.toLowerCase().indexOf("noopener")===-1){if(a!==""){a+=",";}a+="noopener";}if(a.toLowerCase().indexOf("noreferrer")===-1){a+=",noreferrer";}window.open(U,w,a);return true;}return window.open(U,w,a);};
return W;});
sap.ui.predefine('sap/ushell/utils/XHttpClient',["sap/ushell/utils/_HttpClient/internals","sap/ushell/utils/_HttpClient/factory"],function(i,f){"use strict";return f.bind(null,i.getHttpRequestWrapper,i.executeRequestWithCsrfToken.bind(null,i.executeRequest,i.csrfTokenWriteToCache,i.csrfTokenGet,i.csrfTokenFetch,i.csrfTokenAddToRequestHeader,i.csrfTokenExtractFromResponseHeader,i.isSafeHttpMethod));},true);
sap.ui.predefine('sap/ushell/utils/_HttpClient/factory',[],function(){"use strict";return function HttpClient(g,r,b,c){if(!/String/.test(Object.prototype.toString.call(b))){throw"IllegalArgumentError: `sBaseUrl` should be a string";}return Object.create(null,{post:{value:g("POST",r,b,c)},get:{value:g("GET",r,b,c)},put:{value:g("PUT",r,b,c)},delete:{value:g("DELETE",r,b,c)},options:{value:g("OPTIONS",r,b,c)}});};});
sap.ui.predefine('sap/ushell/utils/_HttpClient/internals',[],function(){"use strict";var c={token:null},C=n.bind(null,c),f=l.bind(null,c),a=m.bind(null,c),e=g.bind(null,XMLHttpRequest),b=q.bind(null,e,t);return Object.create(null,{_executeRequest:{value:g},executeRequest:{value:e},executeRequestWithCsrfToken:{value:d},isSafeHttpMethod:{value:j},isValidHttpMethod:{value:k},summariseResponse:{value:s},processResponse:{value:p},getHttpRequestWrapper:{value:h},containsCSRFTokenHeaderEntry:{value:i},csrfTokenReadFromCache:{value:f},csrfTokenWriteToCache:{value:a},csrfTokenIsCached:{value:C},_csrfTokenFetch:{value:q},csrfTokenFetch:{value:b},_csrfTokenGet:{value:o},csrfTokenGet:{value:o.bind(null,C,f,a,b)},csrfTokenAddToRequestHeader:{value:r},csrfTokenExtractFromResponseHeader:{value:t}});
function d(E,u,v,w,x,y,I,R,U,z){function A(D){return(D&&(D.status===403)&&(y(D).toLowerCase()==="required"));}var B;if(!/Function/.test(Object.prototype.toString.call(E))||!/Function/.test(Object.prototype.toString.call(u))||!/Function/.test(Object.prototype.toString.call(w))||!/Function/.test(Object.prototype.toString.call(v))||!/Function/.test(Object.prototype.toString.call(x))||!/Function/.test(Object.prototype.toString.call(y))||!/Function/.test(Object.prototype.toString.call(I))){throw new Error("DependencyInjectionError: one or more of the injected dependencies is invalid");}if(!/String/.test(Object.prototype.toString.call(R))||!/String/.test(Object.prototype.toString.call(U))){throw new Error("IllegalArgumentError: one or more of the arguments is invalid");}if(!z){z={};}return new Promise(function(D,F){function G(H){jQuery.sap.log.error(H,null,"sap.ushell.util.HttpClient");F(H);}if(!I(R)){v(U).then(function(H){B=x(H,z);return E(R,U,B);}).then(function(H){D(H);}).catch(function(H){if(A(H)){w(U).then(function(J){B=x(J,z);return E(R,U,B);}).then(function(J){D(J);}).catch(G);}else{G(H);}});}else{B=x("fetch",z);E(R,U,B).then(function(H){var J=y(H);if(J){u(J);}D(H);}).catch(G);}});}
function g(F,R,u,v){var H,w,x;if(!/Function/.test(Object.prototype.toString.call(F))){throw new Error("DependencyInjectionError: one or more of the injected dependencies is invalid");}if(!/String/.test(Object.prototype.toString.call(R))||!/String/.test(Object.prototype.toString.call(u))){throw new Error("IllegalArgumentException: one or more of the arguments is invalid");}x=new F();if(/[a-z]/.test(R)){R=R.toUpperCase();}if(v){H=!v.headers?[]:Object.keys(v.headers).map(function(y){return{name:y,value:this[y]};},v.headers);w=v.data;}else{H=[];}return new Promise(function(y,z){["load","error"].forEach(function(E){x.addEventListener(E,p.bind(null,x,y,z));});x.open(R,u);H.forEach(function(A){x.setRequestHeader(A.name,A.value);});x.send(JSON.stringify(w));});}
function h(M,H,B,u){if(!/String/.test(Object.prototype.toString.call(M))||!/Function/.test(Object.prototype.toString.call(H))||!/String/.test(Object.prototype.toString.call(B))){throw new Error("IllegalArgumentError: one or more of the arguments is invalid");}return function(P,S){return H(M,B.replace(/\/$/,"")+"/"+P.replace(/^\//,""),jQuery.extend({},u,S));};}
function p(x,O,E){var R;if(!x||!/Number/.test(Object.prototype.toString.call(x.status))||!/Function/.test(Object.prototype.toString.call(x.getAllResponseHeaders))){throw new Error("IllegalArgumentError: invalid XMLHttpRequest instance");}R=s(x);if(x.status<200||x.status>299){E(R);}else{O(R);}}
function s(x){return{status:x.status,statusText:x.statusText,responseText:x.responseText,responseHeaders:x.getAllResponseHeaders().split(/\r\n/g).filter(function(I){return I.length>0;}).map(function(H){var P=H.split(":");return{name:P[0].trim(),value:P[1].trim()};})};}
function i(H){var u=H["x-csrf-token"]||H["X-CSRF-TOKEN"];return!!u&&/String/.test(Object.prototype.toString.call(u));}
function j(H){switch(H){case"HEAD":case"GET":case"OPTIONS":return true;case"POST":case"PUT":case"DELETE":return false;default:throw new Error("IllegalArgumentError: '"+H+"' is not a supported request method");}}
function k(H){switch(H){case"HEAD":case"GET":case"OPTIONS":case"POST":case"PUT":case"DELETE":return true;default:throw new Error("IllegalArgumentError: '"+H+"' is not a supported request method");}}
function l(u){return u.token;}
function m(u,N){u.token=N;}
function n(u){return u.token?true:false;}
function o(u,v,w,x,U){if(!/Function/.test(Object.prototype.toString.call(u))||!/Function/.test(Object.prototype.toString.call(v))||!/Function/.test(Object.prototype.toString.call(w))||!/Function/.test(Object.prototype.toString.call(x))){throw new Error("DependencyInjectionError: one or more of the injected dependencies is invalid");}if(!/String/.test(Object.prototype.toString.call(U))){throw new Error("IllegalArgumentError: one or more of the arguments is invalid");}return new Promise(function(y,z){if(u()){y(v());}else{x(U).then(function(A){w(A);y(A);}).catch(function(E){z(E);});}});}
function q(E,u,U){if(!/Function/.test(Object.prototype.toString.call(E))||!/Function/.test(Object.prototype.toString.call(u))){throw new Error("DependencyInjectionError: one or more of the injected dependencies is invalid");}if(!/String/.test(Object.prototype.toString.call(U))){throw new Error("IllegalArgumentError: one or more of the arguments is invalid");}return E("OPTIONS",U,{headers:{"x-csrf-token":"fetch"}}).then(function(R){return u(R);});}
function r(H,u){var E,O={"x-csrf-token":H};if(!/String/.test(Object.prototype.toString.call(H))||!/object Object/.test(Object.prototype.toString.call(u))){throw new Error("IllegalArgumentError: one or more of the arguments is invalid");}E=jQuery.extend(true,{},u);if(!E.headers){E.headers=O;}else{jQuery.extend(E.headers,O);}return E;}
function t(R){var u;if(!/Array/.test(Object.prototype.toString.call(R.responseHeaders))){return undefined;}u=R.responseHeaders.filter(function(H){return H.name==="x-csrf-token";})[0];return u&&u.value?u.value:undefined;}
});
sap.ui.predefine('sap/ushell/utils/clone',["sap/ushell/utils/type"],function(t){"use strict";
function c(d){function a(o){return t.isPlainObject(o)?{}:[];}function i(v){return t.isPlainObject(v)||t.isArray(v);}function g(v){return t.isPlainObject(v)?Object.keys(v).map(function(k){return{key:k,value:v[k]};}):v.map(function(I){return{value:I};});}function b(I,v){var A=t.isPlainObject(v)?function(I,v){v[I.key]=I.value;}:function(I,v){v.push(I.value);};A(I,v);}function s(I,h,q){h.push(I.length);Array.prototype.push.apply(q,I);}if(!i(d)){return d;}var C=a(d);var e=[C];var r=[];var R=[];var V=new WeakMap();V.set(d,C);s(g(d),R,r);while(e.length>0){var T=e.shift();var f=R.shift();r.splice(0,f).forEach(function(I){var p=I.value;if(!i(p)){b(I,T);return;}var o=p;var A=V.get(o);if(A){b({key:I.key,value:A},T);return;}var v=a(o);V.set(o,v);b({key:I.key,value:v},T);e.push(v);s(g(o),R,r);});}return C;}
return c;},false);
sap.ui.predefine('sap/ushell/utils/type',[],function(){"use strict";
function i(v){return Object.prototype.toString.apply(v)==="[object Array]";}
function a(v){return Object.prototype.toString.apply(v)==="[object Object]";}
function b(v){return typeof v!=="undefined";}
return{isArray:i,isPlainObject:a,isDefined:b};},false);
/*!
 * Copyright (c) 2009-2017 SAP SE, All Rights Reserved
 *
 * Tool Area control used in the FLP extensibility
 * Can be supplied with ToolAreaItems for display
 *
 * Uses sap/ushell/EventHub for publishing its onInit state once it was created 
 * via the event: "ToolAreaCreated"
 */
sap.ui.predefine('sap/ushell/ui/shell/ToolArea',['jquery.sap.global','sap/ushell/library','sap/ui/Device','sap/ushell/EventHub'],function(q,l,D,E){"use strict";
var T=sap.ui.core.Control.extend("sap.ushell.ui.shell.ToolArea",{
metadata:{properties:{size:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'56px'},textVisible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{toolAreaItems:{type:"sap.ushell.ui.shell.ToolAreaItem",multiple:true}}},
renderer:{render:function(r,t){if(!t.getToolAreaItems().length){return;}else{var i=t.getId();r.write("<div");r.writeControlData(t);r.writeAttribute("class","sapUshellToolArea");r.write(">");r.write("<div id='",i,"-cntnt' class='sapUshellToolAreaContainer'>");this.renderToolAreaItems(r,t);r.write("</div>");}},renderToolAreaItems:function(r,t){var I=t.getToolAreaItems(),i;for(i=0;i<I.length;i++){r.write("<div");r.addClass("sapUshellToolAreaContent");if(I[i].getSelected()){r.addClass("sapUshellToolAreaItemSelected");}r.writeClasses();r.write(">");r.renderControl(I[i]);r.write("</div>");r.write("<div class='sapUshellToolAreaContentSeparator'></div>");}}}
});
T.prototype.init=function(){D.media.attachHandler(this._setSize,this);D.resize.attachHandler(this._setSize,this);E.emit("ToolAreaCreated");};
T.prototype.addToolAreaItem=function(t){var s=!!this.getToolAreaItems.length;if(!this.getVisible()){this.setVisible(true);}this.addAggregation("toolAreaItems",t,s);if(this.getDomRef()){var r=sap.ui.getCore().createRenderManager();r.renderControl(t);r.flush(this.getDomRef());r.destroy();}};
T.prototype.removeToolAreaItem=function(i){var t=this.getToolAreaItems(),o=typeof i==='object'?i:t[i];this.removeAggregation("toolAreaItems",o);if(this.getToolAreaItems().length<1){this.setVisible(false);}};
T.prototype.onBeforeRendering=function(){var I=this.getToolAreaItems(),i;this._bRenderText=I.length;for(i=0;i<I.length;i++){if(!I[i].getText()){this._bRenderText=false;}}};
T.prototype._setSize=function(){var s=q(".sapUshellToolArea").width()/16;if(!this._bRenderText){this.setProperty("textVisible",false,true);s=q(".sapUshellToolAreaItm").height()/16;this.$().toggleClass("sapUshellToolAreaTextHidden",true);}this.setProperty("size",s+"rem",true);};
T.prototype.onAfterRendering=function(){if(this.getToolAreaItems().length){this.setVisible(true);this._setSize();}};
return T;},true);
//Copyright (c) 2013 SAP AG, All Rights Reserved
sap.ui.predefine('sap/ushell/components/tiles/indicatorDual/DualTile.view',['sap/ui/core/mvc/JSView','sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics','sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil','sap/ushell/components/tiles/sbtilecontent'],function(J,d,s,a){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorDual.DualTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorDual.DualTile";},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var t=this;t.tileData;t.oGenericTileData={};sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.getViewData().chip.configuration.getParameterValueAsString("tileConfiguration"),t.getViewData().chip.preview.isEnabled(),function(g){t.oConfig=g;});t.tileType=t.oConfig.TILE_PROPERTIES.tileType;t.oNumericContent=new sap.m.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:"{/isFormatterValue}",truncateValueTo:5,valueColor:"{/valueColor}",nullifyValue:false});t.oLeftTileContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});switch(t.tileType){case"DT-CM":var C=new sap.suite.ui.microchart.ComparisonMicroChartData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oComparisionContent=new sap.suite.ui.microchart.ComparisonMicroChart({size:"{/size}",scale:"{/scale}",data:{template:C,path:"/data"}});t.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oComparisionContent});break;case"DT-CT":var C=new sap.suite.ui.microchart.ComparisonMicroChartData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oContributionContent=new sap.suite.ui.microchart.ComparisonMicroChart({size:"{/size}",scale:"{/scale}",data:{template:C,path:"/data"}});t.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oContributionContent});break;case"DT-TT":var b=function(n){return new sap.suite.ui.microchart.AreaMicroChartItem({color:"Good",points:{path:"/"+n+"/data",template:new sap.suite.ui.microchart.AreaMicroChartPoint({x:"{day}",y:"{balance}"})}});};var e=function(n){return new sap.suite.ui.microchart.AreaMicroChartLabel({label:"{/"+n+"/label}",color:"{/"+n+"/color}"});};var f=new sap.suite.ui.microchart.AreaMicroChart({width:"{/width}",height:"{/height}",size:"{/size}",target:b("target"),innerMinThreshold:b("innerMinThreshold"),innerMaxThreshold:b("innerMaxThreshold"),minThreshold:b("minThreshold"),maxThreshold:b("maxThreshold"),chart:b("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:e("firstXLabel"),lastXLabel:e("lastXLabel"),firstYLabel:e("firstYLabel"),lastYLabel:e("lastYLabel"),minLabel:e("minLabel"),maxLabel:e("maxLabel")});t.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",content:f});break;case"DT-AT":var B=new sap.suite.ui.microchart.BulletMicroChartData({value:"{value}",color:"{color}"});var o=new sap.suite.ui.microchart.BulletMicroChart({size:sap.m.Size.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:B,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});t.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:o});break;}t.oGenericTile=new sap.m.GenericTile({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[t.oLeftTileContent,t.oRightContent]});t.oGenericTileModel=new sap.ui.model.json.JSONModel();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.xhrlogon',[],function(){"use strict";var m={};var b={};
/*!
 * SAP XHR Library v2.1.0
 * (c) Copyright 2013-2019 SAP SE or an SAP affiliate company.
*/
(function(f){if(typeof b==="object"&&typeof m!=="undefined"){m.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.xhrlib=f()}})(function(){var d,m,b;return(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(r,m,b){"use strict";var C;function a(x,c,u,e,f,p){this.filters=[];this.xhr=x;this.method=c;this.url=u;this.async=!!e;if(f!==undefined){this.username=f;}if(p!==undefined){this.password=p;}}m.exports=a;C=a.prototype;C._process=function(c){var f,e,i,n;f=this.filters;n=f.length;for(i=0;i<n;++i){e=f[i];if(typeof e[c]==="function"){e[c](this);}}};C.aborting=function(){this._process("aborting");};C.aborted=function(){this._process("aborted");};C.opening=function(){this._process("opening");};C.opened=function(){this._process("opened");};C.sending=function(){this._process("sending");};C.sent=function(){this._process("sent");};C.reopening=function(){this._process("reopening");};C["catch"]=function(e){var f,i,n;f=this.filters;n=f.length;for(i=0;i<n;++i){if(typeof f[i]["catch"]==="function"){try{f[i]["catch"](e,this);e=null;break;}catch(c){e=c;}}}if(e){throw e;}};},{}],2:[function(r,m,b){"use strict";var C;var a=r("./Channel.js");var I=r("./IgnoreList.js");function c(){this._filterFactories=[];this.ignore=new I();}m.exports=c;C=c.prototype;function e(x){var t;t=typeof x;return(t==="function")||((t==="object")&&(x!==null)&&(typeof x.addFilter==="function"));}function f(x,g){if(typeof x==="function"){x(g);}else{x.addFilter(g);}}C.reset=function(){this._filterFactories=[];this.ignore=new I();};C.addFilterFactory=function(g){var h,j,i,n;if(!e(g)){throw new TypeError("addFilterFactory expects a FilterFactory or a function parameter");}j=this._filterFactories;h=true;n=j.length;for(i=0;i<n;++i){if(j[i]===g){h=false;break;}}if(h){this._filterFactories.push(g);}};C.removeFilterFactory=function(g){var h,i,n;h=this._filterFactories;n=h.length;for(i=0;i<n;++i){if(h[i]===g){h.splice(i,1);break;}}};C.getFilterFactories=function(){return this._filterFactories.slice();};C.create=function(x,g,u,h,j,p){var k,l,i,n;k=new a(x,g,u,h,j,p);if(!this.ignore.ignored(u)){l=this._filterFactories;n=l.length;for(i=0;i<n;++i){f(l[i],k);}}return k;};},{"./Channel.js":1,"./IgnoreList.js":7}],3:[function(r,m,b){"use strict";var u=r("./util.js");var C,o;var L={error:10,warn:20,info:30,debug:40};if(window.console&&typeof window.console.log==="function"){o={error:console.error?console.error:console.log,warn:console.warn?console.warn:console.log,info:console.log,debug:console.log};}else{o={};o.error=o.warn=o.info=o.debug=function(){};}function a(n,l){this.name=n;this.setLevel(l);}m.exports=a;C=a.prototype;C.format=function(c,s){return u.time()+" "+this.name+" ["+s.toUpperCase()+"] "+c;};C.setLevel=function(l){if(l){l=(typeof l==="number"?~~l:L[l]);}this.level=l||L.warn;};C.error=function(c){if(this.level>=L.error){o.error(this.format(c,"error"));}};C.warning=function(c){if(this.level>=L.warn){o.warn(this.format(c,"warn"));}};C.info=function(c){if(this.level>=L.info){o.info(this.format(c,"info"));}};C.debug=function(c){if(this.level>=L.debug){o.debug(this.format(c,"debug"));}};},{"./util.js":20}],4:[function(r,m,b){"use strict";var e=r("./events.js");var E=r("./EventHandlers.js");var D;var A="authenticationrequired";function a(){this.prefix="xhrlibFrame"+Date.now().toString(36);this.handlers=new E([A]);}m.exports=a;D=a.prototype;a.frameCounter=0;D.addEventListener=function(t,c){this.handlers.add(t,c);};D.removeEventListener=function(t,c){this.handlers.remove(t,c);};D.dispatchAuthenticationRequired=function(){var s=this,c=e.createEvent(A);setTimeout(function(){s.handlers.dispatch(c);},0);};D.create=function(){var f,o,s=this;this.destroy();if(this.handlers.hasSubscribers(A)){this.dispatchAuthenticationRequired();return null;}a.frameCounter+=1;f=this.prefix+a.frameCounter;this.frame=document.createElement("iframe");this.frame.id=f;this.frame.style.display="none";if(document.readyState==="complete"){document.body.appendChild(this.frame);}else{o=function(){if(document.readyState==="complete"){document.body.appendChild(s.frame);e.removeEventListener(document,"readystatechange",o);}};e.addEventListener(document,"readystatechange",o);}return this.frame;};D.destroy=function(){if(this.frame){document.body.removeChild(this.frame);this.frame=null;}};D.show=function(f){var c=this.frame;if(!f&&this.handlers.hasSubscribers(A)){this.dispatchAuthenticationRequired();}else if(c){c.style.display="block";c.style.position="absolute";c.style.top=0;c.style.left=0;c.style.width="100%";c.style.height="100%";c.style.zIndex=99999;c.style.border=0;c.style.background="white";setTimeout(function(){try{c.contentWindow.focus();}catch(g){void g;}},100);}};},{"./EventHandlers.js":5,"./events.js":16}],5:[function(r,m,b){"use strict";var E;var a=r("./Log.js").logger;function c(e){var i,n;n=e.length;for(i=0;i<n;++i){this["_"+e[i]]=[];}this.subscriptions={};this.bufferedEvents=[];}m.exports=c;function f(x){return x&&(typeof x==="function"||typeof x.handleEvent==="function");}function g(x,e,l){try{if(typeof x==="function"){return x.call(e.currentTarget,e);}else{return x.handleEvent(e);}}catch(h){if(l){l.warning("Exception in "+e.type+" event handler: "+h.message+"\n"+h.stack);}throw h;}}c.isHandler=f;c.fireEvent=g;E=c.prototype;E.add=function(t,e){var j,h,i,n;if(!f(e)){throw new TypeError("Invalid event handler");}h=this["_"+t];if(h){j=true;n=h.length;for(i=0;i<n;++i){if(h[i]===e){j=false;break;}}if(j){h.push(e);}}return j;};E.remove=function(t,e){var h,i,n,j=false;if(f(e)){h=this["_"+t];if(h){n=h.length;for(i=0;i<n;++i){if(h[i]===e){j=true;if(n===1){this["_"+t]=[];}else{h.splice(i,1);}break;}}}}return j;};E.dispatch=function(e){var i,n,t=e.type,h=this["_"+t];if(!h||!h.length){return;}if(this.suspend){this.bufferedEvents.push(e);}else{h=h.slice();n=h.length;for(i=0;i<n;++i){g(h[i],e,a);}}};E.clearEvents=function(){this.bufferedEvents=[];};E.releaseEvents=function(){var k,n,e;e=this.bufferedEvents;n=e.length;if(n>0){this.clearEvents();for(k=0;k<n;++k){this.dispatch(e[k]);}}};E.hasSubscribers=function(t){var h=this["_"+t];return(h&&h.length>0);};E.subscribed=function(t){return(this.subscriptions[t]?true:false);};E.subscribe=function(t){this.subscriptions[t]=true;};E.unsubscribe=function(t){delete this.subscriptions[t];};},{"./Log.js":8}],6:[function(r,m,b){"use strict";var D=r("./DefaultLogonFrameProvider.js");var L=r("./LogonManager.js");var X=r("./XHRLogonManager.js");var x=r("./Log.js").logger;var U=r("./UrlObject.js");var a=r("./UrlTimeout.js");var f,F;function c(){x.debug("Creating FrameLogonManager");this._lfp=new D();this._timeout=new a(c.defaultTimeout);}m.exports=c;F=c.prototype;c.defaultTimeout=600;c.getInstance=function(n){if(!f&&!n){f=new c();}return f;};c.start=function(){c.getInstance().start();};c.shutdown=function(){if(f){f.shutdown();f=null;}};Object.defineProperties(F,{logonFrameProvider:{get:function(){return this._lfp;},set:function(l){if(l){this._lfp=l;}else{this._lfp=new D();}}}});F.start=function(){var l=L.getInstance();l.addEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.addEventListener(L.LogonEvent.LOGON_FAILED,this);l.registerAuthHandler(X.logonScheme(X.Scheme.IFRAME),this);};F.shutdown=function(){var l=L.getInstance();this.cancelLogon();l.removeEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.removeEventListener(L.LogonEvent.LOGON_FAILED,this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.IFRAME),this);};F.getTimeout=function(u){return this._timeout.getTimeout(u);};F.setTimeout=function(u,v){this._timeout.setTimeout(u,v);};F.getFrameLoadHandler=function(p,e,t){var l,g;t=t||this.defaultTimeout;l=function(){if(g){clearTimeout(g);}g=setTimeout(function(){p.show();},t);};return l;};F.onLogon=function(e){var u,p,g,t;this.onLogonEnd();x.debug("Processing iframe logon for realm "+e.realm);t=this.getTimeout(e.channel.url);u=new U(e.channel.url);u.setParameter("xhr-logon","iframe");p=this.logonFrameProvider;g=p.create();if(g){if(!g.onload){g.onload=this.getFrameLoadHandler(p,g.id,t);}g.xhrTimeout=t;g.src=u.href;}this.pending={provider:p,realm:e.realm};};F.onLogonEnd=function(e){if(this.pending&&(!arguments.length||e===this.pending.realm)){this.pending.provider.destroy();this.pending=undefined;}};F.cancelLogon=function(){if(this.pending){x.debug("Cancelling logon for realm "+this.pending.realm);L.getInstance().abortLogon(this.pending.realm);this.onLogonEnd(this.pending.realm);}};F.handleEvent=function(e){var g;switch(e.type){case L.LogonEvent.LOGON:g=e.request;if(g){this.onLogon(g);return true;}break;case L.LogonEvent.LOGON_COMPLETE:this.onLogonEnd(e.response.realm);break;case L.LogonEvent.LOGON_FAILED:this.onLogonEnd(e.response.realm);break;}return false;};},{"./DefaultLogonFrameProvider.js":4,"./Log.js":8,"./LogonManager.js":9,"./UrlObject.js":11,"./UrlTimeout.js":12,"./XHRLogonManager.js":15}],7:[function(r,m,b){"use strict";var I;function a(){this.clear();}m.exports=a;I=a.prototype;I.add=function(c){switch(typeof c){case"string":this.p.push(c);break;case"object":if(c instanceof RegExp){this.r.push(c);}else{throw new TypeError("Unsupported ignore rule type");}break;case"function":this.f.push(c);break;default:throw new TypeError("Unsupported ignore rule type");}this.empty=false;};I.ignored=function(i){var c=false;if(!this.empty){c=this._prefix(i)||this._regexp(i)||this._function(i);}return c;};I.clear=function(){this.empty=true;this.p=[];this.r=[];this.f=[];};I._prefix=function(i){var f,k,n,c;if(!i){return false;}c=false;f=this.p;n=f.length;for(k=0;k<n;++k){if(i.startsWith(f[k])){c=true;break;}}return c;};I._regexp=function(i){var f,k,n,c;c=false;f=this.r;n=f.length;for(k=0;k<n;++k){if(f[k].test(i)){c=true;break;}}return c;};I._function=function(i){var f,k,n,c;c=false;f=this.f;n=f.length;for(k=0;k<n;++k){try{if(f[k](i)){c=true;break;}}catch(e){}}return c;};},{}],8:[function(r,m,b){"use strict";var C=r("./ConsoleLogger.js");var a,c,l=["error","warning","info","debug"];c=new C("sap.xhrlib");function L(e){this.logger=e;}m.exports=L;function h(x,e){var i,n=e.length;for(i=0;i<n;++i){if(typeof x[e[i]]!=="function"){return false;}}return true;}function f(x){return(x&&(typeof x==="object")&&h(x,l));}Object.defineProperty(L,"logger",{get:function(){return a;},set:function(x){if(!x){a.logger=c;}else if(f(x)){a.logger=x;}}});l.forEach(function(g){L.prototype[g]=function(i){try{return this.logger[g](i);}catch(e){}};});L.setLevel=function(e){if(typeof a.logger.setLevel==="function"){a.logger.setLevel(e);}};a=new L(c);},{"./ConsoleLogger.js":3}],9:[function(r,m,b){"use strict";r("./xhr.js");var c=r("./events.js").createEvent;var E=r("./EventHandlers.js");var x=r("./Log.js").logger;var L,S,l,a;S={UNAUTHENTICATED:0,PENDING:1,AUTHENTICATED:2};L={LOGON:"logon",LOGON_COMPLETE:"logoncomplete",LOGON_FAILED:"logonfailed",LOGON_ABORTED:"logonaborted"};function e(){x.info("Creating Logon Manager");this.queue=[];this.realms={};this.authHandlers={};this._schemes=[];this.handlers=new E([L.LOGON,L.LOGON_ABORTED,L.LOGON_COMPLETE,L.LOGON_FAILED]);}m.exports=e;e.getInstance=function(n){if(!l&&!n){l=new e();}return l;};e.shutdown=function(){if(l){l.shutdown();l=undefined;}};e.LogonEvent=L;e.Status=S;a=e.prototype;Object.defineProperties(a,{schemes:{get:function(){return this._schemes.slice();}}});a._collectSchemes=function(){var s,f=[],g=this.authHandlers;for(s in g){if(g.hasOwnProperty(s)){f.push(s);}}this._schemes=f.sort();};a.addEventListener=function(t,h){this.handlers.add(t,h);};a.removeEventListener=function(t,h){this.handlers.remove(t,h);};a.registerAuthHandler=function(s,h){var i,n,f=this.authHandlers[s],g=true;if(!E.isHandler(h)){throw new TypeError("Invalid authentication handler");}if(f){for(i=0,n=f.length;i<n;++i){if(f[i]===h){g=false;break;}}if(g){f.push(h);}}else{f=[h];this.authHandlers[s]=f;this._collectSchemes();}return g;};a.unregisterAuthHandler=function(s,h){var i,n,f=this.authHandlers[s],g=false;if(!E.isHandler(h)){return false;}if(f){for(i=0,n=f.length;i<n;++i){if(f[i]===h){g=true;if(n===1){delete this.authHandlers[s];this._collectSchemes();}else{f.splice(i,1);}break;}}}return g;};a.unregisterAllHandlers=function(s){if(s){delete this.authHandlers[s];}else{this.authHandlers={};}this._collectSchemes();};a.getAuthHandlers=function(s){var h=this.authHandlers[s];var f=this.authHandlers["*"];if(h){return f?h.concat(f):h.slice();}return f||[];};a.isSchemeHandled=function(s){return this.getAuthHandlers(s).length>0;};a.dispatchEvent=function(f){this.handlers.dispatch(f);};a.createLogonEvent=function(f){var g=c(L.LOGON);g.request=f;return g;};a.dispatchLogonEvent=function(f){var g=this.createLogonEvent(f);this.dispatchEvent(g);};a.dispatchLogonCompletedEvent=function(f){var g=c(L.LOGON_COMPLETE);g.response=f;this.dispatchEvent(g);};a.dispatchLogonFailedEvent=function(f){var g=c(L.LOGON_FAILED);g.response=f;this.dispatchEvent(g);};a.dispatchLogonAbortedEvent=function(f){var g=c(L.LOGON_ABORTED);g.realm=f;this.dispatchEvent(g);};a.dispatchLogonRequest=function(f){var i,n,h=false,g=this.createLogonEvent(f),j=this.getAuthHandlers(f.scheme);if(j){for(i=0,n=j.length;i<n;++i){h=E.fireEvent(j[i],g,x);if(h){break;}}}return h;};a.getAuthenticationStatus=function(n){return this.realms[n]||S.UNAUTHENTICATED;};a.isQueued=function(f){var i,n,g;if(this.pending&&this.pending.channel&&this.pending.channel.xhr===f){return true;}for(i=0,n=this.queue.length;i<n;++i){g=this.queue[i];if(g.channel&&g.channel.xhr===f){return true;}}return false;};a.requestLogon=function(f){var h,g;if(!f||!f.channel||!f.scheme){x.warning("Ignoring invalid Logon request");return;}if(this.isQueued(f.channel.xhr)){x.debug("Ignoring authentication request for already queued request "+f.channel.url);return;}x.info("Authentication requested for "+f.channel.url+" with scheme "+f.scheme);this.dispatchLogonEvent(f);if(this.isSchemeHandled(f.scheme)){g=f.realm;if(typeof g!=="string"){g=""+g;}if(this.pending){x.debug("Pending authentication process, queueing request");if(this.getAuthenticationStatus(g)===S.AUTHENTICATED){this.realms[g]=S.UNAUTHENTICATED;}this.queue.push(f);h=true;}else{x.debug("Dispatching authentication request");this.realms[g]=S.PENDING;this.pending=f;h=this.dispatchLogonRequest(f);}}else{x.info("No authentication handler registered for scheme "+f.scheme);}if(!h){x.warning("Unsupported authentication request for scheme "+f.scheme);if(this.pending===f){this.pending=undefined;}this.abort([f]);if(this.queue.length>0){this.requestLogon(this.queue.shift());}}};a.logonCompleted=function(f){var g,s,q,p,w,i,n,h;g=f.realm;q=this.queue;p=[];w=[];s=f.success;this.realms[g]=(s?S.AUTHENTICATED:S.UNAUTHENTICATED);if(this.pending&&(g===this.pending.realm)){p.push(this.pending);this.pending=undefined;}n=q.length;for(i=0;i<n;++i){h=q[i];if(h.realm===g){p.push(h);}else{w.push(h);}}this.queue=w;if(p.length>0){if(s){x.info("Authentication succeeded for realm "+g+", repeating requests.");this.retry(p);}else{x.warning("Authentication failed for realm "+g);this.abort(p);}}if(s){this.dispatchLogonCompletedEvent(f);}else{this.dispatchLogonFailedEvent(f);}if(!this.pending&&this.queue.length>0){this.requestLogon(this.queue.shift());}};a.abortLogon=function(f){var q,p,w,i,n,g;if(!f&&this.pending){f=this.pending.realm;}if(f){q=this.queue;p=[];w=[];this.realms[f]=S.UNAUTHENTICATED;if(this.pending){if(f===this.pending.realm){p.push(this.pending);}else{q.push(this.pending);}}this.pending=undefined;n=q.length;for(i=0;i<n;++i){g=q[i];if(g.realm===f){p.push(g);}else{w.push(g);}}this.queue=w;if(p.length>0){x.warning("Authentication aborted for realm "+f);this.abort(p);}this.dispatchLogonAbortedEvent(f);}else{x.info("No pending authentication, ignoring abort");}if(this.queue.length>0){this.requestLogon(this.queue.shift());}};a.retry=function(q){var i,n,f,g;n=q.length;for(i=0;i<n;++i){try{f=q[i].channel;if(f.async){g=f.xhr;g.repeat();}}catch(h){x.warning("Error while repeating request: "+h.message);throw h;}}};a.abort=function(q){var i,n,f,g;n=q.length;for(i=0;i<n;++i){try{f=q[i].channel;if(f.async){g=f.xhr;g.resumeEvents(true);}}catch(h){x.warning("Error while aborting request: "+h.message);throw h;}}};a.abortAll=function(){var f;f=this.queue;this.queue=[];if(this.pending){f.push(this.pending);this.pending=undefined;}this.abort(f);};a.shutdown=function(){x.info("Logon Manager shutdown");this.abortAll();};},{"./EventHandlers.js":5,"./Log.js":8,"./events.js":16,"./xhr.js":21}],10:[function(r,m,b){"use strict";var O;function a(){}m.exports=a;O=a.prototype;function c(){var h,t;h=document.createElement("div");h.style.fontSize="1.25rem";h.style.textAlign="center";h.style.marginBottom="16px";h.style.color="#003283";t=document.createTextNode("Authentication required");h.appendChild(t);return h;}function e(o,g){var h,l,i,j,k;h=document.createElement("div");h.style.width="256px";h.style.margin="0 auto";l=document.createElement("button");setTimeout(function(){l.focus();},300);l.onclick=function(){o();};l.style.width="120px";l.style.height="32px";l.style.color="#ffffff";l.style.backgroundColor="#5496cd";l.style.border="1px solid #367db8";l.style.borderRadius="4px";l.style.testShadow="0 1px #000000";l.style.outline="none";l.onblur=function(){l._focus=false;l.style.testShadow="0 1px #000000";l.style.backgroundColor="#5496cd";l.style.borderColor="#367db8";};l.onfocus=function(){l._focus=true;l.style.testShadow="none";l.style.backgroundColor="#427cac";l.style.borderColor="#427cac";};l.onmouseover=function(){if(!l._focus){l.style.backgroundColor="#367db8";l.style.borderColor="#367db8";}};l.onmouseout=function(){if(!l._focus){l.style.backgroundColor="#5496cd";l.style.borderColor="#367db8";}};i=document.createTextNode("To sign in");l.appendChild(i);j=document.createElement("button");j.type="button";j.onclick=function(){g();};j.style.marginLeft="16px";j.style.width="120px";j.style.height="32px";j.style.color="#346187";j.style.backgroundColor="#f7f7f7";j.style.border="1px solid #ababab";j.style.borderRadius="4px";j.style.outline="none";j.onblur=function(){j._focus=false;j.style.backgroundColor="#f7f7f7";j.style.borderColor="#ababab";};j.onfocus=function(){j._focus=true;j.style.backgroundColor="#bfbfbf";j.style.borderColor="#ababab";};j.onmouseover=function(){if(!j._focus){j.style.backgroundColor="rgba(191, 191, 191, 0.5)";j.style.borderColor="rgba(191, 191, 191, 0.5)";}};j.onmouseout=function(){if(!j._focus){j.style.backgroundColor="#f7f7f7";j.style.borderColor="#ababab";}};k=document.createTextNode("Cancel");j.appendChild(k);h.appendChild(l);h.appendChild(j);return h;}function f(o,g){var h=document.createElement("div");h.style.width="288px";h.style.margin="0 auto";h.style.padding="8px";h.style.backgroundColor="#daeef8";h.style.border="1px solid #00abfc";h.style.borderRadius="4px";h.style.fontSize="1rem";h.appendChild(c());h.appendChild(e(o,g));return h;}O.createAlertDialog=function(o,g){var h=document.createElement("div");h.style.position="absolute";h.style.top="0";h.style.left="0";h.style.height="100%";h.style.width="100%";h.style.margin="0";h.style.padding="16px 0";h.style.zIndex="99999";h.appendChild(f(o,g));return h;};O.show=function(o,g){if(!o){throw new TypeError("Missing mandatory onOpen option");}this.close();this.alertDialog=this.createAlertDialog(o,g);document.body.appendChild(this.alertDialog);};O.close=function(){if(this.alertDialog){this.alertDialog.parentNode.removeChild(this.alertDialog);this.alertDialog=null;}};},{}],11:[function(r,m,b){"use strict";var U,a,c,e,f,g=window.location;if(typeof window.URL==="function"){c=function(u){return new URL(u,window.location.href);};}else{c=function(u){if(!a){a=document.createElement("a");}a.href=u;return a;};}function h(i){if(i==="/"){return"/";}var p=i.lastIndexOf("/");return p===-1?"/":i.substring(0,p+1);}e=h(g.pathname);function j(l){var s=l.split("/"),o=e,i,n,p;for(i=0,n=s.length;i<n;++i){p=s[i];switch(p){case".":break;case"..":if(o!=="/"){o=o[o.length-1]==="/"?h(o.substring(0,o.length-1)):h(o);}break;default:o=o[o.length-1]==="/"?o+p:o+"/"+p;break;}}return o;}function k(u){this._parse(u);}m.exports=k;k.getHost=function(u){var i=u.hostname,p=u.port;switch(u.protocol){case"http:":if(p&&p!=="80"){i+=":"+p;}break;case"https:":if(p&&p!=="443"){i+=":"+p;}break;default:break;}return i;};U=k.prototype;U._parse=function(u){u=String(u)||g.href;var p=c(u),i;this.protocol=p.protocol||g.protocol;if(p.hostname){this.hostname=p.hostname;this.port=p.port;}else{i=u[0]!=="/";this.hostname=g.hostname;this.port=g.port;}if(this.protocol==="http:"&&this.port==="80"){this.port="";}else if(this.protocol==="https:"&&this.port==="443"){this.port="";}if(i){this.pathname=j(p.pathname);}else{this.pathname=p.pathname[0]==="/"?p.pathname:"/"+p.pathname;}this.hash=p.hash;this.parameters=k.parseSearch(p.search);};k.parseSearch=function(s){var p,i,l;l={};if(s){p=/[?&]([^&=]+)=?([^&]*)/g;i=p.exec(s);while(i){l[i[1]]=i[2];i=p.exec(s);}}return l;};U.getParameter=function(n){var v=this.parameters[n];return(v===undefined||v===null)?v:decodeURIComponent(v);};U.removeParameter=function(n){delete this.parameters[n];};U.setParameter=function(n,v){this.parameters[n]=encodeURIComponent(v);};Object.defineProperties(U,{crossOrigin:{get:function(){return(this.origin!==f);}},host:{get:function(){return k.getHost(this);}},href:{get:function(){return this.protocol+"//"+this.host+this.pathname+this.search+this.hash;},set:function(u){this._parse(u);}},origin:{get:function(){return this.protocol+"//"+this.host;}},search:{get:function(){var s,p,n,v;s="";p=this.parameters;for(n in p){if(p.hasOwnProperty(n)){v=p[n];if(s.length>0){s+="&";}s+=n;if(v){s+="=";s+=v;}}}return(s.length>0)?("?"+s):s;}}});f=window.location.protocol+"//"+k.getHost(window.location);},{}],12:[function(r,m,b){"use strict";var l=r("./util.js").lowerBound;var x=r("./Log.js").logger;var U;function a(c){this.defaultTimeout=c||600;this.timeout={};this.idxTimeout=[];}m.exports=a;U=a.prototype;U.indexTimeouts=function(){var k,i=[],t=this.timeout;for(k in t){if(t.hasOwnProperty(k)){i.push(k);}}this.idxTimeout=i.sort();};U.getTimeout=function(c){var u,i=l(c,this.idxTimeout);if(i>=0){u=this.idxTimeout[i];if(c.substring(0,u.length)===u){return this.timeout[u];}}return this.defaultTimeout;};U.setTimeout=function(u,v){if(!u){return;}if(typeof u!=="string"){u=""+u;}if(v){x.info("Setting timeout "+v+" on "+u);this.timeout[u]=v;}else{x.info("Reset timeout to default on "+u);delete this.timeout[u];}this.indexTimeouts();};},{"./Log.js":8,"./util.js":20}],13:[function(r,m,b){"use strict";var e=r("./events.js");var L=r("./LogonManager.js");var X=r("./XHRLogonManager.js");var D=r("./DefaultLogonFrameProvider.js");var O=r("./OpenWindowAlert.js");var x=r("./Log.js").logger;var U=r("./UrlObject.js");var a=r("./UrlTimeout.js");var w,W;function c(){x.debug("Creating WindowLogonManager");this.alertDialog=new O();this.frameProvider=new D();this.timeout=new a(c.defaultTimeout);this.pollingInterval=5000;}m.exports=c;W=c.prototype;c.defaultTimeout=600;c.getInstance=function(n){if(!w&&!n){w=new c();}return w;};c.start=function(){c.getInstance().start();};c.shutdown=function(){if(w){w.shutdown();w=null;}};W.start=function(){var l=L.getInstance();l.addEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.addEventListener(L.LogonEvent.LOGON_FAILED,this);l.registerAuthHandler(X.logonScheme(X.Scheme.STRICT_WINDOW),this);l.registerAuthHandler(X.logonScheme(X.Scheme.WINDOW),this);};W.shutdown=function(){var l=L.getInstance();this.cancelLogon();l.removeEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.removeEventListener(L.LogonEvent.LOGON_FAILED,this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.IFRAME),this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.STRICT_WINDOW),this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.WINDOW),this);};W.getTimeout=function(u){return this.timeout.getTimeout(u);};W.setTimeout=function(u,v){this.timeout.setTimeout(u,v);};W.handleLegacyIFrame=function(){var s=X.logonScheme(X.Scheme.IFRAME),l=L.getInstance();l.unregisterAllHandlers(s);l.registerAuthHandler(s,this);};W.onLogon=function(f){var h=true;this.onLogonEnd();x.debug("Processing "+f.scheme+" logon for realm "+f.realm);switch(X.xhrScheme(f.scheme)){case X.Scheme.WINDOW:this.onWindowLogon(f);break;case X.Scheme.STRICT_WINDOW:this.onStrictWindowLogon(f);break;case X.Scheme.IFRAME:this.onWindowLogon(f,true);break;default:h=false;x.warning("WindowLogonManager unsupported request scheme "+f.scheme);break;}return h;};W.onWindowLogon=function(f,l){var u,g,t,h,s=this;if(l){x.debug("Processing iframe logon as window logon for realm "+f.realm);}else{x.debug("Processing window logon for realm "+f.realm);}t=this.getTimeout(f.channel.url);u=new U(f.channel.url);u.setParameter("xhr-logon",l?"iframe":"window");g=this.frameProvider.create();g.onload=function(){if(h){clearTimeout(h);}h=setTimeout(function(){s.createWindow(l);},t);};g.xhrTimeout=t;g.src=u.href;this.pending={realm:f.realm,frame:g.id,url:u.href};};W.onStrictWindowLogon=function(f){var u=new U(f.channel.url);u.setParameter("xhr-logon","strict-window");x.debug("Processing strict-window logon for realm "+f.realm);this.pending={realm:f.realm,url:u.href};this.createWindow();};W.createWindow=function(p){var f,s=this;if(!this.pending){return;}f=window.open(this.pending.url,"_blank");if(!f||f.closed){x.warning("Failed to open logon window, alerting user");this.alertDialog.show(function(){s.createWindow(p);},function(){s.cancelLogon();});return;}this.window=f;try{f.opener=window;}catch(g){void g;}this.windowMonitorId=setInterval(function(){if(!s.window||s.window.closed){s.cancelLogon();}},300);if(p){s.pollIntervalId=setInterval(function(){s.poll();},s.pollingInterval);}e.addEventListener(f,"load",function(){x.info("Logon window opened");if(s.closed){return;}if(p){setTimeout(function(){s.poll();},300);}s.windowIntervalId=setInterval(function(){try{if(p&&typeof s.window.notifyParent==="function"){s.poll();}}catch(g){x.warning("Logon polling failed: "+g.message);}},300);});e.addEventListener(f,"close",function(){s.cancelLogon();});setTimeout(function(){try{if(s.window){s.window.focus();}}catch(g){x.warning("Failed to switch focus to logon window");}},300);};W.poll=function(){var f;if(this.pending){f=this.frameProvider.create();this.pending.frame=f.id;f.src=this.pending.url;}};W.stopPolling=function(){if(this.windowMonitorId){clearInterval(this.windowMonitorId);this.windowMonitorId=undefined;}if(this.windowIntervalId){clearInterval(this.windowIntervalId);this.windowIntervalId=undefined;}if(this.pollIntervalId){clearInterval(this.pollIntervalId);this.pollIntervalId=undefined;}};W.onLogonEnd=function(f){if(this.pending&&(!arguments.length||f===this.pending.realm)){this.stopPolling();this.frameProvider.destroy();this.alertDialog.close();if(this.window){this.window.close();this.window=undefined;}this.pending=undefined;}};W.cancelLogon=function(){if(this.pending){x.debug("Cancelling logon for realm "+this.pending.realm);L.getInstance().abortLogon(this.pending.realm);this.onLogonEnd(this.pending.realm);}};W.handleEvent=function(f){var g;switch(f.type){case L.LogonEvent.LOGON:g=f.request;if(g){return this.onLogon(g);}break;case L.LogonEvent.LOGON_COMPLETE:this.onLogonEnd(f.response.realm);break;case L.LogonEvent.LOGON_FAILED:this.onLogonEnd(f.response.realm);break;}return false;};},{"./DefaultLogonFrameProvider.js":4,"./Log.js":8,"./LogonManager.js":9,"./OpenWindowAlert.js":10,"./UrlObject.js":11,"./UrlTimeout.js":12,"./XHRLogonManager.js":15,"./events.js":16}],14:[function(r,m,b){"use strict";var h=r("./httpUtil.js");var U=r("./UrlObject.js");var X,u,H=2,D=4;function a(c,e){this.manager=c;this.channel=e;this.ignore=(this.manager.ignore&&this.manager.ignore.ignored(e.url));if(!this.ignore){e.xhr._addEventListener("readystatechange",this);}}m.exports=a;X=a.prototype;a.parseHeader=function(c){var i,p=h.parseHeader(c);if(p.accept){p.accept=p.accept.split(",");for(i=0;i<p.accept.length;++i){p.accept[i]=p.accept[i].trim();}}return p;};X.sending=function(c){var x,e,f=new U(c.url);if(f.crossOrigin&&!c.xhr.withCredentials){this.ignore=true;}if(this.ignore){return;}x=c.xhr;e=this.manager.accept().join(",");if(x.getRequestHeader("X-XHR-Logon")===undefined){x.setRequestHeader("X-XHR-Logon","accept="+JSON.stringify(e));}if(x.getRequestHeader("X-Requested-With")===undefined){x.setRequestHeader("X-Requested-With","XMLHttpRequest");}};X.handleEvent=function(e){var c,x,f,g,s,j,k,i;c=this.channel;x=c.xhr;if(x.readyState<H){return;}if(x.readyState===H){if(u===undefined){try{s=x.status;u=!!s;}catch(l){u=false;}if(!s){return;}}else if(!u){return;}}if(x.status===403){f=x.getResponseHeader("x-xhr-logon");if(f){if(c.async){x.suspendEvents();}if(c.async||this.manager.triggerLogonOnSyncRequest){g=a.parseHeader(f);k=g.accept;if(k){for(i=0;i<k.length;++i){if(k[i]==="repeat"){k.splice(i,1);j=true;break;}}}if(x.readyState===D){if(j&&!c.repeated){c.repeated=true;k=this.manager.accept(k);x.setRepeatHeader("X-XHR-Logon","accept=\""+k.join(",")+"\"");x.repeat();}else{this.manager.requestLogon(c,e,g);}}}}}};},{"./UrlObject.js":11,"./httpUtil.js":17}],15:[function(r,m,b){"use strict";var _=r("./xhr.js");var I=r("./IgnoreList.js");var x=r("./Log.js").logger;var X=r("./XHRLogonFilter.js");var L=r("./LogonManager.js");var e=r("./events.js");var a="xhrlogon.";var c=/^\s*\{\s*"xhrLogon"\s*:/;var f,g;function h(){x.info("Creating XHR Logon Manager");}m.exports=h;g=h.prototype;h.getInstance=function(n){if(!f&&!n){f=new h();}return f;};h.start=function(){h.getInstance().start();};h.shutdown=function(){if(f){f.shutdown();f=undefined;}};h.logonScheme=function(i){return a+i;};h.xhrScheme=function(s){return s.startsWith(a)?s.substring(a.length):"none";};g.triggerLogonOnSyncRequest=true;h.Scheme={NONE:"none",REPEAT:"repeat",IFRAME:"iframe",WINDOW:"window",STRICT_WINDOW:"strict-window"};h.defaultAccept=[h.Scheme.REPEAT,h.Scheme.IFRAME,h.Scheme.WINDOW,h.Scheme.STRICT_WINDOW];g.start=function(){if(!this.started){x.info("XHR Logon Manager startup");this.ignore=new I();this._initializeTrustedOrigins();this._registerFilterFactory();this.acceptOrder=h.defaultAccept.slice();e.addEventListener(window,"message",this.getEventHandler());this.started=true;}};g.shutdown=function(){if(this.started){x.info("XHR Logon Manager shutdown");e.removeEventListener(window,"message",this.getEventHandler());this._unregisterFilterFactory();this.started=false;}};function j(s){return(s>=200&&s<300)||(s===304);}function k(){var i,n,s,o=[],p=L.getInstance().schemes;for(i=0,n=p.length;i<n;++i){s=p[i];if(s.startsWith(a)){o.push(s.substring(a.length));}}o.push(h.Scheme.REPEAT);return o;}g.accept=function(s){var i,n,o,p=[],q=L.getInstance();s=s||k();if(s.length){for(i=0,n=s.length;i<n;++i){o=s[i];if(q.isSchemeHandled(h.logonScheme(o))){p.push(o);}}}if(!p.length){p.push(h.Scheme.NONE);}return p;};g.acceptScheme=function(s){if(!s||!s.length){return h.Scheme.NONE;}var i,n,o,p=h.Scheme.NONE,q={},t=L.getInstance();for(i=0,n=s.length;i<n;++i){q[s[i]]=true;}for(i=0,n=this.acceptOrder.length;i<n;++i){o=this.acceptOrder[i];if(t.isSchemeHandled(h.logonScheme(o))&&q[o]){p=o;break;}}return p;};var N="SAP NetWeaver Application Server [";function l(i){if(!i){return"";}if(i.startsWith(N)){return i.substring(0,N.length+3)+"]";}return i;}g.requestLogon=function(i,n,o){var s=this.acceptScheme(o.accept);L.getInstance().requestLogon({channel:i,realm:l(o.realm),scheme:h.logonScheme(s),event:n});};g.registerAuthHandler=function(s,i){s=h.logonScheme(s);return L.getInstance().registerAuthHandler(s,i);};g.unregisterAuthHandler=function(s,i){s=h.logonScheme(s);return L.getInstance().unregisterAuthHandler(s,i);};g.handleEvent=function(i){var n,o;n=i.data;if(c.test(n)){try{if(this.isTrusted(i.origin)){o=JSON.parse(n);if(typeof o.xhrLogon!=="object"){x.warning("Invalid xhrLogon message: "+n);}else{o.xhrLogon.realm=l(o.xhrLogon.realm);o.xhrLogon.success=j(o.xhrLogon.status);L.getInstance().logonCompleted(o.xhrLogon);}}else{x.warning("Received xhrlogon message from untrusted origin "+i.origin);}}catch(p){x.warning("Invalid xhrLogon message: "+n);}}};g._initializeTrustedOrigins=function(){var i,p,o;o={};i=window.location;p=i.protocol;o[p+"//"+i.host]=true;switch(p){case"http:":if(i.port===""){o["http://"+i.hostname+":80"]=true;}else if(i.port==="80"){o["http://"+i.hostname]=true;}break;case"https:":if(i.port===""){o["https://"+i.hostname+":443"]=true;}else if(i.port==="443"){o["https://"+i.hostname]=true;}break;default:break;}this._trustedOrigins=o;};g.isTrusted=function(o){return(!!this._trustedOrigins[o]);};g.addTrustedOrigin=function(o){this._trustedOrigins[o]=true;};g.getEventHandler=function(){var i,s;i=this._eventHandler;if(!i){s=this;i=function(n){s.handleEvent(n);};this._eventHandler=i;}return i;};g._getFilterFactory=function(){var i,s;i=this._filterFactory;if(!i){s=this;i=function(n){n.filters.push(new X(s,n));};this._filterFactory=i;}return i;};g._registerFilterFactory=function(){if(_.channelFactory){_.channelFactory.addFilterFactory(this._getFilterFactory());}};g._unregisterFilterFactory=function(){if(_.channelFactory){_.channelFactory.removeFilterFactory(this._getFilterFactory());delete this._filterFactory;}};},{"./IgnoreList.js":7,"./Log.js":8,"./LogonManager.js":9,"./XHRLogonFilter.js":14,"./events.js":16,"./xhr.js":21}],16:[function(r,m,b){"use strict";var u;function c(t,g,h){var i;i=document.createEvent("Event");i.initEvent(t,g,h);return i;}function a(t,g,h){var i,j;if(u){i=c(t,g,h);}else{try{if(g||h){j={bubbles:g,cancelable:h};}i=new Event(t,j);}catch(k){u=true;i=c(t,g,h);}}return i;}function e(t,g,l,h){if(t.addEventListener){t.addEventListener(g,l,h);}else if(t.attachEvent){t.attachEvent("on"+g,l);}}function f(t,g,l,h){if(t.removeEventListener){t.removeEventListener(g,l,h);}else if(t.detachEvent){t.detachEvent("on"+g,l);}}m.exports={createEvent:a,addEventListener:e,removeEventListener:f};},{}],17:[function(r,m,b){"use strict";var h=/(?:,|^)\s*(?:,\s*)*(\w+)\s*=\s*(?:"((?:[^"\\]|\\.)*)"|(\w*))/g;function p(a){var c={},e,t,v;if(a===undefined){return c;}if(typeof a!=="string"){throw new TypeError("Invalid header value");}e=h.exec(a);while(e!==null){t=e[1];v=e[2]===undefined?e[3]:e[2];c[t]=v?v.replace(/\\(.)/g,"$1"):"";e=h.exec(a);}return c;}m.exports={parseHeader:p};},{}],18:[function(r,m,b){"use strict";r("./polyfill.js");r("./xhr.js");var L=r("./LogonManager.js");var F=r("./FrameLogonManager.js");var W=r("./WindowLogonManager.js");var X=r("./XHRLogonManager.js");function s(o){o=o||{};L.getInstance();X.start();F.start();W.start();if(o.iframeAsWindow){W.getInstance().handleLegacyIFrame();}}function a(){X.shutdown();F.shutdown();W.shutdown();W.shutdown();}m.exports={start:s,shutdown:a,FrameLogonManager:F,LogonManager:L,URL:r("./UrlObject.js"),WindowLogonManager:W,XHRLogonManager:X};},{"./FrameLogonManager.js":6,"./LogonManager.js":9,"./UrlObject.js":11,"./WindowLogonManager.js":13,"./XHRLogonManager.js":15,"./polyfill.js":19,"./xhr.js":21}],19:[function(r,m,b){"use strict";var t;if(!String.prototype.startsWith){String.prototype.startsWith=function(s,p){s=String(s);p=Number(p)||0;p=p<0?0:Math.floor(p);return(this.substr(p,s.length)===s);};}if(!String.prototype.trim){t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(t,"");};}if(!Date.now){Date.now=function(){return new Date().getTime();};}},{}],20:[function(r,m,b){"use strict";var p=["","0","00","000","0000"];function l(x,a){var i,v,s=0,e=a.length-1;if(e<0||x<a[0]){return-1;}if(x>=a[e]){return e;}--e;while(s<e){i=(s+e+1)>>1;v=a[i];if(x<v){e=i-1;}else{s=i;}}return s;}function c(n,a){var o=""+n;if(o.length<a){o=p[a-o.length]+o;}return o;}function t(){var n=new Date();var o=c(n.getHours(),2)+":"+c(n.getMinutes(),2)+":";o+=c(n.getSeconds(),2)+"."+c(n.getMilliseconds(),3);return o;}m.exports={lowerBound:l,pad:c,time:t};},{}],21:[function(r,m,b){"use strict";function x(){var L=r("./Log.js");var C=r("./ChannelFactory.js");var E=r("./EventHandlers.js");var p,a,_,X,u=0,c=L.logger;p=["loadstart","progress","abort","error","load","timeout","loadend"];a=p.concat("readystatechange");var e=window.navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;_=XMLHttpRequest;XMLHttpRequest._SAP_ENHANCED=true;X=_.prototype;XMLHttpRequest.channelFactory=new C();function f(o,h){var k,n,i,j,l,q;n=h.length;for(k=0;k<n;++k){i=h[k];q=o[i];if(q){l="_"+i;j=o[l];if(!j){o[l]=q;}}}}f(X,["abort","open","setRequestHeader","send","addEventListener","removeEventListener"]);X._getHandlers=function(){var h=this._handlers;if(!h){h=new E(a);this._handlers=h;}return h;};X.handleEvent=function(h){this._getHandlers().dispatch(h);};X.suspendEvents=function(){this._getHandlers().suspend=true;};X.resumeEvents=function(h){var i=this._getHandlers();i.suspend=false;if(h){i.releaseEvents();}else{i.clearEvents();}};X.clearEvents=function(){this._getHandlers().clearEvents();};X.getEventHandler=function(){var s=this,h=this._fnHandler;if(!h){h=function(i){s.handleEvent(i);};this._fnHandler=h;}return h;};X._checkEventSubscription=function(t,h){h=h||this._getHandlers();if(!h.subscribed(t)){this._addEventListener(t,this.getEventHandler());h.subscribe(t);}};X._checkEventSubscriptions=function(){var h,i,n;h=this._getHandlers();n=a.length;for(i=0;i<n;++i){this._checkEventSubscription(a[i],h);}};X.addEventListener=function(t,h){this._getHandlers().add(t,h);};X.removeEventListener=function(t,h){this._getHandlers().remove(t,h);};function g(h){Object.defineProperty(X,"on"+h,{configurable:true,get:function(){return this["_on"+h]||null;},set:function(v){var i="_on"+h;if(this[i]){this.removeEventListener(h,this[i]);}if(typeof v==="function"||typeof v==="object"){this[i]=v;if(E.isHandler(v)){this.addEventListener(h,v);}}else{this[i]=null;}}});}a.forEach(function(h){g(h);});X.abort=function(){var h;try{h=this._channel;if(h){c.debug("Aborting request "+h.method+" "+h.url);h.aborting();this._abort();h.aborted();}else{c.debug("Aborting request");this._abort();}}catch(i){c.warning("Failed to abort request: "+i.message);if(h){h["catch"](i);}else{throw i;}}};X.open=function(h,i,j,k,l){var n,o,q,s;this._id=++u;c.debug("Opening request #"+this._id+" "+h+" "+i);o=arguments.length;if(o<=2){j=true;}q=h;s=i;this._getHandlers().clearEvents();n=_.channelFactory.create(this,h,i,j,k,l);this._channel=n;try{this._clearParams();n.opening();h=n.method;i=n.url;if((s!==i)||(q!==h)){c.debug("Rewriting request #"+this._id+" to "+h+" "+i);}if(o<=2){this._open(h,i);}else{this._open(h,i,j,k,l);}n.opened();this._checkEventSubscriptions();this._removeEventListener("readystatechange",this.getEventHandler());this._addEventListener("readystatechange",this.getEventHandler());}catch(t){c.warning("Failed to open request #"+this._id+" "+h+" "+i+": "+t.message);n["catch"](t);}};X.setRequestHeader=function(h,v){var i,n;if(typeof v!=="string"){v=""+v;}this._setRequestHeader(h,v);n=h.toLowerCase();i=this.headers;if(i[n]===undefined){i[n]=v;}else{i[n]+=", "+v;}};X.setRequestHeaders=function(h){var j,k,i,n;if(typeof h==="object"){k=Object.getOwnPropertyNames(h);n=k.length;for(i=0;i<n;++i){j=k[i];this.setRequestHeader(j,h[j]);}}};X.send=function(h){var i,j,k;try{i=this._channel;if(i){j=i.method;k=i.url;c.debug("Sending request #"+this._id+" "+j+" "+k);i.sending();}this._saveParams(h);this._send(h);if(i){i.sent();}}catch(l){if(j){c.warning("Failed to send request #"+this._id+" "+j+" "+k+": "+l.message);}else{c.warning("Failed to send request #"+this._id+": "+l.message);}if(i){i["catch"](l);}else{throw l;}}};X.getRequestHeader=function(h){return this.headers[h.toLowerCase()];};X.deleteRepeatHeader=function(h){delete this.headers[h.toLowerCase()];};X.setRepeatHeader=function(h,v){this.headers[h.toLowerCase()]=v;};X.reopen=function(){var h=this._channel,i,j;if(h){i=h.method;j=h.url;c.debug("Reopening request #"+this._id+" "+i+" "+j);}else{throw new TypeError("Cannot reopen request");}try{h.reopening();h.opening();this._open(i,j,h.async,h.username,h.password);h.opened();this._restoreParams();this.resumeEvents();}catch(k){c.warning("Failed to reopen request #"+this._id+" "+i+" "+j+": "+k.message);h["catch"](k);}};X.repeat=function(){var h=this._channel,s=this;if(!h){throw new TypeError("Cannot repeat request");}if(e){setTimeout(function(){s.abort();s.reopen();s.send(s._data);},0);}else{this.abort();this.reopen();this.send(this._data);}};X.toString=function(){var h=this._channel,s="[object XMLHttpRequest]";if(h){s+="#"+this._id+" "+h.method+" "+h.url;}return s;};Object.defineProperties(X,{"channel":{get:function(){return this._channel;}},"headers":{get:function(){var h=this._headers;if(!h){h={};this._headers=h;}return h;}},"id":{get:function(){return this._id;}}});X._clearParams=function(){delete this._headers;delete this._withCredentials;delete this._timeout;delete this._data;};X._restoreParams=function(){var t,h;if(this._headers){h=this._headers;this._headers={};this.setRequestHeaders(h);}if(this._withCredentials){this.withCredentials=true;}t=this._timeout;if(t){this.timeout=t;}};X._saveParams=function(h){var t;if((h!==undefined)&&(h!==null)){this._data=h;}if(this.withCredentials){this._withCredentials=true;}t=this.timeout;if(t){this._timeout=t;}};Object.defineProperties(XMLHttpRequest,{"logger":{get:function(){return L.logger;},set:function(l){L.logger=l;}}});}if(!XMLHttpRequest._SAP_ENHANCED){x();}m.exports=XMLHttpRequest;},{"./ChannelFactory.js":2,"./EventHandlers.js":5,"./Log.js":8}]},{},[18])(18)});return m.exports;});
sap.ui.require.preload({
	"sap/ushell/components/shell/MeArea/FlpSettings.view.xml":'<View controllerName="sap.ushell.components.shell.MeArea.FlpSettings" width="100%" xmlns:m="sap.m"><m:VBox visible="true" class="sapUiSmallMargin"><m:items><m:HBox><m:items><m:Label text="{i18n&gt;AnchorBarLabel}:" class="sapUshellFlpSettingsLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}" id="anchorBarLabel"/><m:VBox><m:items><m:RadioButtonGroup selectedIndex="{config&gt;/displayMode}"><m:buttons><m:RadioButton text="{i18n&gt;anchorBarScrollMode}" class="sapUshellAnchorBarScrollMode" ariaLabelledBy="anchorBarLabel"/><m:RadioButton text="{i18n&gt;anchorBarTabMode}" class="sapUshellAnchorBarTabsMode" ariaLabelledBy="anchorBarLabel"/></m:buttons></m:RadioButtonGroup><m:VBox class="sapUshellFlpSettingsDescriptionBorder"><m:items><m:Text text="{i18n&gt;homePageGroupDisplayDescriptionText}" class="sapUshellFlpSettingsDescription"/><m:Text text="{i18n&gt;homePageGroupDisplayDescriptionText_secondParagraph}" class="sapUshellFlpSettingsDescription" visible="false"/></m:items></m:VBox></m:items></m:VBox></m:items></m:HBox></m:items></m:VBox></View>',
	"sap/ushell/components/shell/MeArea/ThemeSelector.view.xml":'<View controllerName="sap.ushell.components.shell.MeArea.ThemeSelector" xmlns="sap.m" xmlns:core="sap.ui.core"><IconTabBar id="idIconTabBar" applyContentPadding="true"><items><IconTabFilter text="{i18n&gt;AppearanceThemeMenu}"><List items="{path:\'/options\'}" includeItemInSelection="true" mode="SingleSelectMaster" selectionChange="onSelectHandler" id="themeList"><items><CustomListItem selected="{isSelected}" class="sapUshellAppearanceCustomListItem"><customData><core:CustomData key="themeid" value="{id}" writeToDom="true"/></customData><HBox><HBox class="sapUshellAppearanceItemViewLeft"><core:Icon src="{parts:[{path:\'id\'}],formatter:\'.getIconFormatter\'}" color="{config&gt;/sapUiContentIconColor}" size="1.75rem" class="sapUshellAppearanceIcon"/><Text text="{name}" class="sapUshellAppearanceItemText"><layoutData><FlexItemData styleClass="sapUshellAppearanceFlexItemText"/></layoutData></Text></HBox><HBox class="sapUshellAppearanceItemViewRight"><core:Icon src="sap-icon://sys-enter-2" visible="{isSelected}" color="{config&gt;/sapUiContentIconColor}" size="1.375rem"/></HBox></HBox></CustomListItem></items></List></IconTabFilter><IconTabFilter text="{i18n&gt;AppearanceLayoutAndBehaviorMenu}" id="DisplaySettingsTab"><HBox alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label labelFor="contentDensitySwitch" text="{i18n&gt;AppearanceContentDensityLabel}:" class="sapUshellAppearanceLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}"/><VBox alignItems="Baseline" class="sapUshellAppearanceContentDensityText"><Switch type="Default" id="contentDensitySwitch" class="sapUshellAppearanceSwitchButton" tooltip="{i18n&gt;AppearanceContentDensityTooltip}" change="setCurrentContentDensity" state="{config&gt;/isCozyContentMode}" enabled="{config&gt;/isContentDensitySwitchEnable}"/><Text text="{i18n&gt;appearanceCompactCozyDescriptionText}" class="sapUshellFlpSettingsDescription"/></VBox></HBox><HBox alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label text="{i18n&gt;AppearanceAnimationLabel}:" labelFor="animationModeCombo" class="sapUshellAppearanceLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}"/><VBox class="sapUshellAppearanceAnimationText"><Select type="Default" id="animationModeCombo" class="sapUshellAppearanceComboBox" change="setCurrentAnimationMode" selectedKey="{config&gt;/animationMode}"><core:Item key="full" text="{i18n&gt;AppearanceAnimationFull}"/><core:Item key="minimal" text="{i18n&gt;AppearanceAnimationMinimal}"/></Select><Text text="{i18n&gt;appearanceAnimationDescriptionText}" class="sapUshellFlpSettingsDescription"/></VBox></HBox><HBox visible="{config&gt;/sizeBehaviorConfigurable}" alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label text="{i18n&gt;AppearanceTileSizeLabel}:" class="sapUshellAppearanceLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}" labelFor="setCurrentTileSize" id="sapUshellAppearanceTileSizeLabel"/><VBox class="sapUshellAppearanceTileSizeText"><RadioButtonGroup select="setCurrentTileSize" selectedIndex="{config&gt;/tileSize}" id="tileSizeRaidoButtonGroup"><buttons><RadioButton text="{i18n&gt;AppearanceTileSizeSmall}" class="sapUshellAppearanceTileSizeSmall" ariaLabelledBy="sapUshellAppearanceTileSizeLabel"/><RadioButton text="{i18n&gt;AppearanceTileSizeLarge}" class="sapUshellAppearanceTileSizeLarge" ariaLabelledBy="sapUshellAppearanceTileSizeLabel"/></buttons></RadioButtonGroup><Text text="{i18n&gt;appearanceTileSizeDescriptionText}" class="sapUshellFlpSettingsDescription"/></VBox></HBox></IconTabFilter></items></IconTabBar></View>',
	"sap/ushell/components/shell/MeArea/userAccount/UserAccountImgConsentSelector.fragment.xml":'<core:FragmentDefinition height="100%" width="100%" xmlns:m="sap.m" xmlns:core="sap.ui.core"><m:VBox><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}" id="userImgConsentEnableFlexBox"><m:Label text="{i18n&gt;imgConsentMsg}:" class="sapUshellUserAccountLabel"/></m:FlexBox><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}"><m:Link text="{i18n&gt;userImageConsentDialogShowTermsOfUse}" textAlign="{config&gt;/textAlign}" class="sapUshellUserAccountLabel" press="termsOfUserPress" id="termsOfUseLink"/><m:Label text="{i18n&gt;userImageConsentText}:" visible="false" id="sapUshellUserImageConsentSwitchLabel"/></m:FlexBox><m:FlexBox direction="{config&gt;/textDirection}" id="termsOfUseTextFlexBox" visible="false"><m:Text text="{i18n&gt;userImageConsentDialogTermsOfUse}" class="sapUshellUserConsentDialogTerms"/></m:FlexBox></m:VBox></core:FragmentDefinition>',
	"sap/ushell/components/shell/MeArea/userAccount/UserAccountSelector.view.xml":'<View controllerName="sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector" xmlns="sap.m" xmlns:core="sap.ui.core"><IconTabBar id="idIconTabBar" applyContentPadding="true"><items><IconTabFilter text="{i18n&gt;UserAccountFld}"><core:Fragment fragmentName="sap.ushell.components.shell.MeArea.userAccount.UserAccountSetting" type="XML"/></IconTabFilter><IconTabFilter text="{i18n&gt;UserAccountOnlineStatusTitle}"><core:Fragment fragmentName="sap.ushell.components.shell.MeArea.userAccount.UserAccountStatusSelector" type="XML"/></IconTabFilter><IconTabFilter visible="{config&gt;/imgConsentEnabled}" text="{i18n&gt;ProfileImgId}"><core:Fragment fragmentName="sap.ushell.components.shell.MeArea.userAccount.UserAccountImgConsentSelector" type="XML"/></IconTabFilter></items></IconTabBar></View>',
	"sap/ushell/components/shell/MeArea/userAccount/UserAccountSetting.fragment.xml":'<core:FragmentDefinition height="100%" width="100%" xmlns:m="sap.m" xmlns:core="sap.ui.core"><m:VBox class="sapUiSmallMargin"><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}"><m:Label text="{i18n&gt;UserAccountNameFld}:" class="sapUshellUserAccountLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}" labelFor="userAccountuserName"/><m:Input value="{config&gt;/name}" id="userAccountuserName" class="sapUshellUserAccountInput" editable="false"/></m:FlexBox><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}"><m:Label text="{i18n&gt;UserAccountEmailFld}:" class="sapUshellUserAccountLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}" labelFor="userAccountuserMail"/><m:Input value="{config&gt;/mail}" id="userAccountuserMail" class="sapUshellUserAccountInput" editable="false"/></m:FlexBox><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}"><m:Label text="{i18n&gt;UserAccountServerFld}:" class="sapUshellUserAccountLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}" labelFor="userAccountuserServer"/><m:Input value="{config&gt;/server}" id="userAccountuserServer" class="sapUshellUserAccountInput" editable="false"/></m:FlexBox></m:VBox></core:FragmentDefinition>',
	"sap/ushell/components/shell/MeArea/userAccount/UserAccountSetting.view.xml":'<View controllerName="sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m"><core:Fragment fragmentName="sap.ushell.components.shell.MeArea.userAccount.UserAccountSetting" type="XML"/></View>',
	"sap/ushell/components/shell/MeArea/userAccount/UserAccountStatusSelector.fragment.xml":'<core:FragmentDefinition height="100%" width="100%" xmlns:m="sap.m" xmlns:core="sap.ui.core"><m:VBox><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}" id="userStatusEnableFlexBox"><m:Label text="{i18n&gt;enableStatusMessageBoxFld}:" class="sapUshellUserAccountLabel" id="sapUshellEnableStatusLabel"/></m:FlexBox><m:FlexBox direction="{config&gt;/textDirection}" id="userStatusLegalMessageFlexBox1" class="ushellUserStatusLegalMessageFlexBox"><m:Text text="{i18n&gt;userStatusMessageBoxInfoTextLine1}"/></m:FlexBox><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}" id="userStatusDropDownFlexBox" class="ushellUserStatusDropDownFlexBox"><m:Label text="{i18n&gt;userStatusSettingDropdownLabelFld}:" class="sapUshellUserAccountLabel"/></m:FlexBox><m:FlexBox direction="{config&gt;/textDirection}" id="ushellDefaultStatusDescription" class="ushellUserStatusLegalMessageFlexBox"><m:Text text="{i18n&gt;userStatusDefaultStatusDescriptionLine1}"/></m:FlexBox></m:VBox></core:FragmentDefinition>',
	"sap/ushell/components/tiles/action/ActionTile.view.xml":'<View controllerName="sap.ushell.components.tiles.action.ActionTile" height="100%" width="100%" xmlns="sap.ui.core" xmlns:ushell="sap.ushell.ui.tile"><ushell:TileBase id="actionTile" title="{i18n&gt;tile.display.action_chip}" subtitle="{/displayText}" icon="sap-icon://action" press="onPress"/></View>',
	"sap/ushell/components/tiles/action/Configuration.view.xml":'<core:View controllerName="sap.ushell.components.tiles.action.Configuration" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:commonLayout="sap.ui.commons.layout" xmlns="sap.m" xmlns:table="sap.ui.table" xmlns:common="sap.ui.commons"><form:Form id="configuration" maxContainerCols="2" minWidth="1024" editable="true"><form:layout><form:ResponsiveGridLayout/></form:layout><form:FormContainer id="categoryChipConfiguration" title="{i18n&gt;configuration.category.action_chip_configuration}"><form:FormElement label="{i18n&gt;configuration.semantic_object}"><Input id="semantic_objectInput" width="100%" tooltip="{i18n&gt;configuration.semantic_object.tooltip}" maxLength="30" liveChange="onConfigurationInputChange" valueHelpRequest="onValueHelpRequest" showValueHelp="true" showSuggestion="true" value="{/value}" enabled="{/config/editable}"/></form:FormElement><form:FormElement label="{i18n&gt;configuration.semantic_action}"><Input id="semantic_actionInput" value="{/config/semantic_action}" maxLength="50" liveChange="onConfigurationInputChange" enabled="{/config/editable}" valueHelpRequest="onActionValueHelpRequest" showValueHelp="true" showSuggestion="true" width="100%" tooltip="{i18n&gt;configuration.semantic_action.tooltip}"/></form:FormElement></form:FormContainer><form:FormContainer id="categoryTargetApplication" title="{i18n&gt;configuration.category.target_application}"><form:FormElement id="targetType" label="{i18n&gt;configuration.target_applicationType}"><ComboBox id="targetTypeInput" selectedKey="{/config/navigation_provider}" enabled="{/config/editable}" selectionChange="onApplicationTypeChange"/></form:FormElement><form:FormElement id="application_description" label="{i18n&gt;configuration.target_application.description}"><Input id="target_application_descriptionInput" value="{/config/display_title_text}" liveChange="onConfigurationInputChange" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_application.description.tooltip}"/></form:FormElement><form:FormElement id="application_url" label="{i18n&gt;configuration.target_application.url}"><Input id="target_application_urlInput" value="{/config/url}" enabled="{/config/editable}" maxLength="512" liveChange="onConfigurationInputChange" width="100%" tooltip="{i18n&gt;configuration.target_application.url.tooltip}"/></form:FormElement><form:FormElement id="application_component" label="{i18n&gt;configuration.target_application.component}"><Input id="target_application_componentInput" value="{/config/ui5_component}" enabled="{/config/editable}" liveChange="onConfigurationInputChange" width="100%" tooltip="{i18n&gt;configuration.target_application.component.tooltip}"/></form:FormElement><form:FormElement id="navigation_provider_role" label="{i18n&gt;configuration.navigation_provider_role}"><Input id="navigation_provider_roleInput" valueHelpRequest="onRoleValueHelpRequest" showValueHelp="true" showTableSuggestionValueHelp="true" enabled="{/config/editable}" showSuggestion="true" value="{/value}" width="100%" maxLength="10" class="sapUshellTargetMappingToUpperCase" tooltip="{i18n&gt;configuration.navigation_provider_role.tooltip}" liveChange="onConfigurationInputChange"><suggestionColumns><Column hAlign="Begin" popinDisplay="Inline" demandPopin="true"><Label text="{i18n&gt;configuration.navigation_provider_role}"/></Column><Column hAlign="Begin" popinDisplay="Inline" demandPopin="true"><Label text="{i18n&gt;configuration.navigation_provider_instance}"/></Column></suggestionColumns></Input></form:FormElement><form:FormElement id="navigation_provider_instance" label="{i18n&gt;configuration.navigation_provider_instance}"><Input id="navigation_provider_instanceInput" value="{/value}" width="100%" maxLength="32" valueHelpRequest="onInstanceValueHelpRequest" enabled="{/config/editable}" showValueHelp="true" showSuggestion="true" suggest="instanceSuggest" tooltip="{i18n&gt;configuration.navigation_provider_instance.tooltip}" liveChange="onConfigurationInputChange" class="sapUshellTargetMappingToUpperCase"/></form:FormElement><form:FormElement id="target_application_alias" label="{i18n&gt;configuration.target_application_alias}"><Input id="target_application_aliasInput" value="{/value}" width="100%" valueHelpRequest="onAliasValueHelpRequest" enabled="{/config/editable}" showValueHelp="true" showSuggestion="true" suggest="aliasSuggest" tooltip="{i18n&gt;configuration.target_application_alias.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_application_id" label="{i18n&gt;configuration.target_application_id}"><Input id="target_application_idInput" value="{/config/target_application_id}" width="100%" maxLength="32" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_application_id.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_transaction" label="{i18n&gt;configuration.target_transaction}"><Input id="target_transactionInput" value="{/config/transaction/code}" width="100%" maxLength="20" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_transaction.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_web_dynpro_application" label="{i18n&gt;configuration.target_web_dynpro.application}"><Input id="target_web_dynpro_applicationInput" value="{/config/web_dynpro/application}" width="100%" maxLength="30" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_web_dynpro_application.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_web_dynpro_configuration" label="{i18n&gt;configuration.target_web_dynpro.configuration}"><Input id="target_web_dynpro_configurationInput" value="{/config/web_dynpro/configuration}" width="100%" maxLength="32" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_web_dynpro_application.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_system_alias" label="{i18n&gt;configuration.target_system_alias}"><Input id="target_system_aliasInput" value="{/config/target_system_alias}" width="100%" maxLength="30" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_system_alias.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement></form:FormContainer><form:FormContainer id="categoryGeneral" title="{i18n&gt;configuration.category.general}"><form:layoutData><layout:GridData span="L12 M12 S12"/></form:layoutData><form:FormElement label="{i18n&gt;configuration.display_info_text}"><Input id="additionalInfo" value="{/config/display_info_text}" enabled="{/config/editable}" width="100%" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement label="{i18n&gt;configuration.form_factor}" tooltip="{i18n&gt;configuration.form_factor.tooltip}"><CheckBox id="desktopCB" text="{i18n&gt;configuration.form_factor_desktop}" select="onFormFactorChange" selected="{/config/desktopChecked}" enabled="{/config/manualFormFactor}"/><CheckBox id="tabletCB" text="{i18n&gt;configuration.form_factor_tablet}" select="onFormFactorChange" selected="{/config/tabletChecked}" enabled="{/config/manualFormFactor}"/><CheckBox id="phoneCB" text="{i18n&gt;configuration.form_factor_phone}" select="onFormFactorChange" selected="{/config/phoneChecked}" enabled="{/config/manualFormFactor}"/></form:FormElement><form:FormElement label="{i18n&gt;configuration.signature.table.title}"><VBox><table:Table id="mappingSignatureTable" rows="{/config/rows}" selectionBehavior="Row" selectionMode="Multi" visibleRowCount="5" enableColumnReordering="false" rowHeight="30px"><table:Column id="nameCol" width="82px"><Label text="{i18n&gt;configuration.signature.table.name}"/><table:template><common:TextField value="{name}" editable="{editable}" placeholder="{i18n&gt;configuration.signature.table.nameFieldLbl}" change="checkDuplicateNames"/></table:template></table:Column><table:Column id="mandatoryCol" width="92px" hAlign="Center"><Label text="{i18n&gt;configuration.signature.table.mandatory}"/><table:template><common:CheckBox checked="{mandatory}" editable="{editable}" change="handleMandatoryChange"/></table:template></table:Column><table:Column id="valueCol" width="85px"><Label text="{i18n&gt;configuration.signature.table.value}"/><table:template><common:TextField value="{value}" editable="{editable}" enabled="{valEnabled}"/></table:template></table:Column><table:Column id="isRegExCol" width="162px" hAlign="Center"><Label text="{i18n&gt;configuration.signature.table.isRegEx}"/><table:template><common:CheckBox checked="{isRegularExpression}" editable="{editable}" enabled="{valEnabled}"/></table:template></table:Column><table:Column id="defValueCol" width="110px"><Label text="{i18n&gt;configuration.signature.table.defaultValue}"/><table:template><common:TextField value="{defaultValue}" editable="{editable}" enabled="{defValEnabled}"/></table:template></table:Column><table:Column id="renameToCol" width="82px" visible="{= ${/config/navigation_provider} !== \'LPD\' }"><Label text="{i18n&gt;configuration.signature.table.renameTo}" tooltip="{i18n&gt;configuration.signature.table.renameTo.tooltip}"/><table:template><common:TextField value="{rename_to}" editable="{editable}"/></table:template></table:Column></table:Table><commonLayout:MatrixLayout><commonLayout:MatrixLayoutRow><commonLayout:MatrixLayoutCell><common:CheckBox id="isUnknownAllowed" class="" enabled="{/config/editable}" text="{i18n&gt;configuration.signature.table.allowUndefined}" checked="{/config/isUnknownAllowed}" width="400px"/></commonLayout:MatrixLayoutCell></commonLayout:MatrixLayoutRow><commonLayout:MatrixLayoutRow><commonLayout:MatrixLayoutCell hAlign="Right"><common:Button id="addRow" enabled="{/config/editable}" text="{i18n&gt;configuration.signature.table.add}" press="addRow" width="100px"/><common:Button id="deleteRow" enabled="{/config/editable}" text="{i18n&gt;configuration.signature.table.delete}" press="deleteRow" width="100px"/></commonLayout:MatrixLayoutCell></commonLayout:MatrixLayoutRow></commonLayout:MatrixLayout></VBox></form:FormElement></form:FormContainer></form:Form></core:View>',
	"sap/ushell/components/tiles/applauncher/Configuration.view.xml":'<core:View controllerName="sap.ushell.components.tiles.applauncher.Configuration" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:table="sap.ui.table" xmlns:clayout="sap.ui.commons.layout" xmlns:common="sap.ui.commons"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" visible="false"/><form:SimpleForm id="configuration" maxContainerCols="2" minWidth="1024" editable="true"><form:content><core:Title id="categoryCommon" text="{i18n&gt;configuration.category.general}"/><Label text="{i18n&gt;configuration.display_title_text}"/><Input id="titleInput" value="{/config/display_title_text}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.display_title_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_subtitle_text}"/><Input id="subtitleInput" value="{/config/display_subtitle_text}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.display_subtitle_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.keywords}"/><Input id="keywordsInput" value="{/config/display_search_keywords}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.keywords.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_icon_url}"/><Input id="iconInput" value="{/config/display_icon_url}" enabled="{/config/editable}" placeholder="sap-icon://inbox" tooltip="{i18n&gt;configuration.display_icon_url.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onIconValueHelpRequest" showValueHelp="true"/><Label text="{i18n&gt;configuration.display_info_text}"/><Input id="infoInput" value="{/config/display_info_text}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.display_info_text.tooltip}" editable="{/config/isLocaleSuitable}"/><core:Title id="categoryNavigation" text="{i18n&gt;configuration.category.navigation}"/><Label text="{i18n&gt;configuration.navigation_use_semantic_object}"/><CheckBox id="useLpdCheckbox" selected="{/config/navigation_use_semantic_object}" tooltip="{i18n&gt;configuration.navigation_use_semantic_object.tooltip}" select="onCheckBoxChange" enabled="{/config/editable}"/><Label text="{i18n&gt;configuration.semantic_object}"/><Input id="navigation_semantic_objectInput" width="100%" tooltip="{i18n&gt;configuration.semantic_object.tooltip}" maxLength="30" liveChange="onConfigurationInputChange" valueHelpRequest="onValueHelpRequest" showValueHelp="true" showSuggestion="true" enabled="{= ${/enabled} &amp;&amp; ${/config/editable}}" value="{/value}"/><Label text="{i18n&gt;configuration.navigation_semantic_action}"/><Input id="navigation_semantic_actionInput" value="{/config/navigation_semantic_action}" width="100%" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" maxLength="50" valueHelpRequest="onActionValueHelpRequest" showValueHelp="true" showSuggestion="true" tooltip="{i18n&gt;configuration.navigation_semantic_action.tooltip}" liveChange="onConfigurationInputChange"/><Label text="{i18n&gt;configuration.navigation_semantic_parameters}"/><Input id="navigation_semantic_parametersInput" value="{/config/navigation_semantic_parameters}" width="100%" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_parameters.tooltip}"/><Label text="{i18n&gt;configuration.navigation_target_url}"/><Input id="targetUrl" value="{/config/navigation_target_url}" type="Url" width="100%" tooltip="{i18n&gt;configuration.navigation_target_url.tooltip}"/><Label/><core:Title id="categoryTileActions" text="{i18n&gt;configuration.category.tile_actions}"/><table:Table id="tileActions" rows="{/config/tile_actions_rows}" selectionBehavior="Row" selectionMode="Multi" visibleRowCount="3" enableColumnReordering="false" rowHeight="30px"><table:Column id="menuItem" width="80px" tooltip="{i18n&gt;configuration.tile_actions.table.menu_item_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.menu_item}"/><table:template><common:TextField value="{menu_title}" editable="{editable}" valueState="{valueState}"/></table:template></table:Column><table:Column id="targetType" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.target_type_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.target_type}"/><table:template><common:ComboBox id="targetTypeCB" value="{target_type}" editable="{editable}" change="handleTargetTypeChange"/></table:template></table:Column><table:Column id="navigationTarget" width="162px" tooltip="{i18n&gt;configuration.tile_actions.table.navigation_target_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.navigation_target}"/><table:template><Input liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionValueHelp" showValueHelp="{isTargetTypeIntent}" showSuggestion="{isTargetTypeIntent}" value="{navigation_target}" editable="{editable}"/></table:template></table:Column><table:Column id="action" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.action_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.action}"/><table:template><common:TextField value="{action}" enabled="{isTargetTypeIntent}" editable="{editable}"/></table:template></table:Column><table:Column id="icon" width="110px" tooltip="{i18n&gt;configuration.tile_actions.table.icon_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.icon}"/><table:template><Input value="{icon}" placeholder="sap-icon://inbox" editable="{editable}" valueStateText="{iconValueStateText}" valueState="{iconValueState}" liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionIconValueHelp" showValueHelp="true"/></table:template></table:Column></table:Table><Label/><clayout:MatrixLayout><clayout:MatrixLayoutRow><clayout:MatrixLayoutCell hAlign="End"><common:Button id="addRow" text="{i18n&gt;configuration.tile_actions.table.add}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.add_tooltip}" press="addRow" width="100px"/><common:Button id="deleteRow" text="{i18n&gt;configuration.tile_actions.table.remove}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.remove_tooltip}" press="deleteRow" width="100px"/></clayout:MatrixLayoutCell></clayout:MatrixLayoutRow></clayout:MatrixLayout></form:content></form:SimpleForm><HBox visible="false"><Dialog id="selectIconDialog" leftButton="ok" rightButton="cancel" title="{i18n&gt;configuration.select_icon}"><content><layout:ResponsiveFlowLayout id="icons"/><HBox visible="true"><Button id="ok" enabled="{/config/ok.enabled}" text="{i18n&gt;configuration.ok}"/><Button id="cancel" text="{i18n&gt;configuration.cancel}" press="onSelectIconClose"/></HBox></content></Dialog></HBox></core:View>',
	"sap/ushell/components/tiles/applauncherdynamic/Configuration.view.xml":'<core:View controllerName="sap.ushell.components.tiles.applauncherdynamic.Configuration" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:table="sap.ui.table" xmlns:clayout="sap.ui.commons.layout" xmlns:common="sap.ui.commons"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" visible="false"/><form:SimpleForm id="configuration" maxContainerCols="8" minWidth="1024" editable="true"><form:content><core:Title id="categoryCommon" text="{i18n&gt;configuration.category.general}"/><Label text="{i18n&gt;configuration.display_title_text}"/><Input id="titleInput" value="{/config/display_title_text}" width="100%" tooltip="{i18n&gt;configuration.display_title_text.tooltip}" enabled="{/config/editable}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_subtitle_text}"/><Input id="subtitleInput" value="{/config/display_subtitle_text}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_subtitle_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.keywords}"/><Input id="keywordsInput" value="{/config/display_search_keywords}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.keywords.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_icon_url}"/><Input id="iconInput" value="{/config/display_icon_url}" enabled="{/config/editable}" placeholder="sap-icon://inbox" tooltip="{i18n&gt;configuration.display_icon_url.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onIconValueHelpRequest" showValueHelp="true"/><Label text="{i18n&gt;configuration.display_info_text}"/><Input id="infoInput" value="{/config/display_info_text}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_info_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_number_unit}"/><Input id="number_unitInput" value="{/config/display_number_unit}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_number_unit.tooltip}"/><core:Title id="categoryDynamicData" text="{i18n&gt;configuration.category.dynamic_data}"/><Label text="{i18n&gt;configuration.service_url}"/><Input id="serviceUrlInput" value="{/config/service_url}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.service_url.tooltip}"/><Label text="{i18n&gt;configuration.service_refresh_interval}"/><Input id="refreshInput" value="{/config/service_refresh_interval}" type="Number" enabled="{/config/editable}" placeholder="{i18n&gt;configuration.seconds}" tooltip="{i18n&gt;configuration.seconds.tooltip}"/><core:Title id="categoryNavigation" text="{i18n&gt;configuration.category.navigation}"/><Label text="{i18n&gt;configuration.navigation_use_semantic_object}"/><CheckBox id="useLpdCheckbox" selected="{/config/navigation_use_semantic_object}" select="onCheckBoxChange" tooltip="{i18n&gt;configuration.navigation_use_semantic_object.tooltip}" enabled="{/config/editable}"/><Label text="{i18n&gt;configuration.semantic_object}"/><Input id="navigation_semantic_objectInput" width="100%" tooltip="{i18n&gt;configuration.semantic_object.tooltip}" maxLength="30" liveChange="onConfigurationInputChange" valueHelpRequest="onValueHelpRequest" showValueHelp="true" showSuggestion="true" enabled="{= ${/enabled} &amp;&amp; ${/config/editable}}" value="{/value}"/><Label text="{i18n&gt;configuration.navigation_semantic_action}"/><Input id="navigation_semantic_actionInput" value="{/config/navigation_semantic_action}" width="100%" maxLength="50" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_action.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onActionValueHelpRequest" showValueHelp="true" showSuggestion="true"/><Label text="{i18n&gt;configuration.navigation_semantic_parameters}"/><Input id="navigation_semantic_parametersInput" value="{/config/navigation_semantic_parameters}" width="100%" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_parameters.tooltip}"/><Label text="{i18n&gt;configuration.navigation_target_url}"/><Input id="targetUrl" value="{/config/navigation_target_url}" type="Url" width="100%" tooltip="{i18n&gt;configuration.navigation_target_url.tooltip}"/><core:Title id="categoryTileActions" text="{i18n&gt;configuration.category.tile_actions}"/><table:Table id="tileActions" rows="{/config/tile_actions_rows}" selectionBehavior="Row" selectionMode="Multi" visibleRowCount="3" enableColumnReordering="false" rowHeight="30px"><table:Column id="menuItem" width="80px" tooltip="{i18n&gt;configuration.tile_actions.table.menu_item_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.menu_item}"/><table:template><common:TextField value="{menu_title}" enabled="{editable}" valueState="{valueState}"/></table:template></table:Column><table:Column id="targetType" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.target_type_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.target_type}"/><table:template><common:ComboBox id="targetTypeCB" value="{target_type}" enabled="{editable}" change="handleTargetTypeChange"/></table:template></table:Column><table:Column id="navigationTarget" width="162px" tooltip="{i18n&gt;configuration.tile_actions.table.navigation_target_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.navigation_target}"/><table:template><Input liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionValueHelp" showValueHelp="{isTargetTypeIntent}" showSuggestion="{isTargetTypeIntent}" value="{navigation_target}" enabled="{editable}"/></table:template></table:Column><table:Column id="action" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.action_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.action}"/><table:template><common:TextField value="{action}" enabled="{isTargetTypeIntent}"/></table:template></table:Column><table:Column id="icon" width="110px" tooltip="{i18n&gt;configuration.tile_actions.table.icon_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.icon}"/><table:template><Input value="{icon}" placeholder="sap-icon://inbox" enabled="{/config/editable}" valueState="{iconValueState}" valueStateText="{iconValueStateText}" liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionIconValueHelp" showValueHelp="true"/></table:template></table:Column></table:Table><Label/><clayout:MatrixLayout><clayout:MatrixLayoutRow><clayout:MatrixLayoutCell hAlign="End"><common:Button id="addRow" text="{i18n&gt;configuration.tile_actions.table.add}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.add_tooltip}" press="addRow" width="100px"/><common:Button id="deleteRow" text="{i18n&gt;configuration.tile_actions.table.remove}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.remove_tooltip}" press="deleteRow" width="100px"/></clayout:MatrixLayoutCell></clayout:MatrixLayoutRow></clayout:MatrixLayout></form:content></form:SimpleForm><HBox visible="false"><Dialog id="selectIconDialog" leftButton="ok" rightButton="cancel" title="{i18n&gt;configuration.select_icon}"><content><layout:ResponsiveFlowLayout id="icons"/><HBox visible="true"><Button id="ok" enabled="{/config/ok.enabled}" text="{i18n&gt;configuration.ok}"/><Button id="cancel" text="{i18n&gt;configuration.cancel}" press="onSelectIconClose"/></HBox></content></Dialog></HBox></core:View>',
	"sap/ushell/components/tiles/cdm/applauncher/manifest.json":'{"_version":"1.1.0","sap.flp":{"type":"tile","tileSize":"1x1"},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncher","_version":"1.0.0","type":"component","applicationVersion":{"version":"1.0.0"},"title":"{{title}}","description":"","tags":{"keywords":[]},"ach":"CA-FE-FLP-EU"},"sap.ui":{"_version":"1.1.0","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncher","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncher.StaticTile","type":"JS"},"handleValidation":false}}',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json":'{"_version":"1.1.0","sap.flp":{"type":"tile","tileSize":"1x1"},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncherdynamic","_version":"1.0.0","type":"component","applicationVersion":{"version":"1.0.0"},"title":"{{title}}","description":"","tags":{"keywords":[]},"ach":"CA-FE-FLP-EU"},"sap.ui":{"_version":"1.1.0","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncherdynamic","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile","type":"JS"},"handleValidation":false}}',
	"sap/ushell/manifest.json":'{"_version":"1.9.0","sap.app":{"id":"sap.ushell","type":"library","embeds":["components/appfinder","components/factsheet","components/homepage","components/shell/MeArea","components/shell/Notifications","components/shell/Search","components/shell/ShellElements","components/shell/UserImage","components/shell/defaults","components/tiles/cdm/applauncher","components/tiles/cdm/applauncherdynamic","plugins/PluginLifeCycleWrapper","plugins/appwarmup","plugins/ghostapp","plugins/rta-personalize","plugins/rta","renderers/fiori2/search/container"],"applicationVersion":{"version":"1.60.40"},"title":"SAP library: sap.ushell","description":"SAP library: sap.ushell","resources":"resources.json","offline":true,"openSourceComponents":[{"name":"touchpunch","packagedWithMySelf":true,"version":"0.0.0"},{"name":"resize_event","packagedWithMySelf":true,"version":"0.0.0"}]},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_hcb"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.60","libs":{"sap.ui.core":{"minVersion":"1.60.42"},"sap.ui.layout":{"minVersion":"1.60.42"},"sap.m":{"minVersion":"1.60.42"},"sap.ui.table":{"minVersion":"1.60.42","lazy":true}}},"library":{"i18n":false}}}',
	"sap/ushell/plugins/appwarmup/manifest.json":'{"_version":"1.1.0","sap.app":{"_version":"1.1.0","id":"sap.ushell.plugins.appwarmup","type":"component","applicationVersion":{"version":"1.0.0"}},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.54.0","libs":{"sap.ui.core":{"minVersion":"1.54.0"}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/plugins/ghostapp/manifest.json":'{"_version":"1.2.0","sap.app":{"_version":"1.2.0","id":"sap.ushell.plugins.ghostapp","i18n":"i18n/i18n.properties","type":"application","applicationVersion":{"version":"11.7.0-SNAPSHOT"},"title":"Warmup Application","description":"List report app for code warm-up during idle time","tags":{"keywords":[]},"ach":"MM-FIO-IM-SGM","dataSources":{"mainService":{"uri":"/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/","type":"OData","settings":{"localUri":"localService/metadata.xml"}}},"offline":false,"resources":"resources.json","sourceTemplate":{"id":"ui5template.smarttemplate","version":"1.0.0"}},"sap.fiori":{"_version":"1.1.0","registrationIds":["F1595"],"archeType":"analytical"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_bluecrystal"]},"sap.ui5":{"_version":"1.1.0","services":{"ShellUIService":{"factoryName":"sap.ushell.plugins.appwarmup.ShellUIService"}},"resources":{"js":[],"css":[]},"config":{"sapFiori2Adaptation":true},"dependencies":{"minUI5Version":"1.53.0-SNAPSHOT","libs":{"sap.ui.core":{},"sap.m":{"lazy":false},"sap.ui.comp":{"lazy":false},"sap.ui.generic.app":{"minVersion":"1.34.0"},"sap.uxap":{"lazy":false},"sap.suite.ui.generic.template":{}}},"models":{"":{"dataSource":"mainService","preload":true,"settings":{"defaultBindingMode":"TwoWay","defaultCountMode":"Inline","refreshAfterChange":false}}},"extends":{"extensions":{}},"contentDensities":{"compact":true,"cozy":true},"componentName":"sap.ushell.plugins.ghostapp"},"sap.ui.generic.app":{"_version":"1.1.0","pages":[{"entitySet":"MaterialMultiStockByDates","component":{"name":"sap.suite.ui.generic.template.ListReport","list":true,"settings":{"smartVariantManagement":true}}}]},"sap.platform.abap":{"_version":"1.1.0","uri":"/sap/bc/ui5_ui5/sap/stock_multimas1"},"sap.platform.hcp":{"_version":"1.1.0","uri":""},"sap.copilot":{"_version":"1.0.0","contextAnalysis":{"allowAddingObjectsFromAppScreenToCollection":false}}}',
	"sap/ushell/plugins/rta-personalize/manifest.json":'{"_version":"1.1.0","sap.app":{"_version":"1.1.0","i18n":"i18n/i18n.properties","id":"sap.ushell.plugins.rta-personalize","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.dt":{"minVersion":"1.30.1","lazy":true},"sap.ui.rta":{"minVersion":"1.30.1","lazy":true}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/plugins/rta/manifest.json":'{"_version":"1.1.0","sap.app":{"_version":"1.1.0","i18n":"i18n/i18n.properties","id":"sap.ushell.plugins.rta","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.dt":{"minVersion":"1.30.1","lazy":true},"sap.ui.rta":{"minVersion":"1.30.1","lazy":true}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/renderers/fiori2/ShellHeader.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui.shell" xmlns:core="sap.ui.core"><ShellHeader id="shell-header" showLogo="{/currentState/showLogo}" visible="{/currentState/headerVisible}" showSeparators="false" headItems="{path:\'/currentState/headItems\',factory:\'.shellUpdateAggItem\'}" headEndItems="{path:\'/currentState/headEndItems\',factory:\'.shellUpdateAggItem\',filters:[{path:\'\',test:\'.isHeadEndItemNotInOverflow\'}]}"><title><ShellTitle id="shellTitle" text="{/title}"/></title><appTitle><ShellAppTitle id="shellAppTitle" text="{/currentState/application/title}" tooltip="{i18n&gt;shellNavMenu_openMenuTooltip}"/></appTitle></ShellHeader></core:FragmentDefinition>',
	"sap/ushell/renderers/fiori2/ShellLayout.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui.shell" xmlns:lp="sap.ushell.ui.launchpad" xmlns:core="sap.ui.core"><ShellLayout floatingContainerVisible="false" toolAreaVisible="{/currentState/toolAreaVisible}" headerVisible="{/currentState/headerVisible}" backgroundColorForce="false" showBrandLine="false" showAnimation="false" enableCanvasShapes="{/enableBackGroundShapes}" id="shell"><canvasSplitContainer><SplitContainer id="shell-split" showSecondaryContent="{/currentState/showPane}" subHeader="{path:\'/currentState/subHeader\',factory:\'.shellUpdateAggItem\'}" secondaryContent="{path:\'/currentState/paneContent\',factory:\'.shellUpdateAggItem\'}"><content><lp:ViewPortContainer id="viewPortContainer" defaultState="Center" afterSwitchState=".onAfterViewPortSwitchState" afterNavigate=".onAfterNavigate"/></content><secondaryContent/></SplitContainer></canvasSplitContainer><rightFloatingContainer><RightFloatingContainer id="right-floating-container" top="6.875" hideItemsAfterPresentation="true" visible="{/currentState/showRightFloatingContainer}" floatingContainerItems="{path:\'/currentState/RightFloatingContainerItems\',factory:\'.shellUpdateAggItem\'}" insertItemsWithAnimation="{path:\'/animationMode\',formatter:\'.isAnimationModeNotMinimal\'}"/></rightFloatingContainer></ShellLayout></core:FragmentDefinition>',
	"sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.controller.js":function(){
/* the subsequent text seems not to contain a copyright or license statement */
(function(){"use strict";sap.ui.controller("tiles.indicatorHarveyBall.HarveyBallTile",{onInit:function(){this.getView().setModel(new sap.ui.model.json.JSONModel());this.initializeVariables();this.attachHandlers();this.getVariable("tile").setState(sap.suite.ui.commons.LoadState.Loading);this.readChipConfiguration();},attachHandlers:function(){var t=this;var c=this.getVariable("chip");if(c.visible){c.visible.attachVisible(function(v){if(v){t.onVisible();}else{t.abortAllOpenODataRequests();}});}this.getVariable("tile").attachPress(function(){t.abortAllOpenODataRequests();var i=t.getVariable("indicatorUtils");t.getVariable("cache").setKpivalueById(t.getVariable("chipId"),null);window.location.hash=i.getNavigationTarget(t.getVariable("evalData"),t.getVariable("system"));});},initializeVariables:function(){this._variables={};this._oDataRequests={};var v=this.getView();var V=v.getViewData();var t=v.oTile;var c=V.chip;this.setVariable("indicatorUtils",sap.ushell.components.tiles.indicatorTileUtils.util);this.setVariable("cache",sap.ushell.components.tiles.indicatorTileUtils.cache);this.setVariable("hasAppeared",false);this.setVariable("chip",c);this.setVariable("tile",t);this.setVariable("tileControl",t.getTileContent()[0].getContent());this.setVariable("configurationString",c.configuration.getParameterValueAsString("tileConfiguration"));this.setVariable("system",c.url.getApplicationSystem());},getVariable:function(k){return this._variables[k];},setVariable:function(k,v){this._variables[k]=v;},readChipConfiguration:function(){var t=this;var c=this.getVariable("chip");var u=this.getVariable("indicatorUtils");u.getParsedChip(this.getVariable("configurationString"),function(e){t.setVariable("evalData",e);t.setVariable("chipId",e.TILE_PROPERTIES.id);t.setVariable("tileProperties",e.TILE_PROPERTIES);if(c.preview){c.preview.setTargetUrl(u.getNavigationTarget(e,t.getVariable("system")));t.loadPreviewData();if(c.preview.isEnabled()){t.getVariable("tile").setState(sap.suite.ui.commons.LoadState.Loaded);}else{t.loadActualData();}}});},loadPreviewData:function(){var t=this.getVariable("indicatorUtils").getTileTitleSubtitle(this.getVariable("chip"));this.getView().getModel().setData({fractionValue:34,value:100,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:"OneByOne",color:"Good",state:sap.suite.ui.commons.LoadState.Loading,header:t.title||this.getVariable("indicatorUtils").getChipTitle(this.getVariable("evalData")),subheader:t.subTitle||this.getVariable("indicatorUtils").getChipSubTitle(this.getVariable("evalData"))});},loadActualData:function(){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.getVariable("cache").setEvaluationById(this.getVariable("chipId"),this.getVariable("evalData"));this.onEvalFiltersFetched();}else{this.fetchEvalFilters(this.onEvalFiltersFetched);}},registerOpenODataRequest:function(k,r){this._oDataRequests[k]=r;},deregisterOpenODataRequest:function(k){delete this._oDataRequests[k];},abortAllOpenODataRequests:function(){for(var a in this._oDataRequests){try{this.getVariable("indicatorUtils").abortPendingODataCalls(this._oDataRequests[a]);delete this._oDataRequests[a];}catch(e){}}},fetchKpiValue:function(p){function m(o,u,C,S,g){var D=o.read(u,null,null,true,function(h){t.deregisterOpenODataRequest(C.type);if(h&&h.results&&h.results.length){try{if(C.thresholds&&C.thresholds.length){t._setThresholdValues(h.results[0]);}k[C.type]=h.results[0][C.measure];k.unit=k.unit||h.results[0][C.unit]||"";if(--d==0){t.getVariable("cache").setKpivalueById(t.getVariable("chipId"),k);S.call(t,k);}}catch(e){t.logError(e);}}else{g.call(t,"no data");}},function(e){t.deregisterOpenODataRequest(C.type);if(e&&e.response){g.call(t,e.message);}});t.registerOpenODataRequest(C.type,D);}var t=this;var i=this.getVariable("indicatorUtils");var c=this.getVariable("cache").getKpivalueById(this.getVariable("chipId"));if(c){p.fnS.call(t,c);}else{var M=p.measure1,s=p.measure2;var u=p.url,E=p.entitySet;var v=p.filters;var f=p.fractionFilters.concat(v);var q,Q;var a,b,k;var d=2;f.forEach(function(e){e.value=e.value+"";e.valueTo=e.valueTo+"";});if(p.thresholds&&p.thresholds.length){q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,M+","+p.thresholds,null,v);}else{q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,M,null,v);}Q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,s,null,f);a=q.unit[0];b=Q.unit[0];k={kpiValue:null,fractionValue:null,unit:""};if(q){m(q.model,q.uri,{measure:M,type:"kpiValue",unit:a,thresholds:p.thresholds},p.fnS,p.fnE);}if(Q){m(Q.model,Q.uri,{measure:s,type:"fractionValue",unit:b},p.fnS,p.fnE);}if(!(q&&Q)){p.fnE.call(t,"Error Preparing Query Service URI");}}},_setThresholdValues:function(d){var t=this.getVariable("oThreshold");if(t){if(this.getVariable("evalData").EVALUATION.VALUES_SOURCE=="RELATIVE"){if(t["TA"].COLUMN_NAME){t["TA"].VALUE=parseFloat(d[t["TA"].COLUMN_NAME]);for(var e in t){if(!t[e].COLUMN_NAME){t[e].VALUE=t["TA"].VALUE*t[e].VALUE/100;}}}}else{for(var e in t){if(t[e].COLUMN_NAME){t[e].VALUE=parseFloat(d[t[e].COLUMN_NAME]);}}}}this.setVariable("oThreshold",t);},getThresholdObject:function(){var t=this.getVariable("oThreshold");if(!t){var T=this.getVariable("evalData").EVALUATION_VALUES;var t={};for(var i=0,l=T.length;i<l;i++){t[T[i].TYPE]={VALUE:parseFloat(T[i].FIXED),COLUMN_NAME:T[i].COLUMN_NAME};}this.setVariable("oThreshold",t);}return t;},hasSomeValue:function(){var f=true;if(arguments.length){for(var i=0,l=arguments.length;i<l;i++){if(!(arguments[i]||arguments[i]=="0")){f=false;break;}}}else{f=false;}return f;},getTrendColor:function(k){var c="Neutral";var t,g,W,a,C,b;if(this.getVariable("tileProperties").isFractionMeasure){t=this.getThresholdObject();g=this.getVariable("evalData").EVALUATION.GOAL_TYPE;if(g=="MA"){W=t.WL;C=t.CL;if(this.hasSomeValue(W,C)){c="Good";if(k<C.VALUE){c="Error";}else if(k<=W.VALUE){c="Critical";}}}else if(g=='MI'){a=t.WH;b=t.CH;if(this.hasSomeValue(a,b)){c="Error";if(k<a.VALUE){c="Good";}else if(k<=b.VALUE){c="Critical";}}}else{W=t.WL;C=t.CL;a=t.WH;b=t.CH;if(this.hasSomeValue(a,b,C,W)){if(k<=C.VALUE||k>=a.VALUE){c="Error";}else if((W.VALUE>=k&&k>=C.VALUE)||(b.VALUE>=k&&k>=a.VALUE)){c="Critical";}else{c="Good";}}}}return sap.suite.ui.commons.InfoTileValueColor[c];},_getThresholdMeasures:function(){var t=[];var T=this.getThresholdObject();for(var e in T){if(T[e].COLUMN_NAME){t.push(T[e].COLUMN_NAME);}}return t;},onEvalFiltersFetched:function(){var t=this;if(this.getVariable("chip").visible.isVisible()&&!this.getVariable("hasAppeared")){try{var k=this.getVariable("evalData");var u=k.EVALUATION.ODATA_URL;var E=k.EVALUATION.ODATA_ENTITYSET;var a=this.getVariable("tileProperties");var h=[];var v=this.getVariable("indicatorUtils").prepareFilterStructure(k.EVALUATION_FILTERS,k.ADDITIONAL_FILTERS);var f=k.EVALUATION.COLUMN_NAME;var b=f;var c=[];if(a.isFractionMeasure){b=a.harveyTotalMeasure;c=this._getThresholdMeasures();}else{h=this.getVariable("indicatorUtils").prepareFilterStructure(a.harveyFilters||h);}this.setVariable("totalMeasure",b);this.setVariable("fractionMeasure",f);this.fetchKpiValue({measure1:b,measure2:f,entitySet:E,thresholds:c,url:u,filters:v,fractionFilters:h,fnS:function(d){d.kpiValue=Number(d.kpiValue);d.fractionValue=Number(d.fractionValue);t.setVariable("kpiValue",d.kpiValue);t.setVariable("fractionValue",d.fractionValue);t.onKpiValueFetched(d.kpiValue,d.unit,d.fractionValue);},fnE:this.logError});t.setVariable("hasAppeared",true);}catch(e){this.logError(e);}}},fetchEvalFilters:function(s){var t=this;try{var a=this.getVariable("cache").getEvaluationById(this.getVariable("chipId"));if(a){this.getVariable("evalData").EVALUATION_FILTERS=a.EVALUATION_FILTERS;s();}else{var d=this.getVariable("indicatorUtils").getFilterFromRunTimeService(this.getVariable("evalData"),function(f){t.deregisterOpenODataRequest("kpiFilterRequest");t.getVariable("evalData").EVALUATION_FILTERS=f;t.getVariable("cache").setEvaluationById(t.getVariable("chipId"),t.getVariable("evalData"));s.call(t);},function(e){this.logError(e);t.deregisterOpenODataRequest("kpiFilterRequest");});this.registerOpenODataRequest("kpiFilterRequest",d);}}catch(e){this.logError(e);}},onKpiValueFetched:function(k,a,f,b){var i=this.getVariable("indicatorUtils");var s=k;var d=f;var e=this.getVariable("evalData");var g=e.EVALUATION.SCALING;if(g==-2){s*=100;d*=100;}var c=this.isACurrencyMeasure(this.getVariable("totalMeasure"));s=i.getLocaleFormattedValue(Number(s),g,null,c,a);c=this.isACurrencyMeasure(this.getVariable("fractionMeasure"));d=i.getLocaleFormattedValue(Number(d),g,null,c,a);this.getView().getModel().setProperty("/totalLabel",s+" "+a);this.getView().getModel().setProperty("/fractionLabel",d+" "+b);this.getView().getModel().setProperty("/color",this.getTrendColor(f));this.getView().getModel().setProperty("/value",k);this.getView().getModel().setProperty("/fractionValue",f);var n=i.getNavigationTarget(this.getVariable("evalData"),this.getVariable("system"));this.getVariable("tile").$().wrap("<a href ='"+n+"'/>");this.getVariable("tile").setState(sap.suite.ui.commons.LoadState.Loaded);},logError:function(e){this.getVariable("tile").setState(sap.suite.ui.commons.LoadState.Failed);this.getVariable("indicatorUtils").logError(e,this.getVariable("tile"));},onVisible:function(i){if(!this.getVariable("hasAppeared")){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.onEvalFiltersFetched();}else{this.fetchEvalFilters(this.onEvalFiltersFetched);}}},onExit:function(){this.abortAllOpenODataRequests();}});}());
},
	"sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.view.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.components.tiles.indicatorTileUtils.smartBusinessUtil");jQuery.sap.require("sap.ui.model.analytics.odata4analytics");jQuery.sap.require("sap.ca.ui.model.format.NumberFormat");sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorHarveyBall.HarveyBallTile",{getControllerName:function(){},createContent:function(c){var m=new sap.suite.ui.commons.HarveyBallMicroChart({total:"{/value}",size:"{/size}",totalLabel:"{/totalLabel}",items:[new sap.suite.ui.commons.HarveyBallMicroChartItem({fraction:"{/fractionValue}",fractionLabel:"{/fractionLabel}",color:"{/color}"})]});var t=new sap.suite.ui.commons.TileContent({size:"{/size}",content:m});this.oTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t]});}});}());
},
	"sap/ushell/components/tiles/indicatorTileUtils/indicatorTileHelper.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper");
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper=function(t){this.tile=t;};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setErrorState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Failed);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadingState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loading);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadedState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loaded);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendDown=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Down);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendUp=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Up);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendNeutral=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.None);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdGood=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdBad=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdCritical=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdNeutral=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.calculateThreshold=function(a,v,i){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTile=function(t){this.tile=t;};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.getTile=function(){return this.tile;};
}());
},
	"sap/ushell/components/tiles/sbtilecontent.js":function(){jQuery.sap.declare("sap.ushell.components.tiles.sbtilecontent");sap.ui.define(["sap/m/TileContent","sap/m/TileContentRenderer","sap/ui/core/Control"],function(T,R,C){"use strict";
var t=C.extend("numeric.TileContent_Timestamp",{
ontap:function(e){if(this.getParent().getRefreshOption()){e.preventDefault();e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}this.getParent().fireRefresh();}},
renderer:function(r,c){r.write("<div");r.writeElementData(c);r.addClass("sapMTileCntFtrTxt");if(c.getParent().getRefreshOption()){r.addClass("sapMLnk");}r.writeClasses();r.addStyle("position","absolute");r.addStyle("z-index","2");r.addStyle(r.getConfiguration().getRTL()?"left":"right","auto");r.writeStyles();r.write(">");var a=c.getParent().getTimestamp();if(a){if(!c.getParent().getRefreshOption()){r.writeEscaped(a);}else if(r.getConfiguration().getRTL()){r.writeEscaped(a+"\u2009");r.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner");}else{r.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner");r.writeEscaped("\u2009"+a);}}r.write("</div>");}
});
return T.extend("sap.ushell.components.tiles.sbtilecontent",{metadata:{properties:{timestamp:{type:"string"},refreshOption:{type:"boolean"}},events:{refresh:{}}},init:function(){this.addDependent(this._oTimestamp=new t());},getAltText:function(){var a=T.prototype.getAltText.apply(this,arguments);if(this.getTimestamp()){a+=(a===""?"":"\n")+this.getTimestamp();}return a;},renderer:{_renderFooter:function(r,c){R._renderFooter.apply(this,arguments);r.renderControl(c._oTimestamp);}}});},true);
},
	"sap/ushell/renderers/fiori2/search/SearchConfiguration.js":function(){(function(g){"use strict";sap.ui.define(['sap/ushell/renderers/fiori2/search/controls/SearchResultListSelectionHandler'],function(D){var a=D.getMetadata().getName();jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchConfiguration');var u={multiSelect:{type:'bool'},sinaProvider:{type:'string'},odataProvider:{type:'bool'},searchBusinessObjects:{type:'bool'},charts:{type:'bool'},maps:{type:'bool'},newpie:{type:'bool'},personalizationStorage:{type:'string'},defaultSearchScopeApps:{type:'bool'},searchScopeWithoutAll:{type:'bool'}};var S=sap.ushell.renderers.fiori2.search.SearchConfiguration=function(){this.init.apply(this,arguments);};S.prototype={init:function(p){try{var c=g['sap-ushell-config'].renderers.fiori2.componentData.config.esearch;jQuery.extend(true,this,c);}catch(e){}this.handleOutdatedConfigurationParameters();this.setDefaults();this.readUrlParameters();this.setModulePaths();this.createDefaultDataSourceConfig();},setModulePaths:function(){if(!this.modulePaths){return;}for(var i=0;i<this.modulePaths.length;++i){var m=this.modulePaths[i];jQuery.sap.registerModulePath(m.moduleName,m.urlPrefix);}},handleOutdatedConfigurationParameters:function(){try{var c=g['sap-ushell-config'].renderers.fiori2.componentData.config;if(c.searchBusinessObjects!==undefined&&this.searchBusinessObjects===undefined){if(c.searchBusinessObjects==='hidden'||c.searchBusinessObjects===false){this.searchBusinessObjects=false;}else{this.searchBusinessObjects=true;}}if(c.enableSearch!==undefined&&this.enableSearch===undefined){this.enableSearch=c.enableSearch;}}catch(e){}},setDefaults:function(){if(this.searchBusinessObjects===undefined){this.searchBusinessObjects=true;}if(this.odataProvider===undefined){this.odataProvider=false;}if(this.multiSelect===undefined){this.multiSelect=true;}if(this.charts===undefined){this.charts=true;}if(this.maps===undefined){this.maps=false;}if(this.newpie===undefined){this.newpie=false;}if(this.dataSources===undefined){this.dataSources={};}if(this.enableSearch===undefined){this.enableSearch=true;}if(this.personalizationStorage===undefined){this.personalizationStorage='auto';}if(this.defaultSearchScopeApps===undefined){this.defaultSearchScopeApps=false;}if(this.searchScopeWithoutAll===undefined){this.searchScopeWithoutAll=false;}this.dataSourceConfigurations={};this.dataSourceConfigurations_Regexes=[];if(this.dataSources){for(var i=0;i<this.dataSources.length;i++){var d=this.dataSources[i];if(d.id){this.dataSourceConfigurations[d.id]=d;}else if(d.regex){var f=d.regexFlags||undefined;var r=new RegExp(d.regex,f);if(r){d.regex=r;this.dataSourceConfigurations_Regexes.push(d);}}else{var m="Following datasource configuration does neither include a valid id nor a regular expression, therefore it is ignored:\n"+JSON.stringify(d);jQuery.sap.log.warning(m,'sap.ushell.renderers.fiori2.search.SearchConfiguration');}}}this.dataSources=undefined;this.documentDataSource={searchResultListItem:'sap.ushell.renderers.fiori2.search.controls.SearchResultListItemDocument'};this.dataSourceConfigurations['noteprocessorurl']=this.dataSourceConfigurations['noteprocessorurl']||{};this.dataSourceConfigurations['noteprocessorurl'].searchResultListItem=this.dataSourceConfigurations['noteprocessorurl'].searchResultListItem||'sap.ushell.renderers.fiori2.search.controls.SearchResultListItemNote';this.dataSourceConfigurations['noteprocessorurl'].searchResultListSelectionHandler=this.dataSourceConfigurations['noteprocessorurl'].searchResultListSelectionHandler||'sap.ushell.renderers.fiori2.search.controls.SearchResultListSelectionHandlerNote';},createDefaultDataSourceConfig:function(){this.defaultDataSourceConfig={searchResultListItem:undefined,searchResultListItemControl:undefined,searchResultListItemContent:undefined,searchResultListItemContentControl:undefined,searchResultListSelectionHandler:a,searchResultListSelectionHandlerControl:D};},readUrlParameters:function(){var p=this.parseUrlParameters();for(var b in p){if(b==='demoMode'){this.searchBusinessObjects=true;this.enableSearch=true;continue;}var c=u[b];if(!c){continue;}var v=p[b];switch(c.type){case'bool':v=(v==='true'||v==='');break;default:}this[b]=v;}},parseUrlParameters:function(){var U=sap.ushell.Container.getService("URLParsing");var p=U.parseParameters(g.location.search);var n={};for(var k in p){var v=p[k];if(v.length!==1){continue;}v=v[0];if(typeof v!=='string'){continue;}n[k]=v;}return n;},loadCustomModulesAsync:function(){var t=this;if(t._loadCustomModulesProm){return t._loadCustomModulesProm;}var d,b=[];for(var c in t.dataSourceConfigurations){d=t.loadCustomModulesForDataSourceIdAsync(c);b.push(d);}t._loadCustomModulesProm=Promise.all(b);return t._loadCustomModulesProm;},loadCustomModulesForDataSourcesAsync:function(d,b){var c=[];for(var i=0;i<d.length;i++){var e=Array.isArray(b)&&b.length>i&&b[i]||{};var f=this.loadCustomModulesForDataSourceAsync(d[i],e);c.push(f);}return Promise.all(c);},loadCustomModulesForDataSourceAsync:function(d,b){b=b||{};return this.loadCustomModulesForDataSourceIdAsync(d.id,b);},loadCustomModulesForDataSourceIdAsync:function(d,b){if(!d){return Promise.resolve();}this._dataSourceLoadingProms=this._dataSourceLoadingProms||{};var c=this._dataSourceLoadingProms[d];if(!c){var e=[{moduleAttrName:"searchResultListItem",controlAttrName:"searchResultListItemControl"},{moduleAttrName:"searchResultListItemContent",controlAttrName:"searchResultListItemContentControl"},{moduleAttrName:"searchResultListSelectionHandler",controlAttrName:"searchResultListSelectionHandlerControl"}];var f=this._prepareDataSourceConfigurationForDataSource(d,b);var h,j=[];for(var i=0;i<e.length;i++){h=this._doLoadCustomModulesAsync(d,f,e[i].moduleAttrName,e[i].controlAttrName);j.push(h);}c=Promise.all(j);c._resolvedOrFailed=false;c.then(function(){c._resolvedOrFailed=true;});this._dataSourceLoadingProms[d]=c;}return c;},_doLoadCustomModulesAsync:function(d,b,m,c,f,h){var t=this;return new Promise(function(r,i){if(b[m]&&(!b[c]||b[c]==t.defaultDataSourceConfig[c])){try{sap.ui.require([b[m].replace(/[.]/g,'/')],function(k){b[c]=k;r();});}catch(e){var j="Could not load custom module '"+b[m]+"' for data source with id '"+d+"'. ";j+="Falling back to default data source configuration.";jQuery.sap.log.warning(j,'sap.ushell.renderers.fiori2.search.SearchConfiguration');b[m]=f||t.defaultDataSourceConfig[m];b[c]=h||t.defaultDataSourceConfig[c];r();}}else{if(!b[c]){b[m]=f||t.defaultDataSourceConfig[m];b[c]=h||t.defaultDataSourceConfig[c];}r();}});},getDataSourceConfig:function(d){if(this._dataSourceLoadingProms&&this._dataSourceLoadingProms[d.id]&&!this._dataSourceLoadingProms[d.id]._resolvedOrFailed){return this.defaultDataSourceConfig;}var c=this.dataSourceConfigurations[d.id];if(!c){c=this.defaultDataSourceConfig;this.dataSourceConfigurations[d.id]=c;}return c;},_prepareDataSourceConfigurationForDataSource:function(d,b){var c={};if(this.dataSourceConfigurations[d]){c=this.dataSourceConfigurations[d];}else{for(var i=0;i<this.dataSourceConfigurations_Regexes.length;i++){if(this.dataSourceConfigurations_Regexes[i].regex.test(d)){c=this.dataSourceConfigurations_Regexes[i];break;}}}if(b&&b.isDocumentConnector){if(!c.searchResultListItem){c.searchResultListItem=this.documentDataSource.searchResultListItem;}else{var m="Will attempt to load '"+c.searchResultListItem+"' instead of '"+this.documentDataSource.searchResultListItem+"' for data source '"+d+"'";jQuery.sap.log.warning(m,'sap.ushell.renderers.fiori2.search.SearchConfiguration');}}this.dataSourceConfigurations[d]=c;return c;},isLaunchpad:function(){try{return!!sap.ushell.Container.getService("CrossApplicationNavigation");}catch(e){return false;}},getSina:function(){return{};}};var s;
S.getInstance=function(){if(s){return s;}s=new S();return s;};
return S;});})(window);
},
	"sap/ushell/renderers/fiori2/search/SearchFacetDialogModel.js":function(){(function(g){"use strict";sap.ui.define(['sap/ushell/renderers/fiori2/search/SearchModel'],function(S){return S.extend("sap.ushell.renderers.fiori2.search.SearchFacetDialogModel",{constructor:function(s){var t=this;S.prototype.constructor.apply(t,[{searchModel:s}]);t.aFilters=[];},prepareFacetList:function(){var t=this;var m=t.getDataSource();t.setProperty('/facetDialog',t.oFacetFormatter.getDialogFacetsFromMetaData(m,t));},facetDialogSingleCall:function(p){var t=this;t.chartQuery.dimension=p.sAttribute;t.chartQuery.top=p.sAttributeLimit;return t.chartQuery.getResultSetAsync().then(function(r){var f=t.oFacetFormatter.getDialogFacetsFromChartQuery(r,t,p.bInitialFilters);var F=jQuery.extend(true,{},f);f.items4pie=F.items;var a=0,b=0,c=0,d=0;for(var i=0;i<f.items4pie.length;i++){if(i<9){f.items4pie[i].pieReady=true;if(f.items4pie[i].value>0){a+=f.items4pie[i].value;}}else{f.items4pie[i].pieReady=false;if(f.items4pie[i].value>0){b+=f.items4pie[i].value;}}}c=b*100/(a+b);c=Math.ceil(c);d=a/9;d=Math.floor(d);if(c>0){var n=f.items4pie[0].clone([true,true]);n.value=d;n.label=sap.ushell.resources.i18n.getText("facetPieChartOverflowText2",[c,9]);n.pieReady=true;n.valueLabel=""+d;n.isPieChartDummy=true;f.items4pie.push(n);}for(var j=0;j<f.items4pie.length;j++){f.items4pie[j].percentageMissingInBigPie=c;}t.setProperty(p.sBindingPath+"/items4pie",f.items4pie);t.setProperty(p.sBindingPath+"/items",f.items);});},resetChartQueryFilterConditions:function(){var t=this;if(t.chartQuery){t.chartQuery.resetConditions();}},hasFilterCondition:function(f){var t=this;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){return true;}}return false;},hasFilter:function(i){var t=this;var f=i.filterCondition;return t.hasFilterCondition(f);},addFilter:function(i){var t=this;if(!t.hasFilter(i)){t.aFilters.push(i);}},removeFilter:function(a){var t=this;var f=a.filterCondition;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){t.aFilters.splice(i,1);return;}}},changeFilterAdvaced:function(a,A){var t=this;var f=a.filterCondition;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){t.aFilters[i].advanced=A;return;}}},addFilterCondition:function(f,a){this.chartQuery.filter.autoInsertCondition(f);},getAttributeDataType:function(f){switch(f.dataType){case"Double":return"number";case"Timestamp":return"timestamp";case"Date":return"date";case"String":if(f.matchingStrategy===this.sinaNext.MatchingStrategy.Text){return"text";}return"string";default:return"string";}}});});})(window);
},
	"sap/ushell/renderers/fiori2/search/SearchModel.js":function(){(function(g){"use strict";sap.ui.define(['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/SearchResultListFormatter','sap/ushell/renderers/fiori2/search/SearchFacetsFormatter','sap/ushell/renderers/fiori2/search/SearchTabStripsFormatter','sap/ushell/renderers/fiori2/search/suggestions/SuggestionHandler','sap/ushell/renderers/fiori2/search/SearchConfiguration','sap/ushell/renderers/fiori2/search/personalization/PersonalizationStorage','sap/ushell/renderers/fiori2/search/eventlogging/EventLogger','sap/ushell/renderers/fiori2/search/SearchUrlParser'],function(S,c,d,f,h,l,P,E,m){
sap.ushell.renderers.fiori2.search.getModelSingleton=function(){if(!sap.ushell.renderers.fiori2.search.oModel){sap.ushell.renderers.fiori2.search.oModel=new sap.ushell.renderers.fiori2.search.SearchModel();}return sap.ushell.renderers.fiori2.search.oModel;};
var n;
var o=sap.ui.model.json.JSONModel.extend("sap.ushell.renderers.fiori2.search.SearchModel",{
constructor:function(p){var t=this;p=p||{};sap.ui.model.json.JSONModel.prototype.constructor.apply(t,[]);t.config=l.getInstance();t.setSizeLimit(1000);t.suggestionHandler=new h({model:this});t.searchApplications=S.refuseOutdatedRequests(t.searchApplications,'search');t.pageSize=10;t.appTopDefault=20;t.boTopDefault=t.pageSize;t.setProperty('/isQueryInvalidated',true);t.setProperty('/isBusy',false);t.setProperty('/tableColumns',[]);t.setProperty('/tableSortableColumns',[]);t.setProperty('/tableResults',[]);t.setProperty('/results',[]);t.setProperty('/appResults',[]);t.setProperty('/boResults',[]);t.setProperty('/origBoResults',[]);t.setProperty('/count',0);t.setProperty('/boCount',0);t.setProperty('/appCount',0);t.setProperty('/facets',[]);t.setProperty('/dataSources',[t.allDataSource,t.appDataSource]);t.setProperty('/appSearchDataSource',null);t.setProperty('/currentPersoServiceProvider',null);t.setProperty('/businessObjSearchEnabled',true);t.setProperty('/initializingObjSearch',false);t.setProperty('/suggestions',[]);t.setProperty('/resultToDisplay',S.loadResultViewType());t.setProperty('/displaySwitchVisibility',false);t.setProperty('/documentTitle','Search');t.setProperty('/top',t.boTopDefault);t.setProperty('/orderBy',{});t.setProperty('/facetVisibility',false);t.setProperty('/focusIndex',0);t.setProperty('/errors',[]);t.setProperty('/isErrorPopovered',false);this.setProperty("/nlqSuccess",false);this.setProperty("/nlqDescription","");this.setProperty("/firstSearchWasExecuted",false);t.setProperty('/multiSelectionAvailable',false);t.setProperty('/multiSelectionEnabled',false);t.setProperty('/multiSelection/actions',[]);if(p.searchModel&&p.searchModel._initBusinessObjSearchProm){t._initBusinessObjSearchProm=p.searchModel._initBusinessObjSearchProm;t.oFacetFormatter=new sap.ushell.renderers.fiori2.search.SearchFacetsFormatter(t);}t.initBusinessObjSearch();t.searchUrlParser=new m({model:this});},
createSina:function(){var s=new jQuery.Deferred();sap.ui.require(['sap/ushell/renderers/fiori2/search/sinaNext/sina/sinaFactory'],function(a){if(!this.config.searchBusinessObjects){a.createAsync('dummy').then(function(b){s.resolve(b);},function(e){s.reject(e);});return;}var t=[];if(window.location.href.indexOf("demo/FioriLaunchpad.html")!==-1){t=['sample'];}else{t=['abap_odata','inav2','dummy'];}if(this.config.sinaConfiguration){t=[this.config.sinaConfiguration];}a.createByTrialAsync(t).then(function(b){s.resolve(b);},function(e){s.reject(e);});}.bind(this));return s;},
initBusinessObjSearch:function(){var t=this;if(t._initBusinessObjSearchProm){return t._initBusinessObjSearchProm;}t.setProperty("/initializingObjSearch",true);t.setProperty("/isBusy",true);var a={label:sap.ushell.resources.i18n.getText("genericLoading"),labelPlural:sap.ushell.resources.i18n.getText("genericLoading"),enabled:false,id:'$$Loading$$'};t.setProperty("/dataSource",a);t.setProperty("/dataSources",[a]);t._initBusinessObjSearchProm=this.createSina().then(function(s){t.sinaNext=s;t.eventLogger=E.newInstance({sinaNext:t.sinaNext});t.eventLogger.logEvent({type:t.eventLogger.SESSION_START});t.createAllAndAppDataSource();t.setProperty('/defaultDataSource',t.allDataSource);if(t.config.defaultSearchScopeApps||t.config.searchScopeWithoutAll){t.setProperty('/defaultDataSource',t.appDataSource);}if(s.provider.id==='dummy'){t.setProperty('/defaultDataSource',t.appDataSource);t.setProperty('/businessObjSearchEnabled',false);t.config.searchBusinessObjects=false;t.setProperty('/facetVisibility',false);}if(s.provider.id==='inav2'&&t.config.isLaunchpad()){sap.ushell.Container.addRemoteSystem(new sap.ushell.System({alias:"ENTERPRISE_SEARCH",platform:"abap",baseUrl:"/ENTERPRISE_SEARCH"}));}t.setProperty('/uiFilter',t.sinaNext.createFilter());t.loadDataSources();t.resetDataSource(false);t.resetFilterConditions(false);t.query=t.sinaNext.createSearchQuery();if(t.config.multiSelect){t.query.setMultiSelectFacets(true);}t.oFacetFormatter=new sap.ushell.renderers.fiori2.search.SearchFacetsFormatter(t);t.tabStripFormatter=new f.Formatter(t.allDataSource);t.dataSourceTree=t.tabStripFormatter.tree;t.setProperty("/initializingObjSearch",false);t.setProperty("/isBusy",false);},function(e){var b=sap.ushell.resources.i18n.getText('searchError');var i=sap.ushell.resources.i18n.getText('searchInitialError');if(e.message){i=i+" "+e.message;}sap.m.MessageBox.error(i,{icon:sap.m.MessageBox.Icon.NONE,title:b,actions:sap.m.MessageBox.Action.OK,onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit});});return t._initBusinessObjSearchProm;},
initPersonalization:function(){var t=this;if(this.initPersonalizationPromise){return this.initPersonalizationPromise;}this.initPersonalizationPromise=P.getInstance().then(function(p){var a=false;try{a=p.getItem('search-facet-panel-button-state');}catch(e){}t.setFacetVisibility(a,false);},function(){return jQuery.Deferred().resolve(true);});return this.initPersonalizationPromise;},
isBusinessObjSearchConfigured:function(){try{var a=window['sap-ushell-config'].renderers.fiori2.componentData.config;return a.searchBusinessObjects!=='hidden';}catch(e){return true;}},
isBusinessObjSearchEnabled:function(){return this.getProperty('/businessObjSearchEnabled');},
setProperty:function(a,v,C,A){var t=this;var r=sap.ui.model.json.JSONModel.prototype.setProperty.apply(this,arguments);switch(a){case'/boResults':case'/appResults':t.calculateResultList();break;case'/appCount':case'/boCount':r=t.setProperty('/count',t.getProperty('/appCount')+t.getProperty('/boCount'));break;default:break;}return r;},
getPersonalizationStorageInstance:function(){return P.getInstanceSync();},
getSearchBoxTerm:function(){return this.getProperty('/uiFilter/searchTerm')||'';},
setSearchBoxTerm:function(s,a){var t=this;var b=s.replace(/^\s+/,"");this.setProperty('/uiFilter/searchTerm',b);this.calculateSearchButtonStatus();if(b.length===0){return;}if(a||a===undefined){t._firePerspectiveQuery();}},
getLastSearchTerm:function(){return this.query.getSearchTerm();},
setFacetVisibility:function(v,a){if(sap.ui.Device.system.phone){v=false;}this.setProperty('/facetVisibility',v);try{this.getPersonalizationStorageInstance().setItem('search-facet-panel-button-state',v);}catch(e){}if((a||a===undefined)){this._firePerspectiveQuery({preserveFormerResults:true});}},
getFacetVisibility:function(){return this.getProperty('/facetVisibility');},
getTop:function(){return this.getProperty('/top');},
setTop:function(t,a){this.setProperty('/top',t);if(a||a===undefined){this._firePerspectiveQuery({preserveFormerResults:true});}},
resetTop:function(){this.setProperty('/focusIndex',0);if(this.isAppCategory()){this.setTop(this.appTopDefault,false);}else{this.setTop(this.boTopDefault,false);}},
getOrderBy:function(){return this.getProperty('/orderBy');},
setOrderBy:function(a,b){this.setProperty('/orderBy',a);if(b||b===undefined){this._firePerspectiveQuery({preserveFormerResults:true});}},
resetOrderBy:function(a){this.setProperty('/orderBy',{});if(a||a===undefined){this._firePerspectiveQuery({preserveFormerResults:true});}},
isEqualOrderBy:function(a,q){if(!a.orderBy){return q.length===0;}if(q.length!==1){return false;}var b=q[0];if(b.id!==a.orderBy){return false;}if(a.sortOrder==='ASC'){return b.order===this.sinaNext.SortOrder.Ascending;}else{return b.order===this.sinaNext.SortOrder.Descending;}},
getDocumentTitle:function(){var s=this.getSearchBoxTerm();var a=this.getDataSource().label;var t;if(this.getDataSource()===this.allDataSource){t=sap.ushell.resources.i18n.getText('searchTileTitleProposalAll',[s]);}else{t=sap.ushell.resources.i18n.getText('searchTileTitleProposal',[s,a]);}return t;},
resetQuery:function(){S.hasher.reset();this.resetTop();this.setSearchBoxTerm('');this.resetDataSource(false);this.resetFilterConditions(false);this.query.resetConditions();this.query.setSearchTerm('random-jgfhfdskjghrtekjhg');this.setProperty('/facets',[]);this.setProperty('/results',[]);this.setProperty('/appResults',[]);this.setProperty('/boResults',[]);this.setProperty('/origBoResults',[]);this.setProperty('/count',0);this.setProperty('/boCount',0);this.setProperty('/appCount',0);},
createAllAndAppDataSource:function(){this.allDataSource=this.sinaNext.getAllDataSource();this.allDataSource.label=sap.ushell.resources.i18n.getText("label_all");this.allDataSource.labelPlural=sap.ushell.resources.i18n.getText("label_all");this.appDataSource=this.sinaNext._createDataSource({id:'$$APPS$$',label:sap.ushell.resources.i18n.getText("label_apps"),labelPlural:sap.ushell.resources.i18n.getText("label_apps"),type:this.sinaNext.DataSourceType.Category});},
loadDataSources:function(){var a=this.sinaNext.getBusinessObjectDataSources();a=a.slice();var b=this._excludeTransactionDataSource(a);a=b.dataSources;this.setProperty("/appSearchDataSource",b.transactionDataSource);if(!this.config.odataProvider&&this.config.isLaunchpad()){a.splice(0,0,this.appDataSource);if(!this.config.searchScopeWithoutAll){a.splice(0,0,this.allDataSource);}}else{a.splice(0,0,this.allDataSource);}this.setProperty("/dataSources",a);this.setProperty("/searchTermPlaceholder",this.calculatePlaceholder());},
_excludeTransactionDataSource:function(a){var t=null;for(var i=0;i<a.length;i++){if(a[i].id.endsWith("TRANSACTIONS~")){t=a[i];a.splice(i,1);break;}}return{dataSources:a,transactionDataSource:t};},
resetDataSource:function(a){this.setDataSource(this.getDefaultDataSource(),a);},
isAllCategory:function(){var a=this.getProperty("/uiFilter/dataSource");return a===this.allDataSource;},
isOtherCategory:function(){var a=this.getProperty("/uiFilter/dataSource");return a.type===this.sinaNext.DataSourceType.Category&&!this.isAllCategory();},
isAppCategory:function(){var a=this.getProperty("/uiFilter/dataSource");return a===this.appDataSource;},
getDataSource:function(){return this.getProperty("/uiFilter/dataSource");},
getDefaultDataSource:function(){return this.getProperty("/defaultDataSource");},
setDataSource:function(a,b,r){if(this.getDataSource()!==a){this.eventLogger.logEvent({type:this.eventLogger.DATASOURCE_CHANGE,dataSourceId:a.id});}this.updateDataSourceList(a);this.getProperty("/uiFilter").setDataSource(a);if(r||r===undefined){this.resetTop();}this.setProperty("/searchTermPlaceholder",this.calculatePlaceholder());this.calculateSearchButtonStatus();if(b||b===undefined){this._firePerspectiveQuery();}},
getServerDataSources:function(){var t=this;if(t.getDataSourcesDeffered){return t.getDataSourcesDeffered;}t.getDataSourcesDeffered=t.sina.getDataSources().then(function(a){return jQuery.grep(a,function(b){return b.getType()!=='Category';});});return t.getDataSourcesDeffered;},
notifyFilterChanged:function(){jQuery.each(this.aBindings,function(i,b){if(b.sPath==='/uiFilter/rootCondition'){b.checkUpdate(true);}});},
addFilterCondition:function(a,b){if(a.attribute||a.conditions){this.getProperty("/uiFilter").autoInsertCondition(a);}else{this.setDataSource(a,false);}if(b||b===undefined){this._firePerspectiveQuery({preserveFormerResults:false});}this.notifyFilterChanged();},
removeFilterCondition:function(a,b){if(a.attribute||a.conditions){this.getProperty("/uiFilter").autoRemoveCondition(a);}else{this.setDataSource(a,false);}if(b||b===undefined){this._firePerspectiveQuery({preserveFormerResults:true});}this.notifyFilterChanged();},
resetFilterConditions:function(a){this.getProperty("/uiFilter").resetConditions();if(a||a===undefined){this._firePerspectiveQuery();}this.notifyFilterChanged();},
doSuggestion:function(){this.suggestionHandler.doSuggestion(this.getProperty('/uiFilter').clone());},
abortSuggestions:function(){this.suggestionHandler.abortSuggestions();},
_firePerspectiveQuery:function(a,p){var t=this;this.initBusinessObjSearch().then(function(){var b=function(){return t._doFirePerspectiveQuery(a,p);};t.initPersonalization().then(b);});},
_doFirePerspectiveQuery:function(a,p){var t=this;var b,e;if(jQuery.isPlainObject(a)){b=a.deserialization;e=a.preserveFormerResults;}else{b=a?a:undefined;e=p?p:undefined;}var u=this.getProperty('/uiFilter');if(u.equals(this.query.filter)&&this.getTop()===this.query.top&&this.isEqualOrderBy(this.getOrderBy(),this.query.sortOrder)&&this.getCalculateFacetsFlag()===this.query.calculateFacets&&!this.getProperty('/isQueryInvalidated')){return(new jQuery.Deferred()).resolve();}if(S.getUrlParameter('nlq')==='true'){this.query.setNlq(true);}if((this.query.filter.dataSource&&u.dataSource!==this.query.filter.dataSource)||(this.query.filter.searchTerm&&u.searchTerm!==this.query.filter.searchTerm)){this.resetOrderBy(false);}if(!b&&!e){if(!u.equals(this.query.filter)){this.resetTop();}}if(u.searchTerm!==this.query.filter.searchTerm||!u.rootCondition.equals(this.query.filter.rootCondition)){this.tabStripFormatter.invalidate(this.getDataSource());}if(this.getProperty('/isQueryInvalidated')===true){this.query.resetResultSet();this.setProperty('/isQueryInvalidated',false);}this.query.setFilter(this.getProperty('/uiFilter').clone());this.query.setTop(this.getTop());this.query.setSortOrder(this.assembleSortOrder());this.query.setCalculateFacets(this.getCalculateFacetsFlag());this.cleanErrors();this.setProperty("/queryFilter",this.query.filter);sap.ui.getCore().getEventBus().publish("allSearchStarted");this.setProperty('/isBusy',true);this.abortSuggestions();this.calculateVisibility();if(!b){this.updateSearchURLSilently();}this.eventLogger.logEvent({type:this.eventLogger.SEARCH_REQUEST,searchTerm:this.getProperty('/uiFilter/searchTerm'),dataSourceKey:this.getProperty('/uiFilter/dataSource').id});return jQuery.when.apply(null,[this.normalSearch(e),this.appSearch()]).then(function(){t.setProperty('/tabStrips',t.tabStripFormatter.format(t.getDataSource(),t.perspective,t));return t.oFacetFormatter.getFacets(t.getDataSource(),t.perspective,t).then(function(i){if(i&&i.length>0){i[0].change=jQuery.sap.now();t.setProperty('/facets',i);}});}).always(function(){document.title=t.getDocumentTitle();sap.ui.getCore().getEventBus().publish("allSearchFinished");t.setProperty('/isBusy',false);t.setProperty("/firstSearchWasExecuted",true);t.notifyFilterChanged();});},
assembleSortOrder:function(){var a=this.getOrderBy();if(!a.orderBy){return[];}var b=this.sinaNext.SortOrder.Ascending;if(a.sortOrder==='DESC'){b=this.sinaNext.SortOrder.Descending;}return[{id:a.orderBy,order:b}];},
getCalculateFacetsFlag:function(){if(this.getDataSource().type===this.sinaNext.DataSourceType.Category||this.getFacetVisibility()){return true;}else{return false;}},
appSearch:function(){var t=this;this.setProperty("/appResults",[]);this.setProperty("/appCount",0);if(!this.isAllCategory()&&!this.isAppCategory()){return jQuery.when(true);}var a=this.query.filter.dataSource===this.allDataSource?this.appTopDefault:this.query.top;return this.searchApplications(this.query.filter.searchTerm,a,0).then(function(r){t.setProperty("/appCount",r.totalResults);t.setProperty("/appResults",r.getElements());},function(e){t.pushError({type:"error",title:e.name,description:e,keep:e.keep});return jQuery.when(true);});},
searchApplications:function(s,t,a){return sap.ushell.Container.getService("Search").queryApplications({searchTerm:s,top:t,skip:a});},
normalSearch:function(p){var t=this;if(!p){t.resetAndDisableMultiSelection();}if(!t.isBusinessObjSearchEnabled()||t.isAppCategory()){this.setProperty("/boResults",[]);this.setProperty("/origBoResults",[]);this.setProperty("/boCount",0);this.setProperty("/nlqSuccess",false);this.setProperty("/nlqDescription","");return jQuery.when(true);}var q=new jQuery.Deferred();var s=function(a){t.perspective=a;t.setProperty("/nlqSuccess",false);if(a.nlqSuccess){t.setProperty("/nlqSuccess",true);t.setProperty("/nlqDescription",a.title);}t._afterSearchPrepareResultList(t.perspective,p).then(function(){q.resolve();});};var e=function(a){t.normalSearchErrorHandling(a);t.perspective=null;q.resolve();};t.setDataSource(t.getDataSource(),false,false);t.query.setCalculateFacets(t.getCalculateFacetsFlag());t.query.getResultSetAsync().then(function(a){return s(a);},e);return q;},
_prepareTableResults:function(r){var t=this;var i,j,k;var e=[];var p=this.sinaNext.dataSourceMap[this.getDataSource().id].attributesMetadata;for(i=0;i<p.length;i++){if(p[i].usage.Detail&&p[i].type!=="GeoJson"&&p[i].id.match(/latitude|longitude/i)==null){e.push(p[i]);}}var q=function(a,b){if(a.usage.Detail.displayOrder<b.usage.Detail.displayOrder)return-1;if(a.usage.Detail.displayOrder>b.usage.Detail.displayOrder)return 1;return 0;};e.sort(q);var s=r;for(i=0;i<r.length;i++){s[i].cells=[];for(j=0;j<e.length;j++){s[i].cells[j]={};}}for(i=0;i<r.length;i++){var u=r[i].itemattributes;for(j=0;j<e.length;j++){for(k=0;k<u.length;k++){if(e[j].id===u[k].key){s[i].cells[j]={value:u[k].value};}}}s[i].cells.unshift({value:r[i].title,uri:r[i].uri,titleNavigation:r[i].titleNavigation,isTitle:true});if(r[i].navigationObjects!==undefined&&r[i].navigationObjects.length>0){s[i].cells.push({value:sap.ushell.resources.i18n.getText("intents"),navigationObjects:r[i].navigationObjects,isRelatedApps:true});}}t.setProperty("/tableResults",s);var v=[];var w=[];var x=0;for(i=0;i<e.length;i++){if(e[i].id.match(/latitude|longitude/i)==null){x++;v.push({name:e[i].label,key:"searchColumnKey"+x,attributeId:e[i].id,index:x});}}v.unshift({name:t.getDataSource().label,key:"searchColumnKey0",attributeId:"SEARCH_DATASOURCE_AS_ID",index:0});var y=s[0].cells.length-1;if(s[0].cells[y].isRelatedApps){v.push({name:sap.ushell.resources.i18n.getText("intents"),key:"searchColumnKey"+v.length,attributeId:"SEARCH_APPS_AS_ID",index:v.length});}t.setProperty("/tableColumns",v);for(i=0;i<p.length;i++){var z=p[i];if(z.isSortable){w.push({name:z.label,key:"searchSortableColumnKey"+i,attributeId:z.id,selected:t.getProperty("/orderBy").orderBy===z.id});}}w.unshift({name:sap.ushell.resources.i18n.getText("defaultRank"),key:"searchSortableColumnKeyDefault",attributeId:"",selected:jQuery.isEmptyObject(t.getProperty("/orderBy"))});t.setProperty("/tableSortableColumns",w);},
_afterSearchPrepareResultList:function(s,p){var t=this;t.setProperty("/boCount",s.totalCount);var i;t.setProperty("/boResults",[]);t.setProperty("/origBoResults",s.items);t.setProperty("/boCount",0);var a=new c();var b=a.format(s,t.query.filter.searchTerm);var e;var j=[];var k=[];for(i=0;i<b.length;i++){e=b[i];j.push(e.dataSource);k.push({isDocumentConnector:e.isDocumentConnector});}var q=t.config.loadCustomModulesForDataSourcesAsync(j,k);var r=$.Deferred();Promise.all([Promise.resolve(s),q]).then(function(u){var s=u[0];if(!t.isAllCategory()&&!t.isOtherCategory()&&!t.isAppCategory()&&s.totalCount>0){t._prepareTableResults(b);}t.setProperty("/boCount",s.totalCount);t.setProperty("/boResults",b);t.enableOrDisableMultiSelection();r.resolve();});return r.promise();},
resetAndDisableMultiSelection:function(){this.setProperty("/multiSelectionAvailable",false);this.setProperty("/multiSelectionEnabled",false);},
enableOrDisableMultiSelection:function(){var a=this.getDataSource();var b=this.config.getDataSourceConfig(a);var s=new b.searchResultListSelectionHandlerControl();if(s){this.setProperty("/multiSelectionAvailable",s.isMultiSelectionAvailable());}else{this.setProperty("/multiSelectionAvailable",false);}},
_endWith:function(s,a){return s.indexOf(a,s.length-a.length)!==-1;},
calculatePlaceholder:function(){var t=this;if(t.isAllCategory()){return sap.ushell.resources.i18n.getText("search");}else{return sap.ushell.resources.i18n.getText("searchInPlaceholder",t.getDataSource().labelPlural);}},
updateDataSourceList:function(a){var b=this.getProperty('/dataSources');if(!this.config.searchScopeWithoutAll){while(b.length>0&&b[0]!==this.allDataSource){b.shift();}}if(a===this.allDataSource||a===this.appDataSource){return;}if(a&&a.id){if(a.id.indexOf('~')>=0){return;}}for(var i=0;i<b.length;++i){var e=b[i];if(e===a){return;}}b.unshift(a);this.setProperty('/dataSources',b);},
invalidateQuery:function(){this.setProperty('/isQueryInvalidated',true);},
autoStartApp:function(){var t=this;if(t.getProperty("/appCount")&&t.getProperty("/appCount")===1&&t.getProperty("/count")&&t.getProperty("/count")===1){var a=t.getProperty("/appResults");if(a&&a.length>0&&a[0]&&a[0].url&&t.getProperty('/uiFilter/searchTerm')&&a[0].tooltip&&t.getProperty('/uiFilter/searchTerm').toLowerCase().trim()===a[0].tooltip.toLowerCase().trim()){if(a[0].url[0]==='#'){window.location.href=a[0].url;}else{S.openURL(a[0].url,'_blank');}}}},
getResultToDisplay:function(){return this.getProperty('/resultToDisplay');},
setResultToDisplay:function(t){this.setProperty('/resultToDisplay',t);S.saveResultViewType(t);},
calculateVisibility:function(){var t=this;if(t.isAppCategory()){t.setResultToDisplay("appSearchResult");t.setProperty('/displaySwitchVisibility',false);}else if(t.isAllCategory()||t.isOtherCategory()){t.setResultToDisplay("searchResultList");t.setProperty('/displaySwitchVisibility',false);}else{var r=t.getResultToDisplay();if(!(r==="searchResultList"||r==="searchResultTable"||r==="searchResultMap")){t.setResultToDisplay("searchResultList");}t.setProperty('/displaySwitchVisibility',true);}},
calculateSearchButtonStatus:function(){if(this.getDataSource()===this.getProperty('/defaultDataSource')&&this.getSearchBoxTerm().length===0){this.setProperty('/searchButtonStatus','close');}else{this.setProperty('/searchButtonStatus','search');}},
calculateResultList:function(){var t=this;var r=[];var b=t.getProperty('/boResults');if(b&&b.length){r.push.apply(r,b);}var a=t.getProperty('/appResults');if(a&&a.length>0){var e={type:'appcontainer',tiles:a};if(r.length>0){if(r.length>3){r.splice(3,0,e);}else{r.push(e);}}else{r=[e];}}sap.ui.model.json.JSONModel.prototype.setProperty.apply(this,['/results',r]);},
getDebugInfo:function(){var t=[this.sinaNext.getDebugInfo()];t.push('See also Enterprise Search Setup Documentation:');t.push('http://help.sap.com/saphelp_uiaddon10/helpdata/en/57/7d77c891954c21a19c242694e83177/frameset.htm');return t.join('\n');},
getErrors:function(){return this.getProperty('/errors');},
cleanErrors:function(){this.setProperty('/errors',jQuery.grep(this.getProperty('/errors'),function(e){return e.keep;}));},
pushError:function(e){var t=this;e.title=e.title==="[object Object]"?sap.ushell.resources.i18n.getText('searchError'):e.title;var a=this.getProperty('/errors');a.push(e);t.setProperty('/errors',a);},
normalSearchErrorHandling:function(e){if(!e){return;}var s=function(t){return t.replace(/<(?:.|\n)*?>|[{}]/gm,'');};if(e instanceof this.sinaNext.core.Exception){this.pushError({type:"error",title:e.message,description:s(e.description)+'\n'+this.getDebugInfo(),keep:e.keep});return;}this.pushError({type:"error",title:e.toString(),description:e.toString()+'\n'+this.getDebugInfo(),keep:e.keep});},
updateSearchURLSilently:function(){var H=this.renderSearchURL();S.hasher.setHash(H);},
renderSearchURL:function(){return this.searchUrlParser.render();},
parseURL:function(){this.searchUrlParser.parse();}
});
o.injectSearchShellHelper=function(_){n=n||_;};
return o;});})(window);
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configuratorFactory.js":function(){window.sinaRequire=window.sinaRequire||(window.sap&&window.sap.ui&&window.sap.ui.require)||window.require;window.sinaDefine=window.sinaDefine||(window.sap&&window.sap.ui&&window.sap.ui.define)||window.define;window.sinaLog=window.sinaLog||(window.jQuery&&window.jQuery.sap&&window.jQuery.sap.log)||window.console;sinaDefine(['../core/core','./configurators/CustomFunctionConfigurator','./configurators/TemplateConfigurator','./configurators/TextResourceConfigurator','./configurators/SimpleValueConfigurator','./configurators/ListConfigurator','./configurators/ObjectConfigurator'],function(c,C,T,a,S,L,O){"use strict";var b=[L,O,C,T,a,S];var m={createConfiguratorAsync:function(o){o.createConfiguratorAsync=m.createConfiguratorAsync.bind(m);for(var i=0;i<b.length;++i){var d=b[i];if(d.prototype.isSuitable(o)){return m._createAsync(d,o);}}},_createAsync:function(d,o){var e=new d(o);return c.Promise.resolve().then(function(){return e.initResourceBundleAsync();}.bind(this)).then(function(){return e.initAsync();}.bind(this)).then(function(){return e;}.bind(this));}};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/Configurator.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";return c.defineClass({_init:function(o){this.type=o.type;this.typeContext=o.typeContext;this.configuration=o.configuration;this.createConfiguratorAsync=o.createConfiguratorAsync;},createContext:function(o,a){if(!o){return{objectStack:[a],configuratorStack:[this]};}var b=o.objectStack.slice();b.push(a);var d=o.configuratorStack.slice();d.push(this);return{objectStack:b,configuratorStack:d};},getResourceBundle:function(a){for(var i=a.configuratorStack.length-1;i>=0;--i){var b=a.configuratorStack[i];if(b.resourceBundle){return b.resourceBundle;}}},getEvaluateTemplateFunction:function(a){var b=function(e,o){return function(t){return e(t,o);};};for(var i=a.configuratorStack.length-1;i>=0;--i){var d=a.configuratorStack[i];var o=a.objectStack[i];if(d.type&&d.type.evaluateTemplate){return b(d.type.evaluateTemplate,o);}}},initResourceBundleAsync:function(){if(!this.configuration.resourceBundle){return undefined;}return this.loadResourceBundleAsync(this.configuration.resourceBundle).then(function(r){this.resourceBundle=r;}.bind(this));},loadResourceBundleAsync:function(u){if(!window.jQuery){return c.Promise.resolve({getText:function(i){return i;}});}return new c.Promise(function(r,a){jQuery.sap.resources({url:u,async:true}).then(function(b){r(b);},function(e){a(e);});});},configure:function(){},configureAsync:function(){var a=arguments;return c.Promise.resolve().then(function(){return this.configure.apply(this,a);}.bind(this));},isInitialOrForced:function(v){if(this.force||typeof v==='undefined'||(c.isObject(v)&&v===null)||(c.isString(v)&&v.length===0)){return true;}return false;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/CustomFunctionConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(){if(c.isObject(this.configuration)){this.customFunction=this.configuration.func;this.force=this.configuration.force;return;}this.customFunction=this.configuration;this.force=false;},isSuitable:function(o){if(c.isFunction(o.configuration)){return true;}if(c.isObject(o.configuration)&&o.configuration.hasOwnProperty('func')){return true;}},configure:function(v,a){if(this.isInitialOrForced(v)){return this.customFunction(v,a);}return v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/ListConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(){this.elements=[];this.cache={};var p=[];for(var i=0;i<this.configuration.length;++i){var e=this.configuration[i];p.push(this.createElementConfiguratorAsync(this.type,e,i));}return c.Promise.all(p);},isSuitable:function(o){if(o.typeContext&&o.typeContext.multiple&&c.isList(o.configuration)){return true;}},createElementConfiguratorAsync:function(t,a,i){return this.createConfiguratorAsync({type:t,configuration:a}).then(function(b){this.elements.push({configuration:a,configurator:b,id:i});}.bind(this));},getElement:function(l){var a=this.typeContext.getElementId(l);var e=this.cache[a];if(e){return e;}for(var i=0;i<this.elements.length;++i){e=this.elements[i];if(this.matchId(l,e)){this.cache[a]=e;return e;}}},matchId:function(l,e){var a=this.typeContext.getElementId(l);var b=this.typeContext.getElementId(e.configuration);var m;if(c.isObject(b)&&b.hasOwnProperty('regExp')){if(!b.regExpObj){b.regExpObj=new RegExp(b.regExp,b.regExpFlags);}m=b.regExpObj.test(a);}else{m=a===b;}return m;},createEmptyUsedElements:function(){var u=[];for(var i=0;i<this.elements.length;++i){u.push(false);}return u;},configure:function(l,a){if(!l){l=[];}a=this.createContext(a,l);var u=this.createEmptyUsedElements();var e,b,n;for(var i=0;i<l.length;++i){b=l[i];e=this.getElement(b);if(!e){continue;}var d=e.configurator.configure(b,a);if(d!==b){l[i]=d;}u[e.id]={index:i};}var f;var g=0;if(this.typeContext.createElement){for(var j=0;j<u.length;++j){var h=u[j];e=this.elements[j];if(h){f=h;continue;}var t=this.typeContext.createElement(e.configuration,a);n=e.configurator.configure(t,a);var k=(f?f.index:-1)+g+1;l.splice(k,0,n);g++;if(this.typeContext.postProcessCreatedElement){this.typeContext.postProcessCreatedElement(n,a);}}}return l;},configureAsync:function(l,a){if(!l){l=[];}a=this.createContext(a,l);var u=this.createEmptyUsedElements();var b;var n=0;var d=function(f){if(f>=l.length){return null;}var g=l[f];var h=this.getElement(g);if(!h){return d(f+1);}u[h.id]={index:f};return c.Promise.resolve().then(function(){return h.configurator.configureAsync(g,a);}.bind(this)).then(function(i){if(i!==g){l[f]=i;}return d(f+1);}.bind(this));}.bind(this);var e=function(f){if(f>=this.elements.length){return null;}var g=this.elements[f];var h=u[f];if(h){b=h;return e(f+1);}var t=this.typeContext.createElement(g.configuration,a);return c.Promise.resolve().then(function(){return g.configurator.configureAsync(t,a);}.bind(this)).then(function(i){var j=(b?b.index:-1)+n+1;l.splice(j,0,i);n++;if(this.typeContext.postProcessCreatedElement){this.typeContext.postProcessCreatedElement(i,a);}return e(f+1);}.bind(this));}.bind(this);return c.Promise.resolve().then(function(){return d(0);}.bind(this)).then(function(){if(!this.typeContext.createElement){return null;}return e(0);}.bind(this)).then(function(){return l;}.bind(this));}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/ObjectConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(o){this.properties=[];var p=[];for(var i=0;i<this.type.properties.length;++i){var a=this.type.properties[i];var b=this.configuration[a.name];if(!b){continue;}p.push(this.createPropertyConfiguratorAsync(a,b));}return c.Promise.all(p);},createPropertyConfiguratorAsync:function(p,a){return this.createConfiguratorAsync({type:p.type,typeContext:p,configuration:a}).then(function(b){this.properties.push({name:p.name,configurator:b});}.bind(this));},isSuitable:function(o){if(c.isObject(o.configuration)&&c.isObject(o.type)&&o.type.type==='object'){return true;}},configure:function(o,a){a=this.createContext(a,o);this.object=o;for(var i=0;i<this.properties.length;++i){var p=this.properties[i];o[p.name]=p.configurator.configure(o[p.name],a);}return o;},configureAsync:function(o,a){a=this.createContext(a,o);this.object=o;var b=function(p){return c.Promise.resolve().then(function(){return p.configurator.configureAsync(o[p.name],a);}).then(function(v){o[p.name]=v;});};return c.Promise.all(c.map(this.properties,b)).then(function(){return o;}.bind(this));}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/SimpleValueConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(){if(c.isObject(this.configuration)){this.value=this.configuration.value;this.force=this.configuration.force;return;}this.value=this.configuration;this.force=false;},isSuitable:function(o){if(c.isString(o.type)&&['string','integer','object'].indexOf(o.type)>=0){return true;}return false;},configure:function(v,a){if(this.isInitialOrForced(v)){return this.value;}return v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/TemplateConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(){this.template=this.configuration.template;this.force=this.configuration.force;},isSuitable:function(o){if(c.isString(o.type)&&['string'].indexOf(o.type)>=0&&c.isObject(o.configuration)&&o.configuration.hasOwnProperty('template')){return true;}return false;},configure:function(v,a){if(this.isInitialOrForced(v)){var e=this.getEvaluateTemplateFunction(a);return e(this.configuration.template);}return v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/TextResourceConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(){this.resourceKey=this.configuration.resourceKey;this.force=this.configuration.force;},isSuitable:function(o){if(c.isString(o.type)&&['string'].indexOf(o.type)>=0&&c.isObject(o.configuration)&&o.configuration.resourceKey){return true;}return false;},configure:function(v,a){if(this.isInitialOrForced(v)){var r=this.resourceBundle||this.getResourceBundle(a);return r.getText(this.resourceKey);}return v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/core/ajax.js":function(){sinaDefine(['./core','./util'],function(c,u){"use strict";var m={};m.parseHeaders=function(h){var a={};var l=h.split('\n');for(var i=0;i<l.length;++i){var b=l[i];var d=b.indexOf(':');if(d>=0){var n=b.slice(0,d).toLowerCase();var v=b.slice(d+1);a[n]=v.trim();}}return a;};m.encodeUrlParameters=function(p){var r=[];for(var n in p){var v=p[n];r.push(encodeURIComponent(n)+'='+encodeURIComponent(v));}return r.join('&');};m.addEncodedUrlParameters=function(a,p){if(!p){return a;}var e=m.encodeUrlParameters(p);if(e.length>0){a+='?'+e;}return a;};m.Exception=c.Exception.derive({_init:function(x){this.xhttp=x;this.status=x.status;this.statusText=x.statusText;this.responseText=x.responseText;this.headers=m.parseHeaders(x.getAllResponseHeaders());c.Exception.prototype._init.apply(this,[{message:this.status+': '+this.statusText,description:this.responseText}]);}});m.request=function(p){return new Promise(function(r,a){var x=new XMLHttpRequest();x.onreadystatechange=function(){if(x.readyState==4&&(x.status==200||x.status==201||x.status==204)){r({data:x.responseText,headers:m.parseHeaders(x.getAllResponseHeaders())});return;}if(x.readyState==4){a(new m.Exception(x));}};var b=m.addEncodedUrlParameters(p.url,p.parameters);x.open(p.method,b,true);for(var h in p.headers){var d=p.headers[h];x.setRequestHeader(h,d);}x.send(p.data);});};m.Client=c.defineClass({_init:function(p){this._client=new m._Client(p);this.recordOptions={mode:u.getUrlParameter('recordingMode')||p.recordingMode||"none",path:u.getUrlParameter('recordingPath')||p.recordingPath||"",requestNormalization:p.requestNormalization||this._defaultRequestNormalization};this.records={};},_encodeObj:function(d){var r=[];for(var p in d)if(d.hasOwnProperty(p)){r.push(encodeURIComponent(p)+"="+encodeURIComponent(d[p]));}return r.join("&");},getJson:function(a,d){var t=this;if(t.recordOptions.mode==="none"){if(d){var D='?'+t._encodeObj(d);a=a+D;}return t._client.getJson(a);}if(t.recordOptions.mode==="replay"){return t._replay(a,null);}return t._client.getJson(a).then(function(r){return t._record(a,null,r);});},getXML:function(a){var t=this;if(t.recordOptions.mode==="none"){return t._client.getXML(a);}if(t.recordOptions.mode==="replay"){return t._replayXML(a);}return t._client.getXML(a).then(function(r){return t._recordXML(a,r);});},postJson:function(a,p){p=JSON.parse(JSON.stringify(p));var t=this;if(t.recordOptions.mode==="none"){return t._client.postJson(a,p);}if(t.recordOptions.mode==="replay"){return t._replay(a,p);}return t._client.postJson(a,p).then(function(r){return t._record(a,p,r);});},mergeJson:function(a,p){p=JSON.parse(JSON.stringify(p));var t=this;if(t.recordOptions.mode==="none"){return t._client.mergeJson(a,p);}if(t.recordOptions.mode==="replay"){return t._replay(a,p);}return t._client.mergeJson(a,p).then(function(r){return t._record(a,p,r);});},request:function(p){return this._client.request(p);},_record:function(a,p,r){var t=this;var k=a+JSON.stringify(t.recordOptions.requestNormalization(p));if(t.records[k]===undefined&&k.indexOf("NotToRecord")===-1){t.records[k]=JSON.parse(JSON.stringify(r.data));}return t._client.putJson(t.recordOptions.path,t.records).then(function(){return r;});},_recordXML:function(a,r){var t=this;var k=a;if(t.records[k]===undefined&&k.indexOf("NotToRecord")===-1){t.records[k]=r;}return t._client.putJson(t.recordOptions.path,t.records).then(function(){return r;});},_replay:function(a,p){var t=this;var k=a+JSON.stringify(t.recordOptions.requestNormalization(p));return t._client.getJson(t.recordOptions.path).then(function(r){return{data:r.data[k]};});},_replayXML:function(a){var t=this;var k=a;return t._client.getJson(t.recordOptions.path).then(function(r){return r.data[k];});},_defaultRequestNormalization:function(p){if(p===null){return"";}delete p.SessionID;delete p.SessionTimestamp;return p;}});m._Client=c.defineClass({_init:function(p){this.csrf=p.csrf;this.csrfByPassCache=p.csrfByPassCache||false;this.csrfToken=null;this.csrfFetchRequest=p.csrfFetchRequest||null;},jsonHeaders:{'Content-Type':'application/json','Accept':'application/json'},xmlHeaders:{'Content-Type':'application/xml','Accept':'application/xml'},getJson:function(a){return this.request({headers:this.jsonHeaders,method:'GET',url:a}).then(function(r){if(r.data.length===0){r.data='{}';}if(typeof(r.data)!=="object"){r.data=JSON.parse(r.data);}return r;});},getXML:function(a){return this.request({headers:this.xmlHeaders,method:'GET',url:a}).then(function(r){return r.data;});},postJson:function(a,d){return this.request({headers:this.jsonHeaders,method:'POST',url:a,data:JSON.stringify(d)}).then(function(r){if(r.data.length===0){r.data='{}';}if(typeof(r.data)!=="object"){r.data=JSON.parse(r.data);}return r;});},mergeJson:function(a,d){return this.request({headers:this.jsonHeaders,method:'MERGE',url:a,data:JSON.stringify(d)}).then(function(r){if(r.data.length===0){r.data='{}';}if(typeof(r.data)!=="object"){r.data=JSON.parse(r.data);}return r;});},putJson:function(d,a){return this.request({method:'PUT',url:d,data:JSON.stringify(a)}).catch(function(e){throw e;});},_fetchCsrf:function(){if(this.csrfFetchRequestPromise){return this.csrfFetchRequestPromise;}this.csrfFetchRequest.headers=this.csrfFetchRequest.headers||{};this.csrfFetchRequest.headers['x-csrf-token']='fetch';this.csrfFetchRequest.parameters=this.csrfFetchRequest.parameters||{};if(this.csrfByPassCache){this.csrfFetchRequest.parameters['_']=Date.now();}this.csrfFetchRequestPromise=m.request(this.csrfFetchRequest).then(function(r){this.csrfFetchRequestPromise=null;this.csrfToken=r.headers['x-csrf-token'];return r;}.bind(this));return this.csrfFetchRequestPromise;},_requestWithCsrf:function(p,r){if(m.addEncodedUrlParameters(this.csrfFetchRequest.url,this.csrfFetchRequest.parameters)===m.addEncodedUrlParameters(p.url,p.parameters)){return this._fetchCsrf();}if(r&&!this.csrfToken){return this._fetchCsrf().then(function(){return this._requestWithCsrf(p,false);}.bind(this));}p.headers=p.headers||{};p.headers['x-csrf-token']=this.csrfToken;return m.request(p).catch(function(e){if(r&&e.headers['x-csrf-token']&&e.headers['x-csrf-token'].toLowerCase()==='required'){return this._fetchCsrf().then(function(){return this._requestWithCsrf(p,false);}.bind(this));}return c.Promise.reject(e);}.bind(this));},request:function(p){if(!this.csrf){return m.request(p);}if(!this.csrfFetchRequest){this.csrfFetchRequest=p;}return this._requestWithCsrf(p,true);}});return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/core/core.js":function(){window.sinaRequire=window.sinaRequire||(window.sap&&window.sap.ui&&window.sap.ui.require)||window.require;window.sinaDefine=window.sinaDefine||(window.sap&&window.sap.ui&&window.sap.ui.define)||window.define;window.sinaLog=window.sinaLog||(window.jQuery&&window.jQuery.sap&&window.jQuery.sap.log)||window.console;sinaDefine([],function(){"use strict";var m={};m.map=function(l,c,h){var r=[];for(var i=0;i<l.length;++i){r.push(c.apply(h,[l[i]]));}return r;};m.filter=function(l,c){var r=[];for(var i=0;i<l.length;++i){var h=l[i];if(c(h)){r.push(h);}}return r;};m.object=function(p){var T=function(){};T.prototype=p;return new T();};m.extend=function(o,c){for(var k in c){o[k]=c[k];}return o;};m.firstCharToUpper=function(t,r){if(r){if(t[0]==='_'){t=t.slice(1);}}return t[0].toUpperCase()+t.slice(1);};m.isList=function(o){if(Object.prototype.toString.call(o)==='[object Array]'){return true;}return false;};m.isObject=function(o){if(m.isList(o)){return false;}return typeof o==='object';};m.isFunction=function(o){return typeof o==='function';};m.isString=function(o){return(typeof o)==='string';};m.isSimple=function(o){return(typeof o)!=='object'&&(typeof o)!=='function';};m.Promise=Promise;var g=function(){var c=(function(){return function(){if(arguments[0]==='_suppress_init_'){return;}this._genericInit.apply(this,arguments);};})();return c;};var B=g();B.prototype={_getClassHierarchyPrototypes:function(){var p=[];var c=this.constructor.prototype;while(c){p.push(c);c=c.constructor.superPrototype;}p.reverse();return p;},_genericInit:function(){var c=arguments[0]||{};var p=this._getClassHierarchyPrototypes();for(var i=0;i<p.length;++i){var h=p[i];if(h.hasOwnProperty('_beforeInitProperties')){h._beforeInitProperties.apply(this,arguments);}this._initPropertiesOfPrototype(h,c);if(h.hasOwnProperty('_afterInitProperties')){h._afterInitProperties.apply(this,arguments);}}if(this._init){this._init.apply(this,arguments);}},_initPropertiesOfPrototype:function(p,c){var s=function(j,l,n){if(!j.aggregation){return;}if(!n){return;}if(m.isList(n)){for(var i=0;i<n.length;++i){var o=n[i];o.parent=l;}}else{n.parent=l;}};if(!p.hasOwnProperty('_meta')||!p._meta.properties){return;}for(var h in p._meta.properties){var j=p._meta.properties[h];var k=c[h];if(k!==undefined){this[h]=k;s(j,this,this[h]);continue;}if(j.required){throw new m.Exception('initialization property missing:'+h);}if(j.default!==undefined){if(m.isFunction(j.default)){this[h]=j.default.apply(this,[]);}else{this[h]=j.default;}}s(j,this,this[h]);}},_initClone:function(){},_equals:function(o){if(!o){return false;}if(!m.isObject(o)){return false;}if(o.constructor!==this.constructor){return false;}return true;},equals:function(o,c){var p=this._getClassHierarchyPrototypes();for(var i=0;i<p.length;++i){var h=p[i];if(!h.hasOwnProperty('_equals')){continue;}if(!h._equals.apply(this,[o,c])){return false;}}return true;},clone:function(){var c=new this.constructor('_suppress_init_');var p=this._getClassHierarchyPrototypes();for(var i=0;i<p.length;++i){var h=p[i];if(!h.hasOwnProperty('_initClone')){continue;}h._initClone.apply(c,[this]);}return c;}};B.prototype.constructor=B;var a=function(p,c){var h='get'+m.firstCharToUpper(c,true);if(p[h]){return;}p[h]=function(v){return this[c];};};var b=function(p,c){var h='set'+m.firstCharToUpper(c,true);if(p[h]){return;}p[h]=function(v){this[c]=v;};};var d=function(p){if(!p.hasOwnProperty('_meta')){return;}var c=p._meta.properties;if(!c){return;}for(var h in c){var i=c[h];if(i.getter){a(p,h);}if(i.setter){b(p,h);}}};var e=function(p,c){var C=g();if(!p){p=B;}C.prototype=m.extend(new p('_suppress_init_'),c);C.superPrototype=p.prototype;C.prototype.constructor=C;d(C.prototype);C.derive=function(h){return e(C,h);};return C;};m.defineClass=function(p){return e(null,p);};m.Exception=m.defineClass({_init:function(p){if(m.isString(p)){this.previous=null;this.message=p;this.description='';return;}this.previous=p.previous;this.message=p.message;this.description=p.description||'';},toString:function(){if(this.description){return this.message+'\n'+this.description;}return this.message;}});m.equals=function(o,c,h){if(m.isList(o)){return m._equalsList(o,c,h);}if(m.isObject(o)){return m._equalsObject(o,c,h);}return o===c;};m._equalsList=function(l,c,o){if(o===undefined){o=true;}if(l.length!==c.length){return false;}if(o){for(var i=0;i<l.length;++i){if(!m.equals(l[i],c[i],o)){return false;}}return true;}else{var h={};for(var j=0;j<l.length;++j){var n=l[j];var p=false;for(var k=0;k<c.length;++k){var q=c[k];if(h[k]){continue;}if(m.equals(n,q,o)){p=true;h[k]=true;break;}}if(!p){return false;}}return true;}};m._equalsObject=function(o,c,h){if(o.equals){return o.equals(c);}if(!m.isObject(c)){return false;}for(var p in o){var i=o[p];var j=c[p];if(!m.equals(i,j,h)){return false;}}return true;};m.clone=function(o){if(m.isList(o)){return m._cloneList(o);}if(m.isObject(o)){return m._cloneObject(o);}return o;};m._cloneList=function(l){var c=[];for(var i=0;i<l.length;++i){var h=l[i];c.push(m.clone(h));}return c;};m._cloneObject=function(o){if(o.clone){return o.clone();}var c={};for(var p in o){var v=o[p];c[p]=m.clone(v);}return c;};var f=0;m.generateId=function(){return'#'+(++f);};m.generateGuid=function(){return'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16).toUpperCase();});};m.executeSequentialAsync=function(t,c){if(!t){return m.Promise.resolve();}var h=function(i){if(i>=t.length){return undefined;}var j=t[i];return Promise.resolve().then(function(){if(c){return c(j);}return j();}).then(function(){return h(i+1);});};return h(0);};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/core/lang.js":function(){sinaDefine(['./core'],function(c){"use strict";return{getLanguagePreferences:function(){var a=typeof InstallTrigger!=='undefined';var b=false||!!document.documentMode;var d=!b&&!!window.StyleMedia;var e=!!window.chrome&&!!window.chrome.webstore;var l=[];if(b||d){var f=window.navigator.browserLanguage||window.navigator.language;l.splice(0,0,this._getLanguageCountryObject(f));}else if(a||e){var g=window.navigator.language;var h=window.navigator.languages.slice();var j=h.indexOf(g);if(j>-1){h.splice(j,1);}l.splice(0,0,this._getLanguageCountryObject(g));for(var i=0;i<h.length;i++){var k=this._getLanguageCountryObject(h[i]);if(k){l.splice(l.length,0,k);}}}else{l.splice(0,0,this._getLanguageCountryObject(window.navigator.language));}return l;},_getLanguageCountryObject:function(l){var a,b;var d={};if(l.length===2){a=l;b='';}else if(l.length===5&&l.indexOf('-')===2){a=l.substr(0,2);b=l.substr(3);}else{return undefined;}d.Language=a;d.Country=b;return d;}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/core/util.js":function(){sinaDefine(['./core'],function(c){"use strict";var m={};m.sampleProviderInstanceCounter=0;m.refuseOutdatedResponsesDecorator=function(o){var a=0;var d=function(){var r=++a;return o.apply(this,arguments).then(function(b){return new c.Promise(function(e,f){if(r!==a){return;}e(b);});},function(e){return new c.Promise(function(b,f){if(r!==a){return;}f(e);});});};d.abort=function(){++a;};return d;};m.getUrlParameter=function(n,u){if(!u)u=window.location.href;n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),a=r.exec(u);if(!a)return null;if(!a[2])return'';return decodeURIComponent(a[2].replace(/\+/g," "));};m.filterString=function(t,r){for(var i=0;i<r.length;++i){var a=r[i];var b=0;while(b>=0){b=t.indexOf(a);if(b>=0){t=t.slice(0,b)+t.slice(b+a.length);}}}return t;};m.generateTimestamp=function(){var p=function(n,a){var s="000000000"+n;return s.substr(s.length-a);};var d=new Date();return''+d.getUTCFullYear()+p(d.getUTCMonth()+1,2)+p(d.getUTCDate(),2)+p(d.getUTCHours(),2)+p(d.getUTCMinutes(),2)+p(d.getUTCSeconds(),2)+p(d.getUTCMilliseconds(),3);};m.DelayedConsumer=c.defineClass({_init:function(p){p=p||{};this.timeDelay=p.timeDelay||1000;this.consumer=p.consumer||function(){};this.consumerContext=p.consumerContext||null;this.objects=[];},add:function(o){this.objects.push(o);if(this.objects.length===1){setTimeout(this.consume.bind(this),this.timeDelay);}},consume:function(){this.consumer.apply(this.consumerContext,[this.objects]);this.objects=[];}});m.dateToJson=function(d){return{type:'Timestamp',value:d.toJSON()};};m.dateFromJson=function(j){if(j.type!=='Timestamp'){throw new c.Exception('Not a timestampe '+j);}return new Date(j.value);};m.getBaseUrl=function(u){u=u||'/sap/ushell/renderers/fiori2/search/container/';var b='';var i=window.location.pathname.indexOf(u);if(i>-1){b=window.location.pathname.slice(0,i);}return b;};m.addPotentialNavTargetsToAttribute=function(r){if(r.items){var a=r.items;for(var i=0;i<a.length;i++){var b=a[i];b=this.addGeoDataIfAvailable(b);var d=b.detailAttributes;for(var j=0;j<d.length;j++){var e=d[j];var s=e.sina;var v=e.value;var f=e.metadata;if(typeof v==='string'&&e.metadata.type!=="ImageUrl"){var g=v.match(/^[^\0-\x20,:;<>@\[\\\]^_`]+@[^\0-,.-@\[\\\]^_`\{\|\}~]+\.[^\0-,.-@\[\\\]^_`\{\|\}~]+$/g);var h=v.match(/^(?!\d*$)(?=(?:[()\[\]+\-\/ ]*\d[()\[\]+\-\/ ]*){9,15}$)\+?(?:\d+|\(\d+(?: \d+)*\)|\[\d+\]|[\/ ]|\d-\d)+$/g);var u=v.match(/^https?:\/\/(?=[^\/])\S+$/gi);if(f.isEmailAddress){e.defaultNavigationTarget=s._createNavigationTarget({label:v,targetUrl:'mailto:'+v});}else if(f.isPhoneNr){e.defaultNavigationTarget=s._createNavigationTarget({label:v,targetUrl:'tel:'+v});}else if(f.isHTTPURL){e.defaultNavigationTarget=s._createNavigationTarget({label:v,targetUrl:v});}else if(g!==null&&g.length===1){e.defaultNavigationTarget=s._createNavigationTarget({label:g[0],targetUrl:'mailto:'+g[0]});}else if(h!==null&&h[0].match(/\d\d\d/)!==null){e.defaultNavigationTarget=s._createNavigationTarget({label:h[0],targetUrl:'tel:'+h[0]});}else if(u!==null&&u[0].match(/\w\w\w/)!==null){e.defaultNavigationTarget=s._createNavigationTarget({label:u[0],targetUrl:u[0]});}}}}}return r;};m.isMapsAttribute=function(a,r,i){var b=false;var l,d,n,v,e,f,g,h;n=a.id;v=a.value;if(n.match(/latitude/i)!==null){if(!isNaN(v)){g=n;l=v;e=i;}b=true;}else if(n.match(/longitude/i)!==null){if(!isNaN(v)){h=n;d=v;f=i;}b=true;}else if(n.match(/LOC_4326/)){f=i;e=i;var L=JSON.parse(v);var C=L.coordinates;if(C&&C.length>1){d=C[0];l=C[1];}b=true;}if(r===undefined||r===true){return b;}else{return{lat:l,lon:d,latAttribName:g,lonAttribName:h,latIndex:e,lonIndex:f};}};m.addGeoDataIfAvailable=function(a){var r,b,l,d,e,f,g;b=a.detailAttributes;for(var i=0;i<b.length;i++){r=this.isMapsAttribute(b[i],false,i);l=r.lat?r.lat:l;d=r.lon?r.lon:d;f=r.latIndex?r.latIndex:f;g=r.lonIndex?r.lonIndex:g;if(l&&d){break;}}if(l&&d){if(f===g){b.splice(f,1);}else if(f>g){b.splice(f,1);b.splice(g,1);}else{b.splice(g,1);b.splice(f,1);}var n={sina:a.sina,type:"GeoJson",id:"LOC_4326",label:"LOC_4326",isCurrency:false,isEmailAddress:false,isPhoneNr:false,IsBoolean:false,IsKey:false,IsSortable:true,isUnitOfMeasure:false,semanticObjectType:[],isQuantity:"",usage:"map"};var v='{ "type": "Point", "coordinates": ['+d+', '+l+', 0] }';var h={id:"LOC_4326",label:"LOC_4326",isHighlighted:false,value:v,valueFormatted:v,valueHighlighted:a.sina,metadata:n,sina:a.sina};b.push(h);e=a.sina.getDataSource(a.dataSource.id);if(!e.attributeMetadataMap.LOC_4326){e.attributesMetadata.push(n);e.attributeMetadataMap["LOC_4326"]=n;}else{e.attributeMetadataMap.LOC_4326.type="GeoJson";e.attributeMetadataMap.LOC_4326.usage="map";}}return a;};m.cacheDecorator=function(o){var a={};return function(i){if(a.hasOwnProperty(i)){return a[i];}var v=o.apply(this,[i]);a[i]=v;return v;};};m.escapeRegExp=function(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");};m.evaluateTemplate=function(t,o){var p=new RegExp('{{(.*)}}');var g=function(t){var a=p.exec(t);if(!a){return null;}return a[1];};var r=function(t,a,v){var b=new RegExp('{{'+m.escapeRegExp(a)+'}}','g');t=t.replace(b,v);return t;};var e=function(t){var a=g(t);if(!a){return t;}t=r(t,a,o[a]);return e(t);};return e(t);};m.extractRegExp=new RegExp('<b>(.*?)<\\/b>','g');m.extractHighlightedTerms=function(t){var a;var r=[];do{a=m.extractRegExp.exec(t);if(a){r.push(a[1]);}}while(a);return r;};m.appendRemovingDuplicates=function(l,a){for(var i=0;i<a.length;++i){var e=a[i];if(l.indexOf(e)<0){l.push(e);}}};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/FacetParser.js":function(){sinaDefine(['../../core/core','../../sina/SearchQuery','./typeConverter'],function(c,S,t){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},parse:function(q,d){if(d.ValueHelp){this.prepareValueHelpFacet(q,d);}var f=[];if(!d.Facets||!d.Facets.results){return[];}for(var i=0;i<d.Facets.results.length;i++){var a=d.Facets.results[i];var b=a.Type;if(b==='DataSource'){f.push(this.parseDataSourceFacet(q,a));}else{if(q.filter.dataSource.type===q.sina.DataSourceType.Category){continue;}f.push(this.parseChartFacet(q,a));}}return c.Promise.all(f);},prepareValueHelpFacet:function(q,d){var s=d.ValueHelp.results;var a=this.sina.getDataSource(q.filter.dataSource.id);var b=d.ValueHelpAttribute;var m=a.getAttributeMetadata(b);var e={Id:d.ValueHelpAttribute,Name:m.label,Type:"AttributeValue",Values:{results:[]}};var r=[];for(var i=0;i<s.length;i++){var f=s[i];r.push({Description:f.ValueFormatted,NumberOfObjects:f.NumberOfInstances,Type:"AttributeValue",ValueLow:f.Value,ValueLowFormatted:f.ValueFormatted,ValueHigh:"",ValueHighFormatted:""});}e.Values.results=r;d.Facets={};d.Facets.results=[];d.Facets.results[0]=e;},parseDataSourceFacet:function(q,f){var d=q;if(q instanceof S){d=this.sina.createDataSourceQuery({dataSource:q.filter.dataSource,filter:q.filter.clone()});}var a=[];for(var i=0;i<f.Values.results.length;i++){var b=f.Values.results[i];var e=this.sina.getDataSource(b.ValueLow);if(!e){e=this.sina._createDataSource({type:this.sina.DataSourceType.Category,id:b.ValueLow,label:b.Description});}a.push(this.sina._createDataSourceResultSetItem({dataSource:e,dimensionValueFormatted:e.labelPlural,measureValue:b.NumberOfObjects,measureValueFormatted:(b.NumberOfObjects).toString()}));}var r=this.sina._createDataSourceResultSet({title:q.filter.dataSource.label,items:a,query:d});if(q instanceof S){return d._setResultSet(r);}return r;},createAttributeFilterCondition:function(a,m,b){if(b.Type==="AttributeRange"){var d=[];if(b.ValueLow&&b.ValueLow.length!==0){d.push(this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Ge,value:t.odata2Sina(m.type,b.ValueLow)}));}if(b.ValueHigh&&b.ValueHigh.length!==0){d.push(this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Le,value:t.odata2Sina(m.type,b.ValueHigh)}));}return this.sina.createComplexCondition({attributeLabel:m.label,valueLabel:b.Description,operator:this.sina.LogicalOperator.And,conditions:d});}else{return this.sina.createSimpleCondition({attributeLabel:m.label,attribute:a,value:t.odata2Sina(m.type,b.ValueLow),valueLabel:b.Description});}},parseChartFacet:function(q,f){var d=this.sina.getDataSource(q.filter.dataSource.id);var a=f.Id;var m=d.getAttributeMetadata(a);var b,e=q;if(q instanceof S){b=q.filter.clone();b.setDataSource(d);b.setRootCondition(q.filter.rootCondition.clone());e=this.sina.createChartQuery({filter:b,dimension:f.Id});}var g=[];for(var i=0;i<f.Values.results.length;i++){var h=f.Values.results[i];g.push(this.sina._createChartResultSetItem({filterCondition:this.createAttributeFilterCondition(a,m,h),dimensionValueFormatted:h.Description,measureValue:h.NumberOfObjects,measureValueFormatted:h.ValueLowFormatted}));}var r=this.sina._createChartResultSet({title:m.label,items:g,query:e});if(q instanceof S){return e._setResultSet(r);}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/ItemParser.js":function(){sinaDefine(['../../core/core','../../core/util','./typeConverter','../tools/fiori/FioriIntentsResolver','../../sina/NavigationTarget'],function(c,u,t,I,N){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.intentsResolver=this.sina._createFioriIntentsResolver();this.suvNavTargetResolver=this.sina._createSuvNavTargetResolver();},parse:function(s,d){if(d.ResultList.SearchResults===null){return Promise.resolve([]);}var i=d.ResultList.SearchResults.results;return this.parseItems(i);},parseItems:function(a){var b=[];for(var i=0;i<a.length;++i){var d=a[i];var e=this.parseItem(d);b.push(e);}return Promise.all(b);},parseItem:function(a){var i,j,k,m;var b={};var d=[];var e="";var f=[];var g,h,s,l,n,o;var p={};var q=[];var r=[];var v={};var w=[];var x=[];var y;var z=this.sina.getDataSource(a.DataSourceId);var A,B,C,D;var E=[];var F={};var G=a.Score/100;var H;for(j=0;j<a.Attributes.results.length;j++){A=a.Attributes.results[j];B=z.getAttributeMetadata(A.Id);C=this.sina._createSearchResultSetItemAttribute({id:A.Id,label:B.label,value:t.odata2Sina(B.type,A.Value),valueFormatted:A.ValueFormatted||"",valueHighlighted:A.Snippet||A.ValueFormatted||"",isHighlighted:A.Snippet.indexOf("<b>")>-1&&A.Snippet.indexOf("</b>")>-1,metadata:B});u.appendRemovingDuplicates(E,u.extractHighlightedTerms(C.valueHighlighted));if(B.isUnitOfMeasure||B.isCurrency){p[A.Id]=C;continue;}if(B.unitOfMeasureAttribute){h=p[B.unitOfMeasureAttribute.id];if(h){C.unitOfMeasure=h;}else{q.push(C);}}if(B.descriptionAttribute){g=b[B.descriptionAttribute.id];if(g){C.description=g;}else{r.push(C);}}if(B.suvUrlAttribute&&B.suvMimeTypeAttribute){n=b[B.suvUrlAttribute]||B.suvUrlAttribute.id;o=b[B.suvMimeTypeAttribute]||B.suvMimeTypeAttribute.id;v[A.Id]={suvThumbnailAttribute:C,suvTargetUrlAttribute:n,suvTargetMimeTypeAttribute:o};}if(B.usage.Navigation){if(B.usage.Navigation.mainNavigation){y=this.sina._createNavigationTarget({label:C.value,targetUrl:C.value});}}if(B.group){var J=F[B.group.id];if(!J){J=this.sina._createSearchResultSetItemAttributeGroup({id:B.group.id,metadata:B.group,label:B.group.label,template:B.group.template,attributes:{}});F[B.group.id]=J;if(B.group.usage.Detail){f.push(J);}if(B.group.usage.Title){d.push(J);}}J.attributes[B.nameInGroup]=C;C.group=J;C.nameInGroup=B.nameInGroup;}else{if(B.usage.Detail){f.push(C);}if(!B.usage.Title&&!B.usage.Detail&&!B.isDescription&&(C.isHighlighted||(C.descriptionAttribute&&C.descriptionAttribute.isHighlighted))){w.push(C);}}if(B.usage.Title){d.push(C);}if(B.usage.TitleDescription){e=C.valueHighlighted;}b[C.id]=C;D=z.attributeMetadataMap[C.id].semanticObjectType;if(D.length>0){x.push({name:D,value:C.value,type:C.metadata.type});}}for(i=0;i<q.length;i++){C=q[i];B=z.getAttributeMetadata(C.id);if(B.unitOfMeasureAttribute){h=p[B.unitOfMeasureAttribute.id];if(h){C.unitOfMeasure=h;}}}for(i=0;i<r.length;i++){C=r[i];B=z.getAttributeMetadata(C.id);if(B.descriptionAttribute){g=b[B.descriptionAttribute.id];if(g){C.description=g;}}}for(l in v){s=v[l];if(typeof s.suvTargetUrlAttribute=="string"){s.suvTargetUrlAttribute=b[s.suvTargetUrlAttribute];}if(typeof s.suvTargetMimeTypeAttribute=="string"){s.suvTargetMimeTypeAttribute=b[s.suvTargetMimeTypeAttribute];}if(!(s.suvTargetUrlAttribute||s.suvTargetMimeTypeAttribute)){delete v[l];}}d.sort(function(Q,R){return Q.metadata.usage.Title.displayOrder-R.metadata.usage.Title.displayOrder;});f.sort(function(Q,R){return Q.metadata.usage.Detail.displayOrder-R.metadata.usage.Detail.displayOrder;});if(a.HitAttributes!==null){for(k=0;k<a.HitAttributes.results.length;k++){A=a.HitAttributes.results[k];B=z.getAttributeMetadata(A.Id);H=t.odata2Sina(B.type,u.filterString(A.Snippet,['<b>','</b>']));C=this.sina._createSearchResultSetItemAttribute({id:A.Id,label:B.label,value:H,valueFormatted:H,valueHighlighted:A.Snippet,isHighlighted:A.Snippet.indexOf("<b>")>-1&&A.Snippet.indexOf("</b>")>-1,metadata:B});u.appendRemovingDuplicates(E,u.extractHighlightedTerms(C.valueHighlighted));w.push(C);}}f=f.concat(w);var K=[];var L=[];for(m=0;m<d.length;m++){var M=d[m];K.push(M.valueFormatted);L.push(M.valueHighlighted);}K=K.join(' ');L=L.join(' ');this.suvNavTargetResolver.resolveSuvNavTargets(z,v,E);D=z.sematicObjectType;var O=z.system;var P=z.client;return this.intentsResolver.resolveIntents({semanticObjectType:D,semanticObjectTypeAttributes:x,systemId:O,client:P,fallbackDefaultNavigationTarget:y}).then(function(Q){var R=Q&&Q.defaultNavigationTarget;var S=Q&&Q.navigationTargets;return this.sina._createSearchResultSetItem({dataSource:z,title:K,titleHighlighted:L,titleAttributes:d,titleDescription:e,detailAttributes:f,defaultNavigationTarget:R,navigationTargets:S,score:G});}.bind(this));}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/LabelCalculator.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";var N=c.defineClass({_init:function(p,n){this.parent=p;this.nodeId=n;this.childMap={};this.children=[];},insert:function(k,d){if(k.length===0){this.data={dataSource:d,label:d.label,labelPlural:d.labelPlural};this.calculateLabel();return;}var a=k[0];var s=this.childMap[a];if(k.length===1&&s){throw new c.Exception('duplicate tree node');}if(!s){s=new N(this,a);this.childMap[a]=s;this.children.push(s);if(this.children.length===2){this.children[0].recalculateLabels();}}s.insert(k.slice(1),d);},recalculateLabels:function(){var l=[];this.collectLeafs(l);for(var i=0;i<l.length;++i){l[i].calculateLabel();}},collectLeafs:function(l){if(this.isLeaf()){l.push(this);return;}for(var i=0;i<this.children.length;++i){this.children[i].collectLeafs(l);}},isLeaf:function(){return this.children.length===0;},hasSibling:function(){return this.parent&&this.parent.children.length>=2;},isChildOfRoot:function(){return this.parent&&this.parent.nodeId==='__ROOT';},collectPath:function(k,f){if(!this.parent){return;}if(f||this.hasSibling()||this.isChildOfRoot()){k.push(this.nodeId);f=true;}if(this.parent){this.parent.collectPath(k,f);}},calculateLabel:function(){var k=[];this.collectPath(k);k.reverse();k.splice(0,1,this.data.label);this.data.dataSource.label=k.join(' ');k.splice(0,1,this.data.labelPlural);this.data.dataSource.labelPlural=k.join(' ');}});return c.defineClass({_init:function(){this.rootNode=new N(null,'__ROOT');},calculateLabel:function(d){var s={system:d.system,client:d.client};try{this.rootNode.insert([d.labelPlural,s.system,s.client],d);}catch(e){if(e instanceof c.Exception&&e.toString()==='duplicate tree node'){var i=c.generateId();d.label=d.label+i;d.labelPlural=d.labelPlural+i;return;}throw e;}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/MetadataParser.js":function(){sinaDefine(['../../core/core','./typeConverter','../tools/cds/CDSAnnotationsParser'],function(c,t,C){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.cdsAnnotationsParser=this.sina._createCDSAnnotationsParser();},fillMetadataBuffer:function(d,a){if(d.attributesMetadata[0].id!=='dummy'){return;}d.attributesMetadata=[];d.attributeMetadataMap={};var i;var b=[];var e=[];var f=[];var g=[];var p;var h;var u={};var k={dataSourceAnnotations:{},attributeAnnotations:{}};for(i=0;i<d.annotations.length;i++){k.dataSourceAnnotations[d.annotations[i].Name.toUpperCase()]=d.annotations[i].Value;}for(i=0;i<a.length;i++){h=a[i];p=this.fillPublicMetadataBuffer(d,h,u);var l=k.attributeAnnotations[p.id.toUpperCase()]={};var m=h.Annotations&&h.Annotations.results||[];var n=false,s="SEMANTICS.";for(var j=0;j<m.length;j++){l[m[j].Name]=m[j].Value;if(n||m[j].Name.substr(0,s.length)==s){n=true;}}if(h.Semantics&&!n){var o;switch(h.Semantics){case"EMAIL.ADDRESS":case"TELEPHONE.TYPE":case"CURRENCYCODE":case"UNITOFMEASURE":o="TRUE";break;case"QUANTITY.UNITOFMEASURE":case"AMOUNT.CURRENCYCODE":o=h.UnitAttribute;break;}if(o){l[s+h.Semantics]=o;}}if(p.temporaryUsage.Title!==undefined){b.push(p);}if(p.temporaryUsage.Detail!==undefined){if(h.isSummary){e.push(p);}else{f.push(p);}}}var q=this.cdsAnnotationsParser.parseCDSAnnotationsForDataSource(d,k);if(!q.dataSourceIsCdsBased){b.sort(this._createSortFunction("Title"));for(i=0;i<b.length;++i){var r=b[i].id;h=d.getAttributeMetadata(r);h.usage.Title=h.temporaryUsage.Title;h.usage.Title.displayOrder=i;}var v=this._createSortFunction("Detail");e.sort(v);f.sort(v);g.push.apply(g,e);g.push.apply(g,f);for(i=0;i<g.length;++i){g[i].usage.Detail=g[i].temporaryUsage.Detail;g[i].usage.Detail.displayOrder=i;}}for(i=0;i<d.attributesMetadata.length;i++){h=d.attributesMetadata[i];if(h.temporaryUsage){for(var w in h.temporaryUsage){if(w!="Title"&&w!="Detail"){h.usage[w]=h.temporaryUsage[w];}}}}},_createSortFunction:function(u){return function(a,b){if(a.temporaryUsage[u].displayOrder<b.temporaryUsage[u].displayOrder){return-1;}else if(a.temporaryUsage[u].displayOrder>b.temporaryUsage[u].displayOrder){return 1;}else{return 0;}};},fillPublicMetadataBuffer:function(d,a,u){var b=a.Displayed&&a.DisplayOrder?a.DisplayOrder:-1;var p=this.sina._createAttributeMetadata({id:a.Id,label:a.Name!==""?a.Name:a.Id,isKey:a.Key,isSortable:a.Sortable,usage:{},type:this.parseAttributeType(a),matchingStrategy:this.parseMatchingStrategy(a)});p.semanticObjectType=a.SemanticObjectTypeId;p.temporaryUsage=a.UIAreas?this.parseUsage(a,b):{};d.attributesMetadata.push(p);d.attributeMetadataMap[p.id]=p;return p;},parseMatchingStrategy:function(a){if(a.TextIndexed){return this.sina.MatchingStrategy.Text;}else{return this.sina.MatchingStrategy.Exact;}},parseAttributeType:function(a){for(var i=0;i<a.UIAreas.results.length;i++){var p=a.UIAreas.results[i];var b=p.Id;switch(b){case'SUMMARY':continue;case'DETAILS':continue;case'TITLE':continue;case'#HIDDEN':case'HIDDEN':continue;case'FACTSHEET':continue;case'DETAILIMAGE':case'PREVIEWIMAGE':return this.sina.AttributeType.ImageUrl;case'LONGTEXT':return this.sina.AttributeType.Longtext;default:throw new c.Exception('Unknown presentation usage '+p);}}switch(a.EDMType){case'Edm.String':case'Edm.Binary':case'Edm.Boolean':case'Edm.Byte':case'Edm.Guid':return this.sina.AttributeType.String;case'Edm.Double':case'Edm.Decimal':case'Edm.Float':return this.sina.AttributeType.Double;case'Edm.Int16':case'Edm.Int32':case'Edm.Int64':return this.sina.AttributeType.Integer;case'Edm.Time':return this.sina.AttributeType.Time;case'Edm.DateTime':if(a.TypeLength>8){return this.sina.AttributeType.Timestamp;}return this.sina.AttributeType.Date;case'GeoJson':return this.sina.AttributeType.GeoJson;default:throw new c.Exception('Unknown data type '+a.EDMType);}},parseUsage:function(a,d){var u=a.UIAreas.results;var b=a.Facet||a.AdvancedSearchRelevant;var e={};u.forEach(function(f){var i=f.Id;if(i==="TITLE"){e.Title={displayOrder:d};}if(i==="SUMMARY"||i==="DETAILIMAGE"||i==="PREVIEWIMAGE"){a.isSummary=true;e.Detail={displayOrder:d};}if(i==="DETAILS"||i==="LONGTEXT"){e.Detail={displayOrder:d};}});if(b){e.AdvancedSearch={displayOrder:d};}return e;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/NlqParser.js":function(){sinaDefine(['../../core/core','../../core/util'],function(c,u){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},getActiveResult:function(r){for(var i=0;i<r.length;++i){var a=r[i];if(a.IsCurrentQuery){return a;}}return null;},parse:function(d){var n={success:false,description:''};if(!d||!d.ResultList||!d.ResultList.NLQQueries||!d.ResultList.NLQQueries.results){return n;}var r=d.ResultList.NLQQueries.results;var a=this.getActiveResult(r);if(!a){return n;}n.success=true;n.description=a.Description;return n;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/Provider.js":function(){sinaDefine(['../../core/core','../../core/util','../../core/lang','./ajax','./ajaxTemplates','./conditionSerializer','./dataSourceSerializer','./FacetParser','./ItemParser','./NlqParser','./suggestionParser','./suggestionTermSplitter','./LabelCalculator','./UserEventLogger','./MetadataParser'],function(c,u,l,a,b,d,e,F,I,N,S,s,L,U,M){"use strict";return c.defineClass({id:'abap_odata',_initAsync:function(f){this.requestPrefix='/sap/opu/odata/sap/ESH_SEARCH_SRV';this.sina=f.sina;this.ajaxClient=a.createAjaxClient();this.metadataLoadPromises={};this.internalMetadata={};this.labelCalculator=new L();this.userEventLogger=new U(this);this.metadataParser=new M(this);this.itemParser=new I(this);this.nlqParser=new N(this);this.facetParser=new F(this);this.suggestionParser=new S(this,this.itemParser);this.sessionId=c.generateGuid();return this.loadServerInfo().then(function(g){this.serverInfo=g.d.results[0];if(!this.supports('Search')){return Promise.reject(new c.Exception('Enterprise Search is not active'));}return this.loadBusinessObjectDataSources();}.bind(this)).then(function(){return{capabilities:this.sina._createCapabilities({fuzzy:false})};}.bind(this));},supports:function(f,g){for(var i=0;i<this.serverInfo.Services.results.length;++i){var h=this.serverInfo.Services.results[i];if(h.Id==f){if(!g){return true;}for(var j=0;j<h.Capabilities.length;++j){var k=h.Capabilities[j];if(k.Capability===g){return true;}}}}return false;},loadServerInfo:function(){var r=this.buildQueryUrl(this.requestPrefix,"/ServerInfos?$expand=Services/Capabilities");var f=this.buildQueryUrl(this.requestPrefix,"/$metadata");var g=this.ajaxClient.getJson(r);var m=this.ajaxClient.getXML(f);return Promise.all([g,m]).then(function(v){var h=v[0];var i=v[1];var p=new DOMParser();var D=p.parseFromString(i,"text/xml");if(D.documentElement.nodeName!="parsererror"){this.serviceXML=D;}return h.data;}.bind(this));},loadBusinessObjectDataSources:function(){var r="/DataSources?$expand=Annotations,Attributes/UIAreas,Attributes/Annotations&$filter=Type eq 'View'";if(this.serviceXML){var f="Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=DataSource]>NavigationProperty[Name=Annotations],"+"Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=DataSourceAttribute]>NavigationProperty[Name=Annotations]";var g=this.serviceXML.querySelectorAll(f);if(g.length!=2){r="/DataSources?$expand=Attributes/UIAreas&$filter=Type eq 'View'";}var h="Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=DataSource]>Property[Name=IsInternal]";g=this.serviceXML.querySelectorAll(h);if(g.length>0){r=r+" and IsInternal eq false";}var j="Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=SearchOptions]>Property[Name=ClientServiceName]";g=this.serviceXML.querySelectorAll(j);if(g.length===0){delete b.searchRequest.d.QueryOptions.ClientServiceName;delete b.nlqSearchRequest.d.QueryOptions.ClientServiceName;}}var k=this.buildQueryUrl(this.requestPrefix,r);return this.ajaxClient.getJson(k).then(function(m){var n=m.data.d.results;for(var i=0;i<n.length;++i){var o=n[i];var p=this.sina._createDataSource({id:o.Id,label:o.Name,labelPlural:o.NamePlural,type:this.sina.DataSourceType.BusinessObject,attributesMetadata:[{id:'dummy'}]});p.system=o.SourceSystem;p.client=o.SourceClient;p.sematicObjectType=o.SemanticObjectTypeId;p.annotations=o.Annotations&&o.Annotations.results||[];this.labelCalculator.calculateLabel(p);this.metadataParser.fillMetadataBuffer(p,o.Attributes.results);}}.bind(this));},assembleOrderBy:function(q){var r=[];for(var i=0;i<q.sortOrder.length;++i){var f=q.sortOrder[i];var g=(f.order===this.sina.SortOrder.Descending)?'desc':'asc';r.push({AttributeId:f.id,SortOrder:g});}return r;},executeSearchQuery:function(q){var i,r;var f=b.searchRequest;if(q.nlq){f=b.nlqSearchRequest;}f=JSON.parse(JSON.stringify(f));var g=q.filter.rootCondition.clone();var h=d.serialize(q.filter.dataSource,g);if(h.SubFilters.length!==0){f.d.Filter=h;}else{delete f.d.Filter;}f.d.DataSources=[e.serialize(q.filter.dataSource)];f.d.QueryOptions.SearchTerms=q.filter.searchTerm;f.d.QueryOptions.Top=q.top;f.d.QueryOptions.Skip=q.skip;f.d.OrderBy=this.assembleOrderBy(q);this.addSessionId(f);if(!q.calculateFacets){delete f.d.MaxFacetValues;delete f.d.Facets;}else{f.d.MaxFacetValues=5;f.d.Facets=[{"Values":[]}];}var j=this.buildQueryUrl(this.requestPrefix,"/SearchQueries");return this.ajaxClient.postJson(j,f).then(function(k){r=k;return this.itemParser.parse(q,r.data.d);}.bind(this)).then(function(k){i=k;return this.facetParser.parse(q,r.data.d);}.bind(this)).then(function(k){var n=this.nlqParser.parse(r.data.d);var t=n.success?n.description:'Search Result List';return this.sina._createSearchResultSet({id:r.data.d.ResultList.ExecutionID,title:t,query:q,items:i,nlqSuccess:n.success,totalCount:r.data.d.ResultList.TotalHits,facets:k});}.bind(this));},executeChartQuery:function(q){var r="";var f={};var g=q.filter.rootCondition.clone();var h;if(this.decideValueHelp(q)){f=JSON.parse(JSON.stringify(b.valueHelperRequest));f.d.ValueHelpAttribute=q.dimension;h=d.serialize(q.filter.dataSource,g);if(h.SubFilters.length!==0){f.d.Filter=h;}else{delete f.d.Filter;}f.d.ValueFilter=this.getFilterValueFromConditionTree(q.dimension,h);f.d.QueryOptions.SearchTerms=q.filter.searchTerm;f.d.DataSources=[e.serialize(q.filter.dataSource)];r=this.buildQueryUrl(this.requestPrefix,"/ValueHelpQueries");}else{f=JSON.parse(JSON.stringify(b.chartRequest));h=d.serialize(q.filter.dataSource,g);if(h.SubFilters.length!==0){f.d.Filter=h;}else{delete f.d.Filter;}f.d.DataSources=[e.serialize(q.filter.dataSource)];f.d.QueryOptions.SearchTerms=q.filter.searchTerm;f.d.QueryOptions.Skip=0;this.addSessionId(f);f.d.FacetRequests=[{DataSourceAttribute:q.dimension}];f.d.MaxFacetValues=q.top;r=this.buildQueryUrl(this.requestPrefix,"/SearchQueries");}return this.ajaxClient.postJson(r,f).then(function(i){return this.facetParser.parse(q,i.data.d);}.bind(this),function(i){return[];}).then(function(i){if(i.length>0){return i[0];}return this.sina._createChartResultSet({title:q.filter.dataSource.getAttributeMetadata(q.dimension).label,items:[],query:q});}.bind(this));},decideValueHelp:function(q){var f=q.filter.rootCondition.conditions;for(var i=0;i<f.length;i++){if(q.filter._getAttribute(f[i])===q.dimension){return true;}}return false;},executeSuggestionQuery:function(q){return c.Promise.all([this.executeRegularSuggestionQuery(q),this.executeObjectSuggestionQuery(q)]).then(function(r){var f=[];f.push.apply(f,r[1]);f.push.apply(f,r[0]);return this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:f});}.bind(this));},isObjectSuggestionQuery:function(q){return q.types.indexOf('Object')>=0&&q.filter.dataSource.type===q.sina.DataSourceType.BusinessObject;},executeObjectSuggestionQuery:function(q){if(!this.isObjectSuggestionQuery(q)){return c.Promise.resolve([]);}var r=JSON.parse(JSON.stringify(b.objectSuggestionRequest));var f=q.filter.rootCondition.clone();var g=d.serialize(q.filter.dataSource,f);if(g.SubFilters.length!==0){r.d.Filter=g;}else{delete r.d.Filter;}r.d.DataSources=[e.serialize(q.filter.dataSource)];r.d.QueryOptions.Top=q.top;r.d.QueryOptions.Skip=q.skip;r.d.QueryOptions.SearchTerms=q.filter.searchTerm;this.addSessionId(r);var h=this.buildQueryUrl(this.requestPrefix,"/SuggestionsQueries");return this.ajaxClient.postJson(h,r).then(function(i){return this.suggestionParser.parseObjectSuggestions(q,i.data);}.bind(this));},executeRegularSuggestionQuery:function(q){var r=JSON.parse(JSON.stringify(b.suggestionRequest));var f=q.filter.searchTerm;var g=s.split(this,f);var h=q.filter.rootCondition.clone();var i=d.serialize(q.filter.dataSource,h);if(i.SubFilters.length!==0){r.d.Filter=i;}else{delete r.d.Filter;}r.d.DataSources=[e.serialize(q.filter.dataSource)];r.d.QueryOptions.Top=q.top;r.d.QueryOptions.Skip=q.skip;r.d.SuggestionInput=g.suggestionTerm;r.d.QueryOptions.SearchTerms=g.searchTerm===null?"":g.searchTerm;if(!this.includeSuggestionTypes(q,r)){return[];}this.addSessionId(r);var j=this.buildQueryUrl(this.requestPrefix,"/SuggestionsQueries");return this.ajaxClient.postJson(j,r).then(function(k){return this.suggestionParser.parseRegularSuggestions(q,k.data);}.bind(this)).then(function(k){s.concatenate(this,g,k);return k;}.bind(this));},includeSuggestionTypes:function(q,f){var g={SearchTerm:{Data:'IncludeAttributeSuggestions',History:'IncludeHistorySuggestions'},Object:{},DataSource:{Data:'IncludeDataSourceSuggestions'}};var h=q.types;var k=q.calculationModes;var m=false;for(var i=0;i<h.length;i++){var n=h[i];for(var j=0;j<k.length;j++){var o=k[j];var v=g[n][o];if(typeof v==='undefined'){continue;}f.d[v]=true;m=true;}}return m;},addSessionId:function(r){r.d.QueryOptions.ClientSessionID=this.sessionId;var t=new Date().getTime();r.d.QueryOptions.ClientCallTimestamp="\\/Date("+t+")\\/";},getFilterValueFromConditionTree:function(f,g){if(g.ConditionAttribute&&g.ConditionAttribute===f){return g.ConditionValue;}else if(g.SubFilters){var i;var r=null;for(i=0;r===null&&i<g.SubFilters.length;i++){r=this.getFilterValueFromConditionTree(f,g.SubFilters[i]);}return r;}return null;},getConfigurationAsync:function(){var r=this.buildQueryUrl(this.requestPrefix,"/PersonalizedSearchMainSwitches?$filter=Selected eq true");return this.ajaxClient.getJson(r).then(function(f){var g={personalizedSearch:false,isPersonalizedSearchEditable:false};switch(f.data.d.results[0].MainSwitch){case 3:g.isPersonalizedSearchEditable=true;break;case 4:g.isPersonalizedSearchEditable=true;break;case 2:g.isPersonalizedSearchEditable=false;break;case 1:g.isPersonalizedSearchEditable=false;break;}r=this.buildQueryUrl(this.requestPrefix,"/Users('<current>')");return this.ajaxClient.getJson(r).then(function(f){if(f.data.d.IsEnabledForPersonalizedSearch){g.personalizedSearch=true;}return this.sina._createConfiguration(g);}.bind(this));}.bind(this));},saveConfigurationAsync:function(f){var g={"IsEnabledForPersonalizedSearch":f.personalizedSearch};var r=this.buildQueryUrl(this.requestPrefix,"/Users('<current>')");return this.ajaxClient.mergeJson(r,g);},resetPersonalizedSearchDataAsync:function(){var f={"ClearPersonalizedSearchHistory":true};var r=this.buildQueryUrl(this.requestPrefix,"/Users('<current>')");return this.ajaxClient.mergeJson(r,f);},logUserEvent:function(f){return this.userEventLogger.logUserEvent(f);},buildQueryUrl:function(q,f){var w=window.location.href;var r="";var g="";var h="";var i="";g=w.indexOf("esh-system=sid(");if(g!==-1){var j=w.substring(g).indexOf(")");if(j!==-1){h=w.substring(g+15,g+j);if(h.length!==0){i=";o=sid("+h+")";}}}if(h.length===0){g=w.indexOf("esh-system=");if(g!==-1){var k=w.substring(g).indexOf("&");var m=w.substring(g).indexOf("#");if(k!==-1&&m!==-1){if(k<m){h=w.substring(g+11,g+k);}else{h=w.substring(g+11,g+m);}}if(k!==-1&&m===-1){h=w.substring(g+11,g+k);}if(k===-1&&m!==-1){h=w.substring(g+11,g+m);}if(k===-1&&m===-1){h=w.substring(g+11);}}if(h.length!==0){i=";o="+h;}}r=q+i+f;return r;},getDebugInfo:function(){return'Searchsystem: '+this.serverInfo.SystemId+' Client: '+this.serverInfo.Client+' SinaProvider :'+this.id;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/UserEventLogger.js":function(){sinaDefine(['../../core/core','../../core/util','./ajaxTemplates'],function(c,u,a){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.delayedConsumer=new u.DelayedConsumer({timeDelay:2000,consumer:this.processEvents,consumerContext:this});},logUserEvent:function(e){e.timeStamp=new Date().getTime();if(e.type!=='ITEM_NAVIGATE'){this.delayedConsumer.add(e);}if(e.type==='ITEM_NAVIGATE'&&e.sourceUrlArray.length!==0){this.incrementClickCounter(e.targetUrl,e.systemAndClient);}},processEvents:function(e){var t=this;var r={ID:1,SessionID:this.provider.sessionId,Events:[]};for(var i=0;i<e.length;++i){var b=e[i];var d="\\/Date("+b.timeStamp+")\\/";var o={ID:i+1,Type:b.type,Timestamp:d,ExecutionID:b.executionId,Parameters:[]};for(var n in b){if(n==='type'||n==='timeStamp'){continue;}var v=b[n];if(typeof v==='undefined'){continue;}if(typeof v!=='object'){v=v.toString();}else{v=JSON.stringify(v);}o.Parameters.push({Name:n,Value:v});}r.Events.push(o);}var f=t.provider.buildQueryUrl(t.provider.requestPrefix,"/InteractionEventLists");return t.provider.ajaxClient.postJson(f,r);},incrementClickCounter:function(t,s){if(!t){return undefined;}if(t.indexOf("#")===-1){return undefined;}var g=function(H){return H.split("-")[0];};var b=function(H){return H.split("-")[1].split("&")[0];};var d=function(p){var m=p;var n=[];for(var i=0,o=m.length;i<o;i++){var q=m[i];if(q.indexOf("sap-system")!==-1){continue;}var v=q.split("=")[0];var w=q.split("=")[1];n.push({Name:v,Value:w});}return n;};var e=this;var h=t.split("?");var f=g(h[0]).split("#")[1];var j=b(h[0]);var k=h[1]!==undefined?d(h[1].split("&")):[];var r=JSON.parse(JSON.stringify(a.navigationEvent));r.SemanticObjectType=f;r.Intent=j;if(s.systemId.length===0||s.client.length===0){delete r.System;delete r.Client;}else{r.System=s.systemId;r.Client=s.client;}r.Parameters=k;var l=e.provider.buildQueryUrl(e.provider.requestPrefix,"/NavigationEvents");return e.provider.ajaxClient.postJson(l,r);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/ajax.js":function(){sinaDefine(['../../core/core','../../core/ajax'],function(c,a){"use strict";var m={};m.Exception=c.Exception.derive({_init:function(d){c.Exception.prototype._init.apply(this,[d]);}});var p=function(d){try{var f=JSON.parse(d.responseText);var g=[];if(f&&f.error&&f.error.code){g.push(f.error.code);}if(f&&f.error&&f.error.message&&f.error.message.value){g.push(f.error.message.value);}if(g.length===0){return c.Promise.reject(d);}return c.Promise.reject(new m.Exception({message:g.join('\n'),previous:d}));}catch(e){return c.Promise.reject(d);}};var b=function(o){return function(){return o.apply(this,arguments).then(function(r){return r;}.bind(this),function(e){if(!(e instanceof a.Exception)){return c.Promise.reject(e);}return p(e);}.bind(this));};};m.createAjaxClient=function(){var d=new a.Client({csrf:true,requestNormalization:function(e){if(e===null){return{};}if(e.Events!==undefined){return{"NotToRecord":true};}delete e.SessionID;delete e.SessionTimestamp;if(e.d&&e.d.QueryOptions){delete e.d.QueryOptions.ClientSessionID;delete e.d.QueryOptions.ClientCallTimestamp;delete e.d.QueryOptions.ClientServiceName;delete e.d.QueryOptions.ClientLastExecutionID;}return e;}});d.postJson=b(d.postJson);d.getJson=b(d.getJson);d.mergeJson=b(d.mergeJson);return d;};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/ajaxTemplates.js":function(){sinaDefine([],function(){"use strict";var m={};m.searchRequest={"d":{"Id":"1","QueryOptions":{"SearchTerms":"","Top":10,"Skip":0,"SearchType":"","ClientSessionID":"","ClientServiceName":"","ClientLastExecutionID":""},"DataSources":[],"OrderBy":[],"ResultList":{"SearchResults":[{"HitAttributes":[],"Attributes":[]}]},"ExecutionDetails":[],"MaxFacetValues":5,"Facets":[{"Values":[]}]}};m.nlqSearchRequest={"d":{"Id":"1","ActivateNLQ":true,"QueryOptions":{"SearchTerms":"","Top":10,"Skip":0,"SearchType":"","ClientSessionID":"","ClientServiceName":"","ClientLastExecutionID":""},"DataSources":[],"OrderBy":[],"ResultList":{"SearchResults":[{"HitAttributes":[],"Attributes":[]}],"NLQQueries":[{"NLQConnectorQueries":[{"SearchFilter":{"SubFilters":[{"SubFilters":[{"SubFilters":[{"SubFilters":[{"SubFilters":[{"SubFilters":[]}]}]}]}]}]}}]}]},"ExecutionDetails":[],"MaxFacetValues":5,"Facets":[{"Values":[]}]}};m.chartRequest={"d":{"Id":"1","DataSources":[],"QueryOptions":{"SearchTerms":"","Skip":0,"SearchType":"F"},"FacetRequests":[],"MaxFacetValues":5,"Facets":[{"Values":[]}],"ExecutionDetails":[]}};m.valueHelperRequest={"d":{"Id":"1","ValueHelpAttribute":"","ValueFilter":"","DataSources":[],"QueryOptions":{"Top":1000,"Skip":0,"SearchType":"V"},"ValueHelp":[]}};m.suggestionRequest={"d":{"Id":"1","SuggestionInput":"","IncludeAttributeSuggestions":false,"IncludeHistorySuggestions":false,"IncludeDataSourceSuggestions":false,"DetailLevel":1,"QueryOptions":{"Top":0,"Skip":0,"SearchType":"S","SearchTerms":""},"Filter":{},"DataSources":[],"Suggestions":[],"ExecutionDetails":[]}};m.objectSuggestionRequest={"d":{"Id":"1","IncludeAttributeSuggestions":true,"QueryOptions":{"SearchTerms":"a","Top":10,"Skip":0},"DataSources":[{"Id":"UIA000~EPM_BPA_DEMO~","Type":"View"}],"ObjectSuggestions":{"SearchResults":[{"HitAttributes":[],"Attributes":[]}]},"ExecutionDetails":[]}};m.navigationEvent={"SemanticObjectType":"","Intent":"","System":"","Client":"","Parameters":[]};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/conditionSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator','./typeConverter'],function(c,C,a,t){"use strict";var b=c.defineClass({_init:function(d){this.dataSource=d;},convertSinaToOdataOperator:function(s){switch(s){case a.Eq:return'EQ';case a.Lt:return'LT';case a.Gt:return'GT';case a.Le:return'LE';case a.Ge:return'GE';case a.Co:return'EQ';case a.Bw:return'EQ';case a.Ew:return'EQ';case'And':return"AND";case'Or':return"OR";default:throw new c.Exception('unknow comparison operator '+s);}},serializeComplexCondition:function(d){var r={"Id":1,"OperatorType":this.convertSinaToOdataOperator(d.operator),"SubFilters":[]};var s=d.conditions;for(var i=0;i<s.length;++i){var e=s[i];r.SubFilters.push(this.serialize(e));}return r;},serializeSimpleCondition:function(d){var m;var e;var f;m=this.dataSource.getAttributeMetadata(d.attribute);e=m.type;f={"ConditionAttribute":d.attribute,"ConditionOperator":this.convertSinaToOdataOperator(d.operator),"ConditionValue":t.sina2Odata(e,d.value,{operator:d.operator})};return f;},serializeBetweenCondition:function(d){var m;var e;var f;var v;var g;m=this.dataSource.getAttributeMetadata(d.conditions[0].attribute);e=m.type;if(d.conditions[0].operator==="Ge"){v=d.conditions[0].value;g=d.conditions[1].value;}else{v=d.conditions[1].value;g=d.conditions[0].value;}f={"ConditionAttribute":d.conditions[0].attribute,"ConditionOperator":"BT","ConditionValue":t.sina2Odata(e,v),"ConditionValueHigh":t.sina2Odata(e,g)};return f;},serialize:function(d){if(d instanceof C){if(d.operator==="And"&&d.conditions[0]&&(d.conditions[0].operator==="Ge"||d.conditions[0].operator==="Gt"||d.conditions[0].operator==="Le"||d.conditions[0].operator==="Lt")){if(d.conditions.length===1){return this.serializeSimpleCondition(d.conditions[0]);}else{return this.serializeBetweenCondition(d);}}else{return this.serializeComplexCondition(d);}}else{return this.serializeSimpleCondition(d);}}});return{serialize:function(d,e){var s=new b(d);return s.serialize(e);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/dataSourceSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator'],function(c,C,a){"use strict";return{serialize:function(d){if(d===d.sina.getAllDataSource()){return{Id:'<All>',Type:'Category'};}var t;switch(d.type){case d.sina.DataSourceType.Category:t='Category';break;case d.sina.DataSourceType.BusinessObject:t='View';break;}return{Id:d.id,Type:t};}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/qunit/test.js":function(){sinaDefine(['./testLabelCalculator','./testConfiguration','./testAjaxClient'],function(){"use strict";});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/qunit/testAjaxClient.js":function(){sinaDefine(['../../../core/ajax','../ajaxTemplates'],function(a,b){"use strict";QUnit.test('AjaxClient-1',function(c){var d=c.async();var e=new a.Client({csrf:true});e.getJson('/sap/es/ina/GetServerInfo').then(function(s){e.postJson('/sap/es/ina/GetResponse',b.loadDataSourcesRequest).then(function(r){c.ok(r.data.ItemLists[0].Items.length>0);d();});});});QUnit.test('AjaxClient-2',function(c){var d=c.async();var e=new a.Client({csrf:true,csrfFetchRequest:{method:'GET',url:'/sap/es/ina/GetServerInfo',headers:a.Client.prototype.jsonHeaders}});e.postJson('/sap/es/ina/GetResponse',b.loadDataSourcesRequest).then(function(r){c.ok(r.data.ItemLists[0].Items.length>0);d();});});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/qunit/testConfiguration.js":function(){sinaDefine(['../../../sina/sinaFactory'],function(s){"use strict";QUnit.test('Configuration',function(a){var d=a.async();s.createAsync('../Provider').then(function(b){b.getConfigurationAsync().then(function(c){c.setPersonalizedSearch(false);c.saveAsync().then(function(){c.resetPersonalizedSearchDataAsync().then(function(){a.equal(1,1);d();});});});});});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/qunit/testLabelCalculator.js":function(){sinaDefine(['../LabelCalculator'],function(L){"use strict";var t=function(a,s){var d=[];var l=new L();for(var i=0;i<s.length;++i){var b=s[i];l.calculateLabel(b.dataSource);d.push(b.dataSource);for(var j=0;j<=i;++j){a.equal(b.labels[j],d[j].label,'label comparison');a.equal(b.labelsPlural[j],d[j].labelPlural,'label plural comparison');}}};QUnit.test("LabelCalculator 1",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER002~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order'],labelsPlural:['Purchase Orders','Sales Orders']},{dataSource:{id:'CES002~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order CER','Sales Order CES'],labelsPlural:['Purchase Orders','Sales Orders CER','Sales Orders CES']},{dataSource:{id:'CES003~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order CER','Sales Order CES 002','Sales Order CES 003'],labelsPlural:['Purchase Orders','Sales Orders CER','Sales Orders CES 002','Sales Orders CES 003']}]);});QUnit.test("LabelCalculator 2",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER003~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003']},{dataSource:{id:'CES003~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003','Purchase Order CES'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003','Purchase Orders CES']},{dataSource:{id:'CES003~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003','Purchase Order CES','Sales Order'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003','Purchase Orders CES','Sales Orders']}]);});QUnit.test("LabelCalculator - system and client not sufficient for unique key",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER002~EPM_PO_DEMO_2~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order','Purchase Order#1'],labelsPlural:['Purchase Orders','Purchase Orders#1']}]);});QUnit.test("LabelCalculator - category",function(a){t(a,[{dataSource:{id:'EPM_Demo',label:'Procurement',labelPlural:'Procurement'},labels:['Procurement'],labelsPlural:['Procurement']}]);});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/suggestionParser.js":function(){sinaDefine(['../../core/core','./typeConverter'],function(c,t){"use strict";return c.defineClass({_init:function(p,i){this.provider=p;this.sina=p.sina;this.itemParser=i;},parseObjectSuggestions:function(q,d){if(!d.d.ObjectSuggestions||!d.d.ObjectSuggestions.SearchResults||!d.d.ObjectSuggestions.SearchResults.results){return[];}var s=[];var o=d.d.ObjectSuggestions.SearchResults.results;for(var i=0;i<o.length;++i){var a=o[i];s.push(this.parseObjectSuggestion(a));}return c.Promise.all(s);},parseObjectSuggestion:function(o){return this.itemParser.parseItem(o).then(function(a){return this.sina._createObjectSuggestion({calculationMode:this.sina.SuggestionCalculationMode.Data,label:a.title,object:a});}.bind(this));},parseRegularSuggestions:function(q,d){var s=[];var a;var p;var b=[];var e;var f;if(!d.d.Suggestions||!d.d.Suggestions.results){return[];}var r=d.d.Suggestions.results;for(var i=0;i<r.length;i++){a=null;e=r[i];switch(e.Type){case'H':a=this.parseSearchTermSuggestion(q,e);break;case'A':a=this.parseSearchTermAndDataSourceSuggestion(q,e);a.type='A';a.cell=e;break;case'M':a=this.parseDataSourceSuggestion(q,e);break;}if(a){if(a.type==='A'){if(b[a.searchTerm]===undefined){f=this._getParentCell(a.cell);p=this.parseSearchTermSuggestion(q,f);b[a.searchTerm]=p;}delete a.type;delete a.cell;b[a.searchTerm].childSuggestions.push(a);}else{s.push(a);}}}Object.keys(b).forEach(function(k){s.push(b[k]);});return s;},parseDataSourceSuggestion:function(q,a){var b=this.sina.SuggestionCalculationMode.Data;var d=this.sina.getDataSource(a.FromDataSource);if(!d){return null;}var f=q.filter.clone();f.setDataSource(d);return this.sina._createDataSourceSuggestion({calculationMode:b,dataSource:d,label:a.SearchTermsHighlighted});},parseSearchTermSuggestion:function(q,a){var b=this.parseCalculationMode(a.Type);var f=q.filter.clone();f.setSearchTerm(a.SearchTerms);return this.sina._createSearchTermSuggestion({searchTerm:a.SearchTerms,calculationMode:b,filter:f,label:a.SearchTermsHighlighted});},parseSearchTermAndDataSourceSuggestion:function(q,a){var b=this.parseCalculationMode(a.Type);var f=q.filter.clone();f.setSearchTerm(a.SearchTerms);var d=this.sina.getDataSource(a.FromDataSource);if(!d){return null;}f.setDataSource(d);return this.sina._createSearchTermAndDataSourceSuggestion({searchTerm:a.SearchTerms,dataSource:d,calculationMode:b,filter:f,label:a.SearchTermsHighlighted});},parseCalculationMode:function(s){switch(s){case'H':return this.sina.SuggestionCalculationMode.History;case'A':case'M':return this.sina.SuggestionCalculationMode.Data;}},_getParentCell:function(a){var p={};p=a;p.FromDataSource="<All>";p.FromDataSourceAttribute="";p.Type="A";return p;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/suggestionTermSplitter.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";var S=c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},split:function(t){var s=t.lastIndexOf(' ');if(s<0){return{searchTerm:null,suggestionTerm:t};}var a=t.slice(0,s);a=a.replace(/\s+$/,"");if(a.length===0){return{searchTerm:null,suggestionTerm:t};}var b=t.slice(s);b=b.replace(/^\s+/,"");if(b.length===0){return{searchTerm:null,suggestionTerm:t};}return{searchTerm:a,suggestionTerm:b};},concatenate:function(s,a){if(!s.searchTerm){return;}var t;var b=[];var d=s.searchTerm.split(' ');for(var k=0;k<d.length;k++){t=d[k];t=t.trim();b.push({term:t,regExp:new RegExp(this.escapeRegExp(t),'i')});}for(var i=0;i<a.length;++i){var e=a[i];var n=[];for(var j=0;j<b.length;++j){var f=b[j];if(!f.regExp.test(e.filter.searchTerm)){n.push(f.term);}}var p=[];var g=n.join(' ');for(var l=0;l<n.length;l++){t=n[l];p.push('<b>'+t+'</b>');}p=p.join(' ');e.label=p+' '+e.label;e.filter.searchTerm=g+' '+e.filter.searchTerm;this.concatenate(s,e.childSuggestions);}},escapeRegExp:function(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");}});return{split:function(p,t){var s=new S(p,t);return s.split(t);},concatenate:function(p,s,a){var b=new S(p);return b.concatenate(s,a);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/typeConverter.js":function(){sinaDefine(['../../core/core','../../sina/util','../../sina/AttributeType'],function(c,s,A){"use strict";return{sina2Odata:function(a,v,b){b=b||{};switch(a){case A.Double:return v.toString();case A.Integer:return v.toString();case A.String:return this.sina2OdataString(v,b);case A.Longtext:return v;case A.ImageUrl:return v;case A.ImageBlob:throw new c.Exception('not implemented');case A.GeoJson:return v;case A.Date:return this.sina2OdataDate(v);case A.Time:return this.sina2OdataTime(v);case A.Timestamp:return this.sina2OdataTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},odata2Sina:function(a,v){switch(a){case A.Double:return parseFloat(v);case A.Integer:return parseInt(v,10);case A.String:return v;case A.Longtext:return v;case A.ImageUrl:return v;case A.ImageBlob:throw new c.Exception('not implemented');case A.GeoJson:return v;case A.Date:return this.odata2SinaDate(v);case A.Time:return this.odata2SinaTime(v);case A.Timestamp:return this.odata2SinaTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},odata2SinaTimestamp:function(v){if(v.length===0){return"";}v=v.trim();var y,m,d,h,a,b,e;y=parseInt(v.slice(0,4),10);m=parseInt(v.slice(5,7),10);d=parseInt(v.slice(8,10),10);h=parseInt(v.slice(11,13),10);a=parseInt(v.slice(14,16),10);b=parseInt(v.slice(17,19),10);e=parseInt(v.slice(20,20+6),10);return new Date(Date.UTC(y,m-1,d,h,a,b,e/1000));},sina2OdataTimestamp:function(v){if(v.length===0){return"";}var y=v.getUTCFullYear();var m=v.getUTCMonth()+1;var d=v.getUTCDate();var h=v.getUTCHours();var a=v.getUTCMinutes();var b=v.getUTCSeconds();var e=v.getUTCMilliseconds()*1000;var r=this.addLeadingZeros(y.toString(),4)+'-'+this.addLeadingZeros(m.toString(),2)+'-'+this.addLeadingZeros(d.toString(),2)+'T'+this.addLeadingZeros(h.toString(),2)+':'+this.addLeadingZeros(a.toString(),2)+':'+this.addLeadingZeros(b.toString(),2)+'.'+this.addLeadingZeros(e.toString(),7)+'Z';return r;},odata2SinaTime:function(v){if(v.length===0){return"";}v=v.trim();return v;},sina2OdataTime:function(v){if(v.length===0){return"";}return v;},odata2SinaDate:function(v){if(v.length===0){return"";}v=v.trim();return v.slice(0,4)+'/'+v.slice(5,7)+'/'+v.slice(8,10);},sina2OdataDate:function(v){if(v.length===0){return"";}return v.slice(0,4)+'-'+v.slice(5,7)+'-'+v.slice(8,10);},sina2OdataString:function(v,a){return s.convertOperator2Wildcards(v,a.operator);},addLeadingZeros:function(v,l){return'00000000000000'.slice(0,l-v.length)+v;}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/dummy/Provider.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";return c.defineClass({id:'dummy',_initAsync:function(p){return Promise.resolve();}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/FacetParser.js":function(){sinaDefine(['../../core/core','../../sina/SearchQuery','./typeConverter'],function(c,S,t){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},parse:function(q,d){var f=[];if(!d){return[];}for(var i=0;i<d.length;i++){var a=d[i];if(q.filter.dataSource===q.sina.getAllDataSource()){f.push(this.parseDataSourceFacet(q,a));}else{if(q.filter.dataSource.type===q.sina.DataSourceType.Category){continue;}f.push(this.parseChartFacet(q,a));}}return c.Promise.all(f);},parseDataSourceFacet:function(q,f){var d=q;if(q instanceof S){d=this.sina.createDataSourceQuery({dataSource:q.filter.dataSource,filter:q.filter.clone()});}var a=[];for(var i=0;i<f.Items.length;i++){var b=f.Items[i];var e=this.sina.getDataSource(b.scope);if(!e){e=this.sina._createDataSource({type:this.sina.DataSourceType.Category,id:b.ValueLow,label:b.Description});}a.push(this.sina._createDataSourceResultSetItem({dataSource:e,dimensionValueFormatted:e.labelPlural,measureValue:b._Count,measureValueFormatted:(b._Count).toString()}));}var r=this.sina._createDataSourceResultSet({title:q.filter.dataSource.label,items:a,query:d});if(q instanceof S){return d._setResultSet(r);}return r;},createAttributeFilterCondition:function(a,m,b){if(typeof b[a]==='object'&&(b[a].hasOwnProperty('From')||b[a].hasOwnProperty('From'))){var f=this.sina.createComplexCondition({attributeLabel:m.label,valueLabel:this.formatFacetValue(b[a],m),operator:this.sina.LogicalOperator.And,conditions:[]});var l,u;if(!b[a].From){u=this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Le,value:t.odata2Sina(m.type,b[a].To)});f.conditions.push(u);}else if(!b[a].To){l=this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Ge,value:t.odata2Sina(m.type,b[a].From)});f.conditions.push(l);}else{l=this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Ge,value:t.odata2Sina(m.type,b[a].From)});f.conditions.push(l);u=this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Le,value:t.odata2Sina(m.type,b[a].To)});f.conditions.push(u);}return f;}else{return this.sina.createSimpleCondition({attributeLabel:m.label,attribute:a,value:b[a],valueLabel:t.odata2Sina(m.type,b[a])});}},formatFacetValue:function(v,m){var i='';if(v['@com.sap.vocabularies.Common.v1.Label']){return v['@com.sap.vocabularies.Common.v1.Label'];}if(typeof v==='object'&&(v.hasOwnProperty('From')||v.hasOwnProperty('To'))){v=(v.From||i)+'...'+(v.To||i);}return v;},parseChartFacet:function(q,f){var d=q.filter.dataSource;var a='';if(q.dimension){a=q.dimension;}else if(f["@com.sap.vocabularies.Search.v1.Facet"]&&f["@com.sap.vocabularies.Search.v1.Facet"].Dimensions&&f["@com.sap.vocabularies.Search.v1.Facet"].Dimensions[0]&&f["@com.sap.vocabularies.Search.v1.Facet"].Dimensions[0].PropertyName){a=f["@com.sap.vocabularies.Search.v1.Facet"]["Dimensions"][0].PropertyName;}var m=d.getAttributeMetadata(a);var b=[];var e;var g=q;e=q.filter.clone();e.setDataSource(d);e.setRootCondition(q.filter.rootCondition.clone());g=this.sina.createChartQuery({filter:e,dimension:a});for(var i=0;i<f.Items.length;i++){var h=f.Items[i];b.push(this.sina._createChartResultSetItem({filterCondition:this.createAttributeFilterCondition(a,m,h),dimensionValueFormatted:this.formatFacetValue(h[a],m),measureValue:h['_Count'],measureValueFormatted:h['_Count']}));}var r=this.sina._createChartResultSet({title:m.label,items:b,query:g});if(q instanceof S){return g._setResultSet(r);}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/ItemParser.js":function(){sinaDefine(['../../core/core','../../core/util','./typeConverter','../tools/fiori/FioriIntentsResolver','../../sina/NavigationTarget'],function(c,u,t,I,N){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.intentsResolver=this.sina._createFioriIntentsResolver();this.suvNavTargetResolver=this.sina._createSuvNavTargetResolver();},parse:function(s,d){if(d.value===null){return Promise.resolve([]);}var a=d.value;var b=[];for(var i=0;i<a.length;++i){var e=a[i];var f=this.parseItem(e);b.push(f);}return Promise.all(b);},parseItem:function(a){var i;var b=[];var d=[];var e="";var f,g;var h={};var j;var k={};var l=[];var m=[];var s={};var n={};var o=a['@odata.context'];var p=o.lastIndexOf('#');if(p>-1){o=o.slice(p+1);}var q=this.sina.getDataSource(o);var w=a['@com.sap.vocabularies.Search.v1.WhyFound']||{};var r={};var v='';var x={};var y,z,A,B;var C=[];var D;var E=a["@com.sap.vocabularies.Search.v1.Ranking"];for(var F in a){if(F[0]==='@'||F[0]==='_'){continue;}r=q.getAttributeMetadata(F);if(r.id=="LOC_4326"){r.usage={Detail:{displayOrder:-1}};}var G=t.odata2Sina(r.type,a[F]);var H=G?G.toString():'';var J="";for(var K in w){if(K===F&&w[K][0]){J=w[K][0];delete w[K];}}j=this.sina._createSearchResultSetItemAttribute({id:r.id,label:r.label,value:G,valueFormatted:H,valueHighlighted:J||H,isHighlighted:J.length>0?true:false,metadata:r});if(r.isUnitOfMeasure||r.isCurrency){h[j.id]=j;continue;}if(r.unitOfMeasureAttribute){g=h[r.unitOfMeasureAttribute.id];if(g){j.unitOfMeasure=g;}else{l.push(j);}}if(r.descriptionAttribute){f=k[r.descriptionAttribute.id];if(f){j.description=f;}else{m.push(j);}}if(r.suvUrlAttribute&&r.suvMimeTypeAttribute){A=k[r.suvUrlAttribute]||r.suvUrlAttribute.id;B=k[r.suvMimeTypeAttribute]||r.suvMimeTypeAttribute.id;x[r.id]={suvThumbnailAttribute:j,suvTargetUrlAttribute:A,suvTargetMimeTypeAttribute:B};}if(r.usage.Title){b.push(j);}if(r.usage.TitleDescription){e=j.valueHighlighted;}if(r.group){var L=n[r.group.id];if(!L){L=this.sina._createSearchResultSetItemAttributeGroup({id:r.group.id,metadata:r.group,label:r.group.label,template:r.group.template,attributes:{}});n[r.group.id]=L;if(r.group.usage.Detail){d.push(L);}}L.attributes[r.nameInGroup]=j;j.group=L;j.nameInGroup=r.nameInGroup;}else{if(r.usage.Detail){d.push(j);}}if(r.usage.Navigation){if(r.usage.Navigation.mainNavigation){D=this.sina._createNavigationTarget({label:j.value,targetUrl:j.value});}}k[j.id]=j;v=q.attributeMetadataMap[r.id].semanticObjectType||'';if(v.length>0){s[v]=G;}}for(i=0;i<l.length;i++){j=l[i];r=q.getAttributeMetadata(j.id);if(r.unitOfMeasureAttribute){g=h[r.unitOfMeasureAttribute.id];if(g){j.unitOfMeasure=g;}}}for(i=0;i<m.length;i++){j=m[i];r=q.getAttributeMetadata(j.id);if(r.descriptionAttribute){f=k[r.descriptionAttribute.id];if(f){j.description=f;}}}for(z in x){y=x[z];if(typeof y.suvTargetUrlAttribute=="string"){y.suvTargetUrlAttribute=k[y.suvTargetUrlAttribute];}if(typeof y.suvTargetMimeTypeAttribute=="string"){y.suvTargetMimeTypeAttribute=k[y.suvTargetMimeTypeAttribute];}if(!(y.suvTargetUrlAttribute||y.suvTargetMimeTypeAttribute)){delete x[z];}}b.sort(function(S,T){return S.metadata.usage.Title.displayOrder-T.metadata.usage.Title.displayOrder;});d.sort(function(S,T){return S.metadata.usage.Detail.displayOrder-T.metadata.usage.Detail.displayOrder;});var M=[];var O=[];for(i=0;i<b.length;++i){var P=b[i];M.push(P.valueFormatted);O.push(P.valueHighlighted);}M=M.join(' ');O=O.join(' ');this.suvNavTargetResolver.resolveSuvNavTargets(q,x,C);v=q.sematicObjectType||'';var Q=q.system||'';var R=q.client||'';return this.intentsResolver.resolveIntents({semanticObjectType:v,semanticObjectTypeAttributes:s,systemId:Q,client:R,fallbackDefaultNavigationTarget:D}).then(function(S){var T=S&&S.defaultNavigationTarget;var U=S&&S.navigationTargets;return this.sina._createSearchResultSetItem({dataSource:q,title:M,titleHighlighted:O,titleAttributes:b,titleDescription:e,detailAttributes:d,defaultNavigationTarget:T,navigationTargets:U,score:E});}.bind(this));}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/MetadataParser.js":function(){sinaDefine(['../../core/core','./typeConverter','../tools/cds/CDSAnnotationsParser'],function(c,t,C){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.presentationUsageConversionMap={TITLE:'TITLE',SUMMARY:'SUMMARY',DETAIL:'DETAIL',IMAGE:'IMAGE',THUMBNAIL:'THUMBNAIL',HIDDEN:'HIDDEN'};this.accessUsageConversionMap={AUTO_FACET:'AUTO_FACET',SUGGESTION:'SUGGESTION'};this.cdsAnnotationsParser=this.sina._createCDSAnnotationsParser();},_getWindow:function(){if(typeof window==="undefined"){return new Promise(function(r,a){sinaRequire(['jsdom','fs'],function(j,f){var b=f.readFileSync("./node_modules/jquery/dist/jquery.js","utf-8");j.env({html:"<html><body></body></html>",src:[b],done:function(e,w){if(!e){r(w);}else{a(e);}}});});});}else{return Promise.resolve(window);}},parseResponse:function(m){var a=this;var b={businessObjectMap:{},businessObjectList:[],dataSourceMap:{},dataSourcesList:[]};return this._getWindow().then(function(w){w.$(m).find('Schema').each(function(){var $=w.$(this);var h=a._parseEntityType($,w);a._parseEntityContainer($,h,b,w);});return Promise.resolve(b);});},_parseEntityType:function(s,w){var a=this;var h={};s=w.$(s);s.find('EntityType').each(function(){var b=w.$(this).attr('Name');var d={schema:s.attr('Namespace'),keys:[],attributeMap:{},resourceBundle:'',label:'',annotations:{}};h[b]=d;w.$(this).find('Key>PropertyRef').each(function(){d.keys.push(w.$(this).attr('Name'));});w.$(this).find('Annotation[Term="Search.searchable"]').each(function(){w.$(this).siblings('Annotation').each(function(){if(w.$(this).attr('Term')==='EnterpriseSearchHana.uiResource.label.bundle'){var r=w.$(this).attr('String');try{d.resourceBundle=jQuery.sap.resources({url:r,language:sap.ui.getCore().getConfiguration().getLanguage()});}catch(e){sinaLog.error("Resource bundle of "+b+" '"+r+"' can't be found:"+e.toString());}}else if(w.$(this).attr('Term')==='EnterpriseSearchHana.uiResource.label.key'){var k=w.$(this).attr('String');if(k&&d.resourceBundle){var T=d.resourceBundle.getText(k);if(T){d.label=T;}}}else{var f=w.$(this)[0].attributes;if(f.length===2){var g=f.item(0).value.toUpperCase();var i=f.item(1).value;d.annotations[g]=i;}}});});w.$(this).find('Property').each(function(i){var e=w.$(this).attr('Name');var f={labelRaw:e,label:null,type:w.$(this).attr('Type'),presentationUsage:[],isFacet:false,isSortable:false,supportsTextSearch:false,displayOrder:i,annotationsAttr:{},unknownAnnotation:[]};d.attributeMap[e]=f;w.$(this).find('Annotation').each(function(){switch(w.$(this).attr('Term').toUpperCase()){case'SAP.COMMON.LABEL':if(!f.label){f.label=w.$(this).attr('String');}break;case'ENTERPRISESEARCHHANA.UIRESOURCE.LABEL.KEY':var k=w.$(this).attr('String');if(k&&d.resourceBundle){var T=d.resourceBundle.getText(k);if(T){f.label=T;}}break;case'ENTERPRISESEARCH.KEY':f.isKey=w.$(this).attr('Bool')=="true"?true:false;break;case'ENTERPRISESEARCH.PRESENTATIONMODE':w.$(this).find('Collection>String').each(function(){var p=w.$(this).text();p=a.presentationUsageConversionMap[p];if(p){f.presentationUsage.push(p);}});break;case'ENTERPRISESEARCHHANA.ISSORTABLE':f.isSortable=w.$(this).attr('Bool')=="true"?true:false;break;case'ENTERPRISESEARCHHANA.SUPPORTSTEXTSEARCH':f.supportsTextSearch=w.$(this).attr('Bool')=="true"?true:false;break;case'ENTERPRISESEARCH.FILTERINGFACET.DEFAULT':f.isFacet=w.$(this).attr('Bool')=="true"?true:false;break;case'ENTERPRISESEARCH.DISPLAYORDER':f.displayOrder=w.$(this).attr('Int');break;case'UI.IDENTIFICATION':w.$(this).find('PropertyValue[Property="position"]').each(function(){f.displayOrder=+w.$(this).text();f.annotationsAttr['UI.IDENTIFICATION.POSITION']=w.$(this).text();});w.$(this).find('PropertyValue[Property="url"]').each(function(){f.displayOrder=+w.$(this).text();f.annotationsAttr['UI.IDENTIFICATION.URL']=w.$(this).text();});break;case'UI.CONNECTEDFIELDS':f.annotationsAttr['UI.CONNECTEDFIELDS.QUALIFIER']=w.$(this).attr('Qualifier');;w.$(this).find('PropertyValue[Property="Label"]').each(function(){f.annotationsAttr['UI.CONNECTEDFIELDS.GROUPLABEL']=w.$(this).text();});w.$(this).find('PropertyValue[Property="Template"]').each(function(){f.annotationsAttr['UI.CONNECTEDFIELDS.TEMPLATE']=w.$(this).text();});w.$(this).find('PropertyValue[Property="Name"]').each(function(){f.annotationsAttr['UI.CONNECTEDFIELDS.NAME']=w.$(this).text();});break;case'SEMANTICS.CONTACT.PHOTO':f.annotationsAttr['SEMANTICS.CONTACT.PHOTO']=w.$(this).attr('Bool');break;case'SEMANTICS.IMAGEURL':f.annotationsAttr['SEMANTICS.IMAGEURL']=w.$(this).attr('Bool');break;case'SEMANTICS.URL.MIMETYPE':f.annotationsAttr['SEMANTICS.URL.MIMETYPE']=w.$(this).attr('String');break;case'OBJECTMODEL.TEXT.ELEMENT':f.annotationsAttr['OBJECTMODEL.TEXT.ELEMENT']=w.$(this).attr('String');break;case'UI.TEXTARRANGEMENT':f.annotationsAttr['UI.TEXTARRANGEMENT']=w.$(this).attr('String');break;case'UI.HIDDEN':f.annotationsAttr['UI.HIDDEN']=w.$(this).attr('Bool');break;case'SEMANTICS.QUANTITY.UNITOFMEASURE':f.annotationsAttr['SEMANTICS.QUANTITY.UNITOFMEASURE']=w.$(this).attr('String');break;case'SEMANTICS.AMOUNT.CURRENCYCODE':f.annotationsAttr['SEMANTICS.AMOUNT.CURRENCYCODE']=w.$(this).attr('String');break;case'SEMANTICS.CURRENCYCODE':f.annotationsAttr['SEMANTICS.CURRENCYCODE']=w.$(this).attr('Bool');break;case'SEMANTICS.UNITOFMEASURE':f.annotationsAttr['SEMANTICS.UNITOFMEASURE']=w.$(this).attr('Bool');break;case'SEMANTICS.NAME.GIVENNAME':f.annotationsAttr['SEMANTICS.NAME.GIVENNAME']=w.$(this).attr('Bool');break;case'SEMANTICS.NAME.FAMILYNAME':f.annotationsAttr['SEMANTICS.NAME.FAMILYNAME']=w.$(this).attr('Bool');break;case'SEMANTICS.EMAIL.ADDRESS':f.annotationsAttr['SEMANTICS.EMAIL.ADDRESS']=w.$(this).attr('Bool');break;case'SEMANTICS.TELEPHONE.TYPE':f.annotationsAttr['SEMANTICS.TELEPHONE.TYPE']=w.$(this).attr('String');break;case'UI.MULTILINETEXT':f.annotationsAttr['UI.MULTILINETEXT']=w.$(this).attr('Bool');break;default:f.unknownAnnotation.push(w.$(this));}});});});return h;},_parseEntityContainer:function(s,h,a,w){var b=this;s.find('EntityContainer>EntitySet').each(function(){if(w.$(this).attr('Name')&&w.$(this).attr('EntityType')){var n=w.$(this).attr('Name');var e=w.$(this).attr('EntityType');var d=e.slice(e.lastIndexOf('.')+1);var f=h[d];if(f===undefined){throw'EntityType '+d+' has no corresponding meta data!';}var g=b.sina._createDataSource({id:n,label:f.label||n,labelPlural:f.label||n,type:b.sina.DataSourceType.BusinessObject,attributesMetadata:[{id:'dummy'}]});g.annotations=f.annotations;a.dataSourceMap[g.id]=g;a.dataSourcesList.push(g);f.name=n;f.dataSource=g;a.businessObjectMap[n]=f;a.businessObjectList.push(f);}});},fillMetadataBuffer:function(d,a){if(d.attributesMetadata[0].id!=='dummy'){return;}d.attributesMetadata=[];d.attributeMetadataMap={};var b={dataSourceAnnotations:{},attributeAnnotations:{}};jQuery.extend(b.dataSourceAnnotations,d.annotations);for(var e in a.attributeMap){this.fillPublicMetadataBuffer(d,a.attributeMap[e],b);}this.cdsAnnotationsParser.parseCDSAnnotationsForDataSource(d,b);},fillPublicMetadataBuffer:function(d,a,b){var e=a.displayOrder;var f=b.attributeAnnotations[a.labelRaw]={};jQuery.extend(f,a.annotationsAttr);var g=this.parseAttributeType(a);if(g){var p=this.sina._createAttributeMetadata({id:a.labelRaw,label:a.label||a.labelRaw,isKey:a.isKey||false,isSortable:a.isSortable,usage:this.parseUsage(a,e)||{},type:g,matchingStrategy:this.parseMatchingStrategy(a)});p.semanticObjectType=a.SemanticObjectTypeId;d.attributesMetadata.push(p);d.attributeMetadataMap[p.id]=p;}},parseMatchingStrategy:function(a){if(a.supportsTextSearch===true){return this.sina.MatchingStrategy.Text;}else{return this.sina.MatchingStrategy.Exact;}},parseAttributeType:function(a){for(var i=0;i<a.presentationUsage.length;i++){var p=a.presentationUsage[i]||'';switch(p.toUpperCase()){case'SUMMARY':continue;case'DETAIL':continue;case'TITLE':continue;case'HIDDEN':continue;case'FACTSHEET':continue;case'THUMBNAIL':case'IMAGE':return this.sina.AttributeType.ImageUrl;case'LONGTEXT':return this.sina.AttributeType.Longtext;default:throw new c.Exception('Unknown presentation usage '+p);}}switch(a.type){case'Edm.String':case'Edm.Binary':case'Edm.Boolean':case'Edm.Byte':case'Edm.Guid':return this.sina.AttributeType.String;case'Edm.Double':case'Edm.Decimal':case'Edm.Float':case'Edm.Single':case'Edm.SingleRange':return this.sina.AttributeType.Double;case'Edm.Int16':case'Edm.Int32':case'Edm.Int64':return this.sina.AttributeType.Integer;case'Edm.Time':return this.sina.AttributeType.Time;case'Edm.DateTime':if(a.TypeLength>8){return this.sina.AttributeType.Timestamp;}return this.sina.AttributeType.Timestamp;case'Collection(Edm.String)':return this.sina.AttributeType.String;case'GeoJson':return this.sina.AttributeType.GeoJson;default:return null;}},parseUsage:function(a,d){var u={};for(var i=0;i<a.presentationUsage.length;i++){var b=a.presentationUsage[i].toUpperCase()||'';if(b==="TITLE"){u.Title={displayOrder:d};}if(b==="SUMMARY"||b==="DETAIL"||b==="IMAGE"||b==="THUMBNAIL"||b==="LONGTEXT"){u.Detail={displayOrder:d};}}if(a.isFacet){u.AdvancedSearch={displayOrder:d};}return u;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/Provider.js":function(){sinaDefine(['../../core/core','../../core/util','../../core/lang','./ajax','./conditionSerializer','./dataSourceSerializer','./FacetParser','./ItemParser','./suggestionParser','./suggestionTermSplitter','./MetadataParser'],function(c,u,l,a,b,d,F,I,S,s,M){"use strict";return c.defineClass({id:'hana_odata',_initAsync:function(e){this.requestPrefix=u.getBaseUrl(e.url)+'/es/odata/callbuildin.xsjs';this.sina=e.sina;this.ajaxClient=a.createAjaxClient();this.metadataLoadPromises={};this.internalMetadata={};this.metadataParser=new M(this);this.itemParser=new I(this);this.facetParser=new F(this);this.suggestionParser=new S(this);return this.loadServerInfo().then(function(f){this.serverInfo=f;if(!this.supports('Search')){return Promise.reject(new c.Exception('Enterprise Search is not active'));}return this.loadBusinessObjectDataSources();}.bind(this)).then(function(){if(this.sina.dataSources.length===0){return Promise.reject(new c.Exception('Enterprise Search is not active - no datasources'));}return{capabilities:this.sina._createCapabilities({fuzzy:false})};}.bind(this));},supports:function(e,f){var g=this.serverInfo.services;for(var h in g){if(h===e){if(!f){return true;}var i=g[h].Capabilities;for(var j=0;j<i.length;++j){var k=i[j];if(k===f){return true;}}}}return false;},loadServerInfo:function(){var e={rawServerInfo:{Services:[{Service:'Search',Capabilities:[{Capability:'SemanticObjectType'}]},{Service:'Suggestions2',Capabilities:[{Capability:'ScopeTypes'}]}]},services:{Suggestions:{suggestionTypes:['objectdata']},Search:{capabilities:['SemanticObjectType']}}};return Promise.resolve(e);},loadBusinessObjectDataSources:function(){var t=this;var r=this.buildQueryUrl(this.requestPrefix,"/$metadata");return this.ajaxClient.getXML(r).then(function(e){t.metadataParser.parseResponse(e).then(function(f){for(var i=0;i<f.dataSourcesList.length;++i){var g=f.dataSourcesList[i];t.metadataParser.fillMetadataBuffer(g,f.businessObjectMap[g.id]);}});});},assembleOrderBy:function(q){var r=[];for(var i=0;i<q.sortOrder.length;++i){var e=q.sortOrder[i];var f=(e.order===this.sina.SortOrder.Descending)?'desc':'asc';r.push({AttributeId:e.id,SortOrder:f});}return r;},translateOrder:function(o){var r='desc';if(o==='Ascending'){r='asc';}return r;},executeSearchQuery:function(q){var r=q.filter.rootCondition.clone();var f=b.serialize(q.filter.dataSource,r);var e=q.filter.searchTerm;var g=d.serialize(q.filter.dataSource);var t=q.top||10;var h=q.skip||0;var i=q.facetTop||5;var o=q.sortOrder;var k='';var m="Search.search(query='";if(q.filter.dataSource!==this.sina.getAllDataSource()){m+="SCOPE:"+g.Id+" ";}m+=f+" "+e+"')";var n='filter('+m+')';var p={$count:true,$top:t,$skip:h,$apply:n,whyfound:true};if(Array.isArray(o)){for(var j=0;j<o.length;j++){var v=o[j];if(j===0){k+=v.id+' '+this.translateOrder(v.order);}else{k+=','+v.id+' '+this.translateOrder(v.order);}}}if(k.length>0){p['$orderby']=k;}var w=this.buildQueryUrl(this.requestPrefix,'/$all');if(q.calculateFacets){p.facets='all';p.facetlimit=i;}var x,y;return this.ajaxClient.getJson(w,p).then(function(z){y=z;return this.itemParser.parse(q,y.data);}.bind(this)).then(function(z){x=z;var A=y.data['@com.sap.vocabularies.Search.v1.SearchStatistics'].ConnectorStatistics;if(q.getDataSource()===this.sina.getAllDataSource()&&A&&Array.isArray(A)&&A.length===1){var B=[{"@com.sap.vocabularies.Search.v1.Facet":{"PropertyName":"scope","isConnectorFacet":true},"Items":[{"scope":A[0].OdataID,"_Count":y.data["@odata.count"]}]}];return this.facetParser.parse(q,B);}return this.facetParser.parse(q,y.data['@com.sap.vocabularies.Search.v1.Facets']);}.bind(this)).then(function(z){return this.sina._createSearchResultSet({title:'Search Result List',query:q,items:x,totalCount:y.data['@odata.count']||0,facets:z});}.bind(this));},executeChartQuery:function(q){var e=q.filter.searchTerm;var f=d.serialize(q.filter.dataSource);var r=q.filter.rootCondition.clone();var g=15;var h=r.removeAttributeConditions(q.dimension);var i=h.deleted;var j=b.serialize(q.filter.dataSource,r);var t=q.top||5;var k="Search.search(query='";if(f!==this.sina.getAllDataSource()){k+="SCOPE:"+f.Id+" ";}if(i===true){k+='('+h.attribute+':EQ'+':\\"'+h.value+'*\\")'+' '+e;}else{k+=j+" "+e;}k+="')";var m='filter('+k+')';var n={$count:true,$top:0,$apply:m};var o=this.buildQueryUrl(this.requestPrefix,'/$all');var p='all';n.facetlimit=t;if(q.dimension){p=q.dimension;var v=q.filter.dataSource.getAttributeMetadata(q.dimension);if((v.type==='Double'||v.type==='Integer')&&t>=20){n.facetlimit=g;}}n.facets=p;return this.ajaxClient.getJson(o,n).then(function(w){var x=this.facetParser.parse(q,w.data['@com.sap.vocabularies.Search.v1.Facets']);return x;}.bind(this)).then(function(w){if(w.length>0){return w[0];}return this.sina._createChartResultSet({title:q.filter.dataSource.getAttributeMetadata(q.dimension).label,items:[],query:q});}.bind(this));},executeSuggestionQuery:function(q){var e={SearchTerm:{Data:'SuggestObjectData',History:'SuggestSearchHistory'},Object:{},DataSource:{Data:'SuggestDataSources'}};var f=q.types;var g=q.calculationModes;var h=c.Promise.resolve({items:[]});for(var i=0;i<f.length;i++){var k=f[i];for(var j=0;j<g.length;j++){var m=g[j];var v=e[k][m];switch(v){case"SuggestObjectData":return this._fireSuggestionQuery(q);default:return h;}}}},_fireSuggestionQuery:function(q){var e=q.filter.searchTerm;var f=s.split(this,e);var g="GetSuggestion(term='";if(q.filter.dataSource!==this.sina.getAllDataSource()){g+="SCOPE:"+q.filter.dataSource.id+" ";}g+=e+"')";var h={};var i=this.buildQueryUrl(this.requestPrefix,'/$all/'+g);return this.ajaxClient.getJson(i,h).then(function(r){var j=[];if(r.data.value){j=this.suggestionParser.parse(q,r.data.value);}s.concatenate(this,f,j);return this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:j});}.bind(this));},getFilterValueFromConditionTree:function(e,f){if(f.ConditionAttribute&&f.ConditionAttribute===e){return f.ConditionValue;}else if(f.SubFilters){var i;var r=null;for(i=0;r===null&&i<f.SubFilters.length;i++){r=this.getFilterValueFromConditionTree(e,f.SubFilters[i]);}return r;}return null;},logUserEvent:function(e){},buildQueryUrl:function(q,e){var r=q+'/v5'+e;return r;},getDebugInfo:function(){return' SinaProvider :'+this.id;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/ajax.js":function(){sinaDefine(['../../core/core','../../core/ajax'],function(c,a){"use strict";var m={};m.Exception=c.Exception.derive({_init:function(d){c.Exception.prototype._init.apply(this,[d]);}});var p=function(d){try{return c.Promise.reject(new m.Exception({message:'Error by hana odata ajax call',description:'Error by hana odata ajax call',previous:d}));}catch(e){return c.Promise.reject(d);}};var b=function(o){return function(){return o.apply(this,arguments).then(function(r){return r;}.bind(this),function(e){if(!(e instanceof a.Exception)){return c.Promise.reject(e);}return p(e);}.bind(this));};};m.createAjaxClient=function(){var d=new a.Client({csrf:false});d.postJson=b(d.postJson);d.getJson=b(d.getJson);d.mergeJson=b(d.mergeJson);return d;};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/conditionSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator','./typeConverter','../../sina/AttributeType'],function(c,C,a,t,A){"use strict";var b=c.defineClass({_init:function(d){this.dataSource=d;},convertSinaToOdataOperator:function(s){switch(s){case a.Eq:return':EQ(S)';case a.Lt:return':LT';case a.Gt:return':GT';case a.Le:return':LE';case a.Ge:return':GE';case a.Co:return':EQ';case a.Bw:return':EQ';case a.Ew:return':EQ';case'And':return"AND";case'Or':return"OR";default:throw new c.Exception('unknow comparison operator '+s);}},serializeComplexCondition:function(d){var r={"Id":1,"OperatorType":this.convertSinaToOdataOperator(d.operator),"SubFilters":[]};var s=d.conditions;for(var i=0;i<s.length;++i){var e=s[i];r.SubFilters.push(this.serialize(e));}var f="";if(r.SubFilters.length>1){f=r.SubFilters.join(' '+r.OperatorType+' ');}else if(r.SubFilters.length===1){f=r.SubFilters[0];}if(r.SubFilters.length>1){f='('+f+')';}return f;},serializeSimpleCondition:function(d){var m;var e;var f;m=this.dataSource.getAttributeMetadata(d.attribute);e=m.type;f={"ConditionAttribute":d.attribute,"ConditionOperator":this.convertSinaToOdataOperator(d.operator),"ConditionValue":t.sina2Odata(e,d.value,{operator:d.operator})};var q='';if(e===A.String||e===A.Longtext||e===A.Timestamp){q='"';}return'('+f.ConditionAttribute+f.ConditionOperator+':'+q+f.ConditionValue+q+')';},serializeBetweenCondition:function(d){var m;var e;m=this.dataSource.getAttributeMetadata(d.conditions[0].attribute);e=m.type;var q='';if(e===A.Date||e===A.Time||e===A.Timestamp){q='\\"';}var r=d.conditions[0].attribute+this.convertSinaToOdataOperator(d.conditions[0].operator)+':'+q+t.sina2Odata(e,d.conditions[0].value,{operator:d.conditions[0].operator})+q;r+=" AND ";r+=d.conditions[1].attribute+this.convertSinaToOdataOperator(d.conditions[1].operator)+":"+q+t.sina2Odata(e,d.conditions[1].value,{operator:d.conditions[1].operator})+q;r="("+r+")";return r;},serialize:function(d){if(d instanceof C){if(d.operator==="And"&&d.conditions.length>1&&d.conditions[0]&&(d.conditions[0].operator==="Ge"||d.conditions[0].operator==="Gt"||d.conditions[0].operator==="Le"||d.conditions[0].operator==="Lt")){return this.serializeBetweenCondition(d);}else{return this.serializeComplexCondition(d);}}else{return this.serializeSimpleCondition(d);}}});return{serialize:function(d,e){var s=new b(d);return s.serialize(e);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/dataSourceSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator'],function(c,C,a){"use strict";return{serialize:function(d){if(d===d.sina.getAllDataSource()){return{Id:'<All>',Type:'Category'};}var t;switch(d.type){case d.sina.DataSourceType.Category:t='Category';break;case d.sina.DataSourceType.BusinessObject:t='View';break;}return{Id:d.id,Type:t};}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/suggestionParser.js":function(){sinaDefine(['../../core/core','./typeConverter'],function(c,t){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},parse:function(q,d){var s=[];var a;var b;for(var i=0;i<d.length;i++){a=null;b=d[i];a=this.parseSearchTermSuggestion(q,b);s.push(a);}return s;},parseDataSourceSuggestion:function(q,a){var b=this.sina.SuggestionCalculationMode.Data;var d=this.sina.getDataSource(a.FromDataSource);if(!d){return null;}var f=q.filter.clone();f.setDataSource(d);return this.sina._createDataSourceSuggestion({calculationMode:b,dataSource:d,label:a.SearchTermsHighlighted});},parseSearchTermSuggestion:function(q,a){var f=q.filter.clone();f.setSearchTerm(a.term);return this.sina._createSearchTermSuggestion({searchTerm:a.term,calculationMode:this.sina.SuggestionCalculationMode.Data,filter:f,label:a.term});},parseSearchTermAndDataSourceSuggestion:function(q,a){var b=this.parseCalculationMode(a.Type);var f=q.filter.clone();f.setSearchTerm(a.SearchTerms);var d=this.sina.getDataSource(a.FromDataSource);if(!d){return null;}f.setDataSource(d);return this.sina._createSearchTermAndDataSourceSuggestion({searchTerm:a.SearchTerms,dataSource:d,calculationMode:b,filter:f,label:a.SearchTermsHighlighted});},parseCalculationMode:function(s){switch(s){case'H':return this.sina.SuggestionCalculationMode.History;case'A':case'M':return this.sina.SuggestionCalculationMode.Data;}},_getParentCell:function(a){var p={};p=a;p.FromDataSource="<All>";p.FromDataSourceAttribute="";p.Type="A";return p;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/suggestionTermSplitter.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";var S=c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},split:function(t){var s=t.lastIndexOf(' ');if(s<0){return{searchTerm:null,suggestionTerm:t};}var a=t.slice(0,s);a=a.replace(/\s+$/,"");if(a.length===0){return{searchTerm:null,suggestionTerm:t};}var b=t.slice(s);b=b.replace(/^\s+/,"");if(b.length===0){return{searchTerm:null,suggestionTerm:t};}return{searchTerm:a,suggestionTerm:b};},concatenate:function(s,a){if(!s.searchTerm){return;}var t;var b=[];var d=s.searchTerm.split(' ');for(var k=0;k<d.length;k++){t=d[k];t=t.trim();b.push({term:t,regExp:new RegExp(this.escapeRegExp(t),'i')});}for(var i=0;i<a.length;++i){var e=a[i];var n=[];for(var j=0;j<b.length;++j){var f=b[j];if(!f.regExp.test(e.filter.searchTerm)){n.push(f.term);}}var p=[];var g=n.join(' ');for(var l=0;l<n.length;l++){t=n[l];p.push('<b>'+t+'</b>');}p=p.join(' ');e.label=p+' '+e.label;e.filter.searchTerm=g+' '+e.filter.searchTerm;this.concatenate(s,e.childSuggestions);}},escapeRegExp:function(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");}});return{split:function(p,t){var s=new S(p,t);return s.split(t);},concatenate:function(p,s,a){var b=new S(p);return b.concatenate(s,a);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/typeConverter.js":function(){sinaDefine(['../../core/core','../../sina/util','../../sina/AttributeType'],function(c,s,A){"use strict";return{sina2Odata:function(a,v,b){switch(a){case A.Double:return v.toString();case A.Integer:return v.toString();case A.String:return this.sina2OdataString(v,b);case A.Longtext:return v;case A.ImageUrl:return v;case A.ImageBlob:throw new c.Exception('not implemented');case A.GeoJson:return v;case A.Date:return this.sina2OdataDate(v);case A.Time:return this.sina2OdataTime(v);case A.Timestamp:return this.sina2OdataTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},sina2OdataString:function(v,a){return s.convertOperator2Wildcards(v,a.operator);},odata2Sina:function(a,v){switch(a){case A.Double:if(!v){return 0.000;}return parseFloat(v);case A.Integer:if(!v){return 0;}return parseInt(v,10);case A.String:if(!v){return'';}return v;case A.Longtext:if(!v){return'';}return v;case A.ImageUrl:if(!v){return'';}return v;case A.GeoJson:if(!v){return{};}return v;case A.Date:if(!v){return'1970-01-01';}return this.odata2SinaDate(v);case A.Time:if(!v){return'00:00:00';}return this.odata2SinaTime(v);case A.Timestamp:if(!v){return'1970-01-01T00:00:00.0000000Z';}return this.odata2SinaTimestamp(v);case A.ImageBlob:throw new c.Exception('not implemented');default:throw new c.Exception('unknown attribute type '+a);}},odata2SinaTimestamp:function(v){v=v.trim();var y,m,d,h,a,b;y=parseInt(v.slice(0,4),10);m=parseInt(v.slice(5,7),10);d=parseInt(v.slice(8,10),10);h=parseInt(v.slice(11,13),10);a=parseInt(v.slice(14,16),10);b=parseInt(v.slice(17,19),10);return new Date(Date.UTC(y,m-1,d,h,a,b));},sina2OdataTimestamp:function(v){var y=v.getUTCFullYear();var m=v.getUTCMonth()+1;var d=v.getUTCDate();var h=v.getUTCHours();var a=v.getUTCMinutes();var b=v.getUTCSeconds();var r=this.addLeadingZeros(y.toString(),4)+'-'+this.addLeadingZeros(m.toString(),2)+'-'+this.addLeadingZeros(d.toString(),2)+'T'+this.addLeadingZeros(h.toString(),2)+':'+this.addLeadingZeros(a.toString(),2)+':'+this.addLeadingZeros(b.toString(),2)+'Z';return r;},odata2SinaTime:function(v){v=v.trim();return v;},sina2OdataTime:function(v){return v;},odata2SinaDate:function(v){v=v.trim();return v.slice(0,4)+'/'+v.slice(5,7)+'/'+v.slice(8,10);},sina2OdataDate:function(v){return v.slice(0,4)+'-'+v.slice(5,7)+'-'+v.slice(8,10);},addLeadingZeros:function(v,l){return'00000000000000'.slice(0,l-v.length)+v;}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/FacetParser.js":function(){sinaDefine(['../../core/core','./pivotTableParser','../../sina/SearchQuery','./typeConverter'],function(c,p,S,t){"use strict";return c.defineClass({_init:function(a){this.provider=a;this.sina=a.sina;},parse:function(q,d){var f=[];if(!d.ResultsetFacets||!d.ResultsetFacets.Elements){return[];}for(var i=0;i<d.ResultsetFacets.Elements.length;i++){var a=d.ResultsetFacets.Elements[i];var b=a.Metadata.Cube.ObjectName;if(b==='$$DataSources$$'){f.push(this.parseDataSourceFacet(q,a));}else{if(q.filter.dataSource.type===q.sina.DataSourceType.Category){continue;}f.push(this.parseChartFacet(q,a));}}return c.Promise.all(f);},parseDataSourceFacet:function(q,f){var d=q;if(q instanceof S){d=this.sina.createDataSourceQuery({dataSource:q.filter.dataSource,filter:q.filter.clone()});}var a=p.parse(f.ResultSet);var b=[];for(var i=0;i<a.cells.length;i++){var e=a.cells[i];var g=this.sina.getDataSource(e.$$DataSource$$[0].Value);if(!g){g=this.sina._createDataSource({type:this.sina.DataSourceType.Category,id:e.$$DataSource$$[0].Value,label:e.$$DataSource$$[0].ValueFormatted});}b.push(this.sina._createDataSourceResultSetItem({dataSource:g,dimensionValueFormatted:e.$$DataSource$$[0].ValueFormatted,measureValue:e.Value,measureValueFormatted:e.ValueFormatted}));}var r=this.sina._createDataSourceResultSet({title:q.filter.dataSource.label,items:b,query:d});if(q instanceof S){return d._setResultSet(r);}return r;},createAttributeFilterCondition:function(a,m,b){switch(b.$$AttributeValue$$.length){case 2:return this.sina.createSimpleCondition({attribute:a,value:t.ina2Sina(m.type,b.$$AttributeValue$$[0].Value),attributeLabel:m.label,valueLabel:b.$$AttributeValue$$[0].ValueFormatted});case 3:var d=this.sina.createComplexCondition({attributeLabel:m.label,valueLabel:b.$$AttributeValue$$[0].ValueFormatted,operator:this.sina.LogicalOperator.And});var e=[];if(b.$$AttributeValue$$[1].Value){e.push(this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Ge,value:t.ina2Sina(m.type,b.$$AttributeValue$$[1].Value)}));}if(b.$$AttributeValue$$[2].Value){e.push(this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Le,value:t.ina2Sina(m.type,b.$$AttributeValue$$[2].Value)}));}d.conditions=e;return d;default:throw new c.Exception('parse error facets');}},parseChartFacet:function(q,f){var d=this.sina.getDataSource(f.Metadata.Cube.DataSource.ObjectName);var a=f.Metadata.Cube.ObjectName;var m=d.getAttributeMetadata(a);var b=q;if(q instanceof S){var e=q.filter.clone();e.setDataSource(d);e.setRootCondition(q.filter.rootCondition.clone());b=this.sina.createChartQuery({filter:e,dimension:f.Metadata.Cube.ObjectName});}var g=p.parse(f.ResultSet);var h=[];for(var i=0;i<g.cells.length;i++){var j=g.cells[i];h.push(this.sina._createChartResultSetItem({filterCondition:this.createAttributeFilterCondition(a,m,j),dimensionValueFormatted:j.$$AttributeValue$$[0].ValueFormatted||j.$$AttributeValue$$[0].Value,measureValue:j.Value,measureValueFormatted:j.ValueFormatted}));}var r=this.sina._createChartResultSet({title:m.label,items:h,query:b});if(q instanceof S){return b._setResultSet(r);}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/ItemParser.js":function(){sinaDefine(['../../core/core','../../core/util','./pivotTableParser','./typeConverter','../tools/fiori/FioriIntentsResolver','../../sina/NavigationTarget'],function(c,u,p,t,I,N){"use strict";return c.defineClass({_init:function(a){this.provider=a;this.sina=a.sina;this.intentsResolver=this.sina._createFioriIntentsResolver();},parse:function(s,d){var a=this.parseTotalCount(d);d=p.parse(d);if(d.axes.length===0){return Promise.resolve({totalCount:0,items:[]});}var b=d.axes[0];var e=[];for(var i=0;i<b.length;++i){var f=b[i];this.provider.metadataParser.parseSearchRequestMetadata(f);var g=this.parseItem(f);e.push(g);}return Promise.all(e).then(function(h){return{totalCount:a,items:h};}.bind(this));},parseTotalCount:function(d){if(d.ItemLists&&d.ItemLists[0]&&d.ItemLists[0].TotalCount){return d.ItemLists[0].TotalCount.Value;}return 0;},parseItem:function(a){var b=[];var d=[];var s=[];var e=this.sina.getDataSource(a.$$DataSourceMetaData$$[0].ObjectName);for(var m=0;m<a.$$ResultItemAttributes$$.length;++m){var f=a.$$ResultItemAttributes$$[m];var g=e.getAttributeMetadata(f.Name);var h=this.sina._createSearchResultSetItemAttribute({id:f.Name,label:e.getAttributeMetadata(f.Name).label,value:t.ina2Sina(g.type,f.Value),valueFormatted:f.ValueFormatted||f.Value,valueHighlighted:f.ValueFormatted||f.Value,isHighlighted:false,metadata:g});if(g.usage.Title){b.push(h);}if(g.usage.Detail){d.push(h);}for(var i=0;i<a.$$AttributeMetadata$$.length;i++){var l=a.$$AttributeMetadata$$[i];if(l.Name==f.Name){if(l.SemanticObjectType&&l.SemanticObjectType.length>0){s.push({name:l.SemanticObjectType,value:h.value,type:h.metadata.type});}break;}}}b.sort(function(B,C){return B.metadata.usage.Title.displayOrder-C.metadata.usage.Title.displayOrder;});d.sort(function(B,C){return B.metadata.usage.Detail.displayOrder-C.metadata.usage.Detail.displayOrder;});this.parseWhyFound(e,b,d,a);var n=[];var o=[];for(var j=0;j<b.length;++j){var q=b[j];n.push(q.valueFormatted);o.push(q.valueHighlighted);}n=n.join(' ');o=o.join(' ');var r;for(var k=0;k<a.$$RelatedActions$$.length;++k){var v=a.$$RelatedActions$$[k];if(v.Type==="GeneralUri"||v.Type==="SAPNavigation"){var w=v.Description;var x=encodeURI(v.Uri);r=this.sina._createNavigationTarget({label:w,targetUrl:x});}}var y=a.$$DataSourceMetaData$$[0].SemanticObjectType;var z=a.$$DataSourceMetaData$$[0].SystemId;var A=a.$$DataSourceMetaData$$[0].Client;return this.intentsResolver.resolveIntents({semanticObjectType:y,semanticObjectTypeAttributes:s,systemId:z,client:A,fallbackDefaultNavigationTarget:r}).then(function(B){var C=B&&B.defaultNavigationTarget;var D=B&&B.navigationTargets;var E=this.sina._createSearchResultSetItem({dataSource:e,title:n,titleHighlighted:o,titleAttributes:b,detailAttributes:d,defaultNavigationTarget:C,navigationTargets:D});return E;}.bind(this));},parseWhyFound:function(d,a,b,e){var i,w,f,j,g;for(i=0;i<e.$$WhyFound$$.length;i++){w=e.$$WhyFound$$[i];f=this.getResponseAttributeId(d,w.Name);for(j=0;j<a.length;++j){g=a[j];if(f===g.id){w.matched=true;g.valueHighlighted=w.Value;g.isHighlighted=true;break;}}for(j=0;j<b.length;++j){g=b[j];if(f===g.id){w.matched=true;g.valueHighlighted=w.Value;g.isHighlighted=true;break;}}}for(i=0;i<e.$$WhyFound$$.length;i++){w=e.$$WhyFound$$[i];if(w.matched){continue;}f=this.getResponseAttributeId(d,w.Name);var m=d.getAttributeMetadata(f);if(!m){throw new c.Exception('metadata misssing for '+f);}g=this.sina._createSearchResultSetItemAttribute({id:m.id,label:m.label,value:null,valueFormatted:u.filterString(w.Value,['<b>','</b>']),valueHighlighted:w.Value,isHighlighted:true,metadata:m});b.push(g);}},getResponseAttributeId:function(d,r){var a=this.provider.getInternalMetadataAttribute(d,r);if(!a){return r;}var b=this.provider.getInternalMetadataAttribute(d,a.correspondingSearchAttributeName);if(!b){return r;}return b.Name;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/LabelCalculator.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";var N=c.defineClass({_init:function(p,n){this.parent=p;this.nodeId=n;this.childMap={};this.children=[];},insert:function(k,d){if(k.length===0){this.data={dataSource:d,label:d.label,labelPlural:d.labelPlural};this.calculateLabel();return;}var a=k[0];var s=this.childMap[a];if(k.length===1&&s){throw new c.Exception('duplicate tree node');}if(!s){s=new N(this,a);this.childMap[a]=s;this.children.push(s);if(this.children.length===2){this.children[0].recalculateLabels();}}s.insert(k.slice(1),d);},recalculateLabels:function(){var l=[];this.collectLeafs(l);for(var i=0;i<l.length;++i){l[i].calculateLabel();}},collectLeafs:function(l){if(this.isLeaf()){l.push(this);return;}for(var i=0;i<this.children.length;++i){this.children[i].collectLeafs(l);}},isLeaf:function(){return this.children.length===0;},hasSibling:function(){return this.parent&&this.parent.children.length>=2;},isChildOfRoot:function(){return this.parent&&this.parent.nodeId==='__ROOT';},collectPath:function(k,f){if(!this.parent){return;}if(f||this.hasSibling()||this.isChildOfRoot()){k.push(this.nodeId);f=true;}if(this.parent){this.parent.collectPath(k,f);}},calculateLabel:function(){var k=[];this.collectPath(k);k.reverse();k.splice(0,1,this.data.label);this.data.dataSource.label=k.join(' ');k.splice(0,1,this.data.labelPlural);this.data.dataSource.labelPlural=k.join(' ');}});return c.defineClass({_init:function(){this.rootNode=new N(null,'__ROOT');},splitId:function(i){if(i[6]!=='~'){return{system:'__DUMMY',client:'__DUMMY'};}return{system:i.slice(0,3),client:i.slice(3,6)};},calculateLabel:function(d){var s=this.splitId(d.id);try{this.rootNode.insert([d.labelPlural,s.system,s.client],d);}catch(e){if(e instanceof c.Exception&&e.toString()==='duplicate tree node'){var i=c.generateId();d.label=d.label+i;d.labelPlural=d.labelPlural+i;return;}throw e;}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/MetadataParser.js":function(){sinaDefine(['../../core/core','./pivotTableParser','./typeConverter'],function(c,p,t){"use strict";return c.defineClass({_init:function(a){this.provider=a;this.sina=a.sina;},normalizeAttributeMetadata:function(a){a.IsKey=a.isKey;},parseRequestAttributes:function(d,a){var b=a.Cube.Dimensions;var f=[];for(var i=0;i<b.length;++i){var e=b[i];if(e.Name.slice(0,2)==='$$'){continue;}var g=e.Attributes[0];this.normalizeAttributeMetadata(g);f.push(g);}this.provider.fillInternalMetadata(d,'metadataRequest',f);},parseResponseAttributes:function(d,a){var f=[];var b=a.Cube.Dimensions[0].Attributes;for(var i=0;i<b.length;++i){var e=b[i];if(e.Name.slice(0,2)==='$$'){continue;}this.normalizeAttributeMetadata(e);f.push(e);}this.provider.fillInternalMetadata(d,'metadataRequest',f);},parseMetadataRequestMetadata:function(d,a){var m=this.provider.getInternalMetadataLoadStatus(d);if(m.metadataRequest){return;}this.parseRequestAttributes(d,a);this.parseResponseAttributes(d,a);this.fillPublicMetadataBuffer(d);},parseSearchRequestMetadata:function(i){var d=this.sina.getDataSource(i.$$DataSourceMetaData$$[0].ObjectName);var m=this.provider.getInternalMetadataLoadStatus(d);if(m.searchRequest){return;}this.provider.fillInternalMetadata(d,'searchRequest',i.$$AttributeMetadata$$);this.fillPublicMetadataBuffer(d);this.calculateAttributeDisplayOrder(d,i);},fillPublicMetadataBuffer:function(d){d.attributesMetadata=[];d.attributeMetadataMap={};var a=this.provider.getInternalMetadataAttributes(d);for(var i=0;i<a.length;++i){var b=a[i];var e=this.sina._createAttributeMetadata({type:this.parseAttributeType(b),id:b.Name,label:b.Description,isSortable:this.parseIsSortable(b),isKey:b.IsKey,matchingStrategy:this.parseMatchingStrategy(b),usage:this.parseUsage(b)});d.attributesMetadata.push(e);d.attributeMetadataMap[b.Name]=e;}d._configure();},calculateAttributeDisplayOrder:function(d,a){var b,e,i;var f=[];var g=[];var h=[];var k=[];for(var j=0;j<a.$$ResultItemAttributes$$.length;++j){var l=a.$$ResultItemAttributes$$[j];var m=this.provider.getInternalMetadataAttribute(d,l.Name);if(m.presentationUsage.indexOf('Title')>=0||m.IsTitle){f.push(l.Name);}if(m.presentationUsage.indexOf('Summary')>=0||m.presentationUsage.indexOf('Image')>=0||m.presentationUsage.indexOf('Thumbnail')>=0){g.push(l.Name);}else if(m.presentationUsage.indexOf('Detail')>=0){h.push(l.Name);}}for(i=0;i<f.length;++i){b=f[i];e=d.getAttributeMetadata(b);e.usage.Title.displayOrder=i;}k.push.apply(k,g);k.push.apply(k,h);for(i=0;i<k.length;++i){b=k[i];e=d.getAttributeMetadata(b);e.usage.Detail.displayOrder=i;}},parseIsSortable:function(a){if(typeof a.IsSortable==='undefined'){return false;}return a.IsSortable;},parseMatchingStrategy:function(a){if(a.hasFulltextIndex){return this.sina.MatchingStrategy.Text;}else{return this.sina.MatchingStrategy.Exact;}},parseUsage:function(a){var u={};if(a.presentationUsage.indexOf('Title')>=0||a.IsTitle){u.Title={displayOrder:0};}if(a.presentationUsage.indexOf('Summary')>=0||a.presentationUsage.indexOf('Image')>=0||a.presentationUsage.indexOf('Thumbnail')>=0||a.presentationUsage.indexOf('Detail')>=0){u.Detail={displayOrder:0};}if(a.accessUsage.indexOf('AutoFacet')>=0||a.accessUsage.indexOf('AdvancedSearch')>=0){u.AdvancedSearch={displayOrder:0};}return u;},parseAttributeType:function(a){for(var i=0;i<a.presentationUsage.length;i++){var b=a.presentationUsage[i];switch(b){case'Summary':continue;case'Detail':continue;case'Title':continue;case'Hidden':continue;case'FactSheet':continue;case'Thumbnail':case'Image':return this.sina.AttributeType.ImageUrl;case'Text':return this.sina.AttributeType.Longtext;default:throw new c.Exception('Unknown presentation usage '+b);}}switch(a.DataType){case'Integer':case'Long':return this.sina.AttributeType.Integer;case'Double':return this.sina.AttributeType.Double;case'String':return this.sina.AttributeType.String;case'Date':return this.sina.AttributeType.Date;case'Time':return this.sina.AttributeType.Time;case'Timestamp':return this.sina.AttributeType.Timestamp;case'GeoJson':return this.sina.AttributeType.GeoJson;default:throw new c.Exception('Unknown data type '+a.DataType);}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/Provider.js":function(){sinaDefine(['../../core/core','../../core/util','../../core/lang','./ajax','./ajaxTemplates','./pivotTableParser','./conditionSerializer','./dataSourceSerializer','./FacetParser','./ItemParser','./suggestionParser','./suggestionTermSplitter','./LabelCalculator','./UserEventLogger','./MetadataParser'],function(c,u,l,a,b,p,d,e,F,I,s,f,L,U,M){"use strict";return c.defineClass({id:'inav2',_initAsync:function(g){this.urlPrefix='/sap/es/ina';this.getServerInfoUrl=this.urlPrefix+'/GetServerInfo';this.getResponseUrl=this.urlPrefix+'/GetResponse';this.sina=g.sina;this.ajaxClient=a.createAjaxClient();this.metadataLoadPromises={};this.internalMetadata={};this.labelCalculator=new L();this.userEventLogger=new U(this);this.metadataParser=new M(this);this.itemParser=new I(this);this.facetParser=new F(this);this.executeSearchQuery=this.addMetadataLoadDecorator(this.executeSearchQuery);this.executeChartQuery=this.addMetadataLoadDecorator(this.executeChartQuery);this.executeSuggestionQuery=this.addMetadataLoadDecorator(this.executeSuggestionQuery);this.sessionId=c.generateGuid();return this.loadServerInfo().then(function(h){this.serverInfo=h;this.userEventLogger.delayedInit();if(!this.supports('Search')){return Promise.reject(new c.Exception('Enterprise Search is not active'));}return this.loadBusinessObjectDataSources();}.bind(this)).then(function(){return{capabilities:this.sina._createCapabilities({fuzzy:this.supports('Search','OptionFuzzy')})};}.bind(this));},addMetadataLoadDecorator:function(g){return function(){var h=arguments;var q=arguments[0];var i=q.filter.dataSource;return Promise.resolve().then(function(){return this.loadMetadata(i);}.bind(this)).then(function(){return g.apply(this,h);}.bind(this));}.bind(this);},loadMetadata:function(g){if(g.type===this.sina.DataSourceType.Category){return c.Promise.resolve();}var h=this.metadataLoadPromises[g.id];if(h){return h;}b.loadDataSourceMetadataRequest.DataSource.ObjectName=g.id;this.addLanguagePreferences(b.loadDataSourceMetadataRequest);h=this.ajaxClient.postJson(this.getResponseUrl,b.loadDataSourceMetadataRequest).then(function(r){this.metadataParser.parseMetadataRequestMetadata(g,r.data);}.bind(this));this.metadataLoadPromises[g.id]=h;return h;},supports:function(g,h){for(var i=0;i<this.serverInfo.Services.length;++i){var k=this.serverInfo.Services[i];if(k.Service==g){if(!h){return true;}for(var j=0;j<k.Capabilities.length;++j){var m=k.Capabilities[j];if(m.Capability===h){return true;}}}}return false;},loadServerInfo:function(){return this.ajaxClient.getJson(this.getServerInfoUrl).then(function(r){return r.data;}.bind(this));},loadBusinessObjectDataSources:function(){var t=this;t.addLanguagePreferences(b.loadDataSourcesRequest);if(t.supports('Search','PluralDescriptionForDataSource')){b.loadDataSourcesRequest.Search.NamedValues.push({AttributeName:"DescriptionPlural",Name:"DescriptionPlural"});}return t.ajaxClient.postJson(t.getResponseUrl,b.loadDataSourcesRequest).then(function(r){t._processDataSourcesResponse(r,false);},function(g){var h=t.serverInfo.ServerInfo.SystemId+t.serverInfo.ServerInfo.Client+"~ESH_CONNECTOR~";b.fallbackLoadDataSourcesRequest.DataSource.ObjectName=h;return t.ajaxClient.postJson(t.getResponseUrl,b.fallbackLoadDataSourcesRequest).then(function(r){t._processDataSourcesResponse(r,true);});});},_processDataSourcesResponse:function(r,g){var h=p.parse(r.data);var j=h.axes[0];for(var i=0;i<j.length;++i){var k=j[i];var m='';var n='';var o='';if(!g){if(c.isObject(k.Description)){m=k.Description.Value;}else{m=k.Description;}if(c.isObject(k.DescriptionPlural)){n=k.DescriptionPlural.Value;}else{n=k.DescriptionPlural;}if(c.isObject(k.ObjectName)){o=k.ObjectName.Value;}else{o=k.ObjectName;}}else{k.$$ResultItemAttributes$$.forEach(function(t){if(t.Name==="DESCRIPTION"){m=t.Value;}if(t.Name==="DESCRIPTION_PLURAL"){n=t.Value;}if(t.Name==="OBJECT_NAME"){o=t.Value;}});}if(!m){m=o;}if(!n){n=m;}var q=this.sina._createDataSource({id:o,label:m,labelPlural:n,type:this.sina.DataSourceType.BusinessObject,attributesMetadata:[{id:'dummy'}]});this.labelCalculator.calculateLabel(q);}},getInternalMetadataAttributes:function(g){var h=[];var i=this.internalMetadata[g.id];if(!i){return h;}for(var j in i.data){h.push(i.data[j]);}return h;},getInternalMetadataAttribute:function(g,h){return this.internalMetadata[g.id].data[h];},getInternalMetadataLoadStatus:function(g){var i=this.internalMetadata[g.id];if(!i){return{};}return i.loadStatus;},fillInternalMetadata:function(g,h,j){var k=this.internalMetadata[g.id];if(!k){k={loadStatus:{},data:{}};this.internalMetadata[g.id]=k;}for(var i=0;i<j.length;++i){var m=j[i];var n=k.data[m.Name];if(!n){n={};k.data[m.Name]=n;}for(var o in m){n[o]=m[o];}}k.loadStatus[h]=true;},addTemplateConditions:function(r){r.addCondition({attribute:'$$RenderingTemplatePlatform$$',operator:this.sina.ComparisonOperator.Eq,value:'html'});r.addCondition({attribute:'$$RenderingTemplateTechnology$$',operator:this.sina.ComparisonOperator.Eq,value:'Tempo'});r.addCondition({attribute:'$$RenderingTemplateType$$',operator:this.sina.ComparisonOperator.Eq,value:'ResultItem'});r.addCondition({attribute:'$$RenderingTemplateType$$',operator:this.sina.ComparisonOperator.Eq,value:'ItemDetails'});},assembleOrderBy:function(q){var r=[];for(var i=0;i<q.sortOrder.length;++i){var g=q.sortOrder[i];var h=(g.order===this.sina.SortOrder.Descending)?'DESC':'ASC';r.push({AttributeName:g.id,SortOrder:h});}return r;},executeSearchQuery:function(q){var g,r;var h=q.filter.rootCondition.clone();this.addTemplateConditions(h);b.searchRequest.Search.Filter=d.serialize(q.filter.dataSource,h);b.searchRequest.DataSource=e.serialize(q.filter.dataSource);b.searchRequest.Search.SearchTerms=q.filter.searchTerm;b.searchRequest.Search.Top=q.top;b.searchRequest.Search.Skip=q.skip;b.searchRequest.Options=this.assembleRequestOptions(q);b.searchRequest.Search.OrderBy=this.assembleOrderBy(q);b.searchRequest.Search.Expand=['Grid','Items','TotalCount'];this.addLanguagePreferences(b.searchRequest);this.addSessionId(b.searchRequest);if(q.calculateFacets){b.searchRequest.Search.Expand.push('ResultsetFacets');}return this.ajaxClient.postJson(this.getResponseUrl,b.searchRequest).then(function(i){r=i;return this.itemParser.parse(q,r.data);}.bind(this)).then(function(i){g=i;return this.facetParser.parse(q,r.data);}.bind(this)).then(function(i){return this.sina._createSearchResultSet({id:r.data.ExecutionID,title:'Search Result List',query:q,items:g.items,totalCount:g.totalCount,facets:i});}.bind(this));},executeChartQuery:function(q){var r=q.filter.rootCondition.clone();this.addTemplateConditions(r);b.chartRequest.Search.Filter=d.serialize(q.filter.dataSource,r);b.chartRequest.DataSource=e.serialize(q.filter.dataSource);b.chartRequest.Search.SearchTerms=q.filter.searchTerm;b.chartRequest.Search.Top=1;b.chartRequest.Search.Skip=0;b.chartRequest.Facets.Attributes=[q.dimension];b.chartRequest.Facets.MaxNumberOfReturnValues=q.top;b.chartRequest.Options=this.assembleRequestOptions(q);this.addLanguagePreferences(b.chartRequest);this.addSessionId(b.chartRequest);return this.ajaxClient.postJson(this.getResponseUrl,b.chartRequest).then(function(g){return this.facetParser.parse(q,g.data);}.bind(this)).then(function(g){if(g.length>0){return g[0];}return this.sina._createChartResultSet({title:q.filter.dataSource.getAttributeMetadata(q.dimension).label,items:[],query:q});}.bind(this));},executeSuggestionQuery:function(q){var g=q.filter.searchTerm;var h=f.split(this,g);var r=q.filter.rootCondition.clone();if(h.searchTerm){r.addCondition(q.sina.createSimpleCondition({attribute:'$$SearchTerms$$',value:h.searchTerm}));}r.addCondition(q.sina.createSimpleCondition({attribute:'$$SuggestionTerms$$',value:h.suggestionTerm}));b.suggestionRequest.Suggestions2.Filter=d.serialize(q.filter.dataSource,r);b.suggestionRequest.DataSource=e.serialize(q.filter.dataSource);b.suggestionRequest.Options=this.assembleSuggestionOptions(q);if(b.suggestionRequest.Options.length===0){return this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:[]});}b.suggestionRequest.Suggestions2.Top=q.top;b.suggestionRequest.Suggestions2.Skip=q.skip;this.addLanguagePreferences(b.suggestionRequest);this.addSessionId(b.suggestionRequest);return this.ajaxClient.postJson(this.getResponseUrl,b.suggestionRequest).then(function(i){var j=s.parse(this,q,i.data);f.concatenate(this,h,j);return this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:j});}.bind(this));},addSessionId:function(r){if(!this.supports('Search','SessionHandling')){delete r.SessionID;delete r.SessionTimestamp;return;}r.SessionID=this.sessionId;r.SessionTimestamp=parseInt(u.generateTimestamp(),10);},addLanguagePreferences:function(r){if(!this.supports('Search','LanguagePreferences')){delete r.LanguagePreferences;return;}r.LanguagePreferences=l.getLanguagePreferences();},assembleSuggestionOptions:function(q){var g={SearchTerm:{Data:'SuggestObjectData',History:'SuggestSearchHistory'},Object:{},DataSource:{Data:'SuggestDataSources'}};if(!this.supports('Suggestions2','ScopeTypes')){delete g.SearchTerm.History;delete g.DataSource.Data;}var o=[];var h=q.types;var k=q.calculationModes;for(var i=0;i<h.length;i++){var m=h[i];for(var j=0;j<k.length;j++){var n=k[j];var v=g[m][n];if(!v){continue;}o.push(v);}}return o;},assembleRequestOptions:function(q){var O=['SynchronousRun'];if(this.decideValueHelp(q)){O.push('ValueHelpMode');}return O;},decideValueHelp:function(q){var g=q.filter.rootCondition.conditions;for(var i=0;i<g.length;i++){if(q.filter._getAttribute(g[i])===q.dimension){return true;}}return false;},getConfigurationAsync:function(){if(!this.supports('PersonalizedSearch','SetUserStatus')){return c.Promise.resolve(this.sina._createConfiguration({personalizedSearch:false,isPersonalizedSearchEditable:false}));}return this.ajaxClient.postJson(this.getResponseUrl,b.getConfigurationRequest).then(function(r){var g={personalizedSearch:false,isPersonalizedSearchEditable:false};g.personalizedSearch=r.data.Data.PersonalizedSearch.SessionUserActive;switch(r.data.Data.PersonalizedSearch.PersonalizationPolicy){case'Opt-In':g.isPersonalizedSearchEditable=true;break;case'Opt-Out':g.isPersonalizedSearchEditable=true;break;case'Enforced':g.isPersonalizedSearchEditable=false;break;case'Disabled':g.isPersonalizedSearchEditable=false;break;}return this.sina._createConfiguration(g);}.bind(this));},saveConfigurationAsync:function(g){if(!this.supports('PersonalizedSearch','SetUserStatus')){return c.Promise.resolve();}b.saveConfigurationRequest.SearchConfiguration.Data.PersonalizedSearch.SessionUserActive=g.personalizedSearch;return this.ajaxClient.postJson(this.getResponseUrl,b.saveConfigurationRequest);},resetPersonalizedSearchDataAsync:function(){if(!this.supports('PersonalizedSearch','ResetUserData')){return c.Promise.resolve();}return this.ajaxClient.postJson(this.getResponseUrl,b.resetPersonalizedSearchDataRequest);},logUserEvent:function(g){return this.userEventLogger.logUserEvent(g);},getDebugInfo:function(){return'Searchsystem: '+this.serverInfo.ServerInfo.SystemId+' Client: '+this.serverInfo.ServerInfo.Client;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/UserEventLogger.js":function(){sinaDefine(['../../core/core','../../core/util','./ajaxTemplates'],function(c,u,a){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.eventLoggingActive=false;this.clickCounterActive=false;this.delayedConsumer=new u.DelayedConsumer({timeDelay:2000,consumer:this.processEvents,consumerContext:this});},delayedInit:function(){this.eventLoggingActive=this.provider.supports('SearchInteractionLogging','SearchInteractionLogging');this.clickCounterActive=this.provider.supports('PersonalizedSearch');},logUserEvent:function(e){e.timeStamp=u.generateTimestamp();if(this.eventLoggingActive&&e.type!=='ITEM_NAVIGATE'){this.delayedConsumer.add(e);}if(this.clickCounterActive&&e.type==='ITEM_NAVIGATE'&&e.sourceUrlArray.length!==0){this.incrementClickCounter(e.sourceUrlArray,e.targetUrl,e.systemAndClient);}},processEvents:function(e){var r={SearchInteractionLogging:{SessionID:this.provider.sessionId,EventList:[]}};for(var i=0;i<e.length;++i){var b=e[i];var d={Type:b.type,Timestamp:b.timeStamp,ParameterList:[]};for(var n in b){if(n==='type'||n==='timeStamp'){continue;}var v=b[n];d.ParameterList.push({Name:n,Value:v});}r.SearchInteractionLogging.EventList.push(d);}return this.provider.ajaxClient.postJson(this.provider.getResponseUrl,r);},incrementClickCounter:function(s,t,b){if(!t){return undefined;}if(t.indexOf("#")===-1){return undefined;}if(!this.provider.supports('PersonalizedSearch','SetUserStatus')){return undefined;}var g=function(H){return H.split("-")[0];};var d=function(H){return H.split("-")[1].split("&")[0];};var e=function(p){var o=p;var q=[];for(var i=0,r=o.length;i<r;i++){var v=o[i];if(v.indexOf("sap-system")!==-1){continue;}var w=v.split("=")[0];var x=v.split("=")[1];q.push({Name:w,Value:x});}return q;};var N=a.incrementClickCounterRequest.SearchConfiguration.ClientEvent.NavigationEventList;var h=s;var f=g(h[0]);N[0].SourceApplication.SemanticObjectType=f;var j=d(h[0]);N[0].SourceApplication.Intent=j;var k=h[1]!==undefined?e(h[1].split("&")):[];N[0].SourceApplication.ParameterList=k;h=t.split("?");var l=g(h[0]).split("#")[1];N[1].TargetApplication.SemanticObjectType=l;var m=d(h[0]);N[1].TargetApplication.Intent=m;var n=h[1]!==undefined?e(h[1].split("&")):[];N[1].TargetApplication.ParameterList=n;var S={"System":b.systemId,"Client":b.client};delete N[1].TargetApplication['System'];delete N[1].TargetApplication['Client'];N[1].TargetApplication=jQuery.extend(N[1].TargetApplication,S);return this.provider.ajaxClient.postJson(this.provider.getResponseUrl,a.incrementClickCounterRequest);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/ajax.js":function(){sinaDefine(['../../core/core','../../core/ajax'],function(c,a){"use strict";var m={};m.Exception=c.Exception.derive({_init:function(d){c.Exception.prototype._init.apply(this,[d]);}});var p=function(d){try{var f=JSON.parse(d.responseText);var g=f.Error.Code+': '+f.Error.Message;var h=[];if(f.ErrorDetails){for(var i=0;i<f.ErrorDetails.length;++i){var k=f.ErrorDetails[i];h.push(k.Code+': '+k.Message);}}if(f.Messages){for(var j=0;j<f.Messages.length;++j){var l=f.Messages[j];h.push(l.Number+': '+l.Text+' ('+l.Type+')');}}h=h.join('\n');return c.Promise.reject(new m.Exception({message:g,description:h,previous:d}));}catch(e){return c.Promise.reject(d);}};var b=function(o){return function(){return o.apply(this,arguments).then(function(r){return r;}.bind(this),function(e){if(!(e instanceof a.Exception)){return c.Promise.reject(e);}return p(e);}.bind(this));};};m.createAjaxClient=function(){var d=new a.Client({csrf:true,csrfByPassCache:true});d.postJson=b(d.postJson);d.getJson=b(d.getJson);d.mergeJson=b(d.mergeJson);return d;};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/ajaxTemplates.js":function(){sinaDefine([],function(){"use strict";var m={};m.loadDataSourcesRequest={"DataSource":{"ObjectName":"$$DataSources$$","PackageName":"ABAP"},"Options":["SynchronousRun"],"Search":{"Top":1000,"Skip":0,"OrderBy":[{"AttributeName":"Description","SortOrder":"ASC"},{"AttributeName":"ObjectName","SortOrder":"ASC"}],"Expand":["Grid","Items"],"Filter":{"Selection":{"Operator":{"Code":"And","SubSelections":[{"MemberOperand":{"AttributeName":"SupportedService","Comparison":"=","Value":"Search"}},{"MemberOperand":{"AttributeName":"Type","Comparison":"=","Value":"View"}}]}}},"NamedValues":[{"AttributeName":"ObjectName","Name":"ObjectName"},{"AttributeName":"Description","Name":"Description"},{"AttributeName":"Type","Name":"Type"}]},"SearchTerms":"*","ServiceVersion":204};m.fallbackLoadDataSourcesRequest={"DataSource":{"SchemaName":"","PackageName":"ABAP","ObjectName":"","type":"Connector"},"Search":{"Top":1000,"Skip":0,"OrderBy":[{"AttributeName":"DESCRIPTION","SortOrder":"ASC"}],"Expand":["Grid","Items","TotalCount"],"Filter":{},"NamedValues":[{"AttributeName":"$$ResultItemAttributes$$","Name":"$$ResultItemAttributes$$"},{"AttributeName":"$$RelatedActions$$","Name":"$$RelatedActions$$"}],"SearchTerms":"*","SelectedValues":[]},"SearchTerms":"*"};m.searchRequest={"DataSource":{},"Options":["SynchronousRun"],"Search":{"Expand":["Grid","Items","ResultsetFacets","TotalCount"],"Filter":{"Selection":{"Operator":{"Code":"And","SubSelections":[{"MemberOperand":{"AttributeName":"$$RenderingTemplatePlatform$$","Comparison":"=","Value":"html"}},{"MemberOperand":{"AttributeName":"$$RenderingTemplateTechnology$$","Comparison":"=","Value":"Tempo"}},{"MemberOperand":{"AttributeName":"$$RenderingTemplateType$$","Comparison":"=","Value":"ResultItem"}}]}}},"Top":10,"Skip":0,"SearchTerms":"S*","NamedValues":[{"Function":"WhyFound","Name":"$$WhyFound$$"},{"Function":"RelatedActions","Name":"$$RelatedActions$$"},{"AttributeName":"$$RelatedActions.Proxy$$"}]},"ServiceVersion":204};m.chartRequest={"DataSource":{},"Options":["SynchronousRun"],"Search":{"Expand":["Grid","ResultsetFacets","TotalCount"],"Filter":{},"Top":10,"Skip":0,"SearchTerms":"*","NamedValues":[{"Function":"WhyFound","Name":"$$WhyFound$$"},{"AttributeName":"$$RelatedActions$$"},{"AttributeName":"$$RelatedActions.Proxy$$"}],"OrderBy":[]},"ServiceVersion":204,"Facets":{"MaxNumberOfReturnValues":1000,"Attributes":[]}};m.suggestionRequest={"DataSource":{},"Options":["SynchronousRun"],"Suggestions2":{"Expand":["Grid","Items"],"Precalculated":false,"AttributeNames":[]},"ServiceVersion":204};m.getConfigurationRequest={"SearchConfiguration":{"Action":"Get","Data":{"PersonalizedSearch":{}}}};m.saveConfigurationRequest={"SearchConfiguration":{"Action":"Update","Data":{"PersonalizedSearch":{"SessionUserActive":true}}}};m.resetPersonalizedSearchDataRequest={"SearchConfiguration":{"Action":"Update","Data":{"PersonalizedSearch":{"ResetUserData":true}}}};m.incrementClickCounterRequest={"SearchConfiguration":{"Action":"Update","ClientEvent":{"NavigationEventList":[{"SourceApplication":{"SemanticObjectType":"Action","Intent":"search","ParameterList":[{"Name":"searchterm","Value":"*"},{"Name":"datasource","Value":"{\"label\":\"Purchase Order\",\"labelPlural\":\"Purchase Orders\",\"SchemaName\":{\"label\":\"\",\"value\":\"\"},\"PackageName\":{\"label\":\"ABAP\",\"value\":\"ABAP\"},\"ObjectName\":{\"label\":\"CES002~EPM_PO_DEMO~\",\"value\":\"CES002~EPM_PO_DEMO~\"},\"Type\":\"BusinessObject\"}"},{"Name":"top","Value":"10"},{"Name":"filter","Value":"{\"operator\":\"And\",\"label\":\"DefaultRoot\",\"conditions\":[]}"}]}},{"TargetApplication":{"SemanticObjectType":"EPMPurchaseOrder","Intent":"displayFactSheet","ParameterList":[{"Name":"PurchaseOrderInternalId","Value":"3440B5B014B21EE798DDB43D63E56068"}]}}]}}};m.loadDataSourceMetadataRequest={"DataSource":{"ObjectName":"CER002~EPM_EMPLOYEES_DEMO~","PackageName":"ABAP","SchemaName":""},"Options":["SynchronousRun"],"Metadata":{"Context":"Search","Expand":["Cube"]},"ServiceVersion":204};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/conditionSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator','./typeConverter'],function(c,C,a,t){"use strict";var b=c.defineClass({_init:function(d){this.dataSource=d;},convertSinaToInaOperator:function(s){switch(s){case a.Eq:return'=';case a.Lt:return'<';case a.Gt:return'>';case a.Le:return'<=';case a.Ge:return'>=';case a.Co:return'=';case a.Bw:return'=';case a.Ew:return'=';default:throw new c.Exception('unknow comparison operator '+s);}},serializeComplexCondition:function(d){var r={Selection:{Operator:{Code:d.operator,SubSelections:[]}}};var s=d.conditions;for(var i=0;i<s.length;++i){var e=s[i];r.Selection.Operator.SubSelections.push(this.serialize(e));}return r;},serializeSimpleCondition:function(d){if(!d.value){return undefined;}var e=d.attribute;var f;if(e.slice(0,2)==='$$'){f=this.dataSource.sina.AttributeType.String;}else{var m=this.dataSource.getAttributeMetadata(e);f=m.type;}var o='MemberOperand';if(e==='$$SuggestionTerms$$'||e==='$$SearchTerms$$'){o='SearchOperand';}var r={};r[o]={AttributeName:e,Comparison:this.convertSinaToInaOperator(d.operator),Value:t.sina2Ina(f,d.value,{operator:d.operator})};return r;},serialize:function(d){if(d instanceof C){return this.serializeComplexCondition(d);}else{return this.serializeSimpleCondition(d);}}});return{serialize:function(d,e){var s=new b(d);return s.serialize(e);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/dataSourceSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator'],function(c,C,a){"use strict";return{serialize:function(d){if(d.id==='All'&&d.type===d.sina.DataSourceType.Category){return{ObjectName:'$$ALL$$',PackageName:'ABAP',SchemaName:'',Type:'Category'};}var t;switch(d.type){case d.sina.DataSourceType.Category:t='Category';break;case d.sina.DataSourceType.BusinessObject:t='Connector';break;}return{ObjectName:d.id,PackageName:'ABAP',SchemaName:'',Type:t};}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/pivotTableParser.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";var m={};m.ResultSetParser=function(){this._init.apply(this,arguments);};m.ResultSetParser.prototype={_init:function(o){this.resultSet=o.resultSet;},parseNamedValue:function(n){var v;var a;var b;for(var p in n){switch(p){case'Name':a=n[p];break;case'Value':v=n[p];break;default:if(!b){b={};}b[p]=n[p];}}if(b){b.Value=v;return{name:a,value:b};}else{return{name:a,value:v};}},formatItem:function(a){var l;if(a.NamedValues){l=a.NamedValues;}if(!l){return a;}var o={};for(var i=0;i<l.length;++i){var n=l[i];var p=this.parseNamedValue(n);o[p.name]=this.formatItem(p.value);}return o;},formatItems:function(a){var r={};for(var i=0;i<a.length;++i){var b=a[i];var f=this.formatItem(b);c.extend(r,f);}return r;},parse:function(){if(!this.resultSet.Grids||!this.resultSet.Grids[0]||!this.resultSet.Grids[0].Axes){return{cells:[],axes:[]};}this.enhance(this.resultSet);var g=this.resultSet.Grids[0];if(g.Cells.length>0){return this.parseWithCells(g);}else{return this.parseWithoutCells(g);}},parseWithCells:function(g){var r={cells:[]};for(var i=0;i<g.Cells.length;i++){var a=g.Cells[i];var b=[];for(var j=0;j<a.Index.length;j++){var d=a.Index[j];var e=g.Axes[j];var f=this.resolve(e,d);b.push.apply(b,f);}var h=c.extend({},a);delete h.Index;b.push(h);r.cells.push(this.formatItems(b));}return r;},parseWithoutCells:function(g){var r={axes:[]};for(var i=0;i<g.Axes.length;++i){var a=g.Axes[i];var b=[];r.axes.push(b);for(var j=0;j<a.Tuples.length;++j){var d=this.resolve(a,j);b.push(this.formatItems(d));}}return r;},resolve:function(a,b){var d=[];if(a.Tuples.length===0){return d;}var t=a.Tuples[b];for(var i=0;i<t.length;++i){var e=t[i];var f=a.Dimensions[i].ItemList.Items[e];d.push(f);}return d;},enhance:function(r){var a={};for(var i=0;i<r.ItemLists.length;++i){var b=r.ItemLists[i];a[b.Name]=b;}for(var h=0;h<r.Grids.length;++h){var g=r.Grids[h];for(var j=0;j<g.Axes.length;++j){var d=g.Axes[j];for(var k=0;k<d.Dimensions.length;++k){var e=d.Dimensions[k];e.ItemList=a[e.ItemListName];}}}}};m.parse=function(r){var p=new m.ResultSetParser({resultSet:r});return p.parse();};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/qunit/test.js":function(){sinaDefine(['./testLabelCalculator','./testConfiguration','./testAjaxClient'],function(){"use strict";});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/qunit/testAjaxClient.js":function(){sinaDefine(['../../../core/ajax','../ajaxTemplates'],function(a,b){"use strict";QUnit.test('AjaxClient-1',function(c){var d=c.async();var e=new a.Client({csrf:true});e.getJson('/sap/es/ina/GetServerInfo').then(function(s){e.postJson('/sap/es/ina/GetResponse',b.loadDataSourcesRequest).then(function(r){c.ok(r.data.ItemLists[0].Items.length>0);d();});});});QUnit.test('AjaxClient-2',function(c){var d=c.async();var e=new a.Client({csrf:true,csrfFetchRequest:{method:'GET',url:'/sap/es/ina/GetServerInfo',headers:a.Client.prototype.jsonHeaders}});e.postJson('/sap/es/ina/GetResponse',b.loadDataSourcesRequest).then(function(r){c.ok(r.data.ItemLists[0].Items.length>0);d();});});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/qunit/testConfiguration.js":function(){sinaDefine(['../../../sina/sinaFactory'],function(s){"use strict";QUnit.test('Configuration',function(a){var d=a.async();s.createAsync('../Provider').then(function(b){b.getConfigurationAsync().then(function(c){c.setPersonalizedSearch(false);c.saveAsync().then(function(){c.resetPersonalizedSearchDataAsync().then(function(){a.equal(1,1);d();});});});});});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/qunit/testLabelCalculator.js":function(){sinaDefine(['../LabelCalculator'],function(L){"use strict";var t=function(a,s){var d=[];var l=new L();for(var i=0;i<s.length;++i){var b=s[i];l.calculateLabel(b.dataSource);d.push(b.dataSource);for(var j=0;j<=i;++j){a.equal(b.labels[j],d[j].label,'label comparison');a.equal(b.labelsPlural[j],d[j].labelPlural,'label plural comparison');}}};QUnit.test("LabelCalculator 1",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER002~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order'],labelsPlural:['Purchase Orders','Sales Orders']},{dataSource:{id:'CES002~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order CER','Sales Order CES'],labelsPlural:['Purchase Orders','Sales Orders CER','Sales Orders CES']},{dataSource:{id:'CES003~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order CER','Sales Order CES 002','Sales Order CES 003'],labelsPlural:['Purchase Orders','Sales Orders CER','Sales Orders CES 002','Sales Orders CES 003']}]);});QUnit.test("LabelCalculator 2",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER003~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003']},{dataSource:{id:'CES003~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003','Purchase Order CES'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003','Purchase Orders CES']},{dataSource:{id:'CES003~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003','Purchase Order CES','Sales Order'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003','Purchase Orders CES','Sales Orders']}]);});QUnit.test("LabelCalculator - system and client not sufficient for unique key",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER002~EPM_PO_DEMO_2~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order','Purchase Order#1'],labelsPlural:['Purchase Orders','Purchase Orders#1']}]);});QUnit.test("LabelCalculator - category",function(a){t(a,[{dataSource:{id:'EPM_Demo',label:'Procurement',labelPlural:'Procurement'},labels:['Procurement'],labelsPlural:['Procurement']}]);});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/suggestionParser.js":function(){sinaDefine(['../../core/core','./pivotTableParser','./typeConverter'],function(c,p,t){"use strict";var S=c.defineClass({_init:function(a){this.provider=a;this.sina=a.sina;},parseSuggestions:function(q,d){d=p.parse(d);var s=[];var a;var b;for(var i=0;i<d.cells.length;i++){a=null;var e=d.cells[i];if(e.$$Attribute$$!=='$$AllAttributes$$'){continue;}switch(e.$$Term$$.Scope){case'SearchHistory':if(e.$$DataSource$$==='$$AllDataSources$$'){a=this.parseSearchTermSuggestion(q,e);}break;case'ObjectData':if(e.$$DataSource$$==='$$AllDataSources$$'){a=this.parseSearchTermSuggestion(q,e);b=a;}else{a=this.parseSearchTermAndDataSourceSuggestion(q,e);if(a&&a.filter.dataSource!==b.filter.dataSource){b.childSuggestions.push(a);}a=null;}break;case'DataSources':if(e.$$DataSource$$==='$$AllDataSources$$'){a=this.parseDataSourceSuggestion(q,e);}break;}if(a){s.push(a);}}return s;},parseDataSourceSuggestion:function(q,a){var d=this.sina.getDataSource(a.$$Term$$.Value);if(!d){return null;}var f=q.filter.clone();f.setDataSource(d);return this.sina._createDataSourceSuggestion({calculationMode:this.sina.SuggestionCalculationMode.Data,dataSource:d,label:a.$$Term$$.ValueFormatted});},parseSearchTermSuggestion:function(q,a){var b=this.parseCalculationMode(a.$$Term$$.Scope);var f=q.filter.clone();f.setSearchTerm(a.$$Term$$.Value);return this.sina._createSearchTermSuggestion({searchTerm:a.$$Term$$.Value,calculationMode:b,filter:f,label:a.$$Term$$.ValueFormatted});},parseSearchTermAndDataSourceSuggestion:function(q,a){var b=this.parseCalculationMode(a.$$Term$$.Scope);var f=q.filter.clone();f.setSearchTerm(a.$$Term$$.Value);var d=this.sina.getDataSource(a.$$DataSource$$);if(!d){return null;}f.setDataSource(d);return this.sina._createSearchTermAndDataSourceSuggestion({searchTerm:a.$$Term$$.Value,dataSource:d,calculationMode:b,filter:f,label:a.$$Term$$.ValueFormatted});},parseCalculationMode:function(s){switch(s){case'SearchHistory':return this.sina.SuggestionCalculationMode.History;case'ObjectData':return this.sina.SuggestionCalculationMode.Data;}}});return{parse:function(a,s,d){var b=new S(a);return b.parseSuggestions(s,d);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/suggestionTermSplitter.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";var S=c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},split:function(t){var s=t.lastIndexOf(' ');if(s<0){return{searchTerm:null,suggestionTerm:t};}var a=t.slice(0,s);a=a.replace(/\s+$/,"");if(a.length===0){return{searchTerm:null,suggestionTerm:t};}var b=t.slice(s);b=b.replace(/^\s+/,"");if(b.length===0){return{searchTerm:null,suggestionTerm:t};}return{searchTerm:a,suggestionTerm:b};},concatenate:function(s,a){if(!s.searchTerm){return;}var t;var b=[];var d=s.searchTerm.split(' ');for(var k=0;k<d.length;k++){t=d[k];t=t.trim();b.push({term:t,regExp:new RegExp(this.escapeRegExp(t),'i')});}for(var i=0;i<a.length;++i){var e=a[i];if(e.suggestionType!==this.sina.SuggestionType.SearchTerm&&e.suggestionType!==this.sina.SuggestionType.SearchTermAndDataSource){continue;}var n=[];for(var j=0;j<b.length;++j){var f=b[j];if(!f.regExp.test(e.filter.searchTerm)){n.push(f.term);}}var p=[];var g=n.join(' ');for(var l=0;l<n.length;l++){t=n[l];p.push('<b>'+t+'</b>');}p=p.join(' ');e.label=p+' '+e.label;e.filter.searchTerm=g+' '+e.filter.searchTerm;this.concatenate(s,e.childSuggestions);}},escapeRegExp:function(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");}});return{split:function(p,t){var s=new S(p,t);return s.split(t);},concatenate:function(p,s,a){var b=new S(p);return b.concatenate(s,a);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/typeConverter.js":function(){sinaDefine(['../../core/core','../../sina/util','../../sina/AttributeType','../../sina/ComparisonOperator'],function(c,s,A,C){"use strict";return{sina2Ina:function(a,v,b){b=b||{};switch(a){case A.Double:return v.toString();case A.Integer:return v.toString();case A.String:return this.sina2InaString(v,b);case A.Longtext:return v;case A.ImageUrl:return v;case A.ImageBlob:throw new c.Exception('not implemented');case A.GeoJson:return v;case A.Date:return this.sina2InaDate(v,b);case A.Time:return this.sina2InaTime(v);case A.Timestamp:return this.sina2InaTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},ina2Sina:function(a,v){switch(a){case A.Double:return parseFloat(v);case A.Integer:return parseInt(v,10);case A.String:return v;case A.Longtext:return v;case A.ImageUrl:return v;case A.ImageBlob:throw new c.Exception('not implemented');case A.GeoJson:return v;case A.Date:return this.ina2SinaDate(v);case A.Time:return this.ina2SinaTime(v);case A.Timestamp:return this.ina2SinaTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},ina2SinaTimestamp:function(v){v=v.trim();var y,m,a,h,b,e,f;if(v.indexOf('-')>=0){y=parseInt(v.slice(0,4),10);m=parseInt(v.slice(5,7),10);a=parseInt(v.slice(8,10),10);h=parseInt(v.slice(11,13),10);b=parseInt(v.slice(14,16),10);e=parseInt(v.slice(17,19),10);f=parseInt(v.slice(20,20+6),10);}else{y=parseInt(v.slice(0,4),10);m=parseInt(v.slice(4,6),10);a=parseInt(v.slice(6,8),10);h=parseInt(v.slice(8,10),10);b=parseInt(v.slice(10,12),10);e=parseInt(v.slice(12,14),10);f=parseInt(v.slice(15,15+6),10);}var d=new Date(Date.UTC(y,m-1,a,h,b,e,f/1000));return d;},sina2InaTimestamp:function(v){var y=v.getUTCFullYear();var m=v.getUTCMonth()+1;var d=v.getUTCDate();var h=v.getUTCHours();var a=v.getUTCMinutes();var b=v.getUTCSeconds();var e=v.getUTCMilliseconds()*1000;var r=this.addLeadingZeros(y.toString(),4)+'-'+this.addLeadingZeros(m.toString(),2)+'-'+this.addLeadingZeros(d.toString(),2)+' '+this.addLeadingZeros(h.toString(),2)+':'+this.addLeadingZeros(a.toString(),2)+':'+this.addLeadingZeros(b.toString(),2)+'.'+this.addLeadingZeros(e.toString(),6);return r;},ina2SinaTime:function(v){v=v.trim();if(v.length===6){return v.slice(0,2)+':'+v.slice(2,4)+':'+v.slice(4,6);}if(v.length===8){return v.slice(0,2)+':'+v.slice(3,5)+':'+v.slice(6,8);}throw new c.Exception('time conversion error '+v);},sina2InaTime:function(v){return v.slice(0,2)+':'+v.slice(3,5)+':'+v.slice(6,8);},ina2SinaDate:function(v){v=v.trim();if(v.length===8){return v.slice(0,4)+'/'+v.slice(4,6)+'/'+v.slice(6,8);}if(v.length===27){return v.slice(0,4)+'/'+v.slice(5,7)+'/'+v.slice(8,10);}throw new c.Exception('date conversion error '+v);},sina2InaDate:function(v,a){var r=v.slice(0,4)+'-'+v.slice(5,7)+'-'+v.slice(8,10);if(a.operator===C.Lt||a.operator===C.Le){r+=' 23:59:59.0000000';}else{r+=' 00:00:00.0000000';}return r;},sina2InaString:function(v,a){return s.convertOperator2Wildcards(v,a.operator);},addLeadingZeros:function(v,l){return'00000000000000'.slice(0,l-v.length)+v;}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/multi/FacetMode.js":function(){sinaDefine([],function(){"use strict";return{'tree':'tree','flat':'flat'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/multi/FederationMethod.js":function(){sinaDefine(['./FederationType'],function(F){"use strict";var m={};var r=F['round-robin'];var a=F['advanced-round-robin'];m[r]={};m[r].mergeMultiResults=function(f,s,b){if(b<1){return[];}if(b===1){return s;}var c=f.length;var d=s.length;for(var i=0;i<c;i++){if(i>=d){break;}f.splice(b*(i+1)-1,0,s[i]);}if(d>c){f=f.concat(s.slice(c-d));}return f;};m[a]={};m[a].mergeMultiResults=function(f,s,b){return s;};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/multi/FederationType.js":function(){sinaDefine([],function(){"use strict";return{'round-robin':'roundRobin','advanced-round-robin':'advancedRoundRobin'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/multi/Provider.js":function(){sinaDefine(['../../core/core','../../sina/sinaFactory','./ProviderHelper','./FederationMethod','./FederationType','./FacetMode'],function(c,s,P,F,a,b){"use strict";return c.defineClass({id:'multi',_initAsync:function(p){this.sina=p.sina;this.facetMode=b[p.facetMode]||b['flat'];this.federationType=a[p.federationType]||a['round-robin'];this.multiSina=[];this.multiDataSourceMap={};this.sina.dataSourceMap[this.sina.allDataSource.id]=this.sina.allDataSource;this.providerHelper=new P(this);this.federationMethod=F;var d=function(e){if(e>=p.subProviders.length){if(this.multiSina.length<1){return c.Promise.reject(new c.Exception('sina creation by trial failed'));}else{return undefined;}}var f=p.subProviders[e];return s.createAsync(f).then(function(g){this.providerHelper.updateProviderId(g);for(var i=0;i<g.dataSources.length;i++){var h=g.dataSources[i];var m=this.providerHelper.calculateMultiDataSourceId(h.id,g.provider.id);this.providerHelper.createMultiDataSource(m,h);this.multiDataSourceMap[m]=h;}this.multiSina.push(g);return d(e+1);}.bind(this),function(){return d(e+1);}.bind(this));}.bind(this);return d(0);},executeSearchQuery:function(q){var t=this;var d;t.searchResultSet=t.sina._createSearchResultSet({title:'Search Multi Result List',query:q,items:[],totalCount:0,facets:[]});if(q.filter.dataSource===t.sina.allDataSource){t.searchResultSet.facets.push(t.sina._createDataSourceResultSet({title:q.filter.dataSource.label,items:[],query:q}));var e=[];for(var i=0;i<t.multiSina.length;i++){d=t.multiSina[i].createSearchQuery({calculateFacets:q.calculateFacets,multiSelectFacets:q.multiSelectFacets,dataSource:t.multiSina[i].allDataSource,searchTerm:q.getSearchTerm(),top:q.top,skip:q.skip,sortOrder:q.sortOrder});e.push(d.getResultSetAsync());}return c.Promise.all(e).then(function(r){for(var j=0;j<r.length;j++){var g=r[j];for(var k=0;k<g.items.length;k++){var h=g.items[k];var l=t.providerHelper.createMultiDataSource(h.dataSource.id,h.dataSource);h.dataSource=l;h.sina=t.sina;}t.searchResultSet.items=t.federationMethod[t.federationType].mergeMultiResults(t.searchResultSet.items,g.items,j+1);t.searchResultSet.totalCount+=g.totalCount;if(t.facetMode===b['tree']){var f=t.sina.getDataSource(t.providerHelper.calculateMultiDataSourceId(g.query.filter.dataSource.id,g.sina.provider.id));t.searchResultSet.facets[0].items.push(t.sina._createDataSourceResultSetItem({dataSource:f,dimensionValueFormatted:t.providerHelper.calculateMultiDataSourceLabel(g.query.filter.dataSource.label,g.sina.provider),measureValue:g.totalCount,measureValueFormatted:g.totalCount}));}else{var m=t.providerHelper.updateDataSourceFacets(g.facets);m[0].items.forEach(function(n){t.searchResultSet.facets[0].items.push(n);});}}t.searchResultSet.items=t.searchResultSet.items.slice(0,q.top);return t.searchResultSet;});}else{var f=t.multiDataSourceMap[q.filter.dataSource.id];d=f.sina.createSearchQuery({calculateFacets:q.calculateFacets,multiSelectFacets:q.multiSelectFacets,dataSource:f,searchTerm:q.getSearchTerm(),rootCondition:q.getRootCondition(),top:q.top,skip:q.skip,sortOrder:q.sortOrder});return d.getResultSetAsync().then(function(g){t.searchResultSet.items=g.items;t.searchResultSet.totalCount=g.totalCount;for(var i=0;i<t.searchResultSet.items.length;i++){var r=t.searchResultSet.items[i];var h=t.providerHelper.calculateMultiDataSourceId(r.dataSource.id,r.sina.provider.id);t.providerHelper.updateAttributesMetadata(r.dataSource,t.sina.dataSourceMap[h]);r.dataSource=t.sina.dataSourceMap[h];r.sina=t.sina;}var m;if(g.facets.length===1&&g.facets[0].items[0].dataSource){m=g.facets;m[0].title=t.providerHelper.calculateMultiDataSourceLabel(g.facets[0].title,g.facets[0].sina.provider);t.providerHelper.updateDataSourceFacets(m);}else{m=[];for(var k=0;k<g.facets.length;k++){var j=g.facets[k];m.push(t.providerHelper.createMultiChartResultSet(j));}}t.searchResultSet.facets=m;return t.searchResultSet;});}},executeChartQuery:function(q){var t=this;var d=t.multiDataSourceMap[q.filter.dataSource.id];var e=d.sina.createChartQuery({dimension:q.dimension,dataSource:d,searchTerm:q.getSearchTerm(),rootCondition:q.getRootCondition(),top:q.top,skip:q.skip,sortOrder:q.sortOrder});return e.getResultSetAsync().then(function(f){return t.providerHelper.createMultiChartResultSet(f);});},executeSuggestionQuery:function(q){var t=this;var d;if(q.filter.dataSource===t.sina.allDataSource){var e=[];for(var i=0;i<t.multiSina.length;i++){d=t.multiSina[i].createSuggestionQuery({types:q.types,calculationModes:q.calculationModes,dataSource:t.multiSina[i].allDataSource,searchTerm:q.getSearchTerm(),top:q.top,skip:q.skip,sortOrder:q.sortOrder});e.push(d.getResultSetAsync());}return c.Promise.all(e).then(function(r){var m=t.sina._createSuggestionResultSet({title:'Multi Suggestions',query:q,items:[]});for(var j=0;j<r.length;j++){var g=t.providerHelper.updateSuggestionDataSource(r[j]);m.items=t.federationMethod[t.federationType].mergeMultiResults(m.items,g.items,j+1);}return m;});}else{var f=t.multiDataSourceMap[q.filter.dataSource.id];d=f.sina.createSuggestionQuery({types:q.types,calculationModes:q.calculationModes,dataSource:f,searchTerm:q.getSearchTerm(),top:q.top,skip:q.skip,sortOrder:q.sortOrder});return d.getResultSetAsync().then(function(r){return t.providerHelper.updateSuggestionDataSource(r);});}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/multi/ProviderHelper.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},calculateMultiDataSourceLabel:function(l,p){var i=p.label||p.id;return l+' - '+i;},calculateMultiDataSourceId:function(i,a){return a+'_'+i;},updateProviderId:function(a){var i=0;for(;;){if(i!==0){a.provider.id=a.provider.id+"_"+i;}var d=this.findSinaById(a.provider.id);if(d){i++;continue;}else{break;}}},createMultiDataSource:function(i,d){return this.sina._createDataSource({id:i,label:this.calculateMultiDataSourceLabel(d.label,d.sina.provider),labelPlural:this.calculateMultiDataSourceLabel(d.label,d.sina.provider),type:d.type,hidden:d.hidden,attributesMetadata:d.attributesMetadata});},findSinaById:function(p){for(var i=0;i<this.provider.multiSina.length;i++){var a=this.provider.multiSina[i];if(p===a.provider.id){return a;}}return undefined;},updateAttributesMetadata:function(d,a){a.attributesMetadata=d.attributesMetadata;a.attributeMetadataMap=d.attributeMetadataMap;},updateSuggestionDataSource:function(r){for(var i=0;i<r.items.length;i++){var a=r.items[i];if(a.childSuggestions){for(var j=0;j<a.childSuggestions.length;j++){var b=a.childSuggestions[j];var d=this.calculateMultiDataSourceId(b.dataSource.id,b.sina.provider.id);b.dataSource=this.sina.dataSourceMap[d];b.filter.dataSource=this.sina.dataSourceMap[d];}}if(a.dataSource){var m=this.calculateMultiDataSourceId(a.dataSource.id,a.sina.provider.id);var e=this.createMultiDataSource(m,a.dataSource);a.dataSource=e;a.sina=this.sina;}}return r;},createMultiChartResultSet:function(a){var t=this;var m=t.sina._createChartResultSet({id:a.id,items:[],query:a.query,title:a.title});for(var i=0;i<a.items.length;i++){var b=a.items[i];var d=t.sina.parseConditionFromJson(b.filterCondition.toJson());m.items.push(t.sina._createChartResultSetItem({filterCondition:d,dimensionValueFormatted:b.dimensionValueFormatted,measureValue:b.measureValue,measureValueFormatted:b.measureValueFormatted}));}return m;},updateDataSourceFacets:function(r){for(var j=0;j<r[0].items.length;j++){var f=r[0].items[j];if(f.dataSource){var a=this.calculateMultiDataSourceId(f.dataSource.id,f.sina.provider.id);if(!this.provider.multiDataSourceMap[a]){this.createMultiDataSource(a,f.dataSource);this.provider.multiDataSourceMap[a]=f.dataSource;}f.dataSource=this.sina.dataSourceMap[a];}}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/cds/CDSAnnotationsParser.js":function(){sinaDefine(['../../../sina/SinaObject'],function(S){"use strict";return S.derive({_init:function(){},parseCDSAnnotationsForDataSource:function(d,c){var p={dataSourceIsCdsBased:false,detailAttributesAreSorted:false,titleAttributesAreSorted:false};var i,a,b,e,u,f,g,h;var j={};var k={};var l={};var m=[];var n=[];var o=[];var q;var r;var s={};var t=[];for(i=0;i<d.attributesMetadata.length;i++){e=d.attributesMetadata[i];l[e.id]=e;var v=c.attributeAnnotations[e.id]||{};if(Object.keys(v).length>0){p.dataSourceIsCdsBased=true;if((b=v["UI.IDENTIFICATION.URL"])!==undefined){if(v["SEMANTICS.IMAGEURL"]!==undefined){var w=c.attributeAnnotations[b];var x=w["SEMANTICS.URL.MIMETYPE"];if(w&&x){g=d.attributeMetadataMap[b];var y=d.attributeMetadataMap[x];e.suvUrlAttribute=g;e.suvMimeTypeAttribute=y;e.format=this.sina.AttributeFormatType.DocumentThumbnail;}}}if((b=v["UI.CONNECTEDFIELDS.QUALIFIER"])!==undefined){r=s[b];if(!r){r=this.sina._createAttributeGroupMetadata({id:b,label:v["UI.CONNECTEDFIELDS.GROUPLABEL"],template:v["UI.CONNECTEDFIELDS.TEMPLATE"],attributes:{},usage:{}});s[b]=r;t.push(r);}else{if(v["UI.CONNECTEDFIELDS.GROUPLABEL"]&&!r.label){r.label=v["UI.CONNECTEDFIELDS.GROUPLABEL"];}if(v["UI.CONNECTEDFIELDS.TEMPLATE"]&&!r.template){r.template=v["UI.CONNECTEDFIELDS.TEMPLATE"];}}r.attributes[v["UI.CONNECTEDFIELDS.NAME"]]=e;e.group=r;e.nameInGroup=v["UI.CONNECTEDFIELDS.NAME"];}if((b=v["UI.IDENTIFICATION.POSITION"])!==undefined||(b=v["UI.IDENTIFICATION.IMPORTANCE"]&&Number.MAX_VALUE)){switch(v["UI.IDENTIFICATION.IMPORTANCE"]){case"HIGH":case"MEDIUM":case undefined:h=this._parsePosition(b);var _=e;if(e.group){if(e.group.usage&&e.group.usage._Detail){break;}_=e.group;}_.usage=e.usage||{};_.usage._Detail=e.usage._Detail||{};_.usage._Detail.displayOrder=h;if(v["UI.IDENTIFICATION.IMPORTANCE"]=="HIGH"){m.push(_);}else if(v["UI.IDENTIFICATION.IMPORTANCE"]=="MEDIUM"){n.push(_);}else{o.push(_);}break;}}if(v["SEMANTICS.CONTACT.PHOTO"]!==undefined){e.format=this.sina.AttributeFormatType.Round;e.type=this.sina.AttributeType.ImageUrl;}if(v["SEMANTICS.IMAGEURL"]!==undefined){e.type=this.sina.AttributeType.ImageUrl;}if(v["SEMANTICS.NAME.GIVENNAME"]!==undefined){e.isFirstName=true;}if(v["SEMANTICS.NAME.FAMILYNAME"]!==undefined){e.isLastName=true;}if(v["SEMANTICS.EMAIL.ADDRESS"]!==undefined){e.isEmailAddress=true;}if(v["SEMANTICS.TELEPHONE.TYPE"]!==undefined){e.isPhoneNr=true;}if(v["SEMANTICS.URL"]!==undefined){e.isHTTPURL=true;}if(v["SEMANTICS.CURRENCYCODE"]!==undefined){e.isCurrency=true;}if(v["SEMANTICS.UNITOFMEASURE"]!==undefined){e.isUnitOfMeasure=true;}if((b=v["SEMANTICS.QUANTITY.UNITOFMEASURE"])!==undefined){e.isQuantity=true;u=l[b];if(u){if(u.isUnitOfMeasure){e.unitOfMeasureAttribute=u;}}else{j[b]=j[b]||[];j[b].push({attribute:e,annotationName:"SEMANTICS.QUANTITY.UNITOFMEASURE"});}}if((b=v["SEMANTICS.AMOUNT.CURRENCYCODE"])!==undefined){u=l[b];if(u){if(u.isCurrency){e.unitOfMeasureAttribute=u;}}else{j[b]=j[b]||[];j[b].push({attribute:e,annotationName:"SEMANTICS.AMOUNT.CURRENCYCODE"});}}if((b=v["OBJECTMODEL.TEXT.ELEMENT"])!==undefined){f=l[b];if(f){f.isDescription=true;e.descriptionAttribute=f;}else{k[b]=k[b]||[];k[b].push(e);}var z=v["UI.TEXTARRANGEMENT"];if(z){switch(z.toUpperCase()){case"TEXT_FIRST":e.descriptionTextArrangement=this.sina.AttributeDescriptionTextArrangement.TextFirst;break;case"TEXT_LAST":e.descriptionTextArrangement=this.sina.AttributeDescriptionTextArrangement.TextLast;break;case"TEXT_ONLY":e.descriptionTextArrangement=this.sina.AttributeDescriptionTextArrangement.TextOnly;break;case"TEXT_SEPARATE":e.descriptionTextArrangement=this.sina.AttributeDescriptionTextArrangement.TextSeparate;break;}}else{e.descriptionTextArrangement=q;}}if(v["UI.MULTILINETEXT"]!==undefined){e.format=this.sina.AttributeFormatType.MultilineText;}}}d.attributesMetadata=d.attributesMetadata.concat(t);var A=this._createSortFunction("_Detail");if(m.length>0||n.length>0){if(m.length>0){p.dataSourceIsCdsBased=true;}m.sort(A);n.sort(A);var B=m.concat(n);for(i=0;i<B.length;++i){B[i].usage.Detail=B[i].usage._Detail;B[i].usage.Detail.displayOrder=i;}p.detailAttributesAreSorted=true;}else if(o.length>0){p.dataSourceIsCdsBased=true;o.sort(A);for(i=0;i<o.length;++i){o[i].usage.Detail=o[i].usage._Detail;o[i].usage.Detail.displayOrder=i;}p.detailAttributesAreSorted=true;}for(var C in j){u=d.attributeMetadataMap[C];if(u){var D=j[C];for(i=0;i<D.length;i++){e=D[i].attribute;a=D[i].annotationName;if((a.toUpperCase()=="SEMANTICS.QUANTITY.UNITOFMEASURE"&&u.isUnitOfMeasure)||(a.toUpperCase()=="SEMANTICS.AMOUNT.CURRENCYCODE"&&u.isCurrency)){e.unitOfMeasureAttribute=u;}}}}for(var E in k){f=d.attributeMetadataMap[E];if(f){f.isDescription=true;var F=k[E];for(i=0;i<F.length;i++){e=F[i];e.descriptionAttribute=f;}}}if(Object.keys(c.dataSourceAnnotations).length>0){if((b=c.dataSourceAnnotations["UI.HEADERINFO.TITLE.VALUE"])!==undefined){var G=d.attributeMetadataMap[b];if(G){if(c.dataSourceAnnotations["UI.HEADERINFO.TITLE.TYPE"]&&c.dataSourceAnnotations["UI.HEADERINFO.TITLE.TYPE"].toUpperCase()=="AS_CONNECTED_FIELDS"){var H=c.dataSourceAnnotations["UI.HEADERINFO.TITLE.VALUEQUALIFIER"];if(H&&H.trim().length>0){r=s[H];if(r&&r==G.group){G=r;}}}G.usage.Title={displayOrder:1};}}if((b=c.dataSourceAnnotations["UI.HEADERINFO.TITLE.URL"])!==undefined){g=d.attributeMetadataMap[b];if(g){g.usage.Navigation={mainNavigation:true};}}if((b=c.dataSourceAnnotations["UI.HEADERINFO.DESCRIPTION.VALUE"])!==undefined){var I=d.attributeMetadataMap[b];if(I){I.usage.TitleDescription={};}}if((b=c.dataSourceAnnotations["UI.TEXTARRANGEMENT"])!==undefined){switch(b.toUpperCase()){case"TEXT_FIRST":q=this.sina.AttributeDescriptionTextArrangement.TextFirst;break;case"TEXT_LAST":q=this.sina.AttributeDescriptionTextArrangement.TextLast;break;case"TEXT_ONLY":q=this.sina.AttributeDescriptionTextArrangement.TextOnly;break;case"TEXT_SEPARATE":q=this.sina.AttributeDescriptionTextArrangement.TextSeparate;break;}}}return p;},_createSortFunction:function(u){return function(a,b){if(a.usage[u].displayOrder<b.usage[u].displayOrder){return-1;}else if(a.usage[u].displayOrder>b.usage[u].displayOrder){return 1;}else{return 0;}};},_parsePosition:function(p){if(typeof p==='string'){try{p=parseInt(p,10);}catch(e){p=Number.MAX_VALUE;}}else if(typeof p!=='number'){p=Number.MAX_VALUE;}return p;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/fiori/FioriIntentsResolver.js":function(){sinaDefine(['../../../sina/SinaObject','./NavigationTargetForIntent'],function(S,N){"use strict";return S.derive({_init:function(){if(typeof sap!=="undefined"&&sap.ushell&&sap.ushell.Container){this._launchpadNavigation=sap.ushell.Container.getService("SmartNavigation")||sap.ushell.Container.getService("CrossApplicationNavigation");this._fioriFrontendSystemInfo={systemId:sap.ushell.Container.getLogonSystem().getName(),client:sap.ushell.Container.getLogonSystem().getClient()};this._primaryIntentAction="-displayFactSheet";this._suppressInSearchTag="suppressInEnterpriseSearch".toLowerCase();}},resolveIntents:function(a){var t=this;if(!t._launchpadNavigation||!a){return Promise.resolve({defaultNavigationTarget:a.fallbackDefaultNavigationTarget});}if(Array.isArray(a)){var p=[];for(var k=0;k<a.length;k++){var b=t._doResolveIntents(a[k]);p.push(b);}return Promise.all(p);}else{return t._doResolveIntents(a);}},_doResolveIntents:function(a){var t=this;var s=a.semanticObjectType;var b=a.semanticObjectTypeAttributes;var c=a.systemId;var d=a.client;var f=a.fallbackDefaultNavigationTarget;if(!s||s.length==0){return Promise.resolve({defaultNavigationTarget:f});}if(!b||b.length==0){return Promise.resolve();}var e={};var v;for(var i=0;i<b.length;i++){v=this.convertAttributeValueToUI5DataTypeFormats(b[i].value,b[i].type);e[b[i].name]=v;}var g={};g.systemId=c||(t._fioriFrontendSystemInfo&&t._fioriFrontendSystemInfo.systemId);g.client=d||(t._fioriFrontendSystemInfo.client&&t._fioriFrontendSystemInfo.client);if(c&&c.trim().length>0&&d&&d.trim().length>0&&(!t._fioriFrontendSystemInfo||!(t._fioriFrontendSystemInfo.systemId==c&&t._fioriFrontendSystemInfo.client==d))){g.urlParameter="sap-system=sid("+c+"."+d+")";}var p=new Promise(function(r,j){if(t._launchpadNavigation.getPrimaryIntent){t._launchpadNavigation.getPrimaryIntent(s,e).done(function(k){r(k);}).fail(function(){r();});}else{r();}});var h=new Promise(function(r,j){var k;if(t._launchpadNavigation.getLinks){k=t._launchpadNavigation.getLinks({semanticObject:s,params:e,withAtLeastOneUsedParam:true,sortResultOnTexts:true});}else{k=t._launchpadNavigation.getSemanticObjectLinks(s,e);}k.done(function(l){r(l);}).fail(function(){r();});});return Promise.all([p,h]).then(function(j){var i;var k=j[0];var l,m=j[1];var n;var r={};var o;if(k&&!t._shallIntentBeSuppressed(k)){o=t._getNavigationTargetForIntent(k,g);r.defaultNavigationTarget=o;}var q=r.defaultNavigationTarget!==undefined;r.navigationTargets=[];if(m){for(i=0;i<m.length;i++){l=m[i];if(t._shallIntentBeSuppressed(l)){continue;}n=t._getNavigationTargetForIntent(l,g);if(!q&&l.intent.substring(l.intent.indexOf("-"),l.intent.indexOf("?"))===t._primaryIntentAction){r.defaultNavigationTarget=n;q=true;}else if(!o||!n.isEqualTo(o)){r.navigationTargets.push(n);}}}return r;});},_shallIntentBeSuppressed:function(a){if(a.tags){for(var i=0;i<a.tags.length;i++){if(a.tags[i].toLowerCase()===this._suppressInSearchTag){return true;}}}return false;},_getNavigationTargetForIntent:function(i,s){var t=this;var a=i.intent;if(s.urlParameter){if(a.indexOf('?')===-1){a+="?";}else{a+="&";}a+=s.urlParameter;}var e={target:{shellHash:a}};var b=t._launchpadNavigation.hrefForExternal(e);var n=t.sina._createNavigationTargetForIntent({label:i.text,targetUrl:b,externalTarget:e,systemId:s.systemId,client:s.client});return n;},convertAttributeValueToUI5DataTypeFormats:function(v,s){var y,m,d,h,a,b,c;switch(s){case this.sina.AttributeType.Timestamp:y=v.getUTCFullYear();m=v.getUTCMonth()+1;d=v.getUTCDate();h=v.getUTCHours();a=v.getUTCMinutes();b=v.getUTCSeconds();c=v.getUTCMilliseconds()*1000;v=this.addLeadingZeros(y.toString(),4)+'-'+this.addLeadingZeros(m.toString(),2)+'-'+this.addLeadingZeros(d.toString(),2)+'T'+this.addLeadingZeros(h.toString(),2)+':'+this.addLeadingZeros(a.toString(),2)+':'+this.addLeadingZeros(b.toString(),2)+'.'+this.addLeadingZeros(c.toString(),3);break;case this.sina.AttributeType.Date:v=v.slice(0,4)+'-'+v.slice(5,7)+'-'+v.slice(8,10);break;}return v;},addLeadingZeros:function(v,l){return'00000000000000'.slice(0,l-v.length)+v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/fiori/NavigationTargetForIntent.js":function(){sinaDefine(['../../../sina/NavigationTarget'],function(N){"use strict";var _;if(typeof sap!=="undefined"&&sap.ushell&&sap.ushell.Container){_=(sap.ushell.Container.getService("SmartNavigation")||sap.ushell.Container.getService("CrossApplicationNavigation"));}return N.derive({_meta:{properties:{externalTarget:{required:true},systemId:{required:false},client:{required:false}}},performNavigation:function(p){p=p||{};var s=p.suppressTracking||false;var t=p.trackingOnly||false;if(_){if(!s){this._trackNavigation();}if(!t){_.toExternal(this.externalTarget);}}else{N.prototype.performNavigation.apply(this,arguments);}},_trackNavigation:function(){if(_&&_.trackNavigation){_.trackNavigation({target:this.externalTarget.target});}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/fiori/SuvNavTargetResolver.js":function(){sinaDefine(['../../../sina/SinaObject'],function(S){"use strict";return S.derive({_init:function(){this.suvMimeType="application/vnd.sap.universal-viewer+suv";this.suvViewerBasePath="/sap/bc/ui5_ui5/ui2/ushell/resources/sap/fileviewer/viewer/web/viewer.html?file=";},addHighlightTermsToUrl:function(u,h){if(!h){return u;}u+='&searchTerms='+encodeURIComponent(JSON.stringify({'terms':h}));return u;},resolveSuvNavTargets:function(d,s,a){for(var b in s){var c=s[b];var t=c.suvThumbnailAttribute;if(c.suvTargetMimeTypeAttribute.value==this.suvMimeType){var o=this.suvViewerBasePath+encodeURIComponent(c.suvTargetUrlAttribute.value);o=this.addHighlightTermsToUrl(o,a);t.defaultNavigationTarget=this.sina._createNavigationTarget({label:c.suvTargetUrlAttribute.value,targetUrl:o});}else{t.defaultNavigationTarget=this.sina._createNavigationTarget({label:c.suvTargetUrlAttribute.value,targetUrl:c.suvTargetUrlAttribute.value});}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeDescriptionTextArrangement.js":function(){sinaDefine([],function(){"use strict";return{TextFirst:'TextFirst',TextLast:'TextLast',TextOnly:'TextOnly',TextSeparate:'TextSeparate'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeFormatType.js":function(){sinaDefine([],function(){"use strict";return{Round:'Round',DocumentThumbnail:'DocumentThumbnail',MultilineText:'MultilineText'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeGroupMetadata.js":function(){sinaDefine(['../core/core','./SinaObject','./AttributeType','./AttributeMetadataBase'],function(c,S,A,a){"use strict";return a.derive({_meta:{properties:{type:{required:false,default:A.Group},label:{required:false},isSortable:{required:false,default:false},template:{required:false},attributes:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeMetadata.js":function(){sinaDefine(['../core/core','./SinaObject','./AttributeMetadataBase'],function(c,S,A){"use strict";return A.derive({_meta:{properties:{type:{required:true},label:{required:true},isSortable:{required:true},format:{required:false},isKey:{required:true},isDescription:{required:false},descriptionAttribute:{required:false},descriptionTextArrangement:{required:false},isQuantity:{required:false},isUnitOfMeasure:{required:false},unitOfMeasureAttribute:{required:false},isPhoneNr:{required:false},isEmailAddress:{required:false},isHTTPURL:{required:false},isCurrency:{required:false},isFirstName:{required:false},isLastName:{required:false},matchingStrategy:{required:true},group:{required:false},nameInGroup:{required:false}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeMetadataBase.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{id:{required:true},usage:{required:true},displayOrder:{required:false}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeType.js":function(){sinaDefine([],function(){"use strict";return{Double:'Double',Integer:'Integer',String:'String',Longtext:'Longtext',Multilinetext:'Multilinetext',ImageUrl:'ImageUrl',ImageBlob:'ImageBlob',GeoJson:'GeoJson',Date:'Date',Time:'Time',Timestamp:'Timestamp',Group:'Group'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeUsageType.js":function(){sinaDefine([],function(){"use strict";return{AdvancedSearch:'AdvancedSearch',Title:'Title',Detail:'Detail',Navigation:'Navigation'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Capabilities.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{fuzzy:{required:false,default:false}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ChartQuery.js":function(){sinaDefine(['../core/core','./FacetQuery'],function(c,F){"use strict";return F.derive({_meta:{properties:{top:{default:5},dimension:{required:true}}},_initClone:function(o){this.dimension=o.dimension;},_equals:function(o){return this.dimension===o.dimension;},_execute:function(q){return this.sina.provider.executeChartQuery(q);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ChartResultSet.js":function(){sinaDefine(['../core/core','./FacetResultSet','./FacetType'],function(c,F,a){"use strict";return F.derive({type:a.Chart});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ChartResultSetItem.js":function(){sinaDefine(['../core/core','./FacetResultSetItem'],function(c,F){"use strict";return F.derive({_meta:{properties:{filterCondition:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ComparisonOperator.js":function(){sinaDefine([],function(){"use strict";return{'Eq':'Eq','Gt':'Gt','Lt':'Lt','Ge':'Ge','Le':'Le','Co':'Co','Bw':'Bw','Ew':'Ew'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ComplexCondition.js":function(){sinaDefine(['../core/core','./Condition','./ConditionType'],function(c,C,a){"use strict";return C.derive({_meta:{properties:{operator:{required:false,default:function(){return this.sina.LogicalOperator.And;}},conditions:{required:false,default:function(){return[];}}}},type:a.Complex,_initClone:function(o){this.operator=o.operator;this.conditions=[];for(var i=0;i<o.conditions.length;++i){this.conditions.push(o.conditions[i].clone());}},_equals:function(o){if(this.operator!==o.operator){return false;}if(this.conditions.length!==o.conditions.length){return false;}var m={};for(var i=0;i<this.conditions.length;++i){var b=this.conditions[i];var d=false;for(var j=0;j<o.conditions.length;++j){if(m[j]){continue;}var e=o.conditions[j];if(b.equals(e)){d=true;m[j]=true;break;}}if(!d){return false;}}return true;},addCondition:function(b){if(!(b instanceof C)){b=this.sina.createSimpleCondition(b);}this.conditions.push(b);},removeConditionAt:function(i){this.conditions.splice(i,1);},hasFilters:function(){return this.conditions.length>=1;},removeAttributeConditions:function(b){var r={deleted:false,attribute:'',value:''};for(var i=0;i<this.conditions.length;++i){var s=this.conditions[i];switch(s.type){case a.Complex:r=s.removeAttributeConditions(b);break;case a.Simple:if(s.attribute===b){r={deleted:true,attribute:s.attribute,value:s.value};this.removeConditionAt(i);i--;}break;}}this.cleanup();return r;},cleanup:function(){var r=false;var d=function(b){for(var i=0;i<b.conditions.length;++i){var s=b.conditions[i];switch(s.type){case a.Complex:d(s);if(s.conditions.length===0){r=true;b.removeConditionAt(i);i--;}break;case a.Simple:break;}}};do{r=false;d(this);}while(r);},resetConditions:function(){this.conditions.splice(0,this.conditions.length);},toJson:function(){var r={type:'Complex',operator:this.operator,conditions:[],valueLabel:this.valueLabel,attributeLabel:this.attributeLabel};for(var i=0;i<this.conditions.length;++i){var b=this.conditions[i];r.conditions.push(b.toJson());}if(this.userDefined){r.userDefined=true;}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Condition.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{attributeLabel:{required:false},valueLabel:{required:false},userDefined:{required:false}}},_initClone:function(o){this.attributeLabel=o.attributeLabel;this.valueLabel=o.valueLabel;this.userDefined=o.userDefined;},_equals:function(o){return true;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ConditionType.js":function(){sinaDefine([],function(){"use strict";return{Simple:'Simple',Complex:'Complex'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Configuration.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{personalizedSearch:{required:true,setter:true},isPersonalizedSearchEditable:{required:true}}},resetPersonalizedSearchDataAsync:function(){return this.sina.provider.resetPersonalizedSearchDataAsync(this);},saveAsync:function(){return this.sina.provider.saveConfigurationAsync(this);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSource.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{type:{required:true},id:{required:true},label:{required:true},labelPlural:{required:false},hidden:{required:false,default:false},attributesMetadata:{required:false,default:function(){return[];}},attributeMetadataMap:{required:false,default:function(){return{};}}}},equals:function(){throw new c.Exception('use === operator for comparison of datasources');},_afterInitProperties:function(){if(!this.labelPlural||this.labelPlural.length===0){this.labelPlural=this.label;}if(this.type===this.sina.DataSourceType.BusinessObject&&this.attributesMetadata.length===0){throw'attributes of datasource are missing';}this.attributeMetadataMap=this.createAttributeMetadataMap(this.attributesMetadata);},_configure:function(){var f=this.sina.metadataFormatters;if(!f){return;}for(var i=0;i<f.length;++i){var a=f[i];a.format({dataSources:[this]});}},createAttributeMetadataMap:function(a){var m={};for(var i=0;i<a.length;++i){var b=a[i];m[b.id]=b;}return m;},getAttributeMetadata:function(i){return this.attributeMetadataMap[i];},toJson:function(){return{type:this.type,id:this.id,label:this.label,labelPlural:this.labelPlural};}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSourceQuery.js":function(){sinaDefine(['../core/core','./FacetQuery'],function(c,F){"use strict";return F.derive({_meta:{properties:{dataSource:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSourceResultSet.js":function(){sinaDefine(['../core/core','./FacetResultSet','./FacetType'],function(c,F,a){"use strict";return F.derive({type:a.DataSource});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSourceResultSetItem.js":function(){sinaDefine(['../core/core','./FacetResultSetItem'],function(c,F){"use strict";return F.derive({_meta:{properties:{dataSource:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSourceSuggestion.js":function(){sinaDefine(['../core/core','./Suggestion','./SuggestionType'],function(c,S,a){"use strict";return S.derive({type:a.DataSource,_meta:{properties:{dataSource:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSourceType.js":function(){sinaDefine([],function(){"use strict";return{BusinessObject:'BusinessObject',Category:'Category'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/EqualsMode.js":function(){sinaDefine([],function(){"use strict";return{CheckFireQuery:'CheckFireQuery'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/FacetQuery.js":function(){sinaDefine(['../core/core','./Query'],function(c,Q){"use strict";return Q.derive({});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/FacetResultSet.js":function(){sinaDefine(['../core/core','./ResultSet'],function(c,R){"use strict";return R.derive({toString:function(){var r=[];r.push('--Facet');r.push(R.prototype.toString.apply(this,arguments));return r.join('\n');}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/FacetResultSetItem.js":function(){sinaDefine(['../core/core','./ResultSetItem'],function(c,R){"use strict";return R.derive({_meta:{properties:{dimensionValueFormatted:{required:true},measureValue:{required:true},measureValueFormatted:{required:true}}},toString:function(){return this.dimensionValueFormatted+':'+this.measureValueFormatted;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/FacetType.js":function(){sinaDefine([],function(){"use strict";return{Chart:'Chart',DataSource:'DataSource'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Filter.js":function(){sinaDefine(['../core/core','./SinaObject','./SimpleCondition','./ComplexCondition'],function(c,S,a,C){"use strict";return S.derive({_meta:{properties:{dataSource:{required:false,default:function(){return this.sina.getAllDataSource();}},searchTerm:{required:false,default:'',setter:true},rootCondition:{required:false,default:function(){return this.sina.createComplexCondition();},setter:true}}},_initClone:function(o){this.dataSource=o.dataSource;this.searchTerm=o.searchTerm;this.rootCondition=o.rootCondition.clone();},_equals:function(o){return this.dataSource===o.dataSource&&this.searchTerm===o.searchTerm&&this.rootCondition.equals(o.rootCondition);},_getAttribute:function(b){if(b instanceof a){return b.attribute;}for(var i=0;i<b.conditions.length;++i){var d=this._getAttribute(b.conditions[i]);if(d){return d;}}},setDataSource:function(d){if(this.dataSource===d){return;}this.dataSource=d;this.resetConditions();},resetConditions:function(){this.rootCondition.resetConditions();},autoInsertCondition:function(b){if(!(this.rootCondition instanceof C)){throw new c.Exception('cannot auto insert condition - condition is not a complex condition');}var d=this._getAttribute(b);var m,e;for(var i=0;i<this.rootCondition.conditions.length;++i){e=this.rootCondition.conditions[i];var f=this._getAttribute(e);if(f===d){m=e;break;}}if(!m){m=this.sina.createComplexCondition({operator:this.sina.LogicalOperator.Or});this.rootCondition.addCondition(m);}for(var j=0;j<m.conditions.length;++j){e=m.conditions[j];if(e.equals(b)){return;}}m.addCondition(b);},autoRemoveCondition:function(b){var r=function(d,b){for(var i=0;i<d.conditions.length;++i){var s=d.conditions[i];if(s.equals(b)){d.removeConditionAt(i);i--;continue;}if(s instanceof C){r(s,b);if(s.conditions.length===0){d.removeConditionAt(i);i--;continue;}}}};r(this.rootCondition,b);},toJson:function(){return{dataSource:this.dataSource.toJson(),searchTerm:this.searchTerm,rootCondition:this.rootCondition.toJson()};}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/LogicalOperator.js":function(){sinaDefine([],function(){"use strict";return{And:'And',Or:'Or'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/MatchingStrategy.js":function(){sinaDefine([],function(){"use strict";return{Exact:'Exact',Text:'Text'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ObjectSuggestion.js":function(){sinaDefine(['../core/core','./Suggestion','./SuggestionType'],function(c,S,a){"use strict";return S.derive({type:a.Object,_meta:{properties:{object:{required:true,aggregation:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Query.js":function(){sinaDefine(['../core/core','../core/util','./SinaObject'],function(c,u,S){"use strict";return S.derive({_meta:{properties:{filter:{required:false,default:function(){return this.sina.createFilter();}},top:{required:false,default:10,setter:true},skip:{required:false,default:0,setter:true},sortOrder:{required:false,default:function(){return[];},setter:true}}},_afterInitProperties:function(p){if(p.dataSource){this.filter.setDataSource(p.dataSource);}if(p.searchTerm){this.filter.setSearchTerm(p.searchTerm);}if(p.rootCondition){this.filter.setRootCondition(p.rootCondition);}this._execute=u.refuseOutdatedResponsesDecorator(this._execute);},_initClone:function(o){this.top=o.top;this.skip=o.skip;this.filter=o.filter.clone();this.sortOrder=c.clone(o.sortOrder);},_equals:function(o){return this.top===o.top&&this.skip===o.skip&&this.filter.equals(o.filter)&&c.equals(this.sortOrder,o.sortOrder);},abort:function(){this._execute.abort();},getResultSetAsync:function(){if(this.equals(this._lastQuery,this.sina.EqualsMode.CheckFireQuery)){return this._resultSetPromise;}if(this._lastQuery&&!this.filter.equals(this._lastQuery.filter)){this.setSkip(0);}this._lastQuery=this._createReadOnlyClone();var r;this._resultSetPromise=this._execute(this._lastQuery).then(function(R){r=R;}.bind(this)).then(function(){return this._formatResultSetAsync(r);}.bind(this)).then(function(){return r;});return this._resultSetPromise;},_formatResultSetAsync:function(r){},_setResultSet:function(r){this._lastQuery=this._createReadOnlyClone();this._resultSetPromise=c.Promise.resolve().then(function(){return this._formatResultSetAsync(r);}.bind(this)).then(function(){return r;}.bind(this));return this._resultSetPromise;},_createReadOnlyClone:function(){var q=this.clone();q.getResultSetAsync=function(){throw new c.Exception('this query is readonly');};return q;},resetResultSet:function(){this._lastQuery=null;this._resultSetPromise=null;},getSearchTerm:function(){return this.filter.searchTerm;},getDataSource:function(){return this.filter.dataSource;},getRootCondition:function(){return this.filter.rootCondition;},setSearchTerm:function(s){this.filter.setSearchTerm(s);},setDataSource:function(d){this.filter.setDataSource(d);},setRootCondition:function(r){this.filter.setRootCondition(r);},resetConditions:function(){this.filter.resetConditions();},autoInsertCondition:function(a){this.filter.autoInsertCondition(a);},autoRemoveCondition:function(a){this.filter.autoRemoveCondition(a);},setFilter:function(f){if(!this.filter.equals(f)){this.setSkip(0);}this.filter=f;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ResultSet.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{id:{required:false,default:function(){return c.generateId();}},title:{required:true},items:{required:false,default:function(){return[];},aggregation:true},query:{required:true}}},toString:function(){var r=[];for(var i=0;i<this.items.length;++i){var a=this.items[i];r.push(a.toString());}return r.join('\n');}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ResultSetItem.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchQuery.js":function(){sinaDefine(['../core/core','./Query'],function(c,Q){"use strict";return Q.derive({_meta:{properties:{calculateFacets:{required:false,default:false,setter:true},multiSelectFacets:{required:false,default:false,setter:true},nlq:{required:false,default:false,setter:true},facetTop:{required:false,default:5,setter:true}}},_initClone:function(o){this.calculateFacets=o.calculateFacets;this.multiSelectFacets=o.multiSelectFacets;this.nlq=o.nlq;this.facetTop=o.facetTop;},_equals:function(o,m){if(this.nlq!==o.nlq){return false;}if(this.multiSelectFacets!==o.multiSelectFacets){return false;}if(this.facetTop!==o.facetTop){return false;}switch(m){case this.sina.EqualsMode.CheckFireQuery:if(o.calculateFacets&&!this.calculateFacets){return true;}return this.calculateFacets===o.calculateFacets;default:return this.calculateFacets===o.calculateFacets;}},_execute:function(q){var f;var a=[];if(this.multiSelectFacets){f=this._collectAttributesWithFilter(q);a=this._createChartQueries(q,f);}var r=[];r.push(this.sina.provider.executeSearchQuery(q));for(var i=0;i<a.length;++i){var b=a[i];r.push(b.getResultSetAsync());}return Promise.all(r).then(function(d){var s=d[0];var e=d.slice(1);this._addChartResultSetsToSearchResultSet(s,e);return s;}.bind(this));},_formatResultSetAsync:function(r){return c.executeSequentialAsync(this.sina.searchResultSetFormatters,function(f){return f.formatAsync(r);});},_collectAttributesWithFilter:function(q){var a={};this._doCollectAttributes(a,q.filter.rootCondition);return Object.keys(a);},_doCollectAttributes:function(a,b){switch(b.type){case this.sina.ConditionType.Simple:a[b.attribute]=true;break;case this.sina.ConditionType.Complex:for(var i=0;i<b.conditions.length;++i){var s=b.conditions[i];this._doCollectAttributes(a,s);}break;}},_createChartQuery:function(q,f){var a=this.sina.createChartQuery({dimension:f,top:this.facetTop});a.setFilter(q.filter.clone());a.filter.rootCondition.removeAttributeConditions(f);return a;},_createChartQueries:function(q,f){var a=[];for(var i=0;i<f.length;++i){var b=f[i];var d=this._createChartQuery(q,b);a.push(d);}return a;},_addChartResultSetsToSearchResultSet:function(s,a){for(var i=0;i<a.length;++i){var b=a[i];this._addChartResultSetToSearchResultSet(s,b);}},_addChartResultSetToSearchResultSet:function(s,a){if(a.items.length===0){return;}var d=a.query.dimension;var m=null;var i;for(i=0;i<s.facets.length;++i){var f=s.facets[i];if(f.query.dimension===d){m=f;break;}}if(m){s.facets.splice(i,1,a);}else{s.facets.push(a);}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSet.js":function(){sinaDefine(['../core/core','./ResultSet'],function(c,R){"use strict";return R.derive({_meta:{properties:{facets:{required:false,default:function(){return[];}},totalCount:{required:true},nlqSuccess:{required:false,default:false}}},toString:function(){var r=[];r.push(R.prototype.toString.apply(this,arguments));for(var i=0;i<this.facets.length;++i){var f=this.facets[i];r.push(f.toString());}return r.join('\n');}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSetItem.js":function(){sinaDefine(['../core/core','./ResultSetItem'],function(c,R){"use strict";return R.derive({_meta:{properties:{dataSource:{required:true},title:{required:true},titleHighlighted:{required:true},titleAttributes:{required:true,aggregation:true},titleDescription:{required:false},detailAttributes:{required:true,aggregation:true},defaultNavigationTarget:{required:false,aggregation:true},navigationTargets:{required:false,aggregation:true},score:{required:false,default:0}}},toString:function(){var r=[];r.push('--'+this.title);for(var i=0;i<this.attributeAreaAttributes.length;++i){var a=this.attributeAreaAttributes[i];r.push(a.toString());}return r.join('\n');}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSetItemAttribute.js":function(){sinaDefine(['../core/core','./SinaObject','./SearchResultSetItemAttributeBase'],function(c,S,a){"use strict";return a.derive({_meta:{properties:{label:{required:true},value:{required:true},valueFormatted:{required:true},valueHighlighted:{required:true},isHighlighted:{required:true},unitOfMeasure:{required:false},description:{required:false},defaultNavigationTarget:{required:false,aggregation:true},navigationTargets:{required:false,aggregation:true},group:{required:false},nameInGroup:{required:false},metadata:{required:true}}},toString:function(){return this.label+':'+this.valueFormatted;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSetItemAttributeBase.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{id:{required:true}}},toString:function(){return this.id;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSetItemAttributeGroup.js":function(){sinaDefine(['../core/core','./SinaObject','./SearchResultSetItemAttributeBase'],function(c,S,a){"use strict";return a.derive({_meta:{properties:{label:{required:false},template:{required:false},attributes:{required:true},metadata:{required:true}}},toString:function(){var v="",p=0;var m,r=RegExp("{[a-z]+}","gi");while((m=r.exec(this.template))!==null){v+=this.template.substring(p,m.index);var b=m[0].slice(1,-1);v+=this.attributes[b]&&this.attributes[b].valueFormatted||"";p=r.lastIndex;}v+=this.template.substring(p);return this.label+':'+v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchTermAndDataSourceSuggestion.js":function(){sinaDefine(['../core/core','./SearchTermSuggestion','./SuggestionType'],function(c,S,a){"use strict";return S.derive({type:a.SearchTermAndDataSource,_meta:{properties:{dataSource:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchTermSuggestion.js":function(){sinaDefine(['../core/core','./Suggestion','./SuggestionType'],function(c,S,a){"use strict";return S.derive({type:a.SearchTerm,_meta:{properties:{searchTerm:{required:true},filter:{required:true},childSuggestions:{required:false,default:function(){return[];}}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SimpleCondition.js":function(){sinaDefine(['../core/core','../core/util','./Condition','./ConditionType'],function(c,u,C,a){"use strict";return C.derive({_meta:{properties:{operator:{required:false,default:function(){return this.sina.ComparisonOperator.Eq;}},attribute:{required:true},value:{required:true}}},type:a.Simple,_initClone:function(o){this.operator=o.operator;this.attribute=o.attribute;this.value=o.value;},_equals:function(o){if(this.attribute!==o.attribute||this.operator!==o.operator){return false;}if(this.value.equals){return this.value.equals(o.value.equals);}if(this.value instanceof Date&&o.value instanceof Date){return this.value.getTime()===o.value.getTime();}return this.value===o.value;},toJson:function(){var j;if(this.value instanceof Date){j=u.dateToJson(this.value);}else{j=this.value;}var r={type:'Simple',operator:this.operator,attribute:this.attribute,value:j,valueLabel:this.valueLabel,attributeLabel:this.attributeLabel};if(this.userDefined){r.userDefined=true;}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Sina.js":function(){sinaDefine(['../core/core','../core/util','./SearchQuery','./ChartQuery','./DataSourceQuery','./SuggestionQuery','./Filter','./DataSource','./ComplexCondition','./SimpleCondition','./AttributeMetadata','./AttributeGroupMetadata','./SearchResultSetItemAttribute','./SearchResultSetItemAttributeGroup','./SearchResultSetItem','./SearchResultSet','./AttributeType','./AttributeFormatType','./AttributeDescriptionTextArrangement','./DataSourceType','./SuggestionType','./SuggestionCalculationMode','./FacetType','./MatchingStrategy','./LogicalOperator','./ComparisonOperator','./AttributeUsageType','./FacetResultSet','./FacetResultSetItem','./SearchTermSuggestion','./SearchTermAndDataSourceSuggestion','./DataSourceSuggestion','./ObjectSuggestion','./SuggestionResultSet','./ChartResultSet','./DataSourceResultSet','./ChartResultSetItem','./DataSourceResultSetItem','./EqualsMode','./SortOrder','./Capabilities','./ConditionType','./Configuration','../providers/inav2/typeConverter','./NavigationTarget','../providers/tools/fiori/FioriIntentsResolver','../providers/tools/fiori/NavigationTargetForIntent','../providers/tools/cds/CDSAnnotationsParser','../providers/tools/fiori/SuvNavTargetResolver','./formatters/ConfigSearchResultSetFormatter','./formatters/ConfigMetadataFormatter','./formatters/Formatter','./formatters/DefaultResultSetFormatter'],function(c,u,S,C,D,a,F,b,d,e,A,f,g,h,k,l,m,n,o,p,q,r,s,M,L,t,v,w,x,y,z,B,O,E,G,H,I,J,K,N,P,Q,R,T,U,V,W,X,Y,Z,$,_,a1){"use strict";return c.defineClass({AttributeType:m,AttributeFormatType:n,AttributeDescriptionTextArrangement:o,DataSourceType:p,AttributeUsageType:v,MatchingStrategy:M,LogicalOperator:L,ComparisonOperator:t,FacetType:s,SuggestionCalculationMode:r,SuggestionType:q,EqualsMode:K,SortOrder:N,ConditionType:Q,SearchResultSet:l,SearchResultSetItem:k,SearchResultSetItemAttribute:g,ObjectSuggestion:O,_init:function(i){this.core=c;this.util=u;this.inav2TypeConverter=T;this.provider=i;this.createSearchQuery=this.generateFactoryMethod(S);this.createChartQuery=this.generateFactoryMethod(C);this.createSuggestionQuery=this.generateFactoryMethod(a);this.createDataSourceQuery=this.generateFactoryMethod(D);this.createFilter=this.generateFactoryMethod(F);this.createComplexCondition=this.generateFactoryMethod(d);this.createSimpleCondition=this.generateFactoryMethod(e);this._createAttributeMetadata=this.generateFactoryMethod(A);this._createAttributeGroupMetadata=this.generateFactoryMethod(f);this._createSearchResultSetItemAttribute=this.generateFactoryMethod(g);this._createSearchResultSetItemAttributeGroup=this.generateFactoryMethod(h);this._createSearchResultSetItem=this.generateFactoryMethod(k);this._createSearchResultSet=this.generateFactoryMethod(l);this._createSearchTermSuggestion=this.generateFactoryMethod(y);this._createSearchTermAndDataSourceSuggestion=this.generateFactoryMethod(z);this._createDataSourceSuggestion=this.generateFactoryMethod(B);this._createObjectSuggestion=this.generateFactoryMethod(O);this._createSuggestionResultSet=this.generateFactoryMethod(E);this._createChartResultSet=this.generateFactoryMethod(G);this._createDataSourceResultSet=this.generateFactoryMethod(H);this._createChartResultSetItem=this.generateFactoryMethod(I);this._createDataSourceResultSetItem=this.generateFactoryMethod(J);this._createCapabilities=this.generateFactoryMethod(P);this._createConfiguration=this.generateFactoryMethod(R);this._createNavigationTarget=this.generateFactoryMethod(U);this._createFioriIntentsResolver=this.generateFactoryMethod(V);this._createNavigationTargetForIntent=this.generateFactoryMethod(W);this._createCDSAnnotationsParser=this.generateFactoryMethod(X);this._createSuvNavTargetResolver=this.generateFactoryMethod(Y);this.searchResultSetFormatters=[];this.metadataFormatters=[];this.dataSources=[];this.dataSourceMap={};this.allDataSource=this._createDataSource({id:'All',label:'All',type:this.DataSourceType.Category});this.searchResultSetFormatters.push(new a1());},_initAsync:function(i){i=i||{};this.isDummyProvider=i.provider.indexOf("dummy")>-1;this.provider.label=i.label;return c.Promise.resolve().then(function(){return this._evaluateConfigurationAsync(i);}.bind(this)).then(function(){i.sina=this;return this.provider._initAsync.apply(this.provider,[i]);}.bind(this)).then(function(j){j=j||{};this.capabilities=j.capabilities||this._createCapabilities();return this._formatMetadataAsync();}.bind(this)).then(function(){if(this.getBusinessObjectDataSources().length===0&&!this.isDummyProvider){return Promise.reject(new c.Exception('Not active - no datasources'));}}.bind(this));},_formatMetadataAsync:function(){return c.executeSequentialAsync(this.metadataFormatters,function(i){return i.formatAsync({dataSources:this.dataSources});}.bind(this));},_evaluateConfigurationAsync:function(b1){var c1=[];if(b1.searchResultSetFormatters){for(var i=0;i<b1.searchResultSetFormatters.length;++i){var d1=b1.searchResultSetFormatters[i];if(!(d1 instanceof _)){d1=new Z(d1);}this.searchResultSetFormatters.push(d1);c1.push(d1.initAsync());}}if(b1.metadataFormatters){for(var j=0;j<b1.metadataFormatters.length;++j){var e1=b1.metadataFormatters[j];if(!(e1 instanceof _)){e1=new $(e1);}this.metadataFormatters.push(e1);c1.push(e1.initAsync());}}return c.Promise.all(c1);},loadMetadata:function(i){if(this.provider.loadMetadata){return this.provider.loadMetadata(i);}return c.Promise.resolve();},createDataSourceMap:function(j){var b1={};for(var i=0;i<j.length;++i){var c1=j[i];b1[c1.id]=c1;}return b1;},generateFactoryMethod:function(i){return function(j){j=j||{};j.sina=this;return new i(j);};},_createDataSource:function(i){i=i||{};i.sina=this;var j=new b(i);if(this.dataSourceMap[j.id]===j){throw new c.Exception('cannot create an already existing datasource: "'+j.id+'"');}this.dataSources.push(j);this.dataSourceMap[j.id]=j;return j;},getAllDataSource:function(){return this.allDataSource;},getBusinessObjectDataSources:function(){var j=[];for(var i=0;i<this.dataSources.length;++i){var b1=this.dataSources[i];if(!b1.hidden&&b1.type===this.DataSourceType.BusinessObject){j.push(b1);}}return j;},getDataSource:function(i){return this.dataSourceMap[i];},getConfigurationAsync:function(i){if(!this.provider.getConfigurationAsync){return c.Promise.resolve(this._createConfiguration({personalizedSearch:false,isPersonalizedSearchEditable:false}));}i=i||{};if(this.configurationPromise&&!i.forceReload){return this.configurationPromise;}this.configurationPromise=this.provider.getConfigurationAsync();return this.configurationPromise;},logUserEvent:function(i){if(!this.provider.logUserEvent){return;}this.provider.logUserEvent(i);},getDebugInfo:function(){var i=['Sina Provider:'+this.provider.id];if(this.provider.getDebugInfo){var j=this.provider.getDebugInfo();if(j){i.push(j);}}return i.join('\n');},parseDataSourceFromJson:function(j){var i=this.getDataSource(j.id);if(i){return i;}if(j.type!==this.DataSourceType.Category){throw new c.Exception('Datasource in URL does not exist '+j.id);}i=this._createDataSource(j);return i;},parseSimpleConditionFromJson:function(j){var i;if(c.isObject(j.value)){i=u.dateFromJson(j.value);}else{i=j.value;}return this.createSimpleCondition({operator:j.operator,attribute:j.attribute,value:i,attributeLabel:j.attributeLabel,valueLabel:j.valueLabel,userDefined:j.userDefined?true:false});},parseComplexConditionFromJson:function(j){var b1=[];for(var i=0;i<j.conditions.length;++i){var c1=j.conditions[i];b1.push(this.parseConditionFromJson(c1));}return this.createComplexCondition({operator:j.operator,conditions:b1,attributeLabel:j.attributeLabel,valueLabel:j.valueLabel,userDefined:j.userDefined?true:false});},parseConditionFromJson:function(j){switch(j.type){case'Simple':return this.parseSimpleConditionFromJson(j);case'Complex':return this.parseComplexConditionFromJson(j);default:throw new c.Exception('unknown condition type "'+j.type+'"');}},parseFilterFromJson:function(j){return this.createFilter({searchTerm:j.searchTerm,rootCondition:this.parseConditionFromJson(j.rootCondition),dataSource:this.parseDataSourceFromJson(j.dataSource)});}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SinaObject.js":function(){sinaDefine(['../core/core'],function(c){"use strict";return c.defineClass({_meta:{properties:{sina:{required:false,getter:true}}},_initClone:function(o){this.sina=o.sina;},_equals:function(o){return this.sina===o.sina;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SortOrder.js":function(){sinaDefine([],function(){"use strict";return{Ascending:'Ascending',Descending:'Descending'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Suggestion.js":function(){sinaDefine(['../core/core','./ResultSetItem'],function(c,R){"use strict";return R.derive({_meta:{properties:{calculationMode:{required:true},label:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SuggestionCalculationMode.js":function(){sinaDefine([],function(){"use strict";return{Data:'Data',History:'History'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SuggestionQuery.js":function(){sinaDefine(['../core/core','./Query','./SuggestionType','./SuggestionCalculationMode'],function(c,Q,S,a){"use strict";return Q.derive({_meta:{properties:{types:{default:function(){return[S.DataSource,S.Object,S.SearchTerm];},setter:true},calculationModes:{default:function(){return[a.Data,a.History];},setter:true}}},_initClone:function(o){this.types=o.types.slice();this.calculationModes=o.calculationModes.slice();},_equals:function(o){return c.equals(this.types,o.types,false)&&c.equals(this.calculationModes,o.calculationModes,false);},_execute:function(q){return this.sina.provider.executeSuggestionQuery(q);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SuggestionResultSet.js":function(){sinaDefine(['../core/core','./ResultSet'],function(c,R){"use strict";return R.derive({});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SuggestionType.js":function(){sinaDefine([],function(){"use strict";return{SearchTerm:'SearchTerm',SearchTermAndDataSource:'SearchTermAndDataSource',Object:'Object',DataSource:'DataSource'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/ConfigFormatter.js":function(){sinaDefine(['../../core/core','./Formatter','../../configurationEngine/configuratorFactory'],function(c,F,a){"use strict";return F.derive({_init:function(t,b){this.type=t;this.configuration=b;},initAsync:function(){return a.createConfiguratorAsync({type:this.type,configuration:this.configuration}).then(function(b){this.configurator=b;}.bind(this));},formatAsync:function(o){return this.configurator.configureAsync(o);},format:function(o){return this.configurator.configure(o);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/ConfigMetadataFormatter.js":function(){sinaDefine(['../../core/core','./ConfigFormatter'],function(c,C){"use strict";var m={type:'object',typeName:'DataSources',properties:[{name:'dataSources',multiple:true,getElementId:function(d){return d.id;},type:{type:'object',typeName:'DataSource',properties:[{name:'label',type:'string'},{name:'labelPlural',type:'string'},{name:'attributesMetadata',multiple:true,getElementId:function(a){return a.id;},type:{type:'object',typeName:'AttributeMetadata',properties:[{name:'label',type:'string'}]}}]}}]};return C.derive({_init:function(a){return C.prototype._init.apply(this,[m,a]);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/ConfigSearchResultSetFormatter.js":function(){sinaDefine(['../../core/core','./ConfigFormatter','../../core/util'],function(c,C,u){"use strict";var a=function(b){if(b.__templateAttributeMapCache){return b.__templateAttributeMapCache;}var m=b.__templateAttributeMapCache={};var d;for(var i=0;i<b.detailAttributes.length;++i){d=b.detailAttributes[i];m[d.id]=d.value;}for(var j=0;j<b.titleAttributes.length;++j){d=b.titleAttributes[j];m[d.id]=d.value;}return m;};var s={type:'object',typeName:'SearchResultSet',properties:[{name:'items',multiple:true,getElementId:function(i){return i.dataSource.id;},type:{type:'object',typeName:'SearchResultResultSetItem',evaluateTemplate:function(t,i){var b=a(i);return u.evaluateTemplate(t,b);},properties:[{name:'title',type:'string'},{name:'detailAttributes',multiple:true,getElementId:function(b){return b.id;},createElement:function(b,d){var e=d.objectStack[0].sina;var f=e._createAttributeMetadata({type:e.AttributeType.String,id:b.id,label:'',isSortable:false,isKey:false,matchingStrategy:e.MatchingStrategy.Exact,usage:{Detail:{}}});var n=e._createSearchResultSetItemAttribute({id:b.id,label:'',value:'',valueFormatted:'',valueHighlighted:'',isHighlighted:false,metadata:f});n.parent=d.objectStack[2];return n;},postProcessCreatedElement:function(b){b.valueFormatted=b.valueFormatted||b.value;b.valueHighlighted=b.valueHighlighted||b.valueFormatted;},type:{type:'object',typeName:'SearchResultSetItemAttribute',properties:[{name:'label',type:'string'},{name:'value',type:'string'},{name:'valueFormatted',type:'string'},{name:'valueHighlighted',type:'string'}]}},{name:'navigationTargets',multiple:true,getElementId:function(n){return n.label;},createElement:function(n,b){var d=b.objectStack[0].sina;var e=d._createNavigationTarget({label:'',targetUrl:''});e.parent=b.objectStack[2];return e;},type:{type:'object',typeName:'NavigationTarget',properties:[{name:'label',type:'string'},{name:'targetUrl',type:'string'}]}}]}}]};return C.derive({_init:function(b){return C.prototype._init.apply(this,[s,b]);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/DefaultResultSetFormatter.js":function(){sinaDefine(['../../core/core','./Formatter','../../core/util'],function(c,F,u){"use strict";return F.derive({initAsync:function(){},format:function(r){return r;},formatAsync:function(r){r=u.addPotentialNavTargetsToAttribute(r);return c.Promise.resolve(r);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/Formatter.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";return c.defineClass({initAsync:function(){},format:function(o){return o;},formatAsync:function(o){return c.Promise.resolve(o);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/sinaFactory.js":'window.sinaRequire=window.sinaRequire||(window.sap&&window.sap.ui&&window.sap.ui.require)||window.require;window.sinaDefine=window.sinaDefine||(window.sap&&window.sap.ui&&window.sap.ui.define)||window.define;window.sinaLog=window.sinaLog||(window.jQuery&&window.jQuery.sap&&window.jQuery.sap.log)||window.console;var modules=["../core/core","../core/util","./Sina"];var isSapRequire=window.sap&&window.sap.ui&&window.sap.ui.require&&window.sap.ui.require===window.sinaRequire;if(!isSapRequire){modules.push("module");}sinaDefine(modules,function(c,u,S,m){"use strict";return{createAsync:function(a){return this._normalizeConfiguration(a).then(function(a){return new c.Promise(function(r,b){sinaRequire([a.provider],function(p){var d=new p();var s=new S(d);return s._initAsync.apply(s,[a]).then(function(){r(s);},function(e){b(e);});},function(e){sinaLog.error("require error: "+e);b(e);});});});},createByTrialAsync:function(i,a){var b;return Promise.all(c.map(i,this._normalizeConfiguration.bind(this))).then(function(n){b=n;return this._mixinUrlConfiguration(b);}.bind(this)).then(function(){return this._createSinaRecursively(b,a);}.bind(this));},_normalizeConfiguration:function(a){return new c.Promise(function(r,b){if(c.isString(a)&&a.indexOf("/")>=0&&a.indexOf("Provider")<0){sinaRequire([a],function(a){this._normalizeConfiguration(a).then(function(a){r(a);});}.bind(this));return;}if(c.isString(a)&&a[0]!=="{"){a=\'{ "provider" : "\'+a+\'"}\';}if(c.isString(a)){a=JSON.parse(a);}if(a.provider.indexOf("/")<0){if(isSapRequire){a.provider=this._calculateProviderUrlSap(a.provider);}else{a.provider=this._calculateProviderUrl(a.provider);}}r(a);}.bind(this));},_calculateProviderUrlSap:function(p){var a="sap/ushell/renderers/fiori2/search/sinaNext/providers/";var s="/Provider";return a+p+s;},_calculateProviderUrl:function(p){var a=m.uri.split("/").slice(0,-1).join("/")+"/../providers/";var s="/Provider";return a+p+s;},_readConfigurationFromUrl:function(){var s=u.getUrlParameter("sinaConfiguration");if(s){return this._normalizeConfiguration(s);}var a=u.getUrlParameter("sinaProvider");if(a){return this._normalizeConfiguration(a);}return c.Promise.resolve();},_createSinaRecursively:function(a,b){b=b||function(){return true;};var d=function(i){if(i>=a.length){return c.Promise.reject(new c.Exception("sina creation by trial failed"));}var e=a[i];return this.createAsync(e).then(function(s){if(b(s)){return s;}return d(i+1);}.bind(this),function(){return d(i+1);}.bind(this));}.bind(this);return d(0);},_mixinUrlConfiguration:function(a){return this._readConfigurationFromUrl().then(function(b){if(!b){return;}var f=false;for(var i=0;i<a.length;++i){var d=a[i];if(d.provider.indexOf("/dummy/Provider")<0&&d.provider!==b.provider){a.splice(i,1);i--;continue;}if(d.provider===b.provider){f=true;this._mergeConfiguration(d,b);}}if(!f){a.splice(0,0,b);}}.bind(this));},_mergeConfiguration:function(a,b){for(var p in b){a[p]=b[p];}}};});\n',
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/util.js":function(){sinaDefine(['./ComparisonOperator'],function(C){"use strict";var m={};m.convertOperator2Wildcards=function(v,o){if(o===C.Eq){return v;}else{var r=[];var a=v.split(' ');for(var i=0;i<a.length;i++){var t=a[i].trim();if(t.length===0){continue;}switch(o){case C.Co:t='*'+t+'*';break;case C.Bw:t=t+'*';break;case C.Ew:t='*'+t;break;default:break;}r.push(t);}return r.join(' ');}};return m;});
},
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
	"sap/ushell/EventHub.js":function(){(function(){"use strict";var d=(!window.sap||!sap.ui||!sap.ui.define)?function(v,c){return c();}:sap.ui.define;return d([],function(){var _={pendingEvents:{},subscribers:{},dispatchOperations:{},store:c()};function c(){return{nextKey:0,objectToKey:new WeakMap(),keyToObject:{}};}function l(M,D,C){if(jQuery&&jQuery.sap&&jQuery.sap.log&&jQuery.sap.log.error){jQuery.sap.log.error(M,D,"sap.ushell.EventHub");return;}if(window.console){var o=[M,D];if(C){o.push("error caused by:");o.push(C);}window.console.error.apply(window.console,o);}}function a(o){var M="An exception was raised while executing a registered callback on event '"+o.eventName+"'";var D="Data passed to the event were: '"+o.eventData+"'";if(o.error.stack){D+=" Error details: "+o.error.stack;}l(M,D,o.fnCausedBy);}function s(o,C,D){var R;try{R=C(D);}catch(v){a({eventName:o,eventData:D,fnCausedBy:C,error:v});}return R;}function J(H){if(typeof arguments[2]==="function"){return y(H,arguments[2]);}return arguments[2];}function b(H){if(typeof arguments[2]==="string"&&arguments[2].indexOf("<function")===0){return z(H,arguments[2]);}return arguments[2];}function e(H,D,P){if(typeof D==="object"||typeof D==="function"){try{var S=[D,J.bind(null,H)];if(P){S.push(3);}return JSON.stringify.apply(JSON,S);}catch(o){l(""+o,o.stack,e);}}return D;}function f(H,D){try{return JSON.parse(D,b.bind(null,H));}catch(o){return D;}}function g(H,o,S){if(!H.subscribers[o]){H.subscribers[o]=[];}H.subscribers[o].push(S);}function u(H,o,v){H.subscribers[o]=(H.subscribers[o]||[]).map(function(S){return S.filter(function(L){return L.fn!==v;});}).filter(function(G){return G.length>0;});}function h(){var D;var o=new Promise(function(R){D=R;});var v={dispatching:o,cancelled:false,cancel:function(){v.cancelled=true;},complete:function(){D();}};return v;}function i(H,o){if(!H.subscribers.hasOwnProperty(o)){return null;}var D=h();var S=H.subscribers[o];var G=S.map(function(v){return j(H,o,v,D,0);});Promise.all(G).then(D.complete,D.complete);return D;}function j(H,o,S,D,v){var O=S.length;var C=S.slice(v);return C.reduce(function(P,F,I){return P.then(function(G){if(D.cancelled){if(G){u(H,o,F.fn);}return G;}return n(H,o,F,S).then(function(K){if(K){D.cancelled=true;}return K;});});},Promise.resolve(false)).then(function(F){if(!F&&O<S.length){return j(H,o,S,D,O);}return F;});}function n(H,o,S,v){return new Promise(function(R){var D=f(H,H.pendingEvents[o]);setTimeout(function(){if(S.called&&v.offed){R(false);return;}S.called=true;var O=v.offed;s(o,S.fn,D);var C=v.offed;if(C){u(H,o,S.fn);}R(!O&&C);},0);});}function k(H,o,S){return function(){S.forEach(function(L){if(L.called){u(H,o,L.fn);}});S.offed=true;return{off:k(H,o,[])};};}function m(H,o,S){return function(C){var v={fn:C,called:false};S.push(v);if(H.pendingEvents.hasOwnProperty(o)){var D=H.dispatchOperations[o];if(!D){n(H,o,v,S);}else{D.dispatching.then(function(){if(!v.called){n(H,o,v,S);}});}}return{do:m(H,o,S),off:k(H,o,S)};};}function p(H,o){var S=[];g(H,o,S);return{do:m(H,o,S),off:k(H,o,S)};}function q(H,o){var D=p(H,o);D.off();return D;}function r(H,o,D){var S=e(H,D);if(H.pendingEvents.hasOwnProperty(o)&&H.pendingEvents[o]===S){return this;}H.pendingEvents[o]=S;var v=H.dispatchOperations[o];if(v){v.cancel();}var N=i(H,o);H.dispatchOperations[o]=N;return this;}function t(H,o){return f(H,H.pendingEvents[o]);}function w(H){var o=Array.prototype.slice.call(arguments);o.shift();var C=0;var O=new Array(o.length).join(",").split(",").map(function(){return 1;});var v=[];var D={do:function(F){o.forEach(function(G,I){G.do(function(I,V){v[I]=V;C+=O[I];O[I]=0;if(C===o.length){F.apply(null,v);}}.bind(null,I));});return{off:D.off};},off:function(){var F=o.reduce(function(F,G){return G.off();},function(){});return{off:F};}};return D;}function x(H,o){var D=H.dispatchOperations[o];return D?D.dispatching:Promise.resolve();}function y(H,o){if(H.store.objectToKey.has(o)){return H.store.objectToKey.get(o);}H.store.nextKey++;var K="<"+typeof o+">#"+H.store.nextKey;H.store.keyToObject[K]=o;H.store.objectToKey.set(o,K);return K;}function z(H,K){return H.store.keyToObject[K];}function A(H){var o={};o.emit=r.bind(o,H);o.on=p.bind(null,H);o.once=q.bind(null,H);o.last=t.bind(null,H);o.join=w.bind(null,H);o.wait=x.bind(null,H);o._reset=function(H){H.pendingEvents={};H.subscribers={};H.dispatchOperations={};H.store=c();}.bind(null,H);return o;}function B(C){var D={pendingEvents:{},subscribers:{},dispatchOperations:{},store:c()};var F=A(D);var G=f(D,e(D,C));function H(o){var v=o.charAt(0);if(v.match(/[a-zA-Z0-9]/)){throw new Error("Invalid path separator '"+v+"'. Please ensure path starts with a non alphanumeric character");}var X=o.split(v);X.shift();return X;}function I(v,o){var X=v;var Y="";if(arguments.length===2){X=o;Y=v;}return Y+"/"+X.join("/");}function K(v){return Object.prototype.toString.apply(v)==="[object Array]";}function L(v){return Object(v)!==v;}function M(v){return(K(v)?v.length:Object.keys(v).length)===0;}function N(v,X,Y,Z){var $="";var a1=v;var b1=[];Y.reduce(function(c1,d1,e1){$=I($,[d1]);a1=a1[d1];if(e1===Y.length-1){if(!L(Z)&&!L(a1)&&Object.keys(a1).length>0){var f1;var g1=Object.keys(a1).reduce(function(o,d1){o[d1]=true;return o;},{});var h1=Object.keys(Z).some(function(d1){f1=d1;var o=g1.hasOwnProperty(d1);delete g1[d1];var m1=!L(a1[d1])&&Object.keys(a1[d1]).length>0;return!o||m1;});var i1=Object.keys(g1).length>0;var j1=h1||i1;if(j1){var k1=h1?"One or more values are not defined in the channel contract or are defined as a non-empty object/array, for example, check '"+f1+"'.":"Some keys are missing in the event data: "+Object.keys(g1).join(", ")+".";throw new Error("Cannot write value '"+e(D,Z,true)+"' to path '"+$+"'. "+k1+" All childrens in the value must appear in the channel contract and must have a simple value or should be defined as an empty complex value");}var l1=Object.keys(Z).map(function(d1){return{serializedPath:I($,[d1]),value:Z[d1]};});Array.prototype.push.apply(b1,l1);}c1[d1]=Z;}else if(!c1.hasOwnProperty(d1)){c1[d1]=K(a1)?[]:{};}b1.push({serializedPath:$,value:c1[d1]});return c1[d1];},X);return b1;}function O(o,v){var X="";var Y=v.reduce(function(Z,$){X+="/"+$;if(K(Z)&&!$.match(/^[0-9]+$/)){throw new Error("Invalid array index '"+$+"' provided in path '"+X+"'");}if(!Z.hasOwnProperty($)){throw new Error("The item '"+$+"' from path "+X+" cannot be accessed in the object: "+e(D,Z));}return Z[$];},o);return Y;}function P(o,v,X){return v.reduce(function(Y,Z,$){var a1=$===(v.length-1);if(Y.hasOwnProperty(Z)){return Y[Z];}return a1?X:{};},o);}function Q(o,v){v.pop();var X=o;var Y=[];return v.reduce(function(Z,$){X=X[$];Y.push($);Z.push({serializedPath:I(Y),value:X});return Z;},[]);}function R(o){return o.map(function(v){var X=v.serializedPath;if(!D.subscribers.hasOwnProperty(X)||D.subscribers[X].length===0){return null;}return{path:X,value:v.value};}).filter(function(v){return!!v;});}function S(o,v){var X=H(o);O(C,X);var Y=N(C,G,X,v);Y.forEach(function(Z){F.emit(Z.serializedPath,Z.value);});}function T(o){var v=H(o);var X=O(C,v);return P(G,v,X);}function U(o){var v=H(o);var X=I(v);var Y=F.last(X);var Z=D.pendingEvents.hasOwnProperty(X);if(Z){return F.on(X);}Y=O(C,v);if(typeof Y!=="undefined"&&(L(Y)||!M(f(F,e(F,Y))))){F.emit(X,Y);}return F.on(X);}function V(o){var v=U(o);v.off();return v;}function W(o){var v=H(o);var X=Q(G,v);var Y=R(X).map(function(Z){return F.wait(Z.path,Z.value);});return Promise.all(Y.concat(F.wait(o)));}return{emit:S,on:U,once:V,last:T,wait:W,join:w.bind(null,F)};}var E=A(_);E.createChannel=B.bind(null);return E;},false);})();
},
	"sap/ushell/appRuntime/ui5/AppRuntime.js":'// Copyright (c) 2009-2017 SAP SE, All Rights Reserved\nprepareModules();sap.ui.define(["sap/base/util/LoaderExtensions","sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppCommunicationMgr","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/URI","sap/ushell/appRuntime/ui5/SessionHandlerAgent","sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent","sap/ushell/appRuntime/ui5/services/ShellUIService","sap/ushell/ui5service/UserStatus","sap/ushell/appRuntime/ui5/services/AppConfiguration","sap/ui/core/Popup","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log","sap/ui/core/ComponentContainer","sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions"],function(L,A,a,b,U,S,c,d,e,f,P,q,i,g,C){"use strict";var p=new U().search(true),o,s,D="sap/ushell/appRuntime/ui5/AppRuntimeDefaultConfiguration.json",E=false;\nfunction h(){this.main=function(){var t=this;a.init();Promise.all([t.getPageConfig(),c.getURLParameters(t._getURI())]).then(function(v){var u=v[1],k=u["sap-ui-app-id"];t.setModulePaths();t.init();Promise.all([t.initServicesContainer(),t.getAppInfo(k)]).then(function(v){var l=v[1];S.init();t.createApplication(k,u,l).then(function(r){t.renderApplication(r);});});});};this._getURI=function(){return new U().query(true);};this.init=function(){A.registerCommHandlers({"sap.ushell.appRuntime":{oInboundActions:{"hashChange":{executeServiceCallFn:function(k){var H=k.oMessageData.body.sHash;if(H&&H.length>0){window.hasher.replaceHash(H);}return new q.Deferred().resolve().promise();}},"setDirtyFlag":{executeServiceCallFn:function(k){var I=k.oMessageData.body.bIsDirty;if(I!==sap.ushell.Container.getDirtyFlag()){sap.ushell.Container.setDirtyFlag(I);}return new q.Deferred().resolve().promise();}},"themeChange":{executeServiceCallFn:function(k){var l=k.oMessageData.body.currentThemeId;sap.ushell.Container.getUser().setTheme(l);return new q.Deferred().resolve().promise();}},"buttonClick":{executeServiceCallFn:function(k){sap.ushell.renderers.fiori2.Renderer.handleHeaderButtonClick(k.oMessageData.body.buttonId);return new q.Deferred().resolve().promise();}},"uiDensityChange":{executeServiceCallFn:function(k){var l=k.oMessageData.body.isTouch;q("body").toggleClass("sapUiSizeCompact",(l==="0")).toggleClass("sapUiSizeCozy",(l==="1"));return new q.Deferred().resolve().promise();}}}}});};this.getPageConfig=function(){var m,k;return new Promise(function(r){L.loadResource(D,{async:true}).then(function(l){m=q("meta[name=\'sap.ushellConfig.ui5appruntime\']")[0];k=JSON.parse(m.content);window["sap-ushell-config"]=q.extend(true,{},l,k);r();});});};this.setModulePaths=function(){if(window["sap-ushell-config"].modulePaths){var k=Object.keys(window["sap-ushell-config"].modulePaths);for(var l in k){(function(){var m={};m[k[l].replace(/\\./g,"/")]=window["sap-ushell-config"].modulePaths[k[l]];sap.ui.loader.config({paths:m});}());}}};this.initServicesContainer=function(){return new Promise(function(r){sap.ui.require(["sap/ushell/appRuntime/ui5/services/Container"],function(k){k.bootstrap("apprt",{apprt:"sap.ushell.appRuntime.ui5.services.adapters"}).then(function(){r();});});});};this._getURIParams=function(){return p;};this.getAppInfo=function(k){var l=window["sap-ushell-config"].ui5appruntime.config.appIndex.data,m=window["sap-ushell-config"].ui5appruntime.config.appIndex.module,t=this;return new Promise(function(r){if(l&&!i(l)){c.getAppInfo(m,t.createApplication.bind(t),t.renderApplication.bind(t));r(l);}else{sap.ui.require([m.replace(/\\./g,"/")],function(n){c.init(n,t.createApplication.bind(t),t.renderApplication.bind(t));n.getAppInfo(k).then(function(u){r(u);});});}});};this.setApplicationParameters=function(k,u){var l,m,n,r=new q.Deferred();function t(v,I){var w="";if(v&&v.length>0){w=(v.startsWith("?")?"":"?")+v;}if(I&&I.length>0){w+=(w.length>0?"&":"?")+I;}return w;}if(u.hasOwnProperty("sap-startup-params")){l=(new U("?"+u["sap-startup-params"])).query(true);if(l.hasOwnProperty("sap-intent-param")){m=l["sap-intent-param"];delete l["sap-intent-param"];}n=(new U("?")).query(l).toString();if(m){b.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{"sAppStateKey":m}).then(function(M){k.url+=t(n,M);r.resolve();},function(v){k.url+=t(n);r.resolve();});}else{k.url+=t(n);r.resolve();}}else{r.resolve();}return r.promise();};this.setHashChangedCallback=function(){function t(n){if(n&&typeof n==="string"&&n.length>0){b.sendMessageToOuterShell("sap.ushell.appRuntime.hashChange",{"newHash":n});}}window.hasher.changed.add(t.bind(this),this);};this.createApplication=function(k,u,l){var t=this,m=function(n){b.sendMessageToOuterShell("sap.ushell.services.ShellUIService.showShellUIBlocker",{"bShow":n.getParameters().visible});};return new Promise(function(r){o=new C({id:k+"-content",width:"100%",height:"100%"});var n="0";if(p.hasOwnProperty("sap-touch")){n=p["sap-touch"];if(n!=="0"&&n!=="1"){n="0";}}q("body").toggleClass("sapUiSizeCompact",(n==="0")).toggleClass("sapUiSizeCozy",(n==="1"));if(!s){sap.ushell.renderers.fiori2.utils.init();s=sap.ushell.Container.getService("ShellNavigation");s.init(function(){});s.registerNavigationFilter(function(){if(sap.ushell.Container.getDirtyFlag()){return s.NavigationFilterStatus.Abandon;}return s.NavigationFilterStatus.Continue;});}c.setComponent(o);new d({scopeObject:o,scopeType:"component"});new e({scopeObject:o,scopeType:"component"});if(P.attachBlockLayerStateChange){P.attachBlockLayerStateChange(m);}t.setApplicationParameters(l,u).done(function(){t.setHashChangedCallback();sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(v){v.createComponent({ui5ComponentName:k,applicationDependencies:l,url:l.url},"todo-replaceDummyShellHash",false).then(function(R){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(w){w.prepareCurrentAppObject("UI5",R.componentHandle.getInstance(),false,undefined);});t.overrideSendAsEmailFn();r(R);});});});});};this.overrideSendAsEmailFn=function(){if(E===true){return;}E=true;if(sap.m&&sap.m.URLHelper&&sap.m.URLHelper.triggerEmail){sap.m.URLHelper.triggerEmail=function(t,k,B,l,m){b.sendMessageToOuterShell("sap.ushell.services.ShellUIService.sendEmail",{"sTo":t,"sSubject":k,"sBody":B,"sCc":l,"sBcc":m,"sIFrameURL":document.URL,"bSetAppStateToPublic":true});};}};this.renderApplication=function(r){o.setComponent(r.componentHandle.getInstance()).placeAt("content");};}\nvar j=new h();j.main();return j;});\nfunction prepareModules(){"use strict";if(document.URL.indexOf("ui5appruntime")>0){sap.ui.define("sap/ushell/ApplicationType",[],function(){return{};});sap.ui.define("sap/ushell/components/applicationIntegration/AppLifeCycle",[],function(){return{};});sap.ui.define("sap/ushell/services/_AppState/WindowAdapter",[],function(){return function(){};});sap.ui.define("sap/ushell/services/_AppState/SequentializingAdapter",[],function(){return function(){};});sap.ui.define("sap/ushell/services/_AppState/Sequentializer",[],function(){return function(){};});sap.ui.define("sap/ushell/TechnicalParameters",[],function(){return{getParameterValue:function(){return Promise.resolve([]);},getParameterValueSync:function(){return[];},getParameters:function(){return[];},getParameterNames:function(){return[];},isTechnicalParameter:function(){return false;}};});sap.ui.define("sap/ushell/AppInfoParameters",[],function(){return{getInfo:function(){return Promise.resolve({});}};});}}\n',
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/Provider.js":function(){sinaDefine(['../../core/core','../../core/util','./template','./template2','../../sina/NavigationTarget'],function(c,u,t,a,N){"use strict";return c.defineClass({id:'sample',instanceCounterStr:"0",_initAsync:function(p){var b=this;b.sina=p.sina;b.NavigationTarget=N;this.sina.util.sampleProviderInstanceCounter++;b.instanceCounterStr=""+this.sina.util.sampleProviderInstanceCounter;var d;var f=0;if(document.location.href.indexOf("use=sample1")>0){f=1;}else if(document.location.href.indexOf("use=sample2")>0){f=2;}if(f===1){b.templateProvider=a;}else if(f===2){b.templateProvider=t;}else if(parseInt(b.instanceCounterStr,10)%2===1){b.templateProvider=t;}else{b.templateProvider=a;}d=b.templateProvider(b);d._init(d);var r=c.Promise.resolve({capabilities:this.sina._createCapabilities({fuzzy:false})});return r;},getSuggestionList:function(b){var l=this._stringify(b);var r=new RegExp("\"valueFormatted\"\:\"([^\{/]+?)\",\"valueHighlighted","g");var m=[];l.replace(r,function(){m.push(arguments[1]);});var s=m.toString().split(' ');s=s.toString().split(',');m=m.concat(s);m=m.filter(function(i,p){if(i!==''){return m.indexOf(i)==p;}});return m;},_stringify:function(o){var b=[];var s=JSON.stringify(o,function(k,v){if(typeof v==='object'&&v!==null){if(b.indexOf(v)!==-1){return undefined;}b.push(v);}return v;});b=null;return s;},adjustImageViewing:function(){var b,d,l;try{$(".sapUshellSearchResultListItem-Image").on('mouseenter',function(){b=$(this).clone();$('body').append(b);d=($(window).height()-$(b).outerHeight())*0.33;l=($(window).width()-$(b).outerWidth())*0.33;b.css({position:"absolute",top:d+"px",left:l+"px"}).show();});$(".sapUshellSearchResultListItem-Image").on('mouseleave',function(){b.remove();});}catch(e){}},applyFilters:function(b,s){var d=[];if(!s.filter.rootCondition.conditions.length>0||!s.filter.rootCondition.conditions[0].conditions.length>0){return b;}var e=[];var f=[];for(var g=0;g<s.filter.rootCondition.conditions.length;g++){var l=s.filter.rootCondition.conditions[g].conditions;for(var h=0;h<l.length;h++){e.push([l[h].attribute,l[h].value]);f.push(l[h].attribute);}}var o=false;for(var i=0;i<b.length;i++){var q=b[i];var r=[];for(var j=0;j<e.length;j++){o=false;for(var k=0;k<q.detailAttributes.length;k++){var v=q.detailAttributes[k];if(v.id===e[j][0]&&v.value===e[j][1]){o=true;}}for(var m=0;m<q.titleAttributes.length;m++){var w=q.titleAttributes[m];if(w.id===e[j][0]&&w.value===e[j][1]){o=true;}}e[j][2]=o;r.push(o);}if(r.toString().match(/false/)===null){d.push(q);}else{var x=[];var y=f.filter(function(q,A){return f.indexOf(q)==A;});for(var n=0;n<y.length;n++){o=false;var z=y[n];for(var p=0;p<e.length;p++){if(e[p][0]===z&&e[p][2]===true){o=true;break;}}x.push(o);}if(x.toString().match(/false/)===null){d.push(q);}}}return d;},adjustHighlights:function(b,s){var n=[];var d="";for(var i=0;i<b.length;i++){var e=b[i];var f=true;d="";e.titleHighlighted=this.addHighlight(e.title,s);if(e.titleHighlighted!==e.title){f=false;}for(var j=0;j<e.detailAttributes.length;j++){var g=e.detailAttributes[j];d=g.metadata.type;if(d==="String"||d==="Integer"){g.valueHighlighted=this.addHighlight(g.valueFormatted,s);if(g.valueHighlighted!==g.valueFormatted){f=false;}}}for(var k=0;k<e.titleAttributes.length;k++){var h=e.titleAttributes[k];d=h.metadata.type;if(d==="String"||d==="Integer"||d==="ImageUrl"){h.valueHighlighted=this.addHighlight(h.valueFormatted,s);if(h.valueHighlighted!==h.valueFormatted){f=false;}}}if(f===false||s==="*"){n.push(e);}}return n;},addHighlight:function(h,s){if(typeof h!=="string"||typeof s!=="string"){return h;}var p=h.toLowerCase().indexOf(s.toLowerCase());if(p>-1){var b=p+s.length;var n=h.substring(0,p)+'<b>'+h.substring(p,b)+'</b>'+h.substring(b);return n;}return h;},addSuvLinkToSearchResultItem:function(s,b,d){var e=this.sina._createSuvNavTargetResolver();if(!b){b='/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/docs/folklorist_authors_and_publications.suv';}if(!d){d=[];}var f={};f.obj={suvThumbnailAttribute:s,suvTargetMimeTypeAttribute:{value:'application/vnd.sap.universal-viewer+suv'},suvTargetUrlAttribute:{value:b}};e.resolveSuvNavTargets(null,f,d);},augmentDetailAttributes:function(r){for(var i=0;i<r.length;i++){var b=r[i].detailAttributes;for(var j=0;j<b.length;j++){var d=b[j];d=u.addPotentialNavTargetsToAttribute(this.sina,d);}}return r;},executeSearchQuery:function(s){var b=this;b.searchQuery=s;return new c.Promise(function(r,d){var e,f,g;var i=b.templateProvider(b);var h=i.searchResultSetItemArray;h=b.augmentDetailAttributes(h);var j=i.searchResultSetItemArray2;j=b.augmentDetailAttributes(j);var k=h.concat(j);var l;if(i.searchResultSetItemArray3){l=i.searchResultSetItemArray3;k=h.concat(l);}b.searchQuery=s;f=s.filter.searchTerm;g=s.filter.dataSource.id;var m=b.generateFacets(s);var n;if(g==="Scientists"||g==="Folklorists"){n=b.adjustHighlights(h,f);n=b.applyFilters(n,s);e=b.sina._createSearchResultSet({items:n,facets:m,type:"",query:s,title:"",totalCount:n.length});}else if(g==="Mysterious_Sightings"||g==="Urban_Legends"){n=b.adjustHighlights(j,f);n=b.applyFilters(n,s);e=b.sina._createSearchResultSet({items:n,facets:m,type:"",query:s,title:"",totalCount:n.length});}else if(g==="Publications"){n=b.adjustHighlights(l,f);n=b.applyFilters(n,s);e=b.sina._createSearchResultSet({items:n,facets:m,type:"",query:s,title:"",totalCount:n.length});}else if(g==="All"){n=b.adjustHighlights(h,f);n=b.applyFilters(n,s);var o=n.length;n=b.adjustHighlights(j,f);n=b.applyFilters(n,s);var p=n.length;var q="";if(l){n=b.adjustHighlights(l,f);n=b.applyFilters(n,s);q=n.length;}m[0].items[0].measureValue=o;m[0].items[0].measureValueFormatted=''+o;m[0].items[1].measureValue=p;m[0].items[1].measureValueFormatted=''+p;if(l&&m[0].items.length>2){m[0].items[2].measureValue=q;m[0].items[2].measureValueFormatted=''+q;}n=b.adjustHighlights(k,f);n=b.applyFilters(n,s);e=b.sina._createSearchResultSet({items:n,facets:m,type:"",query:s,title:"",totalCount:n.length});}r(e);});},executeSuggestionQuery:function(q){var b=this;var d=q.filter.searchTerm;var e=this.templateProvider(this);var f=e.searchResultSetItemArray.concat(e.searchResultSetItemArray2).concat(e.searchResultSetItemArray3);var g=this.getSuggestionList(f);var h=g.filter(function(s){var k=new RegExp("^"+d,"gi");return s.match(k);});if(h.length===0){h=g;}var j=[];var S=function(k){var l=b.sina.SuggestionCalculationMode.Data;var m=q.filter.clone();m.setSearchTerm(k);return b.sina._createSearchTermSuggestion({searchTerm:k,calculationMode:l,filter:m,label:k});};for(var i=0;i<h.length;i++){j.push(new S(h[i]));}var r=this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:j});return new c.Promise(function(k,l){k(r);});},executeChartQuery:function(q){var b=this.generateFacets(q);var w=1;if(q.dimension==="LOCATION"||b.length===1){w=0;}return new c.Promise(function(r,d){r(b[w]);});},getChartResultSetItemsForLocations:function(r){var b=[];var d=this;var l;var e=[];var f,i,j,k,g;for(i=0;i<r.length;i++){g=r[i].detailAttributes;for(j=0;j<g.length;j++){if(g[j].id==="LOCATION"){l=g[j].value;if(e.indexOf(l)===-1){e.push(l);f=d.sina._createChartResultSetItem({filterCondition:d.sina.createSimpleCondition({attribute:"LOCATION",operator:d.sina.ComparisonOperator.Equals,value:l}),dimensionValueFormatted:l,measureValue:1,measureValueFormatted:'1',dataSource:d.searchQuery.filter.dataSource});b.push(f);}else{for(k=0;k<b.length;k++){if(b[k].filterCondition.value===l){b[k].measureValue=b[k].measureValue+1;b[k].measureValueFormatted=''+b[k].measureValue;}}}}}}return b;},getChartResultSetItemsForPublications:function(r){var b=[];var d=this;var l;var e=[];var f,i,j,k,g;for(i=0;i<r.length;i++){g=r[i].detailAttributes;for(j=0;j<g.length;j++){if(g[j].id==="PUBLICATION"){l=g[j].value;if(e.indexOf(l)===-1){e.push(l);f=d.sina._createChartResultSetItem({filterCondition:d.sina.createSimpleCondition({attribute:"PUBLICATION",operator:d.sina.ComparisonOperator.Equals,value:l}),dimensionValueFormatted:l,measureValue:1,measureValueFormatted:'1',dataSource:d.searchQuery.filter.dataSource});b.push(f);}else{for(k=0;k<b.length;k++){if(b[k].filterCondition.value===l){b[k].measureValue=b[k].measureValue+1;b[k].measureValueFormatted=''+b[k].measureValue;}}}}}}return b;},getSientistOrFolkloristFacet:function(s,r){var b=this;var d;var e=[];var f,i,j,k,g,h;var l=[];for(i=0;i<r.length;i++){g=r[i].titleAttributes;if(s.filter.dataSource.id==="Mysterious_Sightings"||s.filter.dataSource.id==="Urban_Legends"||s.filter.dataSource.id==="Publications"){g=r[i].detailAttributes;}for(j=0;j<g.length;j++){if(g[j].id==="SCIENTIST"||g[j].id==="FOLKLORIST"){d=g[j].value;h=g[j].id;if(e.indexOf(d)===-1){e.push(d);f=b.sina._createChartResultSetItem({filterCondition:b.sina.createSimpleCondition({attribute:g[j].id,operator:b.sina.ComparisonOperator.Equals,value:d}),dimensionValueFormatted:d,measureValue:1,measureValueFormatted:'1',dataSource:b.searchQuery.filter.dataSource});l.push(f);}else{for(k=0;k<l.length;k++){if(l[k].filterCondition.value===d){l[k].measureValue=l[k].measureValue+1;l[k].measureValueFormatted=''+l[k].measureValue;}}}}}}return[l,h];},getTopFacetOnly:function(s){var b=this;var d=s.filter.sina.allDataSource;var e=[b.sina._createDataSourceResultSetItem({dataSource:s.filter.sina.dataSources[1],dimensionValueFormatted:d.labelPlural,measureValue:4,measureValueFormatted:'4'}),b.sina._createDataSourceResultSetItem({dataSource:s.filter.sina.dataSources[2],dimensionValueFormatted:d.labelPlural,measureValue:5,measureValueFormatted:'5'}),b.sina._createDataSourceResultSetItem({dataSource:s.filter.sina.dataSources[3],dimensionValueFormatted:d.labelPlural,measureValue:1,measureValueFormatted:'1'})];var f=[b.sina._createDataSourceResultSet({title:s.filter.dataSource.label,titleHighlighted:s.filter.dataSource.label,items:e,query:s})];return f;},generateFacets:function(s){var b=this;if(s.filter.dataSource.id==="All"){return b.getTopFacetOnly(s);}var d=[];var e;var g=this.templateProvider(this);var f=b.sina.createFilter({searchTerm:b.searchQuery.filter.searchTerm,dataSource:b.searchQuery.filter.dataSource,rootCondition:b.searchQuery.filter.rootCondition.clone()});var h=[];var r,i,j;if(s.filter.dataSource.id==="Publications"){r=g.searchResultSetItemArray3;}else if(s.filter.dataSource.id==="Scientists"||s.filter.dataSource.id==="Folklorists"){r=g.searchResultSetItemArray;}else if(s.filter.dataSource.id==="Urban_Legends"||s.filter.dataSource.id==="Mysterious_Sightings"){r=g.searchResultSetItemArray2;}if(s.filter.dataSource.id==="Scientists"||s.filter.dataSource.id==="Mysterious_Sightings"){h=b.getChartResultSetItemsForLocations(r);e=b.sina._createChartResultSet({items:h,query:b.sina.createChartQuery({filter:f,dimension:"LOCATION"}),title:"Locations",type:''});d.push(e);}i=b.getSientistOrFolkloristFacet(s,r);h=i[0];j=i[1];e=b.sina._createChartResultSet({items:h,query:b.sina.createChartQuery({filter:f,dimension:j}),title:j.charAt(0).toUpperCase()+j.slice(1).toLowerCase()+"s",type:''});d.push(e);return d;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template.js":function(){sinaDefine(['./template_metadata','./template_details_folklorists','./template_details_legends','./template_details_publications'],function(t,a,b,c){"use strict";this.template_metadata=t;this.template_details_folklorists=a;this.template_details_legends=b;this.template_details_publications=c;return function(C){var g={};g.metadata=[];g.metadata2=[];g.metadata3=[];g.getMetadataById=function(l,k){var r=null;for(var i=0;i<l.length;i++){if(l[i].id===k){r=l[i];break;}}return r;};g.searchResultSetItemArray=[];g.searchResultSetItemArray2=[];g.searchResultSetItemArray3=[];g.chartResultSetArray=[];var d,e;g._init=function(m){var k=m.metadata;var l=m.metadata2;var n=m.metadata3;C.sina._createDataSource({id:"Folklorists",label:"Folklorist",labelPlural:"Folklorists",type:C.sina.DataSourceType.BusinessObject,attributesMetadata:k});C.sina._createDataSource({id:"Urban_Legends",label:"Urban Legend",labelPlural:"Urban Legends",type:C.sina.DataSourceType.BusinessObject,attributesMetadata:l});C.sina._createDataSource({id:"Publications",label:"Publication",labelPlural:"Publications",type:C.sina.DataSourceType.BusinessObject,attributesMetadata:n});};if(C.sina){g.metadata=t(C).metadata;g.metadata2=t(C).metadata2;g.metadata3=t(C).metadata3;}if(C.searchQuery&&C.searchQuery.filter&&C.searchQuery.filter.dataSource&&C.sina&&C.NavigationTarget&&C.sina.getDataSource("Folklorists")){var s=[];var f=C.searchQuery.filter.searchTerm;f=f.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var h=f.split(" ");for(var i=0;i<h.length;i++){var j=h[i];if(j.match(/\w/)!==null){s.push(j);}}d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Andrew McCain',valueFormatted:'Andrew McCain',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).george;C.addSuvLinkToSearchResultItem(e[10],null,s);g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Carol Mandelbaum',valueFormatted:'Carol Mandelbaum',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).shira;g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Ryan Anderson',valueFormatted:'Ryan Anderson',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).benjamin;g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Simon Kingston',valueFormatted:'Simon Kingston',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).richard;g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Cynthia MacDonald',valueFormatted:'Cynthia MacDonald',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).rosalie;g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Douglas Milford',valueFormatted:'Douglas Milford',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).bill;g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'Sewer Alligator',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).alligator;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e,defaultNavigationTarget:new C.NavigationTarget({label:'Alligators in the Sewers, Wikipedia',targetUrl:'https://en.wikipedia.org/wiki/Sewer_alligator',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'Slender Man',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).slenderman;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,detailAttributes:e,titleDescriptionAttributes:[],defaultNavigationTarget:new C.NavigationTarget({label:'Slender Man, Wikipedia',targetUrl:'https://en.wikipedia.org/wiki/Slender_Man',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'Chupacabra',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).chupacabra;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,detailAttributes:e,titleDescriptionAttributes:[],defaultNavigationTarget:new C.NavigationTarget({label:'Chupacabra, Wikipedia',targetUrl:'https://en.wikipedia.org/wiki/Chupacabra',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'Vanishing Hitchhiker',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).hitchhiker;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,detailAttributes:e,titleDescriptionAttributes:[],defaultNavigationTarget:new C.NavigationTarget({label:'Vanishing Hitchhiker, Wikipedia',targetUrl:'https://en.wikipedia.org/wiki/Vanishing_hitchhiker',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'Vanishing Hitchhiker',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).hitchhiker2;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,detailAttributes:e,titleDescriptionAttributes:[],defaultNavigationTarget:new C.NavigationTarget({label:'Journal Article "The Vanishing Hitchhiker" by Richard K. Beardsley and Cynthia MacDonald in the California Folklore Quarterly.',targetUrl:'https://www.jstor.org/stable/1495600',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'The Baby Train',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).babytrain;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,detailAttributes:e,titleDescriptionAttributes:[],defaultNavigationTarget:new C.NavigationTarget({label:"Baby Train, Wikipedia",targetUrl:'https://en.wikipedia.org/wiki/Baby_Train',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'Sewer Alligator',valueFormatted:'Sewer Alligator',valueHighlighted:'Sewer Alligator',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).alligatorbook;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'Sewer Alligator',titleHighlighted:'Sewer Alligator',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'Slender Man',valueFormatted:'Slender Man',valueHighlighted:'Slender Man',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).slendermanbook;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'Slender Man',titleHighlighted:'Slender Man',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'Chupacabra',valueFormatted:'Chupacabra',valueHighlighted:'Chupacabra',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).chupacabrabook;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'Chupacabra',titleHighlighted:'Chupacabra',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'Vanishing Hitchhiker',valueFormatted:'Vanishing Hitchhiker',valueHighlighted:'Vanishing Hitchhiker',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).hitchhikerbook;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'Vanishing Hitchhiker',titleHighlighted:'Vanishing Hitchhiker',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'Vanishing Hitchhiker',valueFormatted:'Vanishing Hitchhiker',valueHighlighted:'Vanishing Hitchhiker',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).hitchhiker2book;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'Vanishing Hitchhiker',titleHighlighted:'Vanishing Hitchhiker',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'The Baby Train',valueFormatted:'The Baby Train',valueHighlighted:'The Baby Train',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).babytrainbook;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'The Baby Train',titleHighlighted:'The Baby Train',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));}return g;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template2.js":function(){sinaDefine([],function(){"use strict";return function(c){var g={};g.metadata=[];g.metadata2=[];g.getMetadataById=function(l,a){var r=null;for(var i=0;i<l.length;i++){if(l[i].id===a){r=l[i];break;}}return r;};g.searchResultSetItemArray=[];g.searchResultSetItemArray2=[];g.chartResultSetArray=[];var t,d;g._init=function(m){var a=m.metadata;var b=m.metadata2;c.sina._createDataSource({id:"Scientists",label:"Scientist",labelPlural:"Scientists",type:c.sina.DataSourceType.BusinessObject,attributesMetadata:a});c.sina._createDataSource({id:"Mysterious_Sightings",label:"Mysterious Sighting",labelPlural:"Mysterious Sightings",type:c.sina.DataSourceType.BusinessObject,attributesMetadata:b});};if(c.sina){g.metadata=[c.sina._createAttributeMetadata({id:'SCIENTIST',label:'Scientist',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOCATION',label:'Location',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOC_4326',label:'LOC_4326',type:c.sina.AttributeType.GeoJson,usage:{type:'Detail',displayOrder:1},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SEX',label:'Sex',type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,hasDescription:true,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SEX_DESC',label:'Description for Gender',type:c.sina.AttributeType.String,usage:'detail',isSortable:false,isKey:false,isDescription:true,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DISCIPLINE',label:'Discipline',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DESC',label:'Descritption',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PIC',label:'picture',type:c.sina.AttributeType.ImageUrl,usage:'title',presentationUsage:'Thumbnail',format:'round',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SALARY',label:'Salary',type:c.sina.AttributeType.Integer,usage:'detail',isSortable:true,isQuantity:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'CURRENCY',label:'Currency',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isCurrency:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'HEIGHT',label:'Height',type:c.sina.AttributeType.Integer,usage:'detail',isSortable:true,isQuantity:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'UOM_HEIGHT',label:'Unit of Measure for Height Attribute',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isUnitOfMeasure:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PHONE',label:'Phone',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'EMAIL',label:'Email',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact})];g.metadata2=[c.sina._createAttributeMetadata({id:'CAPTION',label:'Caption',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:'title',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOCATION',label:'Location',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOC_4326',label:'LOC_4326',type:c.sina.AttributeType.GeoJson,usage:{type:'Detail',displayOrder:1},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SCIENTIST',label:'Scientist',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DESC',label:'Descritption',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,format:c.sina.AttributeFormatType.LongText,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PIC',label:'picture',type:c.sina.AttributeType.ImageUrl,usage:'title',presentationUsage:'Thumbnail',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'URL',label:'URL',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact})];}if(c.searchQuery&&c.searchQuery.filter&&c.searchQuery.filter.dataSource&&c.sina&&c.NavigationTarget&&c.sina.getDataSource("Scientists")){t=[c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Hannah White',valueFormatted:'Hannah White',metadata:g.getMetadataById(g.metadata,"SCIENTIST")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'2800',valueFormatted:'1000.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'175',valueFormatted:'175',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Galapagos',valueFormatted:'Galapagos',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'PHONE',valueHighlighted:'',isHighlighted:false,label:'Phone',value:'+1 212 6539539',valueFormatted:'+1 212 6539539',metadata:g.getMetadataById(g.metadata,"PHONE")}),c.sina._createSearchResultSetItemAttribute({id:'EMAIL',valueHighlighted:'',isHighlighted:false,label:'Contact',value:'hannah.white@acme.com',valueFormatted:'hannah.white@acme.com',metadata:g.getMetadataById(g.metadata,"EMAIL")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Hannah White (Field Office, Allagash, Maine)',value:'{ "type": "Point", "coordinates": [-69.040601, 47.082589] }',valueFormatted:'{ "type": "Point", "coordinates": [-69.040601, 47.082589] }',defaultNavigationTarget:c.sina._createNavigationTarget({label:'Send Mail',targetUrl:'mailto:hanna.white@acme.com'}),metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Multidisciplinary',valueFormatted:'Multidisciplinary',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Female',valueFormatted:'Female',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scientist_hannah.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scientist_hannah.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];g.searchResultSetItemArray.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Scientists"),titleAttributes:t,titleDescriptionAttributes:[],detailAttributes:d}));t=[c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Barry Williamson',valueFormatted:'Barry Williamson',metadata:g.getMetadataById(g.metadata,"SCIENTIST")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'3000',valueFormatted:'3000.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'188',valueFormatted:'188',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Cyprus',valueFormatted:'Off East Cyprus',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Barry Williamson (Offices)',value:'{ "type": "Point", "coordinates": [-118.236036, 34.050492] }',valueFormatted:'{ "type": "Point", "coordinates": [-118.236036, 34.050492] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Ancient History',valueFormatted:'Ancient History',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scientist_RobertSarmast.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scientist_RobertSarmast.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];g.searchResultSetItemArray.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Scientists"),titleAttributes:t,titleDescriptionAttributes:[],detailAttributes:d}));t=[c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Conrad Atkinson',valueFormatted:'Conrad Atkinson',metadata:g.getMetadataById(g.metadata,"SCIENTIST")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'3200',valueFormatted:'3200.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'165',valueFormatted:'165',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Baalbek',valueFormatted:'Baalbek, Lebanon',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Conrad Atkinson (NYU)',value:'{ "type": "Point", "coordinates": [-73.995589, 40.730355] }',valueFormatted:'{ "type": "Point", "coordinates": [-73.995589, 40.730355] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Archeology',valueFormatted:'Archeology',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/sitchin.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/sitchin.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];g.searchResultSetItemArray.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Scientists"),titleAttributes:t,titleDescriptionAttributes:[],detailAttributes:d}));t=[c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Roger Murdoch',valueFormatted:'Roger Murdoch',metadata:g.getMetadataById(g.metadata,"SCIENTIST")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'2100',valueFormatted:'2100.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'182',valueFormatted:'182',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Baalbek',valueFormatted:'Baalbek, Lebanon',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Roger Murdoch (Eridu Books)',value:'{ "type": "Point", "coordinates": [-1.387958, 50.933494] }',valueFormatted:'{ "type": "Point", "coordinates": [-1.387958, 50.933494] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Egyptology',valueFormatted:'Egyptology',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/alford.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/alford.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];g.searchResultSetItemArray.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Scientists"),titleAttributes:t,titleDescriptionAttributes:[],detailAttributes:d}));t=[c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Alan Cameron',valueFormatted:'Alan Cameron',metadata:g.getMetadataById(g.metadata,"SCIENTIST")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'1500',valueFormatted:'1500.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'195',valueFormatted:'195',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Gbekli Tepe',valueFormatted:'Gbekli Tepe, Turkey',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Alan Cameron (Institut fr Ur- und Frhgeschichte, Erlangen)',value:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',valueFormatted:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Prehistory',valueFormatted:'Prehistory',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/kschmidt.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/kschmidt.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];g.searchResultSetItemArray.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Scientists"),titleAttributes:t,titleDescriptionAttributes:[],detailAttributes:d}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'5123',valueFormatted:'5123.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'169',valueFormatted:'169',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Quote',value:'I heard the sound of a baby crying... I heard the sound of a baby crying... I heard the sound of a baby crying... I heard the sound of a baby crying... ',valueFormatted:'"I heard the sound of a baby crying... I heard the sound of a baby crying... I heard the sound of a baby crying... I heard the sound of a baby crying... "',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Galapagos',valueFormatted:'Galapagos',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Isabela Island, Ecuador',value:'{ "type": "Point", "coordinates": [-91.132139, -0.828628] }',valueFormatted:'{ "type": "Point", "coordinates": [-91.132139, -0.828628] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Hannah White',valueFormatted:'Hannah White',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/galapagos.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/galapagos.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:'Alien species pathways to the Galapagos Islands, Ecuador',targetUrl:'https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5597199/',target:'_blank'})}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'4300',valueFormatted:'4300.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'171',valueFormatted:'171',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Cyprus',valueFormatted:'Off East Cyprus',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Barry Williamson',valueFormatted:'Barry Williamson',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Atlantis, Off East Cyprus',value:'{ "type": "Point", "coordinates": [35.102514, 34.824097] }',valueFormatted:'{ "type": "Point", "coordinates": [35.102514, 34.824097] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Quote',value:'The discovery could mean a tourism bonanza for Cyprus once the word gets out',valueFormatted:'"The discovery could mean a tourism bonanza for Cyprus once the word gets out"',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/atlantis.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/atlantis.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:'Barry Williamson on the Hunt for Atlantis',targetUrl:'https://www.youtube.com/watch?v=6f8jzITECRM',target:'_blank'})}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Baalbek',valueFormatted:'Baalbek, Lebanon',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Conrad Atkinson',valueFormatted:'Conrad Atkinson',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Stone of the Pregnant Woman (Hajar al-Hibla), Baalbek, Lebanon',value:'{ "type": "Point", "coordinates": [36.199993, 33.999453] }',valueFormatted:'{ "type": "Point", "coordinates": [36.199993, 33.999453] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'it would be impossible for ancient humans with their limited technology to accomplish such a thing',valueFormatted:'it would be impossible for ancient humans with their limited technology to accomplish such a thing',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/megalith.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/megalith.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:'In The News: Baalbek',targetUrl:'http://www.sitchin.com/landplace.htm',target:'_blank'})}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Baalbek',valueFormatted:'Baalbek, Lebanon',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Roger Murdoch',valueFormatted:'Roger Murdoch',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Temple Compex, Baalbek, Lebanon',value:'{ "type": "Point", "coordinates": [36.204944, 34.006899] }',valueFormatted:'{ "type": "Point", "coordinates": [36.204944, 34.006899] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Was the temple platorm a huge landing site for the aliens who once visited our planet?',valueFormatted:'Was the temple platorm a huge landing site for the aliens who once visited our planet?',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/heliopolis.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/heliopolis.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:'The Mystery of the Stones at Baalbek',targetUrl:'http://www.eridu.co.uk/Author/Mysteries_of_the_World/Baalbek/baalbek2.html',target:'_blank'})}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Wycliffe Well',valueFormatted:'Wycliffe Well',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Hannah White',valueFormatted:'Hannah White',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Wycliffe Well, NT, Australia',value:'{ "type": "Point", "coordinates": [134.236761, -20.795279] }',valueFormatted:'{ "type": "Point", "coordinates": [134.236761, -20.795279] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Numerous people have reported seeing strange lights in the sky while staying a Wycliffe.',valueFormatted:'Numerous people have reported seeing strange lights in the sky while staying a Wycliffe.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/Wycliffe_Well.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/Wycliffe_Well.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:'Wycliffe Well Australia\'s premier UFO hotspot',targetUrl:'https://www.youtube.com/watch?v=hMDRHqcatyg',target:'_blank'})}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Gbekli Tepe',valueFormatted:'Gbekli Tepe',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Alan Cameron',valueFormatted:'Alan Cameron',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Gbekli Tepe, anlurfa',value:'{ "type": "Point", "coordinates": [38.855842, 37.217718] }',valueFormatted:'{ "type": "Point", "coordinates": [38.855842, 37.217718] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'11,000 year old stone structures that predate stonehenge by 6,000 years - crafted and arranged by prehistoric people who had not yet developed metal tools or even pottery; but no evidence that people resided there.',valueFormatted:'11,000 year old stone structures that predate stonehenge by 6,000 years - crafted and arranged by prehistoric people who had not yet developed metal tools or even pottery; but no evidence that people resided there.',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/Goebekli_Tepe_Urfa.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/Goebekli_Tepe_Urfa.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:"Gobekli Tepe: The World's First Temple?",targetUrl:'https://www.smithsonianmag.com/history/gobekli-tepe-the-worlds-first-temple-83613665/',target:'_blank'})}));}return g;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template_details_folklorists.js":function(){sinaDefine([],function(){"use strict";return function(c,g){var r={};r.george=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'2800',valueFormatted:'1000.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'175',valueFormatted:'175',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Schaumburg, Illinois',valueFormatted:'Schaumburg, Illinois',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'WEBSITE',valueHighlighted:'',isHighlighted:false,label:'Website',value:'https://www.abebooks.com/Journal-American-Folklore-Society-Vol-368/22552416159/bd',valueFormatted:'https://www.abebooks.com/Journal-American-Folklore-Society-Vol-368/22552416159/bd',metadata:g.getMetadataById(g.metadata,"WEBSITE")}),c.sina._createSearchResultSetItemAttribute({id:'SUMMARY',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'While most legends are based on rumors, embellished half truths or unsubstantiated claims, the legend of aligators in the sewers can be traced back to historical documentation.',valueFormatted:'While most legends are based on rumors, embellished half truths or unsubstantiated claims, the legend of aligators in the sewers can be traced back to historical documentation.',metadata:g.getMetadataById(g.metadata,"SUMMARY")}),c.sina._createSearchResultSetItemAttribute({id:'PHONE',valueHighlighted:'',isHighlighted:false,label:'Phone',value:'+1 212 6539539',valueFormatted:'+1 212 6539539',metadata:g.getMetadataById(g.metadata,"PHONE")}),c.sina._createSearchResultSetItemAttribute({id:'EMAIL',valueHighlighted:'',isHighlighted:false,label:'Contact',value:'andrew.mccain@acme.com',valueFormatted:'andrew.mccain@acme.com',metadata:g.getMetadataById(g.metadata,"EMAIL")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Andrew McCain (Field Office, Schaumburg, Illinois',value:'{ "type": "Point", "coordinates": [-69.040601, 47.082589] }',valueFormatted:'{ "type": "Point", "coordinates": [-69.040601, 47.082589] }',defaultNavigationTarget:c.sina._createNavigationTarget({label:'Send Mail',targetUrl:'mailto:andrew.mccain@acme.com'}),metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Alligator Legends',valueFormatted:'Alligator Legends',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata,"PUB")})];r.shira=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'3000',valueFormatted:'3000.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'188',valueFormatted:'188',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'University of Georgia',valueFormatted:'University of Georgia',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Carol Mandelbaum (Offices)',value:'{ "type": "Point", "coordinates": [-118.236036, 34.050492] }',valueFormatted:'{ "type": "Point", "coordinates": [-118.236036, 34.050492] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Entertainment and Media Studies',valueFormatted:'Entertainment and Media Studies',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Female',valueFormatted:'Female',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_chess.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_chess.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];r.benjamin=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'3200',valueFormatted:'3200.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'165',valueFormatted:'165',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Center for Inquiry (CFI), Amherst, New York',valueFormatted:'Center for Inquiry (CFI), Amherst, New York',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Center for Inquiry (CFI), Amherst, New York',value:'{ "type": "Point", "coordinates": [-73.995589, 40.730355] }',valueFormatted:'{ "type": "Point", "coordinates": [-73.995589, 40.730355] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Paranormal Investigations',valueFormatted:'Paranormal Investigations',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_radford.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_radford.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];r.richard=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'2100',valueFormatted:'2100.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'182',valueFormatted:'182',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Cripple Creek, Colorado',valueFormatted:'Cripple Creek, Colorado',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'University of California, Berkeley',value:'{ "type": "Point", "coordinates": [-1.387958, 50.933494] }',valueFormatted:'{ "type": "Point", "coordinates": [-1.387958, 50.933494] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Anthropologist',valueFormatted:'Anthropologist',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_beardfy.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_beardsley.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];r.rosalie=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'1500',valueFormatted:'1500.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'195',valueFormatted:'195',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Birthplace',value:'Des Plaines, Illinois',valueFormatted:'Des Plaines, Illinois',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Tulelake, California',value:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',valueFormatted:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Applied Anthropology',valueFormatted:'Applied Anthropology',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Female',valueFormatted:'Female',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_handkey.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_handkey.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];r.bill=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'1500',valueFormatted:'1500.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'195',valueFormatted:'195',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Birthplace',value:'Bundaberg, Australia',valueFormatted:'Bundaberg, Australia',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'A small town north of Sydney',value:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',valueFormatted:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Author and folklorist',valueFormatted:'Author and folklorist',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scott.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scott.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];return r;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template_details_legends.js":function(){sinaDefine([],function(){"use strict";return function(c,g){var r={};r.alligator=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'5123',valueFormatted:'5123.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'169',valueFormatted:'169',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Quote',value:'In "The World Beneath The City" (1959), Robert Daley describes the history of the problems encountered while developing the network of utilities beneath Manhattan island, and reports that sewer inspectors first saw aligators in 1935, and that their average length was about 2 feet.',valueFormatted:'In "The World Beneath The City" (1959), Robert Daley describes the history of the problems encountered while developing the network of utilities beneath Manhattan island, and reports that sewer inspectors first saw aligators in 1935, and that their average length was about 2 feet.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'NYC',valueFormatted:'NYC',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'New York City',value:'{ "type": "Point", "coordinates": [-91.132139, -0.828628] }',valueFormatted:'{ "type": "Point", "coordinates": [-91.132139, -0.828628] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Andrew McCain',valueFormatted:'Andrew McCain',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/alligator.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/alligator.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];r.slenderman=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'4300',valueFormatted:'4300.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'171',valueFormatted:'171',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'University of Georgia',valueFormatted:'University of Georgia',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Carol Mandelbaum',valueFormatted:'Carol Mandelbaum',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'University of Georgia',value:'{ "type": "Point", "coordinates": [35.102514, 34.824097] }',valueFormatted:'{ "type": "Point", "coordinates": [35.102514, 34.824097] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Slender Man is a fictional character that originated as an Internet meme created by Something Awful forums user Victor Surge in 2009, depicted as a thin, unnaturally tall man with a blank and usually featureless face and wearing a black suit, commonly said to stalk, abduct, or traumatize people, particularly children.',valueFormatted:'Slender Man is a fictional character that originated as an Internet meme created by Something Awful forums user Victor Surge in 2009, depicted as a thin, unnaturally tall man with a blank and usually featureless face and wearing a black suit, commonly said to stalk, abduct, or traumatize people, particularly children.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/slender_man.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/slender_man.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];r.chupacabra=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Puerto Rico',valueFormatted:'Puerto Rico',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Ryan Anderson',valueFormatted:'Ryan Anderson',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Chupacabra, sighting, Puerto Rico',value:'{ "type": "Point", "coordinates": [36.199993, 33.999453] }',valueFormatted:'{ "type": "Point", "coordinates": [36.199993, 33.999453] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'The first sightings of the Chupacabra were reported in Puerto Rico. The name originates from the their reported habit of attacking and drinking the blood of livestock, including goats.',valueFormatted:'The first sightings of the Chupacabra were reported in Puerto Rico. The name originates from the their reported habit of attacking and drinking the blood of livestock, including goats.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/chupacabra.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/chupacabra.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];r.hitchhiker=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'University of California, Berkeley',valueFormatted:'University of California, Berkeley',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Cynthia MacDonald',valueFormatted:'Cynthia MacDonald',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'University of California, Berkeley',value:'{ "type": "Point", "coordinates": [36.204944, 34.006899] }',valueFormatted:'{ "type": "Point", "coordinates": [36.204944, 34.006899] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'People traveling by vehicle encounter a hitchhiker who later vanishes without explanation, sometimes from the moving vehicle. The vanishing hitchhiker can also leave information that encourages the motorist to later try to make contact with them.',valueFormatted:'People traveling by vehicle encounter a hitchhiker who later vanishes without explanation, sometimes from the moving vehicle. The vanishing hitchhiker can also leave information that encourages the motorist to later try to make contact with them.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/hitchhiker.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/hitchhiker.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];r.hitchhiker2=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Cripple Creek, Colorado',valueFormatted:'Cripple Creek, Colorado',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Simon Kingston',valueFormatted:'Simon Kingston',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Wycliffe Well, NT, Australia',value:'{ "type": "Point", "coordinates": [134.236761, -20.795279] }',valueFormatted:'{ "type": "Point", "coordinates": [134.236761, -20.795279] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'The general public became widely aware of the legend after the publication of the book "The Vanishing Hitchhiker" (1981) in which the author, Harold Brunvan, suggests that the legend can be traced as far back as the 1870s and has parallels in Korea, Russia, China, and among Mormons and people living in Arkansas mountains.',valueFormatted:'The general public became widely aware of the legend after the publication of the book "The Vanishing Hitchhiker" (1981) in which the author, Harold Brunvan, suggests that the legend can be traced as far back as the 1870s and has parallels in Korea, Russia, China, and among Mormons and people living in Arkansas mountains.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/vanishing.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/vanishing.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];r.babytrain=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'A Small Town',valueFormatted:'A Small Town',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Douglas Milford',valueFormatted:'Douglas Milford',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'a little town on the coast, not too far north of Sydney',value:'{ "type": "Point", "coordinates": [38.855842, 37.217718] }',valueFormatted:'{ "type": "Point", "coordinates": [38.855842, 37.217718] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Legend has it there was a small town which had an unusually high birth rate because a train would pass through the center of town at 5 am and blow its whistle, waking up all the townsfolk. Since it was too late to go back to sleep and too early to get up, residents passed the time by cuddling up. This resulted in a mini baby-boom.',valueFormatted:'Legend has it there was a small town which had an unusually high birth rate because a train would pass through the center of town at 5 am and blow its whistle, waking up all the townsfolk. Since it was too late to go back to sleep and too early to get up, residents passed the time by cuddling up. This resulted in a mini baby-boom.',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/babytrain.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/babytrain.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];return r;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template_details_publications.js":function(){sinaDefine([],function(){"use strict";return function(c,g){var r={};r.alligatorbook=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Quote',value:'Robert Daley\'s "The World Beneath The City" (1959), a history of the problems said aware to be involved in developing the network of utilities beneath Manhattan island, aware of reports that sewer inspectors first saw aligators in 1935, and confirms that their average length was about 2 feet. ',valueFormatted:'Robert Daley\'s "The World Beneath The City" (1959), a history of the problems said aware to be involved in developing the network of utilities beneath Manhattan island, aware of reports that sewer inspectors first saw aligators in 1935, and confirms that their average length was about 2 feet. ',metadata:g.getMetadataById(g.metadata3,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Andrew McCain',valueFormatted:'Andrew McCain',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")})];r.slendermanbook=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Carol Mandelbaum',valueFormatted:'Carol Mandelbaum',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Slender Man is a fictional character that originated as an Internet meme created by Something Awful forums user Victor Surge in 2009, depicted as a thin, unnaturally tall man with a blank and usually featureless face and wearing a black suit, commonly said to stalk, abduct, or traumatize people, particularly children.',valueFormatted:'Slender Man is a fictional character that originated as an Internet meme created by Something Awful forums user Victor Surge in 2009, depicted as a thin, unnaturally tall man with a blank and usually featureless face and wearing a black suit, commonly said to stalk, abduct, or traumatize people, particularly children.',metadata:g.getMetadataById(g.metadata3,"DESC")})];r.chupacabrabook=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Ryan Anderson',valueFormatted:'Ryan Anderson',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:' The first purported sightings were reported in Puerto Rico. The name comes from the animal\'s reported habit of attacking and drinking the blood of livestock, including goats.',valueFormatted:' The first purported sightings were reported in Puerto Rico. The name comes from the animal\'s reported habit of attacking and drinking the blood of livestock, including goats.',metadata:g.getMetadataById(g.metadata3,"DESC")})];r.hitchhikerbook=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Cynthia MacDonald',valueFormatted:'Cynthia MacDonald',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'People traveling by vehicle meet with or are accompanied by a hitchhiker who subsequently vanishes without explanation, often from a moving vehicle. The vanishing hitchhiker can also leave some form of information that encourages the motorist to make subsequent contact.',valueFormatted:'People traveling by vehicle meet with or are accompanied by a hitchhiker who subsequently vanishes without explanation, often from a moving vehicle. The vanishing hitchhiker can also leave some form of information that encourages the motorist to make subsequent contact.',metadata:g.getMetadataById(g.metadata3,"DESC")})];r.hitchhiker2book=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Simon Kingston',valueFormatted:'Simon Kingston',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'The general public became widely aware of the legend after the publication of the book "The Vanishing Hitchhiker" (1981) in which the author, Harold Brunvan, suggests that the legend can be traced as far back as the 1870s and has parallels in Korea, Russia, China, and among Mormons and people living in Arkansas mountains.',valueFormatted:'The general public became widely aware of the legend after the publication of the book "The Vanishing Hitchhiker" (1981) in which the author, Harold Brunvan, suggests that the legend can be traced as far back as the 1870s and has parallels in Korea, Russia, China, and among Mormons and people living in Arkansas mountains.',metadata:g.getMetadataById(g.metadata3,"DESC")})];r.babytrainbook=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Douglas Milford',valueFormatted:'Douglas Milford',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Legend has it there was a small town which had an unusually high birth rate because a train would pass through the center of town at 5 am and blow its whistle, waking up all the townsfolk. Since it was too late to go back to sleep and too early to get up, residents passed the time by cuddling up. This resulted in a mini baby-boom.',valueFormatted:'Legend has it there was a small town which had an unusually high birth rate because a train would pass through the center of town at 5 am and blow its whistle, waking up all the townsfolk. Since it was too late to go back to sleep and too early to get up, residents passed the time by cuddling up. This resulted in a mini baby-boom.',metadata:g.getMetadataById(g.metadata3,"DESC")})];return r;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template_metadata.js":function(){sinaDefine([],function(){"use strict";return function(c){var r={};r.metadata=[c.sina._createAttributeMetadata({id:'FOLKLORIST',label:'Folklorist',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOCATION',label:'Location',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'WEBSITE',label:'Website',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0}},isURL:true,isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SUMMARY',label:'Summary',type:c.sina.AttributeType.String,format:c.sina.AttributeFormatType.LongText,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0}},isURL:true,isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOC_4326',label:'LOC_4326',type:c.sina.AttributeType.GeoJson,usage:{type:'Detail',displayOrder:1},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SEX',label:'Sex',type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,hasDescription:true,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SEX_DESC',label:'Description for Gender',type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:false,isKey:false,isDescription:true,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DISCIPLINE',label:'Discipline',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DESC',label:'Descritption',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PIC',label:'picture',type:c.sina.AttributeType.ImageUrl,usage:'title',presentationUsage:'Thumbnail',format:'round',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SALARY',label:'Salary',type:c.sina.AttributeType.Integer,usage:'detail',isSortable:true,isQuantity:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'CURRENCY',label:'Currency',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isCurrency:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'HEIGHT',label:'Height',type:c.sina.AttributeType.Integer,usage:'detail',isSortable:true,isQuantity:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'UOM_HEIGHT',label:'Unit of Measure for Height Attribute',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isUnitOfMeasure:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PHONE',label:'Phone',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PUB',label:'Publication',type:c.sina.AttributeType.ImageUrl,format:c.sina.AttributeFormatType.DocumentThumbnail,usage:{Title:'Title',AdvancedSearch:{displayOrder:0}},presentationUsage:'Thumbnail',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'EMAIL',label:'Email',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact})];r.metadata2=[c.sina._createAttributeMetadata({id:'CAPTION',label:'Caption',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:'title',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOCATION',label:'Location',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOC_4326',label:'LOC_4326',type:c.sina.AttributeType.GeoJson,usage:{type:'Detail',displayOrder:1},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'FOLKLORIST',label:'Folklorist',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DESC',label:'Descritption',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,format:c.sina.AttributeFormatType.LongText,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PIC',label:'picture',type:c.sina.AttributeType.ImageUrl,usage:'title',presentationUsage:'Thumbnail',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'URL',label:'URL',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact})];r.metadata3=[c.sina._createAttributeMetadata({id:'PUB',label:'Publication',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.ImageUrl,format:c.sina.AttributeFormatType.DocumentThumbnail,usage:{Title:'Title',AdvancedSearch:{displayOrder:0}},presentationUsage:'Thumbnail',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'FOLKLORIST',label:'Folklorist',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DESC',label:'Description',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,format:c.sina.AttributeFormatType.LongText,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact})];return r;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/NavigationTarget.js":function(){sinaDefine(['./SinaObject'],function(S){"use strict";return S.derive({_meta:{properties:{targetUrl:{required:true},label:{required:true},target:{required:false}}},performNavigation:function(p){p=p||{};var t=p.trackingOnly||false;if(!t){if(this.target){this.openURL(this.targetUrl,this.target);}else{this.openURL(this.targetUrl);}}},openURL:function(U,t){if(jQuery&&jQuery.sap&&jQuery.sap.openWindow){return jQuery.sap.openWindow(U,t);}return window.open(U,t,'noopener,noreferrer');},isEqualTo:function(o){if(!o){return false;}return this.targetUrl==o.targetUrl;}});});
},
	"sap/ushell/services/SmartNavigation.js":function(){(function(s,q){"use strict";s.ui.define(["sap/ushell/services/Container","sap/ushell/services/AppConfiguration","sap/ushell/services/Personalization","sap/ushell/services/URLParsing","sap/ushell/services/CrossApplicationNavigation","sap/ushell/services/_SmartNavigation/complements","sap/ushell/utils"],function(c,a,p,u,C,P,b){c=s.ushell.Container;u=c.getService("URLParsing");C=c.getService("CrossApplicationNavigation");p=c.getService("Personalization");
function d(o,e,f){return new S(o,e,f,P,a,p,u,C,b);}
d.hasNoAdapter=true;return d;});s.ushell.services.SmartNavigation=S;
function S(c,p,o,P,a,b,u,C,d){if(!S.instance){Object.defineProperty(S,"instance",{value:Object.create(null,{getLinks:{value:function(A){var e=C.getLinks(A);if(!P.isTrackingEnabled(o,d)){return q.when(e);}var f=a.getCurrentApplication();var F=f.sShellHash;var g=f.componentHandle;if(f.componentHandle){g=f.componentHandle.getInstance();}if(!F){q.sap.log.warning("Call to SmartNavigation#getLinks() simply "+"delegated to CrossApplicationNavigation#getLinks()"+" because oAppConfiguration#getCurrentApplication()#sShellHash"+" evaluates to undefined.");return e;}return q.when(e,P.getNavigationOccurrences(F,b,g,u)).then(function(l,n){if(n.length===0){return l;}return P.prepareLinksForSorting(l,n,u).sort(function(L,O){return O.clickCount-L.clickCount;});});}},toExternal:{value:function(A,e){var _=arguments;var D=P.getHashFromOArgs(A.target,u);var t=function(){return C.toExternal.apply(C,_);};if(!P.isTrackingEnabled(o,d)){return q.when(t());}var f=a.getCurrentApplication();var F=f.sShellHash;var g=f.componentHandle;if(f.componentHandle){g=f.componentHandle.getInstance();}if(!F){q.sap.log.warning("Current shell hash could not be identified. Navigation will not be tracked.",null,"sap.ushell.services.SmartNavigation");return q.when(t());}if(!D){q.sap.log.warning("Destination hash does not conform with the ushell guidelines. Navigation will not be tracked.",null,"sap.ushell.services.SmartNavigation");return q.when(t());}return P.recordNavigationOccurrences(F,D,b,g,u).then(t);}},hrefForExternal:{value:function(){var h=C.hrefForExternal.apply(C,arguments);return h;}},getPrimaryIntent:{value:function(){var e=C.getPrimaryIntent.apply(C,arguments);return e;}},trackNavigation:{value:function(A){if(!P.isTrackingEnabled(o,d)){q.sap.log.debug("Call to SmartNavigation#trackNavigation() ignored"+" because Service is not enabled via Configuration",null,"sap.ushell.services.SmartNavigation");return q.when(null);}var t=A.target;var e=a.getCurrentApplication();var f=e.sShellHash;var D;if(!f){q.sap.log.warning("Call to SmartNavigation#trackNavigation() simply ignored"+" because oAppConfiguration#getCurrentApplication()#sShellHash"+" evaluates to undefined.");return q.when(null);}D=P.getHashFromOArgs(t,u);if(!D){q.sap.log.warning("Navigation not tracked - no valid destination provided",null,"sap.ushell.services.SmartNavigation");return q.when(null);}q.sap.log.debug("Navigation to "+D+" was tracked out of "+f,null,"sap.ushell.services.SmartNavigation");return P.recordNavigationOccurrences(f,D,b,e.componentHandle.getInstance(),u);}},constructor:{value:S}})});}return S.instance;}
})(sap,jQuery);
},
	"sap/ushell/services/_SmartNavigation/complements.js":function(){(function(s){"use strict";var i=null;var c={STATISTIC_COLLECTION_WINDOW_DAYS:90,PERS_CONTAINER_KEY_PREFIX:"ushell.smartnav.",ONE_DAY_IN_MILLISECOND:24*60*60*1000};var h=Object.create(null,{"":{value:0|0}});s.ui.define([],function(){if(!i){i=Object.create(null,{getHashCode:{value:g,configurable:true},getBaseHashPart:{value:b,configurable:true},getHashFromOArgs:{value:d,configurable:true},getPersContainerKey:{value:e,configurable:true},getNavigationOccurrences:{value:f,configurable:true},prepareLinksForSorting:{value:p,configurable:true},mapClickCountsIntoLinkItems:{value:m,configurable:true},recordNavigationOccurrences:{value:r,configurable:true},updateHistoryEntryWithCurrentUsage:{value:u,configurable:true},isTrackingEnabled:{value:a,configurable:true}});Object.keys(c).forEach(function(n){Object.defineProperty(i,n,{value:c[n]});});}return i;});
function a(C,U){return U.isDefined(C)&&U.isDefined(C.config)&&U.isDefined(C.config.isTrackingEnabled)?C.config.isTrackingEnabled:false;}
function g(v){var j=v+"";return h[j]||(function(k){var H=0|0;while(k--){H=(H<<5)-H+(j.charCodeAt(k)|0);H|=0;}h[j]=H;return H;})(j.length);}
function b(U,I){var t=U.parseShellHash(I);if(t&&t.semanticObject&&t.action){return t.semanticObject+"-"+t.action;}throw"Invalid intent `"+I+"`";}
function d(o,U){if(!o){return null;}if(o.shellHash&&U.parseShellHash(o.shellHash)){return b(U,o.shellHash);}if(o.semanticObject&&o.action){return o.semanticObject+"-"+o.action;}return null;}
function e(j){return c.PERS_CONTAINER_KEY_PREFIX+g(j);}
function f(F,P,C,U){var j=e(F);return P.getContainer(j,{keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.HIGH,clientStorageAllowed:true},C).then(function(o){return o.getItemKeys().map(function(k){var l=o.getItemValue(k);return Object.keys(l.actions).map(function(n){var q=l.actions[n];return{intent:k+"-"+n,clickCount:q.dailyFrequency.reduce(function(t,v){return t+v;},0)};});}).reduce(function(E,k){Array.prototype.push.apply(E,k);return E;},[]);});}
function p(l,n,U){return m(l,n,U);}
function m(l,n,U){var N=Object.create(null);n.forEach(function(o){N[o.intent]=o;});l.forEach(function(L){var B=b(U,L.intent);var o=N[B];L.clickCount=o?o.clickCount:0;});return l;}
function r(F,t,P,C,U){var T=U.parseShellHash(t);var j=e(F);var k=T.semanticObject;var o;return P.getContainer(j,{keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.HIGH,clientStorageAllowed:true},C).then(function(l){o=l;return o.getItemValue(k);}).then(function(l){var n;var q=T.action;if(!l){l=new S();}n=l.actions[q];if(!n){n=new A();l.actions[q]=n;}u(l);u(n);return l;}).then(function(l){o.setItemValue(k,l);return o.save();});}
function u(H){var n;var t;var D;n=Date.now();t=n-H.latestVisit;D=Math.floor(t/c.ONE_DAY_IN_MILLISECOND);while(D--){H.dailyFrequency.unshift(0);if(H.dailyFrequency.length>c.STATISTIC_COLLECTION_WINDOW_DAYS){H.dailyFrequency.pop();}}++H.dailyFrequency[0];H.latestVisit=n;return H;}
function S(){return{actions:{},latestVisit:Date.now(),dailyFrequency:[0]};}
function A(){return{latestVisit:Date.now(),dailyFrequency:[0]};}
})(sap);
},
/*
 * Copyright (c) 2009-2017 SAP SE, All Rights Reserved
 *
 * CDM Bootstrap script for LOCAL TESTING only.
 *
 * In a development environment, this script serves as the root of the CDM
 * bootstrap. And it will load all CDM bootstrap modules and the SAPUI5 modules
 * each as a single requested resource (no preloads and no bundling).
 */
	"sap/ushell/bootstrap/appFinder.js":function(){(function(){"use strict";var b,B=document.querySelector("script[src$=\"sap/ushell/bootstrap/appFinder.js\"]");if(!B){throw new Error("cdm.js: could not identify homepage bootstrap script tag!");}b=B.src.match(/(.*\/)sap\/ushell\/bootstrap\/appFinder\.js$/i)[1];window["sap-ui-config"]={resourceroots:{"":b},"xx-async":true};
function l(u,c){var p=u.length,e=0;function a(E){p--;if(E.type==='error'){e++;}E.target.removeEventListener("load",a);E.target.removeEventListener("error",a);if(p===0&&e===0&&c){c();}}for(var i=0;i<u.length;i++){var s=document.createElement("script");s.addEventListener("load",a);s.addEventListener("error",a);s.src=b+u[i];document.head.appendChild(s);}}
l(["sap/ui/thirdparty/baseuri.js","sap/ui/thirdparty/es6-promise.js","sap/ui/thirdparty/es6-string-methods.js"],function(){l(["ui5loader.js"],function(){l(["ui5loader-autoconfig.js"],function(){sap.ui.require(["sap/ushell/bootstrap/appfinder/appFinder-dev"],function(c){sap.ui.require(["sap/ui/core/Core"],function(a){a.boot();});});});});});}());
},
	"sap/ushell/bootstrap/cdm.js":function(){(function(){"use strict";var b,B=document.querySelector("script[src$=\"sap/ushell/bootstrap/cdm.js\"]");if(!B){throw new Error("cdm.js: could not identify cdm bootstrap script tag!");}b=B.src.match(/(.*\/)sap\/ushell\/bootstrap\/cdm\.js$/i)[1];
function l(u,c){var p=u.length,e=0;function a(E){p--;if(E.type==='error'){e++;}E.target.removeEventListener("load",a);E.target.removeEventListener("error",a);if(p===0&&e===0&&c){c();}}for(var i=0;i<u.length;i++){var s=document.createElement("script");s.addEventListener("load",a);s.addEventListener("error",a);s.src=b+u[i];document.head.appendChild(s);}}
l(["sap/ui/thirdparty/baseuri.js","sap/ui/thirdparty/es6-promise.js","sap/ui/thirdparty/es6-string-methods.js"],function(){l(["ui5loader.js"],function(){l(["sap/ushell/bootstrap/ui5loader-config.js"],function(){l(["ui5loader-autoconfig.js"],function(){sap.ui.require(["sap/ushell/bootstrap/cdm/cdm-def-dev"],function(c){sap.ui.require(["sap/ui/core/Core"],function(a){a.boot();});});});});});});}());
},
	"sap/ushell/bootstrap/homepage.js":function(){(function(){"use strict";var b,B=document.querySelector("script[src$=\"sap/ushell/bootstrap/homepage.js\"]");if(!B){throw new Error("cdm.js: could not identify homepage bootstrap script tag!");}b=B.src.match(/(.*\/)sap\/ushell\/bootstrap\/homepage\.js$/i)[1];window["sap-ui-config"]={resourceroots:{"":b},"xx-async":true};
function l(u,c){var p=u.length,e=0;function a(E){p--;if(E.type==='error'){e++;}E.target.removeEventListener("load",a);E.target.removeEventListener("error",a);if(p===0&&e===0&&c){c();}}for(var i=0;i<u.length;i++){var s=document.createElement("script");s.addEventListener("load",a);s.addEventListener("error",a);s.src=b+u[i];document.head.appendChild(s);}}
l(["sap/ui/thirdparty/baseuri.js","sap/ui/thirdparty/es6-promise.js","sap/ui/thirdparty/es6-string-methods.js"],function(){l(["ui5loader.js"],function(){l(["ui5loader-autoconfig.js"],function(){sap.ui.require(["sap/ushell/bootstrap/homepage/homepage-dev"],function(c){sap.ui.require(["sap/ui/core/Core"],function(a){a.boot();});});});});});}());
},
/*
 * Copyright (c) 2009-2017 SAP SE, All Rights Reserved
 *
 * This module configures the ui5loader in the way that ushell needs.
 */
	"sap/ushell/bootstrap/ui5loader-config.js":function(){(function(){"use strict";var u=window.sap&&window.sap.ui&&window.sap.ui.loader;if(!u){throw new Error("FLP bootstrap: ui5loader is needed, but could not be found");}var c={},s=document.getElementById("sap-ui-bootstrap"),S=s&&s.getAttribute("src"),r=/^((?:.*\/)?resources\/~\d{14}~\/)/,b;if(S&&r.test(S)){b=r.exec(S)[1];window["sap-ui-config"]=window["sap-ui-config"]||{};window["sap-ui-config"]["resourceRoots"]=window["sap-ui-config"]["resourceRoots"]||{};window["sap-ui-config"]["resourceRoots"][""]=b;}u.config(c);}());
}
},"sap/ushell/library-preload"
);
//# sourceMappingURL=library-preload.js.map