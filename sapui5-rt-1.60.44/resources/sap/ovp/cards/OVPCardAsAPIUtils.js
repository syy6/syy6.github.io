sap.ui.define(["jquery.sap.global"],function(q){"use strict";var s=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line","sap.ovp.cards.error"];function g(){return s;}function e(m,d,E){var f={};f.message=m;if(E){f._oError=E;f.getActualError=function(){return f._oError;};}q.sap.log.error(f.message);d(f);}function c(C){var d=false;var O=C.getOwnerComponent();if(!!O){var f=O.getComponentData();if(!!f&&f.ovpCardsAsApi){d=true;}}return d;}function r(C,d){var m=d.manifest;var f;for(var h in m.cards){f=h;}var i=m.cards[f];if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.settings.chartAnnotationPath=C.chartAnnotationPath;i.settings.navigation=C.navigation;}if(C.entitySet){i.settings.entitySet=C.entitySet;}i.settings.annotationPath=C.annotationPath;i.settings.dynamicSubtitleAnnotationPath=C.dynamicSubtitleAnnotationPath;i.settings.presentationAnnotationPath=C.presentationAnnotationPath;i.settings.selectionAnnotationPath=C.selectionAnnotationPath;i.settings.selectionPresentationAnnotationPath=C.selectionPresentationAnnotationPath;i.settings.kpiAnnotationPath=C.kpiAnnotationPath;i.settings.dataPointAnnotationPath=C.dataPointAnnotationPath;i.settings.identificationAnnotationPath=C.identificationAnnotationPath;i.settings.headerAnnotationPath=C.headerAnnotationPath;i.settings.selectedKey=C.selectedKey;if(i){m.cards[f]=i;o.createCardComponent(d.parentView,m,d.containerId,d.selectionVariant);}}function _(C){var d=true;if(C.template==="sap.ovp.cards.error"||(C.template==="sap.ovp.cards.linklist"&&C.settings.staticContent)){d=false;}return d;}function a(C,S){var f=[],p=[],i,j;var d=S.getSelectOptionsPropertyNames();for(i=0;i<d.length;i++){var h=S.getSelectOption(d[i]);if(h&&h.length>0){for(j=0;j<h.length;j++){if(h[j]){var F={path:d[i],operator:h[j].Option,value1:h[j].Low,sign:h[j].Sign};if(h[j].High){F.value2=h[j].High;}f.push(F);}}}}var P=S.getParameterNames();for(i=0;i<P.length;i++){var k={path:P[i],value:S.getParameter(P[i])};p.push(k);}C.settings.filters=f;C.settings.parameters=p;return C;}function b(v,m,C,S){return new Promise(function(d,f){var h,i,M="";if(!!m){for(var j in m.cards){if(m.cards.hasOwnProperty(j)){h=m.cards[j];i=j;}}if(!!h&&!!i){if(!!h.template&&!!h.settings&&(!!h.model||!_(h))){if(s.indexOf(h.template)!==-1){if(!!C&&typeof C==='string'){if(!!v){var k=(!h.model)?undefined:v.getModel(h.model);var l;if(!_(h)){l=Promise.resolve();}else{l=k.getMetaModel().loaded();}l.then(function(){var I=false;if(S){h=a(h,S);I=true;}h.settings.ignoreSelectionVariant=I;var n={async:true,name:h.template,componentData:{model:k,ovpCardsAsApi:true,parentView:v,manifest:m,containerId:C,selectionVariant:S,showDateInRelativeFormat:m.showDateInRelativeFormat,disableTableCardFlexibility:m.disableTableCardFlexibility,template:h.template,i18n:v.getModel("@i18n"),cardId:i,settings:h.settings,appComponent:null,mainComponent:null}};sap.ui.component(n).then(function(p){var t=v.byId(C);if(!!t){var O=t.getComponentInstance();p.setModel(k);t.setComponent(p);if(O){setTimeout(function(){O.destroy();},0);}d(true);}else{M="Component Container '"+C+"' is not present in the current View";e(M,f);}},function(E){M="Component creation failed";e(M,f,E);});},function(E){M="MetaModel was not loaded";e(M,f,E);});}else{M="First argument oView is null";e(M,f);}}else{M="ContainerId should be of type string and not null";e(M,f);}}else{M=h.template+" card type is not supported in the API";e(M,f);}}else{M="Cards template or model or settings are not defined";e(M,f);}}else{M="Cards manifest entry or cardId is null";e(M,f);}}else{M="Second argument oManifest is null";e(M,f);}});}var o={createCardComponent:b,recreateCard:r,checkIfAPIIsUsed:c,getSupportedCardTypes:g};return o;},true);
