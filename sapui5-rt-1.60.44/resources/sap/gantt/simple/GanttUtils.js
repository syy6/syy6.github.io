/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/Core","sap/gantt/misc/Utility","sap/ui/core/format/DateFormat","sap/ui/core/Locale"],function(q,L,C,U,D,a){"use strict";var c={};var G={SHAPE_ID_DATASET_KEY:"data-sap-gantt-shape-id",ROW_ID_DATASET_KEY:"data-sap-gantt-row-id",CONNECTABLE_DATASET_KEY:"data-sap-gantt-connectable",SELECT_FOR_DATASET_KEY:"sap-gantt-select-for",SHAPE_CONNECT_FOR_DATASET_KEY:"sap-gantt-shape-connect-for",SHAPE_CONNECT_INDICATOR_WIDTH:10,shapeElementById:function(s,g){var o=window.document.getElementById(g),S=o.querySelector("g.sapGanttChartShapes");var n=S.querySelectorAll("["+G.SHAPE_ID_DATASET_KEY+"='"+s+"']");var e=n[0];if(e){return q(e).control(0);}return null;},getValueX:function(s){var n;var p=s.getMetadata().getProperty("x");if(p){n=s.getProperty(p.name);if(n!==null&&n!==undefined){return n;}}var r=C.getConfiguration().getRTL(),t=r?(s.getEndTime()||s.getTime()):s.getTime();if(t){n=s.getXByTime(t);}if(!q.isNumeric(n)){L.warning("couldn't convert timestamp to x with value: "+t);}return n;},getRowInstance:function(e,t){var r=q(e.target).closest("rect.sapGanttBackgroundSVGRow").data("sapUiIndex");if(r!=null){return t.getRows()[r];}},_get2dContext:function(f,F){if(!c.context){c.context=document.createElement('canvas').getContext("2d");}if(c.fontSize!==f||c.fontFamily!==F){c.context.font=f+"px "+F;c.fontSize=f;c.fontFamily=F;}return c.context;},getShapeTextWidth:function(t,f,F){return this._get2dContext(f,F).measureText(t).width;},getSelectedTableRowSettings:function(t,s){var A=t.getRows(),f=t.getFirstVisibleRow();if(A.length===0){return null;}var F=A[0].getIndex();var i=s-f;if(F!==f){i+=Math.abs(F-f);}var r=A[i];return r.getAggregation("_settings");},updateGanttRows:function(d,r,i){var g=d.getParent().getParent();var $=q(document.getElementById(g.getId()+"-svg")),b=$.find("rect.sapGanttBackgroundSVGRow");b.eq(i).toggleClass("sapGanttBackgroundSVGRowSelected",r[i].selected);b.eq(i).toggleClass("sapGanttBackgroundSVGRowHovered",r[i].hovered);},getShapesWithUid:function(s,S){var e=function(b){var p=U.parseUid(b),d=p.shapeId;var f=["[id='",s,"']"," ["+G.SHAPE_ID_DATASET_KEY+"='",d,"']"].join("");return q(f).control().filter(function(o){return o.getShapeUid()===b;})[0];};var E=S.map(e);return E;},getTimeFormaterBySmallInterval:function(g){var A=g.getAxisTimeStrategy(),s=A.getTimeLineOption().smallInterval,u=s.unit;var o=A.getCalendarType(),b=A.getLocale()?A.getLocale():new a(C.getConfiguration().getLanguage().toLowerCase());var f="yyyyMMMddhhms";if(!(u===sap.gantt.config.TimeUnit.minute||u===sap.gantt.config.TimeUnit.hour)){f="yyyyMMMdd";}var F=D.getDateTimeInstance({format:f,style:s.style,calendarType:o},s.locale?new a(s.locale):b);return F;}};return G;},true);
