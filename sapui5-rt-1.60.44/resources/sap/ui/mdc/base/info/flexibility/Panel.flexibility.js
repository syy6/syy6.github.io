/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2018 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/ui/fl/changeHandler/Base'],function(B){"use strict";return{createChanges:function(p,d){return d.filter(function(D){return!sap.ui.getCore().byId(D.id);}).map(function(D){return{selectorControl:p,changeSpecificData:{changeType:"createItem",content:{id:D.id}}};});},createItem:{layers:{USER:true},changeHandler:{applyChange:function(c,p,P){return new Promise(function(r){p.getModel();sap.ui.require(['sap/ui/mdc/base/info/PanelItem',P.modifier.getProperty(p,"metadataHelperPath")],function(a,M){if(P.modifier.bySelector(c.getContent().id,P.appComponent,P.view)){return B.markAsNotApplicable("applyChange of createItem: the item with id "+c.getContent().id+" is already existing and therefore can not be created.",true);}var m=M.retrieveAllMetadata(p).filter(function(o){return o.isMain!==true;});var i=function(s,I){var f=-1;I.some(function(d,e){if(d.getId()===s){f=e;return true;}});return f;};var I=P.modifier.getAggregation(p,"items");var b=-1;var o=null;m.some(function(e){var f=i(e.id,I);if(f>-1){b=f;}if(e.id===c.getContent().id){o=e;return true;}});if(o){var d=P.modifier.createControl("sap.ui.mdc.base.info.PanelItem",P.appComponent,P.view,o.id,{text:o.text,description:o.description,href:o.href,target:o.target,icon:o.icon,isMain:o.isMain,visible:o.visible});P.modifier.insertAggregation(p,"items",d,b+1);}return r();});});},revertChange:function(c,p,P){var i=P.modifier.bySelector(c.getContent().id,P.appComponent,P.view);if(!i){return B.markAsNotApplicable("revertChange of createItem: the item with id "+c.getContent().id+" is not existing and therefore can not be removed.",true);}P.modifier.removeAggregation(p,"items",i);},completeChangeContent:function(c,s){}}}};},true);
