console.log("MataiLoaderWorker started.");var scriptDirectory=self.location.href.slice(0,self.location.href.lastIndexOf("/")+1);self.importScripts(scriptDirectory+"thirdparty/matai.js");sap.ve.matai.createRuntime({prefixURL:scriptDirectory+"thirdparty/"}).then(function(m){"use strict";console.log("MataiLoaderWorker runtime created.");function S(s){this.sceneBuilderId=s;}S.prototype.createNode=function(i){self.postMessage({sceneBuilderId:this.sceneBuilderId,method:"createNode",args:[i]},[i.matrix.buffer]);};S.prototype.createMesh=function(i){var t=[i.boundingBox.buffer];if(i.matrix){t.push(i.matrix.buffer);}self.postMessage({sceneBuilderId:this.sceneBuilderId,method:"createMesh",args:[i]},t);};S.prototype.setMeshGeometry=function(i){var t=[i.data.index.buffer,i.data.position.buffer];if(i.data.normal){t.push(i.data.normal.buffer);}if(i.data.uv){t.push(i.data.uv.buffer);}self.postMessage({sceneBuilderId:this.sceneBuilderId,method:"setMeshGeometry",args:[i]},t);};S.prototype.insertMesh=function(n,a){self.postMessage({sceneBuilderId:this.sceneBuilderId,method:"insertMesh",args:[n,a]});};S.prototype.createCamera=function(i){var t=[i.origin.buffer,i.up.buffer,i.target.buffer];if(i.matrix){t.push(i.matrix.buffer);}self.postMessage({sceneBuilderId:this.sceneBuilderId,method:"createCamera",args:[i]},t);};S.prototype.insertCamera=function(n,c){self.postMessage({sceneBuilderId:this.sceneBuilderId,method:"insertCamera",args:[n,c]});};S.prototype.createMaterial=function(i){var t=[i.ambient.buffer,i.diffuse.buffer,i.specular.buffer,i.emissive.buffer];if(i.linestyle){t.push(i.linestyle.color.buffer,i.linestyle.dashPattern.buffer);}if(i.textures){i.textures.forEach(function(a){t.push(a.matrix.buffer);});}self.postMessage({sceneBuilderId:this.sceneBuilderId,method:"createMaterial",args:[i]},t);};S.prototype.createImage=function(i){self.postMessage({sceneBuilderId:this.sceneBuilderId,method:"createImage",args:[i]},[i.data.buffer]);};S.prototype.progress=function(p){self.postMessage({sceneBuilderId:this.sceneBuilderId,method:"progress",args:[p]});};self.onmessage=function(e){var d=e.data;switch(d.method){case"loadSceneFromArrayBuffer":var p=new S(d.sceneBuilderId);m.loadSceneFromArrayBuffer(p,d.buffer,d.fileName,null,d.sourceLocation);break;default:break;}};self.postMessage({ready:true});console.log("MataiLoaderWorker initialized.");});console.log("MataiLoaderWorker starting runtime.");
