sap.ui.define(["jquery.sap.global","./Generator","./Coder","./Commands"],function(q,G,C,c){"use strict";var t=function(a){if(Array.isArray(a)){var b=Array(a.length);for(var i=0;i<a.length;i++){b[i]=a[i];}return b;}else{var d=[];a.forEach(function(v){d.push(v);});return d;}};var R=function(){var m=200;var d=200;var e;var f;var i;var g;var h;this.init=function(){e=new Set();f=new Set();i=new Set();h=new Map();g=[];};this.init();this.pushMeshIds=function(a){e=new Set([].concat(t(e),t(a)));};this.pushMaterialIds=function(a){f=new Set([].concat(t(f),t(a)));};this.pushImageIds=function(a){i=new Set([].concat(t(i),t(a)));};this.pushGeometryIds=function(j){j.forEach(function(p,a){h.set(a,p);g.push(a);});g.sort(function(a,b){return h.get(a)-h.get(b);});};this.canGenerateCommand=function(){return e.size>0||f.size>0||i.size>0||g.length>0;};this.generateRequestCommand=function(a,b){var j,k;var l={};if(e.size>0){k=s(e,m);if(k){l.command=G.createGetMeshCommand(k,b);l.method=c.getMesh;}}else if(f.size>0){k=s(f,d);if(k){l.command=G.createGetMaterialCommand(k,b);l.method=c.getMaterial;}}else if(i.size>0){j=i.values().next().value;i.delete(j);l.command=G.createGetImageCommand([j],b);l.method=c.getImage;l.resource=j;}else if(g.length>0){j=g.pop();h.delete(j);l.command=G.createGetGeometryCommand([j],b);l.method=c.getGeometry;l.resource=j;}if(l.command){if(!a){l.command=C.encode(l.command);}return l;}return null;};function s(a,b){if(a.size===0){return null;}var j=[];a.forEach(function(v){j.push(v);});var k=j.slice(0,b);var _=true;var l=false;var n;var o;var p;try{for(o=k[Symbol.iterator]();!(_=(p=o.next()).done);_=true){var r=p.value;a.delete(r);}}catch(u){l=true;n=u;}finally{try{if(!_&&o.return){o.return();}}finally{if(l){throw n;}}}return k;}};return R;});
