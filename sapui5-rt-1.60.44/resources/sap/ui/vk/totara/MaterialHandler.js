sap.ui.define(["jquery.sap.global","./TotaraUtils"],function(q,T){"use strict";var M=function(){};M.setMaterial=function(s,c){if(T.checkError(c)){return c;}var m=c.materials;var r={imageIdSet:new Set()};for(var i=0;i<m.length;i++){var a=m[i];var b=[];b=s.sceneBuilder.createMaterial(a);if(b.length){for(var d=0;d<b.length;d++){var p=b[d];var t=s.texturesToUpdate;var e=t.get(p.imageId);if(!e){e=[];t.set(p.imageId,e);}e.push({textureType:p.textureType,materialId:a.id});r.imageIdSet.add(p.imageId);}}var v=s.contextMap.values();var f=v.next();while(!f.done){var g=f.value;f=v.next();var n=g.materialIdNodeListMapForOpacityUpdate.get(a.id);if(n){for(var j=0;j<n.length;j++){s.sceneBuilder.applyNodeOpacityToSubmeshes(n[j],g.sceneId,a.id);}g.materialIdNodeListMapForOpacityUpdate.delete(a.id);}}s.materialIdsToRequest.delete(a.id);}return r;};M.updateTexture=function(s,a){var t=s.texturesToUpdate.get(a);if(t){for(var i=0,b=t.length;i<b;i++){var c=t[i];s.sceneBuilder.updateTextureMap(c.materialId,c.textureType);}s.texturesToUpdate.delete(a);}};return M;});
