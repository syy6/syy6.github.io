/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/Device','sap/ui/core/Control','sap/ui/core/Element','sap/ui/core/IconPool','sap/ui/core/util/PasteHelper','sap/ui/model/ChangeReason','sap/ui/model/Filter','sap/ui/model/SelectionModel','sap/ui/model/Sorter','sap/ui/model/BindingMode','./Column','./Row','./library','./TableUtils','./TableExtension','./TableAccExtension','./TableKeyboardExtension','./TablePointerExtension','./TableScrollExtension','./TableDragAndDropExtension',"./TableRenderer","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/UriParameters"],function(D,C,E,I,P,a,F,S,b,B,c,R,d,T,e,f,g,h,j,k,m,q,L,U){"use strict";var G=d.GroupEventType,N=d.NavigationMode,n=d.SelectionMode,o=d.SelectionBehavior,p=d.SortOrder,V=d.VisibleRowCountMode;var M=5;var r=C.extend("sap.ui.table.Table",{metadata:{library:"sap.ui.table",dnd:true,properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'auto'},rowHeight:{type:"int",group:"Appearance",defaultValue:null},columnHeaderHeight:{type:"int",group:"Appearance",defaultValue:null},columnHeaderVisible:{type:"boolean",group:"Appearance",defaultValue:true},visibleRowCount:{type:"int",group:"Appearance",defaultValue:10},firstVisibleRow:{type:"int",group:"Appearance",defaultValue:0},selectionMode:{type:"sap.ui.table.SelectionMode",group:"Behavior",defaultValue:n.MultiToggle},selectionBehavior:{type:"sap.ui.table.SelectionBehavior",group:"Behavior",defaultValue:o.RowSelector},selectedIndex:{type:"int",group:"Appearance",defaultValue:-1},editable:{type:"boolean",group:"Behavior",defaultValue:true},navigationMode:{type:"sap.ui.table.NavigationMode",group:"Behavior",defaultValue:N.Scrollbar,deprecated:true},threshold:{type:"int",group:"Appearance",defaultValue:100},enableColumnReordering:{type:"boolean",group:"Behavior",defaultValue:true},enableGrouping:{type:"boolean",group:"Behavior",defaultValue:false},showColumnVisibilityMenu:{type:"boolean",group:"Appearance",defaultValue:false},showNoData:{type:"boolean",group:"Appearance",defaultValue:true},visibleRowCountMode:{type:"sap.ui.table.VisibleRowCountMode",group:"Appearance",defaultValue:V.Fixed},minAutoRowCount:{type:"int",group:"Appearance",defaultValue:5},fixedColumnCount:{type:"int",group:"Appearance",defaultValue:0},fixedRowCount:{type:"int",group:"Appearance",defaultValue:0},fixedBottomRowCount:{type:"int",group:"Appearance",defaultValue:0},enableColumnFreeze:{type:"boolean",group:"Behavior",defaultValue:false},enableCellFilter:{type:"boolean",group:"Behavior",defaultValue:false},showOverlay:{type:"boolean",group:"Appearance",defaultValue:false},enableSelectAll:{type:"boolean",group:"Behavior",defaultValue:true},enableCustomFilter:{type:"boolean",group:"Behavior",defaultValue:false},enableBusyIndicator:{type:"boolean",group:"Behavior",defaultValue:false},rowActionCount:{type:"int",group:"Appearance",defaultValue:0},alternateRowColors:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"columns",aggregations:{title:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},footer:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false,deprecated:true},extension:{type:"sap.ui.core.Control",multiple:true,singularName:"extension"},columns:{type:"sap.ui.table.Column",multiple:true,singularName:"column",bindable:"bindable"},rows:{type:"sap.ui.table.Row",multiple:true,singularName:"row",bindable:"bindable",selector:"#{id}-tableCCnt",dnd:true},noData:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},rowActionTemplate:{type:"sap.ui.table.RowAction",multiple:false},rowSettingsTemplate:{type:"sap.ui.table.RowSettings",multiple:false},contextMenu:{type:"sap.ui.core.IContextMenu",multiple:false}},associations:{groupBy:{type:"sap.ui.table.Column",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{rowSelectionChange:{parameters:{rowIndex:{type:"int"},rowContext:{type:"object"},rowIndices:{type:"int[]"},selectAll:{type:"boolean"},userInteraction:{type:"boolean"}}},columnSelect:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},columnResize:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},width:{type:"sap.ui.core.CSSSize"}}},columnMove:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},newPos:{type:"int"}}},sort:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},sortOrder:{type:"sap.ui.table.SortOrder"},columnAdded:{type:"boolean"}}},filter:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},value:{type:"string"}}},group:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},columnVisibility:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},visible:{type:"boolean"}}},cellClick:{allowPreventDefault:true,parameters:{cellControl:{type:"sap.ui.core.Control"},cellDomRef:{type:"Object"},rowIndex:{type:"int"},columnIndex:{type:"int"},columnId:{type:"string"},rowBindingContext:{type:"sap.ui.model.Context"}}},cellContextmenu:{allowPreventDefault:true,parameters:{cellControl:{type:"sap.ui.core.Control"},cellDomRef:{type:"Object"},rowIndex:{type:"int"},columnIndex:{type:"int"},columnId:{type:"string"},rowBindingContext:{type:"sap.ui.model.Context"}},deprecated:true},beforeOpenContextMenu:{allowPreventDefault:true,parameters:{rowIndex:{type:"int"},columnIndex:{type:"int"},contextMenu:{type:"sap.ui.core.IContextMenu"}}},columnFreeze:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},customFilter:{column:{type:"sap.ui.table.Column"},value:{type:"string"}},firstVisibleRowChanged:{firstVisibleRow:{type:"int"}},busyStateChanged:{busy:{type:"boolean"}},paste:{allowPreventDefault:true,parameters:{data:{type:"string[][]"}}}},designtime:"sap/ui/table/designtime/Table.designtime"}});I.insertFontFaceStyle();r.prototype.init=function(){this._iBaseFontSize=parseFloat(q("body").css("font-size"))||16;this._bRtlMode=sap.ui.getCore().getConfiguration().getRTL();this._bIsFlexItem=false;this._attachExtensions();this._bLazyRowCreationEnabled=new U(window.location.href).get('sap-ui-xx-table-lazyrowcreation')!=="false";this._bRowsBeingBound=false;this._bContextsRequested=false;this._bContextsAvailable=false;this._aRowClones=[];this._bRowAggregationInvalid=true;this._mTimeouts={};this._mAnimationFrames={};this._bHideStandardTooltips=false;this._aRowHeights=[];this._iRenderedFirstVisibleRow=0;this._aSortedColumns=[];this._performUpdateRows=T.throttle(function(i){this._updateBindingContexts();if(this._bInvalid){return;}this._getAccExtension().updateAccForCurrentCell(i);this._updateTableContent();this._updateSelection();this._aRowHeights=this._collectRowHeights(false);this._updateRowHeights(this._collectRowHeights(true),true);this._updateRowHeights(this._aRowHeights,false);if(T.isVariableRowHeightEnabled(this)){this._iRenderedFirstVisibleRow=this._getFirstRenderedRowIndex();}this._getScrollExtension().updateVerticalScrollbarVisibility();this._fireRowsUpdated(i);},{wait:50,asyncLeading:true});this._initSelectionModel(S.MULTI_SELECTION);this._aTableHeaders=[];this._bAllowColumnHeaderTextSelection=false;this._iPendingRequests=0;this._bPendingRequest=false;this._iBindingLength=null;this._iTableRowContentHeight=0;this._bFirstRendering=true;this._nDevicePixelRatio=window.devicePixelRatio;this._bInvalid=true;};r.prototype._attachExtensions=function(){if(this._bExtensionsInitialized){return;}e.enrich(this,h);e.enrich(this,j);e.enrich(this,g);e.enrich(this,f);e.enrich(this,k);this._bExtensionsInitialized=true;};r.prototype.exit=function(){this.invalidateRowsAggregation();this._detachExtensions();if(this._dataReceivedHandlerId){clearTimeout(this._dataReceivedHandlerId);delete this._dataReceivedHandlerId;}this._cleanUpTimers();this._detachEvents();if(this._oSelection){this._oSelection.destroy();}delete this._aTableHeaders;};r.prototype._detachExtensions=function(){e.cleanup(this);};r.prototype.onpaste=function(i){if(i.isMarked()||/^(input|textarea)$/i.test(i.target.tagName)||!this.getDomRef("sapUiTableCnt").contains(i.target)){return;}var l=P.getPastedDataAs2DArray(i.originalEvent);if(l.length===0||l[0].length===0){return;}this.firePaste({data:l});};r.prototype.onThemeChanged=function(){if(this.getDomRef()){this.invalidate();}};r.prototype.onlocalizationChanged=function(i){var l=i.changes||{};var t=l.hasOwnProperty("rtl");var u=l.hasOwnProperty("language");this._adaptLocalization(t,u).then(function(){this.invalidate();}.bind(this));};r.prototype._adaptLocalization=function(i,l){if(!i&&!l){return Promise.reject();}var t=Promise.resolve();if(i){this._bRtlMode=sap.ui.getCore().getConfiguration().getRTL();}if(l){t=T.getResourceBundle({async:true,reload:true});}return t.then(function(){if(l){T.Menu.cleanupDataCellContextMenu(this);this._invalidateColumnMenus();}}.bind(this));};r.prototype._collectRowHeights=function(H){var l=this.getDomRef();if(!l){return[];}var t=this._getDefaultRowHeight();var u=H?".sapUiTableColHdrTr":".sapUiTableTr";var v=l.querySelectorAll(".sapUiTableCtrlFixed > tbody > tr"+u);var w=l.querySelectorAll(".sapUiTableCtrlScroll > tbody > tr"+u);var x=this.getRows().length;var y=[];var z=D.browser.chrome&&window.devicePixelRatio!=1;if(H&&this.getColumnHeaderHeight()>0){t=this.getColumnHeaderHeight();}for(var i=0;i<x;i++){var A=v[i]?v[i].getBoundingClientRect().height:0;var J=w[i]?w[i].getBoundingClientRect().height:0;var K=Math.max(A,J);if(z){var O=t-K;if(O>0&&O<1){y.push(Math.max(K,t-1));continue;}}y.push(Math.max(K,t));}if(y.length>0&&!H){T.dynamicCall(this._getSyncExtension,function(Q){var W=Q.syncRowHeights(y.slice());if(W&&W.length===y.length){y=W.slice();}});}return y;};r.prototype._resetRowHeights=function(){var l=this._getDefaultRowHeight();var t="";if(l){t=l+"px";}var u=this.getDomRef();if(u){var v=u.querySelectorAll(".sapUiTableTr");for(var i=0;i<v.length;i++){v[i].style.height=t;}}};r.prototype._resetColumnHeaderHeights=function(){var l=this.getDomRef();if(l){var t=l.querySelectorAll(".sapUiTableColHdrTr");for(var i=0;i<t.length;i++){t[i].style.height=null;}}};r.prototype._determineAvailableSpace=function(){var l=this.getDomRef();if(l&&l.parentNode){var t=l.querySelector(".sapUiTableCCnt");if(t){var u=0;if(this._bIsFlexItem){var v=l.childNodes;for(var i=0;i<v.length;i++){u+=v[i].offsetHeight;}u-=t.clientHeight;}else{u=l.scrollHeight-t.clientHeight;}var w=this._getScrollExtension();if(!w.isHorizontalScrollbarVisible()){var x={};x[D.browser.BROWSER.CHROME]=16;x[D.browser.BROWSER.FIREFOX]=16;x[D.browser.BROWSER.INTERNET_EXPLORER]=18;x[D.browser.BROWSER.EDGE]=16;x[D.browser.BROWSER.SAFARI]=16;x[D.browser.BROWSER.ANDROID]=8;u+=x[D.browser.name];}if(this._iLastAvailableSpace==null){this._iLastAvailableSpace=0;}var y=this._bIsFlexItem?l:l.parentNode;var z=Math.floor(q(y).height()-u);var A=Math.abs(z-this._iLastAvailableSpace);if(A>=5){this._iLastAvailableSpace=z;}return this._iLastAvailableSpace;}}return 0;};r.prototype._collectTableSizes=function(){var l={tableCtrlScrollWidth:0,tableRowHdrScrWidth:0,tableCtrlScrWidth:0,tableHSbScrollLeft:0,tableCtrlFixedWidth:0,tableCntHeight:0,tableCntWidth:0};var t=this.getDomRef();if(!t){return l;}var u=t.querySelector(".sapUiTableCnt");if(u){l.tableCntHeight=u.clientHeight;l.tableCntWidth=u.clientWidth;}var v=t.querySelector(".sapUiTableCtrlScroll:not(.sapUiTableCHT)");if(v){l.tableCtrlScrollWidth=v.clientWidth;}var w=t.querySelector(".sapUiTableRowHdrScr");if(w){l.tableRowHdrScrWidth=w.clientWidth;}var x=t.querySelector(".sapUiTableCtrlScr:not(.sapUiTableCHA)");if(x){l.tableCtrlScrWidth=x.clientWidth;}var H=this._getScrollExtension().getHorizontalScrollbar();if(H){l.tableHSbScrollLeft=H.scrollLeft;}var y=t.querySelector(".sapUiTableCtrlScrFixed:not(.sapUiTableCHA) > .sapUiTableCtrlFixed");if(y){l.tableCtrlFixedWidth=y.clientWidth;}var z=this.getFixedColumnCount();var A=0;if(z){var J=this.getColumns();var K=t.querySelectorAll(".sapUiTableCtrlFirstCol:not(.sapUiTableCHTHR) > th");for(var i=0;i<K.length;i++){var O=parseInt(K[i].getAttribute("data-sap-ui-headcolindex"),10);if(!isNaN(O)&&(O<z)){var Q=J[O];var W;if(Q._iFixWidth!=null){W=Q._iFixWidth;}else{W=K[i].getBoundingClientRect().width;}A+=W;}}}if(A>0){var X=this._getScrollExtension();var Y=l.tableRowHdrScrWidth;var Z=X.getVerticalScrollbar();if(Z&&!X.isVerticalScrollbarExternal()){Y+=Z.offsetWidth;}if(T.hasRowActions(this)){var $=this.getDomRef("sapUiTableRowActionScr");if($){Y+=$.offsetWidth;}}Y+=T.Column.getMinColumnWidth();var _=l.tableCntWidth-Y;var a1=_>A;var b1=!a1;if(this._bIgnoreFixedColumnCount!==b1){this._bIgnoreFixedColumnCount=b1;if(this.getEnableColumnFreeze()){this._invalidateColumnMenus();}this.invalidate();}}return l;};r.prototype._updateRowHeights=function(i,H){var l=this.getDomRef();if(!l){return;}function u(z,A){var J=i[A];if(J){z.style.height=J+"px";}}var t=H?".sapUiTableColHdrTr":".sapUiTableTr";var v=H?[]:l.querySelectorAll(".sapUiTableRowHdr");var w=H?[]:l.querySelectorAll(".sapUiTableRowAction");var x=l.querySelectorAll(".sapUiTableCtrlFixed > tbody > tr"+t);var y=l.querySelectorAll(".sapUiTableCtrlScroll > tbody > tr"+t);Array.prototype.forEach.call(v,u);Array.prototype.forEach.call(w,u);Array.prototype.forEach.call(x,u);Array.prototype.forEach.call(y,u);};r.prototype.onBeforeRendering=function(i){if(i&&i.isMarked("renderRows")){return;}if(this._performUpdateRows.pending()){this._updateBindingContexts();}this._cleanUpTimers();this._detachEvents();var l=this.getBinding("rows");var t=l?l.getLength():0;if(t===0&&t!==this._iBindingLength){this._iBindingLength=t;}var v=this.getVisibleRowCountMode();var u=this.getRows();if(v==V.Interactive||v==V.Fixed||(v==V.Auto&&this._iTableRowContentHeight&&u.length==0)){this._updateRows(this._calculateRowsToDisplay(),T.RowsUpdateReason.Render);}else if(this._bRowAggregationInvalid&&u.length>0){this._updateRows(this.getVisibleRowCount(),T.RowsUpdateReason.Render);}this._aTableHeaders=[];};r.prototype.onAfterRendering=function(t){var u=t&&t.isMarked("renderRows");var v=this.getVisibleRowCountMode();var $=this.$();this._bInvalid=false;this._bOnAfterRendering=true;this._attachEvents();this._initRowDomRefs();var w=this.getColumns();for(var i=0,l=w.length;i<l;i++){if(w[i].getVisible()){w[i]._restoreIcons();}}if(!this._bAllowColumnHeaderTextSelection&&!u){this._disableTextSelection($.find(".sapUiTableColHdrCnt"));}this._bOnAfterRendering=false;this._getKeyboardExtension().invalidateItemNavigation();this._updateTableContent();this.getDomRef().classList.remove("sapUiTableRActFlexible");if(this._bFirstRendering&&v===V.Auto){this._bFirstRendering=false;Promise.resolve().then(this._updateTableSizes.bind(this,T.RowsUpdateReason.Render,{forceUpdate:true}));}else{var O={};O.skipHandleRowCountMode=u;if(u){if(T.isVariableRowHeightEnabled(this)){O.rowContentHeight="reset";}else if(this.getRows().length===0&&v!==V.Interactive){O.rowContentHeight="recalculate";}}if(!u&&v===V.Auto&&this._bIsFlexItem){Promise.resolve().then(this._updateTableSizes.bind(this,T.RowsUpdateReason.Render,O));}else{this._updateTableSizes(T.RowsUpdateReason.Render,O);}}if(!u){this._aTableHeaders=this.$().find(".sapUiTableColHdrCnt th");if(this.getBinding("rows")){this._fireRowsUpdated(T.RowsUpdateReason.Render);}}};r.prototype.invalidate=function(){this._bInvalid=true;T.Column.invalidateColumnUtils(this);return C.prototype.invalidate.call(this);};r.prototype._initRowDomRefs=function(){var l=this.getRows();for(var i=0;i<l.length;i++){l[i].initDomRefs();}};r.prototype._updateTableSizes=function(l,O){var t=this.getDomRef();var u=this;function v(){T.registerResizeHandler(u,"",u._onTableResize.bind(u),!u._bIsFlexItem);}function w(){T.deregisterResizeHandler(u,"");}if(this._bInvalid||!t||!sap.ui.getCore().isThemeApplied()){return;}O=Object.assign({forceUpdate:false,skipHandleRowCountMode:false,rowContentHeight:undefined},O);this._bIsFlexItem=window.getComputedStyle(t.parentNode).display==="flex";if(t.offsetWidth===0){v();return;}this._resetRowHeights();this._resetColumnHeaderHeights();this._aRowHeights=this._collectRowHeights(false);var x=this._collectRowHeights(true);if(T.isVariableRowHeightEnabled(this)&&!T.isNoDataVisible(this)){this._getScrollExtension().updateInnerVerticalScrollPosition();}var y=null;if(!O.skipHandleRowCountMode&&this.getVisibleRowCountMode()==V.Auto){y=this._determineAvailableSpace();var z=this._calculateRowsToDisplay(y);if(this._updateRows(z,l)&&!O.forceUpdate){return;}}if(!this._bIsFlexItem){w();}function A(_){var a1=_.getDomRef();var b1=T.Column.getMinColumnWidth();var c1=[];var d1=_.getColumnHeaderVisible();function e1(h1,i1){if(h1<=i1){return Math.max(h1,i1-5,b1)+"px";}return-1;}function f1(i1){var j1=Math.max(i1._minWidth||0,b1,i1.getMinWidth());var k1=i1.getWidth();var l1;var m1;var n1;if(T.isVariableWidth(k1)&&!T.isFixedColumn(_,i1.getIndex())){l1=a1.querySelectorAll('th[data-sap-ui-colid="'+i1.getId()+'"]');m1=l1[d1?0:1];n1=m1?m1.offsetWidth:null;if(n1!==null){if(n1<=j1){return{headers:l1,newWidth:e1(n1,j1)};}else if(m1&&m1.style.width!=k1){c1.push({col:i1,header:m1,minWidth:j1,headers:l1});return{headers:l1,newWidth:k1};}c1.push({col:i1,header:m1,minWidth:j1,headers:l1});}}return null;}function g1(i1){if(i1){Array.prototype.forEach.call(i1.headers,function(j1){j1.style.width=i1.newWidth;});}}_._getVisibleColumns().map(f1).forEach(g1);if(c1.length){var h1;for(var i=0;i<c1.length;i++){h1=c1[i].header&&c1[i].header.offsetWidth;c1[i].newWidth=e1(h1,c1[i].minWidth);if(parseInt(c1[i].newWidth,10)>=0){g1(c1[i]);}}}}A(this);this._updateRowHeights(this._aRowHeights,false);this._updateRowHeights(x,true);if(!O.skipHandleRowCountMode||O.rowContentHeight==="reset"){this._setRowContentHeight(y);}else if(O.rowContentHeight==="recalculate"){this._setRowContentHeight(this._determineAvailableSpace());}if(this.getVisibleRowCountMode()==V.Auto){var H=this._calculateRowsToDisplay(y!=null?y:this._determineAvailableSpace());if(H==this._determineMinAutoRowCount()){this.$().height("auto");}else{this.$().height("0px");}}T.dynamicCall(this._getSyncExtension,function(i){i.syncLayout({top:this.getDomRef("sapUiTableCnt").offsetTop,headerHeight:this.getDomRef().querySelector(".sapUiTableColHdrCnt").getBoundingClientRect().height,contentHeight:this.getDomRef("tableCCnt").getBoundingClientRect().height});},this);var J=this._collectTableSizes();var K=this._getScrollExtension();K.updateHorizontalScrollbar(J);K.updateVerticalScrollbarPosition();K.updateVerticalScrollbarVisibility();var $=this.$();if(T.hasRowActions(this)){var Q=$.hasClass("sapUiTableRActFlexible");var W=this.getDomRef("dummycolhdr");var X=W?W.clientWidth:0;if(!Q&&X>0){var Y=J.tableCtrlScrWidth+J.tableRowHdrScrWidth+J.tableCtrlFixedWidth-X;var Z={width:"auto"};Z[this._bRtlMode?"right":"left"]=Y;this.$("sapUiTableRowActionScr").css(Z);this.$("rowacthdr").css(Z);$.toggleClass("sapUiTableRActFlexible",true);}else if(Q&&X<=0){this.$("sapUiTableRowActionScr").removeAttr("style");this.$("rowacthdr").removeAttr("style");$.toggleClass("sapUiTableRActFlexible",false);}}$.find(".sapUiTableNoOpacity").addBack().removeClass("sapUiTableNoOpacity");if(this._bIsFlexItem){v();}else{Promise.resolve().then(function(){if(u.getVisibleRowCountMode()===V.Auto){var i=u._calculateRowsToDisplay(u._determineAvailableSpace());if(u.getVisibleRowCount()!==i){u._iRenderingLoopCount=u._iRenderingLoopCount?u._iRenderingLoopCount+1:1;if(u._iRenderingLoopCount>M){L.error("Rendering has been re-started too many times ("+u._iRenderingLoopCount+")."+" Please run the Support Assistant to detect possible configuration issues.",u);return;}u._updateRows(i,l);}else{delete u._iRenderingLoopCount;v();}}else{v();}});}};r.prototype.setShowOverlay=function(i){i=!!i;this.setProperty("showOverlay",i,true);if(this.getDomRef()){var l=document.activeElement;this.$().toggleClass("sapUiTableOverlay",i);this._getAccExtension().updateAriaStateForOverlayAndNoData();this._getKeyboardExtension().updateNoDataAndOverlayFocus(l);}return this;};r.prototype._updateFixedBottomRows=function(){var i=this.getFixedBottomRowCount();var l=this.getDomRef();if(l&&i>0){var $=q(l).find(".sapUiTableFixedPreBottomRow");$.removeClass("sapUiTableFixedPreBottomRow");var t=q(l).find(".sapUiTableFixedFirstBottomRow");t.removeClass("sapUiTableFixedFirstBottomRow");var u=T.getFirstFixedButtomRowIndex(this);var v=this.getRows();var w;if(u>=0&&u<v.length){w=v[u].getDomRefs(true);w.row.addClass("sapUiTableFixedFirstBottomRow",true);}if(u>=1&&u<v.length){w=v[u-1].getDomRefs(true);w.row.addClass("sapUiTableFixedPreBottomRow",true);}}};r.prototype.getFocusInfo=function(){var i=this.$().find(":focus").attr("id");if(i){return{customId:i};}else{return E.prototype.getFocusInfo.apply(this,arguments);}};r.prototype.applyFocusInfo=function(i){if(i&&i.customId){q(document.getElementById(i.customId)).focus();}else{E.prototype.getFocusInfo.apply(this,arguments);}return this;};r.prototype.setTitle=function(t){var i=t;if(typeof(t)==="string"||t instanceof String){i=d.TableHelper.createTextView({text:t,width:"100%"});i.addStyleClass("sapUiTableHdrTitle");}this.setAggregation("title",i);return this;};r.prototype.setFooter=function(v){var i=v;if(typeof(v)==="string"||v instanceof String){i=d.TableHelper.createTextView({text:v,width:"100%"});}this.setAggregation("footer",i);return this;};r.prototype.setSelectionMode=function(i){this.clearSelection();if(i===n.Single){this._oSelection.setSelectionMode(S.SINGLE_SELECTION);}else{this._oSelection.setSelectionMode(S.MULTI_SELECTION);}i=T.sanitizeSelectionMode(this,i);this.setProperty("selectionMode",i);return this;};r.prototype.setFirstVisibleRow=function(i,O,l){if(parseInt(i,10)<0){L.error("The index of the first visible row must be greater than or equal to 0."+" The value has been set to 0.",this);i=0;}if(this._getTotalRowCount()>0){var t=this._getMaxFirstVisibleRowIndex();if(t<i){L.warning("The index of the first visible row must be lesser or equal than the scrollable row count minus the visible row count."+" The value has been set to "+t+".",this);i=t;}}var u=this.getFirstVisibleRow()!=i;var v=this._getScrollExtension();if(u){var w=this._getFirstRenderedRowIndex();this.setProperty("firstVisibleRow",i,true);var x=this._getFirstRenderedRowIndex()!==w;if(this.getBinding("rows")){if(x){var y=O===true?T.RowsUpdateReason.VerticalScroll:T.RowsUpdateReason.FirstVisibleRowChange;this.updateRows(y);}if(!O){v.updateVerticalScrollPosition();}}if(!l){this.fireFirstVisibleRowChanged({firstVisibleRow:i});}}else if(!O){v.updateVerticalScrollPosition();}return this;};r.getMetadata().getAggregation("rows")._doesNotRequireFactory=true;r.prototype.bindAggregation=function(i){if(i==="rows"){return this.bindRows.apply(this,[].slice.call(arguments,1));}return C.prototype.bindAggregation.apply(this,arguments);};r.prototype.bindRows=function(i){this._bRowsBeingBound=true;this._bContextsRequested=false;this._bContextsAvailable=false;if(this.getEnableBusyIndicator()){this.setBusy(false);}this._iPendingRequests=0;this._bPendingRequest=false;return C.prototype.bindAggregation.call(this,"rows",r._getSanitizedBindingInfo(arguments));};r.prototype._bindAggregation=function(i,l){if(i==="rows"){this._bRowsBeingBound=true;this._bContextsRequested=false;this._bContextsAvailable=false;r._addBindingListener(l,"change",this._onBindingChange.bind(this));r._addBindingListener(l,"dataRequested",this._onBindingDataRequested.bind(this));r._addBindingListener(l,"dataReceived",this._onBindingDataReceived.bind(this));this._initSelectionModel(S.MULTI_SELECTION);}E.prototype._bindAggregation.call(this,i,l);if(i==="rows"){var t=this.getBinding("rows");var u=t?t.getModel():null;if(u&&u.getDefaultBindingMode()===B.OneTime){L.error("The binding mode of the model is set to \"OneTime\"."+" This binding mode is not supported for the \"rows\" aggregation!"+" Scrolling can not be performed.",this);}this._bRowsBeingBound=false;}};r.prototype.destroyAggregation=function(A,i){var v=C.prototype.destroyAggregation.apply(this,arguments);if(A==="rows"){this._aRowClones.forEach(function(l){l.destroy();});this._aRowClones=[];}return v;};r._getSanitizedBindingInfo=function(i){var l;if(i==null||i[0]==null){l=null;}else if(typeof i[0]==="string"){var t=i[0];var u=i[1];var v=i[2];var w=i[3];if(u instanceof b||Array.isArray(v)&&v[0]instanceof F){w=v;v=u;u=undefined;}l={path:t,sorter:v,filters:w,template:u};}else{l=i[0];}return l;};r._addBindingListener=function(i,l,H){if(!i.events){i.events={};}if(!i.events[l]){i.events[l]=H;}else{var O=i.events[l];i.events[l]=function(){H.apply(this,arguments);O.apply(this,arguments);};}};r.prototype._initSelectionModel=function(i){if(this._oSelection){this._oSelection.detachSelectionChanged(this._onSelectionChanged,this);}this._oSelection=new S(i);this._oSelection.attachSelectionChanged(this._onSelectionChanged,this);return this;};r.prototype._onBindingChange=function(i){var l=typeof(i)==="object"?i.getParameter("reason"):i;if(l==="sort"||l==="filter"){this.clearSelection();this.setFirstVisibleRow(0);}};r.prototype.unbindAggregation=function(i,l){var t=this.getBinding("rows");if(i==="rows"&&this.isBound("rows")){l=true;}var v=E.prototype.unbindAggregation.call(this,i,l);if(i==="rows"&&t){this._invalidateColumnMenus();if(!this._bRowsBeingBound){this._adjustToTotalRowCount();if(this._bLazyRowCreationEnabled){this._updateRows(this.getVisibleRowCount(),T.RowsUpdateReason.Unbind);}this.updateRows(T.RowsUpdateReason.Unbind);}}return v;};r.prototype.setVisibleRowCount=function(v){if(v!=null&&!isFinite(v)){return this;}var i=this.getVisibleRowCountMode();if(i==V.Auto){L.error("VisibleRowCount will be ignored since VisibleRowCountMode is set to Auto",this);return this;}var l=this.getFixedRowCount()+this.getFixedBottomRowCount();if(v<=l&&l>0){L.error("Table: "+this.getId()+" visibleRowCount('"+v+"') must be bigger than number of fixed rows('"+(this.getFixedRowCount()+this.getFixedBottomRowCount())+"')",this);return this;}v=this.validateProperty("visibleRowCount",v);if(this.getBinding("rows")&&this._getTotalRowCount()<=v){this.setProperty("firstVisibleRow",0);}this.setProperty("visibleRowCount",v);this._setRowContentHeight(v*this._getDefaultRowHeight());T.dynamicCall(this._getSyncExtension,function(t){t.syncRowCount(v);});return this;};r.prototype.setMinAutoRowCount=function(i){if(parseInt(i,10)<1){L.error("The minAutoRowCount property must be greater than 0. The value has been set to 1.",this);i=1;}this.setProperty("minAutoRowCount",i);return this;};r.prototype.setRowHeight=function(i){this.setProperty("rowHeight",i);this._iTableRowContentHeight=undefined;return this;};r.prototype.setTooltip=function(t){L.warning("The aggregation tooltip is not supported for sap.ui.table.Table");return this.setAggregation("tooltip",t,true);};r.prototype.setNavigationMode=function(){this.setProperty("navigationMode",N.Scrollbar,true);L.error("The navigationMode property is deprecated and must not be used anymore. Your setting was defaulted to 'Scrollbar'",this);return this;};r.prototype._getFixedBottomRowContexts=function(i,l){var t=this.getBinding("rows");var u=[];if(!t){return u;}i=i||this.getFixedBottomRowCount();l=l||this._getTotalRowCount();var v=this.getVisibleRowCount();if(i>0&&(v-i)<l){u=this._getContexts(l-i,i);}return u;};r.prototype._getFixedRowContexts=function(i){i=i||this.getFixedRowCount();if(i>0){return this._getContexts(0,i);}else{return[];}};r.prototype._getContexts=function(i,l,t){var u=this.getBinding("rows");if(u){return u.getContexts(i,l,t);}else{return[];}};r.prototype._computeRequestLength=function(l){if(this.getVisibleRowCountMode()===V.Auto&&!this._bContextsRequested){var i=Math.ceil(D.resize.height/T.DEFAULT_ROW_HEIGHT.sapUiSizeCondensed);return Math.max(l,i);}return l;};r.prototype._getRowContexts=function(v,l,t){var u=this.getBinding("rows");var w=v==null?this.getRows().length:v;if(!u||w<=0){return[];}l=l===true;t=t===true;var x=this._getFirstRenderedRowIndex();var y=this.getFixedRowCount();var z=this.getFixedBottomRowCount();var A=[];var H;var J=w-z;var K=0;var O=J;var Q=this.getThreshold();Q=Q?Math.max(w,Q):0;var W=x;var X=function($,_,W){for(var i=0;i<_.length;i++){$[W+i]=_[i];}};if(y>0&&x>0){W=x+y;J-=y;K=y;H=this._getFixedRowContexts(y);A=A.concat(H);}H=this._getContexts(W,this._computeRequestLength(J),Q);if(!l){this._adjustToTotalRowCount();}var Y=this._getTotalRowCount();this._bContextsRequested=true;X(A,H,K);O=Math.min(O,Math.max(Y-z,0));if(z>0){H=this._getFixedBottomRowContexts(z,Y);X(A,H,O);}var Z=this._getMaxFirstRenderedRowIndex();if(Z<x&&this._bContextsAvailable&&!t){this.setProperty("firstVisibleRow",Z,true);A=this._getRowContexts(w,l,true);}return A;};r.prototype._adjustToTotalRowCount=function(){var i=this.getBinding("rows");var t=this._getTotalRowCount();var l=this._getScrollExtension();if(this._iBindingLength!==t){this._iBindingLength=t;this._updateFixedBottomRows();l.updateVerticalScrollbarVisibility();l.updateVerticalScrollHeight();if(!i||!T.hasPendingRequests(this)){this._updateNoData();}}};r.prototype.refreshRows=function(v){var i=this.getBinding("rows");if(!i){L.error("RefreshRows must not be called without a binding",this);return;}this._bContextsAvailable=false;var t=this;var l=typeof(v)==="object"?v.getParameter("reason"):v;var u=this.getVisibleRowCountMode();var A=u===V.Auto;var w=A&&this.bOutput;if(!A||w){if(this.bOutput&&this.getRows().length===0){i.attachEventOnce("dataRequested",function(){if(t._mTimeouts.refreshRowsAdjustRows){window.clearTimeout(t._mTimeouts.refreshRowsAdjustRows);}t._mTimeouts.refreshRowsAdjustRows=window.setTimeout(function(){t._updateRows(t._calculateRowsToDisplay(),l,false);},0);});}if(l===a.Filter||l===a.Sort){this.setFirstVisibleRow(0);}var x=l!=null;this._updateBindingContexts(this._calculateRowsToDisplay(),x);}};r.prototype.updateRows=function(i){if(this.bIsDestroyed||this._bIsBeingDestroyed){return;}if(!this._bRowsBeingBound||this._getTotalRowCount(true)>0){this._bContextsAvailable=true;}var v=this.getVisibleRowCountMode();var l=this.getRows().length===0||this._bRowAggregationInvalid;var A=v===V.Auto;var t=A&&this.bOutput;if(l&&(!A||t)){if(this._iTableRowContentHeight){var u=this._updateRows(this._calculateRowsToDisplay(),i);if(u){return;}}}this._performUpdateRows(i);};r.prototype.insertRow=function(){L.error("The control manages the rows aggregation. The method \"insertRow\" cannot be used programmatically!",this);return this;};r.prototype.addRow=function(){L.error("The control manages the rows aggregation. The method \"addRow\" cannot be used programmatically!",this);return this;};r.prototype.removeRow=function(){L.error("The control manages the rows aggregation. The method \"removeRow\" cannot be used programmatically!",this);return null;};r.prototype.removeAllRows=function(){L.error("The control manages the rows aggregation. The method \"removeAllRows\" cannot be used programmatically!",this);return[];};r.prototype.destroyRows=function(){L.error("The control manages the rows aggregation. The method \"destroyRows\" cannot be used programmatically!",this);return this;};r.prototype.autoResizeColumn=function(i){this._getPointerExtension().doAutoResizeColumn(i);};r.prototype._attachEvents=function(){var $=this.$();if(sap.ui.getCore().getConfiguration().getAnimation()){q(document.body).on("webkitTransitionEnd transitionend",function(i){if(q(i.target).has($).length>0){this._updateTableSizes(T.RowsUpdateReason.Animation);}}.bind(this));}D.resize.attachHandler(this._onWindowResize,this);e.attachEvents(this);};r.prototype._detachEvents=function(){q(document.body).off('webkitTransitionEnd transitionend');T.deregisterResizeHandler(this);D.resize.detachHandler(this._onWindowResize,this);e.detachEvents(this);};r.prototype._cleanUpTimers=function(){var K;for(K in this._mTimeouts){if(this._mTimeouts[K]){window.clearTimeout(this._mTimeouts[K]);delete this._mTimeouts[K];}}for(K in this._mAnimationFrames){if(this._mAnimationFrames[K]){window.cancelAnimationFrame(this._mAnimationFrames[K]);delete this._mAnimationFrames[K];}}this._performUpdateRows.cancel();};r.prototype._updateBindingContexts=function(i,l){var t=this.getBinding("rows");var u;l=l===true;if(t){u=this._getRowContexts(i,l);}if(!l){this._resetRowHeights();var v=this.getRows(),w=this.mBindingInfos["rows"],x=w&&w.model;for(var y=v.length-1;y>=0;y--){var z=u?u[y]:undefined;var A=v[y];if(A){A.setRowBindingContext(z,x,t);}}}};r.prototype._updateNoData=function(){if(!this.getDomRef()){return;}var i=document.activeElement;this.$().toggleClass("sapUiTableEmpty",T.isNoDataVisible(this));this._getAccExtension().updateAriaStateForOverlayAndNoData();this._getKeyboardExtension().updateNoDataAndOverlayFocus(i);};r.prototype.removeColumn=function(i,l){var t=this.removeAggregation('columns',i,l);if(typeof i==="number"&&i>-1){i=this.getColumns()[i];}var u=this._aSortedColumns.indexOf(i);if(!this._bReorderInProcess&&u>=0){this._aSortedColumns.splice(u,1);}this.invalidateRowsAggregation();return t;};r.prototype.removeAllColumns=function(){var i=this.removeAllAggregation('columns');this._aSortedColumns=[];this.invalidateRowsAggregation();return i;};r.prototype.destroyColumns=function(){var i=this.destroyAggregation('columns');this._aSortedColumns=[];this.invalidateRowsAggregation();return i;};r.prototype.addColumn=function(i,l){this.addAggregation('columns',i,l);this.invalidateRowsAggregation();return this;};r.prototype.insertColumn=function(i,l,t){this.insertAggregation('columns',i,l,t);this.invalidateRowsAggregation();return this;};r.prototype._getTotalRowCount=function(){var i=this.getBinding("rows");return i?i.getLength():0;};r.prototype._getSelectableRowCount=function(){return this._getTotalRowCount();};r.prototype._getMaxFirstVisibleRowIndex=function(){var i;if(T.isVariableRowHeightEnabled(this)){i=this._getTotalRowCount(true)-1;}else{i=this._getTotalRowCount(true)-this.getVisibleRowCount();}return Math.max(0,i);};r.prototype._getMaxFirstRenderedRowIndex=function(){var i;if(T.isVariableRowHeightEnabled(this)){i=this._getTotalRowCount(true)-this.getVisibleRowCount()-1;}else{i=this._getTotalRowCount(true)-this.getVisibleRowCount();}return Math.max(0,i);};r.prototype._getFirstRenderedRowIndex=function(){var i=this.getFirstVisibleRow();if(T.isVariableRowHeightEnabled(this)&&i>this._getMaxFirstRenderedRowIndex()){return this._getMaxFirstRenderedRowIndex();}else{return i;}};r.prototype._getVisibleColumns=function(){var t=[];var u=this.getColumns();for(var i=0,l=u.length;i<l;i++){if(u[i].shouldRender()){t.push(u[i]);}}return t;};r.prototype._getColumnsWidth=function(t,u){var v=this.getColumns();var w=0;if(t!==0&&!t){t=0;}if(u!==0&&!u){u=v.length;}for(var i=t,l=u;i<l;i++){if(v[i]&&v[i].shouldRender()){w+=this._CSSSizeToPixel(v[i].getWidth());}}return w;};r.prototype._CSSSizeToPixel=function(i,l){var t=T.Column.getMinColumnWidth();if(i){if(i.endsWith("px")){t=parseInt(i,10);}else if(i.endsWith("em")||i.endsWith("rem")){t=Math.ceil(parseFloat(i)*this._getBaseFontSize());}}if(l){return t+"px";}else{return parseInt(t,10);}};r.prototype._getBaseFontSize=function(){return this._iBaseFontSize;};r.prototype._onTableResize=function(){if(this._bInvalid||!this.getDomRef()){return;}this._updateTableSizes(T.RowsUpdateReason.Resize);};r.prototype._onWindowResize=function(){if(this._bInvalid||!this.getDomRef()){return;}if(D.browser.chrome&&window.devicePixelRatio!==this._nDevicePixelRatio){this._nDevicePixelRatio=window.devicePixelRatio;this._updateTableSizes(T.RowsUpdateReason.Zoom);}};r.prototype._disableTextSelection=function(i){q(i||document.body).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).bind("selectstart",function(l){l.preventDefault();return false;});};r.prototype._enableTextSelection=function(i){q(i||document.body).attr("unselectable","off").css({"-moz-user-select":"","-webkit-user-select":"","user-select":""}).unbind("selectstart");};r.prototype._clearTextSelection=function(){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty();}else if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges();}}else if(document.selection&&document.selection.empty){try{document.selection.empty();}catch(i){}}};r.prototype._findAndfireCellEvent=function(i,l,t){var $=q(l.target);var u=$.closest("td.sapUiTableTd");var v=u.attr("id");var w=/.*-row(\d*)-col(\d*)/i.exec(v);var x=false;if(w){var y=w[1];var z=w[2];var A=this.getRows()[y];var H=A&&A.getCells()[z];var J=A&&A.getIndex();var K=H.data("sap-ui-colid");var O;if(this.getBindingInfo("rows")){O=A.getBindingContext(this.getBindingInfo("rows").model);}var Q={rowIndex:J,columnIndex:z,columnId:K,cellControl:H,rowBindingContext:O,cellDomRef:u.get(0)};x=!i.call(this,Q);if(!x&&typeof t==="function"){Q.cellDomRef=u[0];x=t.call(this,Q);}}return x;};r.prototype.getFocusDomRef=function(){this._getKeyboardExtension().initItemNavigation();var i=T.getFocusedItemInfo(this);if(i){return i.domRef||C.prototype.getFocusDomRef.apply(this,arguments);}return null;};r.prototype._isRowSelectable=function(i){return i>=0&&i<this._getTotalRowCount();};r.prototype.pushSortedColumn=function(i,A){if(!A){this._aSortedColumns=[];}this._aSortedColumns.push(i);};r.prototype.getSortedColumns=function(){return this._aSortedColumns.slice();};r.prototype.sort=function(l,t,A){if(!l){for(var i=0;i<this._aSortedColumns.length;i++){this._aSortedColumns[i].setSorted(false);}var u=this.getBinding("rows");if(u){u.sort();}this._aSortedColumns=[];}if(this.getColumns().indexOf(l)>=0){l.sort(t===p.Descending,A);}};r.prototype.filter=function(i,v){if(this.getColumns().indexOf(i)>=0){i.filter(v);}};r.prototype._updateSelection=function(){var l=this.getSelectionMode();if(l===n.None){return;}var t=this._getAccExtension().getAriaTextsForSelectionMode(true);var u=T.isRowSelectionAllowed(this);var v=this.getRows();for(var i=0;i<v.length;i++){var w=v[i];w._updateSelection(this,t,u);}this.setProperty("selectedIndex",this.getSelectedIndex(),true);if(T.hasSelectAll(this)){var $=this.$("selall");var A=T.areAllRowsSelected(this);$.toggleClass("sapUiTableSelAll",!A);this._getAccExtension().setSelectAllState(A);if(this._getShowStandardTooltips()){$.attr('title',T.getResourceText(A?"TBL_DESELECT_ALL":"TBL_SELECT_ALL"));}}};r.prototype._getShowStandardTooltips=function(){return!this._bHideStandardTooltips;};r.prototype._onSelectionChanged=function(i){var l=i.getParameter("rowIndices");var t=i.getParameter("selectAll");var u=this._iSourceRowIndex!==undefined?this._iSourceRowIndex:this.getSelectedIndex();this._updateSelection();this.fireRowSelectionChange({rowIndex:u,rowContext:this.getContextByIndex(u),rowIndices:l,selectAll:t,userInteraction:this._iSourceRowIndex!==undefined});};r.prototype.getContextByIndex=function(i){var l=this.getBinding("rows");return i>=0&&l?l.getContexts(i,1)[0]:null;};r.prototype.getSelectedIndex=function(){return this._oSelection.getLeadSelectedIndex();};r.prototype.setSelectedIndex=function(i){if(this.getSelectionMode()===n.None){return this;}if(i===-1){this.clearSelection();}else{this._oSelection.setSelectionInterval(i,i);}return this;};r.prototype.clearSelection=function(){this._oSelection.clearSelection();return this;};r.prototype.selectAll=function(){if(!T.hasSelectAll(this)){return this;}var i=this.getBinding("rows");if(i){this._oSelection.selectAll(this._getTotalRowCount()-1);}return this;};r.prototype.getSelectedIndices=function(){return this._oSelection.getSelectedIndices();};r.prototype.addSelectionInterval=function(i,l){if(this.getSelectionMode()===n.None){return this;}this._oSelection.addSelectionInterval(i,l);return this;};r.prototype.setSelectionInterval=function(i,l){if(this.getSelectionMode()===n.None){return this;}this._oSelection.setSelectionInterval(i,l);return this;};r.prototype.removeSelectionInterval=function(i,l){this._oSelection.removeSelectionInterval(i,l);return this;};r.prototype.isIndexSelected=function(i){return this._oSelection.isSelectedIndex(i);};r.prototype.setGroupBy=function(v){var i=v;var O=sap.ui.getCore().byId(this.getGroupBy());if(typeof i==="string"){i=sap.ui.getCore().byId(i);}var l=false;if(i instanceof c&&i!==O){if(this.getColumns().indexOf(i)===-1){throw new Error("Column has to be part of the columns aggregation!");}var t=this.fireGroup({column:i,groupedColumns:[i.getId()],type:G.group});if(O){O.setGrouped(false);l=true;}if(t&&this.getEnableGrouping()){i.setGrouped(true);}}if(!i||l){if(O){O.setGrouped(false);}T.Grouping.resetExperimentalGrouping(this);}return this.setAssociation("groupBy",i);};r.prototype.getBinding=function(i){T.Grouping.setupExperimentalGrouping(this);return E.prototype.getBinding.call(this,[i||"rows"]);};r.prototype.setEnableGrouping=function(i){var l=sap.ui.getCore().byId(this.getGroupBy());this.setProperty("enableGrouping",i);if(l){l.setGrouped(i);}T.Grouping.resetExperimentalGrouping(this);this._invalidateColumnMenus();return this;};r.prototype.setEnableCustomFilter=function(i){this.setProperty("enableCustomFilter",i);this._invalidateColumnMenus();return this;};r.prototype.setEnableColumnFreeze=function(i){this.setProperty("enableColumnFreeze",i);this._invalidateColumnMenus();return this;};r.prototype.setShowColumnVisibilityMenu=function(i){this.setProperty("showColumnVisibilityMenu",i);this._invalidateColumnMenus();return this;};r.prototype.getComputedFixedColumnCount=function(){if(this._bIgnoreFixedColumnCount){return 0;}return this.getFixedColumnCount();};r.prototype.setFixedColumnCount=function(l,t){var u=this.getColumns();var v,i;for(i=l-1;i>=0;i--){v=u[i];if(v&&v.getVisible()){l=Math.max(l,v.getIndex()+T.Column.getHeaderSpan(v));break;}}var $=this.$().find(".sapUiTableCtrlFirstCol > th");for(i=l-1;i>=0;i--){v=u[i];if(v&&T.isVariableWidth(v.getWidth())){v._iFixWidth=$.filter("[data-sap-ui-headcolindex='"+v.getIndex()+"']").width();}}this.setProperty("fixedColumnCount",l,t);this._collectTableSizes();if(this.getEnableColumnFreeze()){this._invalidateColumnMenus();}return this;};r.prototype.setFixedRowCount=function(i){if(!(parseInt(i,10)>=0)){L.error("Number of fixed rows must be greater or equal 0",this);return this;}if((i+this.getFixedBottomRowCount())<this.getVisibleRowCount()){this.setProperty("fixedRowCount",i);this._updateBindingContexts();}else{L.error("Table '"+this.getId()+"' fixed rows('"+(i+this.getFixedBottomRowCount())+"') must be smaller than numberOfVisibleRows('"+this.getVisibleRowCount()+"')",this);}return this;};r.prototype.setFixedBottomRowCount=function(i){if(!(parseInt(i,10)>=0)){L.error("Number of fixed bottom rows must be greater or equal 0",this);return this;}if((i+this.getFixedRowCount())<this.getVisibleRowCount()){this.setProperty("fixedBottomRowCount",i);this._updateBindingContexts();}else{L.error("Table '"+this.getId()+"' fixed rows('"+(i+this.getFixedRowCount())+"') must be smaller than numberOfVisibleRows('"+this.getVisibleRowCount()+"')",this);}return this;};r.prototype.setThreshold=function(t){this.setProperty("threshold",t,true);return this;};r.prototype._invalidateColumnMenus=function(){var t=this.getColumns();for(var i=0,l=t.length;i<l;i++){t[i].invalidateMenu();}};r.prototype._isTouchEvent=function(i){return!!(i&&i.originalEvent&&i.originalEvent.touches);};r.prototype._getRowClone=function(t){var u=this._aRowClones[t];if(u&&!u.bIsDestroyed){return u;}u=new R(this.getId()+"-rows"+"-row"+t);this._aRowClones[t]=u;var v=this.getColumns();for(var i=0,l=v.length;i<l;i++){if(v[i].getVisible()){var w=v[i].getTemplateClone(i);if(w){u.addCell(w);}}}if(T.hasRowActions(this)){var x=this.getRowActionTemplate().clone();x._setFixedLayout(true);x._setCount(this.getRowActionCount());x._setIconLabel(this.getId()+"-rowacthdr");u.setAggregation("_rowAction",x,true);}var y=this.getRowSettingsTemplate();if(y){var z=y.clone();u.setAggregation("_settings",z,true);}return u;};r.prototype.invalidateRowsAggregation=function(){this._bRowAggregationInvalid=true;};r.prototype._updateRows=function(l,t,u){if(isNaN(l)||this.bIsDestroyed||this._bIsBeingDestroyed){return false;}if(u==null){u=true;}var v=this.getBinding("rows");var w=this.getRows();var i;this.setProperty("visibleRowCount",l,true);if(T.isNoDataVisible(this)&&!v&&this._bLazyRowCreationEnabled){l=0;}else if(T.isVariableRowHeightEnabled(this)){l=l+1;}T.dynamicCall(this._getSyncExtension,function(J){J.syncRowCount(l);},this);if(this._bRowAggregationInvalid){this.destroyAggregation("rows",true);w=[];}if(l===w.length){return false;}for(i=w.length-1;i>=l;i--){this.removeAggregation("rows",i,true);}w.splice(l);var x;var y;var z;if(u){y=this.getBindingInfo("rows");z=y&&y.model;x=this._getRowContexts(l);for(i=0;i<w.length;i++){w[i].setRowBindingContext(x[i],z,v);}}if(w.length<l){for(i=w.length;i<l;i++){var A=this._getRowClone(i);if(u){A.setRowBindingContext(x[i],z,v);}this.addAggregation("rows",A,true);this._bRowAggregationInvalid=false;if(u){A._updateTableCells(x[i]);}}}if(T.isVariableRowHeightEnabled(this)){this._iRenderedFirstVisibleRow=this._getFirstRenderedRowIndex();}var H=u&&x.length>0;return this._renderRows(t,H);};r.prototype._renderRows=function(i,l){var t=false;l=l===true;if(!this._bInvalid){var u=this.getDomRef("tableCCnt");if(!u){return false;}this._detachEvents();if(this.getVisibleRowCountMode()===V.Auto){var v=this.getDomRef();if(v){v.style.height="0px";}}var w=q.Event("BeforeRendering");w.setMarked("renderRows");w.srcControl=this;this._handleEvent(w);var x=sap.ui.getCore().createRenderManager(),y=this.getRenderer();y.renderTableCCnt(x,this);x.flush(u,false,false);x.destroy();w=q.Event("AfterRendering");w.setMarked("renderRows");w.srcControl=this;this._handleEvent(w);t=true;}if(l&&!this._bInvalid&&this.getBinding("rows")){var z=this;if(this._mTimeouts._rowsUpdated){window.clearTimeout(this._mTimeouts._rowsUpdated);}this._mTimeouts._rowsUpdated=window.setTimeout(function(){z._fireRowsUpdated(i);},0);}return t;};r.prototype._getDefaultRowHeight=function(){var i=this.getRowHeight();if(i>0){return i+T.ROW_HORIZONTAL_FRAME_SIZE;}else{var l=T.getContentDensity(this);return T.DEFAULT_ROW_HEIGHT[l];}};function s(t){var i=t?t.getDomRef("tableCCnt"):null;if(i&&D.browser.chrome&&window.devicePixelRatio!==1){var l=document.createElement("table");var u=l.insertRow();var v;l.classList.add("sapUiTableCtrl");u.classList.add("sapUiTableTr");if(t.getRowHeight()>0){u.style.height=t._getDefaultRowHeight()+"px";}i.appendChild(l);v=u.getBoundingClientRect().height;i.removeChild(l);return v;}else{return t._getDefaultRowHeight();}}r.prototype._setRowContentHeight=function(H){H=H||0;var v=this.getVisibleRowCountMode();var i=this.getVisibleRowCount();var l=this._getDefaultRowHeight();var t=this.getMinAutoRowCount();var u;if(v==V.Interactive||v==V.Fixed){if(this._iTableRowContentHeight&&v==V.Interactive){u=t*l;if(!H){H=this._iTableRowContentHeight;}}else{u=i*l;H=u;}}else if(v==V.Auto){u=t*l;}var w=Math.max(H,u);if((v==V.Fixed&&this.getRows().length==0)||v!=V.Fixed){this._iTableRowContentHeight=Math.floor(w/l)*l;}else{this._iTableRowContentHeight=undefined;}if(T.isVariableRowHeightEnabled(this)){q(this.getDomRef("tableCCnt")).css("height",l*i+"px");}else{if((v==V.Fixed||v==V.Interactive)&&this.getRows().length>0){q(this.getDomRef("tableCtrlCnt")).css("height","auto");}else if(v===V.Auto){var x=Math.floor(w/l)*s(this);q(this.getDomRef("tableCtrlCnt")).css("height",x+"px");}else{q(this.getDomRef("tableCtrlCnt")).css("height",this._iTableRowContentHeight+"px");}}};r.prototype._determineMinAutoRowCount=function(){var i=this.getMinAutoRowCount();if(this.getVisibleRowCountMode()==V.Interactive&&!this.bOutput){i=this.getVisibleRowCount()||i;}return i;};r.prototype._calculateRowsToDisplay=function(t){this._iRowsToDisplayHeight=t||this._iRowsToDisplayHeight||this._iTableRowContentHeight;var i=this._iRowsToDisplayHeight;var v=this.getVisibleRowCountMode();var l=0;var u=this._determineMinAutoRowCount();var w=this.getFixedRowCount()+this.getFixedBottomRowCount()+1;var x=this._getDefaultRowHeight();if(v==V.Fixed){l=this.getVisibleRowCount()||0;}else if(v==V.Interactive){if(t){l=Math.max(u,w,Math.floor(t/x));}else{l=Math.max(u,this.getVisibleRowCount());}}else if(v==V.Auto){if(!x||!i){l=u;}else{var A=Math.min(i,50000);l=Math.max(u,w,Math.floor(A/x));}}return Math.max(l,0);};r.prototype.setShowNoData=function(i){this.setProperty('showNoData',i,true);this._updateNoData();return this;};r.prototype.setNoData=function(v){var O=T.getNoDataText(this);this.setAggregation("noData",v,true);var i=T.getNoDataText(this);if(O!=null&&i!=null){if(O!==i){this.$("noDataMsg").text(i);}}else{this.invalidate();}return this;};r.prototype.exportData=function(t){var u=sap.ui.requireSync("sap/ui/core/util/Export");t=t||{};if(!t.rows){var v=this.getBinding("rows"),w=this.getBindingInfo("rows");var x=v.aFilters.concat(v.aApplicationFilters);t.rows={path:w.path,model:w.model,sorter:v.aSorters,filters:x,parameters:w.parameters};}if(!t.exportType){var y=sap.ui.requireSync("sap/ui/core/util/ExportTypeCSV");t.exportType=new y();}var z=t.rows.model;if(!z){var A=t.rows.path;var H=A.indexOf(">");if(H>0){z=A.substr(0,H);}}if(!t.columns){t.columns=[];var J=this.getColumns();for(var i=0,l=J.length;i<l;i++){var K=J[i];if(K.getSortProperty()){t.columns.push({name:K.getLabel().getText(),template:{content:{path:K.getSortProperty(),model:z}}});}}}var O=new u(t);this.addDependent(O);return O;};r.prototype._onPersoApplied=function(){var t=this.getColumns();var u=[];for(var i=0,l=t.length;i<l;i++){var v=t[i];if(v.getSorted()){u.push(new b(v.getSortProperty(),v.getSortOrder()===p.Descending));}}var w=this.getBinding("rows");if(w){if(u.length>0){w.sort(u);}this.refreshRows();}};r.prototype._toggleSelectAll=function(){if(!T.hasData(this)||this.getSelectionMode()!==n.MultiToggle){return;}if(T.areAllRowsSelected(this)){this._iSourceRowIndex=-1;this.clearSelection();}else{this._iSourceRowIndex=0;this.selectAll();}this._iSourceRowIndex=undefined;};r.prototype.setBusy=function(i,l){var t=this.getBusy()!=i;l="sapUiTableCnt";var v=C.prototype.setBusy.call(this,i,l);if(t){this.fireBusyStateChanged({busy:i});}return v;};r.prototype.setEnableBusyIndicator=function(v){this.setProperty("enableBusyIndicator",v,true);if(!v){this.setBusy(false);}return this;};r.prototype._onBindingDataRequested=function(i){if(i.getSource()!=this.getBinding("rows")||i.getParameter("__simulateAsyncAnalyticalBinding")){return;}this._iPendingRequests++;this._bPendingRequest=true;var l=T.canUsePendingRequestsCounter(this);if(this.getEnableBusyIndicator()&&(l&&this._iPendingRequests===1||!l)){this.setBusy(true);}if(this._dataReceivedHandlerId!=null){clearTimeout(this._dataReceivedHandlerId);delete this._dataReceivedHandlerId;}};r.prototype._onBindingDataReceived=function(i){if(i.getSource()!=this.getBinding("rows")||i.getParameter("__simulateAsyncAnalyticalBinding")){return;}this._iPendingRequests--;this._bPendingRequest=false;this._adjustToTotalRowCount();if(!T.hasPendingRequests(this)){this._dataReceivedHandlerId=setTimeout(function(){if(this.getEnableBusyIndicator()){this.setBusy(false);}this._updateNoData();delete this._dataReceivedHandlerId;}.bind(this),0);}};r.prototype._setLargeDataScrolling=function(l){this._bLargeDataScrolling=!!l;};r.prototype._getSelectedIndicesCount=function(){return this.getSelectedIndices().length;};r.prototype._updateTableContent=function(){T.Grouping.updateGroups(this);};r.prototype.setRowActionTemplate=function(t){this.setAggregation("rowActionTemplate",t);t=this.getRowActionTemplate();if(t){t._setCount(this.getRowActionCount());}this.invalidateRowsAggregation();return this;};r.prototype.setRowActionCount=function(l){this.setProperty("rowActionCount",l);l=this.getRowActionCount();var t=this.getRowActionTemplate();if(t){t._setCount(l);}for(var i=0;i<this._aRowClones.length;i++){t=this._aRowClones[i].getAggregation("_rowAction");if(t){t._setCount(l);}}return this;};r.prototype.setRowSettingsTemplate=function(t){this.setAggregation("rowSettingsTemplate",t);this.invalidateRowsAggregation();return this;};r.prototype._validateRow=function(i){return i&&i instanceof R&&i.getParent()===this;};r.prototype.getRowForCell=function(i){if(i){var l=i.getParent();if(this._validateRow(l)){return l;}}return null;};r.prototype.getColumnForCell=function(i){if(this.getRowForCell(i)){var l=i.data("sap-ui-colindex");var t=this.getColumns();if(l>=0&&l<t.length){return t[l];}}return null;};r.prototype.getCellControl=function(i,l,v){var t=T.getRowColCell(this,i,l,!v);return t.cell;};r.prototype._fireRowsUpdated=function(i){if(i==null){i=T.RowsUpdateReason.Unknown;}this.fireEvent("_rowsUpdated",{reason:i});};r.prototype._enableSynchronization=function(){var t=this;return new Promise(function(i,l){sap.ui.require(["sap/ui/table/TableSyncExtension"],function(u){i(e.enrich(t,u).getInterface());},function(u){l(u);});});};return r;});
