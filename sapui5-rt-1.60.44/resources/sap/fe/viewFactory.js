/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(['sap/ui/thirdparty/jquery','sap/ui/model/json/JSONModel','sap/ui/model/base/ManagedObjectModel','sap/ui/core/cache/CacheManager','sap/ui/core/mvc/View'],function(q,J,M,C){"use strict";function c(p){var V=p.viewName,A=p.appComponent,e=p.entitySet,m=p.viewData,o=p.model.getMetaModel(),s=p.viewId,b=null,d;var P=a(V);var k=A.getMetadata().getName()+"_"+s+"_"+sap.ui.getCore().getConfiguration().getLanguageTag(),f=[];f.push(Promise.all([C.get(k),o.requestObject("/")]).then(function(r){var g=r[0];function h(u,j){var E=o.getETags();return new Promise(function(n,t){if(!E[u]){q.ajax(u,{method:'GET'}).then(function(R,T,w){if(j!==w.getResponseHeader('ETag')&&j!==w.getResponseHeader('Last-Modified')){n(false);}else{n(true);}},function(w,T,x){n(false);});}else if(j!==E[u]){n(false);}else{n(true);}});}function i(j){var n=[];Object.keys(j).forEach(function(u){n.push(h(u,j[u]));});return Promise.all(n);}if(g){return i(JSON.parse(g.newCacheKey)).then(function(j){d=g.newCacheKey;if(j.every(function(n){return n;})){b={keys:[g.oldCacheKey]};}else{b={keys:[d]};}});}else{d='initial';var E=o.getETags();Object.keys(E).forEach(function(u){if(!E[u]){d=null;}});b={keys:[d]};}}));f=f.concat(a("loadFirst"));return Promise.all(f).then(function(){var D=new J(sap.ui.Device),g=new J(A.getMetadata().getManifest()),h=new J(m),i={type:"XML",async:true,preprocessors:{xml:{bindingContexts:{entitySet:e?o.createBindingContext("/"+e):null,viewData:m?h.createBindingContext("/"):null},models:{entitySet:o,'sap.ui.mdc.metaModel':o,'sap.fe.deviceModel':D,'manifest':g,'viewData':h}}},id:s,viewName:V,viewData:m,cache:b,height:"100%"};D.setDefaultBindingMode("OneWay");return A.runAsOwner(function(){var j=sap.ui.view(i);j.setModel(new M(j),"$view");return Promise.all(P).then(function(){return j.loaded();}).then(function(j){var n=JSON.stringify(o.getETags());if(d&&d!==n){var r={};r.newCacheKey=n;r.oldCacheKey=d;C.set(k,r);}return j;});});});}var l={"loadFirst":["sap.ui.mdc"],"sap.fe.templates.ListReport":["sap.m","sap.f","sap.ui.fl"],"sap.fe.templates.ObjectPage":["sap.m","sap.f","sap.uxap","sap.ui.layout"]};function a(V){var L=[];var b=l[V]||[];for(var i=0;i<b.length;i++){L.push(sap.ui.getCore().loadLibrary(b[i],{async:true}));}return L;}var v={create:c};return v;});
