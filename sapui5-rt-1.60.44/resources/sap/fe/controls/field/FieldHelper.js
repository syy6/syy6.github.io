/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/mdc/odata/v4/CommonHelper","sap/ui/mdc/ResourceModel","sap/ui/model/odata/v4/AnnotationHelper"],function(c,R,d){"use strict";var F={buildExpressionForCriticalityIcon:function(C){if(C){var e="{= (${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Negative') || (${"+C+"} === '1') || (${"+C+"} === 1) ? 'sap-icon://status-negative' : "+"(${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Critical') || (${"+C+"} === '2') || (${"+C+"} === 2) ? 'sap-icon://status-critical' : "+"(${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Positive') || (${"+C+"} === '3') || (${"+C+"} === 3) ? 'sap-icon://status-positive' : "+"'sap-icon://status-inactive' }";return e;}},buildExpressionForCriticalityColor:function(C){if(C){var e="{= (${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Negative') || (${"+C+"} === '1') || (${"+C+"} === 1) ? 'Error' : "+"(${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Critical') || (${"+C+"} === '2') || (${"+C+"} === 2) ? 'Warning' : "+"(${"+C+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Positive') || (${"+C+"} === '3') || (${"+C+"} === 3) ? 'Success' : "+"'None' }";return e;}},buildExpressionForTextValue:function(p,D){var m=D.context.getModel(),P=D.context.getPath(),t=m.getObject(P+"@com.sap.vocabularies.Common.v1.Text"),T=t?d.value(t,D):"",e="";p=d.getNavigationPath(p);if(p.indexOf('/')>-1&&T){e="{"+p.substr(0,p.indexOf('/')+1)+T.substr(1,T.length-2)+"}";}else{e=T;}if(e){e="{ path : '"+e.substr(1,e.length-2)+"', mode : 'OneWay'}";}return e;},getStableIdPartFromDataField:function(D,p){var P="",I="";if(D.$Type&&D.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){return c.replaceSpecialCharsInId(D.Action);}else if(D.$Type&&(D.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||D.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation")){if(typeof D.SemanticObject=="string"){I=c.replaceSpecialCharsInId(D.SemanticObject);}else if(D.SemanticObject.$Path){I=c.replaceSpecialCharsInId(D.SemanticObject.$Path);}if(typeof D.Action=="string"){I=I+"::"+c.replaceSpecialCharsInId(D.Action);}else if(D.Action&&D.Action.$Path){I=I+"::"+c.replaceSpecialCharsInId(D.Action.$Path);}return I;}else if(D.$Type&&D.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){return c.replaceSpecialCharsInId(D.Target.$AnnotationPath);}else if(D.Value&&D.Value.$Path){return c.replaceSpecialCharsInId(D.Value.$Path);}else if(D.Value&&D.Value.$Apply&&D.Value.$Function==="odata.concat"){for(var i=0;i<D.Value.$Apply.length;i++){if(D.Value.$Apply[i].$Path){if(P){P=P+"::";}P=P+c.replaceSpecialCharsInId(D.Value.$Apply[i].$Path);}}return P;}else if(p&&p.context&&p.context.getObject("@sapui.name")){return c.replaceSpecialCharsInId(p.context.getObject("@sapui.name"));}else{jQuery.sap.log.error("Annotation Helper: Unable to create a stable ID. Please check the annotations.");}},isNotAlwaysHidden:function(D,o){var C=o.context,i=false;if(D.Value&&D.Value.$Path){i=C.getObject("Value/$Path@com.sap.vocabularies.UI.v1.Hidden");}if(!i||i.$Path){i=C.getObject("@com.sap.vocabularies.UI.v1.Hidden");if(!i||i.$Path){i=false;}}return!i;},isSemanticKey:function(C,v){var e=C.getPath().split('/')[1];var s=C.getModel().getObject("/"+e+"/@com.sap.vocabularies.Common.v1.SemanticKey");if(s){for(var i=0;i<s.length;i++){if(s[i].$PropertyPath===v.$Path){return true;}}}return false;},getEditMode:function(C,p,D,o){var P=C.getPath(0);var m=C.getModel(0);var b,i,f,r,I,e,s,a,g;if(D==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||D==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return'Display';}if(m.getObject(P+"@Org.OData.Core.V1.Computed")){b=m.getObject(P+"@Org.OData.Core.V1.Computed/Bool")?m.getObject(P+"@Org.OData.Core.V1.Computed/Bool"):true;}if(m.getObject(P+"@Org.OData.Core.V1.Immutable")){i=m.getObject(P+"@Org.OData.Core.V1.Immutable/Bool")?m.getObject(P+"@Org.OData.Core.V1.Immutable/Bool"):true;}r=(b==true||i==true);var h=function(b,i){if(b){return b=="false";}if(i){return i=="true";}return true;};a=h(b,i);if(m.getObject(P+"@com.sap.vocabularies.Common.v1.FieldControl")){if(m.getObject(P+"@com.sap.vocabularies.Common.v1.FieldControl/$Path")){var j=m.getObject(P+"@com.sap.vocabularies.Common.v1.FieldControl");var k=m.createBindingContext(P+"@com.sap.vocabularies.Common.v1.FieldControl");g="($"+d.value(j,{context:k})+" === 1 ? false : true)";}else if(m.getObject(P+"@com.sap.vocabularies.Common.v1.FieldControl/$EnumMember")){f=m.getObject(P+"@com.sap.vocabularies.Common.v1.FieldControl/$EnumMember");r=(r||f=="com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly");}}if(r){if(!a||!o){return'Display';}else{return"{= !${IsActiveEntity} && !${HasActiveEntity} ? 'Editable' : 'Display'}";}}s="${ui>/editable} ? 'Editable' : 'Display'";I=g?"("+g+"&&"+s+")":"("+s+")";e=a||!o?"{= "+I+"}":"{= !${IsActiveEntity} && !${HasActiveEntity} ? 'Display' : "+I+"}";return e;},isLineItem:function(p,i){if(i.context.getPath().indexOf("@com.sap.vocabularies.UI.v1.LineItem")>-1){return true;}return false;},getRequiredForDataField:function(f,i){if(f!==undefined){if(f.$EnumMember&&f.$EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Mandatory"){return true;}else if(f.$Path){var e="{= $"+d.value(f,{context:i.context})+" === 7 ? true : false}";return e;}}else{return false;}}};F.isSemanticKey.requiresIContext=true;F.buildExpressionForTextValue.requiresIContext=true;F.getEditMode.requiresIContext=true;F.getRequiredForDataField.requiresIContext=true;return F;},true);
