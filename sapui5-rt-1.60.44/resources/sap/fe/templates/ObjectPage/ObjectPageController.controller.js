/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/mvc/Controller","sap/fe/controllerextensions/Transaction","sap/fe/controllerextensions/Routing","sap/fe/controllerextensions/EditFlow","sap/ui/model/json/JSONModel","sap/fe/controllerextensions/ContextManager"],function(q,C,T,R,E,J,a){"use strict";return C.extend("sap.fe.templates.ObjectPage.ObjectPageController",{transaction:T,routing:R,editFlow:E,contextManager:a,onInit:function(){this.getView().setModel(this.transaction.getUIModel(),"ui");this.contextManager.initializeContextManager();},onBeforeBinding:function(){var u=this.getView().getModel('ui');u.setProperty('/editable',false);var o=this.byId("objectPage");var s=function(e){o.scrollToSection(o.getScrollingSectionId());o.detachModelContextChange(s);};o.attachModelContextChange(s);o.getHeaderTitle().setBindingContext(null);o.getHeaderContent()[0].setBindingContext(null);o.getSections().forEach(function(S){S.getSubSections().forEach(function(b){b.setBindingContext(null);});});o.attachEvent("subSectionEnteredViewPort",function(e){var o=e.getSource();var S=e.getParameter("subSection");o.getHeaderTitle().setBindingContext(undefined);o.getHeaderContent()[0].setBindingContext(undefined);S.setBindingContext(undefined);});},onAfterBinding:function(b,p){var o=this.byId("objectPage");if(p&&p.parentBinding){var P=this.byId("paginator");if(!P.getListBinding()){P.setListBinding(p.parentBinding);}}o._triggerVisibleSubSectionsEvents();var d=b.getObject();if(d&&d.IsActiveEntity===false){this.getView().getModel('ui').setProperty('/editable',true);this.editFlow.handleDraftPatchEvents(b.getBinding());}}});});
