/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/m/MessageToast","sap/m/MessageItem","sap/m/MessageView","sap/m/Dialog","sap/m/Button","sap/ui/core/MessageType"],function(M,a,b,D,B,c){'use strict';function f(){var p;function i(P){return P.property?'( ${'+P.property+'} ? ("<p>'+P.property.substr(Math.max(P.property.lastIndexOf('/'),P.property.lastIndexOf('.'))+1)+' : " + '+'${'+P.property+'} + "</p>") : "" )':'';}function d(P){var h='';if(P.groupName&&P.property&&P.groupName!==p){h+='( ${'+P.property+'} ? "<br><h3>'+P.groupName+'</h3>" : "" ) + ';p=P.groupName;}return h;}function g(){var t="technicalDetails";return[{'groupName':'','property':t+"/status"},{'groupName':'','property':t+"/statusText"},{'groupName':'Application','property':t+"/error/@SAP__common.Application/ComponentId"},{'groupName':'Application','property':t+"/error/@SAP__common.Application/ServiceId"},{'groupName':'Application','property':t+"/error/@SAP__common.Application/ServiceRepository"},{'groupName':'Application','property':t+"/error/@SAP__common.Application/ServiceVersion"},{'groupName':'ErrorResolution','property':t+"/error/@SAP__common.ErrorResolution/Analysis"},{'groupName':'ErrorResolution','property':t+"/error/@SAP__common.ErrorResolution/Note"},{'groupName':'ErrorResolution','property':t+"/error/@SAP__common.ErrorResolution/DetailedNote"},{'groupName':'ErrorResolution','property':t+"/error/@SAP__common.ExceptionCategory"},{'groupName':'ErrorResolution','property':t+"/error/@SAP__common.TimeStamp"},{'groupName':'ErrorResolution','property':t+"/error/@SAP__common.TransactionId"},{'groupName':'Messages','property':t+"/error/code"},{'groupName':'Messages','property':t+"/error/message"}];}var h='(${technicalDetails} ? "<h2>Technical Details</h2>" : "") + ';g().forEach(function(P){h=h+d(P)+''+i(P)+' + ';});return h;}function F(){var h='(${'+'description} ? ("<h2>Description</h2>" + ${'+'description}) : "")';return h;}function s(){var o=sap.ui.getCore().getMessageManager(),d=o.getMessageModel(),u=d.getObject('/').filter(function(e){return e.target==='';});if(u.length===0){return Promise.resolve(true);}else if(u.length===1&&u[0].getType()===c.Success){return new Promise(function(r,e){M.show(u[0].message);o.removeMessages(u);});}else{return sap.ui.getCore().getLibraryResourceBundle("sap.fe",true).then(function(r){var e=new a({counter:'{counter}',title:'{message}',subtitle:'{additionalText}',longtextUrl:'{descriptionUrl}',type:'{type}',description:'{= ${'+'description} || ${technicalDetails} ? '+'"<html><body>" + '+F()+' + '+f()+'"</body></html>"'+' : "" }',markupDescription:true});var g=new b({showDetailsPageHeader:false,itemSelect:function(){h.setVisible(true);},items:{path:'/',filters:[new sap.ui.model.Filter('target',sap.ui.model.FilterOperator.EQ,'')],template:e}}),h=new B({icon:sap.ui.core.IconPool.getIconURI("nav-back"),visible:false,press:function(){g.navigateBack();this.setVisible(false);}});g.setModel(d);var i=new D({resizable:true,content:g,state:'Error',beginButton:new B({press:function(){i.close();o.removeMessages(u);},text:r.getText('SAPFE_CLOSE')}),customHeader:new sap.m.Bar({contentMiddle:[new sap.m.Text({text:r.getText('SAPFE_ERROR')})],contentLeft:[h]}),contentWidth:"37.5em",contentHeight:"21.5em",verticalScrolling:false,afterClose:function(E){e.destroy();h.destroy();g.destroy();i.destroy();}});i.open();});}}var m={showUnboundMessages:s};return m;});
