/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/UIComponent","sap/m/NavContainer","sap/fe/core/BusyHelper","sap/ui/core/ComponentContainer","sap/fe/core/internal/testableHelper","sap/fe/model/DraftModel","sap/fe/model/NamedBindingModel","sap/fe/controllerextensions/Routing","sap/ui/model/resource/ResourceModel","sap/ui/mdc/odata/v4/ValueListHelper"],function(q,U,N,B,C,t,D,a,R,b){"use strict";t.testableStatic(function(){},"suppressPageCreation");function g(A){var r=new R();var T={oAppComponent:A,oBusyHelper:null};function c(i){var o=sap.ui.getCore().getLibraryResourceBundle("sap.fe");return o.getText(i);}return{init:function(){var s=sap.ui.core.service.ServiceFactoryRegistry.get("sap.ushell.ui5service.ShellUIService");T.oShellServicePromise=(s&&s.createInstance())||Promise.reject();T.oShellServicePromise.catch(function(){q.sap.log.warning("No ShellService available");});var m=A.getModel();if(m){a.upgrade(m).then(function(){(U.prototype.init||q.noop).apply(A,arguments);T.oBusyHelper.setBusy(T.oShellServicePromise);T.oBusyHelper.setBusyReason("initAppComponent",false);D.isDraftModel(m).then(function(I){if(I){D.upgrade(m).then(function(){A.setModel(m.getDraftAccessModel(),"$draft");});}else{m.sUpdateGroupId="nondraft";}});});m.getMetaModel().requestObject("/$EntityContainer/").catch(function(e){r.navigateToMessagePage(c("SAPFE_APPSTART_TECHNICAL_ISSUES"),{title:c('SAPFE_ERROR'),description:e.message,navContainer:T.oNavContainer});});}var i=new b({bundleName:"sap/fe/messagebundle",async:true});i.getResourceBundle().then(function(o){i.getResourceBundle=function(){return o;};});A.setModel(i,"sap.fe.i18n");},exit:function(){if(T.oNavContainer){T.oNavContainer.destroy();}},createContent:function(){if(T.oNavContainer){return"";}T.oNavContainer=new N({id:"appContent"});T.oBusyHelper=new B(T);T.oBusyHelper.setBusyReason("initAppComponent",true,true);r.initializeRouting(A);return T.oNavContainer;}};}return U.extend("sap.fe.AppComponent",{metadata:{config:{fullWidth:true},routing:{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","controlId":"appContent","controlAggregation":"pages","async":true}},library:"sap.fe"},constructor:function(){var A=t.startApp();q.extend(this,g(this,A));(U.prototype.constructor||q.noop).apply(this,arguments);}});});
